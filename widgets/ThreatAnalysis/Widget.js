// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/CoordinateControl":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang jimu/utils dojo/on dojo/has dojo/query dojo/dom-attr dojo/dom-class dojo/dom-style dojo/string dojo/topic dojo/keys dojo/Deferred dojo/Evented dojo/dom dojo/dom-construct dojo/aspect jimu/BaseWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Tooltip dijit/TooltipDialog dijit/popup dojo/text!./templates/CoordinateControl.html esri/geometry/webMercatorUtils esri/graphic esri/geometry/Point esri/request esri/SpatialReference esri/tasks/GeometryService esri/tasks/ProjectParameters esri/toolbars/draw jimu/dijit/Message ./_CoordinateControlFormatNotation ./_CoordinateControlConfirmNotation jimu/portalUtils dojo/_base/sniff dijit/form/TextBox dijit/form/Textarea dijit/form/Select dijit/InlineEditBox".split(" "),
function(H,F,c,e,r,w,y,p,b,q,m,g,l,A,u,E,K,k,x,z,C,B,L,I,G,v,J,O,R,N,Q,W,aa,ia,ea,ja,oa,ra){return H([x,z,C,u],{templateString:v,baseClass:"jimu-coordinate-control",parentWidget:null,input:!0,label:null,showCopyButton:!1,showFormatButton:!1,zoomScale:null,showDeleteButton:!0,showExpandButton:!0,showDrawPoint:!0,drawButtonLabel:null,drawToolTip:null,graphicsLayer:null,type:"DD",inputFromText:!0,addSign:!1,hasCustomLabel:!1,numberOfDecimals:null,postMixInProperties:function(){this.nls=window.jimuNls.coordinateControl;
this.isRenderIdForAttrs=!0},constructor:function(a){H.safeMixin(this,a);this.uid=a.id||B.getUniqueId("cc");null===this.parentWidget&&console.error("No parentWidget parameter supplied: Parameter is mandatory");null===this.label&&console.info("No label parameter supplied (optional): Coordinate Control will have no label");null===this.zoomScale&&console.info("No zoomScale parameter supplied (optional): Coordinate Control will have no zoom button");null===this.drawButtonLabel&&console.info("No drawButtonLabel parameter supplied (optional): Coordinate Control will have no draw button");
null===this.graphicsLayer&&console.info("No graphicsLayer parameter supplied: Input graphics will not be shown on map")},postCreate:function(){this._frmtdlg=new I({id:this.uid+"_formatCoordinateTooltip",content:new ja({nls:this.nls,ct:this.type}),style:"width: 400px",onClose:c.hitch(this,this.popupDidClose)});k.after(this._frmtdlg,"onShow",c.hitch(this,function(){null!==this.numberOfDecimals?this._frmtdlg.content.significantDigitTextbox.set("value",this.numberOfDecimals):this._frmtdlg.content.significantDigitTextbox.set("value",
2);this._frmtdlg.content.frmtSelect.focus()}));k.after(this._frmtdlg,"onClose",c.hitch(this,function(){this.formatButton.focus()}));this.own(r(this._frmtdlg,"keydown",c.hitch(this,function(a){a.keyCode===l.ESCAPE&&G.close(this._frmtdlg)})));"DartTheme"===this.parentWidget.appConfig.theme.name&&b.add(this._frmtdlg.domNode,"coordinateControlDialog");this.defaultFormat&&(this._frmtdlg.content.formats[this.type].defaultFormat=this.defaultFormat);this._fetchPortalGeomSrvcUrl().then(c.hitch(this,function(a){""===
c.trim(a)&&(a=this.parentWidget.appConfig.geometryService);this.geomsrvc=new W(a);this.dt=new ia(this.parentWidget.map);this.initUI();this.setUIListeners()}))},_fetchPortalGeomSrvcUrl:function(){var a=new A;this.parentWidget.appConfig.portalUrl&&""!==c.trim(this.parentWidget.appConfig.portalUrl)?ra.getPortalSelfInfo(this.parentWidget.appConfig.portalUrl).then(c.hitch(this,function(f){f=f&&f.helperServices;var n="";f&&f.geometry&&f.geometry.url&&""!==f.geometry.url&&(n=f.geometry.url);a.resolve(n)}),
c.hitch(this,function(){a.resolve("")})):a.resolve("");return a.promise},initUI:function(){null===this.label?this.setHidden(this.coordNameContainer,!1):this.coordName.setValue(this.label);this.input?(this.zoomButton.parentNode.style.display="none",this.setHidden(this.expandButton,!0),this.setHidden(this.removeControlBtn,!0),this.coordName.set("disabled","disabled"),this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"),this.showDrawPoint?(this.drawPointButton.title=this.drawButtonLabel,
null===this.drawToolTip&&(this.drawToolTip=this.nls.tooltip)):this.setHidden(this.drawPointButton,!0)):(this.coordtext.disabled=!0,this.coordtext.placeholder="",this.setHidden(this.drawPointButton,!0),this.showExpandButton||(this.setHidden(this.expandButton,!0),b.remove(this.domNode,"coordinateContainer"),b.add(this.domNode,"outputCoordinateContainer"),b.add(this.cpbtn,"outputCopyBtn"),this.coordtext.readOnly=!0),this.showDeleteButton||this.setHidden(this.removeControlBtn,!0));this.showCopyButton||
(this.setHidden(this.cpbtn,!0),b.add(this.cpbtn,"inputCopyBtn"),p.set(this.cpbtn,"title",this.nls.copyAll));this.showFormatButton||this.setHidden(this.formatButton,!0);null===this.zoomScale&&this.setHidden(this.zoomButton,!0);this.formatButton.title=this.input?this.nls.formatInput:this.nls.formatOutput;p.set(this.formatButton,"aria-label",this.formatButton.title)},setUIListeners:function(){this.input||g.subscribe("INPUTPOINTDIDCHANGE",c.hitch(this,this.mapWasClicked));g.subscribe("INPUTERROR",c.hitch(this,
this.inputError));g.subscribe("VALIDINPUT",c.hitch(this,function(a){this.toggleZoomButton(a)}));this.own(r(this.expandButton,"click",c.hitch(this,this.expandButtonWasClicked)));this.own(r(this.expandButton,"keydown",c.hitch(this,function(a){if(a.keyCode===l.ENTER||a.keyCode===l.SPACE)this.expandButtonWasClicked(a),a.preventDefault()})));this.own(r(this.zoomButton,"click",c.hitch(this,this.zoomButtonWasClicked)));this.own(r(this.zoomButton,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==
l.SPACE||this.zoomButtonWasClicked(a)})));this.own(r(this.coordName,"change",c.hitch(this,this.coordNameDidChange)));this.cpbtn.addEventListener("click",c.hitch(this,this.cpBtnWasClicked));this.own(r(this.cpbtn,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||this.cpBtnWasClicked(a)})));this.subVal1CpBtn.addEventListener("click",c.hitch(this,this.cpSubBtnWasClicked));this.own(r(this.subVal1CpBtn,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||
this.cpSubBtnWasClicked(a)})));this.subVal2CpBtn.addEventListener("click",c.hitch(this,this.cpSubBtnWasClicked));this.own(r(this.subVal2CpBtn,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||this.cpSubBtnWasClicked(a)})));this.subVal3CpBtn.addEventListener("click",c.hitch(this,this.cpSubBtnWasClicked));this.own(r(this.subVal3CpBtn,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||this.cpSubBtnWasClicked(a)})));this.subVal4CpBtn.addEventListener("click",
c.hitch(this,this.cpSubBtnWasClicked));this.own(r(this.subVal4CpBtn,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||this.cpSubBtnWasClicked(a)})));this.own(r(this.formatButton,"click",c.hitch(this,this.formatButtonWasClicked)));this.own(r(this.formatButton,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||this.formatButtonWasClicked(a)})));this.own(r(this.drawPointButton,"click",c.hitch(this,this.drawPointButtonWasClicked)));this.own(r(this.drawPointButton,
"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||this.drawPointButtonWasClicked(a)})));this.own(r(this.removeControlBtn,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||this.remove()})));this.own(r(this._frmtdlg.content.applyButton,"click",c.hitch(this,this.formatDialogApplyButtonClicked)));this.own(r(this._frmtdlg.content.applyButton,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||this.formatDialogApplyButtonClicked()})));
this.own(r(this._frmtdlg.content.cancelButton,"click",c.hitch(this,function(){G.close(this._frmtdlg)})));this.own(r(this._frmtdlg.content.cancelButton,"keydown",c.hitch(this,function(a){a.keyCode!==l.ENTER&&a.keyCode!==l.SPACE||G.close(this._frmtdlg)})));this.own(r(this.coordtext,"keydown",c.hitch(this,this.coordTextInputKeyWasPressed)));this.own(r(this.coordtext,"input",c.hitch(this,function(){this.currentClickPointDD=null;this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none");
this.emit("coordinates-deleted",{})})));this.own(this.geomsrvc.on("error",c.hitch(this,this.geomSrvcDidFail)));this.own(r(this.dt,"draw-complete",c.hitch(this,this.drawComplete)));this.own(k.after(this.parentWidget,"onClose",c.hitch(this,function(){this.input&&b.contains(this.drawPointButton,"drawPointBtn-active")&&this.deactivateDrawTool();this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"closed"===this.parentWidget.state&&G.close(this._frmtdlg)})));this.own(k.after(this.parentWidget,"onOpen",
c.hitch(this,function(){var a=this.parentWidget.getParent().getParent().domNode;this.own(r(a,"click",c.hitch(this,function(f){"settingBtn"!==f.target.className&&this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"active"===this.parentWidget.state&&G.close(this._frmtdlg)})))})))},formatDialogApplyButtonClicked:function(){this._frmtdlg.content.significantDigitTextbox.isValid()?(this.type=this._frmtdlg.content.ct,this.updateDisplay(),this.input?this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+
")"):this.hasCustomLabel&&this.coordName.set("value",this.label),G.close(this._frmtdlg)):this._frmtdlg.content.significantDigitTextbox.focus()},popupDidClose:function(){if(this._frmtdlg.content.isCanceled)this.addSign!==this._frmtdlg.content.addSignChkBox.checked&&this._frmtdlg.content.addSignChkBox.setValue(this.addSign);else{this.addSign=this._frmtdlg.content.addSignChkBox.checked;this.numberOfDecimals=this._frmtdlg.content.significantDigitTextbox.value;var a=this._frmtdlg.content.ct;this.type!==
a&&(this.type=a,this.updateDisplay())}},coordNameDidChange:function(){this.hasCustomLabel=!0},cpSubBtnWasClicked:function(a){this[a.currentTarget.id.split("~")[0]].select();try{var f=document.execCommand("copy")}catch(n){f=!1}this.showToolTip(a.currentTarget.id,f?this.nls.copySuccessful:this.nls.copyFailed)},cpBtnWasClicked:function(a){a.preventDefault();if(this.input){a=B.toArray().filter(function(d){return"jimu-coordinate-control"===d.baseClass&&!d.input});var f=a.map(function(d){if(d.coordtext)return d.coordtext.value}).join("\r\n");
a=this.coordtext.value;this.coordtext.value=a+"\r\n"+f;this.selectText(this.coordtext);try{var n=document.execCommand("copy")}catch(d){n=!1}this.coordtext.value=a}else{this.selectText(this.coordtext);try{n=document.execCommand("copy")}catch(d){n=!1}}this.showToolTip(this.cpbtn.id,n?this.nls.copySuccessful:this.nls.copyFailed)},selectText:function(a){var f=document.getSelection();f.removeAllRanges();a.focus();var n=/Edge/.test(navigator.userAgent),d=!!window.MSInputMethodContext&&!!document.documentMode;
if(w("ff")||w("chrome")||w("safari"))!this.input&&this.coordtext.disabled?(this.coordtext.disabled=!1,a.select(),this.coordtext.disabled=!0):a.select();n&&a.select();d&&(n=document.createRange(),n.selectNode(a),f.addRange(n))},showToolTip:function(a,f){var n=E.byId(a);L.show(f,n);setTimeout(function(){L.hide(n)},1E3)},geomSrvcDidComplete:function(a){0>=a[0].length?(new ea({message:this.nls.parseCoordinatesError}),g.publish("INPUTERROR")):(this.currentClickPointDD=this.currentClickPoint=new R(a[0][0],
a[0][1],new Q({wkid:4326})),this.input&&(this.currentClickPoint.spatialReference.equals(this.parentWidget.map.spatialReference)?this.parentWidget.map.centerAt(this.currentClickPoint):this.getProjectedPoint(this.currentClickPoint).then(c.hitch(this,function(f){this.currentClickPoint=f;this.parentWidget.map.centerAt(this.currentClickPoint)}),c.hitch(this,function(f){console.error(f);g.publish("INPUTERROR")})),this.updateDisplay(),g.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0}),
g.publish("VALIDINPUT",{show:!0})))},geomSrvcDidFail:function(){new ea({message:this.nls.parseCoordinatesError});g.publish("INPUTERROR")},coordTextInputKeyWasPressed:function(a){if(a.keyCode===l.ENTER){a.preventDefault();var f=this.getCleanInput(a.currentTarget.value);this.inputFromText=!1;this.getCoordinateType(f).then(c.hitch(this,function(n){if(n)if(1===n.length){var d=this.processCoordTextInput(f,n[0],!1);this.getXYNotation(d,n[0].conversionType).then(c.hitch(this,function(P){0<P[0].length?this.geomSrvcDidComplete(P):
this.geomSrvcDidFail()}))}else this.confirmNotationDialog||(this.confirmNotationDialog=new oa({title:this.nls.comfirmInputNotation,nls:this.nls,options:n,style:"width: 400px",hasSkipCheckBox:!1,theme:this.parentWidget.appConfig.theme.name})),this.confirmNotationDialog.show().then(c.hitch(this,function(){var P=F.filter(n,function(T){return T.name===this.confirmNotationDialog.comboOptions.get("value")},this),U=this.processCoordTextInput(f,P[0],!1);this.getXYNotation(U,P[0].conversionType).then(c.hitch(this,
function(T){0<T[0].length?this.geomSrvcDidComplete(T):this.geomSrvcDidFail()}))},function(){}));else new ea({message:this.nls.parseCoordinatesError}),g.publish("INPUTERROR")}));p.set(this.coordtext,"value",f);this.emit("get-coordinate-complete",f);this.currentClickPoint=null}if(a.keyCode===l.BACKSPACE||a.keyCode===l.DELETE)this.currentClickPointDD=null,this.zoomButton&&this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none"),this.emit("coordinates-deleted",{})},getFormattedCoordinateText:function(){return this.coordtext.value},
getCurrentMapCoordinate:function(){return this.currentClickPoint},getMapCoordinateDD:function(){return this.currentClickPointDD},deactivateDrawTool:function(){this.dt.deactivate();b.remove(this.drawPointButton,"drawPointBtn-active")},processCoordTextInput:function(a,f,n){var d=f.pattern.exec(a),P=!1,U=f.name;switch(f.name){case "DD":var T=d[2];var ca=d[7];var V=d[10];var Z=d[16];var ba=d[3].replace(/[,:]/,".");var da=d[11].replace(/[,:]/,".");U="DD";break;case "DDrev":T=d[11];ca=d[16];V=d[2];Z=d[8];
ba=d[12].replace(/[,:]/,".");da=d[3].replace(/[,:]/,".");U="DD";break;case "DDM":T=d[2];ca=d[7];V=d[10];Z=d[15];ba=d[3];var na=d[4].replace(/[,:]/,".");da=d[11];var h=d[12].replace(/[,:]/,".");U="DDM";break;case "DDMrev":T=d[10];ca=d[15];V=d[2];Z=d[7];ba=d[11];na=d[12].replace(/[,:]/,".");da=d[3];h=d[4].replace(/[,:]/,".");U="DDM";break;case "DMS":T=d[2];ca=d[8];V=d[11];Z=d[17];ba=d[3];na=d[4];var t=d[5].replace(/[,:]/,".");da=d[12];h=d[13];var D=d[14].replace(/[,:]/,".");U="DMS";break;case "DMSrev":T=
d[11],ca=d[17],V=d[2],Z=d[8],ba=d[12],na=d[13],t=d[14].replace(/[,:]/,"."),da=d[3],h=d[4],D=d[5].replace(/[,:]/,"."),U="DMS"}T&&ca?(P=!0,T=(new RegExp(/[Ss-]/)).test(T)?"-":"+"):T=T&&(new RegExp(/[Ss-]/)).test(T)?"-":ca&&(new RegExp(/[Ss-]/)).test(ca)?"-":"+";V&&Z?(P=!0,V=(new RegExp(/[Ww-]/)).test(V)?"-":"+"):V=V&&(new RegExp(/[Ww-]/)).test(V)?"-":Z&&(new RegExp(/[Ww-]/)).test(Z)?"-":"+";P&&(n||new ea({message:this.nls.latLongWarningMessage}));switch(U){case "DD":a=T+ba+","+V+da;break;case "DDM":a=
T+ba+" "+na+","+V+da+" "+h;break;case "DMS":a=T+ba+" "+na+" "+t+","+V+da+" "+h+" "+D}return a},zoomButtonWasClicked:function(){this.currentClickPoint&&(this.parentWidget.map.getZoom()<this.zoomScale?this.parentWidget.map.centerAt(this.currentClickPoint).then(c.hitch(this,function(){this.parentWidget.map.setScale(this.zoomScale)})):this.parentWidget.map.centerAt(this.currentClickPoint))},setHidden:function(a,f){q.set(a,"display","none");f&&K.destroy(a.parentNode)},setVisible:function(a){q.set(a,"display",
"inline-flex")},remove:function(){this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&G.close(this._frmtdlg);this.destroyRecursive();this.emit("removeCoordsControl")},mapWasClicked:function(a){this.currentClickPoint=a.mapPoint;this.getDDPoint(a.mapPoint).then(c.hitch(this,function(f){this.currentClickPointDDDD=this.currentClickPointDD=f;this.inputFromText=a.inputFromText?!0:!1;this.updateDisplay()}),c.hitch(this,function(f){console.error(f)}))},getDDPoint:function(a){var f=new A,n=new Q(3857);J.canProject(a,
n)?f.resolve(J.webMercatorToGeographic(J.project(a,n))):(n={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:JSON.stringify(a.spatialReference.toJson()),outSR:4326,extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"},(new N(n,{usePost:!1})).then(c.hitch(this,function(d){d=(d=d&&d.transformations?d.transformations:void 0)&&0<d.length?d[0].wkid:void 0;var P=new aa;P.outSR=new Q(4326);P.geometries=[a];P.transformForward=!0;P.transformation=
d;this.geomsrvc.project(P,c.hitch(this,function(U){f.resolve(U[0])}),function(U){f.reject(U)})}),c.hitch(this,function(d){f.reject(d)})));return f},getProjectedPoint:function(a){var f=new A;if(J.canProject(a,this.parentWidget.map))f.resolve(J.geographicToWebMercator(a));else{var n={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:4326,outSR:JSON.stringify(this.parentWidget.map.spatialReference.toJson()),extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",
callbackParamName:"callback"};(new N(n,{usePost:!1})).then(c.hitch(this,function(d){d=(d=d&&d.transformations?d.transformations:void 0)&&0<d.length&&d[0].geoTransforms&&0<d[0].geoTransforms.length&&d[0].geoTransforms[0].wkid?d[0].geoTransforms[0].wkid:void 0;var P=new aa;P.outSR=new Q(this.parentWidget.map.spatialReference);P.geometries=[a];P.transformForward=!0;P.transformation=d;this.geomsrvc.project(P,c.hitch(this,function(U){f.resolve(U[0])}),function(U){f.reject(U)})}),c.hitch(this,function(d){f.reject(d)}))}return f},
expandButtonWasClicked:function(){b.toggle(this.coordcontrols,"expanded");b.contains(this.coordcontrols,"expanded")?(b.remove(this.expandButton,"expandBtn"),b.add(this.expandButton,"collapseBtn"),p.set(this.expandButton,"aria-expanded","true")):(b.remove(this.expandButton,"collapseBtn"),b.add(this.expandButton,"expandBtn"),p.set(this.expandButton,"aria-expanded","false"));this.setSubCoordUI(b.contains(this.coordcontrols,"expanded"));this._setCoordControlsTabindex(b.contains(this.coordcontrols,"expanded"));
this.emit("expandButtonClicked",b.contains(this.coordcontrols,"expanded"))},_setCoordControlsTabindex:function(a){var f=[];if(a){var n=0;a=-1}else n=-1,a=0;f=y("input[tabindex\x3d'"+a+"']",this.coordcontrols);f=f.concat(y("span[tabindex\x3d'"+a+"']",this.coordcontrols));F.forEach(f,c.hitch(this,function(d){p.set(d,"tabindex",n)}))},formatButtonWasClicked:function(){this._frmtdlg.content.setCt(this.type);G.open({popup:this._frmtdlg,around:this.formatButton})},drawPointButtonWasClicked:function(){if(b.contains(this.drawPointButton,
"drawPointBtn-active"))this.dt.deactivate(),this.parentWidget.map.enableMapNavigation();else{this.parentWidget.map.disableMapNavigation();this.dt.activate(ia.POINT);var a=this.dt._tooltip;a&&(a.innerHTML=this.drawToolTip)}b.toggle(this.drawPointButton,"drawPointBtn-active")},drawComplete:function(a){var f={};f.mapPoint=a.geometry;this.parentWidget.map.enableMapNavigation();this.mapWasClicked(f)},setSubCoordUI:function(a){if(a){a="165px";switch(this.type){case "DD":case "DMS":case "DDM":this.sub1label.innerHTML=
"Lat";this.sub2label.innerHTML="Lon";this.setHidden(this.sub3,!1);this.setHidden(this.sub4,!1);a="90px";break;case "GARS":this.sub1label.innerHTML="Lon";this.sub2label.innerHTML="Lat";this.sub3label.innerHTML="Quadrant";this.sub4label.innerHTML="Key";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "GEOREF":this.sub1label.innerHTML="15\u00b0 Quad";this.sub2label.innerHTML="1\u00b0 Quad";this.sub3label.innerHTML="Easting";this.setVisible(this.sub3);this.sub4label.innerHTML="Northing";
this.setVisible(this.sub4);break;case "USNG":case "MGRS":this.sub1label.innerHTML="GZD";this.sub2label.innerHTML="Grid Sq";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM":this.sub1label.innerHTML="Zone";this.sub2label.innerHTML="Band";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM_H":this.sub1label.innerHTML="Zone",
this.sub2label.innerHTML="Hemisphere",this.sub3label.innerHTML="Easting",this.sub4label.innerHTML="Northing",this.setVisible(this.sub3),this.setVisible(this.sub4)}q.set(this.coordcontrols,"display","block");q.set(this.coordcontrols,"height",a);q.set(this.coordcontrols,"width","300px")}else q.set(this.coordcontrols,"display","none"),q.set(this.coordcontrols,"height","0px");a=this.uid.split("_")[1];p.set(this["cc_"+a+"sub1val"],"aria-label",this.sub1label.innerHTML);p.set(this["cc_"+a+"sub2val"],"aria-label",
this.sub2label.innerHTML);p.set(this["cc_"+a+"sub3val"],"aria-label",this.sub3label.innerHTML);p.set(this["cc_"+a+"sub4val"],"aria-label",this.sub4label.innerHTML)},setCoordUI:function(a){if(a){var f=this.uid.split("_")[1];if(!this["cc_"+f+"sub1val"]||this.input&&this.inputFromText)return;var n=this._frmtdlg.content.formats[this.type];n=n.useCustom?n.customFormat:n.defaultFormat;switch(this.type){case "DD":a=this.getFormattedDDStr(a,n,this.addSign);this["cc_"+f+"sub1val"].value=m.substitute("${xcrd}",
{xcrd:a.latdeg});this["cc_"+f+"sub2val"].value=m.substitute("${ycrd}",{ycrd:a.londeg});var d=a.formatResult;break;case "DDM":a=this.getFormattedDDMStr(a,n,this.addSign);this["cc_"+f+"sub1val"].value=m.substitute("${latd} ${latm}",{latd:a.latdeg,latm:a.latmin});this["cc_"+f+"sub2val"].value=m.substitute("${lond} ${lonm}",{lond:a.londeg,lonm:a.lonmin});d=a.formatResult;break;case "DMS":a=this.getFormattedDMSStr(a,n,this.addSign);this["cc_"+f+"sub1val"].value=m.substitute("${latd} ${latm} ${lats}",{latd:a.latdeg,
latm:a.latmin,lats:a.latsec});this["cc_"+f+"sub2val"].value=m.substitute("${lond} ${lonm} ${lons}",{lond:a.londeg,lonm:a.lonmin,lons:a.lonsec});d=a.formatResult;break;case "USNG":a=this.getFormattedUSNGStr(a,n,!1);this["cc_"+f+"sub1val"].value=a.gzd;this["cc_"+f+"sub2val"].value=a.grdsq;this["cc_"+f+"sub3val"].value=a.easting;this["cc_"+f+"sub4val"].value=a.northing;d=a.formatResult;break;case "MGRS":a=this.getFormattedMGRSStr(a,n,!1);this["cc_"+f+"sub1val"].value=a.gzd;this["cc_"+f+"sub2val"].value=
a.grdsq;this["cc_"+f+"sub3val"].value=a.easting;this["cc_"+f+"sub4val"].value=a.northing;d=a.formatResult;break;case "GARS":a=this.getFormattedGARSStr(a,n,!1);this["cc_"+f+"sub1val"].value=a.lon;this["cc_"+f+"sub2val"].value=a.lat;this["cc_"+f+"sub3val"].value=a.quadrant;this["cc_"+f+"sub4val"].value=a.key;d=a.formatResult;break;case "GEOREF":a=this.getFormattedGEOREFStr(a,n,!1);this["cc_"+f+"sub1val"].value=a.lon+a.lat;this["cc_"+f+"sub2val"].value=a.quadrant15lon+a.quadrant15lat;this["cc_"+f+"sub3val"].value=
a.quadrant1lon;this["cc_"+f+"sub4val"].value=a.quadrant1lat;d=a.formatResult;break;case "UTM":a=this.getFormattedUTMStr(a,n,!1);a.bandLetter.match(/^[AaBbYyZz]/)?(this["cc_"+f+"sub1val"].value="",this["cc_"+f+"sub2val"].value="",this["cc_"+f+"sub3val"].value="",this["cc_"+f+"sub4val"].value="",a.formatResult=""):(this["cc_"+f+"sub1val"].value=a.zone,this["cc_"+f+"sub2val"].value=a.bandLetter,this["cc_"+f+"sub3val"].value=a.easting,this["cc_"+f+"sub4val"].value=a.westing);d=a.formatResult;break;case "UTM_H":a=
this.getFormattedUTMHStr(a,n,!1),a.hemisphere.match(/^[AaBbYyZz]/)?(this["cc_"+f+"sub1val"].value="",this["cc_"+f+"sub2val"].value="",this["cc_"+f+"sub3val"].value="",this["cc_"+f+"sub4val"].value="",a.formatResult=""):(this["cc_"+f+"sub1val"].value=a.zone,this["cc_"+f+"sub2val"].value=a.hemisphere,this["cc_"+f+"sub3val"].value=a.easting,this["cc_"+f+"sub4val"].value=a.westing),d=a.formatResult}}else d="";this.coordcontrols&&this.setSubCoordUI(b.contains(this.coordcontrols,"expanded"));this.coordtext&&
(p.set(this.coordtext,"value",d),this.emit("get-coordinate-complete",d))},getFormattedCoordinates:function(){this.getCoordValues(this.currentClickPointDD,this.type,4).then(c.hitch(this,function(a){this.setCoordUI(a)}),c.hitch(this,function(a){console.log(a)}))},updateDisplay:function(){this.currentClickPoint&&(this.currentClickPointDD||(this.currentClickPointDD=this.currentClickPoint),this.getFormattedCoordinates(this.currentClickPointDD),this.input&&(null!==this.graphicsLayer&&(this.graphicsLayer.clear(),
this.currentClickPoint.spatialReference.equals(this.parentWidget.map.spatialReference)?this.graphicsLayer.add(new O(this.currentClickPoint)):this.getProjectedPoint(this.currentClickPointDD).then(c.hitch(this,function(a){this.graphicsLayer.add(new O(a))}),c.hitch(this,function(a){console.error(a)}))),g.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0}),g.publish("VALIDINPUT",{show:!0})))},clear:function(){this.coordtext.value="";this.currentClickPointDDDD=this.currentClickPointDD=
this.currentClickPoint=null;this.graphicsLayer.clear()},inputError:function(){this.setCoordUI();this.toggleZoomButton(!1)},toggleZoomButton:function(a){this.zoomButton&&this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display=a?"inline-block":"none")},getCleanInput:function(a){a=a.replace(/\n/g,"");a=a.replace(/\s+/g," ").trim();return a.toUpperCase()},getCoordValues:function(a,f,n){var d=new A;a={sr:4326,coordinates:[[a.x,a.y]],conversionType:f.name?f.name:f,numOfDigits:n||6,rounding:!0,
addSpaces:!1};switch(f){case "DD":a.numOfDigits=6;break;case "USNG":a.numOfDigits=5;break;case "MGRS":a.conversionMode="mgrsDefault";a.numOfDigits=5;break;case "UTM_H":a.conversionType="utm";a.conversionMode="utmNorthSouth";a.addSpaces=!0;break;case "UTM":a.conversionType="utm";a.conversionMode="utmDefault";a.addSpaces=!0;break;case "GARS":a.conversionMode="garsDefault"}this.geomsrvc.toGeoCoordinateString(a).then(function(P){d.resolve(P)},function(){d.resolve(null)});return d.promise},getXYNotation:function(a,
f){var n=new A;var d=f.name?f.name:f;f={sr:4326,conversionType:d,strings:[]};switch(d){case "DD":case "DDM":case "DMS":f.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(a);break;case "DDrev":f.conversionType="DD";f.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(a);break;case "DDMrev":f.conversionType="DDM";f.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(a);break;case "DMSrev":f.conversionType=
"DMS";f.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(a);break;case "USNG":f.strings.push(a);f.addSpaces="false";break;case "MGRS":f.conversionMode="mgrsNewStyle";f.strings.push(a);f.addSpaces="false";break;case "UTM_H":f.conversionType="utm";f.conversionMode="utmNorthSouth";f.strings.push(a);break;case "UTM":f.conversionType="utm";f.conversionMode="utmDefault";f.strings.push(a);break;case "GARS":f.conversionMode="garsCenter";f.strings.push(a);break;case "GEOREF":f.strings.push(a)}this.geomsrvc.fromGeoCoordinateString(f).then(function(P){n.resolve(P)},
function(){n.resolve(null)});return n.promise},getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,
/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,
/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(a){return a.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),
notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM_H"}]},getCoordinateType:function(a){var f=this.getCleanInput(a);a=new A;var n=this.getNotations();f=F.filter(n,function(d){return d.pattern.test(this.v)},{v:f});0<f.length?a.resolve(f):a.resolve(null);return a.promise},getFormattedDDStr:function(a,
f,n){var d={};d.sourceValue=a;d.sourceFormatString=f;a=a[0].split(/[ ,]+/);d.latdeg=a[0].replace(/[nNsS]/,"");d.londeg=a[1].replace(/[eEwW]/,"");null!==this.numberOfDecimals?(d.latdeg=e.localizeNumber(parseFloat(d.latdeg),{places:this.numberOfDecimals}),d.londeg=e.localizeNumber(parseFloat(d.londeg),{places:this.numberOfDecimals})):(d.latdeg=e.localizeNumber(parseFloat(d.latdeg)),d.londeg=e.localizeNumber(parseFloat(d.londeg)));n&&("N"===a[0].slice(-1)?d.latdeg="+"+d.latdeg:d.latdeg="-"+d.latdeg,
"W"===a[1].slice(-1)?d.londeg="-"+d.londeg:d.londeg="+"+d.londeg);f=f.replace(/X/,d.londeg);f=f.replace(/[eEwW]/,a[1].slice(-1));f=f.replace(/[nNsS]/,a[0].slice(-1));f=f.replace(/Y/,d.latdeg);d.formatResult=f;return d},getFormattedDDMStr:function(a,f,n){var d={};d.sourceValue=a;d.sourceFormatString=f;d.parts=a[0].split(/[ ,]+/);d.latdeg=d.parts[0];d.latmin=d.parts[1].replace(/[nNsS]/,"");d.londeg=d.parts[2];d.lonmin=d.parts[3].replace(/[eEwW]/,"");null!==this.numberOfDecimals?(d.latmin=e.localizeNumber(parseFloat(d.latmin),
{places:this.numberOfDecimals}),d.lonmin=e.localizeNumber(parseFloat(d.lonmin),{places:this.numberOfDecimals})):(d.latmin=e.localizeNumber(parseFloat(d.latmin)),d.lonmin=e.localizeNumber(parseFloat(d.lonmin)));n&&("N"===d.parts[1].slice(-1)?d.latdeg="+"+d.latdeg:d.latdeg="-"+d.latdeg,"W"===d.parts[3].slice(-1)?d.londeg="-"+d.londeg:d.londeg="+"+d.londeg);a=f.replace(/[EeWw]/,d.parts[3].slice(-1));a=a.replace(/Y/,d.lonmin);a=a.replace(/X/,d.londeg);a=a.replace(/[NnSs]/,d.parts[1].slice(-1));a=a.replace(/B/,
d.latmin);a=a.replace(/A/,d.latdeg);d.formatResult=a;return d},getFormattedDMSStr:function(a,f,n){var d={};d.sourceValue=a;d.sourceFormatString=f;d.parts=a[0].split(/[ ,]+/);d.latdeg=d.parts[0];d.latmin=d.parts[1];d.latsec=d.parts[2].replace(/[NnSs]/,"");d.londeg=d.parts[3];d.lonmin=d.parts[4];d.latsec=null!==this.numberOfDecimals?e.localizeNumber(parseFloat(d.latsec),{places:this.numberOfDecimals}):e.localizeNumber(parseFloat(d.latsec));d.parts[5]&&(d.lonsec=d.parts[5].replace(/[EWew]/,""),d.lonsec=
null!==this.numberOfDecimals?e.localizeNumber(parseFloat(d.lonsec),{places:this.numberOfDecimals}):e.localizeNumber(parseFloat(d.lonsec)));n&&("N"===d.parts[2].slice(-1)?d.latdeg="+"+d.latdeg:d.latdeg="-"+d.latdeg,"W"===d.parts[5].slice(-1)?d.londeg="-"+d.londeg:d.londeg="+"+d.londeg);a=f.replace(/A/,d.latdeg);a=a.replace(/B/,d.latmin);a=a.replace(/C/,d.latsec);a=a.replace(/X/,d.londeg);a=a.replace(/Y/,d.lonmin);a=a.replace(/Z/,d.lonsec);a=a.replace(/[NnSs]/,d.parts[2].slice(-1));d.parts[5]&&(a=a.replace(/[EeWw]/,
d.parts[5].slice(-1)));d.formatResult=a;return d},getFormattedUSNGStr:function(a,f){var n={};n.sourceValue=a;n.sourceFormatString=f;a[0].match(/^[ABYZ]/)?n.gzd=a[0].match(/[ABYZ]/)[0].trim():n.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();a[0].replace(n.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)&&(n.grdsq=a[0].replace(n.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim());a[0].replace(n.gzd+n.grdsq,"").match(/^\d{1,5}/)&&(n.easting=a[0].replace(n.gzd+n.grdsq,"").match(/^\d{1,5}/)[0].trim());a[0].replace(n.gzd+
n.grdsq,"").match(/\d{1,5}$/)&&(n.northing=a[0].replace(n.gzd+n.grdsq,"").match(/\d{1,5}$/)[0].trim());a=f.replace(/Y/,n.northing);a=a.replace(/X/,n.easting);a=a.replace(/S/,n.grdsq);a=a.replace(/Z/,n.gzd);n.formatResult=a;return n},getFormattedMGRSStr:function(a,f){var n={};n.sourceValue=a;n.sourceFormatString=f;a[0].match(/^[ABYZ]/)?n.gzd=a[0].match(/[ABYZ]/)[0].trim():n.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();n.grdsq=a[0].replace(n.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();n.easting=
a[0].replace(n.gzd+n.grdsq,"").match(/^\d{1,5}/)[0].trim();n.northing=a[0].replace(n.gzd+n.grdsq,"").match(/\d{1,5}$/)[0].trim();a=f.replace(/Y/,n.northing);a=a.replace(/X/,n.easting);a=a.replace(/S/,n.grdsq);a=a.replace(/Z/,n.gzd);n.formatResult=a;return n},getFormattedGARSStr:function(a,f){var n={};n.sourceValue=a;n.sourceFormatString=f;n.lon=a[0].match(/\d{3}/);n.lat=a[0].match(/[a-zA-Z]{2}/);a=a[0].match(/\d*$/);n.quadrant=a[0][0];n.key=a[0][1];f=f.replace(/K/,n.key);f=f.replace(/Q/,n.quadrant);
f=f.replace(/Y/,n.lat);f=f.replace(/X/,n.lon);n.formatResult=f;return n},getFormattedGEOREFStr:function(a,f){var n={};n.sourceValue=a;n.sourceFormatString=f;n.lon=a[0].match(/[a-zA-Z]{1}/)[0].trim();n.lat=a[0].replace(n.lon,"").match(/[a-zA-Z]{1}/)[0].trim();n.quadrant15lon=a[0].replace(n.lon+n.lat,"").match(/[a-zA-Z]{1}/)[0].trim();n.quadrant15lat=a[0].replace(n.lon+n.lat+n.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();a=a[0].replace(n.lon+n.lat+n.quadrant15lon+n.quadrant15lat,"");n.quadrant1lon=
a.substr(0,a.length/2);n.quadrant1lat=a.substr(a.length/2,a.length);f=f.replace(/Y/,n.quadrant1lat);f=f.replace(/X/,n.quadrant1lon);f=f.replace(/D/,n.quadrant15lat);f=f.replace(/C/,n.quadrant15lon);f=f.replace(/B/,n.lat);f=f.replace(/A/,n.lon);n.formatResult=f;return n},getFormattedUTMStr:function(a,f){var n={};n.sourceValue=a;n.sourceFormatString=f;n.parts=a[0].split(/[ ,]+/);n.zone=n.parts[0].replace(/[A-Z]/,"");n.bandLetter=n.parts[0].slice(-1);n.easting=n.parts[1];n.westing=n.parts[2];a=f.replace(/Y/,
n.westing);a=a.replace(/X/,n.easting);a=a.replace(/B/,n.bandLetter);a=a.replace(/Z/,n.zone);n.formatResult=a;return n},getFormattedUTMHStr:function(a,f){var n={};n.sourceValue=a;n.sourceFormatString=f;n.parts=a[0].split(/[ ,]+/);n.zone=n.parts[0].replace(/[A-Z]/,"");n.hemisphere=n.parts[0].slice(-1);n.easting=n.parts[1];n.westing=n.parts[2];a=f.replace(/Y/,n.westing);a=a.replace(/X/,n.easting);a=a.replace(/H/,n.hemisphere);a=a.replace(/Z/,n.zone);n.formatResult=a;return n}})})},"jimu/dijit/_CoordinateControlFormatNotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/formSelect jimu/dijit/CheckBox dijit/form/NumberSpinner".split(" "),
function(H,F,c,e,r,w,y,p){return H([w,y,p],{baseClass:"jimu-coordinate-control",templateString:'\x3cdiv\x3e\x3cspan class\x3d"formatText"\x3e${nls.editCoordinateDialogTitle}\x3c/span\x3e\x3cdiv class\x3d"controlContainer"\x3e\x3cselect tabindex\x3d"0" class\x3d"selectFormat" data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.editCoordinateDialogTitle}" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\x3c/select\x3e\x3cinput tabindex\x3d"0" type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput"\x3e\x3c/input\x3e\x3cdiv class\x3d"settingsContainer" data-dojo-attach-point\x3d"prefixContainer"\x3e\x3cdiv class \x3d "esriCTSignificantDigitNode"\x3e\x3cdiv class\x3d"formatText esriCTSignificantDigitLabel"title \x3d"${nls.significantDigitLabel}"\x3e${nls.significantDigitLabel}\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"significantDigitTextbox" value\x3d"2" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"constraints:{min:0,max:100,places:0}" aria-label\x3d"${nls.significantDigitLabel} style\x3d"width:50%"\x3e\x3c/div\x3e\x3c/div\x3e \x3cdiv class\x3d"formatText" data-dojo-attach-point\x3d"addSignChkBox" label\x3d"${nls.posNegPrefixLabel}" data-dojo-type\x3d"jimu/dijit/CheckBox"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btnContainer"\x3e\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.applyButtonLabel}" data-dojo-attach-point\x3d"applyButton" class\x3d"jimu-btn"\x3e${nls.applyButtonLabel}\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"cancelButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.cancelButtonLabel}" class\x3d"jimu-btn formatCoordCancelButton"\x3e${nls.cancelButtonLabel}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
isCanceled:!1,formats:{},setCt:function(b){this.ct=b;this.frmtSelect.set("value",this.ct)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",customFormat:null,
useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},UTM_H:{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};var b=[],q;for(q in this.formats){var m={value:q,label:this.nls.notations[q]};b.push(m)}this.frmtSelect.addOption(b);r.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(e(this.frmtSelect,"change",F.hitch(this,this.frmtSelectValueDidChange)));this.own(e(this.frmtVal,"change",F.hitch(this,
this.formatValDidChange)));this.own(e(this.cancelButton,"click",F.hitch(this,function(){this.isCanceled=!0})));this.own(e(this.applyButton,"click",F.hitch(this,function(){this.isCanceled=!1})));this.displayPrefixContainer()},formatValDidChange:function(){var b=r.get(this.frmtVal,"value"),q=this.frmtSelect.get("value");this.formats[q].customFormat=b;this.formats[q].useCustom=!0},frmtSelectValueDidChange:function(b){var q=this.formats[b].useCustom?this.formats[b].customFormat:this.formats[b].defaultFormat;
this.ct=b;r.set(this.frmtVal,"value",q);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.ct){case "DD":case "DDM":case "DMS":c.set(this.prefixContainer,{display:""});break;default:c.set(this.prefixContainer,{display:"none"})}}})})},"jimu/dijit/_CoordinateControlConfirmNotation":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/aspect dojo/keys dojo/query dijit/Dialog dijit/form/Select dojo/_base/lang".split(" "),
function(H,F,c,e,r,w,y,p,b,q,m){return H([b],{baseClass:"jimu-coordinate-control",numberOfInputs:0,selectOptions:{},comboOptions:{},dfd:null,constructor:function(g){m.mixin(this,g);this.numberOfInputs=g.options.length;this.selectOptions=g.options},postCreate:function(){this.inherited("postCreate",arguments);this.closable=!1;this.closeButtonNode.style.display="none";"DartTheme"===this.theme&&r.add(this.containerNode,"coordinateControlDialog");this.message=e.create("div",{style:"margin-bottom: 5px"},
this.containerNode,"first");this.message.innerHTML=this.numberOfInputs+" "+this.nls.multipleNotationLabel;this.comboOptions=new q({style:{width:"99%"},"aria-label":this.numberOfInputs+" "+this.nls.multipleNotationLabel},e.create("div",{},this.containerNode,"last"));this.own(w.after(this.comboOptions,"onChange",c.hitch(this,this._onComboOptionsChanged)));for(var g=0;g<this.selectOptions.length;g++)this.comboOptions.addOption({value:this.selectOptions[g].name,label:this.selectOptions[g].notationType});
this.buttonDiv=e.create("div",{"class":"buttonContainer",style:"margin-top:10px;"+(window.isRTL?"text-align:left":"text-align:right")},this.containerNode,"last");this.okButton=e.create("div",{innerHTML:this.nls.applyButtonLabel,"class":"jimu-btn",role:"button",tabindex:"0","aria-label":this.nls.applyButtonLabel,onclick:m.hitch(this,function(){this.hide();this.dfd.resolve()}),onkeypress:m.hitch(this,function(l){if(l.keyCode===y.ENTER||l.keyCode===y.SPACE)this.hide(),this.dfd.resolve()})},this.buttonDiv,
"first");this.cancelButton=e.create("div",{innerHTML:this.nls.cancelButtonLabel,"class":"jimu-btn",style:"margin: 0 5px 0 5px",role:"button",tabindex:"0","aria-label":this.nls.cancelButtonLabel,onclick:m.hitch(this,function(){this.hide();this.dfd.cancel()}),onkeypress:m.hitch(this,function(l){if(l.keyCode===y.ENTER||l.keyCode===y.SPACE)this.hide(),this.dfd.cancel()})},this.buttonDiv,"last")},show:function(){this.inherited("show",arguments);this.dfd=new F;var g=this._getDOMElement(".dijitSelectLabel",
this.comboOptions.domNode);g&&r.add(g,"dijitSelectLabelConfirmNotation");return this.dfd},_onComboOptionsChanged:function(){var g=this._getDOMElement(".dijitSelectLabel",this.comboOptions.domNode);g&&r.add(g,"dijitSelectLabelConfirmNotation")},_getDOMElement:function(g,l){return(g=p(g,l))&&1===g.length?g[0]:null}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(H,F,c,e){return H("dijit.form.Textarea",[e,c],
{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);F.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(H,F,c,e,r,w,y){c.add("textarea-needs-help-shrinking",
function(){var p=w.body(),b=F.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},p,"last"),q=b.scrollHeight>=b.clientHeight;p.removeChild(b);return q});return H("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);
this.resize()},postCreate:function(){this.inherited(arguments);var p=this.textbox;p.style.overflowY="hidden";this.own(r(p,"focus, resize",e.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(y.on("resize",e.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(p){this.inherited(arguments);this.resize()},_estimateHeight:function(){var p=this.textbox;p.rows=(p.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function p(){var E=
!1;""===b.value&&(b.value=" ",E=!0);var K=b.scrollHeight;E&&(b.value="");return K}var b=this.textbox;"hidden"==b.style.overflowY&&(b.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(p()||b.offsetHeight){var q=p()+Math.max(b.offsetHeight-b.clientHeight,0),m=q+"px";m!=b.style.height&&(b.style.height=m,b.rows=1);if(c("textarea-needs-help-shrinking")){var g=p(),l=b.style.minHeight,A=4,u=b.scrollTop;b.style.minHeight=m;for(b.style.height="auto";0<q;){b.style.minHeight=Math.max(q-A,4)+"px";m=
p();g-=m;q-=g;if(g<A)break;g=m;A<<=1}b.style.height=q+"px";b.style.minHeight=l;b.scrollTop=u}b.style.overflowY=p()>b.clientHeight?"auto":"hidden";"hidden"==b.style.overflowY&&(b.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(H,F,c,e,r,w,y,p,b,q,m,g,l,A,u,E,K,k,x,z,C,B,L,I,G){x=e("dijit._InlineEditor",[k,x,z],{templateString:G,contextRequire:H,postMixInProperties:function(){this.inherited(arguments);this.messages=b.getLocalization("dijit","common",this.lang);F.forEach(["buttonSave","buttonCancel"],function(v){this[v]||(this[v]=this.messages[v])},this)},buildRendering:function(){this.inherited(arguments);var v="string"==typeof this.editor?g.getObject(this.editor)||H(this.editor):this.editor,J=this.sourceStyle,
O="line-height:"+J.lineHeight+";",R=p.getComputedStyle(this.domNode);F.forEach(["Weight","Family","Size","Style"],function(Q){R["font"+Q]!=J["font"+Q]&&(O+="font-"+Q+":"+J["font"+Q]+";")},this);F.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(Q){this.domNode.style[Q]=J[Q]},this);var N=this.inlineEditBox.width;"100%"==N?(O+="width:100%;",this.domNode.style.display="block"):O+="width:"+(N+(Number(N)==N?"px":""))+";";N=g.delegate(this.inlineEditBox.editorParams,
{style:O,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new v(N,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,y.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var v=this.editWidget;this.inlineEditBox.autoSave?this.own(c.after(v,"onChange",g.hitch(this,"_onChange"),!0),l(v,"keydown",g.hitch(this,"_onKeyDown"))):"intermediateChanges"in v&&(v.set("intermediateChanges",
!0),this.own(c.after(v,"onChange",g.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var v=this.editWidget;return String(v.get("displayedValue"in v||"_getDisplayedValueAttr"in v?"displayedValue":
"value"))},_onKeyDown:function(v){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&!v.altKey&&!v.ctrlKey&&(v.keyCode==m.ESCAPE?(v.stopPropagation(),v.preventDefault(),this.cancel(!0)):v.keyCode==m.ENTER&&"INPUT"==v.target.tagName&&(v.stopPropagation(),v.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&this.enableSave()&&K.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(K._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){L.selectInputText(this.editWidget.focusNode)}))}});k=e("dijit.InlineEditBox"+(A("dojo-bidi")?"_NoBidi":""),k,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:I,editorWrapper:x,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=A("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(l(this.displayNode,E,g.hitch(this,"_onClick")),l(this.displayNode,"mouseover, focus",g.hitch(this,"_onMouseOver")),l(this.displayNode,"mouseout, blur",g.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=g.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);w.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(v){q.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",v)},_setDisabledAttr:function(v){this.domNode.setAttribute("aria-disabled",v?"true":"false");v?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);w.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",v);this._set("disabled",v)},_onMouseOver:function(){this.disabled||w.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){w.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(v){this.disabled||(v&&(v.stopPropagation(),v.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
r.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var v=y.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?g.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:p.getComputedStyle(this.displayNode),save:g.hitch(this,"save"),cancel:g.hitch(this,"cancel"),
textDir:this.textDir},v);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var J=this.wrapperWidget;w.add(this.displayNode,"dijitOffScreen");w.remove(J.domNode,"dijitOffScreen");p.set(J.domNode,{visibility:"visible"});r.set(this.displayNode,"tabIndex","-1");var O=J.editWidget,R=this;u(O.onLoadDeferred,g.hitch(J,function(){O.set("displayedValue"in O||"_setDisplayedValueAttr"in O?"displayedValue":"value",R.value);this.defer(function(){J.saveButton&&J.saveButton.set("disabled",
"intermediateChanges"in O);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(v){var J=this.wrapperWidget;p.set(J.domNode,{visibility:"hidden"});w.add(J.domNode,"dijitOffScreen");w.remove(this.displayNode,"dijitOffScreen");r.set(this.displayNode,"tabIndex",this._savedTabIndex);v&&
K.focus(this.displayNode)},save:function(v){if(!this.disabled&&this.editing){this._set("editing",!1);var J=this.wrapperWidget.getValue();this.set("value",J);this._showText(v)}},setValue:function(v){q.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",v)},_setValueAttr:function(v){v=g.trim(v);var J=this.renderAsHtml?v:v.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":J||this.noValueIndicator;this._set("value",v);this._started&&this.defer(function(){this.onChange(v)})},getValue:function(){q.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(v){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(v))}});A("dojo-bidi")&&(k=e("dijit.InlineEditBox",
k,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));k._InlineEditor=x;return k})},"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(H,F,c,e,r,w,y){var p={_defaultStandbyParams:{image:y.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(b){if(b=this._normalizeParams(b))return b=new w(p._toStandbyParams(b)),
r.place(b.domNode,c.doc.body),p._createHandle(b)},_normalizeParams:function(b){if(b){if(b.target)return b;if("string"===typeof b){var q=H.byId(b);b=q?q.domNode:e.byId(b)}else b=b.domNode?b.domNode:e.byId(b);if(b)return{target:b}}},_toStandbyParams:function(b){b.imageUrl&&(b.image=b.imageUrl);b.backgroundColor&&(b.color=b.backgroundColor);b.backgroundOpacity&&(b.opacity=b.backgroundOpacity);b.fadeDuration&&(b.duration=b.fadeDuration);return F.mixin({},p._defaultStandbyParams,b)},_createHandle:function(b){return{show:function(){b&&
b.show()},hide:function(){b&&b.hide()},destroy:function(){b&&(b.destroy(),b=null)}}}};return p})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(H,F,c,e,r,w,y,p,b,q,m,g,l,A,u,E,K){H.experimental("dojox.widget.Standby");
return F("dojox.widget.Standby",[u,E],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(k){if(!this._started){if("string"===typeof this.target){var x=K.byId(this.target);this.target=x?x.domNode:w.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,y.set(this._imageNode,"src",this.image),y.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;q.set(this._underlayNode,
{display:"none",backgroundColor:this.color});q.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=g.body()&&g.body().appendChild(this.domNode);7==r("ie")&&(this._ieFixNode=p.create("div"),q.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),g.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(k){console.error(k)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
q.set(this._centerNode,"display","none");q.set(this._underlayNode,"display","none");7==r("ie")&&this._ieFixNode&&(g.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var k=y.get(g.body(),"dir");k&&(k=k.toLowerCase());var x=this._scrollerWidths(),z=this.target,C=q.get(this._centerNode,"display");q.set(this._centerNode,
"display","block");var B=b.position(z,!0);if(z===g.body()||z===g.doc)B=m.getBox(),B.x=B.l,B.y=B.t;var L=b.getMarginBox(this._centerNode);q.set(this._centerNode,"display",C);if(this._ieFixNode){var I=-this._ieFixNode.offsetTop/1E3;B.x=Math.floor((B.x+.9)/I);B.y=Math.floor((B.y+.9)/I);B.w=Math.floor((B.w+.9)/I);B.h=Math.floor((B.h+.9)/I)}var G=q.get(z,"zIndex"),v=C=G;if("auto"===this.zIndex)if("auto"!=G)C=parseInt(C,10),v=parseInt(v,10);else{var J=z;if(J&&J!==g.body()&&J!==g.doc)for(J=z.parentNode,
I=-1E5;J&&J!==g.body();)(G=q.get(J,"zIndex"))&&"auto"!==G&&(G=parseInt(G,10),I<G&&(I=G,C=G+1,v=G+1)),J=J.parentNode}else C=parseInt(this.zIndex,10),v=parseInt(this.zIndex,10);q.set(this._centerNode,"zIndex",v);q.set(this._underlayNode,"zIndex",C);if((C=z.parentNode)&&C!==g.body()&&z!==g.body()&&z!==g.doc){J=B.h;v=B.w;z=b.position(C,!0);this._ieFixNode&&(I=-this._ieFixNode.offsetTop/1E3,z.x=Math.floor((z.x+.9)/I),z.y=Math.floor((z.y+.9)/I),z.w=Math.floor((z.w+.9)/I),z.h=Math.floor((z.h+.9)/I));z.w-=
C.scrollHeight>C.clientHeight&&0<C.clientHeight?x.v:0;z.h-=C.scrollWidth>C.clientWidth&&0<C.clientWidth?x.h:0;"rtl"===k&&(r("opera")?(B.x+=C.scrollHeight>C.clientHeight&&0<C.clientHeight?x.v:0,z.x+=C.scrollHeight>C.clientHeight&&0<C.clientHeight?x.v:0):r("ie")?z.x+=C.scrollHeight>C.clientHeight&&0<C.clientHeight?x.v:0:r("webkit"));z.w<B.w&&(B.w-=z.w);z.h<B.h&&(B.h-=z.h);var O=z.y,R=z.y+z.h,N=B.y,Q=B.y+J;k=z.x;I=z.x+z.w;G=B.x;var W=B.x+v;if(Q>O&&N<O)B.y=z.y,J-=O-N,B.h=J<z.h?J:B.h-2*(C.scrollWidth>
C.clientWidth&&0<C.clientWidth?x.h:0);else if(N<R&&Q>R)B.h=R-N;else if(Q<=O||N>=R)B.h=0;if(W>k&&G<k)B.x=z.x,v-=k-G,B.w=v<z.w?v:B.w-2*(C.scrollHeight>C.clientHeight&&0<C.clientHeight?x.w:0);else if(G<I&&W>I)B.w=I-G;else if(W<=k||G>=I)B.w=0}0<B.h&&0<B.w?(q.set(this._underlayNode,{display:"block",width:B.w+"px",height:B.h+"px",top:B.y+"px",left:B.x+"px"}),x=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(x),r("ie")||(x=
"MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),this._cloneStyles(x,this)),x=B.h/2-L.h/2,C=B.w/2-L.w/2,B.h>=L.h&&B.w>=L.w?q.set(this._centerNode,{top:x+B.y+"px",left:C+B.x+"px",display:"block"}):q.set(this._centerNode,"display","none")):(q.set(this._underlayNode,"display","none"),q.set(this._centerNode,
"display","none"));if(null===this._resizeCheck){var aa=this;this._resizeCheck=setInterval(function(){aa._size()},100)}}},_cloneStyles:function(k){c.forEach(k,function(x){q.set(this._underlayNode,x,q.get(this.target,x))},this)},_fadeIn:function(){var k=this,x=l.animateProperty({duration:k.duration,node:k._underlayNode,properties:{opacity:{start:0,end:k.opacity}}}),z=l.animateProperty({duration:k.duration,node:k._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){k.onShow();delete k._anim}});
this._anim=A.combine([x,z]);this._anim.play()},_fadeOut:function(){var k=this,x=l.animateProperty({duration:k.duration,node:k._underlayNode,properties:{opacity:{start:k.opacity,end:0}},onEnd:function(){q.set(this.node,{display:"none",zIndex:"-1000"})}}),z=l.animateProperty({duration:k.duration,node:k._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){q.set(this.node,{display:"none",zIndex:"-1000"});k.onHide();k._enableOverflow();delete k._anim}});this._anim=A.combine([x,z]);this._anim.play()},
_ignore:function(k){k&&e.stop(k)},_scrollerWidths:function(){var k=p.create("div");q.set(k,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var x=p.create("div");q.set(x,{width:"200px",height:"10px"});k.appendChild(x);g.body().appendChild(k);x=b.getContentBox(k);q.set(k,"overflow","scroll");var z=b.getContentBox(k);g.body().removeChild(k);return{v:x.w-z.w,h:x.h-z.h}},_setTextAttr:function(k){this.text=this._textNode.innerHTML=
k},_setColorAttr:function(k){q.set(this._underlayNode,"backgroundColor",k);this.color=k},_setImageTextAttr:function(k){y.set(this._imageNode,"alt",k);this.imageText=k},_setImageAttr:function(k){y.set(this._imageNode,"src",k);this.image=k},_setCenterIndicatorAttr:function(k){this.centerIndicator=k;"image"===k?(this._centerNode=this._imageNode,q.set(this._textNode,"display","none")):(this._centerNode=this._textNode,q.set(this._imageNode,"display","none"))},_setTargetAttr:function(k){if("string"===typeof k){var x=
K.byId(k);this._set("target",x?x.domNode:w.byId(k))}else this._set("target",k)},_disableOverflow:function(){if(this.target===g.body()||this.target===g.doc){this._overflowDisabled=!0;var k=g.body();this._oldOverflow=k.style&&k.style.overflow?q.get(k,"overflow"):"";if(r("ie")&&!r("quirks")){if(k.parentNode&&k.parentNode.style&&k.parentNode.style.overflow)this._oldBodyParentOverflow=k.parentNode.style.overflow;else try{this._oldBodyParentOverflow=q.get(k.parentNode,"overflow")}catch(x){this._oldBodyParentOverflow=
"scroll"}q.set(k.parentNode,"overflow","hidden")}q.set(k,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var k=g.body();r("ie")&&!r("quirks")&&(k.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);q.set(k,"overflow",this._oldOverflow);if(r("webkit")){var x=p.create("div",{style:{height:"2px"}});k.appendChild(x);setTimeout(function(){k.removeChild(x)},0)}delete this._oldOverflow}}})})},"widgets/ThreatAnalysis/js/ThreatAnalysisSettings":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/ThreatAnalysisSettings.html dojo/_base/lang dojo/Evented dojo/number dojo/on dojo/_base/array jimu/dijit/SimpleTable ../newZone jimu/utils dijit/focus dojo/keys dijit/form/ValidationTextBox dijit/form/TextBox dijit/form/Select".split(" "),
function(H,F,c,e,r,w,y,p,b,q,m,g,l,A){return H([F,c,e,y],{templateString:r,baseClass:"jimu-widget-threatAnalysis",prevThreatType:null,selectedThreatType:null,selectedUnitAbbr:null,constructor:function(){},postCreate:function(){this._initThreatTypeCtrl(this.threatData);this.selectedUnitAbbr="feet"===this.selectedUnitType.toLowerCase()?this.nls.feetAbbr:this.nls.metersAbbr;this._createZoneTable();this._handleClickEvents()},_handleClickEvents:function(){this.own(b(this.threatType,"change",w.hitch(this,
function(u){this.threatType.set("title",u);this._threatZonesTable.clear();this._populateZoneTableRows(u)})))},_createZoneTable:function(){this._threatZonesTable=new m({fields:[{name:"zoneDescription",title:this.nls.zoneDescriptionColLabel,type:"text",width:"70%"},{name:"distance",title:this.nls.distanceColLabel,type:"text",hidden:!0},{name:"symbol",title:this.nls.symbologyColLabel,type:"text",hidden:!0},{name:"actions",title:this.nls.actions,type:"actions","class":"actions",actions:["edit"],width:"30%"}],
selectable:!1});this._threatZonesTable.placeAt(this.threatZonesTableNode);this._threatZonesTable.startup();this.own(b(this._threatZonesTable,"actions-edit",w.hitch(this,this._onEditZoneInfoClick)))},_populateZoneTableRows:function(u){q.some(this.threatData,w.hitch(this,function(E){u===E.threatName&&q.forEach(E.zones,w.hitch(this,function(K){this._addRowToZoneTable(K)}))}))},_addRowToZoneTable:function(u){var E=u.distance;var K={zoneDescription:this._getZoneNameNls(u.name),distance:p.format(E,{places:2}),
symbol:JSON.stringify(u.symbol)};K=this._threatZonesTable.addRow(K);K.success&&K.tr&&(K=K.tr,K.zoneDescription=u.name,K.distance=E,K.symbol=u.symbol)},_getZoneTableInfo:function(){var u=[];var E=this._threatZonesTable.getRows();q.forEach(E,w.hitch(this,function(K){var k=this._threatZonesTable.getRowData(K),x={name:"",distance:0,symbol:{}};x.name=K.zoneDescription;x.distance=K.distance;x.symbol=JSON.parse(k.symbol);u.push(x)}));return u},_createNewZonePopup:function(u,E,K){u=new g({config:this.config,
nls:this.nls,isAddZone:u,currentRow:E,currentRowData:K,disableInputs:!0,unitAbbr:this.selectedUnitAbbr});u.startup();b(u,"zoneInfoUpdated",w.hitch(this,function(k){if(E){var x={};x.symbol=JSON.stringify(k.symbol);E.symbol={};E.symbol=k.symbol;this._threatZonesTable.editRow(E,x);this._updateOriginalSymbolInfo();setTimeout(w.hitch(this,function(){A.focus(l.getFirstFocusNode(this.refDomNode))}),100);this.emit("ThreatSettingsChanged",{threatName:this.threatType.value,zones:this._getZoneTableInfo()})}}));
b(u,"cancelBtnClicked",w.hitch(this,function(){setTimeout(w.hitch(this,function(){A.focus(l.getFirstFocusNode(this.refDomNode))}),100)}))},_updateOriginalSymbolInfo:function(){q.some(this.threatData,w.hitch(this,function(u){this.threatType.value===u.threatName&&(u.zones=this._getZoneTableInfo(),this._threatZonesTable.clear(),q.forEach(u.zones,w.hitch(this,function(E){this._addRowToZoneTable(E)})))}))},_onEditZoneInfoClick:function(u){var E=this._threatZonesTable.getRowData(u);E&&this._createNewZonePopup(!1,
u,E)},_initThreatTypeCtrl:function(u){var E=this,K={"Pipe Bomb":"pipeBombLabel","Suicide Bomb":"suicideBombLabel",Briefcase:"briefcaseLabel",Car:"carLabel","SUV/VAN":"suvVanLabel","Small Delivery Truck":"smallDeliveryTruckLabel","Container/Water Truck":"containerWaterTruckLabel","Semi-Trailer":"semiTrailerLabel","Small LPG Tank":"smallLPGTank","Large LPG Tank":"largeLPGTank","Commercial/Residential LPG Tank":"commercialResidentialLPGTank","Small LPG Truck":"smallLPGTruck","Semi-Tanker LPG":"semiTankerLPG"};
this.threatType.options=[];this.threatType.addOption({value:"",label:this.nls.selectLabel,defaultSelected:!0,selected:!0,unit:""});q.forEach(u,function(k){var x=this.threatType,z=x.addOption,C=k.threatName,B=l.sanitizeHTML;k=k.threatName;k=void 0!==K[k]?E.nls[K[k]]:k;z.call(x,{value:C,label:B.call(l,k),defaultSelected:!1,selected:!1})},E)},_setLastFocusNode:function(){l.initLastFocusNode(this.refDomNode,this.threatType.domNode)},_getZoneNameNls:function(u){var E={"Mandatory Evacuation Distance":"mandatoryLabel",
"Safe Evacuation Distance":"safeLabel","Fireball Diameter":"fireBallDiameterLable","Safe Distance":"lpgSafeDistanceLable"};u=void 0!==E[u]?this.nls[E[u]]:u;return u}})})},"widgets/ThreatAnalysis/newZone":function(){define("dojo/_base/declare dojo/_base/array ./js/ColorPickerEditor jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!./newZone.html dojo/_base/lang dojo/Evented dojo/dom-class dojo/query dijit/registry jimu/dijit/Popup jimu/utils dojo/string dojo/on dojo/number dojo/keys dijit/form/NumberTextBox dijit/form/ValidationTextBox dijit/form/Select jimu/dijit/SymbolChooser".split(" "),
function(H,F,c,e,r,w,y,p,b,q,m,g,l,A,u,E,K){return H([e,r,p],{baseClass:"jimu-widget-threatAnalysis-newZoneSettings",templateString:w,selectedSettings:{},colorPickerNodes:[],dropdownNodes:[],prevZoneName:null,newZonePopup:null,constructor:function(k){y.mixin(this,k)},startup:function(){this._setSymbologySettings()},postCreate:function(){this.inherited(arguments);this.newZonePopup=this.prevZoneName=null;this.own(u(window,"resize",y.hitch(this,function(){this._setNewZonePopupDimensions()})));this.currentRowData&&
this.currentRowData.zoneDescription&&(this.zoneDescriptionTextBox.set("value",this.currentRowData.zoneDescription),this.zoneDescriptionTextBox.set("title",this.currentRowData.zoneDescription),this.prevZoneName=this.currentRowData.zoneDescription);this._zoneDescriptionTextBoxValidator();this.currentRowData&&this.currentRowData.distance&&(this.zoneDistanceTextBox.set("value",this.currentRowData.distance),this.zoneDistanceTextBox.set("title",this.currentRowData.distance));this.zoneDistanceLabel.innerHTML=
A.substitute(this.nls.distanceLabel,{unitAbbr:this.unitAbbr});this.disableInputs&&(this.zoneDescriptionTextBox.set("disabled",!0),this.zoneDistanceTextBox.set("disabled",!0),this.currentRowData&&this.currentRowData.distance&&(this.zoneDistanceTextBox.set("value",this._convertValue(this.currentRowData.distance)),this.zoneDistanceTextBox.set("title",this._convertValue(this.currentRowData.distance))));this.own(u(this.zoneDescriptionTextBox,"blur",y.hitch(this,function(){this.zoneDescriptionTextBox.set("value",
l.stripHTML(l.sanitizeHTML(this.zoneDescriptionTextBox.value)));this.zoneDescriptionTextBox.set("title",l.stripHTML(l.sanitizeHTML(this.zoneDescriptionTextBox.value)))})));this.own(u(this.zoneDescriptionTextBox,"change",y.hitch(this,function(k){this.zoneDescriptionTextBox.set("title",k)})));this.own(u(this.zoneDistanceTextBox,"change",y.hitch(this,function(){isNaN(this.zoneDistanceTextBox.value)?this.zoneDistanceTextBox.set("title",""):this.zoneDistanceTextBox.set("title",this.zoneDistanceTextBox.value)})));
this._createPopUp()},_createPopUp:function(){this.newZonePopup=new g({titleLabel:this.isAddZone?this.nls.newThreatZonePopupLabel:this.nls.editThreatZonePopupLabel,width:670,maxHeight:800,autoHeight:!0,"class":this.baseClass,content:this,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){this.zoneDescriptionTextBox.isValid()?this.zoneDistanceTextBox.isValid()?this._validInputs()&&(this.emit("zoneInfoUpdated",{name:l.stripHTML(l.sanitizeHTML(this.zoneDescriptionTextBox.value)),distance:this.zoneDistanceTextBox.get("value"),
symbol:this._getSymbologySettings()}),this.newZonePopup.close()):this.zoneDistanceTextBox.focus():this.zoneDescriptionTextBox.focus()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:y.hitch(this,function(){this.emit("cancelBtnClicked");this.newZonePopup.close()})}]});this._setNewZonePopupDimensions()},_setSymbologySettings:function(){var k={outlineColor:{color:"#d10e40",transparency:0,type:"esriSLSSolid"},fillColor:{color:"#d10e40",transparency:.88,type:"esriSFSSolid"}};this.colorPickerNodes=
q(".colorPicker",this.domNode);this.dropdownNodes=q(".dropdown",this.domNode);F.forEach(this.colorPickerNodes,y.hitch(this,function(x){x=new c({nls:this.nls,type:b.contains(x,"Line")?"line":"fill"},x);x.setValues({color:this.currentRow&&this.currentRow.symbol?this.currentRow.symbol[x.id].color:k[x.id].color,transparency:this.currentRow&&this.currentRow.symbol?this.currentRow.symbol[x.id].transparency:k[x.id].transparency});x.startup();var z=q(".jimu-color-pickerPopup",this.domNode);F.forEach(z,y.hitch(this,
function(C){this.own(u(C,"keydown",y.hitch(this,function(B){B.keyCode!==K.ENTER&&B.keyCode!==K.SPACE||B.currentTarget.click()})))}));x.dropdown.set("value",this.currentRow&&this.currentRow.symbol?this.currentRow.symbol[x.id].type:k[x.id].type)}))},_getSymbologySettings:function(){F.forEach(this.colorPickerNodes,y.hitch(this,function(k){var x={color:m.byId(k.id).getValues().color,transparency:m.byId(k.id).getValues().transparency,type:m.byId(k.id).dropdown.getValue()};this.selectedSettings[k.id]=x}));
return this.selectedSettings},_isDuplicateZoneName:function(k){var x=!1;F.some(this.existingZoneNames,y.hitch(this,function(z){if(k.toLowerCase()===z.toLowerCase())return x=!0}));return x},_zoneDescriptionTextBoxValidator:function(){this.zoneDescriptionTextBox.validator=y.hitch(this,function(k){return k?k!==this.prevZoneName&&this._isDuplicateZoneName(k)?(this.zoneDescriptionTextBox.set("invalidMessage",this.nls.uniqueZoneDescriptionMsg),!1):!0:(this.zoneDescriptionTextBox.set("invalidMessage",this.nls.requiredMsg),
!1)})},_validInputs:function(){var k=!0;F.some(this.colorPickerNodes,function(x){if(!m.byId(x.id).validateSpinner())return k=!1,!0},this);return k},_convertValue:function(k){k=this.unitAbbr===this.nls.metersAbbr?E.parse(k)/3.280839895:E.parse(k);return E.format(k,{places:2})},_setNewZonePopupDimensions:function(){this.newZonePopup&&(window.appInfo.isRunInMobile?(this.newZonePopup.set("width",window.innerWidth-100),this.newZonePopup.set("height",450)):this.newZonePopup.set("width",670))}})})},"widgets/ThreatAnalysis/js/ColorPickerEditor":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Color dojo/on dojo/dom-attr dojo/query dojo/_base/html jimu/BaseWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/ColorPickerEditor.html dijit/form/HorizontalSlider jimu/dijit/ColorPickerPopup dijit/form/NumberSpinner".split(" "),
function(H,F,c,e,r,w,y,p,b,q,m,g,l,A){return H([b,q,m],{_defaultColor:"#485566",templateString:g,nls:null,postMixInProperties:function(){this.inherited(arguments);this.isRenderIdForAttrs=!0},postCreate:function(){this.colorPicker=new A({color:this._defaultColor,tabindex:"0",role:"button"},this.colorPicker);this.colorPicker.startup();this.own(this.colorPicker.on("change",c.hitch(this,function(){this.onColorPickerEditorChanged()})));this.slider=new l({name:"slider",value:100,minimum:0,maximum:100,discreteValues:101,
intermediateChanges:!0,showButtons:!1,style:"display: inline-block;"},this.sliderBar);this.slider.startup();var u=[],E,K="esriSLSDash esriSLSDashDot esriSLSDashDotDot esriSLSDot esriSLSLongDash esriSLSLongDashDot esriSLSNull esriSLSShortDash esriSLSShortDashDot esriSLSShortDashDotDot esriSLSShortDot esriSLSSolid".split(" "),k="esriSFSBackwardDiagonal esriSFSCross esriSFSDiagonalCross esriSFSForwardDiagonal esriSFSHorizontal esriSFSNull esriSFSSolid esriSFSVertical".split(" ");"line"===this.type?F.forEach(K,
c.hitch(this,function(x){E={value:x,label:this.nls.lineStyles[x]};u.push(E)})):F.forEach(k,c.hitch(this,function(x){E={value:x,label:this.nls.fillStyles[x]};u.push(E)}));this.dropdown.addOption(u);this.inherited(arguments)},startup:function(){setTimeout(c.hitch(this,function(){this._setAriaLabelForEditorNodes()}),100);this.own(r(this.slider,"change",c.hitch(this,function(u){isNaN(u)||!1!==this._isSameVal()||(u>this.spinner.maximum?(this.spinner.setValue(0),this.spinner.setValue(this.spinner.maximum)):
this.spinner.setValue(u))})));this.own(r(this.spinner,"change",c.hitch(this,function(u){isNaN(u)||!1===this._isSameVal()&&u<=this.slider.maximum&&this.slider.setValue(u)})));this.own(r(this.dropdown,"change",c.hitch(this,function(){this.onColorPickerEditorChanged()})));this._stylePolyfill();this.inherited(arguments)},_setAriaLabelForEditorNodes:function(){var u="fill"===this.type?this.nls.fill:this.nls.outline;w.set(this.colorPicker.domNode,"aria-label",u+" "+this.nls.colorPicker);w.set(this.slider,
"aria-label",u+" "+this.nls.transparencyLabel);w.set(this.spinner,"aria-label",u+" "+this.nls.transparencyLabel);w.set(this.dropdown,"aria-label",u+" "+this.nls.style)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var u=null,E=null;(E=this.colorPicker.getColor())&&E.toHex&&(u=E.toHex());E=this.spinner.getValue()/100;return{color:u,transparency:E}},setValues:function(u){if("object"===typeof u||"string"===typeof u)this.colorPicker.setColor(new e(u.color)),
u.transparency="undefined"===typeof u.transparency?0:100*u.transparency,this.slider.setValue(u.transparency),this.spinner.setValue(u.transparency)},_stylePolyfill:function(){var u=y(".dijitSliderLeftBumper",this.domNode)[0];u&&u.parentNode&&p.setStyle(u.parentNode,"background-color","#24b5cc")},onColorPickerEditorChanged:function(){},validateSpinner:function(){var u=!0;this.spinner.isValid()||(this._shake(this.spinner.domNode,16),this.spinner.focus(),u=!1);return u},_shake:function(u,E){function K(){if(15>
k){u.style.transform="translate(0px, 0px)";E-=x;var B=z(-E,E),L=z(-E,E);u.style.transform="translate("+B+"px, "+L+"px)";k+=1;requestAnimationFrame(K)}15<=k&&(u.style.transform="translate(0, 0)",C._shakingElements.splice(C._shakingElements.indexOf(u),1))}var k=1,x=E/15,z=function(B,L){return Math.floor(Math.random()*(L-B+1))+B};this._shakingElements||(this._shakingElements=[]);if(-1===this._shakingElements.indexOf(u)){this._shakingElements.push(u);var C=this;K()}}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(H,F,c,e,r,w,y,p,b,q,m){return H([F,c],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){b.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;r.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;r.addClass(this.domNode,"disable")},isPartOfPopup:function(g){var l=this.tooltipDialog.domNode;return g===l||r.isDescendant(g,l)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},isOpen:function(){return this._isTooltipDialogOpened},_showTooltipDialog:function(){b.open({parent:this.getParent(),
popup:this.tooltipDialog,around:this.around?this.around:this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){b.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var g=r.create("div");this.tooltipDialog=new p({content:g});r.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var l=new q({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,
closeDialogWhenChange:!0},recordUID:this.recordUID,onChange:e.hitch(this,function(A){A&&(A=new y(A),this.setColor(A),this.onChange(A))})});l.placeAt(g);l.startup();this.own(w(l,"close",e.hitch(this,function(){this._hideTooltipDialog()})));this.own(w(l,"change-style",e.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(w(this.domNode,"click",e.hitch(this,function(A){A.stopPropagation();A.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==
this._ENABLE&&this._showTooltipDialog()})));this.own(w(document,"click",e.hitch(this,function(A){this.isPartOfPopup(A.srcElement||A.target)||this._hideTooltipDialog()})));this.picker=l},setColor:function(g){if(g instanceof y){null===this.color&&!0===this.showLabel&&this._changeLabel(g);var l=g.toHex();this.color=g;r.setStyle(this.domNode,"backgroundColor",l);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(l,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},
_changeLabel:function(g){r.empty(this.domNode);r.create("span",{innerHTML:g.toHex(),className:"color-label",style:{color:m.invertColor(g.toHex())}},this.domNode)},onChange:function(g){g&&this.showLabel&&this._changeLabel(g)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(g){this.domNode.title=g},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"widgets/ThreatAnalysis/js/portal-utils":function(){define("esri/request dojo/json dojo/topic dojo/_base/lang esri/arcgis/Portal esri/layers/FeatureLayer jimu/LayerInfos/LayerInfos jimu/utils dojo/_base/array".split(" "),
function(H,F,c,e,r,w,y,p,b){var q={saveToPortal:function(m){(new r.Portal(m.appConfig.portalUrl)).signIn().then(e.hitch(this,function(g){var l=g.credential.token,A=g.orgId,u=g.username;if("org_user"===g.role)m.publishMessage.innerHTML=p.sanitizeHTML(m.nls.createService.format(m.nls.userRole)),c.publish("setLastFocusNode",!1);else if(m.url){var E;b.forEach(m.layers,e.hitch(this,function(k,x){E=new w(m.url+"?token\x3d"+l,{id:m.layerName+""+x,outFields:["*"]});E._wabProperties={itemLayerInfo:{portalUrl:m.appConfig.portalUrl,
itemId:m.itemId}};E.applyEdits(k.graphics,null,null).then(e.hitch(this,function(){c.publish("clear")})).otherwise(e.hitch(this,function(){c.publish("clear")}))}));c.publish("setBusyIndicator",!1);m.publishMessage.innerHTML=m.nls.successfullyAppended+('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+m.nls.successfullyAppended+'" href\x3d"'+m.appConfig.portalUrl+"home/item.html?id\x3d"+m.serviceItemId+'" target\x3d"_blank"\x3e'+m.nls.manageWebLayerText+"\x3c/a\x3e");c.publish("setLastFocusNode",
!0)}else{var K=m.appConfig.portalUrl+"sharing/content/users/"+u+"/createService";this.isNameAvailable(m.appConfig.portalUrl+"sharing/rest/portals/"+A+"/isServiceNameAvailable",l,m.layerName).then(e.hitch(this,function(k){k.available?(c.publish("setBusyIndicator",!0),this.createFeatureService(K,l,this.getFeatureServiceParams(m.layerName,m.map)).then(e.hitch(this,function(x){if(x.success){var z=x.serviceurl.replace(RegExp("rest","g"),"rest/admin")+"/addToDefinition",C=[];b.forEach(m.layers,e.hitch(this,
function(B,L){B=q.getLayerParams(B.name,m.map,B.renderer,m.nls,L);C.push(B)}));this.addDefinitionToService(z,l,{layers:C}).then(e.hitch(this,function(B){B&&B.success&&(b.forEach(B.layers,e.hitch(this,function(L,I){if(L){var G=new w(x.serviceurl+"/"+I+"?token\x3d"+l,{id:L.name,outFields:["*"]});G._wabProperties={itemLayerInfo:{portalUrl:m.appConfig.portalUrl,itemId:x.itemId}};m.map.addLayer(G);if(G.loaded){var v=y.getInstanceSync().getLayerInfoById(L.name);v.enablePopup()}else G.on("load",e.hitch(this,
function(){v=y.getInstanceSync().getLayerInfoById(L.name);v.enablePopup()}));G.applyEdits(m.layers[I].graphics,null,null).then(e.hitch(this,function(){c.publish("clear")})).otherwise(e.hitch(this,function(){c.publish("clear")}))}})),c.publish("setBusyIndicator",!1),m.publishMessage.innerHTML=m.nls.successfullyPublished+('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+m.nls.successfullyPublished+'" href\x3d"'+m.appConfig.portalUrl+"home/item.html?id\x3d"+x.itemId+'" target\x3d"_blank"\x3e'+
m.nls.manageWebLayerText+"\x3c/a\x3e"),c.publish("setLastFocusNode",!0))}),e.hitch(this,function(B){c.publish("setBusyIndicator",!1);m.publishMessage.innerHTML=p.sanitizeHTML(m.nls.addToDefinition.format(B.message));c.publish("setLastFocusNode",!1)}))}else c.publish("setBusyIndicator",!1),m.publishMessage.innerHTML=p.sanitizeHTML(m.nls.unableToCreate.format(m.layerName)),c.publish("setLastFocusNode",!1)}),e.hitch(this,function(x){c.publish("setBusyIndicator",!1);m.publishMessage.innerHTML=p.sanitizeHTML(m.nls.createService.format(x.message));
c.publish("setLastFocusNode",!1)}))):(c.publish("setBusyIndicator",!1),m.publishMessage.innerHTML=m.nls.layerNameExists);c.publish("setLastFocusNode",!1)}))}}),e.hitch(this,function(g){m.publishMessage.innerHTML=g.message;c.publish("setLastFocusNode",!1)}))},getFeatureServiceParams:function(m,g){return{name:m,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"ThreatAnalysis",description:"",copyrightText:"",
spatialReference:g.spatialReference.toJson(),initialExtent:g.extent.toJson(),allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",xssInputRule:"rejectInvalid"}}},getLayerParams:function(m,g,l,A,u){return{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:u,name:m,type:"Feature Layer",displayField:"",description:"",tags:"ThreatAnalysis",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,
allowOthersToDelete:!1,allowOthersToUpdate:!1},relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,
supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},useStandardizedQueries:!1,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,extent:g.extent,drawingInfo:{renderer:l.toJson(),transparency:0},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!1,editable:!1,domain:null,
defaultValue:null},{name:"zone_type",type:"esriFieldTypeString",alias:A.zoneTypeLabel,actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256},{name:"threat_type",type:"esriFieldTypeString",alias:A.threatType,actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256},{name:"distance",type:"esriFieldTypeDouble",alias:A.distanceColLabel,actualType:"float",nullable:!0,editable:!0,domain:null,
defaultValue:null,sqlType:"sqlTypeFloat"},{name:"units",type:"esriFieldTypeString",alias:A.unitsLabel,actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256}],indexes:[],types:[],templates:[{name:"New Feature",description:"",drawingTool:"esriFeatureEditToolPolygon",prototype:{attributes:{}}}],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,
capabilities:"Query,Editing,Create,Update,Delete"}},isNameAvailable:function(m,g,l){return H({url:m,content:{name:l,type:"Feature Service",token:g,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},createFeatureService:function(m,g,l){return H({url:m,content:{f:"json",token:g,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:F.stringify(l),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},
addDefinitionToService:function(m,g,l){return H({url:m,content:{token:g,addToDefinition:F.stringify(l),f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})}};return q})},"widgets/ThreatAnalysis/js/SelectFeaturesTool":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/Evented dojo/_base/html dojo/_base/lang jimu/symbolUtils jimu/dijit/DrawBox esri/graphic esri/layers/FeatureLayer esri/tasks/query esri/symbols/jsonUtils esri/layers/GraphicsLayer esri/geometry/Circle esri/renderers/SimpleRenderer esri/geometry/geometryEngine".split(" "),
function(H,F,c,e,r,w,y,p,b,q,m,g,l,A,u,E,K,k,x){return H([c,e,r,y],{baseClass:"jimu-select-features-tool",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"drawBoxDiv"\x3e\x3c/div\x3e\x3c/div\x3e',map:null,bufferLayer:null,drawBoxOption:null,nls:null,currentLayerInfo:null,postCreate:function(){this.inherited(arguments);this.map=this.drawBoxOption.map;this.bufferLayer=new E;var z=this._getPolygonSymbol(),C=new k(z);this.bufferLayer.setRenderer(C);this.map.addLayer(this.bufferLayer);this.drawBoxOption.showClear=
this.drawBoxOption.showClear;this.drawBoxOption.keepOneGraphic=!0;this.drawBox=new m(this.drawBoxOption);this.drawBox.setPolygonSymbol(z);z=q.getGreyPinMarkerSymbol();this.drawBox.setPointSymbol(z);this.drawBox.setLineSymbol(u.fromJson({color:[54,93,141,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"}));this.drawBox.placeAt(this.drawBoxDiv);this.own(w(this.drawBox,"user-clear",b.hitch(this,this._onDrawBoxClear)));this.own(w(this.drawBox,"draw-end",b.hitch(this,this._onDrawEnd)));this.drawBox.btnClear?
p.removeClass(this.drawBox.btnClear,"jimu-float-trailing"):p.addClass(this.drawBox.btnClear,"jimu-float-leading")},reset:function(){this.drawBox.reset();this.clearAllGraphics()},clearAllGraphics:function(){this.drawBox.clear();this._clearBufferLayer()},hideTempLayers:function(){this.bufferLayer&&this.bufferLayer.hide();this.drawBox&&this.drawBox.hideLayer()},showTempLayers:function(){this.bufferLayer&&this.bufferLayer.show();this.drawBox&&this.drawBox.showLayer()},deactivate:function(){this.drawBox&&
this.drawBox.deactivate()},execute:function(){var z=!1;if(this.currentLayerInfo){if(null!==this.currentLayerInfo.url)var C=new l(this.currentLayerInfo.url,{outFields:["*"]});else C=this.currentLayerInfo,z=!0;var B=this._getGeometryFromDrawBox();"POINT"===B.geoType&&(B=(new K({center:B,geodesic:!0,radius:25,radiusUnit:"esriFeet"})).getExtent());var L=new A;z?(F.forEach(C.graphics,function(I){if(x.intersects(I.geometry,B)){var G=null;switch(I.geometry.type){case "point":G=this._getPointSymbol();break;
case "polyline":G=this._getPolylineSymbol();break;case "polygon":G=this._getPolygonSymbol();break;default:G=null}this.bufferLayer.add(new g(I.geometry,G))}},this),this.drawBox.clear(),this.emit("selection-complete",{geometry:F.map(this.bufferLayer.graphics,function(I){return I.geometry})})):(L.geometry=B,C.queryFeatures(L,b.hitch(this,function(I){F.forEach(I.features,function(G){var v=null;switch(G.geometry.type){case "point":v=this._getPointSymbol();break;case "polyline":v=this._getPolylineSymbol();
break;case "polygon":v=this._getPolygonSymbol();break;default:v=null}this.bufferLayer.add(new g(G.geometry,v))},this);this.drawBox.clear();this.emit("selection-complete",{geometry:F.map(I.features,function(G){return G.geometry})})})))}},setLayerInfo:function(z){this.currentLayerInfo=z},_getPointSymbol:function(){return u.fromJson({color:[36,181,204,175],size:16,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{style:"esriSLSSolid",color:[36,181,204,255],width:2,type:"esriSLS"}})},
_getPolylineSymbol:function(){return u.fromJson({style:"esriSFSSolid",width:5,color:[36,181,204,175],type:"esriSLS"})},_getPolygonSymbol:function(){return u.fromJson({style:"esriSFSSolid",color:[36,181,204,175],type:"esriSFS",outline:{style:"esriSLSSolid",color:[36,181,204,255],width:2,type:"esriSLS"}})},_getGeometryFromDrawBox:function(){var z=null,C=this.drawBox.getFirstGraphic();C&&(z=C.geometry);return z},_getGeometryFromBufferLayer:function(){var z=null;0<this.bufferLayer.graphics.length&&(z=
this.bufferLayer.graphics[0].geometry);return z},_onDrawBoxClear:function(){this._clearBufferLayer()},_onDrawEnd:function(){this._updateBuffer()},_clearBufferLayer:function(){this.bufferLayer&&this.bufferLayer.clear()},_updateBuffer:function(){this._clearBufferLayer();this.execute()},destroy:function(){this.bufferLayer&&this.map.removeLayer(this.bufferLayer);this.bufferLayer=null;this.inherited(arguments)}})})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),
function(H,F,c,e,r,w,y,p,b,q){H=H(w,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(m,g){m.center?g=m:(g=g||{},g.center=m);this.center=F.isArray(g.center)?new r(g.center[0],g.center[1]):g.center;this.radius=g.radius||1E3;this.radiusUnit=g.radiusUnit||q.METERS;this.geodesic=
!0===g.geodesic?!0:!1;this.numberOfPoints=g.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var m=this.radius*this._unitToMeters[this.radiusUnit],g=this._srType(this.center.spatialReference);if(this.geodesic){switch(g){case "webMercator":var l=p.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");
break;case "geographic":l=this.center}m=this._createGeodesicCircle(l,m,this.numberOfPoints,l.spatialReference);"webMercator"===g&&(m=p.geographicToWebMercator(m))}else{var A;"webMercator"===g||"projected"===g?A=m/this._convert2Meters(1,this.center.spatialReference):"geographic"===g&&(A=m/this._unitToMeters.esriDecimalDegrees);m=this._createPlanarCircle(this.center,A,this.numberOfPoints)}this.spatialReference=m.spatialReference;this.addRing(m.rings[0]);this.verifySR()},_createGeodesicCircle:function(m,
g,l,A){for(var u=0,E=Math.PI/180,K=[],k;u<2*Math.PI;)k=y._directGeodeticSolver(m.y*E,m.x*E,u,g,A),K.push([k.x,k.y]),u+=Math.PI/(l/2);K.push(K[0]);return new w(K)},_createPlanarCircle:function(m,g,l){for(var A=0,u=[],E,K;A<2*Math.PI;)E=m.x+Math.cos(A)*g,K=m.y+Math.sin(A)*g,u.push([E,K]),A+=Math.PI/(l/2);u.push(u[0]);m=new w(m.spatialReference);m.addRing(u);return m},_srType:function(m){return m.isWebMercator()?"webMercator":null!=b[m.wkid]||m.wkt&&0===m.wkt.indexOf("PROJCS")?"projected":"geographic"},
_convert2Meters:function(m,g){if(null!=b[g.wkid])g=b.values[b[g.wkid]];else{g=g.wkt;var l=g.lastIndexOf(",")+1,A=g.lastIndexOf("]]");g=parseFloat(g.substring(l,A))}return m*g}});c("extend-esri")&&F.setObject("geometry.Circle",H,e);return H})},"widgets/ThreatAnalysis/utils":function(){define(["dojo/_base/lang","dojo/_base/array"],function(H,F){return{transformOldConfigToNewConfigJson:function(c){var e={threats:[],generalSettings:{operationalLayer:{name:""},unit:"feet",defaultInputType:"interactive",
layerToSelectFeatures:"",defaultThreatType:""}};c.hasOwnProperty("threatAnalysis")&&(c.threatAnalysis.hasOwnProperty("operationalLayer")&&c.threatAnalysis.operationalLayer.name&&(e.generalSettings.operationalLayer.name=c.threatAnalysis.operationalLayer.name),c.threatAnalysis.hasOwnProperty("unit")&&(e.generalSettings.unit=c.threatAnalysis.unit));c.hasOwnProperty("threatTypes")&&F.forEach(c.threatTypes,H.hitch(this,function(r){e.threats.push(this._getConvertedThreatJson(r,!0,c.threatAnalysis.symbology))}));
c.hasOwnProperty("lpgThreatTypes")&&F.forEach(c.lpgThreatTypes,H.hitch(this,function(r){e.threats.push(this._getConvertedThreatJson(r,!1,c.threatAnalysis.symbology))}));return e},_getConvertedThreatJson:function(c,e,r){var w=e?["Mandatory Evacuation Distance","Safe Evacuation Distance"]:["Fireball Diameter","Safe Distance"],y=e?[c.Bldg_Dist,c.Outdoor_Dist]:[c.Fireball_Dia,c.Safe_Dist];return{threatName:c.Threat,zones:[{name:w[0],distance:this._validateDistance(y[0]),symbol:{outlineColor:e?this._getSymbol(r.mandatoryOutlineColor):
this._getSymbol(r.fireballDiaOutlineColor),fillColor:e?this._getSymbol(r.mandatoryFillColor):this._getSymbol(r.fireballDiaFillColor)}},{name:w[1],distance:this._validateDistance(y[1]),symbol:{outlineColor:e?this._getSymbol(r.safeOutlineColor):this._getSymbol(r.safeDistanceOutlineColor),fillColor:e?this._getSymbol(r.safeFillColor):this._getSymbol(r.safeDistanceFillColor)}}]}},_getSymbol:function(c){return{color:c.color,transparency:c.transparency,type:c.type}},getDefaultThreats:function(c,e){var r=
[],w=this._getDefaultSymbology();F.forEach(c,H.hitch(this,function(y){r.push(this._getConvertedThreatJson(y,!0,w))}));F.forEach(e,H.hitch(this,function(y){r.push(this._getConvertedThreatJson(y,!1,w))}));return r},_getDefaultSymbology:function(){return{mandatoryOutlineColor:{color:"#d10e40",transparency:0,type:"esriSLSSolid"},mandatoryFillColor:{color:"#d10e40",transparency:.88,type:"esriSFSSolid"},safeOutlineColor:{color:"#ffffff",transparency:0,type:"esriSLSNull"},safeFillColor:{color:"#ffd700",
transparency:.78,type:"esriSFSSolid"},fireballDiaOutlineColor:{color:"#d10e40",transparency:0,type:"esriSLSSolid"},fireballDiaFillColor:{color:"#d10e40",transparency:.88,type:"esriSFSSolid"},safeDistanceOutlineColor:{color:"#ffffff",transparency:0,type:"esriSLSNull"},safeDistanceFillColor:{color:"#ffd700",transparency:.78,type:"esriSFSSolid"}}},_validateDistance:function(c){if(isNaN(c)||-1!==[null,void 0,""].indexOf(c)||0>=c)c=.01;return c}}})},"widgets/ThreatAnalysis/js/jquery.easy-autocomplete":function(){define(["jimu/loaderplugins/jquery-loader! ./libs/jquery/jquery-1-11-1.js"],
function(H){var F=function(c){c.Configuration=function(e){function r(p,b){function q(m,g){for(var l in g)void 0===m[l]&&p.log("Property '"+l+"' does not exist in EasyAutocomplete options API."),"object"===typeof m[l]&&-1===H.inArray(l,y)&&q(m[l],g[l])}q(w,b)}var w={data:"list-required",url:"list-required",dataType:"json",listLocation:function(p){return p},xmlElementName:"",getValue:function(p){return p},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,
method:function(p,b){p=w.getValue(p);b=w.getValue(b);return p<b?-1:p>b?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(p,b){return-1<p.search(b)?!0:!1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},
onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(p){return p},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},y=["ajaxSettings","template"];this.get=function(p){return w[p]};this.equals=function(p,b){var q=void 0!==w[p]&&null!==w[p]?!0:!1;return q&&w[p]===b?!0:!1};this.checkDataUrlProperties=function(){return"list-required"===
w.url&&"list-required"===w.data?!1:!0};this.checkRequiredProperties=function(){for(var p in w)if("required"===w[p])return!1;return!0};this.printPropertiesThatDoesntExist=function(p,b){r(p,b)};(function(){"xml"===e.dataType&&(e.getValue||(e.getValue=function(l){return H(l).text()}),e.list||(e.list={}),e.list.sort||(e.list.sort={}),e.list.sort.method=function(l,A){l=e.getValue(l);A=e.getValue(A);return l<A?-1:l>A?1:0},e.list.match||(e.list.match={}),e.list.match.method=function(l,A){return-1<l.search(A)?
!0:!1});if(void 0!==e.categories&&e.categories instanceof Array){for(var p=[],b=0,q=e.categories.length;b<q;b+=1){var m=e.categories[b],g;for(g in w.categories[0])void 0===m[g]&&(m[g]=w.categories[0][g]);p.push(m)}e.categories=p}})();(function(){function p(b,q){var m=b||{},g;for(g in b)void 0!==q[g]&&null!==q[g]&&("object"!==typeof q[g]||q[g]instanceof Array?m[g]=q[g]:p(b[g],q[g]));void 0!==q.data&&null!==q.data&&"object"===typeof q.data&&(m.data=q.data);return m}w=p(w,e)})();!0===w.loggerEnabled&&
r(console,e);w.ajaxSettings=void 0!==e.ajaxSettings&&"object"===typeof e.ajaxSettings?e.ajaxSettings:{};(function(){if("list-required"!==w.url&&"function"!==typeof w.url){var p=w.url;w.url=function(){return p}}void 0!==w.ajaxSettings.url&&"function"!==typeof w.ajaxSettings.url&&(p=w.ajaxSettings.url,w.ajaxSettings.url=function(){return p});if("string"===typeof w.listLocation){var b=w.listLocation;"XML"===w.dataType.toUpperCase()?w.listLocation=function(m){return H(m).find(b)}:w.listLocation=function(m){return m[b]}}if("string"===
typeof w.getValue){var q=w.getValue;w.getValue=function(m){return m[q]}}void 0!==e.categories&&(w.categoriesAssigned=!0)})()};return c}(F||{});F=function(c){c.Logger=function(){this.error=function(e){};this.warning=function(e){}};return c}(F||{});F=function(c){c.Constans=function(){var e={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(r){return e[r]}};return c}(F||{});F=function(c){c.ListBuilderService=function(e,
r){function w(p,b){function q(){var A={},u;void 0!==p.xmlElementName&&(A.xmlElementName=p.xmlElementName);void 0!==p.listLocation?u=p.listLocation:void 0!==e.get("listLocation")&&(u=e.get("listLocation"));void 0!==u?"string"===typeof u?A.data=H(b).find(u):"function"===typeof u&&(A.data=u(b)):A.data=b;return A}function m(){var A={};void 0!==p.listLocation?"string"===typeof p.listLocation?A.data=b[p.listLocation]:"function"===typeof p.listLocation&&(A.data=p.listLocation(b)):A.data=b;return A}var g=
{};g="XML"===e.get("dataType").toUpperCase()?q():m();void 0!==p.header&&(g.header=p.header);void 0!==p.maxNumberOfElements&&(g.maxNumberOfElements=p.maxNumberOfElements);void 0!==e.get("list").maxNumberOfElements&&(g.maxListSize=e.get("list").maxNumberOfElements);if(void 0!==p.getValue)if("string"===typeof p.getValue){var l=p.getValue;g.getValue=function(A){return A[l]}}else"function"===typeof p.getValue&&(g.getValue=p.getValue);else g.getValue=e.get("getValue");return g}function y(p){var b=[];void 0===
p.xmlElementName&&(p.xmlElementName=e.get("xmlElementName"));H(p.data).find(p.xmlElementName).each(function(){b.push(this)});return b}this.init=function(p){var b=[],q={};q.data=e.get("listLocation")(p);q.getValue=e.get("getValue");q.maxListSize=e.get("list").maxNumberOfElements;b.push(q);return b};this.updateCategories=function(p,b){if(e.get("categoriesAssigned")){p=[];for(var q=0;q<e.get("categories").length;q+=1){var m=w(e.get("categories")[q],b);p.push(m)}}return p};this.convertXml=function(p){if("XML"===
e.get("dataType").toUpperCase())for(var b=0;b<p.length;b+=1)p[b].data=y(p[b]);return p};this.processData=function(p,b){for(var q=0,m=p.length;q<m;q+=1)p[q].data=r(e,p[q],b);return p};this.checkIfDataExists=function(p){for(var b=0,q=p.length;b<q;b+=1)if(void 0!==p[b].data&&p[b].data instanceof Array&&0<p[b].data.length)return!0;return!1}};return c}(F||{});F=function(c){c.proccess=function(e,r,w){function y(b,q){e.get("list").match.caseSensitive||("string"===typeof b&&(b=b.toLowerCase()),q=q.toLowerCase());
return e.get("list").match.method(b,q)?!0:!1}c.proccess.match=y;var p=r.data;p=function(b,q){var m=[],g="";if(e.get("list").match.enabled)for(var l=0,A=b.length;l<A;l+=1)g=e.get("getValue")(b[l]),y(g,q)&&m.push(b[l]);else m=b;return m}(p,w);p=function(b){void 0!==r.maxNumberOfElements&&b.length>r.maxNumberOfElements&&(b=b.slice(0,r.maxNumberOfElements));return b}(p);return p=function(b){e.get("list").sort.enabled&&b.sort(e.get("list").sort.method);return b}(p)};return c}(F||{});F=function(c){c.Template=
function(e){var r={basic:{type:"basic",method:function(y){return y},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(y){return y+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(y){return y},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(y){return y},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(y){return y},cssClass:""},
custom:{type:"custom",method:function(){},cssClass:""}},w=function(y){var p=y.fields;if("description"===y.type){var b=r.description.method;"string"===typeof p.description?b=function(q,m){return q+" - \x3cspan\x3e"+m[p.description]+"\x3c/span\x3e"}:"function"===typeof p.description&&(b=function(q,m){return q+" - \x3cspan\x3e"+p.description(m)+"\x3c/span\x3e"});return b}return"iconRight"===y.type?("string"===typeof p.iconSrc?b=function(q,m){return q+"\x3cimg class\x3d'eac-icon' src\x3d'"+m[p.iconSrc]+
"' /\x3e"}:"function"===typeof p.iconSrc&&(b=function(q,m){return q+"\x3cimg class\x3d'eac-icon' src\x3d'"+p.iconSrc(m)+"' /\x3e"}),b):"iconLeft"===y.type?("string"===typeof p.iconSrc?b=function(q,m){return"\x3cimg class\x3d'eac-icon' src\x3d'"+m[p.iconSrc]+"' /\x3e"+q}:"function"===typeof p.iconSrc&&(b=function(q,m){return"\x3cimg class\x3d'eac-icon' src\x3d'"+p.iconSrc(m)+"' /\x3e"+q}),b):"links"===y.type?("string"===typeof p.link?b=function(q,m){return"\x3ca href\x3d'"+m[p.link]+"' \x3e"+q+"\x3c/a\x3e"}:
"function"===typeof p.link&&(b=function(q,m){return"\x3ca href\x3d'"+p.link(m)+"' \x3e"+q+"\x3c/a\x3e"}),b):"custom"===y.type?y.method:r.basic.method};this.getTemplateClass=function(y){var p=function(){return""};return y&&y.type?y.type&&r[y.type]?function(){var b=r[y.type].cssClass;return function(){return b}}():p:p}(e);e=e&&e.type?e.type&&r[e.type]?w(e):r.basic.method:r.basic.method;this.build=e};return c}(F||{});F=function(c){c.main=function(e,r){function w(){function L(I,G){return l.get("highlightPhrase")&&
""!==G?(G=G.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),(I+"").replace(new RegExp("("+G+")","gi"),"\x3cb\x3e$1\x3c/b\x3e")):I}k.parent().hasClass(g.getValue("WRAPPER_CSS_CLASS"))&&(k.next("."+g.getValue("CONTAINER_CLASS")).remove(),k.unwrap());(function(){var I=H("\x3cdiv\x3e"),G=g.getValue("WRAPPER_CSS_CLASS");l.get("theme")&&""!==l.get("theme")&&(G+=" eac-"+l.get("theme"));l.get("cssClasses")&&""!==l.get("cssClasses")&&(G+=" "+l.get("cssClasses"));""!==u.getTemplateClass()&&(G+=" "+
u.getTemplateClass());I.addClass(G);k.wrap(I);!0===l.get("adjustWidth")&&k.parent().css("width","100%")})();(function(){var I=H("\x3cdiv\x3e").addClass(g.getValue("CONTAINER_CLASS"));I.attr("id",y()).prepend(H("\x3cul\x3e"));(function(){I.on("show.eac",function(){switch(l.get("list").showAnimation.type){case "slide":var G=l.get("list").showAnimation.time;var v=l.get("list").showAnimation.callback;I.find("ul").slideDown(G,v);break;case "fade":G=l.get("list").showAnimation.time;v=l.get("list").showAnimation.callback;
I.find("ul").fadeIn(G,v);break;default:I.find("ul").show()}l.get("list").onShowListEvent()}).on("hide.eac",function(){switch(l.get("list").hideAnimation.type){case "slide":var G=l.get("list").hideAnimation.time;var v=l.get("list").hideAnimation.callback;I.find("ul").slideUp(G,v);break;case "fade":G=l.get("list").hideAnimation.time;v=l.get("list").hideAnimation.callback;I.find("ul").fadeOut(G,v);break;default:I.find("ul").hide()}l.get("list").onHideListEvent()}).on("selectElement.eac",function(){I.find("ul li").removeClass("selected");
I.find("ul li").eq(C).addClass("selected");l.get("list").onSelectItemEvent()}).on("loadElements.eac",function(G,v,J){var O="";G=I.find("ul");G.empty().detach();z=[];for(var R=0,N=0,Q=v.length;N<Q;N+=1){var W=v[N].data;if(0!==W.length){void 0!==v[N].header&&0<v[N].header.length&&G.append("\x3cdiv class\x3d'eac-category' \x3e"+v[N].header+"\x3c/div\x3e");for(var aa=0,ia=W.length;aa<ia&&R<v[N].maxListSize;aa+=1)O=H("\x3cli\x3e\x3cdiv class\x3d'eac-item'\x3e\x3c/div\x3e\x3c/li\x3e"),function(){var ea=
aa,ja=R,oa=v[N].getValue(W[ea]);O.find(" \x3e div").on("click",function(){k.val(oa).trigger("change");C=ja;m(ja);l.get("list").onClickEvent();l.get("list").onChooseEvent()}).mouseover(function(){C=ja;m(ja);l.get("list").onMouseOverEvent()}).mouseout(function(){l.get("list").onMouseOutEvent()}).html(u.build(L(oa,J),W[ea]))}(),G.append(O),z.push(W[aa]),R+=1}}I.append(G);l.get("list").onLoadEvent()})})();k.after(I)})();x=H("#"+y());l.get("placeholder")&&k.attr("placeholder",l.get("placeholder"))}function y(){var L=
k.attr("id");return L=g.getValue("CONTAINER_ID")+L}function p(){K("autocompleteOff",!0)&&k.attr("autocomplete","off");(function(){k.focusout(function(){var L=k.val();l.get("list").match.caseSensitive||(L=L.toLowerCase());for(var I=0,G=z.length;I<G;I+=1){var v=l.get("getValue")(z[I]);l.get("list").match.caseSensitive||(v=v.toLowerCase());if(v===L){C=I;m(C);break}}})})();(function(){k.off("keyup").keyup(function(L){function I(v){if(!(v.length<l.get("minCharNumber"))){if("list-required"!==l.get("data")){var J=
l.get("data"),O=E.init(J);O=E.updateCategories(O,J);O=E.processData(O,v);x.trigger("loadElements.eac",[O,v]);0<k.parent().find("li").length?b():q()}J=function(){var R={},N=l.get("ajaxSettings")||{},Q;for(Q in N)R[Q]=N[Q];return R}();if(void 0===J.url||""===J.url)J.url=l.get("url");if(void 0===J.dataType||""===J.dataType)J.dataType=l.get("dataType");void 0!==J.url&&"list-required"!==J.url&&(J.url=J.url(v),J.data=l.get("preparePostData")(J.data,v),H.ajax(J).done(function(R){var N=E.init(R);N=E.updateCategories(N,
R);N=E.convertXml(N);if(!1!==l.get("matchResponseProperty")?"string"===typeof l.get("matchResponseProperty")?R[l.get("matchResponseProperty")]===v:"function"===typeof l.get("matchResponseProperty")?l.get("matchResponseProperty")(R)===v:1:1)N=E.processData(N,v),x.trigger("loadElements.eac",[N,v]);E.checkIfDataExists(N)&&0<k.parent().find("li").length?b():q();l.get("ajaxCallback")()}).fail(function(){A.warning("Fail to load response data")}).always(function(){}))}}switch(L.keyCode){case 27:q();k.trigger("blur");
break;case 38:L.preventDefault();0<z.length&&0<C&&(--C,k.val(l.get("getValue")(z[C])),m(C));break;case 40:L.preventDefault();0<z.length&&C<z.length-1&&(C+=1,k.val(l.get("getValue")(z[C])),m(C));break;default:if(40<L.keyCode||8===L.keyCode){var G=k.val();!0!==l.get("list").hideOnEmptyPhrase||8!==L.keyCode||""!==G?0<l.get("requestDelay")?(void 0!==B&&clearTimeout(B),B=setTimeout(function(){I(G)},l.get("requestDelay"))):I(G):q()}}})})();(function(){k.on("keydown",function(L){L=L||window.event;if(38===
L.keyCode)return!1}).keydown(function(L){13===L.keyCode&&-1<C&&(k.val(l.get("getValue")(z[C])),l.get("list").onKeyEnterEvent(),l.get("list").onChooseEvent(),C=-1,q(),L.preventDefault())})})();k.off("keypress");(function(){k.focus(function(){""!==k.val()&&0<z.length&&(C=-1,b())})})();(function(){k.blur(function(){setTimeout(function(){C=-1;q()},250)})})()}function b(){x.trigger("show.eac")}function q(){x.trigger("hide.eac")}function m(L){x.trigger("selectElement.eac",L)}var g=new c.Constans,l=new c.Configuration(r),
A=new c.Logger,u=new c.Template(r.template),E=new c.ListBuilderService(l,c.proccess),K=l.equals,k=e,x="",z=[],C=-1,B;c.consts=g;this.getConstants=function(){return g};this.getConfiguration=function(){return l};this.getContainer=function(){return x};this.getSelectedItemIndex=function(){return C};this.getItems=function(){return z};this.getItemData=function(L){return z.length<L||void 0===z[L]?-1:z[L]};this.getSelectedItemData=function(){return this.getItemData(C)};this.build=function(){w()};this.init=
function(){0===k.length?A.error("Input field doesn't exist."):l.checkDataUrlProperties()?l.checkRequiredProperties()?(w(),p()):A.error("Will not work without mentioned properties."):A.error("One of options variables 'data' or 'url' must be defined.")}};c.eacHandles=[];c.getHandle=function(e){return c.eacHandles[e]};c.inputHasId=function(e){return void 0!==H(e).attr("id")&&0<H(e).attr("id").length?!0:!1};c.assignRandomId=function(e){var r="";do r="eac-"+Math.floor(1E4*Math.random());while(0!==H("#"+
r).length);H(e).attr("id",r)};c.setHandle=function(e,r){c.eacHandles[r]=e};return c}(F||{});(function(c){c.fn.easyAutocomplete=function(e){return this.each(function(){var r=c(this),w=new F.main(r,e);F.inputHasId(r)||F.assignRandomId(r);w.init();F.setHandle(w,r.attr("id"))})};c.fn.getSelectedItemIndex=function(){var e=c(this).attr("id");return void 0!==e?F.getHandle(e).getSelectedItemIndex():-1};c.fn.getItems=function(){var e=c(this).attr("id");return void 0!==e?F.getHandle(e).getItems():-1};c.fn.getItemData=
function(e){var r=c(this).attr("id");return void 0!==r&&-1<e?F.getHandle(r).getItemData(e):-1};c.fn.getSelectedItemData=function(){var e=c(this).attr("id");return void 0!==e?F.getHandle(e).getSelectedItemData():-1}})(jQuery)})},"jimu/loaderplugins/jquery-loader":function(){define(["dojo/Deferred","dojo/when"],function(H,F){var c,e={},r=function(b){var q=new H;if(e.locked)return setTimeout(function(){r(b)},50),q;if(e[b])return e.locked=!0,q.resolve(e[b]),q;e.locked=!0;c([b],function(){e[b]=window.jQuery;
q.resolve(e[b])});return q},w=function(b,q,m){c([b[q]],function(){q===b.length-1?m.resolve():(q++,w(b,q,m))})},y=function(b,q){b=new H;q[0]?w(q,0,b):b.resolve();return b},p=function(b,q){var m=new H;r(b).then(function(g){y(b,q).then(function(){e.locked=!1;m.resolve(g)})});return m};return{load:function(b,q,m){b=b.split(",");var g=[];c=q;0===b.length?m(null):(q=b[0],g=b.slice(1),F(p(q,g),m))}}})},"widgets/ThreatAnalysis/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css",
"dojo/i18n!./nls/strings"],function(){})},"url:widgets/ThreatAnalysis/models/ThreatTypes.json":'[{\r\n    "ID": 1,\r\n    "Threat": "Pipe Bomb",\r\n    "Capacity": 5,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 70,\r\n    "Outdoor_Dist": 1200,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 2,\r\n    "Threat": "Suicide Bomb",\r\n    "Capacity": 20,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 110,\r\n    "Outdoor_Dist": 1700,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 3,\r\n    "Threat": "Briefcase",\r\n    "Capacity": 50,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 150,\r\n    "Outdoor_Dist": 1850,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 4,\r\n    "Threat": "Car",\r\n    "Capacity": 500,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 320,\r\n    "Outdoor_Dist": 1900,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 5,\r\n    "Threat": "SUV/VAN",\r\n    "Capacity": 1000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 400,\r\n    "Outdoor_Dist": 2400,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 6,\r\n    "Threat": "Small Delivery Truck",\r\n    "Capacity": 4000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 640,\r\n    "Outdoor_Dist": 3800,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 7,\r\n    "Threat": "Container/Water Truck",\r\n    "Capacity": 10000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 860,\r\n    "Outdoor_Dist": 5100,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 8,\r\n    "Threat": "Semi-Trailer",\r\n    "Capacity": 60000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 1570,\r\n    "Outdoor_Dist": 9300,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  }\r\n]',
"url:widgets/ThreatAnalysis/models/LpgThreatTypes.json":'[{\r\n    "ID": 1,\r\n    "Threat": "Small LPG Tank",\r\n    "LPG Mass": 20,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 40,\r\n    "Safe_Dist": 160,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 2,\r\n    "Threat": "Large LPG Tank",\r\n    "LPG Mass": 100,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 69,\r\n    "Safe_Dist": 276,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 3,\r\n    "Threat": "Commercial/Residential LPG Tank",\r\n    "LPG Mass": 2000,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 184,\r\n    "Safe_Dist": 736,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 4,\r\n    "Threat": "Small LPG Truck",\r\n    "LPG Mass": 8000,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 292,\r\n    "Safe_Dist": 1168,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 5,\r\n    "Threat": "Semi-Tanker LPG",\r\n    "LPG Mass": 40000,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 499,\r\n    "Safe_Dist": 1996,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  }\r\n]',
"url:jimu/dijit/templates/CoordinateControl.html":"\x3cdiv class\x3d'coordinateContainer'\x3e\r\n  \x3cdiv class\x3d'coordLabel' data-dojo-attach-point\x3d'coordNameContainer' data-a11y-label-id\x3d'coordLabel'\x3e\r\n    \x3cspan data-dojo-type\x3d'dijit/InlineEditBox' width\x3d'75px' data-dojo-props\x3d\"editor:'dijit/form/TextBox', autoSave:true\"\r\n      data-dojo-attach-point\x3d'coordName'\x3e${type}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'add-with-icon coordInput'\x3e\r\n    \x3ctextarea data-a11y-label-by\x3d'coordLabel' tabindex\x3d\"0\" aria-multiline\x3d\"true\" role\x3d\"textbox\" id\x3d'${uid}' type\x3d'text' rows\x3d'1' data-dojo-attach-point\x3d'coordtext' spellcheck\x3d'false'\r\n    placeholder\x3d'${nls.coordinateInputLabel}' title\x3d'${nls.coordinateInputLabel}'\x3e\x3c/textarea\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'coordactions'\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" id\x3d'${uid}_cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'cpbtn' class\x3d'cpbtn'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" title\x3d\"${nls.formatOutput}\" class\x3d'settingBtn' data-dojo-attach-point\x3d'formatButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.zoomLabel}' title\x3d'${nls.zoomLabel}' class\x3d'zoomBtn' data-dojo-attach-point\x3d'zoomButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.addPointLabel}' title\x3d'${nls.addPointLabel}' class\x3d'drawPointBtn' data-dojo-attach-point\x3d'drawPointButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.removeCoordinate}' title\x3d'${nls.removeCoordinate}' class\x3d'jimu-icon jimu-icon-close' data-dojo-attach-point\x3d'removeControlBtn'\r\n        data-dojo-attach-event\x3d'onclick: remove'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d\"${nls.expandOutput}\" aria-expanded \x3d \"false\" title\x3d\"${nls.expandOutput}\" class\x3d'expandBtn' data-dojo-attach-point\x3d'expandButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d'coordcontrols' class\x3d'coordarea' style\x3d\"display: none\"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub1' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub1label' data-a11y-label-id\x3d'sub1Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub1Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub1val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub1val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal1CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub2' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub2label' data-a11y-label-id\x3d'sub2Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub2Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub2val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub2val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal2CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub3' class\x3d'coordformat sub3'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub3label' data-a11y-label-id\x3d'sub3Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub3Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub3val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub3val~cpbtn' aria-label\x3d'$${nls.copyToClipboard}' title\x3d'$${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal3CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub4' class\x3d'coordformat sub4'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub4label' data-a11y-label-id\x3d'sub4Label' /\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub4Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub4val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub4val~cpbtn' aria-label\x3d'${nls.copyToClipboard} title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal4CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\"line-separator\"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:widgets/ThreatAnalysis/templates/ThreatAnalysisSettings.html":'\x3cdiv class\x3d"esriCTFullHeight"\x3e\r\n  \x3cdiv class\x3d"esriCTSettingContainer"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTLabel" title\x3d"${nls.threatTypeSelectLabel}"\x3e${nls.threatTypeSelectLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDijitControl"\x3e\r\n          \x3cdiv class\x3d"esriCTDijitWrapper"\x3e\r\n            \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"SelectStyle esriCTDijitWrapper esriCTThreatInputType esriCTSelectLabelWidth"\r\n              data-dojo-attach-point\x3d"threatType" tabindex\x3d"0" aria-label\x3d"${nls.threatTypeSelectLabel}"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper esriCTFullHeight esriCTZonesTableMaxHeight" data-dojo-attach-point\x3d"threatZonesTableNode"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/templates/ColorPickerEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\r\n    \x3col data-dojo-type\x3d"dijit/form/HorizontalRuleLabels" style\x3d"height:2.5em;" container\x3d"topDecoration"\x3e\r\n      \x3cli\x3e${nls.transparencyLabel}\x3c/li\x3e\r\n      \x3cli\x3e\x3c/li\x3e\r\n    \x3c/ol\x3e\r\n  \x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0" data-dojo-attach-point\x3d"spinner"\r\n    data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cdiv class\x3d\'styleSelectSection\'\x3e\r\n    \x3clabel style\x3d"margin-bottom: 3px;" for\x3d"${id}_select"\x3e${nls.style}\x3c/label\x3e\r\n    \x3cselect class\x3d"styleSelect" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"dropdown"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/newZone.html":'\x3cdiv class\x3d"esriCTPopupNode"\x3e\r\n  \x3cdiv class\x3d"esriCTPopupContainer"\x3e\r\n\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n      \x3cdiv class\x3d"esriCTLabel"\x3e${nls.descriptionLabel}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTDijitControl"\x3e\r\n        \x3cdiv class\x3d"esriCTDijitWrapper"\x3e\r\n          \x3cdiv class\x3d"esriCTDijitWrapper" data-dojo-attach-point\x3d"zoneDescriptionTextBox"\r\n            data-dojo-type\x3d"dijit/form/ValidationTextBox" aria-label\x3d"${nls.descriptionLabel}" trim\x3d"true" required\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n      \x3cdiv class\x3d"esriCTLabel" data-dojo-attach-point\x3d"zoneDistanceLabel"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTDijitControl"\x3e\r\n        \x3cdiv class\x3d"esriCTDijitWrapper"\x3e\r\n          \x3cdiv class\x3d"esriCTDijitWrapper" data-dojo-attach-point\x3d"zoneDistanceTextBox"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min: 0.01}" trim\x3d"true" required\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n      \x3cdiv class\x3d"esriCTSymbologyLabel" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"outlineColor" data-dojo-attach-point\x3d"outlineColorPicker"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n      \x3cdiv class\x3d"esriCTSymbologyLabel" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"fillColor" data-dojo-attach-point\x3d"fillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/Widget.html":'\x3cdiv style\x3d"height: 100%" data-dojo-attach-point\x3d"mainNode"\x3e\r\n  \x3cdiv class\x3d"FullHeight FullWidth" data-dojo-attach-point\x3d"widgetMainNode"\x3e\r\n\r\n    \x3c!---------------------\r\n          Threat Analysis Main Page Node\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"FullHeight esriCTThreatMainPageNode" data-dojo-attach-point\x3d"threatMainPageNode"\x3e\r\n      \x3cdiv class\x3d"FullWidth NewHeader"\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"MainTitleDiv Ellipsis" title\x3d"${nls.threatAnalysisMainPageTitle}"\x3e\r\n          \x3ca href\x3d"${nls.jcatURL}" data-dojo-attach-point\x3d"threatAnalysisTitleUrl" tabinex\x3d"0"\r\n            aria-label\x3d\'${nls.threatAnalysisMainPageTitle}\' role\x3d\'link\'\r\n            target\x3d"_blank"\x3e${nls.threatAnalysisMainPageTitle}\x3c/a\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"SettingsIcon Pointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"threatAnalysisSettingsButton" tabindex\x3d"0" aria-label\x3d"${nls.settingsTitle}"\r\n          role\x3d"button"\x3e\x3c/div\x3e\r\n        \x3c!-- Threat Analysis Point Form --\x3e\r\n        \x3cdiv class\x3d"MainPageRow"\x3e\r\n          \x3c!-- Input Location --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow esriCTContainerNode"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" data-a11y-label-id\x3d"inputLocationLabel" style\x3d"width: 100%"\r\n              title\x3d"${nls.inputLocation}"\x3e${nls.inputLocation}\x3c/div\x3e\r\n            \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"inputSelectStyle"\r\n              data-dojo-attach-point\x3d"inputTypeSelect" data-a11y-label-by\x3d"inputLocationLabel" tabindex\x3d"0"\x3e\r\n              \x3coption value\x3d"interactive"\x3e${nls.interactive}\x3c/option\x3e\r\n              \x3coption value\x3d"manual_location" selected\x3e${nls.fromCoord}\x3c/option\x3e\r\n              \x3coption value\x3d"existing_features"\x3e${nls.existingFeature}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Interactive Draw Tools --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow esriCTContainerNode" data-dojo-attach-point\x3d"interActiveDiv"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.selectDrawModeLabel}"\r\n              data-a11y-label-id\x3d"selectDrawModeLabel"\x3e${nls.selectDrawModeLabel}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"drawBox" data-dojo-type\x3d"jimu/dijit/DrawBox"\r\n              data-dojo-props\x3d\'geoTypes:["POINT","POLYLINE","POLYGON"],showClear:false,deactivateAfterDrawing:true\'\r\n              style\x3d"margin-top:5px;" data-a11y-label-by\x3d"selectDrawModeLabel"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Threat Analysis Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingFirstRow esriCTContainerNode" data-dojo-attach-point\x3d"coordInputDiv"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d\'threatAnalysisCoordContainer\'\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Existing Features --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow esriCTContainerNode" data-dojo-attach-point\x3d"existingFeatureDiv"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.selectFeatureLabel}"\r\n              data-a11y-label-id\x3d"selectFeatureLabel"\x3e\r\n              ${nls.selectFeatureLabel}\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"inputSelectStyle"\r\n                data-dojo-attach-point\x3d"layerSelect" tabindex\x3d"0" data-a11y-label-by\x3d"selectFeatureLabel"\x3e\x3c/select\x3e\r\n              \x3cdiv class\x3d"drawing-section" data-dojo-attach-point\x3d"drawingSection"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Threat Type Container --\x3e\r\n          \x3cdiv class\x3d"HalfWidthContainer esriCTContainerNode"\x3e\r\n            \x3cdiv class\x3d"HalfWidthLeft SettingRow"\x3e\r\n              \x3c!-- Threat Type Input --\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.threatType}"\r\n                data-a11y-label-id\x3d"threatType"\x3e${nls.threatType}\x3c/div\x3e\r\n              \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"SelectStyle esriCTThreatInputType"\r\n                data-dojo-attach-point\x3d"threatType" tabindex\x3d"0" data-a11y-label-by\x3d"threatType"\x3e\x3c/select\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"HalfWidthRight SettingRow"\x3e\r\n              \x3c!-- Unit type --\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.unitsLabel}"\r\n                data-a11y-label-id\x3d"unitsLabel"\x3e${nls.unitsLabel}\x3c/div\x3e\r\n              \x3cselect class\x3d"SelectStyle" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"unitType"\r\n                tabindex\x3d"0" data-a11y-label-by\x3d"unitsLabel"\x3e\r\n                \x3coption value\x3d"feet"\x3e${nls.feet}\x3c/option\x3e\r\n                \x3coption value\x3d"meters"\x3e${nls.meters}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Distances Container --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"threatZoneTableNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear threatAnalysis Buttons --\x3e\r\n          \x3cdiv class\x3d"HalfWidthContainer esriCTContainerNode"\x3e\r\n            \x3cdiv class\x3d"BtnContainer HalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'threatCreateButton\' tabindex\x3d"-1"\r\n                aria-label\x3d\'${nls.createBtn}\' role\x3d\'button\'\x3e${nls.createBtn}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"BtnContainer HalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'threatClearButton\' tabindex\x3d"0" aria-label\x3d\'${nls.clearBtn}\'\r\n                role\x3d\'button\'\x3e${nls.clearBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          Settings\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"Hidden FullHeight" data-dojo-attach-point\x3d"threatSettingsPageNode"\x3e\r\n      \x3cdiv class\x3d"FullWidth SettingHeader"\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv class\x3d"BackButton Pointer" title\x3d"${nls.back}"\r\n            data-dojo-attach-point\x3d"threatSettingsPanelBackButton" tabindex\x3d"0" aria-label\x3d"${nls.back}"\r\n            role\x3d"button"\x3e\r\n            \x3cdiv class\x3d"ItemLeftArrow"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"TitleDiv Ellipsis" title\x3d"${nls.settingsTitle}"\x3e\r\n            ${nls.settingsTitle}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"SettingsNode" data-dojo-attach-point\x3d"threatSettingsNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          Publish\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"Hidden FullHeight" data-dojo-attach-point\x3d"threatResultsPageNode"\x3e\r\n      \x3cdiv class\x3d"FullWidth SettingHeader"\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv class\x3d"BackButton Pointer" title\x3d"${nls.back}"\r\n            data-dojo-attach-point\x3d"threatResultsPanelBackButton" tabindex\x3d"0" aria-label\x3d"${nls.back}"\r\n            role\x3d"button"\x3e\r\n            \x3cdiv class\x3d"ItemLeftArrow"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"TitleDiv Ellipsis" title\x3d"${nls.resultsTitle}"\x3e${nls.resultsTitle}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"MainPageRow"\x3e\r\n          \x3c!-- threatAnalysis Layer Name --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" title\x3d"${nls.layerName}" data-a11y-label-id\x3d"layerName"\x3e\r\n              ${nls.layerName}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput controlGroupHidden" style\x3d"width: 100%;"\r\n              data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addTANameArea"\r\n              data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_ -]*\'" required\x3d"true" data-a11y-label-by\x3d"layerName"\r\n              trim\x3d"true"\x3e\x3c/input\x3e\r\n            \x3cselect class\x3d"publishSelect" data-a11y-label-by\x3d"layerName" style\x3d"width: 100%;"\r\n              data-dojo-type\x3d"jimu/dijit/formSelect" tabindex\x3d"0" data-dojo-attach-point\x3d"featureLayerList"\x3e\x3c/select\x3e\r\n            \x3cdiv class\x3d"TACheckBoxNode" data-dojo-attach-point\x3d"checkBoxParentContainer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"TACheckBoxNode esriCTHintCheck controlGroupHidden" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish threatAnalysis Button --\x3e\r\n          \x3cdiv class\x3d"BtnContainer"\x3e\r\n            \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'threatPublishButton\' tabindex\x3d"0"\r\n              aria-label\x3d"${nls.publishTABtn}" role\x3d"button"\x3e${nls.publishTABtn}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Publishing Message --\x3e\r\n          \x3cdiv class\x3d"PublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/css/style.css":".jimu-widget-threatAnalysis .MainContainer {min-width: 222px;}.jimu-widget-threatAnalysis .FullHeight {height: 100%;}.jimu-widget-threatAnalysis .FullWidth {width: 100%;}.jimu-widget-threatAnalysis .HalfWidthContainer {display: flex;}.jimu-widget-threatAnalysis .HalfWidthLeft {width: 50%;}.jimu-rtl .jimu-widget-threatAnalysis .HalfWidthLeft {padding-left: 2px;}.jimu-widget-threatAnalysis .HalfWidthRight {padding-left: 10px; width: 50%;}.jimu-rtl .jimu-widget-threatAnalysis .HalfWidthRight {padding: 0px 2px 0px 0px;}.jimu-widget-threatAnalysis .Ellipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-threatAnalysis .Pointer {cursor: pointer;}.jimu-widget-threatAnalysis .MainPageRow {width: calc(100% - 20px); margin: 10px 10px 10px 10px; display: inline-block;}.jimu-widget-threatAnalysis .InputLabel {float: left; line-height: 28px; padding: 5px 0px 0px 0px; width: 100%;}.jimu-widget-threatAnalysis .TACheckBoxNode {padding-top: 10px;}.jimu-rtl .jimu-widget-threatAnalysis .InputLabel {padding: 5px 2px 0px 0px;}.jimu-widget-threatAnalysis .InputLabelSettings {float: left; line-height: 28px; padding: 5px 0px 0px 0px;}.jimu-widget-threatAnalysis .PublishMessage {line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: normal;}.jimu-widget-threatAnalysis .claro .dijitSelect,.jimu-widget-threatAnalysis .claro .dijitTextBox {width: calc(100% - 60px); overflow: hidden; text-overflow: ellipsis; margin-bottom: 8px;}.jimu-widget-threatAnalysis .noResize .dijitSelectLabel,.jimu-widget-threatAnalysis .noResize .dijitTextBox .dijitInputInner,.jimu-widget-threatAnalysis .noResize .dijitValidationTextBox .dijitValidationContainer {text-overflow: ellipsis; overflow: hidden; width: 80px; text-align: left;}.jimu-widget-threatAnalysis .SelectStyle:focus {outline: 2px solid #24B5CC !important; outline-offset: -2px;}.jimu-widget-threatAnalysis .NewHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-threatAnalysis .SettingsIcon {background-image: url('./images/settings_black.png'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-rtl .jimu-widget-threatAnalysis .SettingsIcon {float: left;}.jimu-widget-threatAnalysis .SettingsIcon:hover {background-image: url('./images/settings_black_hover_black.png'); background-repeat: no-repeat;}.jimu-widget-threatAnalysis .dijitTextBox .dijitInputInner {font-size: 14px; padding-right: 0px !important;}.claro .jimu-widget-threatAnalysis .dijitTextBox .dijitInputInner {height: 17px !important; line-height: 17px !important;}.jimu-widget-threatAnalysis .dijitTextBoxFocused .dijitInputContainer {background: transparent;}.jimu-widget-threatAnalysis .Hidden {display: none;}.claro .dijitTextBox {width: calc(100% - 45px);}.jimu-widget-threatAnalysis .SettingsRow {width: 100%; display: inline-flex;}.jimu-widget-threatAnalysis .SettingsButtonIcon {margin-top: 13px; height: 16px; width: 16px;}.jimu-rtl .jimu-widget-threatAnalysis .SettingsButtonIcon {margin-top: 9px; margin-left: 2px;}.jimu-widget-threatAnalysis .LabelSettingsDownButton {background: url(\"./images/arrow-down_black.png\") no-repeat; margin-top: 15px;}.jimu-rtl .jimu-widget-threatAnalysis .LabelSettingsDownButton {margin: 15px 0 0 5px; width: 13px;}.jimu-widget-threatAnalysis .LabelSettingsDownButton:hover {background: url(\"./images/arrow-down_black_hover.png\") no-repeat;}.jimu-widget-threatAnalysis .LabelSettingsRightButton {background: url(\"./images/arrow-right_black.png\") no-repeat;}.jimu-rtl .jimu-widget-threatAnalysis .LabelSettingsRightButton {transform: rotate(180deg);}.jimu-widget-threatAnalysis .LabelSettingsRightButton:hover {background: url(\"./images/arrow-right_black_hover.png\") no-repeat;}.jimu-widget-threatAnalysis .SettingsNode {width: 100%; height: calc(100% - 30px); display: inline-block; overflow: hidden;}.jimu-widget-threatAnalysis .SettingsContainer {margin: 10px; display: inline-block; width: calc(100% - 20px);}.jimu-widget-threatAnalysis .SettingFirstRow {padding-top: 12px; padding-bottom: 6px;}.jimu-widget-threatAnalysis .SettingRow {padding-bottom: 6px;}.jimu-widget-threatAnalysis .SelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: 'Avenir Medium'; margin: 0 0 8px 0; text-align: left;}.jimu-widget-threatAnalysis .inputSelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: 'Avenir Medium'; margin: 0 0 8px 0;}.jimu-widget-threatAnalysis .inputSelectStyle .dijitSelectLabel {-ms-text-overflow: ellipsis; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; text-align: left; margin-top: 5px;}.jimu-rtl .jimu-widget-threatAnalysis .inputSelectStyle .dijitSelectLabel {text-align: right;}.jimu-widget-threatAnalysis .SelectStyle.SelectStyleMini {width: calc(100% - 45px); float: left;}.jimu-widget-threatAnalysis .SettingRowPaddingTop20 {padding-top: 20px;}.jimu-widget-threatAnalysis .SettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-rtl .jimu-widget-threatAnalysis .SettingHeader {float: none; padding: 0px;}.jimu-widget-threatAnalysis .BackButton {width: 20px; float: left;}.jimu-rtl .jimu-widget-threatAnalysis .BackButton {float: right;}.jimu-widget-threatAnalysis .MainTitleDiv {line-height: 10px; font-weight: bold; text-align: left; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-rtl .jimu-widget-threatAnalysis .MainTitleDiv {text-align: right;}.jimu-widget-threatAnalysis .TitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-rtl .jimu-widget-threatAnalysis .TitleDiv {padding-top: 10px;}.jimu-widget-threatAnalysis .ItemLeftArrow {background-image: url('./images/left-arrow_black.png'); float: left; margin: 0px 5px 0px 0px; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-rtl .jimu-widget-threatAnalysis .ItemLeftArrow {float: none; margin: 0px; transform: rotate(180deg);}.jimu-widget-threatAnalysis .ItemLeftArrow:hover {background-image: url('./images/left-arrow_black_hover.png');}.jimu-widget-threatAnalysis .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #ffffff;}.jimu-widget-threatAnalysis .dijitSelect .dijitButtonContentsDartTheme {background-color: inherit;}.jimu-widget-threatAnalysis .dijitSelect .dijitArrowButton {background-color: #ffffff; background-image: none; border-color: #ffffff;}.jimu-widget-threatAnalysis .dijitSelect .dijitArrowButtonDartTheme {background-color: rgba(0, 0, 0, 0.5) !important;}.jimu-widget-threatAnalysis .dijitMenuItem {color: #7989a0;}.jimu-widget-threatAnalysis .dijitSelect .dijitInputField {margin-right: 0px;}.jimu-widget-threatAnalysis .switch-toggle-group {padding: 5px;}.jimu-widget-threatAnalysis .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-threatAnalysis .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-top: 6px;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox:before {content: \"\"; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.jimu-widget-threatAnalysis .dijitTextBox .dijitPlaceHolder {font-size: 12px;}.jimu-widget-threatAnalysis .dijitTextBoxError {border-color: #d9dde0 !important; box-shadow: inset 0 0 0 2px #d46464;}.SubTitle {font-weight: bold;}.jimu-widget-threatAnalysis .editBtn {float: right; background: url(./images/draw_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 7px;}.jimu-widget-threatAnalysis .editBtn:hover {background: url('./images/draw_black_hover.png'); background-repeat: no-repeat;}.jimu-widget-threatAnalysis .jimu-edit-active {background: url('./images/draw_black_hover.png'); background-repeat: no-repeat; border: none;}.jimu-widget-threatAnalysis .helpBtn {float: right; background: url(./images/help_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-widget-threatAnalysis .helpBtn:hover {background: url(./images/help_black_hover.png);}.jimu-widget-threatAnalysis .add-with-icon {height: 30px; padding-left: 2px;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-threatAnalysis .BtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-widget-threatAnalysis .controlGroupHidden {display: none;}.jimu-widget-threatAnalysis .controlItem {display: flex;}.jimu-widget-threatAnalysis .jimu-btn {margin-bottom: 6px; width: 100%;}.easy-autocomplete {position: relative;}.easy-autocomplete input {border-color: #ccc; border-style: solid; border-width: 1px; color: #555; float: none; padding: 6px 12px;}.easy-autocomplete input:hover,.easy-autocomplete input:focus {box-shadow: none;}.easy-autocomplete a {display: inline-flex;}.easy-autocomplete a:hover {cursor: help;}.easy-autocomplete-container ul {background: none repeat scroll 0 0 #ffffff; border-top: 1px dotted #ccc; display: none; margin-top: 0; padding-bottom: 0; padding-left: 0; position: relative; top: -1px;}.easy-autocomplete-container ul li,.easy-autocomplete-container ul .eac-category {background: inherit; border-color: #ccc; border-image: none; border-style: solid; border-width: 0 1px; display: block; font-size: 14px; font-weight: normal; padding: 4px 12px;}.easy-autocomplete-container ul li:last-child {border-radius: 0 0 2px 2px; border-width: 0 1px 1px;}.easy-autocomplete-container ul li.selected {background: none repeat scroll 0 0 #ebebeb; cursor: pointer;}.jimu-widget-threatAnalysis .weatherPanel {overflow-x: auto !important; overflow-y: hidden !important; display: inline-flex; width: 100%; border: 1px solid #d9dde0; padding: 10px; height: 100px;}.jimu-widget-threatAnalysis .Col {float: left; height: 80px; width: 220px; border-left: none; border-right: 1px solid #ffffff; border-right: 1px solid rgba(255, 255, 255, 0.5); margin-left: 0; padding: 0 20px; overflow: hidden; text-overflow: ellipsis;}.jimu-rtl .jimu-widget-threatAnalysis .Col {float: right; border-left: 1px solid #ffffff; border-left: 1px solid rgba(255, 255, 255, 0.5); border-right: none;}.jimu-widget-threatAnalysis .ColSmall,.jimu-widget-threatAnalysis .ColSmallUnknown {float: left; height: 100%; width: calc(100% / 3); border-left: none; border-right: 1px solid #afaeae; margin-left: 0; overflow: hidden; text-overflow: ellipsis; text-align: center;}.jimu-widget-threatAnalysis .ColSmallUnknown {padding: 0;}.jimu-rtl .jimu-widget-threatAnalysis .ColSmall {float: right; border-left: 1px solid #ffffff; border-left: 1px solid rgba(255, 255, 255, 0.5); border-right: none;}.jimu-widget-threatAnalysis .ColLast {border-left: none; border-right: none;}.jimu-widget-threatAnalysis .Col .label,.jimu-widget-threatAnalysis .ColSmall .label {font-size: 13px; padding: 2px 0; overflow: hidden; text-overflow: ellipsis; width: 100%;}.jimu-widget-threatAnalysis .loading {background-image: url('images/loading.gif'); background-repeat: no-repeat; background-position: center 10px;}.jimu-widget-threatAnalysis .jimu-coordinate-control textarea {width: 100%; height: 30px; border: 1px solid #ccc; padding: 7px 0px 5px 14px;}.jimu-rtl .jimu-widget-threatAnalysis .jimu-coordinate-control textarea {padding: 7px 4px 4px 14px;}.jimu-widget-threatAnalysis .coordInput {width: calc(100% - 60px);}.jimu-rtl .jimu-widget-threatAnalysis .coordInput {width: calc(100% - 60px);}.jimu-widget-threatAnalysis .tabsContainer {border: 1px solid #838383;}.jimu-widget-threatAnalysis .jimu-tab3 .tab-item-td {border-bottom: 0px;}.jimu-widget-threatAnalysis .jimu-tab3 .tab-item-td.jimu-state-active {border: 1px solid #24B5CC; background-color: transparent !important;}.LaunchpadTheme .jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: none; width: 16px; height: 16px; top: -5px;}.LaunchpadTheme .jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: none;}.LaunchpadTheme .jimu-checkbox {display: inline-flex;}.jimu-widget-threatAnalysis .colorPickerEditor .dijitSelectLabel,.jimu-widget-threatAnalysis .esriCTThreatInputType .dijitSelectLabel {text-overflow: ellipsis; -ms-text-overflow: ellipsis; text-align: justify; overflow: hidden; width: 70px; padding: 5px 0px 0px 0px;}.jimu-widget-threatAnalysis .esriCTThreatInputType .dijitSelectLabel {width: 100px;}.jimu-widget-threatAnalysis .esriCTSelectLabelWidth .dijitSelectLabel {width: 150px;}.jimu-widget-threatAnalysis .colorPickerEditor .dijitReset.dijitInputField.dijitInputContainer {display: flex; align-items: center; justify-content: center;}.jimu-widget-threatAnalysis .esriCTWrapper,.jimu-widget-threatAnalysis-newZoneSettings .esriCTWrapper{width: 100%; overflow: hidden; padding: 5px;}.jimu-widget-threatAnalysis .esriCTLabel {width: 40%; float: left; line-height: 30px; word-break: break-word;}.jimu-rtl .jimu-widget-threatAnalysis .esriCTLabel {float: right;}.jimu-widget-threatAnalysis .esriCTDijitControl {width: 60%; float: right;}.jimu-rtl .jimu-widget-threatAnalysis .esriCTDijitControl {float: left;}.jimu-widget-threatAnalysis .esriCTDijitWrapper {width: 100%;}.jimu-widget-threatAnalysis .esriCTSettingContainer {margin: 10px 0px 10px 0px; height: 100%;}.jimu-widget-threatAnalysis .esriCTZonesTableMaxHeight .jimu-simple-table {max-height: calc(100% - 68px);}.jimu-widget-threatAnalysis .esriCTFullHeight {height: 100%;}.jimu-widget-threatAnalysis-newZoneSettings .esriCTPopupContainer {overflow: hidden; width: 100%; height: 100%;}.jimu-widget-threatAnalysis-newZoneSettings .esriCTSymbologyLabel {padding: 0px 10px 0px 0px; word-break: break-word; font-size: 14px; color: #596679; line-height: 30px;}.jimu-rtl .jimu-widget-threatAnalysis-defaultThreatTypePopup .esriCTDijitContent {padding-right: 0px;}.jimu-widget-threatAnalysis-newZoneSettings .esriCTLabel {width: 40%; padding: 0px 10px 0px 0px; word-break: break-word; float: left; font-size: 14px; color: #596679; line-height: 30px;}.jimu-rtl .jimu-widget-threatAnalysis-newZoneSettings .esriCTLabel {float: right;}.jimu-rtl .jimu-widget-threatAnalysis-newZoneSettings .esriCTDijitControlLabel {float: right; padding: 0px 0px 0px 5px;}.jimu-widget-threatAnalysis-newZoneSettings .esriCTDijitControl {width: 60%; float: right;}.jimu-rtl .jimu-widget-threatAnalysis-newZoneSettings .esriCTDijitControl {float: left;}.jimu-widget-threatAnalysis-newZoneSettings .esriCTDijitWrapper {width: 95%;}.jimu-widget-threatAnalysis .dijitSlider {width: calc(100% - 268px); margin-left: 5px; margin-right: auto; margin-top: 4px;}.jimu-rtl.jimu-widget-threatAnalysis-newZoneSettings .dijitSlider {margin-left: auto; margin-right: 10px;}.jimu-widget-threatAnalysis-newZoneSettings .dijitSlider .dijitSliderImageHandleH {top: -10px; width: 20px; height: 20px;}.jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor {padding-top: 5px; padding-bottom: 8px; width: 100%;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor {padding-top: 5px; padding-bottom: 8px; width: 100%; display: inline-flex;}}.jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px; margin-top: 26px;}}.jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 90px; height: 30px; margin: 0 5px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 66px; height: 30px; margin-top: 25px;}}.jimu-widget-threatAnalysis-newZoneSettings .dijitSliderImageHandleH {top: -7px;}.jimu-widget-threatAnalysis-newZoneSettings .dijitSliderThumbHover {background-image: url(\"../images/sliderball.svg\"); background-position: 0 0;}.jimu-widget-threatAnalysis-newZoneSettings .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: url(\"../images/sliderball.svg\"); background-position: 0 0;}.jimu-widget-threatAnalysis-newZoneSettings .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: url(\"../images/sliderball.svg\"); background-position: 0 0;}.jimu-widget-threatAnalysis-newZoneSettings .dijitSlider .dijitSliderProgressBarH,.jimu-widget-threatAnalysis-newZoneSettings .dijitSlider .dijitSliderLeftBumper {border-color: #000; background-color: #000; background-image: -webkit-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: -o-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px);}.jimu-widget-threatAnalysis-newZoneSettings .dijitSlider .dijitSliderRemainingBarH,.jimu-widget-threatAnalysis-newZoneSettings .dijitSlider .dijitSliderRightBumper {border-color: #d7d7d7; background-color: #d7d7d7;}.jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .trans {font-family: \"Avenir Light\"; font-size: 12px; padding: 0 5px 0 5px; letter-spacing: 0.33px;}.jimu-widget-threatAnalysis-newZoneSettings .sliderbar {width: 60px;}.jimu-widget-threatAnalysis-newZoneSettings .styleSelectSection {display: inline-grid; vertical-align: bottom; width: 38%}@supports (-ms-ime-align: auto) {.jimu-widget-threatAnalysis-newZoneSettings .styleSelectSection {display: -ms-inline-grid; vertical-align: bottom; height: 45px;} .jimu-widget-threatAnalysis-newZoneSettings .styleSelect {width: 145px !important; margin-top: 15px;}}.jimu-widget-threatAnalysis-newZoneSettings .styleSelect {width: 94%;}.jimu-widget-threatAnalysis .publishSelect .dijitSelectLabel {-ms-text-overflow: ellipsis; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; text-align: left; margin-top: 5px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis-newZoneSettings .styleSelectSection {display: inline-grid; vertical-align: bottom; margin: 8px 10px 0 10px;}}.dijitRuleLabelH {left: -12%;}.jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .dijitReset.dijitInputField.dijitInputContainer {display: flex; align-items: center; justify-content: center;}.jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .dijitSelectLabel {text-overflow: ellipsis;-ms-text-overflow: ellipsis;text-align: justify;overflow: hidden;width: 175px;padding: 5px 0px 0px 0px;}.jimu-widget-threatAnalysis .colorPickerEditor .dijitReset.dijitInputField.dijitInputContainer {display: flex; align-items: center; justify-content: center;}.jimu-widget-threatAnalysis-newZoneSettings .sliderWrapper {width: 225px; display: inline-block; margin: 5px;}.jimu-rtl .LaunchpadTheme .jimu-widget-threatAnalysis-newZoneSettings .dijitSliderBar.dijitSliderBumper.dijitSliderBumperH.dijitSliderRightBumper {margin-right: 0px;}.jimu-widget-threatAnalysis .esriCTHintCheck {font-size: 13px; color: rgb(160, 172, 191); font-style: oblique; line-height: 20px;}.jimu-widget-threatAnalysis-newZoneSettings .dijitSlider {width: 225px;}@media (max-width: 600px) {.jimu-widget-threatAnalysis-newZoneSettings .dijitSlider {width: 150px;} .jimu-widget-threatAnalysis-newZoneSettings .styleSelect {width: 100%;} .jimu-widget-threatAnalysis-newZoneSettings .esriCTDijitControl, .jimu-widget-threatAnalysis-newZoneSettings .esriCTLabel {width: 100%;} .jimu-widget-threatAnalysis-newZoneSettings .esriCTPopupNode {max-height: 350px;} .jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {margin-left: 0px;} .jimu-rtl .jimu-widget-threatAnalysis-newZoneSettings .jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {margin-right: 0px; margin-left: 5px;} .jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .dijitSelectLabel {width: 60px;} .jimu-widget-threatAnalysis .esriCTSelectLabelWidth .dijitSelectLabel {width: 100px;}}.LaunchpadTheme .jimu-widget-threatAnalysis-newZoneSettings .colorPickerEditor .dijitValidationTextBoxError .dijitValidationContainer {padding: 5px 5px 0px 0px; width: 10px;}.BoxTheme .jimu-widget-threatAnalysis .esriCTSelectLabelWidth .dijitSelectLabel {width: 128px;}",
"*now":function(H){H(['dojo/i18n!*preload*widgets/ThreatAnalysis/nls/Widget*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidget dojo/_base/lang dojo/_base/array dojo/dom-class dojo/dom-style dojo/dom-construct dojo/json dojo/on dojo/topic dojo/fx dojo/dom-attr dojo/query dojo/number dojo/_base/kernel dojo/text!./models/ThreatTypes.json dojo/text!./models/LpgThreatTypes.json dojo/keys dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/focus jimu/dijit/LoadingIndicator jimu/dijit/CoordinateControl jimu/LayerInfos/LayerInfos jimu/LayerStructure jimu/utils jimu/symbolUtils jimu/dijit/CheckBox esri/Color esri/dijit/util/busyIndicator esri/graphic esri/geometry/geometryEngine esri/geometry/Extent esri/geometry/webMercatorUtils esri/layers/FeatureLayer esri/layers/GraphicsLayer esri/symbols/PictureMarkerSymbol esri/renderers/SimpleRenderer esri/renderers/UniqueValueRenderer esri/symbols/jsonUtils esri/InfoTemplate ./js/ThreatAnalysisSettings ./js/portal-utils ./js/SelectFeaturesTool esri/tasks/GeometryService esri/SpatialReference dojo/Deferred dojo/promise/all ./utils jimu/dijit/SimpleTable dojo/string ./js/jquery.easy-autocomplete dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/NumberSpinner jimu/dijit/formSelect jimu/dijit/DrawBox".split(" "),function(H,
F,c,e,r,w,y,p,b,q,m,g,l,A,u,E,K,k,x,z,C,B,L,I,G,v,J,O,R,N,Q,W,aa,ia,ea,ja,oa,ra,a,f,n,d,P,U,T,ca,V,Z,ba,da,na){return H([F,x,z],{baseClass:"jimu-widget-threatAnalysis",_selectedThreat:null,_threatData:null,_lastOpenPanel:"threatMainPage",_currentOpenPanel:"threatMainPage",_threatSettingsInstance:null,_renderer:null,_layerList:null,_drawBox:null,_currentGeometry:[],_pointSymbol:null,_polylineSymbol:null,_polygonSymbol:null,_selectedUnitType:null,_addLayerToMap:!0,geometryService:null,threatsGraphicsLayersObj:{},
postMixInProperties:function(){this.inherited(arguments);c.mixin(this.nls,window.jimuNls.common,window.jimuNls.units);this.isRenderIdForAttrs=!0},constructor:function(h){H.safeMixin(this,h)},postCreate:function(){I.getInstance(this.map,this.map.itemInfo).then(c.hitch(this,function(t){this._jimuLayerInfos=t}));this.openAtStartAysn=!0;this.config.hasOwnProperty("threatAnalysis")&&(this.config=ba.transformOldConfigToNewConfigJson(this.config));q.subscribe("setBusyIndicator",c.hitch(this,function(t){t?
this.busyIndicator.show():this.busyIndicator.hide()}));q.subscribe("clear",c.hitch(this,function(){this._reset();this._moveMap();this._showOrHideLayerCountHint()}));q.subscribe("setLastFocusNode",c.hitch(this,function(t){t&&this._setFirstLastFocusNodes()}));String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(D,M){return"undefined"!==typeof t[M]?t[M]:D})});String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,
arguments)});this.inherited(arguments);var h=this.appConfig.geometryService;h||(h="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geometryService=new T(h);this._initGL();this.threatCoordinateControl=new L({parentWidget:this,label:this.nls.threatAnalysisCoordInputLabel,input:!0,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.threatAddPointToolTip,drawToolTip:this.nls.threatDrawPointToolTip,graphicsLayer:this._threatLocation,"aria-label":this.nls.threatAnalysisCoordInputLabel});
this.threatCoordinateControl.placeAt(this.threatAnalysisCoordContainer);this.threatCoordinateControl.startup();this._initThreatTypeTable();"DartTheme"===this.appConfig.theme.name&&r.add(this.threatCoordinateControl.domNode,"dartThemeClaroDijitTooltipContainerOverride");this._initDefaultSymbols();this._initLoading();this.publishNewLayer=new O({checked:!1,label:this.nls.publishToNewLayer},y.create("div",{},this.checkBoxParentContainer));this.config.hasOwnProperty("threats")?this._threatData=this.config.threats:
this._threatData=ba.getDefaultThreats(p.parse(E),p.parse(K));this.config.generalSettings&&this.config.generalSettings.unit&&"meters"===this.config.generalSettings.unit.toLowerCase()&&(this._threatData=this._convertDistanceMetersToFeet(this._threatData));this._sortZonesInAscOrder();this._initListeners();this._initGLForThreats();e.forEach(this._threatData,c.hitch(this,function(t){this._createRenderer(t)}));h=this._getAllMapLayers();this._initDrawBox();this.config.hasOwnProperty("generalSettings")&&
this.config.generalSettings.operationalLayer&&""!==this.config.generalSettings.operationalLayer.name?this._populateSelectList(this.featureLayerList,h,this.config.generalSettings.operationalLayer.name,!1):(this._populateSelectList(this.featureLayerList,h,"",!1),r.add(this.featureLayerList.domNode,"controlGroupHidden"),this.publishNewLayer.setValue(!0),r.remove(this.addTANameArea.domNode,"controlGroupHidden"));0===this.featureLayerList.options.length&&(this.publishNewLayer.setValue(!0),r.add(this.checkBoxParentContainer,
"controlGroupHidden"),r.add(this.hintNode,"controlGroupHidden"));this.inputTypeSelect.selectedIndex=0;document.createEvent("Event").initEvent("change",!1,!0);this.inputTypeSelect.onChange();this._initThreatTypeCtrl(this._threatData);this.addTANameArea.invalidMessage=this.nls.invalidLayerName;this.addTANameArea.missingMessage=this.nls.missingLayerNameMessage;this.config.hasOwnProperty("generalSettings")&&(this.config.generalSettings.unit&&"feet"!==this.config.generalSettings.unit?this.unitType.set("value",
this.config.generalSettings.unit):this.unitType.set("value","feet"),this._selectedUnitType=this.unitType.get("value"),this.config.generalSettings.layerToSelectFeatures&&""!==this.config.generalSettings.layerToSelectFeatures?this._populateSelectList(this.layerSelect,this._getLayers(),this.config.generalSettings.layerToSelectFeatures,!0):this._populateSelectList(this.layerSelect,this._getLayers(),"",!0),this.config.generalSettings.defaultInputType&&""!==this.config.generalSettings.defaultInputType?
this.inputTypeSelect.set("value",this.config.generalSettings.defaultInputType):this.inputTypeSelect.set("value","interactive"),this.config.generalSettings.defaultThreatType&&""!==this.config.generalSettings.defaultThreatType?this.threatType.set("value",this.config.generalSettings.defaultThreatType):this.threatType.set("value",""));setTimeout(c.hitch(this,function(){this._resetThreatZoneTableMaxHeight()}),500);this._setFirstLastFocusNodes()},startup:function(){this.busyIndicator=N.create({target:null!==
this.domNode.parentNode.parentNode?this.domNode.parentNode.parentNode:this.domNode.parentNode,backgroundOpacity:0});this._setTheme();var h=!!window.MSInputMethodContext&&!!document.documentMode,t=/Edge/.test(navigator.userAgent),D=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(h||t||D)&&setTimeout(c.hitch(this,function(){this._reset()},2E3));this._setFirstLastFocusNodes(!0)},resize:function(){var h=l(".dijitValidationTextBoxLabel",this.featureLayerList.domNode);0<h.length&&w.set(h[0],
"width",this.threatPublishButton.clientWidth-44+"px");this._resetThreatZoneTableMaxHeight()},_removeStyleFile:function(h,t){var D=null;D="js"===t?"src":"css"===t?"href":"none";t=document.getElementsByTagName("js"===t?"script":"css"===t?"link":"none");for(var M=t.length;0<=M;M--)t[M]&&null!==t[M].getAttribute(D)&&-1!==t[M].getAttribute(D).indexOf(h)&&t[M].parentNode.removeChild(t[M])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?v.loadStyleLink("darkOverrideCSS",this.folderUrl+"css/dartTheme.css",
null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===this.appConfig.theme.styles[0]?v.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css")},destroy:function(){this._threatLocation&&this.map.removeLayer(this._threatLocation);for(var h in this.threatsGraphicsLayersObj)this.threatsGraphicsLayersObj.hasOwnProperty(h)&&this.map.removeLayer(this.threatsGraphicsLayersObj[h]);
this.threatsGraphicsLayersObj={};this.drawBox&&this.drawBox.clear();this.inherited(arguments)},_initGL:function(){this._ptSym=new oa(this.folderUrl+"images/CoordinateLocation.png",26,26);this._ptSym.setOffset(0,13);var h=new ra(this._ptSym);this._threatLocation=new ja;this._threatLocation.spatialReference=this.map.spatialReference;this._threatLocation.setRenderer(h);this._threatLocation.name="Threat Location";this.map.addLayer(this._threatLocation)},_initThreatTypeCtrl:function(h){this.threatType.options=
[];this.threatType.addOption({value:"",label:this.nls.selectLabel,selected:!0});e.forEach(h,c.hitch(this,function(t){this.threatType.addOption({value:t.threatName,label:v.sanitizeHTML(this._getThreatTypeNls(t.threatName)),selected:!1})}))},_initLoading:function(){this.loading=new B({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},_initListeners:function(){this.config.hasOwnProperty("threatAnalysis")&&!this.config.threatAnalysis.lockSettings||!this.config.hasOwnProperty("threatAnalysis")?
(this.own(b(this.threatAnalysisSettingsButton,"click",c.hitch(this,function(){this._createSettings();this._showPanel("threatSettingsPage");this._setFirstLastFocusNodes()}))),this.own(b(this._jimuLayerInfos,"layerInfosChanged",c.hitch(this,this._onLayerInfosChange))),this.own(b(this.threatAnalysisSettingsButton,"keydown",c.hitch(this,function(h){if(h.keyCode===k.ENTER||h.keyCode===k.SPACE)this._createSettings(),this._showPanel("threatSettingsPage"),this._setFirstLastFocusNodes()})))):this.threatAnalysisSettingsButton.title=
this.nls.lockSettings;this.own(b(this.threatCreateButton,"click",c.hitch(this,this._threatCreateButtonClicked)));this.own(b(this.threatCreateButton,"keydown",c.hitch(this,function(h){if(h.keyCode===k.ENTER||h.keyCode===k.SPACE)this._threatCreateButtonClicked(),this._setFirstLastFocusNodes()})));this.own(b(this.threatClearButton,"click",c.hitch(this,function(){this.threatType.set("value","");this._threatZonesTable.clear();this._selectedThreat=null;this.map.infoWindow.isShowing&&this.map.infoWindow.hide();
this._reset();this._setFirstLastFocusNodes()})));this.own(b(this.threatClearButton,"keydown",c.hitch(this,function(h){if(h.keyCode===k.ENTER||h.keyCode===k.SPACE)this.threatType.set("value",""),this._threatZonesTable.clear(),this._selectedThreat=null,this.map.infoWindow.isShowing&&this.map.infoWindow.hide(),this._reset(),this._setFirstLastFocusNodes()})));this.own(b(this.threatCoordinateControl.dt,"DrawComplete",c.hitch(this,function(){this.threatCoordinateControl.deactivateDrawTool();this.threatCoordinateControl.currentClickPointDD&&
(this._currentGeometry=[],this._currentGeometry.push(this.threatCoordinateControl.currentClickPointDD),null!==this._selectedThreat&&this._toggleCreateZoneButton(!0));C.focus(this.threatType.domNode)})));this.own(b(this.threatCoordinateControl,"coordinates-deleted",c.hitch(this,function(){0===this.threatCoordinateControl.coordtext.value&&this._reset()})));this.own(b(this.threatCoordinateControl,"get-coordinate-complete",c.hitch(this,function(){setTimeout(c.hitch(this,function(){this.threatCoordinateControl.currentClickPointDD&&
(this._currentGeometry=[],this._currentGeometry.push(this.threatCoordinateControl.currentClickPointDD),null!==this._selectedThreat&&this._toggleCreateZoneButton(!0))}),1E3)})));this.own(b(this.threatSettingsPanelBackButton,"click",c.hitch(this,function(){this._threatSettingsInstance.destroy();this._threatSettingsInstance=null;this._showPanel(this._lastOpenPanel)})));this.own(b(this.threatSettingsPanelBackButton,"keydown",c.hitch(this,function(h){if(h.keyCode===k.ENTER||h.keyCode===k.SPACE)this._threatSettingsInstance.destroy(),
this._threatSettingsInstance=null,this._showPanel(this._lastOpenPanel),setTimeout(c.hitch(this,function(){this._setFirstLastFocusNodes()}),0)})));this.own(b(this.threatResultsPanelBackButton,"click",c.hitch(this,function(){this.publishMessage.innerHTML="";this.addTANameArea.setValue("");this.addTANameArea.reset();this._threatLocation.show();this._showPanel(this._lastOpenPanel)})));this.own(b(this.threatResultsPanelBackButton,"keydown",c.hitch(this,function(h){if(h.keyCode===k.ENTER||h.keyCode===k.SPACE)this.publishMessage.innerHTML=
"",this.addTANameArea.setValue(""),this.addTANameArea.reset(),this._threatLocation.show(),this._showPanel(this._lastOpenPanel),setTimeout(c.hitch(this,function(){this._setFirstLastFocusNodes()}),0)})));this.own(b(this.threatPublishButton,"click",c.hitch(this,function(){this._threatPublishButtonClicked()})));this.own(b(this.threatPublishButton,"keydown",c.hitch(this,function(h){h.keyCode!==k.ENTER&&h.keyCode!==k.SPACE||this._threatPublishButtonClicked()})));this.own(b(this.drawBox,"DrawEnd",c.hitch(this,
this._onDrawEnd)));this.selectFeaturesTool=new U({drawBoxOption:{map:this.map,geoTypes:["EXTENT","POLYGON"],showClear:!1},nls:this.nls});this.own(b(this.selectFeaturesTool,"selection-complete",c.hitch(this,function(h){this._currentGeometry=[];h.geometry&&0<h.geometry.length&&e.forEach(h.geometry,c.hitch(this,function(t){this._currentGeometry.push(t)}));this._toggleCreateZoneButton(this._selectedThreat&&0<this._currentGeometry.length);C.focus(this.threatType.domNode)})));this.selectFeaturesTool.placeAt(this.drawingSection);
this.own(b(this.inputTypeSelect,"change",c.hitch(this,this._onInputTypeSelectionChanged)));this.own(b(this.threatType,"change",c.hitch(this,this._onThreatTypeSelectionChanged)));this.own(b(this.unitType,"change",c.hitch(this,this._onUnitTypeSelectionChanged)));this.own(b(this.layerSelect,"change",c.hitch(this,this._onLayerSelectionChanged)));this.own(b(this.publishNewLayer,"click",c.hitch(this,this._onCheckboxClicked)));this.own(b(this.publishNewLayer,"change",c.hitch(this,this._onCheckboxClicked)));
this.own(b(this.publishNewLayer,"keydown",c.hitch(this,function(h){h.keyCode!==k.ENTER&&h.keyCode!==k.SPACE||this._onCheckboxClicked()})));this.own(b(this.featureLayerList,"change",c.hitch(this,function(){this.resize()})))},_threatPublishButtonClicked:function(){if(this.publishNewLayer.checked&&!this.addTANameArea.isValid())this.publishMessage.innerHTML=this.nls.missingLayerNameMessage;else{this.publishMessage.innerHTML="";var h={layerName:this.publishNewLayer.checked?this.addTANameArea.value:this.featureLayerList.getValue(),
url:"",itemId:"",serviceItemId:"",map:this.map,appConfig:this.appConfig,publishMessage:this.publishMessage,nls:this.nls,layers:this._getLayersWithGraphics()};if(!this.publishNewLayer.checked){var t=this._layerList.filter(function(D){return D.name===h.layerName},this);1===t.length&&(h.url=t[0].url,h.itemId=t[0].id,h.serviceItemId=p.parse(t[0]._json).serviceItemId)}P._layerList=this._layerList;P.saveToPortal(h)}},_getLayersWithGraphics:function(){var h=[],t;for(t in this.threatsGraphicsLayersObj)this.threatsGraphicsLayersObj.hasOwnProperty(t)&&
0<this.threatsGraphicsLayersObj[t].graphics.length&&h.push(this.threatsGraphicsLayersObj[t]);return h},_onCheckboxClicked:function(){this.publishNewLayer.checked?(r.add(this.featureLayerList.domNode,"controlGroupHidden"),r.remove(this.addTANameArea.domNode,"controlGroupHidden"),this.addTANameArea.reset(),this.addTANameArea.focus(),this._showOrHideLayerCountHint()):(r.add(this.addTANameArea.domNode,"controlGroupHidden"),r.remove(this.featureLayerList.domNode,"controlGroupHidden"),r.add(this.hintNode,
"controlGroupHidden"));this._addLayerToMap=this.publishNewLayer.checked},_onInputTypeSelectionChanged:function(){var h=this.inputTypeSelect.get("value");"interactive"===h&&(m.wipeIn({node:this.interActiveDiv}).play(),this.coordInputDiv.style.display=this.existingFeatureDiv.style.display="none");"manual_location"===h&&(m.wipeIn({node:this.coordInputDiv}).play(),this.interActiveDiv.style.display=this.existingFeatureDiv.style.display="none");"existing_features"===h&&(m.wipeIn({node:this.existingFeatureDiv}).play(),
this.coordInputDiv.style.display=this.interActiveDiv.style.display="none");setTimeout(c.hitch(this,function(){this._resetThreatZoneTableMaxHeight()}),500)},_onLayerSelectionChanged:function(){this.selectFeaturesTool.setLayerInfo(this._getSelectedLayerInfo());this.resize()},_onThreatTypeSelectionChanged:function(){var h=this.threatType.get("value");this._threatZonesTable.clear();if(""!==h){if(this.threatsGraphicsLayersObj.hasOwnProperty(h)){this._populateThreatZoneTableRows(h);this._selectedThreat=
this._getSelectedThreatInfo(h);var t=this.threatsGraphicsLayersObj[h];this.map.addLayer(t);var D;if(t.loaded)(D=I.getInstanceSync().getLayerInfoById(t.id))&&D.enablePopup();else t.on("load",c.hitch(this,function(){(D=I.getInstanceSync().getLayerInfoById(t.id))&&D.enablePopup()}));this._createRenderer(this._selectedThreat);t.refresh();0<this._currentGeometry.length&&this._toggleCreateZoneButton(!0)}}else this._toggleCreateZoneButton(!1),this._selectedThreat=null},_onUnitTypeSelectionChanged:function(){this._selectedUnitType=
this.unitType.get("value");null!==this._selectedThreat&&this._updateThreatZoneTable(this._selectedUnitType)},_getNodeByName:function(h){switch(h){case "threatMainPage":var t=this.threatMainPageNode;break;case "threatSettingsPage":t=this.threatSettingsPageNode;break;case "threatResultsPage":t=this.threatResultsPageNode}return t},_reset:function(){this._clearLayers();this.map.enableMapNavigation()},_clearLayers:function(){this._toggleCreateZoneButton(!1);this._threatLocation.clear();this.threatCoordinateControl.clear();
this.selectFeaturesTool.reset();this._currentGeometry=[];this._selectedThreat=null;this.drawBox.clear();this.threatType.set("value","");this._threatZonesTable.clear();for(var h in this.threatsGraphicsLayersObj)this.threatsGraphicsLayersObj.hasOwnProperty(h)&&(this.threatsGraphicsLayersObj[h].clear(),this.threatsGraphicsLayersObj[h].refresh())},_createSettings:function(){this._threatSettingsInstance=new d({nls:this.nls,config:this.config,appConfig:this.appConfig,refDomNode:this.domNode,threatData:this._threatData,
selectedUnitType:this._selectedUnitType},y.create("div",{},this.threatSettingsNode));this.own(this._threatSettingsInstance.on("ThreatSettingsChanged",c.hitch(this,function(h){this._createRenderer(h)})));this._threatSettingsInstance.startup()},_createRenderer:function(h){var t=[],D;e.forEach(h.zones,c.hitch(this,function(S){var X=new R(S.symbol.fillColor.color),fa=255*(1-S.symbol.fillColor.transparency),ka=new R(S.symbol.outlineColor.color),qa=255*(1-S.symbol.outlineColor.transparency);D={value:this._getZoneNameNls(S.name),
symbol:{color:[X.r,X.g,X.b,fa],outline:{color:[ka.r,ka.g,ka.b,qa],width:1,type:"esriSLS",style:S.symbol.outlineColor.type},type:"esriSFS",style:S.symbol.fillColor.type}};t.push(D)}));var M=new a({type:"uniqueValue",field1:"zone_type",uniqueValueInfos:t});this.threatsGraphicsLayersObj.hasOwnProperty(h.threatName)&&(h=this.threatsGraphicsLayersObj[h.threatName],h.setRenderer(M),h.refresh())},_showPanel:function(h){if(this._currentOpenPanel){var t=this._getNodeByName(this._currentOpenPanel);r.add(t,
"Hidden")}t=this._getNodeByName(h);r.remove(t,"Hidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=h;this._setFirstLastFocusNodes()},_threatCreateButtonClicked:function(){var h=[],t=[];r.contains(this.threatCreateButton,"jimu-state-disabled")||(this.loading.show(),e.forEach(this._currentGeometry,c.hitch(this,function(D){h.push(this.getProjectedGeometry(D,new ca(102100)))})),Z(h).then(c.hitch(this,function(D){e.forEach(D,c.hitch(this,function(M){t.push(this._createThreatAreas(M,
this._selectedThreat,this._selectedUnitType))}));Z(t).then(c.hitch(this,function(){this._showPanel("threatResultsPage");this._showOrHideLayerCountHint();this.isOnScreen&&this.resize();this.selectFeaturesTool.reset();this.loading.hide()}))})))},getProjectedGeometry:function(h,t){var D=new V;if(ia.canProject(h,t)){var M=ia.project(h,t);D.resolve(M)}else this.geometryService.project([h],t,function(S){M=S[0];D.resolve(M)},function(){D.resolve(null)});return D.promise},_createThreatAreas:function(h,t,
D){var M,S=new V;if(h&&t){var X=[],fa=null,ka,qa="feet"===D.toLowerCase()?this.nls.feetLabel:this.nls.metersLabel,ta=h.spatialReference.isWebMercator()?h:ia.geographicToWebMercator(h),ua="feet"===D.toLowerCase()?9002:9001;e.forEach(this._selectedThreat.zones,c.hitch(this,function(ha,pa){var la="feet"===D.toLowerCase()?this._formatNumber(ha.distance):this._convertToMeters(ha.distance,!0);la=A.parse(la,{places:2});var Y=W.geodesicBuffer(ta,la,ua);1===X.length&&(Y=(ka=W.difference(Y,X[pa-1].geometry))?
ka:Y);1<X.length&&(M=W.union(e.map(X,function(ma){return ma.geometry})),Y=(ka=W.difference(Y,M))?ka:Y);Y=new Q(Y);Y.setAttributes({zone_type:this._getZoneNameNls(ha.name),distance:la,threat_type:this._getThreatTypeNls(t.threatName),units:qa});fa=new n;fa.setTitle(this.nls._widgetLabel);fa.setContent("\x3cb\x3e"+this.nls.threatType+":\x3c/b\x3e ${threat_type}\x3cbr /\x3e\x3cb\x3e"+ha.name+":\x3c/b\x3e ${distance:NumberFormat(places:2)} "+qa+"\x3cbr /\x3e");X.push(Y)}));var sa=[];this.loading.show();
e.forEach(X,c.hitch(this,function(ha){sa.push(this.getProjectedGeometry(ha.geometry,this.map.spatialReference))}));Z(sa).then(c.hitch(this,function(ha){var pa=[];e.forEach(X,c.hitch(this,function(Y,ma){ha[ma]&&(ma=new Q(ha[ma]),ma.setInfoTemplate(Y.infoTemplate),ma.setAttributes(Y.attributes),pa.push(ma))}));if(pa&&0<pa.length&&this.threatsGraphicsLayersObj.hasOwnProperty(this._selectedThreat.threatName)){var la=this.threatsGraphicsLayersObj[this._selectedThreat.threatName];la.applyEdits(pa,null,
null,c.hitch(this,function(){this.map.setExtent(la.graphics[la.graphics.length-1].geometry.getExtent().expand(2));S.resolve(null)}),function(){S.resolve(null)})}}))}return S.promise},_getAllMapLayers:function(){var h=[];G.getInstance().traversal(c.hitch(this,function(t){"undefined"!==typeof t._layerInfo.layerObject.type&&-1===t._layerInfo.layerObject.type.indexOf("tile")&&"FeatureCollection"!==t._layerInfo.layerObject.type&&"esriGeometryPolygon"===t._layerInfo.layerObject.geometryType&&h.push(t._layerInfo.layerObject)}));
return h},_initDrawBox:function(){this.drawBox.setMap(this.map);var h=J.getGreyPinMarkerSymbol();this.drawBox.setPointSymbol(h)},_onDrawEnd:function(h,t){this.drawBox.clear();this._currentGeometry=[];this._currentGeometry.push(h.geometry);var D=null;D="POINT"===t?this._pointSymbol:"POLYLINE"===t?this._polylineSymbol:this._polygonSymbol;"EXTENT"!==t&&(this._threatLocation.clear(),this._threatLocation.add(new Q(h.geometry,D,null,null)));this._selectedThreat&&0<this._currentGeometry.length&&this._toggleCreateZoneButton(!0);
C.focus(this.threatType.domNode)},_toggleCreateZoneButton:function(h){h?(r.remove(this.threatCreateButton,"jimu-state-disabled"),g.set(this.threatCreateButton,"tabindex",0)):(r.add(this.threatCreateButton,"jimu-state-disabled"),g.set(this.threatCreateButton,"tabindex",-1))},_updateThreatZoneTable:function(h){var t={},D=this._threatZonesTable.getRows();e.forEach(D,c.hitch(this,function(M){t.distance="meters"===h.toLowerCase()?this._convertToMeters(M.distance,!0):this._convertToFeet(M.distance,!0);
M.distance="meters"===h.toLowerCase()?this._convertToMeters(M.distance,!1):this._convertToFeet(M.distance,!1);this._threatZonesTable.editRow(M,t)}))},_convertToMeters:function(h,t){return t?this._formatNumber(h/3.280839895):h/3.280839895},_convertToFeet:function(h,t){return t?this._formatNumber(3.280839895*h):3.280839895*h},_formatNumber:function(h){return A.format(h,{places:2,locale:u.locale})},_containsSupportedCapabilities:function(h){var t=!0;["create","delete","query","update","editing"].forEach(function(D){-1===
h.toLowerCase().split(",").indexOf(D)&&(t=!1)});return t},_populateSelectList:function(h,t,D,M){M&&(h.options=[]);e.forEach(t,c.hitch(this,function(S){if(M){var X=this._jimuLayerInfos.getLayerInfoById(S.id),fa="";X&&(fa=X.title?X.title:X.name);"Feature Layer"===S.type&&h.addOption({value:fa,label:v.sanitizeHTML(S.name)?v.sanitizeHTML(S.name):fa,selected:!1})}else S.url&&"Feature Layer"===S.type&&this._containsSupportedCapabilities(S.capabilities)&&h.addOption({value:S.name,label:v.sanitizeHTML(S.name),
selected:!1})}));""!==D&&h.set("displayedValue",D);M&&0<h.options.length&&this.selectFeaturesTool&&this.selectFeaturesTool.setLayerInfo(this._getSelectedLayerInfo())},_initDefaultSymbols:function(){var h={style:"esriSMSCircle",color:[0,0,128,128],name:"Circle",outline:{color:[0,0,128,255],width:1},type:"esriSMS",size:18},t={style:"esriSLSSolid",color:[79,129,189,255],width:3,name:"Blue 1",type:"esriSLS"},D={style:"esriSFSSolid",color:[79,129,189,128],type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,
93,141,255],width:1.5,type:"esriSLS"}};this._pointSymbol||(this._pointSymbol=f.fromJson(h));this._polylineSymbol||(this._polylineSymbol=f.fromJson(t));this._polygonSymbol||(this._polygonSymbol=f.fromJson(D))},_moveMap:function(){var h=this.map.spatialReference,t=new aa;t.xmin=this.map.extent.xmin+1E-4;t.ymin=this.map.extent.ymin;t.xmax=this.map.extent.xmax;t.ymax=this.map.extent.ymax;t.spatialReference=h;this.map.setExtent(t)},_setFirstLastFocusNodes:function(h){if("threatResultsPage"===this._currentOpenPanel){v.initFirstFocusNode(this.domNode,
this.threatResultsPanelBackButton);v.initLastFocusNode(this.domNode,this.threatPublishButton);var t=l("a",this.publishMessage)[0];""!==this.publishMessage.innerHTML&&t?(v.initLastFocusNode(this.domNode,this.publishMessage),C.focus(t)):""===this.publishMessage.innerHTML&&C.focus(this.threatResultsPanelBackButton)}"threatSettingsPage"===this._currentOpenPanel&&(v.initFirstFocusNode(this.domNode,this.threatSettingsPanelBackButton),C.focus(this.threatSettingsPanelBackButton),setTimeout(c.hitch(this,function(){this._threatSettingsInstance._setLastFocusNode()}),
100));"threatMainPage"===this._currentOpenPanel&&(v.initFirstFocusNode(this.domNode,this.threatAnalysisTitleUrl),v.initLastFocusNode(this.domNode,this.threatClearButton),h?v.isAutoFocusFirstNodeWidget(this)&&C.focus(this.threatAnalysisTitleUrl):C.focus(this.threatAnalysisTitleUrl))},_convertDistanceMetersToFeet:function(h){var t=[];e.forEach(h,c.hitch(this,function(D){e.forEach(D.zones,c.hitch(this,function(M){M.distance=this._convertToFeet(M.distance,!1)}));t.push(D)}));return t},_onLayerInfosChange:function(h,
t){this._layerList="";this._layerList=this._getLayers();var D=this.layerSelect.value;"removed"===t&&(h=h.title?h.title:h.name,h===this.layerSelect.value&&(D=""));this._populateSelectList(this.layerSelect,this._layerList,D,!0)},_getLayers:function(){var h=[],t;for(t in this.map._layers)if(this.map._layers.hasOwnProperty(t)){var D=this.map._layers[t];D.hasOwnProperty("type")&&"Feature Layer"===D.type&&h.push(D)}return 0<h.length?h.reverse():h},_getSelectedLayerInfo:function(){var h,t=this.layerSelect.get("value");
e.forEach(this._layerList,c.hitch(this,function(D){var M=this._jimuLayerInfos.getLayerInfoById(D.id);t===(M.title?M.title:D.name)&&(h=D)}));return h},_initThreatTypeTable:function(){this._threatZonesTable=new da({fields:[{name:"zoneDescription",title:this.nls.zoneDescriptionColLabel,type:"text",width:"65%"},{name:"distance",title:this.nls.distanceColLabel,type:"text",width:"35%"}],selectable:!1});this._threatZonesTable.placeAt(this.threatZoneTableNode);this._threatZonesTable.startup()},_addRowToZoneTable:function(h){var t=
h.distance;var D={zoneDescription:this._getZoneNameNls(h.name),distance:"meters"===this._selectedUnitType.toLowerCase()?this._convertToMeters(t,!0):this._formatNumber(h.distance)};D=this._threatZonesTable.addRow(D);D.success&&D.tr&&(D=D.tr,D.zoneDescription=h.name,D.distance="meters"===this._selectedUnitType.toLowerCase()?this._convertToMeters(t,!1):h.distance)},_populateThreatZoneTableRows:function(h){e.some(this._threatData,c.hitch(this,function(t){h===t.threatName&&e.forEach(t.zones,c.hitch(this,
function(D){this._addRowToZoneTable(D)}))}))},_getSelectedThreatInfo:function(h){var t={};e.some(this._threatData,c.hitch(this,function(D){h===D.threatName&&(t.threatName=D.threatName,t.zones=D.zones)}));return t},_resetThreatZoneTableMaxHeight:function(){var h=l(".esriCTThreatMainPageNode",this.mainNode);if(h&&0<h.length){h=h[0];var t=w.getComputedStyle(h).height;t=parseFloat(t)}h=l(".esriCTContainerNode",this.threatMainPageNode);var D=40;h&&0<h.length&&e.forEach(h,c.hitch(this,function(M){"none"!==
M.style.display&&(M=w.getComputedStyle(M).height,M=parseFloat(M),D+=M)}));t-=D;h=l(".jimu-simple-table",this.threatZoneTableNode);0<h.length&&(97>t&&(t=97),w.set(h[0],"maxHeight",t+"px"))},_initGLForThreats:function(){e.forEach(this._threatData,c.hitch(this,function(h,t){var D={layerDefinition:{name:this._getThreatTypeNls(h.threatName),geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"threat_type",alias:this.nls.threatType,
type:"esriFieldTypeString"},{name:"zone_type",alias:this.nls.zoneTypeLabel,type:"esriFieldTypeString"},{name:"distance",alias:this.nls.distanceColLabel,type:"esriFieldTypeDouble"},{name:"units",alias:this.nls.unitsLabel,type:"esriFieldTypeString"}],extent:this.map.extent}};t=new ea(D,{id:this.nls.threatGraphicLayer+"_"+this.id+"_"+t,outFields:["*"]});this.threatsGraphicsLayersObj[h.threatName]=t}))},_sortZones:function(h){return h.sort(function(t,D){return t.distance-D.distance})},_sortZonesInAscOrder:function(){e.forEach(this._threatData,
c.hitch(this,function(h,t){this._threatData[t].zones=this._sortZones(h.zones)}))},_showOrHideLayerCountHint:function(){0<this._getLayersWithGraphics().length&&this.publishNewLayer.checked?(this.hintNode.innerHTML=na.substitute(this.nls.layerCountHint,{layerCount:this._getLayersWithGraphics().length}),r.remove(this.hintNode,"controlGroupHidden")):r.add(this.hintNode,"controlGroupHidden")},_getZoneNameNls:function(h){var t={"Mandatory Evacuation Distance":"mandatoryLabel","Safe Evacuation Distance":"safeLabel",
"Fireball Diameter":"fireBallDiameterLable","Safe Distance":"lpgSafeDistanceLable"};h=void 0!==t[h]?this.nls[t[h]]:h;return h},_getThreatTypeNls:function(h){var t={"Pipe Bomb":"pipeBombLabel","Suicide Bomb":"suicideBombLabel",Briefcase:"briefcaseLabel",Car:"carLabel","SUV/VAN":"suvVanLabel","Small Delivery Truck":"smallDeliveryTruckLabel","Container/Water Truck":"containerWaterTruckLabel","Semi-Trailer":"semiTrailerLabel","Small LPG Tank":"smallLPGTank","Large LPG Tank":"largeLPGTank","Commercial/Residential LPG Tank":"commercialResidentialLPGTank",
"Small LPG Truck":"smallLPGTruck","Semi-Tanker LPG":"semiTankerLPG"};h=void 0!==t[h]?this.nls[t[h]]:h;return h}})});
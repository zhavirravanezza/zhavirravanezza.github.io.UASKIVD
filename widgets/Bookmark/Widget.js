// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
/*
 Sortable 1.8.4 - MIT | git://github.com/SortableJS/Sortable.git */
require({cache:{"widgets/Bookmark/HeadBar":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on ./a11y/HeadBar dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./HeadBar.html".split(" "),function(y,A,p,g,B,v,H,T,E,f){y=A([H,T,E,y],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer",templateString:f,nls:null,map:null,bookmarksContainer:null,layout:null,editingName:!1,initMapState:null,postMixInProperties:function(){this.nls=
p.mixin(this.nls,window.jimuNls.common)},startup:function(){this.inherited(arguments);this.refreshUI();this.a11y_initEvents();this.own(B(this.filterInput,"blur",p.hitch(this,this.onFilterChange)));this.own(B(this.filterInput,"keyUp",p.hitch(this,this.onFilterChange)))},refreshUI:function(){this.editable?(g.addClass(this.domNode,"editable"),g.removeClass(this.addBtn,"hide")):(g.removeClass(this.domNode,"editable"),g.addClass(this.addBtn,"hide"));this._toggleLayoutBtnDisplay(this.layout.defaultMode);
!1!==this.editable||!0===this.layout.list&&!0===this.layout.cards?g.removeClass(this.domNode,"hide"):g.addClass(this.domNode,"hide")},_toggleLayoutBtnDisplay:function(u){g.addClass(this.listBtn,"hide");g.addClass(this.cardsBtn,"hide");"list"===u?this.listMode():this.cardsMode();!0===this.layout.list&&!0===this.layout.cards?("list"===u?g.removeClass(this.cardsBtn,"hide"):g.removeClass(this.listBtn,"hide"),g.addClass(this.displayMode,"two-modes")):g.removeClass(this.displayMode,"two-modes")},cardsMode:function(){g.removeClass(this.bookmarksContainer,
"list");g.addClass(this.bookmarksContainer,"cards");g.addClass(this.domNode,"list");g.removeClass(this.domNode,"cards");this.emit("layout-cards")},listMode:function(){g.removeClass(this.bookmarksContainer,"cards");g.addClass(this.bookmarksContainer,"list");g.addClass(this.domNode,"cards");g.removeClass(this.domNode,"list");this.emit("layout-list")},addingBookmark:function(){this.emit("add")},onFilterChange:function(){var u=this.filterInput.getValue();this.emit("filter-change",u)},onFilterBlur:function(){var u=
this.filterInput.getValue();this.emit("filter-blur",u)}});y.extend(v);return y})},"widgets/Bookmark/a11y/HeadBar":function(){define(["dojo/_base/lang","dojo/on","dijit/a11yclick"],function(y,A,p){return{a11y_initEvents:function(){this.own(A(this.addBtn,p,y.hitch(this,function(){this.addingBookmark()})));this.own(A(this.cardsBtn,p,y.hitch(this,function(g){this._toggleLayoutBtnDisplay("cards");this._isKeyEvent(g)&&this.listBtn&&this.listBtn.focus()})));this.own(A(this.listBtn,p,y.hitch(this,function(g){this._toggleLayoutBtnDisplay("list");
this._isKeyEvent(g)&&this.cardsBtn&&this.cardsBtn.focus()})))},_isKeyEvent:function(g){return g&&g._origType?!0:!1}}})},"widgets/Bookmark/WebmapBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils libs/Sortable".split(" "),function(y,A,p,g,B,v,H,T,E,f,u){return A([T,E,y],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",
nls:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=g.create("div",{"class":"drawer-handle"},this.domNode);this.bookMarkerContainer=g.create("div",{"class":"webmap"},this.domNode)},startup:function(){this.inherited(arguments);this.config.syncMode&&(!1===this.config.syncMode.webmap&&!1===this.config.syncMode.custom?g.addClass(this.domNode,"hide"):g.removeClass(this.domNode,"hide"));this.sortableBookMarkerNodes=u.create(this.bookMarkerContainer,{sort:!1,disabled:!0,animation:100})},
refresh:function(){f.empty(this.bookmarks);this.bookmarks=[];this.config.syncMode&&!0===this.config.syncMode.webmap&&(this.bookmarks=f.readBookmarksInWebmap(this.map));var h=p.clone(this.config.bookmarks2D);B.forEach(h,function(r){r&&!0===this.config.syncMode.custom&&this.bookmarks.push(r)},this);f.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks)},_onBookmarkClick:function(h){require(["esri/geometry/Extent"],p.hitch(this,function(r){if(!1!==h.isSaveExtent){var e=h.extent;e.spatialReference?
new H(e.spatialReference):new H({wkid:4326});this.map.setExtent(new r(e))}f.layerInfosRestoreState(h.isSaveLayers,h.layerOptions)}))},filter:function(h){f.filter(h,this.bookmarks)},displayBookmarks:function(h){f.empty(h,this.bookMarkerContainer);B.forEach(h,function(r){if(r){var e={editBtn:!1,changeImgBtn:!0,layerInfosIcon:f.isWithLayerInfos(r)};e=f.createBookMarkNode(r,this.nls,this.folderUrl,e,{editBtn:!1,deleteBtn:!1,renameBtn:!1,changeImgBtn:!1});r.itemNode=e;this.own(v(e,"thumbnail-click",p.hitch(this,
p.partial(this._onBookmarkClick,r))))}},this);h.forEach(p.hitch(this,function(r){r&&r.itemNode&&r.itemNode.domNode&&g.place(r.itemNode.domNode,this.bookMarkerContainer,"last")}))}})})},"widgets/Bookmark/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/html dojox/html/entities jimu/utils ./ItemNode libs/storejs/store jimu/LayerInfos/LayerInfos".split(" "),function(y,A,p,g,B,v,H,T){var E={_uID:0,getUID:function(){return E._uID++},findBookMark:function(f,u){var h=-1,r=null;A.some(u,
function(e,d){if(parseInt(e._uID,10)===parseInt(f._uID,10))return h=d,r=e,!0},this);return-1!==h?{bookmark:r,idx:h}:null},findBookMarkByUID:function(f,u){var h=-1,r=null;A.some(u,function(e,d){if(parseInt(e._uID,10)===parseInt(f,10))return h=d,r=e,!0},this);return-1!==h?{bookmark:r,idx:h}:null},findNextBookMarkByIdx:function(f,u){var h=null;f+1<=u.length-1&&(h=u[f+1]);return h},findBookMarkByNameAndExtent:function(f,u){var h=-1,r=null;A.some(u,function(e,d){if(e.name===f.name&&e.extent&&f.extent&&
e.extent.xmax===f.extent.xmax&&e.extent.xmin===f.extent.xmin&&e.extent.ymax===f.extent.ymax&&e.extent.ymin===f.extent.ymin)return h=d,r=e,!0},this);return-1!==h?{bookmark:r,idx:h}:null},isBookmarksDataEmpty:function(f){return Array.isArray(f)&&0===f.length?!0:!1},empty:function(f,u){var h=f;A.forEach(f,function(r){r&&r.itemNode&&r.itemNode.destroy()},this);f=[];f=h;u&&p.empty(u)},createBookMarkNode:function(f,u,h,r,e){if(f.thumbnail||"undefined"!==typeof f.thumbnail&&""!==f.thumbnail){var d=f.thumbnail;
f.thumbnail&&f.thumbnail.url&&(d=f.thumbnail.url);h=B.processUrlInWidgetConfig(d,h)}else h=B.processUrlInWidgetConfig("images/thumbnail_default.png",h);d=E.getUID();f._uID=d;return new v({dataId:d,img:h,label:f.displayName||f.name,display:r,nls:u,a11y:e})},cloneBookmarksDataWithOutDom:function(f){var u=[];if("undefined"===typeof f)return u;f.forEach(y.hitch(this,function(h){h.itemNode&&h.itemNode.domNode&&(h=y.clone(h),delete h.itemNode,u.push(h))}));return u},readBookmarksInWebmap:function(f){var u=
[];if(!f.itemInfo||!f.itemInfo.itemData||!f.itemInfo.itemData.bookmarks)return u;A.forEach(f.itemInfo.itemData.bookmarks,function(h){h=y.mixin({},h);h.isInWebmap=!0;h.name=g.decode(h.name);u.push(h)},this);return u},filterBookmarkFromTarget:function(f,u){for(var h=[],r=0,e=f.length;r<e;r++){var d=f[r];E.findBookmarkByNameOrExtent(d,u)||h.push(d)}return h},findBookmarkByNameOrExtent:function(f,u){var h=-1,r=null;A.some(u,function(e,d){if((e.displayName||e.name)===(f.displayName||f.name)||e.extent&&
f.extent&&e.extent.xmax===f.extent.xmax&&e.extent.xmin===f.extent.xmin&&e.extent.ymax===f.extent.ymax&&e.extent.ymin===f.extent.ymin)return h=d,r=e,!0},this);return-1!==h?{bookmark:r,idx:h}:null},filter:function(f,u){u.forEach(function(h){"undefined"!==typeof f&&""!==f?-1!==(h.displayName||h.name).indexOf(f)?v.show(h):v.hide(h):v.show(h)})},getKeysKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"},getAutoRenameBeforeAdd:function(f,u,h){var r=0,e=new RegExp(/\((\d+)\){1}$/g);
A.forEach(u,function(d){d&&"undefined"!==typeof d.name&&-1!==d.name.indexOf(f)&&("undefined"===typeof h||!0===h&&f.length===d.name.length)&&(d=e.exec(d.displayName),null===d&&0===r?r=1:d&&"undefined"!==typeof d[1]&&d[1]>=r&&(r=parseInt(d[1],10)+1))});return 0===r?f:f+"("+r+")"},processDuplicateName:function(f){for(var u=[],h={},r=f.length-1;0<=r;r--){var e=f[r];if(!e||"undefined"===typeof e.name)return;var d=e.name;d in h?h[d]++:h[d]=0;if(0<h[d]){var q=d+"("+h[d]+")";q in h?(h[q]++,h[d]++):h[q]=0;
e.displayName=0<h[q]?d+"("+h[d]+")":q;e._autoRename=!0}else e.displayName=d;u.push(e)}f=u},toogleCheckboxChecked:function(f){f&&f.setValue&&f.setValue(!f.checked)},setCheckboxWithoutEvent:function(f,u){f&&f.check&&f.uncheck&&(!0===u?f.check(!0):f.uncheck(!0))},layerInfosRestoreState:function(f,u){var h=T.getInstanceSync(),r={};if(u&&f){for(var e in u)if(u.hasOwnProperty(e)){f=u[e];var d=!1;d="undefined"===typeof f.visible?f.selected:f.visible;r[e]={visible:d}}h.restoreState({layerOptions:r})}},getlayerInfos:function(){var f=
{},u=T.getInstanceSync();u&&u.traversal&&u.traversal(y.hitch(this,function(h){f[h.id]={visible:h.isVisible()}}));return f},isWithLayerInfos:function(f){return f.layerOptions&&!1!==f.isSaveLayers?!0:!1},stringifyBookmarks:function(f){var u=[];A.forEach(f,function(h){h=y.mixin({},h);h.itemNode&&delete h.itemNode;u.push(h)},this);return u},parseBookmarks:function(f){return y.clone(f)},getKey:function(f){return"Bookmark.2D."+encodeURIComponent(B.getAppIdFromUrl())+"."+f},isConfigBefore5_3:function(f){return"undefined"===
typeof f.syncMode||!0===f.needToUpdateFlag?!0:!1},getUpdateCacheKey:function(f){return"bookmark_cache_updated_"+encodeURIComponent(E.getKey(f))},setUpdateCacheKey:function(f){H.set(E.getUpdateCacheKey(f),!0)},isCacheKeyUpdatedy:function(f){return H.get(E.getUpdateCacheKey(f))},setDefaultConfigForUpdate:function(f){f.needToUpdateFlag=!0;f.layout={cards:!0,list:!1,defaultMode:"cards"};f.editable=!0;Array.isArray(f.bookmarks2D)&&0<f.bookmarks2D.length?f.syncMode={webmap:!1,custom:!0}:f.syncMode={webmap:!0,
custom:!0}},completeUpdateConfig:function(f){f.needToUpdateFlag&&delete f.needToUpdateFlag},updateBookmarks:function(f){for(var u=0;u<f.length;u++)"undefined"===typeof f[u]&&(f.splice(u,1),u--);var h=RegExp("/widgets/Bookmark/images/thumbnail_default.png$");A.forEach(f,function(r){"undefined"===typeof r.isSaveExtent&&(r.isSaveExtent=!0);r.thumbnail&&h.test(r.thumbnail)&&delete r.thumbnail},this)},getLayoutRecorderKey:function(){return"bookMarkLayout_"+encodeURIComponent(B.getAppIdFromUrl())},cleanLayoutRecorder:function(f){H.remove(E.getLayoutRecorderKey(f))},
setLastLayout:function(f){H.set(E.getLayoutRecorderKey(),f)},getLastLayout:function(){return H.get(E.getLayoutRecorderKey())},oldBookmarksBackup:'[{"displayName":"Greater Manchester or Greater Lincolnshire HAHAHAHA","name":"Greater Manchester or Greater Lincolnshire HAHAHAHA","extent":{"type":"extent","xmin":8997982.70263581,"ymin":2110475.6293307655,"xmax":14672667.682525788,"ymax":6024051.4775307495,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Peterborough and Cambridgeshire HEHEHEHEHEH","name":"Peterborough and Cambridgeshire HEHEHEHEHEH","extent":{"type":"extent","xmin":9055621.33977054,"ymin":445965.34674161975,"xmax":14730306.319660518,"ymax":4359541.194941604,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"mentougou biejing china","name":"mentougou biejing china","extent":{"type":"extent","xmin":9502343.119353313,"ymin":3151483.465165457,"xmax":15177028.09924329,"ymax":7065059.313365442,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","name":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u77ed\u4e2d\u6587","name":"\u77ed\u4e2d\u6587","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"short","name":"short","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587 English","name":"\u4e2d\u6587 English","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Underneath the icons","name":"Underneath the icons","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","name":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"eee RTL","name":"eee RTL","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false}]',
_testUpdateOldConfig:function(){return{bookmarks2D:[{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1"},{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1(1)"},{extent:{spatialReference:{wkid:102100},xmax:-3197863.7584074493,xmin:-1.3112899816301128E7,
ymax:1.1466459916526379E7,ymin:-4859686.568575533},name:"bm2",isInWebmap:!0,displayName:"bm2"},{extent:{spatialReference:{wkid:102100},xmax:-3767577.3201611056,xmin:-1.430429896767071E7,ymax:1.5120033300894285E7,ymin:-4622246.062418217},name:"Untitled",isInWebmap:!0,displayName:"Untitled"},{extent:{spatialReference:{wkid:102100},xmax:-4334684.982862408,xmin:-1.6556089386187213E7,ymax:1.6750523655935397E7,ymin:-5666212.383958025},name:"Untitled",isInWebmap:!0,displayName:"Untitled(1)"}],bookmarks3D:[],
flyTime:3E3}},_testSetOldCache:function(f){var u=[];A.forEach(f,function(h){var r="Bookmark.2D."+h.displayName;u.push(r);h=y.mixin({},h);h.itemNode&&delete h.itemNode;h._uID&&delete h._uID;try{H.set(r,h)}catch(e){alert("store error\x3d\x3d\x3e")}},this);H.set("Bookmark.2D",u)},_testSetOldCacheBookmark:function(){return JSON.parse('[{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8273877.24778316,"xmin":-14295892.084200885,"ymax":6466269.8495007465,"ymin":2983187.344602761},"name":"bm1","isInWebmap":true,"displayName":"bm1"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8004818.908219411,"xmin":-11015826.326428276,"ymax":5527011.645932751,"ymin":3785470.393483758},"name":"bm1","isInWebmap":true,"displayName":"bm1(1)"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-12874774.854323175,"xmin":-13627526.708875552,"ymax":4655629.523482032,"ymin":4220244.210369689},"name":"bm2","isInWebmap":true,"displayName":"bm2"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-11618761.605541585,"xmin":-14629769.023750449,"ymax":6691911.956998556,"ymin":4950370.704549563},"name":"bm3","isInWebmap":true,"displayName":"bm3"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-4317189.3003047705,"xmin":-16361218.973140221,"ymax":10449906.504800193,"ymin":3483741.495004222},"name":"bm4","isInWebmap":true,"displayName":"bm4"},{"name":"add-inRT-1","displayName":"add-inRT-1","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}},{"name":"add-inRT-2","displayName":"add-inRT-2","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}}]')}};
return E})},"widgets/Bookmark/ItemNode":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dijit/a11yclick jimu/BaseWidget dijit/_WidgetsInTemplateMixin ./a11y/ItemNode dojo/on dojo/query jimu/utils dojo/text!./ItemNode.html dojo/mouse dijit/form/ValidationTextBox".split(" "),function(y,A,p,g,B,v,H,T,E,f,u,h){var r={};r=A([v,H,y],{templateString:h,isSelected:!1,postMixInProperties:function(){this.nls=p.mixin(this.nls,window.jimuNls.common)},postCreate:function(){g.setAttr(this.domNode,
"data-id",u.sanitizeHTML(this.dataId));this.img&&g.setAttr(this.thumbnail,"src",this.img);this.nls&&(g.setAttr(this.deleteBtn,"title",this.nls.deleteBtnTip),g.setAttr(this.editBtn,"title",this.nls.editBtnTip),g.setAttr(this.changeImgBtn,"title",this.nls.changeThumbnailTip),g.setAttr(this.renameBtn,"title",this.nls.editBtnTip),g.setAttr(this.thumbnail,"title",this.nls.dragReorderTip),g.setAttr(this.layerInfosIcon,"title",this.nls.withVisibility));this.display&&(!1===this.display.selectedBtn&&g.addClass(this.selectedBtn,
"hide"),!1===this.display.editBtn&&g.addClass(this.editBtn,"hide"),!1===this.display.deleteBtn&&g.addClass(this.deleteBtn,"hide"),!1===this.display.renameBtn&&g.addClass(this.renameBtn,"hide"),!0===this.display.selectedBtn&&g.removeClass(this.selectedBtn,"hide"),!0===this.display.changeImgBtn&&g.removeClass(this.changeImgBtn,"hide"),!0===this.display.layerInfosIcon&&(g.removeClass(this.layerInfosIcon,"hide"),g.addClass(this.nodeBox,"with-layer-visibility")));this.a11y_display();this.nodeLabel.setValue(this.label);
this._updateLabelTooltips(this.label);this.own(E(this.selectedBtn,B,p.hitch(this,this.onSelected)));this.own(E(this.deleteBtn,B,p.hitch(this,this.onDelete)));this.own(E(this.editBtn,B,p.hitch(this,this.onEdit)));this.own(E(this.changeImgBtn,B,p.hitch(this,this.onChangeImg)));this.own(E(this.renameBtn,B,p.hitch(this,this.onRenameClick)));this.own(E(this.nodeBox,B,p.hitch(this,this.onNodeBoxClick)));this.own(E(this.dragMasker,"click",p.hitch(this,this.onNodeBoxClick)));!0===this.display.enableEditLabel?
(this.own(E(this.nodeLabel,B,p.hitch(this,this.onLabelClick))),this.own(E(this.nodeLabel,"change",p.hitch(this,this.onLabelChange))),this.own(E(this.nodeLabel,"blur",p.hitch(this,this.onLabelBlur)))):this.nodeLabel.setDisabled(!0);this.own(E(this.nodeLabel,"contextmenu",p.hitch(this,function(e){e.preventDefault()})));this.own(E(this.nodeBox,"contextmenu",p.hitch(this,function(e){e.preventDefault()})));this.a11y_initEvents()},onClick:function(){f(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
f(this.domNode).addClass("jimu-state-selected");this.emit("click")},onNodeBoxClick:function(e){e&&e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault());this.emit("thumbnail-click")},onLabelClick:function(e){e&&e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault());this.emit("label-click")},onLabelChange:function(e){this._updateLabelTooltips(e)},onLabelBlur:function(e){e&&e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault());e=
this.nodeLabel.get("value");this._updateLabelTooltips(e);this.emit("label-blur")},onSelected:function(e){e&&e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault());g.hasClass(this.domNode,"selected")?(g.removeClass(this.domNode,"selected"),this.isSelected=!1,!1!==e&&this.emit("unselected")):(g.addClass(this.domNode,"selected"),this.isSelected=!0,!1!==e&&this.emit("selected"))},onDelete:function(e){e&&e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault());
this.emit("delete")},onEdit:function(e){e&&e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault());this.emit("edit")},onChangeImg:function(e){e&&e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault());this.emit("change-img")},changeImg:function(e){g.setAttr(this.thumbnail,"src",e)},onRenameClick:function(e){e&&e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault());this.emit("rename")},highLight:function(){f(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
f(this.domNode).addClass("jimu-state-selected")},startup:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments);g.destroy(this.domNode)},_updateLabelTooltips:function(e){e&&(g.setAttr(this.nodeLabel,"title",e),this.dragMasker&&g.setAttr(this.dragMasker,"title",e),this.a11y_updateItemLabel(e))}});r.addFloatLeading=function(e){e.itemNode&&e.itemNode.domNode&&(f(".selected-btn",e.itemNode.domNode).forEach(function(d){g.addClass(d,"jimu-float-leading")}),f(".node-box",e.itemNode.domNode).forEach(function(d){g.addClass(d,
"jimu-float-leading")}),f(".node-label",e.itemNode.domNode).forEach(function(d){g.addClass(d,"jimu-float-leading")}),f(".close-btn",e.itemNode.domNode).forEach(function(d){g.addClass(d,"jimu-float-leading")}))};r.removeFloatLeading=function(e){e.itemNode&&e.itemNode.domNode&&(f(".selected-btn",e.itemNode.domNode).forEach(function(d){g.removeClass(d,"jimu-float-leading")}),f(".node-box",e.itemNode.domNode).forEach(function(d){g.removeClass(d,"jimu-float-leading")}),f(".node-label",e.itemNode.domNode).forEach(function(d){g.removeClass(d,
"jimu-float-leading")}),f(".close-btn",e.itemNode.domNode).forEach(function(d){g.removeClass(d,"jimu-float-leading")}))};r.toggleEditable=function(e){e.itemNode&&e.itemNode.nodeLabel&&(e.itemNode.nodeLabel.disabled?r.enableEditable(e):r.disableEditable(e))};r.disableEditable=function(){};r.enableEditable=function(){};r.focusLabel=function(e){e.itemNode&&e.itemNode.nodeLabel&&(e.itemNode.nodeLabel.focus(),e.itemNode.domNode&&g.addClass(e.itemNode.domNode,"a11y_hover"))};r.focusItem=function(e){e&&
e.itemNode&&e.itemNode.domNode&&e.itemNode.domNode.focus()};r.unSelected=function(e){e.itemNode&&e.itemNode&&(e=e.itemNode,g.removeClass(e.domNode,"selected"),e.isSelected=!1)};r.show=function(e){e&&e.itemNode&&(e=e.itemNode,g.removeClass(e.domNode,"hide"),e.isShow=!0)};r.hide=function(e){e&&e.itemNode&&(e=e.itemNode,g.addClass(e.domNode,"hide"),e.isShow=!1)};r.extend(T);return r})},"widgets/Bookmark/a11y/ItemNode":function(){define(["dojo/_base/lang","dojo/on","dojo/_base/html","dojo/keys"],function(y,
A,p,g){return{a11y_removeTabindex:function(B){p.removeAttr(B,"tabindex")},a11y_setTabindex:function(B,v){p.setAttr(B,"tabindex",v||0)},a11y_display:function(){this.a11y&&(!1===this.a11y.selectedBtn&&this.a11y_removeTabindex(this.selectedBtn),!1===this.a11y.editBtn&&this.a11y_removeTabindex(this.editBtn),!1===this.a11y.deleteBtn&&this.a11y_removeTabindex(this.deleteBtn),!1===this.a11y.renameBtn&&this.a11y_removeTabindex(this.renameBtn),!1===this.a11y.changeImgBtn&&this.a11y_removeTabindex(this.changeImgBtn))},
a11y_updateItemLabel:function(B){p.setAttr(this.domNode,"aria-label",B)},a11y_initEvents:function(){this.own(A(this.domNode,"keydown",y.hitch(this,function(B){var v=p.hasClass(B.target,"jimu-img-node");if(B.keyCode===g.ENTER&&v)this.onNodeBoxClick();this.a11y_checkFocus()})));this.own(A(this.domNode,"mouseout",y.hitch(this,function(){p.removeClass(this.domNode,"a11y_hover")})));this.own(A(this.domNode,"focus",y.hitch(this,function(){p.addClass(this.domNode,"a11y_hover")})))},a11y_focusToLabel:function(B){setTimeout(function(){B.focus()},
0)},a11y_focusToBtns:function(B){setTimeout(function(){B.focus()},0)},a11y_checkFocus:function(){setTimeout(y.hitch(this,function(){p.isDescendant(document.activeElement,this.domNode)||p.removeClass(this.domNode,"a11y_hover")}),50)}}})},"libs/Sortable":function(){!function(y){"function"==typeof define&&define.amd?define(y):"undefined"!=typeof module&&void 0!==module.exports?module.exports=y():window.Sortable=y()}(function(){function y(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be HTMLElement, not "+
{}.toString.call(a);this.el=a;this.options=b=U({},b);a[V]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ub(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,
easing:null,setData:function(m,t){m.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:fa(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==y.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5},l;for(l in c)l in b||(b[l]=c[l]);for(var k in vb(b),this)"_"===
k.charAt(0)&&"function"==typeof this[k]&&(this[k]=this[k].bind(this));(this.nativeDraggable=!b.forceFallback&&Lb)&&(this.options.touchStartThreshold=1);b.supportPointer?p(a,"pointerdown",this._onTapStart):(p(a,"mousedown",this._onTapStart),p(a,"touchstart",this._onTapStart));this.nativeDraggable&&(p(a,"dragover",this),p(a,"dragenter",this));ua.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[])}function A(a,b,c,l){if(a){c=c||D;do{if(null!=b&&("\x3e"===b[0]&&a.parentNode===c&&z(a,
b.substring(1))||z(a,b))||l&&a===c)return a;if(a===c)break}while(a=(k=a).host&&k!==D&&k.host.nodeType?k.host:k.parentNode)}var k;return null}function p(a,b,c){a.addEventListener(b,c,wb)}function g(a,b,c){a.removeEventListener(b,c,wb)}function B(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var l=(" "+a.className+" ").replace(xb," ").replace(" "+b+" "," ");a.className=(l+(c?" "+b:"")).replace(xb," ")}}function v(a,b,c){var l=a&&a.style;if(l){if(void 0===c)return D.defaultView&&
D.defaultView.getComputedStyle?c=D.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in l||-1!==b.indexOf("webkit")||(b="-webkit-"+b);l[b]=c+("string"==typeof c?"":"px")}}function H(a){var b="";do{var c=v(a,"transform");c&&"none"!==c&&(b=c+" "+b)}while(a=a.parentNode);return window.DOMMatrix?new DOMMatrix(b):window.WebKitCSSMatrix?new WebKitCSSMatrix(b):window.CSSMatrix?new CSSMatrix(b):void 0}function T(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var l=a.length;
if(c)for(;b<l;b++)c(a[b],b);return a}return[]}function E(a,b,c,l,k,m,t,x,w){var C,I=(a=a||b[V]).options,J="on"+c.charAt(0).toUpperCase()+c.substr(1);!window.CustomEvent||ha||Ga?(C=D.createEvent("Event")).initEvent(c,!0,!0):C=new CustomEvent(c,{bubbles:!0,cancelable:!0});C.to=k||b;C.from=m||b;C.item=l||b;C.clone=K;C.oldIndex=t;C.newIndex=x;C.originalEvent=w;C.pullMode=X?X.lastPutMode:void 0;b&&b.dispatchEvent(C);I[J]&&I[J].call(a,C)}function f(a,b,c,l,k,m,t,x){var w,C,I=a[V],J=I.options.onMove;return!window.CustomEvent||
ha||Ga?(w=D.createEvent("Event")).initEvent("move",!0,!0):w=new CustomEvent("move",{bubbles:!0,cancelable:!0}),w.to=b,w.from=a,w.dragged=c,w.draggedRect=l,w.related=k||b,w.relatedRect=m||L(b),w.willInsertAfter=x,w.originalEvent=t,a.dispatchEvent(w),J&&(C=J.call(I,w,t)),C}function u(a){a.draggable=!1}function h(){db=!1}function r(a,b,c){for(var l=0,k=0,m=a.children;k<m.length;){if("none"!==m[k].style.display&&m[k]!==G&&m[k]!==n&&A(m[k],c.draggable,a,!1)){if(l===b)return m[k];l++}k++}return null}function e(a){for(a=
a.lastElementChild;a&&(a===G||"none"===a.style.display);)a=a.previousElementSibling;return a||null}function d(a){return q(n)<q(a)?1:-1}function q(a,b){b=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&a!==K&&b++;return b}function z(a,b){if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}function M(a,b){return function(){if(!Ha){var c=
arguments,l=this;Ha=Aa(function(){1===c.length?a.call(l,c[0]):a.apply(l,c);Ha=void 0},b)}}}function U(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function Ia(a){return eb&&eb.dom?eb.dom(a).cloneNode(!0):yb?yb(a).clone(!0)[0]:a.cloneNode(!0)}function Qa(a){return Aa(a,0)}function L(a,b,c,l){if(a.getBoundingClientRect||a===pa){var k,m,t,x,w,C,I;if(I=a!==pa&&a!==ra()?(m=(k=a.getBoundingClientRect()).top,t=k.left,x=k.bottom,w=k.right,C=k.height,k.width):(t=m=0,x=window.innerHeight,
w=window.innerWidth,C=window.innerHeight,window.innerWidth),l&&a!==pa&&(c=c||a.parentNode,!ha)){do if(c&&c.getBoundingClientRect&&"none"!==v(c,"transform")){x=c.getBoundingClientRect();m-=x.top+fa(v(c,"border-top-width"));t-=x.left+fa(v(c,"border-left-width"));x=m+k.height;w=t+k.width;break}while(c=c.parentNode)}b&&a!==pa&&(b=(a=H(c||a))&&a.a,c=a&&a.d,a&&(x=(m/=c)+(C/=c),w=(t/=b)+(I/=b)));return{top:m,left:t,bottom:x,right:w,width:I,height:C}}}function zb(a,b){var c=va(a,!0);for(a=L(a)[b];c;){var l=
L(c)[b];if(!("top"===b||"left"===b?l<=a:a<=l))return c;if(c===ra())break;c=va(c,!1)}return!1}function Ab(a){var b=0,c=0,l=ra();if(a){do{var k=H(a),m=k.d;b+=a.scrollLeft*k.a;c+=a.scrollTop*m}while(a!==l&&(a=a.parentNode))}return[b,c]}if("undefined"==typeof window||!window.document)return function(){throw Error("Sortable.js requires a window with a document");};var n,P,G,K,F,ya,fb,Ba,gb,hb,Z,ca,Ra,X,Ca,ib,jb,Ja,W,Sa,Da,Ka,La,Ta,O,Ea,N=[],kb=!1,Ma=!1,Ua=!1,ua=[],Na=!1,Va=!1,lb=[],xb=/\s+/g,V="Sortable"+
(new Date).getTime(),pa=window,D=pa.document,fa=pa.parseInt,Aa=pa.setTimeout,yb=pa.jQuery||pa.Zepto,eb=pa.Polymer,wb={capture:!1,passive:!1},ha=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),Ga=!!navigator.userAgent.match(/Edge/i),Bb=!!navigator.userAgent.match(/firefox/i),mb=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),Wa=!!navigator.userAgent.match(/iP(ad|od|hone)/i),Cb=Ga||ha?"cssFloat":"float",Lb=
"draggable"in D.createElement("div"),nb=function(){if(ha)return!1;var a=D.createElement("x");return a.style.cssText="pointer-events:auto","auto"===a.style.pointerEvents}(),db=!1,ob=!1,sa=Math.abs,Mb=Math.min,Nb=Math.max,Xa=[],ub=function(a,b){var c=v(a),l=fa(c.width)-fa(c.paddingLeft)-fa(c.paddingRight)-fa(c.borderLeftWidth)-fa(c.borderRightWidth),k=r(a,0,b);a=r(a,1,b);var m=k&&v(k);b=a&&v(a);var t=m&&fa(m.marginLeft)+fa(m.marginRight)+L(k).width,x=b&&fa(b.marginLeft)+fa(b.marginRight)+L(a).width;
return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":k&&"none"!==m.float?(c="left"===m.float?"left":"right",!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):k&&("block"===m.display||"flex"===m.display||"table"===m.display||"grid"===m.display||l<=t&&"none"===c[Cb]||a&&"none"===c[Cb]&&l<t+x)?"vertical":"horizontal"},va=function(a,b){if(!a||!a.getBoundingClientRect)return ra();
var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var l=v(a);if(a.clientWidth<a.scrollWidth&&("auto"==l.overflowX||"scroll"==l.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==l.overflowY||"scroll"==l.overflowY)){if(!a||!a.getBoundingClientRect||a===D.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return ra()},ra=function(){return ha?D.documentElement:D.scrollingElement},Db=function(a,b,c){a.scrollLeft+=b;a.scrollTop+=c},pb=M(function(a,b,c,l){if(b.scroll){var k=
c?c[V]:window,m=b.scrollSensitivity,t=b.scrollSpeed,x=a.clientX,w=a.clientY,C=ra(),I=!1;gb!==c&&(Ya(),Ba=b.scroll,hb=b.scrollFn,!0===Ba&&(Ba=va(c,!0),gb=Ba));c=0;var J=Ba;do{var Q,la,R,qa,ia,Y,ma,na,aa=J;var da=L(aa);var ta=da.top,Oa=da.bottom,Za=da.left,$a=da.right,ja=da.width,S=da.height;if(Q=aa.scrollWidth,la=aa.scrollHeight,R=v(aa),ma=aa.scrollLeft,na=aa.scrollTop,Y=aa===C?(ia=ja<Q&&("auto"===R.overflowX||"scroll"===R.overflowX||"visible"===R.overflowX),S<la&&("auto"===R.overflowY||"scroll"===
R.overflowY||"visible"===R.overflowY)):(ia=ja<Q&&("auto"===R.overflowX||"scroll"===R.overflowX),S<la&&("auto"===R.overflowY||"scroll"===R.overflowY)),da=ia&&(sa($a-x)<=m&&ma+ja<Q)-(sa(Za-x)<=m&&!!ma),qa=Y&&(sa(Oa-w)<=m&&na+S<la)-(sa(ta-w)<=m&&!!na),!N[c])for(ta=0;ta<=c;ta++)N[ta]||(N[ta]={});N[c].vx==da&&N[c].vy==qa&&N[c].el===aa||(N[c].el=aa,N[c].vx=da,N[c].vy=qa,clearInterval(N[c].pid),!aa||0==da&&0==qa||(I=!0,N[c].pid=setInterval(function(){l&&0===this.layer&&(y.active._emulateDragOver(!0),y.active._onTouchMove(W,
!0));var ka=N[this.layer].vy?N[this.layer].vy*t:0,ea=N[this.layer].vx?N[this.layer].vx*t:0;"function"==typeof hb&&"continue"!==hb.call(k,ea,ka,a,W,N[this.layer].el)||Db(N[this.layer].el,ea,ka)}.bind({layer:c}),24)));c++}while(b.bubbleScroll&&J!==C&&(J=va(J,!1)));kb=I}},30),Ya=function(){N.forEach(function(a){clearInterval(a.pid)});N=[]},vb=function(a){function b(k,m){return function(t,x,w,C){var I=t.options.group.name&&x.options.group.name&&t.options.group.name===x.options.group.name;if(null==k&&
(m||I))return!0;if(null==k||!1===k)return!1;if(m&&"clone"===k)return k;if("function"==typeof k)return b(k(t,x,w,C),m)(t,x,w,C);t=(m?t:x).options.group.name;return!0===k||"string"==typeof k&&k===t||k.join&&-1<k.indexOf(t)}}var c={},l=a.group;l&&"object"==typeof l||(l={name:l});c.name=l.name;c.checkPull=b(l.pull,!0);c.checkPut=b(l.put);c.revertClone=l.revertClone;a.group=c},Eb=function(a){n&&n.parentNode&&n.parentNode[V]&&n.parentNode[V]._computeIsAligned(a)},Fb=function(a,b){for(;!b[V];)b=b.parentNode;
return a===b},Gb=function(a,b,c){for(a=a.parentNode;a&&!a[V];)a=a.parentNode;a&&a[V][c](U(b,{artificialBubble:!0}))},Hb=function(){!nb&&G&&v(G,"display","none")},Ib=function(){!nb&&G&&v(G,"display","")};D.addEventListener("click",function(a){if(Ua)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Ua=!1},!0);var Ha,qb=function(a){if(a=a.touches?a.touches[0]:a,n){a:{var b=a.clientX;for(var c=a.clientY,l=0;l<ua.length;l++)if(!e(ua[l])){var k=
L(ua[l]),m=ua[l][V].options.emptyInsertThreshold,t=c>=k.top-m&&c<=k.bottom+m;if(b>=k.left-m&&b<=k.right+m&&t){b=ua[l];break a}}b=void 0}b&&b[V]._onDragOver({clientX:a.clientX,clientY:a.clientY,target:b,rootEl:b})}};return p(D,"dragover",qb),p(D,"mousemove",qb),p(D,"touchmove",qb),y.prototype={constructor:y,_computeIsAligned:function(a){var b;if(G&&!nb?(Hb(),b=D.elementFromPoint(a.clientX,a.clientY),Ib()):b=a.target,b=A(b,this.options.draggable,this.el,!1),!ob&&n&&n.parentNode===this.el){for(var c,
l,k,m,t,x,w,C,I=this.el.children,J=0;J<I.length;J++)A(I[J],this.options.draggable,this.el,!1)&&I[J]!==b&&(I[J].sortableMouseAligned=(c=a.clientX,l=a.clientY,k=I[J],m=this._getDirection(a,null),this.options,void 0,t=L(k),x="vertical"===m?t.left:t.top,w="vertical"===m?t.right:t.bottom,x<(C="vertical"===m?c:l)&&C<w));A(b,this.options.draggable,this.el,!0)||(Da=null);ob=!0;Aa(function(){ob=!1},30)}},_getDirection:function(a,b){return"function"==typeof this.options.direction?this.options.direction.call(this,
a,b,n):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b,c=this,l=this.el,k=this.options,m=k.preventOnFilter,t=a.type,x=a.touches&&a.touches[0],w=(x||a).target,C=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||w,I=k.filter;if(function(J){Xa.length=0;J=J.getElementsByTagName("input");for(var Q=J.length;Q--;){var la=J[Q];la.checked&&Xa.push(la)}}(l),!(ha&&!a.artificialBubble&&!Fb(l,w)||n||/mousedown|pointerdown/.test(t)&&0!==a.button||k.disabled||
C.isContentEditable))if(w=A(w,k.draggable,l,!1)){if(fb!==w){if(b=q(w,k.draggable),"function"==typeof I){if(I.call(this,a,w,this))return E(c,C,"filter",w,l,l,b),void(m&&a.cancelable&&a.preventDefault())}else if(I&&(I=I.split(",").some(function(J){if(J=A(C,J.trim(),l,!1))return E(c,J,"filter",w,l,l,b),!0})))return void(m&&a.cancelable&&a.preventDefault());k.handle&&!A(C,k.handle,l,!1)||this._prepareDragStart(a,x,w,b)}}else ha&&Gb(l,a,"_onTapStart")}},_handleAutoScroll:function(a,b){if(n&&this.options.scroll){var c=
a.clientX,l=a.clientY,k=D.elementFromPoint(c,l),m=this;if(b||Ga||ha||mb){pb(a,m.options,k,b);var t=va(k,!0);!kb||Ca&&c===ib&&l===jb||(Ca&&clearInterval(Ca),Ca=setInterval(function(){if(n){var x=va(D.elementFromPoint(c,l),!0);x!==t&&(t=x,Ya(),pb(a,m.options,t,b))}},10),ib=c,jb=l)}else{if(!m.options.bubbleScroll||va(k,!0)===ra())return void Ya();pb(a,m.options,va(k,!1),!1)}}},_prepareDragStart:function(a,b,c,l){var k,m=this,t=m.el,x=m.options,w=t.ownerDocument;c&&!n&&c.parentNode===t&&(F=t,P=(n=c).parentNode,
ya=n.nextSibling,fb=c,Ra=x.group,Z=l,Ja={target:n,clientX:(b||a).clientX,clientY:(b||a).clientY},this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,n.style["will-change"]="all",n.style.transition="",n.style.transform="",k=function(){m._disableDelayedDragEvents();!Bb&&m.nativeDraggable&&(n.draggable=!0);m._triggerDragStart(a,b);E(m,F,"choose",n,F,F,Z);B(n,x.chosenClass,!0)},x.ignore.split(",").forEach(function(C){T(n,C.trim(),u)}),x.supportPointer?p(w,"pointerup",m._onDrop):(p(w,"mouseup",m._onDrop),
p(w,"touchend",m._onDrop),p(w,"touchcancel",m._onDrop)),Bb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,n.draggable=!0),!x.delay||this.nativeDraggable&&(Ga||ha)?k():(p(w,"mouseup",m._disableDelayedDrag),p(w,"touchend",m._disableDelayedDrag),p(w,"touchcancel",m._disableDelayedDrag),p(w,"mousemove",m._delayedDragTouchMoveHandler),p(w,"touchmove",m._delayedDragTouchMoveHandler),x.supportPointer&&p(w,"pointermove",m._delayedDragTouchMoveHandler),m._dragStartTimer=Aa(k,x.delay)))},_delayedDragTouchMoveHandler:function(a){a=
a.touches?a.touches[0]:a;Nb(sa(a.clientX-this._lastX),sa(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){n&&u(n);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;g(a,"mouseup",this._disableDelayedDrag);g(a,"touchend",this._disableDelayedDrag);g(a,"touchcancel",this._disableDelayedDrag);
g(a,"mousemove",this._delayedDragTouchMoveHandler);g(a,"touchmove",this._delayedDragTouchMoveHandler);g(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||("touch"==a.pointerType?a:null);!this.nativeDraggable||b?this.options.supportPointer?p(D,"pointermove",this._onTouchMove):p(D,b?"touchmove":"mousemove",this._onTouchMove):(p(n,"dragend",this),p(F,"dragstart",this._onDragStart));try{D.selection?Qa(function(){D.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},
_dragStarted:function(a,b){if(Ma=!1,F&&n){this.nativeDraggable&&(p(D,"dragover",this._handleAutoScroll),p(D,"dragover",Eb));var c=this.options;!a&&B(n,c.dragClass,!1);B(n,c.ghostClass,!0);v(n,"transform","");y.active=this;a&&this._appendGhost();E(this,F,"start",n,F,F,Z,void 0,b)}else this._nulling()},_emulateDragOver:function(a){if(W&&(this._lastX!==W.clientX||this._lastY!==W.clientY||a)){this._lastX=W.clientX;this._lastY=W.clientY;Hb();for(var b=a=D.elementFromPoint(W.clientX,W.clientY);a&&a.shadowRoot;)b=
a=a.shadowRoot.elementFromPoint(W.clientX,W.clientY);if(b){do{if(b[V]&&b[V]._onDragOver({clientX:W.clientX,clientY:W.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}n.parentNode[V]._computeIsAligned(W);Ib()}},_onTouchMove:function(a,b){if(Ja){var c=this.options,l=c.fallbackTolerance,k=c.fallbackOffset;c=a.touches?a.touches[0]:a;var m=G&&H(G),t=G&&m&&m.a;m=G&&m&&m.d;var x=Wa&&O&&Ab(O);t=(c.clientX-Ja.clientX+k.x)/(t||1)+(x?x[0]-lb[0]:0)/(t||1);k=(c.clientY-
Ja.clientY+k.y)/(m||1)+(x?x[1]-lb[1]:0)/(m||1);k=a.touches?"translate3d("+t+"px,"+k+"px,0)":"translate("+t+"px,"+k+"px)";if(!y.active&&!Ma){if(l&&Mb(sa(c.clientX-this._lastX),sa(c.clientY-this._lastY))<l)return;this._onDragStart(a,!0)}!b&&this._handleAutoScroll(c,!0);Sa=!0;W=c;v(G,"webkitTransform",k);v(G,"mozTransform",k);v(G,"msTransform",k);v(G,"transform",k);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!G){var a=this.options.fallbackOnBody?D.body:F,b=L(n,!0,a,!Wa),c=(v(n),this.options);
if(Wa){for(O=a;"static"===v(O,"position")&&"none"===v(O,"transform")&&O!==D;)O=O.parentNode;if(O!==D){var l=L(O,!0);b.top-=l.top;b.left-=l.left}O!==D.body&&O!==D.documentElement?(O===D&&(O=ra()),b.top+=O.scrollTop,b.left+=O.scrollLeft):O=ra();lb=Ab(O)}B(G=n.cloneNode(!0),c.ghostClass,!1);B(G,c.fallbackClass,!0);B(G,c.dragClass,!0);v(G,"box-sizing","border-box");v(G,"margin",0);v(G,"top",b.top);v(G,"left",b.left);v(G,"width",b.width);v(G,"height",b.height);v(G,"opacity","0.8");v(G,"position",Wa?"absolute":
"fixed");v(G,"zIndex","100000");v(G,"pointerEvents","none");a.appendChild(G)}},_onDragStart:function(a,b){var c=this,l=a.dataTransfer,k=c.options;(K=Ia(n)).draggable=!1;K.style["will-change"]="";this._hideClone();B(K,c.options.chosenClass,!1);c._cloneId=Qa(function(){c.options.removeCloneOnHide||F.insertBefore(K,n);E(c,F,"clone",n)});!b&&B(n,k.dragClass,!0);b?(Ua=!0,c._loopId=setInterval(c._emulateDragOver,50)):(g(D,"mouseup",c._onDrop),g(D,"touchend",c._onDrop),g(D,"touchcancel",c._onDrop),l&&(l.effectAllowed=
"move",k.setData&&k.setData.call(c,l,n)),p(D,"drop",c),v(n,"transform","translateZ(0)"));Ma=!0;c._dragStartId=Qa(c._dragStarted.bind(c,b,a));p(D,"selectstart",c);mb&&v(D.body,"user-select","none")},_onDragOver:function(a){function b(ba){return ba&&(I?C._hideClone():C._showClone(Q),C&&(B(n,X?X.options.ghostClass:C.options.ghostClass,!1),B(n,x.ghostClass,!0)),X!==Q&&Q!==y.active?X=Q:Q===y.active&&(X=null),l&&Q._animate(l,n),t&&R&&Q._animate(R,t)),(t===n&&!n.animated||t===m&&!t.animated)&&(Da=null),
x.dragoverBubble||a.rootEl||t===D||(Q._handleAutoScroll(a),n.parentNode[V]._computeIsAligned(a)),!x.dragoverBubble&&a.stopPropagation&&a.stopPropagation(),!0}function c(){E(Q,F,"change",t,m,F,Z,q(n,x.draggable),a)}var l,k,m=this.el,t=a.target,x=this.options,w=x.group,C=y.active,I=Ra===w,J=x.sort,Q=this;if(!db&&(!ha||a.rootEl||a.artificialBubble||Fb(m,t))){if(void 0!==a.preventDefault&&a.cancelable&&a.preventDefault(),Sa=!0,t=A(t,x.draggable,m,!0),A(a.target,null,n,!0)||t.animated)return b(!1);if(t!==
n&&(Ua=!1),C&&!x.disabled&&(I?J||(k=!F.contains(n)):X===this||(this.lastPutMode=Ra.checkPull(this,C,n,a))&&w.checkPut(this,C,n,a))){w=this._getDirection(a,t);if(l=L(n),k)return this._hideClone(),P=F,ya?F.insertBefore(n,ya):F.appendChild(n),b(!0);if((k=e(m))&&(ja=a,S=w,ka=L(e(m)),ea="vertical"===S?ja.clientY:ja.clientX,wa="vertical"===S?ja.clientX:ja.clientY,za="vertical"===S?ka.bottom:ka.right,rb="vertical"===S?ka.left:ka.top,ab="vertical"===S?ka.right:ka.bottom,!("vertical"===S?ab+10<wa||wa<=ab&&
za<ea&&rb<=wa:za<ea&&rb<wa||ea<=za&&ab+10<wa)||k.animated)){if(t&&t!==n&&t.parentNode===m){var la;ea=0;wa=t.sortableMouseAligned;za=n.parentNode!==m;ja="vertical"===w?"top":"left";ka=(S=zb(t,"top")||zb(n,"top"))?S.scrollTop:void 0;if(Da!==t&&(La=null,la=L(t)[ja],Na=!1),ia=t,Y=w,ma=(qa=n)===n&&Ea||L(qa),na=ia===n&&Ea||L(ia),aa="vertical"===Y?ma.left:ma.top,da="vertical"===Y?ma.right:ma.bottom,ta="vertical"===Y?ma.width:ma.height,Oa="vertical"===Y?na.left:na.top,Za="vertical"===Y?na.right:na.bottom,
$a="vertical"===Y?na.width:na.height,La=(aa===Oa||da===Za||aa+ta/2===Oa+$a/2)&&wa||za||S||x.invertSwap||"insert"===La||"swap"===La?("swap"!==La&&(Va=x.invertSwap||za),ea=function(ba,Jb,Fa,sb,bb,Kb,Ob){var oa=L(Jb);ba="vertical"===Fa?ba.clientY:ba.clientX;var xa="vertical"===Fa?oa.height:oa.width,Pa="vertical"===Fa?oa.top:oa.left;oa="vertical"===Fa?oa.bottom:oa.right;var cb=L(n),tb=!1;if(!Kb)if(Ob&&Ta<xa*sb)if(!Na&&(1===Ka?Pa+xa*bb/2<ba:ba<oa-xa*bb/2)&&(Na=!0),Na)tb=!0;else{if("vertical"===Fa?cb.top:
cb.left,"vertical"===Fa?cb.bottom:cb.right,1===Ka?ba<Pa+Ta:oa-Ta<ba)return-1*Ka}else if(Pa+xa*(1-sb)/2<ba&&ba<oa-xa*(1-sb)/2)return d(Jb);return(tb=tb||Kb)&&(ba<Pa+xa*bb/2||oa-xa*bb/2<ba)?Pa+xa/2<ba?1:-1:0}(a,t,w,x.swapThreshold,null==x.invertedSwapThreshold?x.swapThreshold:x.invertedSwapThreshold,Va,Da===t),"swap"):(ea=d(t),"insert"),0===ea)return b(!1);Ea=null;Ka=ea;var R=L(Da=t);qa=t.nextElementSibling;ia=!1;Y=f(F,m,n,l,t,R,a,ia=1===ea);if(!1!==Y)return 1!==Y&&-1!==Y||(ia=1===Y),db=!0,Aa(h,30),
I?C._hideClone():C._showClone(this),ia&&!qa?m.appendChild(n):t.parentNode.insertBefore(n,ia?qa:t),S&&Db(S,0,ka-S.scrollTop),P=n.parentNode,void 0===la||Va||(Ta=sa(la-L(t)[ja])),c(),b(!0)}}else if(k&&m===a.target&&(t=k),t&&(R=L(t)),I?C._hideClone():C._showClone(this),!1!==f(F,m,n,l,t,R,a,!!t))return m.appendChild(n),P=m,Ea=null,c(),b(!0);if(m.contains(n))return b(!1)}var qa,ia,Y,ma,na,aa,da,ta,Oa,Za,$a,ja,S,ka,ea,wa,za,rb,ab;return ha&&!a.rootEl&&Gb(m,a,"_onDragOver"),!1}},_animate:function(a,b){var c=
this.options.animation;if(c){var l=L(b);if(b===n&&(Ea=l),1===a.nodeType&&(a=L(a)),a.left+a.width/2!==l.left+l.width/2||a.top+a.height/2!==l.top+l.height/2){var k=H(this.el),m=k&&k.a;k=k&&k.d;v(b,"transition","none");v(b,"transform","translate3d("+(a.left-l.left)/(m||1)+"px,"+(a.top-l.top)/(k||1)+"px,0)");b.offsetWidth;v(b,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:""));v(b,"transform","translate3d(0,0,0)")}"number"==typeof b.animated&&clearTimeout(b.animated);b.animated=
Aa(function(){v(b,"transition","");v(b,"transform","");b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;g(D,"touchmove",this._onTouchMove);g(D,"pointermove",this._onTouchMove);g(a,"mouseup",this._onDrop);g(a,"touchend",this._onDrop);g(a,"pointerup",this._onDrop);g(a,"touchcancel",this._onDrop);g(D,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;Na=Va=kb=Ma=!1;clearInterval(this._loopId);clearInterval(Ca);Ya();clearTimeout(Ha);Ha=void 0;clearTimeout(this._dragStartTimer);
clearTimeout(this._cloneId);clearTimeout(this._dragStartId);g(D,"mousemove",this._onTouchMove);this.nativeDraggable&&(g(D,"drop",this),g(b,"dragstart",this._onDragStart),g(D,"dragover",this._handleAutoScroll),g(D,"dragover",Eb));mb&&v(D.body,"user-select","");this._offUpEvents();a&&(Sa&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),G&&G.parentNode&&G.parentNode.removeChild(G),(F===P||X&&"clone"!==X.lastPutMode)&&K&&K.parentNode&&K.parentNode.removeChild(K),n&&(this.nativeDraggable&&
g(n,"dragend",this),u(n),n.style["will-change"]="",B(n,X?X.options.ghostClass:this.options.ghostClass,!1),B(n,this.options.chosenClass,!1),E(this,F,"unchoose",n,P,F,Z,null,a),F!==P?(0<=(ca=q(n,c.draggable))&&(E(null,P,"add",n,P,F,Z,ca,a),E(this,F,"remove",n,P,F,Z,ca,a),E(null,P,"sort",n,P,F,Z,ca,a),E(this,F,"sort",n,P,F,Z,ca,a)),X&&X.save()):n.nextSibling!==ya&&0<=(ca=q(n,c.draggable))&&(E(this,F,"update",n,P,F,Z,ca,a),E(this,F,"sort",n,P,F,Z,ca,a)),y.active&&(null!=ca&&-1!==ca||(ca=Z),E(this,F,"end",
n,P,F,Z,ca,a),this.save())));this._nulling()},_nulling:function(){F=n=P=G=ya=K=fb=Ba=gb=N.length=Ca=ib=jb=Ja=W=Sa=ca=Z=Da=Ka=Ea=X=Ra=y.active=null;Xa.forEach(function(a){a.checked=!0});Xa.length=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":n&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a,
b=[],c=this.el.children,l=0,k=c.length,m=this.options;l<k;l++)if(A(a=c[l],m.draggable,this.el,!1)){var t=b,x=t.push,w;if(!(w=a.getAttribute(m.dataIdAttr))){a=a.tagName+a.className+a.src+a.href+a.textContent;w=a.length;for(var C=0;w--;)C+=a.charCodeAt(w);w=C.toString(36)}x.call(t,w)}return b},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(l,k){k=c.children[k];A(k,this.options.draggable,c,!1)&&(b[l]=k)},this);a.forEach(function(l){b[l]&&(c.removeChild(b[l]),c.appendChild(b[l]))})},
save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return A(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];c[a]=b;"group"===a&&vb(c)},destroy:function(){var a=this.el;a[V]=null;g(a,"mousedown",this._onTapStart);g(a,"touchstart",this._onTapStart);g(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(g(a,"dragover",this),g(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),
function(b){b.removeAttribute("draggable")});this._onDrop();ua.splice(ua.indexOf(this.el),1);this.el=a=null},_hideClone:function(){K.cloneHidden||(v(K,"display","none"),K.cloneHidden=!0,K.parentNode&&this.options.removeCloneOnHide&&K.parentNode.removeChild(K))},_showClone:function(a){"clone"===a.lastPutMode?K.cloneHidden&&(F.contains(n)&&!this.options.group.revertClone?F.insertBefore(K,n):ya?F.insertBefore(K,ya):F.appendChild(K),this.options.group.revertClone&&this._animate(n,K),v(K,"display",""),
K.cloneHidden=!1):this._hideClone()}},p(D,"touchmove",function(a){(y.active||Ma)&&a.cancelable&&a.preventDefault()}),y.utils={on:p,off:g,css:v,find:T,is:function(a,b){return!!A(a,b,a,!1)},extend:U,throttle:M,closest:A,toggleClass:B,clone:Ia,index:q,nextTick:Qa,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:ub,getChild:r},y.create=function(a,b){return new y(a,b)},y.version="1.8.4",y})},"widgets/Bookmark/CustomBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/sniff esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils ./ItemNode jimu/dijit/ImageChooser libs/Sortable".split(" "),
function(y,A,p,g,B,v,H,T,E,f,u,h,r,e){return A([E,f,y],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",nls:null,_CHANGING_IMG_BM:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=g.create("div",{"class":"drawer-handle hide",innerHTML:"\x3cdiv class\x3d'separate-line'\x3e\x3c/div\x3e"},this.domNode);this.bookMarkerContainer=g.create("div",{"class":"custom editing"},this.domNode);this.imageChooserContainer=g.create("div",
{"class":"hide"},this.domNode)},startup:function(){this.inherited(arguments);var d=u.readBookmarksInWebmap(this.map);(!0===this.config.syncMode.webmap&&0<d.length||!0===this.config.syncMode.custom&&0<this.config.bookmarks2D.length)&&g.removeClass(this.drawerHandle,"hide");this.sortableBookMarkerNodes=e.create(this.bookMarkerContainer,{handle:".drag-masker",filter:".disable-drag .hide",sort:!0,disabled:!1,animation:100,onSort:p.hitch(this,function(){this.saveBookMarkersBySortable();this.emit("sort",
this.bookmarks)})});this.imageChooser=new r({cropImage:!1,showSelfImg:!0,goldenWidth:108,goldenHeight:71,maxSize:100,label:this.nls.selectFile,format:["image/gif","image/png","image/jpeg"]},this.imageChooserContainer);this.imageChooser.startup();this.own(v(this.imageChooser,"imageChange",p.hitch(this,"_onImageChange")))},toggleMobile:function(d){(this._IS_MOBILE=d)?this.sortableBookMarkerNodes.option("disabled",!0):this.sortableBookMarkerNodes.option("disabled",!1)},refresh:function(d){this.bookmarks=
d;u.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks);this.toggleDrawer()},add:function(){var d=u.getAutoRenameBeforeAdd("bookmark",this.bookmarks),q={name:"bookmark",displayName:d,extent:this.map.extent.toJson(),isSaveLayers:this.config.isSaveLayerVisibility,isSaveExtent:!0};!0===this.config.isSaveLayerVisibility&&(q.layerOptions=u.getlayerInfos());"bookmark"!==d&&(q._autoRename=!0);this._doAddBookmark(q);this.bookmarks.unshift(q);q.itemNode&&q.itemNode.domNode&&g.place(q.itemNode.domNode,
this.bookMarkerContainer,"first");this.displayBookmarks(this.bookmarks);this.toggleDrawer();this.bookmarks.forEach(p.hitch(this,function(z,M){0===M?(h.enableEditable(z),h.focusLabel(z)):h.disableEditable(z)}));this.emit("added",this.bookmarks)},_doAddBookmark:function(d){var q={enableEditLabel:!0,editBtn:!1,changeImgBtn:!0,layerInfosIcon:u.isWithLayerInfos(d)};q=u.createBookMarkNode(d,this.nls,this.folderUrl,q);d.itemNode=q;this.own(v(q,"thumbnail-click",p.hitch(this,p.partial(this._onNodeBoxClick,
d))));this.own(v(q,"label-click",p.hitch(this,p.partial(this._onLebelClick,d))));this.own(v(q,"label-blur",p.hitch(this,p.partial(this._onLabelBlur,d))));this.own(v(q,"delete",p.hitch(this,p.partial(this._onBookmarkDeleteImmediately,d))));this.own(v(q,"change-img",p.hitch(this,p.partial(this._onBookmarkChangeImg,d))));this.own(v(q,"rename",p.hitch(this,p.partial(this._onRename,d))));return q},filter:function(d){this._LAST_FILTER_STR=d;u.filter(d,this.bookmarks)},displayBookmarks:function(d){u.empty(d,
this.bookMarkerContainer);B.forEach(d,function(q){q&&this._doAddBookmark(q)},this);d.forEach(p.hitch(this,function(q){q&&q.itemNode&&q.itemNode.domNode&&g.place(q.itemNode.domNode,this.bookMarkerContainer,"last")}))},saveBookMarkersBySortable:function(d){for(var q=this.sortableBookMarkerNodes.toArray(),z=[],M=0,U=q.length;M<U;M++){var Ia=u.findBookMarkByUID(q[M],this.bookmarks);Ia&&z.push(Ia.bookmark)}this.bookmarks=z;d&&d.isRefresh&&this.displayBookmarks(this.bookmarks)},_isListMode:function(){if(this.domNode){var d=
this.domNode.parentElement||this.domNode.parentNode;if(d)return g.hasClass(d,"list")}return!1},_onNodeBoxClick:function(d){require(["esri/geometry/Extent"],p.hitch(this,function(q){if(!1!==d.isSaveExtent){var z=d.extent;z.spatialReference?new T(z.spatialReference):new T({wkid:4326});this.map.setExtent(new q(z))}u.layerInfosRestoreState(d.isSaveLayers,d.layerOptions)}))},_onLebelClick:function(d){this._isListMode()||!0===this._IS_MOBILE?this._onNodeBoxClick(d):h.focusLabel(d)},_onLabelBlur:function(d){var q=
d.itemNode.nodeLabel.get("value");d.displayName=q;d.name=q;this.emit("label-blur",this.bookmarks);this.filter(this._LAST_FILTER_STR)},_onBookmarkDeleteImmediately:function(d){this.removeBookMarks([d])},removeBookMarks:function(d){for(var q=null,z=0,M=d.length;z<M;z++){var U=u.findBookMark(d[z],this.bookmarks);U&&U.bookmark&&(U.bookmark.itemNode&&U.bookmark.itemNode.destroy(),q=u.findNextBookMarkByIdx(U.idx,this.bookmarks),this.bookmarks.splice(U.idx,1))}this.emit("delete",{bookmarks:this.bookmarks,
nextBookmark:q});this.toggleDrawer()},_onBookmarkChangeImg:function(d){this._CHANGING_IMG_BM=d;d=this.imageChooser.mask;if(H("safari")){var q=document.createEvent("MouseEvents");q.initEvent("click",!0,!0);d.dispatchEvent(q)}else d.click()},_onImageChange:function(d){this._CHANGING_IMG_BM&&this._CHANGING_IMG_BM.itemNode&&(""!==d&&(this._CHANGING_IMG_BM.itemNode.changeImg(d),this._CHANGING_IMG_BM.thumbnail=d),this.emit("change-img",this.bookmarks))},_onRename:function(d){h.focusLabel(d)},toggleDrawer:function(){!0===
u.isBookmarksDataEmpty(this.bookmarks)?g.addClass(this.domNode,"hide"):g.removeClass(this.domNode,"hide")},hideDrawer:function(){g.addClass(this.bookMarkerContainer,"hide")},showDrawer:function(){g.removeClass(this.bookMarkerContainer,"hide")}})})},"widgets/Bookmark/a11y/Widget":function(){define(["dojo/query","dojo/_base/array","dojo/_base/html","jimu/utils","../ItemNode"],function(y,A,p,g,B){return{a11y_initFocusNodes:function(){var v=this._getFocusableNodes();v&&v.length&&(this._508_FIRST_FOCUS_NODE=
v[0],g.initFirstFocusNode(this.domNode,this._508_FIRST_FOCUS_NODE),0<v.length&&g.initLastFocusNode(this.domNode,v[v.length-1]))},a11y_focusAfterDelete:function(v){v&&v.itemNode&&v.itemNode.domNode?B.focusItem(v):this._508_FIRST_FOCUS_NODE.focus()},_getFocusableNodes:function(){var v=y('[tabindex $\x3d"0"]',this.domNode);return v=A.filter(v,function(H){return!p.hasClass(H,"dijitInputInner")&&(p.hasClass(H,"delete-btn")||"none"!==p.getStyle(H,"display"))},this)}}})},"widgets/Bookmark/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Bookmark/HeadBar.html":'\x3cdiv class\x3d"header"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editableBtns" class\x3d"editable-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"addBtn" class\x3d"add hide" title\x3d"${nls.labelBookmarkName}" tabindex\x3d"0" role\x3d"button"\x3e${nls.addBtn}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"oper-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"filter" class\x3d"filter-container hide"\x3e\r\n\t\t\t\x3cdiv class\x3d"filter-input"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"filterInput" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tplaceHolder\x3d"${nls.searchBookmark}" required\x3d"false"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"search" data-dojo-attach-point\x3d"filterBtn" title\x3d"${nls.searchBookmark}"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"commonFunBtns" class\x3d"common-fun-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"syncBtn" class\x3d"head-btns sync-btn" title\x3d"${nls.syncTip}"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"backToInitBtn" class\x3d"head-btns back-to-init hide" title\x3d""\x3e\x3c/div\x3e--\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"displayMode" class\x3d"display-mode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"cardsBtn" class\x3d"head-btns cards hide" title\x3d"${nls.cardsTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"listBtn" class\x3d"head-btns list hide" title\x3d"${nls.listTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"editBtns" class\x3d"edit-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"head-btns rename" title\x3d"rename"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"head-btns delete" title\x3d"delete"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/ItemNode.html":'\x3cdiv class\x3d"jimu-img-node jimu-float-leading clearFix" data-id\x3d"" tabindex\x3d"0" aria-label\x3d"" role\x3d"button"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeBox" class\x3d"node-box verticalCenter no-user-select"\x3e\r\n\t\t\x3cimg data-dojo-attach-point\x3d"thumbnail" class\x3d"thumbnail" src\x3d""\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeLabel" data-dojo-type\x3d"dijit/form/ValidationTextBox" required\x3d"true" data-dojo-props\x3d"trim:true"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"changeImgBtn" class\x3d"change-img-btn oper-btns no-user-select hide" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editBtn" class\x3d"edit-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"rename-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"delete-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"dragMasker" class\x3d"drag-masker" tabindex\x3d"-1"\x3e\x3c/div\x3e\x3c!--for different browsers drag behavior--\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"layerInfosIcon" class\x3d"layer-info-icon icons no-user-select hide"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"selectedBtn" class\x3d"selected-btn oper-btns no-user-select hide"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/Widget.html":'\x3cdiv class\x3d""\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"headBarContainer" class\x3d"head-bar"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookmarksContainer" class\x3d"bookmarks-container cards"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"webmapBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"customBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c!--\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookMarkerContainer" class\x3d"bookmarker-nodes cards"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editMenuContainer" class\x3d"edit-menu"\x3e\r\n\t\t\x3cdiv class\x3d"delete-btn edit-menu-btns" data-dojo-attach-point\x3d"deleteBtn" data-dojo-attach-event\x3d"onclick:_onEditMenuDelete"\x3e${nls.labelDelete}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"imageChooserContainer" class\x3d"hide"\x3e\x3c/div\x3e\r\n--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/css/style.css":'.jimu-img-node{font-size: 12px; position: relative; float: left; color: #666; overflow: hidden;}.jimu-img-node .node-box{position: relative; border-radius: 4px; overflow: hidden;}.jimu-img-node img{width: 100%; height: 100%; cursor: pointer;}.jimu-img-node .node-label{height: 30px; text-align: center; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled{opacity: 1;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #000; opacity: 0.9;}.jimu-widget-bookmark .no-user-select{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.jimu-widget-bookmark .hide {display: none !important;}.jimu-widget-bookmark .clearFix {*overflow: hidden; *zoom: 1;}.jimu-widget-bookmark .clearFix:after {display: table; content: ""; width: 0; clear: both;}.jimu-widget-bookmark .verticalCenter{display: flex; align-items: center;}.jimu-widget-bookmark .jimu-img-node .node-box{margin: 0 auto; width: 100px; height: 60px;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{width: 100px; height: 60px;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox {border: none; width: 100%; background-color: transparent;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{background-color: transparent; width: 100%; overflow: hidden;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{white-space: nowrap; text-overflow: ellipsis; text-align: center;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused{border:none !important; box-shadow: none; background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused .dijitInputInner{box-shadow: none; background: rgba(36, 181, 204, 0.2) !important;}.jimu-img-node .oper-btns{display: none; position: absolute; z-index: 10;}.jimu-img-node .icons{position: absolute; width: 20px; height: 20px; z-index: 10; background-color: #FFF;}.list .jimu-img-node .icons{display: none;}.editing .jimu-img-node .thumbnail{}.jimu-img-node .drag-masker{position: absolute; z-index: 5; top: 0; width: 100%; height: 60px; cursor: pointer;}.jimu-img-node .drag-masker:hover{background-color: transparent}.editing .jimu-img-node .oper-btns{width:20px; height:20px; cursor: pointer; background-color: rgba(0,0,0,0.5);}.editing .jimu-img-node .oper-btns:hover{background-color: rgba(0,0,0,0.7);}.editing .jimu-img-node .selected-btn{background: url("../images/btns/unselected.svg") no-repeat; left:0; top:0;}.editing .jimu-img-node.selected .selected-btn{background: url("../images/btns/selected.svg") no-repeat;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn{cursor: pointer; top:0;}.jimu-rtl .jimu-widget-bookmark:not(.mobile) .jimu-img-node .delete-btn{right: auto;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn::before{position: absolute; background-image: url("../images/btns/x.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .edit-btn{right: 0; bottom: 30px;}.jimu-rtl .jimu-img-node .edit-btn{right: auto; left: 0;}.editing .jimu-img-node .edit-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn{display: none; top: 0px; left: 0px;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .change-img-btn{right: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .change-img-btn{right: auto; left: calc((100% - 100px)/2);}.editing .jimu-img-node .change-img-btn::before{position: absolute; background-image: url("../images/btns/change.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-img-node .layer-info-icon{left: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .layer-info-icon{right: auto; right: calc((100% - 100px)/2);}.jimu-img-node .layer-info-icon::before{position: absolute; background-image: url("../images/btns/layer_infos.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark .header {display: flex; align-items: center; justify-content: space-between; height: 30px; margin: 2px; margin-bottom: 15px;}.jimu-widget-bookmark .header .editable-btns,.jimu-widget-bookmark .header .common-fun-btns,.jimu-widget-bookmark .header .edit-btns,.jimu-widget-bookmark .header .common-fun-btns .display-mode{display: flex; align-items: center;}.jimu-widget-bookmark .header .common-fun-btns .display-mode {margin: 0 5px;}.jimu-widget-bookmark .header .two-modes .list{background: url("../images/btns/list.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .list:hover{background: url("../images/btns/list_selected.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards{background: url("../images/btns/cards.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards:hover{background: url("../images/btns/cards_selected.svg") no-repeat;}.jimu-widget-bookmark .adding .header .add{background: url("../images/btns/add_selected.svg") no-repeat;}.jimu-widget-bookmark .header .edit{background: url("../images/btns/edit.svg") no-repeat;}.jimu-widget-bookmark .editing .header .edit{background: url("../images/btns/edit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn{background: url("../images/btns/sync.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn.marked{background: url("../images/btns/sync.svg") no-repeat; background-color: red;}.jimu-widget-bookmark .header .back-to-init{background: url("../images/btns/backtoinit.svg") no-repeat;}.jimu-widget-bookmark .header .back-to-init.marked{background: url("../images/btns/backtoinit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename{background: url("../images/btns/rename_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename.disable{background: url("../images/btns/rename.svg") no-repeat;}.jimu-widget-bookmark .header .delete{background: url("../images/btns/delete_selected.svg") no-repeat;}.jimu-widget-bookmark .header .delete.disable{background: url("../images/btns/delete.svg") no-repeat;}.jimu-widget-bookmark .header .edit-btns{display: none;}.jimu-widget-bookmark .editing .header .edit-btns{display: flex;}.jimu-widget-bookmark .header .common-fun-btns{display: flex;}.jimu-widget-bookmark .editing .header .common-fun-btns{display: none;}.bookmark-notice-popup{font-family: "Avenir Medium"; font-size: 12px;}.bookmark-notice-popup .tips{color: #000000; letter-spacing: 0;}.bookmark-notice-popup .check-box{position: absolute; bottom: 20px;}.bookmark-notice-popup .check-box .jimu-checkbox .label{font-size: 12px; color: #353535; letter-spacing: 0.3px;}.DartTheme .jimu-widget-bookmark .dijitTextBox{border: none !important;}.DartTheme .jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #FFF !important;}.jimu-widget-bookmark{width: 100%; height: 100%; overflow: hidden; position: relative;}.jimu-widget-bookmark .add-section{position: relative; height: 30px; margin-top: 7px; overflow: visible;}.jimu-widget-bookmark .input-bookmark-name{border-top-right-radius: 0; border-bottom-right-radius: 0; position: absolute; left: 0; top: 0; width: 100%;}.jimu-widget-bookmark .jimu-state-error{margin-top: 4px; visibility: hidden;}.jimu-widget-bookmark .bookmark-list{margin-bottom: 35px; width: 100%;}.jimu-widget-bookmark .play-section{overflow: hidden; margin-top: 20px; position: absolute; bottom: 0;}.jimu-widget-bookmark .jimu-btn{float: none; margin: auto; width: 100%;}.jimu-widget-bookmark .jimu-img-node{margin: 3px 0 8px 3px;}.jimu-rtl .jimu-widget-bookmark .jimu-img-node{margin: 3px 3px 8px 0;}.jimu-widget-bookmark .jimu-img-node .node-label{height: 2.7em; line-height: 16px; vertical-align: middle; padding: 0 5px; margin: 0 auto; width: 100px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;}.jimu-widget-bookmark .jimu-img-node .node-box{border-radius: 0; position: relative;}.jimu-widget-bookmark .jimu-img-node img{display: flex; width: 100%; height: 60px; opacity: 1; min-width: 80px;}.jimu-widget-bookmark .jimu-img-node.selected img{opacity: 0.4; transition: opacity .5s;}.jimu-widget-bookmark .cards .jimu-img-node:hover .dijitTextBox .dijitInputInner{color: #51B1FE !important;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{left: 50%; transform: translate(-50%, 0%);}.jimu-widget-bookmark .cards .jimu-img-node .delete-btn{display: none; right:calc((100% - 100px)/2); justify-content: center; align-items: center;}.jimu-rtl .jimu-widget-bookmark .cards .jimu-img-node .delete-btn{right: auto; left: calc((100% - 100px)/2);}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .delete-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .delete-btn{display: flex;}.jimu-widget-bookmark .cards .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .change-img-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .change-img-btn{display: block;}.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{max-width: 104px; width: 100%; margin: 0 auto; display: flex;}.jimu-widget-bookmark .list{}.jimu-widget-bookmark .list .jimu-img-node{width: calc(100% - 10px) !important; display: flex; height: 36px; margin-bottom: 8px;}.jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #E2E2E2;}.DartTheme .jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #444;}.jimu-widget-bookmark .list .node-box{height: 36px; width: 20px; margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{z-index: 99;}.jimu-widget-bookmark .list .node-box img{display: none;}.jimu-widget-bookmark .node-box:after{display: none;}.jimu-widget-bookmark .list .node-box:after{position: absolute; content: url(../images/btns/place.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .with-layer-visibility.node-box:after{position: absolute; content: url(../images/btns/place_with_layer_visibility.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .editing .node-box:after{top: 10px;}.jimu-rtl .jimu-widget-bookmark .list .node-box:after{left: auto; right: 3px;}.jimu-widget-bookmark .list.editing .node-box{display: none;}.jimu-widget-bookmark .list.editing .node-box:after{display: none;}.jimu-widget-bookmark .list.editing .jimu-img-node .node-box{margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox{height: 36px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputField{width: calc(100% - 70px); height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.jimu-widget-bookmark .list.editing .head-btns{}.jimu-widget-bookmark .list .jimu-img-node .oper-btns{top: 8px;}.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .oper-btns{top: 8px;}.mobile .jimu-img-node .oper-btns{display: none;}.mobile .editing .jimu-img-node .oper-btns,.mobile .editing .jimu-img-node .oper-btns:hover,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns:hover{background-color: transparent;}.mobile .editing .jimu-img-node .rename-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:before{position: absolute; display: block; background-image: url(images/pencil.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .rename-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:hover:before{background-image: url(images/pencil_hover.svg);}.mobile .editing .jimu-img-node .delete-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:before{position: absolute; display: block; background-image: url(images/clear.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .delete-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:hover:before{background-image: url(images/clear_hover.svg);}.mobile .editing .jimu-img-node .change-img-btn:before{position: absolute; display: block; background-image: url(images/change_img.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .change-img-btn:hover:before{background-image: url(images/change_img_hover.svg);}.jimu-widget-bookmark .list.editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.jimu-widget-bookmark .list.editing .jimu-img-node .close-btn{position: relative; background-color: green;}.jimu-widget-bookmark .list .jimu-img-node .delete-btn{left: auto; right: 15px; display: block;}.jimu-rtl .list .jimu-img-node .delete-btn{left: 15px; right: auto;}.jimu-widget-bookmark .list .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{display: block; left: auto; right: 50px;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{left: 50px; right: auto;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .change-img-btn{left: 85px; right: auto;}.jimu-widget-bookmark {position: relative; overflow: hidden;}.jimu-widget-bookmark .drawer-handle{width: 100%; display: flex; align-items: center; font-family: "Avenir Medium"; font-size: 14px; color: #000000; letter-spacing: 0.39px;}.jimu-widget-bookmark .drawer-handle .separate-line{margin: 10px 0 25px 0; border-top: 1px solid #eee; width: 100%;}.DartTheme .jimu-widget-bookmark .drawer-handle .separate-line{border-top: 1px solid #666;}.jimu-widget-bookmark .drop-down{display: flex; align-items: center; background: url(images/dropDown.svg) no-repeat; background-size: 6px 6px; width: 6px; height: 6px; cursor: pointer;}.jimu-widget-bookmark .drop-down.open{transform: rotate(0deg); -ms-transform: rotate(0deg); -moz-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg);}.jimu-widget-bookmark .drop-down{margin: 0 10px; transform: rotate(90deg); -ms-transform: rotate(90deg); -moz-transform: rotate(90deg); -webkit-transform: rotate(90deg); -o-transform: rotate(90deg);}.jimu-widget-bookmark .bookmarks-container{overflow-x: hidden; overflow-y: auto;}.jimu-widget-bookmark .bookmarker-nodes{overflow: inherit;}.jimu-widget-bookmark .dojoDndItemAnchor{padding: 0; border: none;}.jimu-widget-bookmark .header .oper-btns{width: 100%; height: 100%; display: flex; align-items: center; justify-content: flex-end;}.jimu-widget-bookmark .header .head-btns{width:16px; height:16px; margin: 4px; overflow: hidden; cursor: pointer;}.jimu-widget-bookmark .header .add{display: flex; align-items: center; justify-content: center; height:30px; min-width: 65px; padding: 0 10px; border: 1px solid #c7c7c7; color: #000; font-family: Avenir-Medium; font-size: 12px; cursor: pointer;}.jimu-widget-bookmark .header .add:hover{border: 1px solid #000;}.DartTheme .jimu-widget-bookmark .header .add{border: 1px solid #666; color: #FFF;}.DartTheme .jimu-widget-bookmark .header .add:hover{border: 1px solid #FFF;}.jimu-widget-bookmark .editable .header .filter-container{margin-left:20px;}.jimu-rtl .jimu-widget-bookmark .editable .header .filter-container{margin-left: auto; margin-right: 20px;}.jimu-widget-bookmark .header .filter-container{display: flex; position: relative; width: 100%; height: 100%; overflow: hidden;}.jimu-widget-bookmark .header .filter-container .filter-input{position: absolute; height: 30px; width: 100%;}.jimu-widget-bookmark .header .filter-container .dijitTextBox {width: 100%;}.jimu-widget-bookmark .header .filter-container .search{position: absolute; background: url(images/search.svg) no-repeat; background-size: contain; width: 16px; height: 16px; margin: 7px; right: 0; top: 0;}.jimu-rtl .jimu-widget-bookmark .header .filter-container .search{right: auto; left: 0;}.jimu-widget-bookmark .header .display-mode{margin: 0 10px;}.jimu-widget-bookmark:not(.mobile) .cards .header{margin-bottom: 25px;}.mobile.jimu-widget-bookmark {}.mobile.jimu-widget-bookmark .dojoDndSource:not(.editable) .header{height: 20px; margin-bottom: 5px;}.mobile.jimu-widget-bookmark .jimu-img-node{width:calc(100% - 10px) !important; display: flex; align-items: center; border-top: 1px solid rgba(230,230,230,0.5); margin-top: 0; margin-bottom: 0; padding: 4px 0;}.mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: 0px; bottom: 9px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: auto; right: 0;}.DartTheme .mobile.jimu-widget-bookmark .jimu-img-node{border-top: 1px solid #333333}.mobile.jimu-widget-bookmark .jimu-img-node .drag-masker{width: 100%;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{margin: 0; max-width: 100%;}.mobile.jimu-widget-bookmark .node-box{}.mobile.jimu-widget-bookmark .list.editing .node-box{display: flex;}.mobile.jimu-widget-bookmark .node-box img{max-height: 50px; max-width: 75px;}.mobile.jimu-widget-bookmark .editing .node-box{}.mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 0; margin-right:10px;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .node-box{min-width: 80px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 10px; margin-right:0;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{max-width: 300px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.mobile.jimu-widget-bookmark .drawer-handle .separate-line{margin-bottom: 0; border-top: 4px solid #F2F2F2;}.mobile.jimu-widget-bookmark {-webkit-touch-callout:none; -webkit-user-select:none; -khtml-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none;}.mobile.jimu-widget-bookmark .jimu-img-node .node-label{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .close-btn{position: relative;}.mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {display: block; left: auto; right: 85px; bottom: auto;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {left: 85px; right: auto;}.mobile.jimu-widget-bookmark .list .jimu-img-node .change-img-btn {display: none;}.mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {display: block; left: auto; right: 50px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {left: 50px; right: auto;}.mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {display: block; right: 15px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {left: 15px; right: auto;}',
"*now":function(y){y(['dojo/i18n!*preload*widgets/Bookmark/nls/Widget*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html jimu/BaseWidget dojo/query dojo/on dojo/Deferred ./HeadBar ./WebmapBookmarks ./CustomBookmarks ./utils libs/storejs/store ./a11y/Widget".split(" "),function(y,A,p,g,B,v,H,T,E,f,u,h,r,e){y=y([B],{baseClass:"jimu-widget-bookmark dojoDndSource dojoDndTarget dojoDndContainer",name:"Bookmark",bookmarks:[],jimuNls:null,postMixInProperties:function(){this.jimuNls=window.jimuNls},startup:function(){this.inherited(arguments);h.isConfigBefore5_3(this.config)&&
h.setDefaultConfigForUpdate(this.config);this.headBar=new E({map:this.map,nls:this.nls,bookmarksContainer:this.bookmarksContainer,editMenuContainer:this.editMenuContainer,editable:this.config.editable,layout:this.config.layout},this.headBarContainer);this.headBar.startup();this.own(H(this.headBar,"add",A.hitch(this,function(){this.customBookmarks.add()})));this.own(H(this.headBar,"filter-change",A.hitch(this,function(d){this.webmapBookmarks.filter(d);this.customBookmarks.filter(d)})));this.webmapBookmarks=
new f({nls:this.nls,map:this.map,folderUrl:this.folderUrl,config:this.config},this.webmapBookmarksContainer);this.webmapBookmarks.startup();this.customBookmarks=new u({nls:this.nls,map:this.map,folderUrl:this.folderUrl,widgetId:this.id,config:this.config},this.customBookmarksContainer);this.customBookmarks.startup();this.own(H(this.customBookmarks,"sort",A.hitch(this,"_onSort")));this.own(H(this.customBookmarks,"change-img",A.hitch(this,"_onChangeImg")));this.own(H(this.customBookmarks,"delete",A.hitch(this,
"_onDelete")));this.own(H(this.customBookmarks,"label-blur",A.hitch(this,"_onLabelBlur")));this.own(H(this.customBookmarks,"added",A.hitch(this,"_onAdded")));this.resize()},_onLabelBlur:function(d){this.onBookmarksChange(d)},_onSort:function(d){this.onBookmarksChange(d)},_onChangeImg:function(d){this.onBookmarksChange(d)},_onDelete:function(d){var q=d.nextBookmark;this.onBookmarksChange(d.bookmarks);this.a11y_initFocusNodes();this.a11y_focusAfterDelete(q)},_onAdded:function(d){this.onBookmarksChange(d);
this.a11y_initFocusNodes()},onBookmarksChange:function(d){this._saveAllToLocalCache(d);this.resize()},onOpen:function(){this.webmapBookmarks.refresh();var d=this._getLocalCache();this.customBookmarks.refresh(d);this.resize();this.a11y_initFocusNodes()},destroy:function(){this.headBar&&(this.headBar.destroy(),this.headBar=null);this.webmapBookmarks&&(this.webmapBookmarks.destroy(),this.webmapBookmarks=null);this.customBookmarks&&(this.customBookmarks.destroy(),this.customBookmarks=null);this.inherited(arguments)},
onMinimize:function(){this.resize()},onMaximize:function(){this.resize()},resize:function(){window.appInfo.isRunInMobile?g.addClass(this.domNode,"mobile"):g.removeClass(this.domNode,"mobile");this.customBookmarks.toggleMobile(window.appInfo.isRunInMobile);var d=this.domNode.parentElement||this.domNode.parentNode;d&&(window.isRTL?g.setStyle(d,"padding-left","0"):g.setStyle(d,"padding-right","0"));this._getParentSize(d).then(A.hitch(this,function(q){var z=this.domNode;if(z){if(279<=q.w&&329>q.w)this._setNodeWidths(z,
130,100);else if(1>=Math.abs(q.w-330))this._setNodeWidths(z,100,100);else{var M=g.getMarginBox(z).w-20,U=parseInt(M/100,10);0<U&&(M=parseInt(M%100/U,10),this._setNodeWidths(z,100+M,100))}this.setContainerHeight(q,d)}}))},_setNodeWidths:function(d,q,z){z+=4;q<z&&(q=z);v(".jimu-img-node",d).forEach(function(M){g.setStyle(M,"width",q+"px")})},getItemSize:function(){var d={};d.width=this.itemSize.width;d.height=this.itemSize.height;return d},setContainerWidth:function(d,q){g.setStyle(this.domNode,{width:(q.width+
2*this.hmargin)*Math.floor(d.w/(q.width+2*this.hmargin))+20+"px",margin:"0px auto"})},setContainerHeight:function(d,q){q=this._getDomHeight(".header",q);g.setStyle(this.bookmarksContainer,{height:d.h-q+"px"})},setItemPosition:function(d,q){var z={position:"relative",margin:this.vmargin+"px "+this.hmargin+"px"};0<=q.width&&(z.width=q.width+"px");0<=q.height&&(z.height=q.height+"px");g.setStyle(d.domNode,z);g.addClass(d.domNode,"jimu-float-leading")},_getDomHeight:function(d,q){var z=0;(d=v(d,q)[0])&&
(d=g.getMarginBox(d))&&d.h&&(z=d.h);return z},_getParentSize:function(d){var q=new T;setTimeout(A.hitch(this,function(){var z=g.getMarginBox(d),M=g.getPadExtents(d);z.h-=M.h;q.resolve(z)}),10);return q},_saveAllToLocalCache:function(d){var q=[];p.forEach(r.get(h.getKey(this.id)),function(z){r.remove(z)},this);p.forEach(d,function(z){var M=h.getKey(this.id)+"."+z.displayName;q.push(M);z=A.mixin({},z);z.itemNode&&delete z.itemNode;z._uID&&delete z._uID;try{r.set(M,z)}catch(U){alert("localcache store error")}},
this);r.set(h.getKey(this.id),q)},_getLocalCache:function(){var d=this._getCacheByKeys(this._getOldKey()),q=this._getCacheByKeys(h.getKey(this.id)),z=this._getCacheUpdatedKey();0===q.length&&0<d.length&&!0!==r.get(z)&&(q=h.filterBookmarkFromTarget(d,this.config.bookmarks2D),this._saveAllToLocalCache(q),r.set(z,!0));return q},_getCacheUpdatedKey:function(){return h.getKey(this.id)+".BookmarkCacheUpdated"},_getCacheByKeys:function(d){var q=[];r.get(d)&&p.forEach(r.get(d),function(z){z.startWith(d)&&
(z=r.get(z),q.push(z))},this);return q},_getOldKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"}});y.extend(e);return y});
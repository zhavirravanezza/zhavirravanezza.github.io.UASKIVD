// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/RelatedTableCharts/setting/LayerChooser":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array dojo/promise/all dojo/Deferred dojo/on dojo/dom-class dojo/text!./LayerChooser.html jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox esri/request jimu/dijit/Message dojo/domReady!".split(" "),function(y,D,x,A,w,f,d,c,a,b,h,g,e,m){return y([D,x],{baseClass:"jimu-widget-RelatedTableCharts-setting",
templateString:b,selectRouteURL:null,agolFlag:!1,serviceFlag:!1,_numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],startup:function(){this.inherited(arguments)},postCreate:function(){this._createPolygonChooserArgs();this.own(c(this.cancelButton,"click",A.hitch(this,function(n){this.onCancleClick(n)})));this.own(c(this.okButton,"click",A.hitch(this,this._onOKButtonClicked)))},_getGeometryType:function(n){switch(n){case "esriGeometryPolygon":return"polygon";
case "esriGeometryPolyline":return"polyline";case "esriGeometryPoint":return"point";default:return"*"}},_createPolygonChooserArgs:function(){var n=[];n.push(this.geometryType);n=h.createFeaturelayerFilter(n,!1);var l=h.createQueryableLayerFilter();n={multiple:!1,createMapResponse:this.map.webMapResponse,showLayerTypes:["FeatureLayer"],filter:h.andCombineFilters([n,l])};n=new h(n);n=new g({layerChooser:n});n.placeAt(this.itemSelectDiv);n.startup();this.own(c(n,"selection-change",A.hitch(this,this._createRelatedTableOptions)))},
_createRelatedTableOptions:function(n){var l=[];if(n&&0<n.length){this.polygonLayer=n[0];this.polygonLayerInfo={url:this.polygonLayer.url,geometryType:this._getGeometryType(this.polygonLayer.geometryType),supportsDistinct:!1};this.polygonLayer.advancedQueryCapabilities&&this.polygonLayer.advancedQueryCapabilities.supportsDistinct&&(this.polygonLayerInfo.supportsDistinct=!0);this.polygonLayer.fields&&(this.polygonLayerInfo.fields=A.clone(this.polygonLayer.fields));this.polygonLayerInfo.layerId=this.polygonLayer.layerId?
this.polygonLayer.layerId:this.polygonLayer.url.substr(this.polygonLayer.url.lastIndexOf("/")+1,this.polygonLayer.url.length);var r=this.polygonLayer.url.substr(0,this.polygonLayer.url.lastIndexOf("/")+1);this.polygonLayerInfo.baseURL=r;this.polygonLayerInfo=A.mixin(this.polygonLayerInfo,this._getLayerDetailsFromMap(r,this.polygonLayerInfo.layerId));this.relatedTableInfo=[];var p=[];w.forEach(this.polygonLayer.relationships,A.hitch(this,function(v){var q=new d;p.push(q);e({url:r+v.relatedTableId,
content:{f:"json"},handleAs:"json"}).then(A.hitch(this,function(k){q.resolve(k)}),A.hitch(this,function(){q.resolve()}))}));f(p).then(A.hitch(this,function(v){var q,k;for(k=0;k<v.length;k++)v[k].fields&&(q=w.some(v[k].fields,A.hitch(this,function(z){return 0<=this._numberFieldTypes.indexOf(z.type)})))&&(q={url:r+v[k].id,baseURL:r,relationShipId:this.polygonLayer.relationships[k].id,layerId:v[k].id,title:this.polygonLayer.relationships[k].name},q.fields=A.clone(v[k].fields),q=A.mixin(q,this._getLayerDetailsFromMap(r,
v[k].id)),q=A.mixin(q,this._getLayerDetailsFromMapTables(r,v[k].id)),q.title&&(this.relatedTableInfo[l.length]=q,l.push({label:this.relatedTableInfo[l.length].title,value:l.length})));0<l.length?(this.relationshipSelect.options.length=0,l[0].selected=!0,this.relationshipSelect.addOption(l),a.remove(this.okButton,"jimu-state-disabled")):this._resetRelatedLayerSelector()}),A.hitch(this,function(){this._resetRelatedLayerSelector()}))}else this._resetRelatedLayerSelector()},_resetRelatedLayerSelector:function(){this.relationshipSelect.value=
"";this.relationshipSelect.options.length=0;this.relationshipSelect.addOption({value:"",label:"",selected:!0});a.add(this.okButton,"jimu-state-disabled")},_getLayerDetailsFromMap:function(n,l){var r={};this.map&&this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.operationalLayers&&w.forEach(this.map.webMapResponse.itemInfo.itemData.operationalLayers,A.hitch(this,function(p){p.layerObject&&("ArcGISMapServiceLayer"===
p.layerType||"ArcGISTiledMapServiceLayer"===p.layerType?n.substring(0,n.length-1)===p.url&&(w.forEach(p.resourceInfo.layers,A.hitch(this,function(v){v.id===parseInt(l,10)&&(r.title=v.name)})),w.forEach(p.layers,A.hitch(this,function(v){v.id===parseInt(l,10)&&(v.name&&(r.title=v.name),r.popupInfo=v.popupInfo,v.layerDefinition&&v.layerDefinition.definitionExpression&&(r.definitionExpression=v.layerDefinition.definitionExpression))}))):p.url.replace(/.*?:\/\//g,"")===(n+l).replace(/.*?:\/\//g,"")&&(r.title=
p.title,r.popupInfo=p.popupInfo,p.layerDefinition&&p.layerDefinition.definitionExpression&&(r.definitionExpression=p.layerDefinition.definitionExpression)))}));return r},_getLayerDetailsFromMapTables:function(n,l){var r={};this.map&&this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.tables&&w.forEach(this.map.webMapResponse.itemInfo.itemData.tables,A.hitch(this,function(p){p.url.replace(/.*?:\/\//g,"")===
(n+l).replace(/.*?:\/\//g,"")&&(r.title=p.title,r.popupInfo=p.popupInfo,p.layerDefinition&&p.layerDefinition.definitionExpression&&(r.definitionExpression=p.layerDefinition.definitionExpression))}));return r},_onOKButtonClicked:function(){if(!a.contains(this.okButton,"jimu-state-disabled"))if(this.polygonLayerInfo){if(""===this.relationshipSelect.value)return this._errorMessage(this.nls.layerChooser.errorInSelectingRelatedLayer),!1;var n={polygonLayerInfo:this.polygonLayerInfo,relatedLayerInfo:this.relatedTableInfo[this.relationshipSelect.value]};
this.onOkClick(n)}else return this._errorMessage(this.nls.layerChooser.errorInSelectingPolygonLayer),!1},_errorMessage:function(n){(new m({message:n})).message=n},onOkClick:function(n){return n},onCancleClick:function(n){return n}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p){var v=x([A,w,f,D],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);e.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new p({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=g.hitch(this,this.basicFilter);
this.filter=v.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(q){var k=new c;this.onlyShowVisible?k.resolve(q.isShowInMap()):k.resolve(!0);return k},filter:function(q){q=new c;q.resolve(!0);return q},getSelectedItems:function(){var q=this.tree.getSelectedItems();return m.map(q,g.hitch(this,function(k){return this.getHandledItem(k)}))},getAllItems:function(){var q=this.tree.getAllItems(),k=[];m.forEach(q,
g.hitch(this,function(z){"root"!==z.id&&(z=this.getHandledItem(z),k.push(z))}));return k},getHandledItem:function(q){return{name:q.name,layerInfo:q.layerInfo}},_isLeafItem:function(q){return q.isLeaf},setCreateMapResponse:function(q){this.createMapResponse=q;r.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(g.hitch(this,function(k){this.layerInfosObj=k;this.own(y(this.layerInfosObj,"layerInfosChanged",g.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&
this.own(y(this.layerInfosObj,"layerInfosIsShowInMapChanged",g.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(q,k){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(q){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(q){this._clear();e.setStyle(this.errorTipSection,"display","block");var k=[];this.onlyShowWebMapLayers?(k=q.getLayerInfoArrayOfWebmap(),
k=k.concat(q.getTableInfoArrayOfWebmap())):(k=q.getLayerInfoArray(),k=k.concat(q.getTableInfoArray()));0!==k.length&&(e.setStyle(this.errorTipSection,"display","none"),m.forEach(k,g.hitch(this,function(z){this._addDirectLayerInfo(z)})))},_addDirectLayerInfo:function(q){q&&q.getLayerObject().then(g.hitch(this,function(){this._addItem("root",q)}),g.hitch(this,function(k){console.error(k)}))},_clear:function(){var q=this._store.query({parent:"root"});m.forEach(q,g.hitch(this,function(k){k&&"root"!==
k.id&&this._store.remove(k.id)}))},_addItem:function(q,k){var z=null,B=k.getLayerType(),H=this.filter(k);h({layerType:B,valid:H}).then(g.hitch(this,function(J){if(J.valid){var N=g.hitch(this,function(K,t){this._id++;z={name:k.title||"",parent:q,layerInfo:k,type:J.layerType,layerClass:k.layerObject.declaredClass,id:this._id.toString(),isLeaf:K,hasChildren:t};this._store.add(z)}),C=k.getSubLayers(),L=0===C.length,F=!0;this.onlyFilterCurrentLayerWhenAddItem?(L&&(F=!1),N(L,F)):L?N(L,!1):(C=m.map(C,g.hitch(this,
function(K){return this.filter(K)})),h(C).then(g.hitch(this,function(K){(K=m.some(K,function(t){return t}))&&N(L,K)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var q=this._getRootItem();q=new d({data:[q],getChildren:function(k){return this.query({parent:k.id})}});this._store=new a(q);q=new b({store:this._store,query:{id:"root"},mayHaveChildren:g.hitch(this,this._mayHaveChildren)});this.tree=new l({multiple:this.multiple,
model:q,showRoot:!1,isLeafItem:g.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:g.hitch(this,function(k,z){"root"!==k.id&&this._onTreeOpen(k,z)}),onClick:g.hitch(this,function(k,z,B){this._onTreeClick(k,z,B);this.emit("tree-click",k,z,B)}),getIconStyle:g.hitch(this,function(k,z){var B=null;if(!k||"root"===k.id)return null;var H={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},J=window.location.protocol+"//"+window.location.host+
require.toUrl("jimu");if(k=this._getIconInfo(k,z).imageName)H.backgroundImage="url("+J+"/css/images/"+k+")",B=H;return B}),getIconClass:g.hitch(this,function(k,z){return this._getIconInfo(k,z).className}),getTooltip:g.hitch(this,function(k){return this.displayTooltipForTreeNode?k.layerInfo.title:""})});e.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(q){return q.hasChildren},_getIconInfo:function(q,k){var z="",B="";"ArcGISDynamicMapServiceLayer"===
q.type||"ArcGISTiledMapServiceLayer"===q.type?k?(z="mapserver_open.png",B="mapservice-layer-icon open"):(z="mapserver_close.png",B="mapservice-layer-icon close"):"GroupLayer"===q.type?k?(z="group_layer2.png",B="group-layer-icon open"):(z="group_layer1.png",B="group-layer-icon close"):"FeatureLayer"===q.type?(q=n.getTypeByGeometryType(q.layerInfo.layerObject.geometryType),"point"===q?(z="point_layer1.png",B="point-layer-icon"):"polyline"===q?(z="line_layer1.png",B="line-layer-icon"):"polygon"===q&&
(z="polygon_layer1.png",B="polygon-layer-icon")):"Table"===q.type?(z="table.png",B="table-icon"):"ArcGISImageServiceLayer"===q.type||"ArcGISImageServiceVectorLayer"===q.type?(z="image_layer.png",B="iamge-layer-icon"):k?(z="mapserver_open.png",B="mapservice-layer-icon open"):(z="mapserver_close.png",B="mapservice-layer-icon close");return{imageName:z,className:B}},_onTreeOpen:function(q,k){if("root"!==q.id){var z=[];k=[];z=q.layerInfo.getSubLayers();q.checked||(this.shelter.show(),k=m.map(z,g.hitch(this,
function(B){return B.getLayerObject()})),h(k).then(g.hitch(this,function(){this.domNode&&(m.forEach(z,g.hitch(this,function(B){this._addItem(q.id,B)})),q.checked=!0,this.shelter.hide())}),g.hitch(this,function(B){console.error(B);this.shelter.hide()})))}},_onTreeClick:function(q,k,z){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});v.createFilterByLayerType=function(q){g.isArrayLike(q)||(q=[]);return function(k){var z=
new c;if(0===q.length)z.resolve(!0);else{var B=[];k.traversal(function(H){B.push(H.getLayerType())});h(B).then(function(H){for(var J=0;J<H.length;J++)for(var N=0;N<q.length;N++)if(H[J]===q[N]){z.resolve(!0);return}z.resolve(!1)},function(H){console.error(H);z.reject(H)})}return z}};v.createFeaturelayerFilter=function(q,k,z,B){var H=["point","polyline","polygon"];q&&0<q.length?(q=m.filter(q,function(J){return 0<=H.indexOf(J)}),0===q.length&&(q=H)):q=H;return function(J){var N=J.getLayerType();J=J.getLayerObject();
return h({layerType:N,layerObject:J}).then(function(C){var L=C.layerType;C=C.layerObject;if("ArcGISDynamicMapServiceLayer"===L||"ArcGISTiledMapServiceLayer"===L||"GroupLayer"===L||"FeatureCollection"===L)return!0;if("FeatureLayer"===L){L=n.getTypeByGeometryType(C.geometryType);L=0<=m.indexOf(q,L);var F=v._shouldPassStatisticsCheck(B,C);return C.url?(C=n.isFeaturelayerUrlSupportQuery(C.url,C.capabilities),L&&C&&F):k&&L}return"Table"===L?(L=n.isFeaturelayerUrlSupportQuery(C.url,C.capabilities),C=v._shouldPassStatisticsCheck(B,
C),z&&L&&C):!1})}};v.createImageServiceLayerFilter=function(q,k){return function(z){var B=z.getLayerType();z=z.getLayerObject();return h({layerType:B,layerObject:z}).then(function(H){var J=H.layerType,N=H.layerObject;return"ArcGISImageServiceLayer"===J||"ArcGISImageServiceVectorLayer"===J?q?n.isImageServiceSupportQuery(H.layerObject.capabilities)?k?v._shouldPassStatisticsCheck(k,N):!0:!1:!0:!1})}};v._shouldPassStatisticsCheck=function(q,k){return q?(q=!1,q=k.advancedQueryCapabilities?!!k.advancedQueryCapabilities.supportsStatistics:
!!k.supportsStatistics):!0};v.createQueryableLayerFilter=function(q){var k=v.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,q);q=v.createImageServiceLayerFilter(!0,q);return v.orCombineFilters([k,q])};v.andCombineFilters=function(q){return v._combineFilters(q,!0)};v.orCombineFilters=function(q){return v._combineFilters(q,!1)};v._combineFilters=function(q,k){return function(z){var B=new c,H=m.map(q,function(J){return J(z)});h(H).then(function(J){var N=!1;N=k?m.every(J,function(C){return C}):
m.some(J,function(C){return C});B.resolve(N)},function(J){console.error(J);B.reject(J)});return B}};return v})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(y,D,x,A,w,f,d){return x("dijit.tree.ObjectStoreModel",d,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(c){w.mixin(this,c);this.childrenCache={}},getRoot:function(c,a){if(this.root)c(this.root);
else{var b=this.store.query(this.query);b.then&&this.own(b);f(b,w.hitch(this,function(h){if(1!=h.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+h.length+" items, but must return exactly one");this.root=h[0];c(this.root);b.observe&&b.observe(w.hitch(this,function(g){this.onChange(g)}),!0)}),a)}},mayHaveChildren:function(){return!0},getChildren:function(c,a,b){var h=this.store.getIdentity(c);if(this.childrenCache[h])f(this.childrenCache[h],a,b);else{var g=this.childrenCache[h]=
this.store.getChildren(c);g.then&&this.own(g);g.observe&&this.own(g.observe(w.hitch(this,function(e,m,n){this.onChange(e);m!=n&&f(g,w.hitch(this,"onChildrenChange",c))}),!0));f(g,a,b)}},isItem:function(){return!0},getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return c[this.labelAttr]},newItem:function(c,a,b,h){return this.store.put(c,{parent:a,before:h})},pasteItem:function(c,a,b,h,g,e){var m=new A;if(a===b&&!h&&!e)return m.resolve(!0),m;a&&!h?this.getChildren(a,w.hitch(this,
function(n){n=[].concat(n);var l=y.indexOf(n,c);n.splice(l,1);this.onChildrenChange(a,n);m.resolve(this.store.put(c,{overwrite:!0,parent:b,oldParent:a,before:e,isCopy:!1}))})):m.resolve(this.store.put(c,{overwrite:!0,parent:b,oldParent:a,before:e,isCopy:!0}));return m},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l){var r=y([n._TreeNode,e],{templateString:A,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=f.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=f.toDom('\x3cinput type\x3d"checkbox" /\x3e');f.addClass(this.checkNode,"jimu-tree-check-node");f.place(this.checkNode,this.contentNode,
"first");this.own(h(this.checkNode,"click",w.hitch(this,this._onClick)));this.own(h(this.rowNode,"keydown",w.hitch(this,function(p,v){v.target=p;v.keyCode!==g.ENTER&&v.keyCode!==g.SPACE||this._onClick(v)},this.checkNode)));this.isLeaf?this.groupId?f.setStyle(this.checkNode,"display","none"):f.setStyle(this.checkNode,"display","inline"):f.setStyle(this.checkNode,"display","none");this.isLeaf?f.addClass(this.domNode,"jimu-tree-leaf-node"):f.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,f.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,f.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(p){(p.target||p.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,p):this.tree._onClick(this,p)},_onChange:function(){this.isLeaf&&setTimeout(w.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return y([n,e],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+l.getRandomString()},postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,"jimu-tree");this.own(b.before(this,"onClick",w.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&f.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;f.setAttr(this.domNode,"tabindex",0)},removeItem:function(p){this.model.store.remove(p)},getAllItems:function(){var p=this.getAllTreeNodeWidgets();return d.map(p,w.hitch(this,function(v){var q=v.item;q.selected=v.checkNode.checked;return q}))},getSelectedItems:function(){var p=this.getAllTreeNodeWidgets();p=d.filter(p,w.hitch(this,function(v){return v.checkNode.checked}));return d.map(p,
w.hitch(this,function(v){return v.item}))},getFilteredItems:function(p){var v=this.getAllTreeNodeWidgets();v=d.map(v,w.hitch(this,function(q){var k=q.item;k.selected=q.checkNode.checked;return k}));return d.filter(v,w.hitch(this,function(q){return p(q)}))},getTreeNodeByItemId:function(p){for(var v=this._getAllTreeNodeDoms(),q=0;q<v.length;q++){var k=m.byNode(v[q]);if(k.item.id.toString()===p.toString())return k}return null},selectItem:function(p){(p=this.getTreeNodeByItemId(p))&&p.isLeaf&&this.selectNodeWidget(p)},
unselectItem:function(p){(p=this.getTreeNodeByItemId(p))&&p.isLeaf&&p.unselect()},getAllLeafTreeNodeWidgets:function(){var p=this.getAllTreeNodeWidgets();return d.filter(p,w.hitch(this,function(v){return v.isLeaf}))},getAllTreeNodeWidgets:function(){var p=this._getAllTreeNodeDoms();return d.map(p,w.hitch(this,function(v){return m.byNode(v)}))},isLeafItem:function(p){return p&&p.isLeaf},_getAllTreeNodeDoms:function(){return a(".dijitTreeNode",this.domNode)},_createTreeNode:function(p){p.isLeaf=this.isLeafItem(p.item);
this.multiple||(p.groupId=this.uniqueId);return new r(p)},_onTreeNodeSelect:function(p){this.emit("item-select",{item:p.item,treeNode:p})},_onTreeNodeUnselect:function(p){this.emit("item-unselect",{item:p.item,treeNode:p})},selectNodeWidget:function(p){this.multiple||this.unselectAllLeafNodeWidgets();p.select()},_jimuBeforeClick:function(p,v,q){v.isLeaf&&(f.hasClass(q.target||q.srcElement,"jimu-tree-check-node")||(this.multiple?v.toggleSelect():this.selectNodeWidget(v)));return arguments},_onCheckNodeClick:function(p,
v,q){!this.multiple&&v&&this.unselectAllLeafNodeWidgets();c.stop(q);this.focusNode(p);setTimeout(w.hitch(this,function(){v?this.selectNodeWidget(p):p.unselect();this.onClick(p.item,p,q)}),0)},unselectAllLeafNodeWidgets:function(){var p=this.getAllLeafTreeNodeWidgets();d.forEach(p,w.hitch(this,function(v){v.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v,q,k,z,B,H,J,N,C,L,F,K,t,u,E,G,M){function P(I){return l.delegate(I.promise||I,{addCallback:function(O){this.then(O)},addErrback:function(O){this.otherwise(O)}})}var Q=A("dijit._TreeNode",[J,N,C,L,F],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(I){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=I;this._set("label",I);e("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:t,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(I){var O=Math.max(I,0)*this.tree._nodePixelIndent+"px";b.set(this.domNode,
"backgroundPosition",O+" 0px");b.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",O);y.forEach(this.getChildren(),function(R){R.set("indent",I+1)});this._set("indent",I)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(I){var O=this.tree,R=O.model;O._v10Compat&&I===R.root&&(I=null);this._applyClassAndStyle(I,"icon","Icon");this._applyClassAndStyle(I,"label","Label");this._applyClassAndStyle(I,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(I,O,R){var T="_"+O+"Class";O+="Node";var W=this[T];this[T]=this.tree["get"+R+"Class"](I,this.isExpanded);c.replace(this[O],this[T]||"",W||"");b.set(this[O],this.tree["get"+R+"Style"](I,this.isExpanded)||{})},_updateLayout:function(){var I=this.getParent();I=!I||!I.rowNode||"none"==I.rowNode.style.display;c.toggle(this.domNode,"dijitTreeIsRoot",I);c.toggle(this.domNode,"dijitTreeIsLast",!I&&!this.getNextSibling())},_setExpando:function(I){var O=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];I=I?0:this.isExpandable?this.isExpanded?1:2:3;c.replace(this.expandoNode,O[I],O);this.expandoNodeText.innerHTML=["*","-","+","*"][I]},expand:function(){if(this._expandDeferred)return P(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");c.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var I=g.wipeIn({node:this.containerNode,duration:H.defaultDuration}),O=this._expandDeferred=new w(function(){I.stop()});D.after(I,"onEnd",function(){O.resolve(!0)},!0);I.play();return P(O)},collapse:function(){if(this._collapseDeferred)return P(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");c.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var I=g.wipeOut({node:this.containerNode,duration:H.defaultDuration}),O=this._collapseDeferred=new w(function(){I.stop()});D.after(I,"onEnd",
function(){O.resolve(!0)},!0);I.play();return P(O)},indent:0,setChildItems:function(I){var O=this.tree,R=O.model,T=[],W=O.focusedChild,na=this.getChildren();y.forEach(na,function(Z){C.prototype.removeChild.call(this,Z)},this);this.defer(function(){y.forEach(na,function(Z){if(!Z._destroyed&&!Z.getParent()){O.dndController.removeTreeNode(Z);(function ia(Y){var U=R.getIdentity(Y.item),V=O._itemNodesMap[U];1==V.length?delete O._itemNodesMap[U]:(U=y.indexOf(V,Y),-1!=U&&V.splice(U,1));y.forEach(Y.getChildren(),
ia)})(Z);if(O.persist){var ba=y.map(Z.getTreePath(),function(Y){return O.model.getIdentity(Y)}).join("/"),ka;for(ka in O._openedNodes)ka.substr(0,ba.length)==ba&&delete O._openedNodes[ka];O._saveExpandedNodes()}O.lastFocusedChild&&!d.isDescendant(O.lastFocusedChild.domNode,O.domNode)&&delete O.lastFocusedChild;W&&!d.isDescendant(W.domNode,O.domNode)&&O.focus();Z.destroyRecursive()}})});this.state="Loaded";I&&0<I.length?(this.isExpandable=!0,y.forEach(I,function(Z){var ba=R.getIdentity(Z),ka=O._itemNodesMap[ba];
if(ka)for(var la=0;la<ka.length;la++)if(ka[la]&&!ka[la].getParent()){var Y=ka[la];Y.set("indent",this.indent+1);break}Y||(Y=this.tree._createTreeNode({item:Z,tree:O,isExpandable:R.mayHaveChildren(Z),label:O.getLabel(Z),labelType:O.model&&O.model.labelType||"text",tooltip:O.getTooltip(Z),ownerDocument:O.ownerDocument,dir:O.dir,lang:O.lang,textDir:O.textDir,indent:this.indent+1}),ka?ka.push(Y):O._itemNodesMap[ba]=[Y]);this.addChild(Y);(this.tree.autoExpand||this.tree._state(Y))&&T.push(O._expandNode(Y))},
this),y.forEach(this.getChildren(),function(Z){Z._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);I=f(T);this.tree._startPaint(I);return P(I)},getTreePath:function(){for(var I=this,O=[];I&&I!==this.tree.rootNode;)O.unshift(I.item),I=I.getParent();O.unshift(this.tree.rootNode.item);return O},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(I){this.inherited(arguments);var O=this.getChildren();
0==O.length&&(this.isExpandable=!1,this.collapse());y.forEach(O,function(R){R._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(I){this.labelNode.setAttribute("aria-selected",I?"true":"false");c.toggle(this.rowNode,"dijitTreeRowSelected",I)},focus:function(){z.focus(this.focusNode)}});e("dojo-bidi")&&Q.extend({_setTextDirAttr:function(I){!I||this.textDir==I&&this._created||(this._set("textDir",I),this.applyTextDir(this.labelNode),y.forEach(this.getChildren(),
function(O){O.set("textDir",I)},this))}});var S=A("dijit.Tree",[J,K,N,F],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:u,persist:!1,autoExpand:!1,dndController:M,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(I,O){p.publish(this.id,l.mixin({tree:this,event:I},O||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new w;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var I=
this;this.own(r(this.containerNode,r.selector(".dijitTreeNode",v.enter),function(T){I._onNodeMouseEnter(B.byNode(this),T)}),r(this.containerNode,r.selector(".dijitTreeNode",v.leave),function(T){I._onNodeMouseLeave(B.byNode(this),T)}),r(this.containerNode,r.selector(".dijitTreeRow",k.press),function(T){I._onNodePress(B.getEnclosingWidget(this),T)}),r(this.containerNode,r.selector(".dijitTreeRow",k),function(T){I._onClick(B.getEnclosingWidget(this),T)}),r(this.containerNode,r.selector(".dijitTreeRow",
"dblclick"),function(T){I._onDblClick(B.getEnclosingWidget(this),T)}));this.model||this._store2model();this.own(D.after(this.model,"onChange",l.hitch(this,"_onItemChange"),!0),D.after(this.model,"onChildrenChange",l.hitch(this,"_onItemChildrenChange"),!0),D.after(this.model,"onDelete",l.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){l.isString(this.dndController)&&(this.dndController=l.getObject(this.dndController));for(var O={},R=0;R<this.dndParams.length;R++)this[this.dndParams[R]]&&
(O[this.dndParams[R]]=this[this.dndParams[R]]);this.dndController=new this.dndController(this,O)}this._load();this.onLoadDeferred=P(this.pendingCommandsPromise);this.onLoadDeferred.then(l.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;m.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var I={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(I.mayHaveChildren=
l.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(I.getChildren=l.hitch(this,function(O,R,T){this.getItemChildren(this._v10Compat&&O===this.model.root?null:O,R,T)}));this.model=new G(I);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(l.hitch(this,function(I){var O=this.rootNode=this.tree._createTreeNode({item:I,tree:this,isExpandable:!0,label:this.label||this.getLabel(I),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(O.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(O.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(O.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),O.labelNode.setAttribute("role","presentation"),O.labelNode.removeAttribute("aria-selected"),O.containerNode.setAttribute("role","tree"),O.containerNode.setAttribute("aria-expanded","true"),O.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(O.domNode);I=this.model.getIdentity(I);this._itemNodesMap[I]?this._itemNodesMap[I].push(O):this._itemNodesMap[I]=[O];O._updateLayout();
this._expandNode(O).then(l.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),l.hitch(this,function(I){console.error(this,": error loading root: ",I)}))},getNodesByItem:function(I){if(!I)return[];I=l.isString(I)?I:this.model.getIdentity(I);return[].concat(this._itemNodesMap[I])},_setSelectedItemAttr:function(I){this.set("selectedItems",[I])},_setSelectedItemsAttr:function(I){var O=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(l.hitch(this,function(){var R=y.map(I,function(W){return!W||l.isString(W)?W:O.model.getIdentity(W)}),T=[];y.forEach(R,function(W){T=T.concat(O._itemNodesMap[W]||[])});this.set("selectedNodes",T)}))},_setPathAttr:function(I){return I.length?P(this.set("paths",[I]).then(function(O){return O[0]})):P(this.set("paths",[]).then(function(O){return O[0]}))},_setPathsAttr:function(I){function O(T,W){var na=T.shift(),Z=y.filter(W,function(ba){return ba.getIdentity()==na})[0];
if(Z)return T.length?R._expandNode(Z).then(function(){return O(T,Z.getChildren())}):Z;throw new S.PathError("Could not expand path at "+na);}var R=this;return P(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return f(y.map(I,function(T){T=y.map(T,function(W){return W&&l.isObject(W)?R.model.getIdentity(W):W});if(T.length)return O(T,[R.rootNode]);throw new S.PathError("Empty path");}))}).then(function(T){R.set("selectedNodes",T);return R.paths}))},_setSelectedNodeAttr:function(I){this.set("selectedNodes",
[I])},_setSelectedNodesAttr:function(I){this.dndController.setSelection(I)},expandAll:function(){function I(R){return O._expandNode(R).then(function(){var T=y.filter(R.getChildren()||[],function(W){return W.isExpandable});return f(y.map(T,I))})}var O=this;return P(I(this.rootNode))},collapseAll:function(){function I(R){var T=y.filter(R.getChildren()||[],function(W){return W.isExpandable});T=f(y.map(T,I));return!R.isExpanded||R==O.rootNode&&!O.showRoot?T:T.then(function(){return O._collapseNode(R)})}
var O=this;return P(I(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(I){return this.model.getLabel(I)},getIconClass:function(I,O){return!I||this.model.mayHaveChildren(I)?O?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(I,O){(I=this._getNext(O))&&I.isTreeNode&&this.focusNode(I)},
_onUpArrow:function(I,O){if(I=O.getPreviousSibling())for(O=I;O.isExpandable&&O.isExpanded&&O.hasChildren();)O=O.getChildren(),O=O[O.length-1];else if(I=O.getParent(),this.showRoot||I!==this.rootNode)O=I;O&&O.isTreeNode&&this.focusNode(O)},_onRightArrow:function(I,O){O.isExpandable&&!O.isExpanded?this._expandNode(O):O.hasChildren()&&(O=O.getChildren()[0])&&O.isTreeNode&&this.focusNode(O)},_onLeftArrow:function(I,O){O.isExpandable&&O.isExpanded?this._collapseNode(O):(I=O.getParent())&&I.isTreeNode&&
(this.showRoot||I!==this.rootNode)&&this.focusNode(I)},focusLastChild:function(){var I=this._getLast();I&&I.isTreeNode&&this.focusNode(I)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var I=this.rootNode;I.isExpanded;){var O=I.getChildren();if(!O.length)break;I=O[O.length-1]}return I},_getNext:function(I){if(I.isExpandable&&I.isExpanded&&I.hasChildren())return I.getChildren()[0];for(;I&&I.isTreeNode;){var O=I.getNextSibling();if(O)return O;
I=I.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(I,O){return d.isDescendant(I,O.expandoNode)||d.isDescendant(I,O.expandoNodeText)},_onNodePress:function(I,O){this.focusNode(I)},__click:function(I,O,R,T){var W=this.isExpandoNode(O.target,I);I.isExpandable&&(R||W)?this._onExpandoClick({node:I}):(this._publish("execute",{item:I.item,node:I,evt:O}),this[T](I.item,I,O),this.focusNode(I));O.stopPropagation();O.preventDefault()},_onClick:function(I,O){this.__click(I,O,this.openOnClick,
"onClick")},_onDblClick:function(I,O){this.__click(I,O,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(I){I=I.node;this.focusNode(I);I.isExpanded?this._collapseNode(I):this._expandNode(I)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(I){m.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(I)},_getRootOrFirstNode:function(){m.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(I){I._expandNodeDeferred&&delete I._expandNodeDeferred;if("Loading"!=I.state&&I.isExpanded){var O=I.collapse();this.onClose(I.item,I);this._state(I,!1);this._startPaint(O);return O}},_expandNode:function(I){if(I._expandNodeDeferred)return I._expandNodeDeferred;var O=this.model,R=I.item,T=this;I._loadDeferred||(I.markProcessing(),I._loadDeferred=new w,O.getChildren(R,function(W){I.unmarkProcessing();
I.setChildItems(W).then(function(){I._loadDeferred.resolve(W)})},function(W){console.error(T,": error loading "+I.label+" children: ",W);I._loadDeferred.reject(W)}));O=I._loadDeferred.then(l.hitch(this,function(){var W=I.expand();this.onOpen(I.item,I);this._state(I,!0);return W}));this._startPaint(O);return O},focusNode:function(I){for(var O=[],R=this.domNode;R&&R.tagName&&"IFRAME"!==R.tagName.toUpperCase();R=R.parentNode)O.push({domNode:R.contentWindow||R,scrollLeft:R.scrollLeft||0,scrollTop:R.scrollTop||
0});this.focusChild(I);this.defer(function(){for(var T=0,W=O.length;T<W;T++)O[T].domNode.scrollLeft=O[T].scrollLeft,O[T].domNode.scrollTop=O[T].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(I){var O=this.model.getIdentity(I);if(O=this._itemNodesMap[O]){var R=this.getLabel(I),T=this.getTooltip(I);y.forEach(O,function(W){W.set({item:I,label:R,tooltip:T});W._updateItemClasses(I)})}},_onItemChildrenChange:function(I,O){I=this.model.getIdentity(I);
(I=this._itemNodesMap[I])&&y.forEach(I,function(R){R.setChildItems(O)})},_onItemDelete:function(I){I=this.model.getIdentity(I);var O=this._itemNodesMap[I];O&&(y.forEach(O,function(R){this.dndController.removeTreeNode(R);var T=R.getParent();T&&T.removeChild(R);this.lastFocusedChild&&!d.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!d.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();R.destroyRecursive()},this),delete this._itemNodesMap[I])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var I=x(this.cookieName);I&&y.forEach(I.split(","),function(O){this._openedNodes[O]=!0},this)}},_state:function(I,O){if(!this.persist)return!1;var R=y.map(I.getTreePath(),function(T){return this.model.getIdentity(T)},this).join("/");if(1===arguments.length)return this._openedNodes[R];O?this._openedNodes[R]=!0:delete this._openedNodes[R];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var I=
[],O;for(O in this._openedNodes)I.push(O);x(this.cookieName,I.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!l.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(I){I&&a.setMarginBox(this.domNode,I);this._nodePixelIndent=a.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(l.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(I){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var O=l.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
q(I,O,O)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(I){return new Q(I)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});e("dojo-bidi")&&S.extend({_setTextDirAttr:function(I){I&&this.textDir!=I&&(this._set("textDir",
I),this.rootNode.set("textDir",I))}});S.PathError=h("TreePathError");S._TreeNode=Q;return S})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(y,D,x,A){return x("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(w){A.mixin(this,w);this.connects=[];w=this.store;if(!w.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
w.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([D.after(w,"onNew",A.hitch(this,"onNewItem"),!0),D.after(w,"onDelete",A.hitch(this,"onDeleteItem"),!0),D.after(w,"onSet",A.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var w;w=this.connects.pop();)w.remove()},getRoot:function(w,f){this.root?w(this.root):this.store.fetch({query:this.query,onComplete:A.hitch(this,function(d){if(1!=d.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+d.length+
" items, but must return exactly one");this.root=d[0];w(this.root)}),onError:f})},mayHaveChildren:function(w){return y.some(this.childrenAttrs,function(f){return this.store.hasAttribute(w,f)},this)},getChildren:function(w,f,d){var c=this.store;if(c.isItemLoaded(w)){for(var a=[],b=0;b<this.childrenAttrs.length;b++){var h=c.getValues(w,this.childrenAttrs[b]);a=a.concat(h)}var g=0;this.deferItemLoadingUntilExpand||y.forEach(a,function(m){c.isItemLoaded(m)||g++});0==g?f(a):y.forEach(a,function(m,n){c.isItemLoaded(m)||
c.loadItem({item:m,onItem:function(l){a[n]=l;0==--g&&f(a)},onError:d})})}else{var e=A.hitch(this,arguments.callee);c.loadItem({item:w,onItem:function(m){e(m,f,d)},onError:d})}},isItem:function(w){return this.store.isItem(w)},fetchItemByIdentity:function(w){this.store.fetchItemByIdentity(w)},getIdentity:function(w){return this.store.getIdentity(w)},getLabel:function(w){return this.labelAttr?this.store.getValue(w,this.labelAttr):this.store.getLabel(w)},newItem:function(w,f,d){var c={parent:f,attribute:this.childrenAttrs[0]},
a;this.newItemIdAttr&&w[this.newItemIdAttr]?this.fetchItemByIdentity({identity:w[this.newItemIdAttr],scope:this,onItem:function(b){b?this.pasteItem(b,null,f,!0,d):(a=this.store.newItem(w,c))&&void 0!=d&&this.pasteItem(a,f,f,!1,d)}}):(a=this.store.newItem(w,c))&&void 0!=d&&this.pasteItem(a,f,f,!1,d)},pasteItem:function(w,f,d,c,a){var b=this.store,h=this.childrenAttrs[0];f&&y.forEach(this.childrenAttrs,function(e){if(b.containsValue(f,e,w)){if(!c){var m=y.filter(b.getValues(f,e),function(n){return n!=
w});b.setValues(f,e,m)}h=e}});if(d)if("number"==typeof a){var g=b.getValues(d,h).slice();g.splice(a,0,w);b.setValues(d,h,g)}else b.setValues(d,h,b.getValues(d,h).concat(w))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(w,f){f&&this.getChildren(f.item,A.hitch(this,function(d){this.onChildrenChange(f.item,d)}))},onDeleteItem:function(w){this.onDelete(w)},onSetItem:function(w,f){if(-1!=y.indexOf(this.childrenAttrs,f))this.getChildren(w,A.hitch(this,function(d){this.onChildrenChange(w,
d)}));else this.onChange(w)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(y,D,x,A,w){return D("dijit.tree.ForestStoreModel",w,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(f){this.root={store:this,root:!0,id:f.rootId,label:f.rootLabel,children:f.rootChildren}},mayHaveChildren:function(f){return f===this.root||this.inherited(arguments)},getChildren:function(f,d,c){f===
this.root?this.root.children?d(this.root.children):this.store.fetch({query:this.query,onComplete:A.hitch(this,function(a){this.root.children=a;d(a)}),onError:c}):this.inherited(arguments)},isItem:function(f){return f===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(f){if(f.identity==this.root.id){var d=f.scope||x.global;f.onItem&&f.onItem.call(d,this.root)}else this.inherited(arguments)},getIdentity:function(f){return f===this.root?this.root.id:this.inherited(arguments)},getLabel:function(f){return f===
this.root?this.root.label:this.inherited(arguments)},newItem:function(f,d,c){return d===this.root?(this.onNewRootItem(f),this.store.newItem(f)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(f,d,c,a,b){if(d===this.root&&!a)this.onLeaveRoot(f);this.inherited(arguments,[f,d===this.root?null:d,c===this.root?null:c,a,b]);if(c===this.root)this.onAddToRoot(f)},onAddToRoot:function(f){console.log(this,": item ",f," added to root")},onLeaveRoot:function(f){console.log(this,": item ",
f," removed from root")},_requeryTop:function(){var f=this.root.children||[];this.store.fetch({query:this.query,onComplete:A.hitch(this,function(d){this.root.children=d;if(f.length!=d.length||y.some(f,function(c,a){return d[a]!=c}))this.onChildrenChange(this.root,d)})})},onNewItem:function(f,d){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(f){-1!=y.indexOf(this.root.children,f)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(f,d,c,a){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(y,D,x,A,w,f,d,c,a,b,h){return D("dijit.tree._dndSelector",h,{constructor:function(){this.selection={};this.anchor=null;this.events.push(c(this.tree.domNode,a.press,A.hitch(this,"onMouseDown")),c(this.tree.domNode,a.release,A.hitch(this,"onMouseUp")),c(this.tree.domNode,a.move,A.hitch(this,
"onMouseMove")),c(this.tree.domNode,b.press,A.hitch(this,"onClickPress")),c(this.tree.domNode,b.release,A.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var g=[],e=this.selection,m;for(m in e)g.push(e[m]);return g},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(g,e){this.setSelection(this.getSelectedTreeNodes().concat([g]));e&&(this.anchor=g);return g},removeTreeNode:function(g){var e=
y.filter(this.getSelectedTreeNodes(),function(m){return!f.isDescendant(m.domNode,g.domNode)});this.setSelection(e);return g},isTreeNodeSelected:function(g){return g.id&&!!this.selection[g.id]},setSelection:function(g){var e=this.getSelectedTreeNodes();y.forEach(this._setDifference(e,g),A.hitch(this,function(m){m.setSelected(!1);this.anchor==m&&delete this.anchor;delete this.selection[m.id]}));y.forEach(this._setDifference(g,e),A.hitch(this,function(m){m.setSelected(!0);this.selection[m.id]=m}));this._updateSelectionProperties()},
_setDifference:function(g,e){y.forEach(e,function(m){m.__exclude__=!0});g=y.filter(g,function(m){return!m.__exclude__});y.forEach(e,function(m){delete m.__exclude__});return g},_updateSelectionProperties:function(){var g=this.getSelectedTreeNodes(),e=[],m=[];y.forEach(g,function(n){var l=n.getTreePath();m.push(n);e.push(l)},this);g=y.map(m,function(n){return n.item});this.tree._set("paths",e);this.tree._set("path",e[0]||[]);this.tree._set("selectedNodes",m);this.tree._set("selectedNode",m[0]||null);
this.tree._set("selectedItems",g);this.tree._set("selectedItem",g[0]||null)},onClickPress:function(g){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(g.target,this.current))){"mousedown"==g.type&&d.isLeft(g)&&g.preventDefault();var e="keydown"==g.type?this.tree.focusedChild:this.current;if(e){var m=w.getCopyKeyState(g),n=e.id;this.singular||g.shiftKey||!this.selection[n]?(this._doDeselect=!1,this.userSelect(e,m,g.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(g){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==g.type?this.tree.focusedChild:this.current,w.getCopyKeyState(g),g.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(g,e){if(g===e)return 0;if("sourceIndex"in document.documentElement)return g.sourceIndex-e.sourceIndex;if("compareDocumentPosition"in document.documentElement)return g.compareDocumentPosition(e)&2?1:-1;if(document.createRange){var m=doc.createRange();m.setStartBefore(g);
g=doc.createRange();g.setStartBefore(e);return m.compareBoundaryPoints(m.END_TO_END,g)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(g,e,m){if(this.singular)this.anchor==g&&e?this.selectNone():(this.setSelection([g]),this.anchor=g);else if(m&&this.anchor){e=this._compareNodes(this.anchor.rowNode,g.rowNode);m=this.anchor;0>e?e=m:(e=g,g=m);for(m=[];e!=g;)m.push(e),e=this.tree._getNext(e);m.push(g);this.setSelection(m)}else this.selection[g.id]&&
e?this.removeTreeNode(g):e?this.addTreeNode(g,!0):(this.setSelection([g]),this.anchor=g)},getItem:function(g){return{data:this.selection[g],type:["treeNode"]}},forInSelectedItems:function(g,e){e=e||x.global;for(var m in this.selection)g.call(e,this.getItem(m),m,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(y,D,x,A,w,f){return D("dijit.tree._dndContainer",null,{constructor:function(d,c){this.tree=
d;this.node=d.domNode;A.mixin(this,c);this.containerState="";x.add(this.node,"dojoDndContainer");this.events=[w(this.node,f.enter,A.hitch(this,"onOverEvent")),w(this.node,f.leave,A.hitch(this,"onOutEvent")),y.after(this.tree,"_onNodeMouseEnter",A.hitch(this,"onMouseOver"),!0),y.after(this.tree,"_onNodeMouseLeave",A.hitch(this,"onMouseOut"),!0),w(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var d;d=this.events.pop();)d.remove();this.node=this.parent=
null},onMouseOver:function(d){this.current=d},onMouseOut:function(){this.current=null},_changeState:function(d,c){var a="dojoDnd"+d;d=d.toLowerCase()+"State";x.replace(this.node,a+c,a+this[d]);this[d]=c},_addItemClass:function(d,c){x.add(d,"dojoDndItem"+c)},_removeItemClass:function(d,c){x.remove(d,"dojoDndItem"+c)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g){return y([a,b,f],{templateString:h,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource;this.nls.customSelectLayer=this.label?this.label:this.nls.selectLayer},postCreate:function(){this.inherited(arguments);this.layerInfosObj=
g.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(A(this.layerChooser,"tree-click",D.hitch(this,this._onTreeClick)));this.own(A(this.layerChooser,"update",D.hitch(this,this._onLayerChooserUpdate)));this.own(A(document.body,"click",D.hitch(this,this._onBodyClicked)));this.own(A(document.body,"keydown",D.hitch(this,function(e){e.keyCode===w.ENTER&&this._onBodyClicked(e)})));
this.own(A(this.layerChooser.domNode,"keydown",D.hitch(this,function(e){e.keyCode===w.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(e){var m=new d;if(e){var n=this.layerInfosObj.getLayerOrTableInfoById(e.id);n?this.layerChooser.filter(n).then(D.hitch(this,function(l){l?(this._onSelectNewItem({layerInfo:n,
name:n.title,url:e.url}),m.resolve(!0)):m.resolve(!1)}),D.hitch(this,function(){m.resolve(!1)})):m.resolve(!1)}else this._onSelectNewItem(null),m.resolve(!0);return m},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(e){e=e.target||e.srcElement;e===this.domNode||x.isDescendant(e,this.domNode)||e===this.layerChooser.domNode||x.isDescendant(e,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(e){e.stopPropagation();
e.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(e){e.keyCode===w.ENTER&&this._onDropDownClick(e)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";c.open({parent:this,popup:this.layerChooser,around:this.domNode});var e=this.layerChooser.domNode.parentNode;e&&(x.addClass(e,"jimu-layer-chooser-from-map-withdropbox-popup"),
this.customClass&&x.addClass(e,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){c.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(e){var m=D.getObject("layerInfo.id",
!1,this._selectedItem)||-1,n=D.getObject("layerInfo.id",!1,e)||-1;m=m!==n;this._selectedItem=e;this.hideLayerChooser();e=D.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=e;x.setAttr(this.layerNameNode,"title",e);e=D.getObject("layerInfo.layerObject",!1,this._selectedItem);m&&this.emit("selection-change",[e])},_onTreeClick:function(){var e=this._getSelectedItems();this._onSelectNewItem(0<e.length?e[0]:null)}})})},"widgets/RelatedTableCharts/setting/ChartSetting":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/on dojo/Evented dojo/text!./ChartSetting.html jimu/dijit/TabContainer3 ./ChartThemeSelector ./FieldSelector jimu/dijit/ColorPicker dojo/dom-class dojo/query dojo/_base/Color dojo/_base/array esri/tasks/query esri/tasks/QueryTask dojo/dom-style jimu/dijit/Message ../ChartLayout dijit/popup dojox/charting/themes/GreySkies jimu/dijit/SimpleTable jimu/utils jimu/dijit/Popup dojo/_base/html jimu/dijit/CheckBox dojo/query dijit/form/DateTextBox dijit/form/TimeTextBox dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/CheckBox jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v,q,k,z,B,H,J,N,C,L,F,K,t){return f([y,D,x,a],{baseClass:"jimu-widget-RelatedTableCharts-setting",templateString:b,_widgets:[],_stringFieldType:"esriFieldTypeString",_oidFieldType:"esriFieldTypeOID",_numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],_lineChartValueFieldsType:["esriFieldTypeDate","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],
_chartColorType:{singleColor:"SingleColor",byThemeColor:"ColorByTheme",byFieldValue:"ColorByFieldValue"},_editor:null,_displayFieldsTable:null,selectedNode:null,fieldColorPicker:null,defaultColor:"#000000",tr:null,layerDetails:null,config:{},constructor:function(){this._widgets=[]},startup:function(){this.inherited(arguments)},postCreate:function(){this._createColorByFieldTable();this._initSelf();this._initChartDescInput()},destroy:function(){this.tr=null;delete this.tr;p.forEach(this._widgets,function(u){u.destroy()});
this._widgets=[];this.inherited(arguments)},getConfig:function(u){var E={sectionTitle:"",chartTitle:"",description:"",chartType:"",dataSeriesField:"",labelField:"",chartColor:{},labelXAxis:"",labelYAxis:""};if(u&&""===this.sectionTitleTextBox.get("value"))return this._errorMessage(this.nls.ChartSetting.errMsgSectionTitle,this.nls.chartSettingLabel),!1;E.sectionTitle=this.sectionTitleTextBox.get("value");E.chartTitle=this.chartTitleTextBox.get("value");E.description=this.chartDescriptionInput.value;
E.chartType=this._getChartType();if(u&&this.rdoColorByFieldValue.checked&&"esriCTEmptyOption"===this.colorByFieldValueDropdown.value)return this._errorMessage(this.nls.ChartSetting.errMsgFieldByValue,this.nls.chartSettingLabel),!1;E.chartColor=d.clone(this._getChartColorConfig());if("PolarChart"!==E.chartType){if("LineChart"===E.chartType){if(""===this.lineChartValueFieldsTextbox.get("value"))return n.contains(this.lineChartValueFieldsContainer,"esriCTValueFieldErrorMessage")||n.add(this.lineChartValueFieldsContainer,
"esriCTValueFieldErrorMessage"),this._errorMessage(this.nls.ChartSetting.errMsgDataSeriesField,this.nls.chartSettingLabel),!1;n.contains(this.lineChartValueFieldsContainer,"esriCTErrorMessage")&&n.remove(this.lineChartValueFieldsContainer,"esriCTErrorMessage");E.dataSeriesField=this._getValueFieldsByValue(this.lineChartValueFieldsTextbox.get("value"));E.labelField=this.lineSequenceSeriesFieldDropdown.get("value")}else E.dataSeriesField=this.dataSeriesFieldDropdown.get("value"),E.labelField=this.labelSeriesFieldDropdown.get("value");
E.labelXAxis=this.xAxisTextBox.get("value");E.labelYAxis=this.yAxisTextBox.get("value")}else{var G={},M,P=0;var Q=this._displayFieldsTable.getData();E.polarChartConfig={};for(M=0;M<Q.length;M++)u={},Q[M].isVisible&&(u.fieldName=Q[M].fieldName,u.alias=Q[M].alias,u.isVisible=Q[M].isVisible,G[Q[M].fieldName]=u,P++);if(3>P)return this._errorMessage(this.nls.ChartSetting.errMsgPolarFieldsRequired,this.nls.chartSettingLabel),!1;E.showPolygonFill=this.polarChartFillColor.getValue();E.polarChartConfig=G}return E},
setConfig:function(u){if(u){u.sectionTitle&&""!==u.sectionTitle?this.sectionTitleTextBox.set("value",u.sectionTitle):this.sectionTitleTextBox.set("value",this.layerDetails.polygonLayerInfo.title);u.chartTitle&&this.chartTitleTextBox.set("value",u.chartTitle);if(u.description){var E=u.description.replace(/&quot;/g,"");this.chartDescriptionInput.value=C.stripHTML(E)}u.chartType?this._setChartType(u.chartType):this._setChartType("BarChart");u.dataSeriesField&&("LineChart"===u.chartType?(E=this._setCofigDataSeriesValueForline(u.dataSeriesField),
this.lineChartValueFieldsTextbox.set("value",E),this._setColorByFieldValueOptions()):this.dataSeriesFieldDropdown.set("value",u.dataSeriesField));u.labelField&&("LineChart"===u.chartType?this.lineSequenceSeriesFieldDropdown.set("value",u.labelField):this.labelSeriesFieldDropdown.set("value",u.labelField));this.polarChartFillColor.setValue(u.showPolygonFill);u.labelXAxis&&this.xAxisTextBox.set("value",u.labelXAxis);u.labelYAxis&&this.yAxisTextBox.set("value",u.labelYAxis);setTimeout(d.hitch(this,function(){u.chartColor&&
this._setChartColorType(u.chartColor,u.chartType)}),100)}else this.sectionTitleTextBox.set("value",this.layerDetails.polygonLayerInfo.title)},_createColorByFieldTable:function(){this.colorByFieldTable=new N({fields:[{name:this.nls.ChartSetting.fieldColorColor,title:this.nls.ChartSetting.fieldColorColor,"class":"label",type:"empty",width:"60px"},{name:this.nls.ChartSetting.fieldColorLabel,title:this.nls.ChartSetting.fieldColorLabel,"class":"label",type:"empty"}]},this.colorByFieldTablePanel);this.colorByFieldTable.startup();
this.own(c(this.colorByFieldTable.domNode.childNodes[1],"scroll",d.hitch(this,function(){H.close(this.fieldColorPicker.tooltipDialog)})))},_errorMessage:function(u,E){(new z({message:u})).message=u;this.tab&&E&&this.tab.getSelectedTitle()!==E&&this.tab.selectTab(E)},_getChartType:function(){var u;this.rdoBarChart.get("checked")?u="BarChart":this.rdoPieChart.get("checked")?u="PieChart":this.rdoPolarChart.get("checked")?u="PolarChart":this.rdoLineChart.get("checked")&&(u="LineChart");return u},_setChartType:function(u){"BarChart"===
u?this.rdoBarChart.set("checked",!0):"PieChart"===u?this.rdoPieChart.set("checked",!0):"PolarChart"===u?this.rdoPolarChart.set("checked",!0):this.rdoLineChart.set("checked",!0)},_initSelf:function(){this.colorPicker.setColor(new r(this.defaultColor));this._initFieldSelectors();this._createRelatedLayerFieldOptions(this.dataSeriesFieldDropdown,!1,this._numberFieldTypes);this._createRelatedLayerFieldOptions(this.labelSeriesFieldDropdown,!0,null);this._createRelatedLayerFieldOptions(this.lineSequenceSeriesFieldDropdown,
!1,this._lineChartValueFieldsType);this._createFieldColorPicker();this.chartThemeSelector||(this.chartThemeSelector=this._createThemeSelector(this.themeSelectorDiv));c(this.colorPicker,"click",d.hitch(this,function(){this.rdoSingleColor.set("checked",!0)}));c(this.themeSelectorDiv,"click",d.hitch(this,function(){this.rdoColorByTheme.set("checked",!0)}));c(this.colorByFieldValueDropdown,"click",d.hitch(this,function(){this.rdoColorByFieldValue.set("checked",!0)}));this.own(c(this.lineChartFieldsSelectorNode,
"click",d.hitch(this,this._onFieldsSelectorClick)));this.layerDetails.polygonLayerInfo.supportsDistinct&&(n.remove(this.colorByFieldContainer,"esriCTHidden"),this._createColorByFieldSelector());this._createPolarChartFieldsGrid()},_createPolarChartFieldsGrid:function(){this._displayFieldsTable=new N({fields:[{name:"isVisible",title:this.nls.ChartSetting.visibilityText,type:"checkbox","class":"update",width:"100px"},{name:"fieldName",title:this.nls.ChartSetting.fieldNameText,type:"text",width:"230px"},
{name:"alias",title:this.nls.ChartSetting.aliasNameText,type:"text",editable:"true",width:"230px"}],selectable:!1});this._displayFieldsTable.placeAt(this.polarChartFieldInfos);this._displayFieldsTable.startup();this._createFieldsRows()},_createFieldsRows:function(){var u,E="",G="";var M=this.layerDetails.relatedLayerInfo.fields;var P=this.config&&this.config.polarChartConfig;for(u=0;u<M.length;u++)-1!==this._numberFieldTypes.indexOf(M[u].type)&&(P&&P.hasOwnProperty(M[u].name)?(E=P[M[u].name].isVisible,
G=P[M[u].name].alias):(E=M[u].isVisible,G=M[u].alias),this._displayFieldsTable.addRow({isVisible:""===E?!1:E,fieldName:M[u].name,alias:""===G?M[u].name:G}))},_createFieldColorPicker:function(){this.fieldColorPicker=new m;this.fieldColorPicker.startup();c(this.fieldColorPicker.tooltipDialog,"close",d.hitch(this,function(){var u=l(".jimu-state-active",this.colorByFieldTableContainer);0<u.length&&u.removeClass("jimu-state-active")}));c(this.fieldColorPicker,"change",d.hitch(this,function(){var u=this.fieldColorPicker.color.toHex();
var E=l(".jimu-state-active .fieldColorPicker",this.colorByFieldTableContainer);0<E.length?n.contains(this.selectedNode.parentElement.parentElement,"jimu-state-active")?p.forEach(E,d.hitch(this,function(G){k.set(G,"backgroundColor",u);A.set(G.parentElement.parentElement,"field_Color",u)})):(k.set(this.selectedNode,"backgroundColor",u),A.set(this.selectedNode.parentElement.parentElement,"field_Color",u)):(k.set(this.selectedNode,"backgroundColor",u),A.set(this.selectedNode.parentElement.parentElement,
"field_Color",u))}))},_onChartColorChanged:function(){this.rdoColorByFieldValue.get("checked")?("esriCTEmptyOption"!==this.colorByFieldValueDropdown.value&&n.remove(this.colorByFieldTableContainer,"esriCTHidden"),this.polarChartFillColor.setStatus(!0)):(this.rdoColorByTheme.get("checked")?(this.polarChartFillColor.check(),this.polarChartFillColor.setStatus(!1)):this.polarChartFillColor.setStatus(!0),n.add(this.colorByFieldTableContainer,"esriCTHidden"))},_setChartColorType:function(u){u&&u.colorType&&
(this.rdoSingleColor.set("checked",!1),u.colorType===this._chartColorType.singleColor?(this.rdoSingleColor.set("checked",!0),this.colorPicker.setColor(new r(u.colorInfo))):u.colorType===this._chartColorType.byThemeColor?(this.rdoColorByTheme.set("checked",!0),this.config.chartColor&&this.config.chartColor.colorType===this._chartColorType.byThemeColor&&this.chartThemeSelector&&setTimeout(d.hitch(this,function(){this.chartThemeSelector.selectTheme(u.colorInfo)}),500)):u.colorType===this._chartColorType.byFieldValue&&
(this.rdoColorByFieldValue.set("checked",!0),this.colorByFieldValueDropdown.set("value",u.colorInfo.layerField),n.remove(this.colorByFieldTableContainer,"esriCTHidden")))},_initTabs:function(){var u={title:this.nls.ChartSetting.settingTabTitle,content:this.settingsTabNode};var E={title:this.nls.ChartSetting.layoutTabTitle,content:this.layoutTabNode};this.tab=new h({tabs:[u,E]});this.tab.placeAt(this.tabDiv);this.own(c(this.tab,"tabChanged",d.hitch(this,function(G){G===E.title&&this._updatePreview()})))},
_updatePreview:function(){var u={chartConfig:this.getConfig(),isPreview:!0};u.chartConfig&&("esriCTEmptyOption"===u.chartConfig.labelField&&(u.chartConfig.labelField=" "),u.chartData=this._createStaticDataForLayout(u.chartConfig.chartType,u.chartConfig.labelField,u.chartConfig.dataSeriesField),u=new B({config:u,nls:this.nls}),u.startup(),new L({titleLabel:this.nls.ChartSetting.viewLayoutLabel,width:800,height:450,content:u}))},_createStaticDataForLayout:function(u,E,G){var M={chartSeries:[],chartLabels:[],
selectedTheme:J};switch(u){case "BarChart":M.chartSeries=[{y:65},{y:35},{y:40},{y:55},{y:50}];M.chartLabels=[{value:1,y:65,text:""},{value:2,y:35,text:""},{value:3,y:40,text:""},{value:4,y:55,text:""},{value:5,y:50,text:""}];M.fill="#7989a0";break;case "PieChart":M.chartSeries=[{y:65,text:"{"+G+" %}"},{y:35,text:"{"+E+"}"}];M.chartLabels=[{value:1,y:65},{value:2,y:35}];break;case "PolarChart":var P=this._displayFieldsTable.getData();M.chartSeries=[];for(E=0;5>E;E++){G={};var Q={};for(u=0;u<P.length;u++)P[u].isVisible&&
(G[P[u].alias]=20);Q[E]={data:G};M.chartSeries.push(Q)}break;case "LineChart":if(""!==this.lineChartValueFieldsTextbox.value&&void 0!==this.lineChartValueFieldsTextbox.value&&null!==this.lineChartValueFieldsTextbox.value){var S=11;var I=10;this.lineChartValueFieldsTextbox.value.split(",").forEach(function(O,R){var T;0!==R&&(S+=10);I+=10;M.chartSeries.push([]);for(T=0;10>T;T++){var W=Math.floor(Math.random()*(I-S+1))+S;M.chartSeries[R].push({y:W,tooltip:W+"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;",seriesName:O})}})}else M.chartSeries.push([{y:45,
tooltip:"45\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:43,tooltip:"43\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:15,tooltip:"15\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:26,tooltip:"26\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:38,tooltip:"38\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:10,tooltip:"10\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:47,tooltip:"47\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:19,tooltip:"19\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:47,tooltip:"47\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:23,tooltip:"23\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"}]),
M.chartSeries.push([{y:93,tooltip:"93\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:98,tooltip:"98\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:41,tooltip:"41\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:81,tooltip:"81\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:94,tooltip:"94\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:98,tooltip:"98\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:99,tooltip:"99\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:44,tooltip:"44\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:58,tooltip:"58\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},
{y:73,tooltip:"73\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"}]);M.chartLabels.push([{value:1,text:"1"},{value:2,text:"2"},{value:3,text:"3"},{value:4,text:"4"},{value:5,text:"5"},{value:6,text:"6"},{value:7,text:"7"},{value:8,text:"8"},{value:9,text:"9"},{value:10,text:"10"}])}return M},_initFieldSelectors:function(){this._createFieldSelector(this.titleFieldSelectorDiv,this.chartTitleTextBox,this.layerDetails.polygonLayerInfo.fields);this._createFieldSelector(this.descriptionFieldSelectorDiv,this.chartDescriptionInput,
this.layerDetails.polygonLayerInfo.fields);this._createFieldSelector(this.xAxisFieldSelectorDiv,this.xAxisTextBox,this.layerDetails.polygonLayerInfo.fields);this._createFieldSelector(this.yAxisFieldSelectorDiv,this.yAxisTextBox,this.layerDetails.polygonLayerInfo.fields)},_createFieldSelector:function(u,E,G){u=new e({fields:G,showOnlyNumericFields:!1,hideOnSelect:!0},w.create("div",{},u));u.onSelect=d.hitch(this,function(M){M=A.get(E,"value")+"{"+M.name+"}";E.set?E.set("value",M):A.set(E,"value",M)});
this._widgets.push(u);return u},_createThemeSelector:function(u){u=new g({nls:this.nls.ChartSetting},w.create("div",{},u));this._widgets.push(u);u.startup();return u},_onSectionTitleChanged:function(){this.emit("sectionTitleChanged",this.sectionTitleTextBox.get("value"))},showMainLoadingIndicator:function(){this.emit("showLoadingIndicator")},hideMainLoadingIndicator:function(){this.emit("hideLoadingIndicator")},_onChartTypeChanged:function(){this.rdoPolarChart.get("checked")?(n.add(this.labelSection,
"esriCTHidden"),n.add(this.axisSection,"esriCTHidden"),n.remove(this.polarChartSection,"esriCTHidden")):(n.remove(this.labelSection,"esriCTHidden"),n.add(this.polarChartSection,"esriCTHidden"),this.rdoPieChart.get("checked")?n.add(this.axisSection,"esriCTHidden"):n.remove(this.axisSection,"esriCTHidden"));this.rdoLineChart.get("checked")?(A.set(this.dataSeriesFieldLabel,"innerHTML",this.nls.ChartSetting.lineDataSeriesField),A.set(this.labelSeriesField,"innerHTML",this.nls.ChartSetting.lineLabelSeriesField),
A.set(this.dataSeriesFieldLabel,"title",this.nls.ChartSetting.lineDataSeriesField),A.set(this.labelSeriesField,"title",this.nls.ChartSetting.lineLabelSeriesField),n.add(this.dataSeriesFieldDropdownParentContainer,"esriCTHidden"),n.add(this.labelSeriesFieldDropdownContainer,"esriCTHidden"),n.remove(this.dataSeriesFieldPickerLineChart,"esriCTHidden"),n.remove(this.lineValueSeriesFieldDropdownContainer,"esriCTHidden"),this.lineChartValueFieldsTextbox.set("value",this.lineChartValueFieldsTextbox.value),
this._setColorByFieldValueOptions()):(A.set(this.dataSeriesFieldLabel,"innerHTML",this.nls.ChartSetting.dataSeriesField),A.set(this.labelSeriesField,"innerHTML",this.nls.ChartSetting.labelField),A.set(this.dataSeriesFieldLabel,"title",this.nls.ChartSetting.dataSeriesField),A.set(this.labelSeriesField,"title",this.nls.ChartSetting.labelField),n.add(this.dataSeriesFieldPickerLineChart,"esriCTHidden"),n.add(this.lineValueSeriesFieldDropdownContainer,"esriCTHidden"),n.remove(this.dataSeriesFieldDropdownParentContainer,
"esriCTHidden"),n.remove(this.labelSeriesFieldDropdownContainer,"esriCTHidden"),this._createRelatedLayerFieldOptions(this.colorByFieldValueDropdown,!0),n.add(this.colorByFieldTableContainer,"esriCTHidden"))},_createRelatedLayerFieldOptions:function(u,E,G){u.set("options",[]);if(u){var M={},P,Q;if((P=this.layerDetails.relatedLayerInfo.fields)&&0<P.length)for(E&&u.addOption({value:"esriCTEmptyOption",label:this.nls.ChartSetting.defaultFieldSelectLabel,selected:!0}),Q=0;Q<P.length;Q++)M=!0,G&&0>G.indexOf(P[Q].type)&&
(M=!1),M&&(M={value:P[Q].name,label:P[Q].name,alias:P[Q].alias,selected:!1,fieldType:P[Q].type},0!==Q||E||(M.selected=!0),u.addOption(M))}},_createColorByFieldSelector:function(){this._createRelatedLayerFieldOptions(this.colorByFieldValueDropdown,!0);c(this.colorByFieldValueDropdown,"change",d.hitch(this,function(u){this.showMainLoadingIndicator();"esriCTEmptyOption"===u?(this._removeTableRows(),n.add(this.colorByFieldTableContainer,"esriCTHidden"),this.hideMainLoadingIndicator()):this._getDistintValueForLayerField(u)}))},
_getDistintValueForLayerField:function(u){this._selectedUniqueValues=[];var E=new q(this.layerDetails.relatedLayerInfo.url);var G=new v;G.where="1\x3d1";G.returnDistinctValues=!0;G.returnGeometry=!1;G.outFields=[u];E.execute(G,d.hitch(this,function(M){p.forEach(M.features,d.hitch(this,function(P){this._selectedUniqueValues.push(P.attributes[u])}));0<this._selectedUniqueValues.length&&M.fields&&0<M.fields.length&&M.fields[0].type?(M=d.clone(M.fields[0]),1<this._selectedUniqueValues.length&&this._sortUniqueValueData(M.type),
this._createTableRows(M)):(this._errorMessage(this.nls.ChartSetting.errMsgFieldValuesNotFound,this.nls.chartSettingLabel),this.hideMainLoadingIndicator())}),d.hitch(this,function(){this._errorMessage(this.nls.ChartSetting.errMsgFieldValuesNotFound,this.nls.chartSettingLabel);this.hideMainLoadingIndicator()}))},_removeTableRows:function(){var u,E;if((u=this.colorByFieldTable.getRows())&&0<u.length)for(E=0;E<u.length;E++)this.colorByFieldTable.deleteRow(u[E])},_createTableRows:function(u){var E,G;this._removeTableRows();
n.remove(this.colorByFieldTableContainer,"esriCTHidden");p.forEach(this._selectedUniqueValues,d.hitch(this,function(M){var P=this.colorByFieldTable.addRow({});var Q=M;P.success&&P.tr&&("esriFieldTypeDate"===u.type&&(Q=this._getLocaleFormatedDate(M)),E=P.tr,G=l(".simple-table-cell",E),this._createColorPicker(E,M,G[0]),this._createLabelFields(Q,G[1]));E&&c(E,"click",d.hitch(this,function(S){this._toggleRowSelection(S.currentTarget)}))}));this.hideMainLoadingIndicator()},_toggleRowSelection:function(u){n.contains(u,
"jimu-state-active")?n.remove(u,"jimu-state-active"):n.add(u,"jimu-state-active")},_createLabelFields:function(u,E){w.create("label",{innerHTML:u,title:u},E)},_createColorPicker:function(u,E,G){G=w.create("div",{"class":"fieldColorPicker"},G);var M=this.config&&this.config.chartColor&&this.config.chartColor.colorInfo&&this.config.chartColor.colorInfo.layerFieldValues&&this.config.chartColor.colorInfo.layerFieldValues[E]?this.config.chartColor.colorInfo.layerFieldValues[E]:this.defaultColor;k.set(G,
"backgroundColor",M);A.set(u,"fieldVal",E);A.set(u,"field_Color",M);c(G,"click",d.hitch(this,function(P){P.stopPropagation();P.preventDefault();this.selectedNode=P.currentTarget;var Q=A.get(this.selectedNode.parentElement.parentElement,"field_Color");this.fieldColorPicker.setColor(new r(Q));this.fieldColorPicker.picker.setColor((new r(Q)).toHex(),!0);H.open({popup:this.fieldColorPicker.tooltipDialog,around:P.currentTarget})}))},_getColorByFieldValue:function(){var u,E={},G={};var M=this.colorByFieldTable.getRows();
for(u=0;u<M.length;u++)G[A.get(M[u],"fieldVal")]=A.get(M[u],"field_Color");E.layerFieldValues=G;E.layerField=this.colorByFieldValueDropdown.value;return E},_getChartColorConfig:function(){var u={};this.rdoSingleColor.checked?(u.colorType=this._chartColorType.singleColor,u.colorInfo=this.colorPicker.getColor().toHex()):this.rdoColorByTheme.checked?(u.colorType=this._chartColorType.byThemeColor,u.colorInfo=this.chartThemeSelector.selectedTheme):this.rdoColorByFieldValue.checked&&(u.colorType=this._chartColorType.byFieldValue,
u.colorInfo=this._getColorByFieldValue());return u},_sortUniqueValueData:function(u){"esriFieldTypeString"===u?this._selectedUniqueValues.sort():this._selectedUniqueValues.sort(d.hitch(this,function(E,G){return E-G}))},_getLocaleFormatedDate:function(u){return(new Date(u)).toLocaleDateString()},_initChartDescInput:function(){this.own(c(this.chartDescriptionInput,"keydown, change",d.hitch(this,function(){this.chartDescriptionInput.style.height="auto";this.chartDescriptionInput.style.height=this.chartDescriptionInput.scrollHeight+
"px"})))},_onFieldsSelectorClick:function(){var u=[];var E=F.create("div",{style:{maxHeight:"480px"}});var G=this.dataSeriesFieldDropdown.options;u=this.lineChartValueFieldsTextbox.value.split(",");this._fieldsCheckBox=[];p.forEach(G,d.hitch(this,function(M,P){var Q=new K({checked:-1!==u.indexOf(M.alias)?!0:!1,label:M.alias||M.name});F.addClass(Q.domNode,"esriCTSearchSourceFieldCheckbox");F.addClass(Q.labelNode,"jimu-ellipsis");F.setAttr(Q.domNode,{title:M.alias||M.name});0===P%3&&(window.isRTL?F.setStyle(Q.domNode,
"marginRight",0):F.setStyle(Q.domNode,"marginLeft",0));Q.placeAt(E);t(Q.domNode).data("fieldName",M.alias);this._fieldsCheckBox.push(Q)}));this.fieldsPopup=new L({titleLabel:this.nls.ChartSetting.setValueFields,autoHeight:!0,content:E,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.ok,onClick:d.hitch(this,"_onValueFieldsOk")},{label:this.nls.cancel,classNames:["jimu-btn-vacation"]}],onClose:d.hitch(this,function(){this.fieldsPopup=null})});F.addClass(this.fieldsPopup.domNode,
this.baseClass)},_onValueFieldsOk:function(){var u=[];p.forEach(this._fieldsCheckBox,function(E){if(E.getValue()){var G=t(E.domNode).data("fieldName");u.push(G[0]);t(E.domNode).removeData()}});0!==u.length&&n.contains(this.lineChartValueFieldsContainer,"esriCTValueFieldErrorMessage")&&n.remove(this.lineChartValueFieldsContainer,"esriCTValueFieldErrorMessage");this._setLineChartValueFields(u);this.lineChartValueFieldsTextbox.set("value",this._getLineChartValueFieldAlias());this.fieldsPopup.close();
this._setColorByFieldValueOptions()},_setColorByFieldValueOptions:function(){var u=[];var E=[];E.push({value:"esriCTEmptyOption",label:this.nls.ChartSetting.defaultFieldSelectLabel});u=this._getValueFieldsByValue(this.lineChartValueFieldsTextbox.get("value"));var G=!1;""!==u&&(u=u.split(","),p.forEach(u,d.hitch(this,function(M){E.push({label:M,value:M})})),E.some(d.hitch(this,function(M){if(M.value===this.colorByFieldValueDropdown.value)return G=!0})));this.colorByFieldValueDropdown.set("options",
E);G?this.colorByFieldValueDropdown.setValue(this.colorByFieldValueDropdown.getValue()):this.colorByFieldValueDropdown.setValue(E[0].value)},_getLineChartValueFieldAlias:function(){var u;var E=this._getLineChartValueFields();if(!(E&&0<E.length))return"";if(this.layerDetails.relatedLayerInfo&&this.layerDetails.relatedLayerInfo.fields&&0<this.layerDetails.relatedLayerInfo.fields.length){var G=this.layerDetails.relatedLayerInfo.fields;var M=p.map(G,function(I){return I&&I.alias});var P=[];var Q=E.length;
for(u=0;u<Q;u++){var S=M.indexOf(E[u]);-1<S&&(G[S].alias?P.push(G[S].alias):P.push(G[S].name))}return P.join(",")}return E.join(",")},_setLineChartValueFields:function(u){this.lineChartValueFieldsTextbox.set("_fields",u)},_getLineChartValueFields:function(){return this.lineChartValueFieldsTextbox.get("_fields")},_getValueFieldsByValue:function(u){var E=[],G=[];E=u.split(",");p.forEach(this.layerDetails.relatedLayerInfo.fields,d.hitch(this,function(M){-1!==E.indexOf(M.alias)&&G.push(M.name)}));return G.join(",")},
_setCofigDataSeriesValueForline:function(u){var E=[],G=[];E=u.split(",");p.forEach(this.layerDetails.relatedLayerInfo.fields,d.hitch(this,function(M){-1!==E.indexOf(M.name)&&G.push(M.alias)}));return G.join(",")},closeColorPicker:function(){H.close(this.fieldColorPicker.tooltipDialog)}})})},"widgets/RelatedTableCharts/setting/ChartThemeSelector":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/text!./ChartThemeSelector.html dojo/_base/lang dojox/charting/Chart2D dojo/on dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/_base/array".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h){return y([D,x],{baseClass:"jimu-widget-RelatedTableCharts-setting",templateString:A,selectedTheme:null,themes:[],postCreate:function(){this._setThemes();this.themes&&0<this.themes.length&&(this.selectedTheme=w.clone(this.themes[0]),this._createThemeList(),this.own(d(document.body,"click",w.hitch(this,function(){"none"!==c.get(this.themeChooseNode,"display")&&this.hideChooseNode()}))))},destroy:function(){this.inherited(arguments)},_setThemes:function(){this.themes=
[{themeDisplayName:this.nls.ThemeSelector.themeAdobebricks,className:"dojox/charting/themes/Adobebricks",themeName:"Adobebricks"},{themeDisplayName:this.nls.ThemeSelector.themeAlgae,className:"dojox/charting/themes/Algae",themeName:"Algae"},{themeDisplayName:this.nls.ThemeSelector.themeBahamation,className:"dojox/charting/themes/Bahamation",themeName:"Bahamation"},{themeDisplayName:this.nls.ThemeSelector.themeBlueDusk,className:"dojox/charting/themes/BlueDusk",themeName:"BlueDusk"},{themeDisplayName:this.nls.ThemeSelector.themeCubanShirts,
className:"dojox/charting/themes/CubanShirts",themeName:"CubanShirts"},{themeDisplayName:this.nls.ThemeSelector.themeDesert,className:"dojox/charting/themes/Desert",themeName:"Desert"},{themeDisplayName:this.nls.ThemeSelector.themeDistinctive,className:"dojox/charting/themes/Distinctive",themeName:"Distinctive"},{themeDisplayName:this.nls.ThemeSelector.themeDollar,className:"dojox/charting/themes/Dollar",themeName:"Dollar"},{themeDisplayName:this.nls.ThemeSelector.themeGrasshopper,className:"dojox/charting/themes/Grasshopper",
themeName:"Grasshopper"},{themeDisplayName:this.nls.ThemeSelector.themeGrasslands,className:"dojox/charting/themes/Grasslands",themeName:"Grasslands"},{themeDisplayName:this.nls.ThemeSelector.themeGreySkies,className:"dojox/charting/themes/GreySkies",themeName:"GreySkies"},{themeDisplayName:this.nls.ThemeSelector.themeHarmony,className:"dojox/charting/themes/Harmony",themeName:"Harmony"},{themeDisplayName:this.nls.ThemeSelector.themeIndigoNation,className:"dojox/charting/themes/IndigoNation",themeName:"IndigoNation"},
{themeDisplayName:this.nls.ThemeSelector.themeIreland,className:"dojox/charting/themes/Ireland",themeName:"Ireland"},{themeDisplayName:this.nls.ThemeSelector.themeMiamiNice,className:"dojox/charting/themes/MiamiNice",themeName:"MiamiNice"},{themeDisplayName:this.nls.ThemeSelector.themeMinty,className:"dojox/charting/themes/Minty",themeName:"Minty"},{themeDisplayName:this.nls.ThemeSelector.themePurpleRain,className:"dojox/charting/themes/PurpleRain",themeName:"PurpleRain"},{themeDisplayName:this.nls.ThemeSelector.themeRoyalPurples,
className:"dojox/charting/themes/RoyalPurples",themeName:"RoyalPurples"},{themeDisplayName:this.nls.ThemeSelector.themeSageToLime,className:"dojox/charting/themes/SageToLime",themeName:"SageToLime"},{themeDisplayName:this.nls.ThemeSelector.themeTufte,className:"dojox/charting/themes/Tufte",themeName:"Tufte"},{themeDisplayName:this.nls.ThemeSelector.themeWatersEdge,className:"dojox/charting/themes/WatersEdge",themeName:"WatersEdge"},{themeDisplayName:this.nls.ThemeSelector.themeWetlandText,className:"dojox/charting/themes/Wetland",
themeName:"Wetland"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitblue,className:"dojox/charting/themes/PlotKit/blue",themeName:"PlotKit.blue"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitcyan,className:"dojox/charting/themes/PlotKit/cyan",themeName:"PlotKit.cyan"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitgreen,className:"dojox/charting/themes/PlotKit/green",themeName:"PlotKit.green"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitorange,className:"dojox/charting/themes/PlotKit/orange",
themeName:"PlotKit.orange"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitpurple,className:"dojox/charting/themes/PlotKit/purple",themeName:"PlotKit.purple"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitred,className:"dojox/charting/themes/PlotKit/red",themeName:"PlotKit.red"}]},_onDropDownClick:function(g){"none"===c.get(this.themeChooseNode,"display")?(this.showChooseNode(),g.preventDefault(),g.stopPropagation()):this.hideChooseNode()},showChooseNode:function(){c.set(this.themeChooseNode,
"display","")},hideChooseNode:function(){c.set(this.themeChooseNode,"display","none")},_createThemeList:function(){var g=[];h.forEach(this.themes,function(e){g.push(e.className)});require(g,w.hitch(this,function(){h.forEach(this.themes,w.hitch(this,function(e){var m=b.create("div",{"class":"esriCTThemeItem",title:e.themeDisplayName},this.themeList);a.set(m,"themeDisplayName",e.themeDisplayName);a.set(m,"themeClass",e.className);a.set(m,"themeName",e.themeName);d(m,"click",w.hitch(this,function(){var r=
{themeDisplayName:a.get(m,"themeDisplayName"),className:a.get(m,"themeClass"),themeName:a.get(m,"themeName")};this.selectTheme(r)}));var n=b.create("div",{"class":"esriCTThemeChart"},m);var l=b.create("div",{"class":"esriCTThemeName"},m);n=b.create("div",{},n);b.create("div",{className:"title",innerHTML:e.themeDisplayName},l);this._createChart(e.themeName,n)}));this.selectTheme(this.selectedTheme)}))},_createChart:function(g,e){e=b.create("div",{className:"chart"},e);e=new f(e);e.setTheme(w.getObject("dojox.charting.themes."+
g));e.addPlot("default",{type:"Pie",radius:11,labels:!1,radGrad:"vml"===dojox.gfx.renderer?"fan":"native"});e.addSeries("Series A",[.35,.25,.42,.53,.69]);e.render()},selectTheme:function(g){this.selectedThemeChart&&b.empty(this.selectedThemeChart);this.selectedTheme={themeDisplayName:g.themeDisplayName||g.themeName,className:g.className,themeName:g.themeName};this._createChart(g.themeName,this.selectedThemeChart);a.set(this.selectedThemeName,"innerHTML",this.selectedTheme.themeDisplayName);this.hideChooseNode();
this.onThemeSelect(this.selectedTheme)},onThemeSelect:function(g){}})})},"dojox/charting/Chart2D":function(){define("dojo/_base/kernel dojo/_base/lang .. ./Chart ./axis2d/Default ./axis2d/Invisible ./plot2d/Default ./plot2d/Lines ./plot2d/Areas ./plot2d/Markers ./plot2d/MarkersOnly ./plot2d/Scatter ./plot2d/Stacked ./plot2d/StackedLines ./plot2d/StackedAreas ./plot2d/Columns ./plot2d/StackedColumns ./plot2d/ClusteredColumns ./plot2d/Bars ./plot2d/StackedBars ./plot2d/ClusteredBars ./plot2d/Grid ./plot2d/Pie ./plot2d/Bubble ./plot2d/Candlesticks ./plot2d/OHLC ./plot2d/Spider".split(" "),
function(y,D,x,A){y.deprecated("dojox.charting.Chart2D","Use dojox.charting.Chart instead and require all other components explicitly","2.0");return D.setObject("dojox.charting.Chart2D",A)})},"dojox/charting/Chart":function(){define("../main dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom dojo/dom-geometry dojo/dom-construct dojo/_base/Color dojo/sniff ./Element ./SimpleTheme ./Series ./axis2d/common ./plot2d/common dojox/gfx/shape dojox/gfx dojo/has!dojo-bidi?./bidi/Chart dojox/lang/functional dojox/lang/functional/fold dojox/lang/functional/reversed".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v){function q(F){return F.clear()}function k(F){return F.destroy()}function z(F){return F.dirty=!1}function B(F){return F.dirty=!0}function H(F){return F.name}function J(F,K){F&&K&&(F.min=Math.min(F.min,K.min),F.max=Math.max(F.max,K.max));return F||K}function N(F,K){var t={},u={};x.forEach(F,function(E){var G=t[E.name]=E.getSeriesStats();E.hAxis&&(u[E.hAxis]=J(u[E.hAxis],{min:G.hmin,max:G.hmax}));E.vAxis&&(u[E.vAxis]=J(u[E.vAxis],{min:G.vmin,max:G.vmax}))});
x.forEach(F,function(E){var G=t[E.name];if(E.hAxis){var M=u[E.hAxis];G.hmin=M.min;G.hmax=M.max}E.vAxis&&(M=u[E.vAxis],G.vmin=M.min,G.vmax=M.max);E.initializeScalers(K,G)})}var C=D.getObject("charting",!0,y),L={l:10,t:10,r:10,b:10};y=A(b("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(F,K){K||(K={});this.margins=K.margins||L;this._customMargins=!!K.margins;this.stroke=K.stroke;this.fill=K.fill;this.delayInMs=K.delayInMs||200;this.title=K.title;this.titleGap=
K.titleGap;this.titlePos=K.titlePos;this.titleFont=K.titleFont;this.titleFontColor=K.titleFontColor;this.titleAlign=K.titleAlign;this.chartTitle=null;this.htmlLabels=!0;"htmlLabels"in K&&(this.htmlLabels=K.htmlLabels);this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=f.byId(F);F=d.getMarginBox(F);this.surface=r.createSurface(this.node,F.w||400,F.h||300);-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},destroy:function(){x.forEach(this.series,
k);x.forEach(this.stack,k);v.forIn(this.axes,k);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&c.destroy(this.chartTitle)},getCoords:function(){var F=this.node,K=w.getComputedStyle(F);K=d.getMarginBox(F,K);F=d.position(F,!0);K.x=F.x;K.y=F.y;return K},setTheme:function(F){this.theme=F.clone();this._customMargins||(this.margins=this.theme.chart.margins||L);this.dirty=!0;return this},addAxis:function(F,K){var t=K&&K.type||"Default";if("string"==typeof t){if(!C.axis2d||!C.axis2d[t])throw Error("Can't find axis: "+
t+" - Check require() dependencies.");K=new C.axis2d[t](this,K)}else K=new t(this,K);K.name=F;K.dirty=!0;F in this.axes&&this.axes[F].destroy();this.axes[F]=K;this.dirty=!0;return this},getAxis:function(F){return this.axes[F]},removeAxis:function(F){F in this.axes&&(this.axes[F].destroy(),delete this.axes[F],this.dirty=!0);return this},addPlot:function(F,K){var t=K&&K.type||"Default";if("string"==typeof t){if(!C.plot2d||!C.plot2d[t])throw Error("Can't find plot: "+t+" - didn't you forget to dojo.require() it?");
K=new C.plot2d[t](this,K)}else K=new t(this,K);K.name=F;K.dirty=!0;F in this.plots?(this.stack[this.plots[F]].destroy(),this.stack[this.plots[F]]=K):(this.plots[F]=this.stack.length,this.stack.push(K));this.dirty=!0;return this},getPlot:function(F){return this.stack[this.plots[F]]},removePlot:function(F){if(F in this.plots){var K=this.plots[F];delete this.plots[F];this.stack[K].destroy();this.stack.splice(K,1);v.forIn(this.plots,function(u,E,G){u>K&&(G[E]=u-1)});var t=x.filter(this.series,function(u){return u.plot!=
F});t.length<this.series.length&&(x.forEach(this.series,function(u){u.plot==F&&u.destroy()}),this.runs={},x.forEach(t,function(u,E){this.runs[u.plot]=E},this),this.series=t);this.dirty=!0}return this},getPlotOrder:function(){return v.map(this.stack,H)},setPlotOrder:function(F){var K={},t=v.filter(F,function(u){if(!(u in this.plots)||u in K)return!1;K[u]=1;return!0},this);t.length<this.stack.length&&v.forEach(this.stack,function(u){u=u.name;u in K||t.push(u)});F=v.map(t,function(u){return this.stack[this.plots[u]]},
this);v.forEach(F,function(u,E){this.plots[u.name]=E},this);this.stack=F;this.dirty=!0;return this},movePlotToFront:function(F){if(F in this.plots){var K=this.plots[F];if(K){var t=this.getPlotOrder();t.splice(K,1);t.unshift(F);return this.setPlotOrder(t)}}return this},movePlotToBack:function(F){if(F in this.plots){var K=this.plots[F];if(K<this.stack.length-1){var t=this.getPlotOrder();t.splice(K,1);t.push(F);return this.setPlotOrder(t)}}return this},addSeries:function(F,K,t){K=new e(this,K,t);K.name=
F;F in this.runs?(this.series[this.runs[F]].destroy(),this.series[this.runs[F]]=K):(this.runs[F]=this.series.length,this.series.push(K));this.dirty=!0;!("ymin"in K)&&"min"in K&&(K.ymin=K.min);!("ymax"in K)&&"max"in K&&(K.ymax=K.max);return this},getSeries:function(F){return this.series[this.runs[F]]},removeSeries:function(F){if(F in this.runs){var K=this.runs[F];delete this.runs[F];this.series[K].destroy();this.series.splice(K,1);v.forIn(this.runs,function(t,u,E){t>K&&(E[u]=t-1)});this.dirty=!0}return this},
updateSeries:function(F,K,t){F in this.runs&&(F=this.series[this.runs[F]],F.update(K),t?this.dirty=!0:(this._invalidateDependentPlots(F.plot,!1),this._invalidateDependentPlots(F.plot,!0)));return this},getSeriesOrder:function(F){return v.map(v.filter(this.series,function(K){return K.plot==F}),H)},setSeriesOrder:function(F){var K,t={},u=v.filter(F,function(E){if(!(E in this.runs)||E in t)return!1;var G=this.series[this.runs[E]];if(K){if(G.plot!=K)return!1}else K=G.plot;t[E]=1;return!0},this);v.forEach(this.series,
function(E){var G=E.name;G in t||E.plot!=K||u.push(G)});this.series=v.map(u,function(E){return this.series[this.runs[E]]},this).concat(v.filter(this.series,function(E){return E.plot!=K}));v.forEach(this.series,function(E,G){this.runs[E.name]=G},this);this.dirty=!0;return this},moveSeriesToFront:function(F){if(F in this.runs){var K=this.runs[F],t=this.getSeriesOrder(this.series[K].plot);if(F!=t[0])return t.splice(K,1),t.unshift(F),this.setSeriesOrder(t)}return this},moveSeriesToBack:function(F){if(F in
this.runs){var K=this.runs[F],t=this.getSeriesOrder(this.series[K].plot);if(F!=t[t.length-1])return t.splice(K,1),t.push(F),this.setSeriesOrder(t)}return this},resize:function(F,K){switch(arguments.length){case 1:d.setMarginBox(this.node,F);break;case 2:d.setMarginBox(this.node,{w:F,h:K})}var t=d.getMarginBox(this.node),u=this.surface.getDimensions();return u.width!=t.w||u.height!=t.h?(this.surface.setDimensions(t.w,t.h),this.dirty=!0,this.render()):this},getGeometry:function(){var F={};v.forIn(this.axes,
function(K){K.initialized()&&(F[K.name]={name:K.name,vertical:K.vertical,scaler:K.scaler,ticks:K.ticks})});return F},setAxisWindow:function(F,K,t,u){var E=this.axes[F];E&&(E.setWindow(K,t),x.forEach(this.stack,function(G){if(G.hAxis==F||G.vAxis==F)G.zoom=u}));return this},setWindow:function(F,K,t,u,E){"plotArea"in this||this.calculateGeometry();v.forIn(this.axes,function(G){var M=G.getScaler().bounds;var P=M.span/(M.upper-M.lower);G.vertical?(M=K,P=u/P/M):(M=F,P=t/P/M);G.setWindow(M,P)});x.forEach(this.stack,
function(G){G.zoom=E});return this},zoomIn:function(F,K,t){var u=this.axes[F];if(u){u=u.getScaler().bounds;var E=Math.min(K[0],K[1]),G=Math.max(K[0],K[1]);E=K[0]<u.lower?u.lower:E;G=K[1]>u.upper?u.upper:G;this.setAxisWindow(F,(u.upper-u.lower)/(G-E),E-u.lower);t?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var F=x.filter(this.stack,function(K){return K.dirty||K.hAxis&&this.axes[K.hAxis].dirty||K.vAxis&&this.axes[K.vAxis].dirty},this);N(F,
this.plotArea);return this},fullGeometry:function(){this._makeDirty();x.forEach(this.stack,q);this.theme||this.setTheme(new g);x.forEach(this.series,function(E){if(!(E.plot in this.plots)){if(!C.plot2d||!C.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var G=new C.plot2d.Default(this,{});G.name=E.plot;this.plots[E.plot]=this.stack.length;this.stack.push(G)}this.stack[this.plots[E.plot]].addSeries(E)},this);x.forEach(this.stack,function(E){E.assignAxes&&
E.assignAxes(this.axes)},this);var F=this.dim=this.surface.getDimensions();F.width=r.normalizedLength(F.width);F.height=r.normalizedLength(F.height);v.forIn(this.axes,q);N(this.stack,F);var K=this.offsets={l:0,r:0,t:0,b:0},t=this;v.forIn(this.axes,function(E){b("dojo-bidi")&&t._resetLeftBottom(E);v.forIn(E.getOffsets(),function(G,M){K[M]=Math.max(G,K[M])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||
"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";this.titleAlign=this.titleAlign||this.theme&&this.theme.chart&&this.theme.chart.titleAlign||"middle";var u=r.normalizedLength(r.splitFontString(this.titleFont).size);K["top"==this.titlePos?"t":"b"]+=u+this.titleGap}v.forIn(this.margins,function(E,G){K[G]+=E});this.plotArea={width:F.width-K.l-K.r,height:F.height-K.t-K.b};v.forIn(this.axes,q);N(this.stack,
this.plotArea);return this},render:function(){this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null);this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();v.forEachRev(this.stack,function(F){F.render(this.dim,this.offsets)},this);v.forIn(this.axes,function(F){F.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();var F=this.offsets,K=this.dim,t=Math.max(0,
K.width-F.l-F.r),u=Math.max(0,K.height-F.t-F.b);x.forEach(this.series,n.purgeGroup);v.forIn(this.axes,n.purgeGroup);x.forEach(this.stack,n.purgeGroup);var E=this.surface.children;if(l.dispose)for(var G=0;G<E.length;++G)l.dispose(E[G]);this.chartTitle&&this.chartTitle.tagName&&c.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;this._renderChartBackground(K,F);this._renderPlotBackground(K,F,t,u);v.foldr(this.stack,function(M,P){return P.render(K,F),0},0);this._nativeClip||this._renderChartBackground(K,
F);this.title&&this._renderTitle(K,F);v.forIn(this.axes,function(M){M.render(K,F)});this._makeClean();return this},_renderTitle:function(F,K){var t="canvas"==r.renderer&&this.htmlLabels||!b("ie")&&!b("opera")&&this.htmlLabels?"html":"gfx",u=r.normalizedLength(r.splitFontString(this.titleFont).size),E=r._base._getTextBox(this.title,{font:this.titleFont}),G=this.titleAlign,M=b("dojo-bidi")&&this.isRightToLeft(),P=F.width/2;"edge"===G?(G="left",P=M?F.width-(K.r+E.w):K.l):"middle"!=G&&(M&&(G="left"===
G?"right":"left"),"left"===G?P=this.margins.l:"right"===G&&(G="left",P=F.width-(this.margins.l+E.w)));this.chartTitle=m.createText[t](this,this.surface,P,"top"==this.titlePos?u+this.margins.t:F.height-this.margins.b,G,this.title,this.titleFont,this.titleFontColor)},_renderChartBackground:function(F,K){var t=this.theme,u=void 0!==this.fill?this.fill:t.chart&&t.chart.fill;t=void 0!==this.stroke?this.stroke:t.chart&&t.chart.stroke;if("inherit"==u){var E=this.node;for(u=new a(w.get(E,"backgroundColor"));0==
u.a&&E!=document.documentElement;)u=new a(w.get(E,"backgroundColor")),E=E.parentNode}u&&(this._nativeClip?(u=h.prototype._shapeFill(h.prototype._plotFill(u,F),{x:0,y:0,width:F.width+1,height:F.height+1}),this.surface.createRect({width:F.width+1,height:F.height+1}).setFill(u)):(u=h.prototype._plotFill(u,F,K),K.l&&(E={x:0,y:0,width:K.l,height:F.height+1},this.surface.createRect(E).setFill(h.prototype._shapeFill(u,E))),K.r&&(E={x:F.width-K.r,y:0,width:K.r+1,height:F.height+2},this.surface.createRect(E).setFill(h.prototype._shapeFill(u,
E))),K.t&&(E={x:0,y:0,width:F.width+1,height:K.t},this.surface.createRect(E).setFill(h.prototype._shapeFill(u,E))),K.b&&(E={x:0,y:F.height-K.b,width:F.width+1,height:K.b+2},this.surface.createRect(E).setFill(h.prototype._shapeFill(u,E)))));t&&this.surface.createRect({width:F.width-1,height:F.height-1}).setStroke(t)},_renderPlotBackground:function(F,K,t,u){var E=this.theme,G=E.plotarea&&E.plotarea.fill;E=E.plotarea&&E.plotarea.stroke;var M={x:K.l-1,y:K.t-1,width:t+2,height:u+2};G&&(G=h.prototype._shapeFill(h.prototype._plotFill(G,
F,K),M),this.surface.createRect(M).setFill(G));E&&this.surface.createRect({x:K.l,y:K.t,width:t+1,height:u+1}).setStroke(E)},delayedRender:function(){this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(D.hitch(this,function(){this.render()}),this.delayInMs));return this},connectToPlot:function(F,K,t){return F in this.plots?this.stack[this.plots[F]].connect(K,t):null},fireEvent:function(F,K,t){if(F in this.runs){var u=this.series[this.runs[F]].plot;u in this.plots&&(u=this.stack[this.plots[u]])&&
u.fireEvent(F,K,t)}return this},_makeClean:function(){x.forEach(this.axes,z);x.forEach(this.stack,z);x.forEach(this.series,z);this.dirty=!1},_makeDirty:function(){x.forEach(this.axes,B);x.forEach(this.stack,B);x.forEach(this.series,B);this.dirty=!0},_invalidateDependentPlots:function(F,K){if(F in this.plots){var t=this.stack[this.plots[F]],u=K?"vAxis":"hAxis";t[u]?(F=this.axes[t[u]])&&F.dependOnData()&&(F.dirty=!0,x.forEach(this.stack,function(E){E[u]&&E[u]==t[u]&&(E.dirty=!0)})):t.dirty=!0}},setDir:function(F){return this},
_resetLeftBottom:function(F){},formatTruncatedLabel:function(F,K,t){}});return b("dojo-bidi")?A("dojox.charting.Chart",[y,p]):y})},"dojox/charting/Element":function(){define(["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(y,D,x,A,w){return x("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,renderingOptions:null,constructor:function(f,d){this.chart=f;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol=
"...";this._events=[];d&&d.renderingOptions&&(this.renderingOptions=d.renderingOptions)},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.getGroup().removeShape();var f=this.getGroup().children;if(w.dispose)for(var d=0;d<f.length;++d)w.dispose(f[d],!0);this.getGroup().rawNode&&D.empty(this.getGroup().rawNode);this.getGroup().clear();w.dispose&&w.dispose(this.getGroup(),!0);this.getGroup()!=this.group&&(this.group.rawNode&&D.empty(this.group.rawNode),this.group.clear(),w.dispose&&
w.dispose(this.group,!0));this.group=null}this.dirty=!0;this._events.length&&(y.forEach(this._events,function(c){c.shape.disconnect(c.handle)}),this._events=[]);return this},cleanGroup:function(f){this.destroyHtmlElements();f||(f=this.chart.surface);if(this.group){f=this.getGroup().children;if(w.dispose)for(var d=0;d<f.length;++d)w.dispose(f[d],!0);if(this.getGroup().rawNode){var c=this.getGroup().bgNode;D.empty(this.getGroup().rawNode)}this.getGroup().clear();c&&this.getGroup().rawNode.appendChild(c)}else if(this.group=
f.createGroup(),this.renderingOptions&&this.group.rawNode&&"http://www.w3.org/2000/svg"==this.group.rawNode.namespaceURI)for(d in this.renderingOptions)this.group.rawNode.setAttribute(d,this.renderingOptions[d]);this.dirty=!0;return this},getGroup:function(){return this.group},destroyHtmlElements:function(){this.htmlElements.length&&(y.forEach(this.htmlElements,D.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},overrideShape:function(f,d){},getTextWidth:function(f,d){return A._base._getTextBox(f,
{font:d}).w||0},getTextWithLimitLength:function(f,d,c,a){if(!f||0>=f.length)return{text:"",truncated:a||!1};if(!c||0>=c)return{text:f,truncated:a||!1};var b=f.substring(0,1)+this.trailingSymbol,h=this.getTextWidth(b,d);if(c<=h)return{text:b,truncated:!0};if(this.getTextWidth(f,d)<=c)return{text:f,truncated:a||!1};a=0;for(b=f.length;a<b;){if(2>=b-a){for(;this.getTextWidth(f.substring(0,a)+this.trailingSymbol,d)>c;)--a;return{text:f.substring(0,a)+this.trailingSymbol,truncated:!0}}h=a+Math.round(.618*
(b-a));this.getTextWidth(f.substring(0,h),d)<c?a=h:b=h}},getTextWithLimitCharCount:function(f,d,c,a){return!f||0>=f.length?{text:"",truncated:a||!1}:!c||0>=c||f.length<=c?{text:f,truncated:a||!1}:{text:f.substring(0,c)+this.trailingSymbol,truncated:!0}},_plotFill:function(f,d,c){if(!f||!f.type||!f.space)return f;var a=f.space;switch(f.type){case "linear":if("plot"===a||"shapeX"===a||"shapeY"===a){f=A.makeParameters(A.defaultLinearGradient,f);f.space=a;if("plot"===a||"shapeX"===a){var b=d.height-c.t-
c.b;f.y1=c.t+b*f.y1/100;f.y2=c.t+b*f.y2/100}if("plot"===a||"shapeY"===a)b=d.width-c.l-c.r,f.x1=c.l+b*f.x1/100,f.x2=c.l+b*f.x2/100}break;case "radial":"plot"===a&&(f=A.makeParameters(A.defaultRadialGradient,f),f.space=a,a=d.width-c.l-c.r,d=d.height-c.t-c.b,f.cx=c.l+a*f.cx/100,f.cy=c.t+d*f.cy/100,f.r=f.r*Math.sqrt(a*a+d*d)/200);break;case "pattern":if("plot"===a||"shapeX"===a||"shapeY"===a){f=A.makeParameters(A.defaultPattern,f);f.space=a;if("plot"===a||"shapeX"===a)b=d.height-c.t-c.b,f.y=c.t+b*f.y/
100,f.height=b*f.height/100;if("plot"===a||"shapeY"===a)b=d.width-c.l-c.r,f.x=c.l+b*f.x/100,f.width=b*f.width/100}}return f},_shapeFill:function(f,d){if(!f||!f.space)return f;var c=f.space;switch(f.type){case "linear":if("shape"===c||"shapeX"===c||"shapeY"===c){f=A.makeParameters(A.defaultLinearGradient,f);f.space=c;if("shape"===c||"shapeX"===c){var a=d.width;f.x1=d.x+a*f.x1/100;f.x2=d.x+a*f.x2/100}if("shape"===c||"shapeY"===c)a=d.height,f.y1=d.y+a*f.y1/100,f.y2=d.y+a*f.y2/100}break;case "radial":"shape"===
c&&(f=A.makeParameters(A.defaultRadialGradient,f),f.space=c,f.cx=d.x+d.width/2,f.cy=d.y+d.height/2,f.r=f.r*d.width/200);break;case "pattern":if("shape"===c||"shapeX"===c||"shapeY"===c){f=A.makeParameters(A.defaultPattern,f);f.space=c;if("shape"===c||"shapeX"===c)a=d.width,f.x=d.x+a*f.x/100,f.width=a*f.width/100;if("shape"===c||"shapeY"===c)a=d.height,f.y=d.y+a*f.y/100,f.height=a*f.height/100}}return f},_pseudoRadialFill:function(f,d,c,a,b){if(!f||"radial"!==f.type||"shape"!==f.space)return f;var h=
f.space;f=A.makeParameters(A.defaultRadialGradient,f);f.space=h;if(4>arguments.length)return f.cx=d.x,f.cy=d.y,f.r=f.r*c/100,f;h=5>arguments.length?a:(b+a)/2;return{type:"linear",x1:d.x,y1:d.y,x2:d.x+f.r*c*Math.cos(h)/100,y2:d.y+f.r*c*Math.sin(h)/100,colors:f.colors}}})})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(y,D,x,A,w,f,d,c,a,b){function h(e,
m){for(var n=e.length-1;m<n;)e[m]=e[++m];e.length=n}var g=y.shape={};g.Shape=x("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(w("gfxRegistry")){var e=g.register(this);this.getUID=function(){return e}}},destroy:function(){w("gfxRegistry")&&g.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},
getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var e=this.getBoundingBox();if(!e)return null;var m=this._getRealMatrix();return[b.multiplyPoint(m,e.x,e.y),b.multiplyPoint(m,e.x+e.width,e.y),b.multiplyPoint(m,e.x+e.width,e.y+e.height),b.multiplyPoint(m,e.x,
e.y+e.height)]},getEventSource:function(){return this.rawNode},setClip:function(e){this.clip=e},getClip:function(){return this.clip},setShape:function(e){this.shape=y.makeParameters(this.shape,e);this.bbox=null;return this},setFill:function(e){if(!e)return this.fillStyle=null,this;var m=null;if("object"==typeof e&&"type"in e)switch(e.type){case "linear":m=y.makeParameters(y.defaultLinearGradient,e);break;case "radial":m=y.makeParameters(y.defaultRadialGradient,e);break;case "pattern":m=y.makeParameters(y.defaultPattern,
e)}else m=y.normalizeColor(e);this.fillStyle=m;return this},setStroke:function(e){if(!e)return this.strokeStyle=null,this;if("string"==typeof e||D.isArray(e)||e instanceof a)e={color:e};e=this.strokeStyle=y.makeParameters(y.defaultStroke,e);e.color=y.normalizeColor(e.color);return this},setTransform:function(e){this.matrix=b.clone(e?b.normalize(e):b.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var e=this.getParent();e&&(e._moveChildToFront(this),
this._moveToFront());return this},moveToBack:function(){var e=this.getParent();e&&(e._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(e){return e?this.setTransform([this.matrix,e]):this},applyLeftTransform:function(e){return e?this.setTransform([e,this.matrix]):this},applyTransform:function(e){return e?this.setTransform([this.matrix,e]):this},removeShape:function(e){this.parent&&this.parent.remove(this,e);return this},
_setParent:function(e,m){this.parent=e;return this._updateParentMatrix(m)},_updateParentMatrix:function(e){this.parentMatrix=e?b.clone(e):null;return this._applyTransform()},_getRealMatrix:function(){for(var e=this.matrix,m=this.parent;m;)m.matrix&&(e=b.multiply(m.matrix,e)),m=m.parent;return e}});g._eventsProcessing={on:function(e,m){return f(this.getEventSource(),e,g.fixCallback(this,y.fixTarget,m))},connect:function(e,m,n){"on"==e.substring(0,2)&&(e=e.substring(2));return this.on(e,n?D.hitch(m,
n):m)},disconnect:function(e){return e.remove()}};g.fixCallback=function(e,m,n,l){l||(l=n,n=null);if(D.isString(l)){n=n||A.global;if(!n[l])throw['dojox.gfx.shape.fixCallback: scope["',l,'"] is null (scope\x3d"',n,'")'].join("");return function(r){return m(r,e)?n[l].apply(n,arguments||[]):void 0}}return n?function(r){return m(r,e)?l.apply(n,arguments||[]):void 0}:function(r){return m(r,e)?l.apply(n,arguments):void 0}};D.extend(g.Shape,g._eventsProcessing);g.Container={_init:function(){this.children=
[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(e){var m=e.getParent();m&&m.remove(e,!0);this.children.push(e);return e._setParent(this,this._getRealMatrix())},remove:function(e,m){for(var n=0;n<this.children.length;++n)if(this.children[n]==e){m||(e.parent=null,e.parentMatrix=null);h(this.children,n);break}return this},clear:function(e){for(var m,n=0;n<this.children.length;++n)m=this.children[n],m.parent=null,m.parentMatrix=null,e&&m.destroy();this.children=
[];return this},getBoundingBox:function(){if(this.children){var e=null;d.forEach(this.children,function(m){var n=m.getBoundingBox();n&&((m=m.getTransform())&&(n=b.multiplyRectangle(m,n)),e?(e.x=Math.min(e.x,n.x),e.y=Math.min(e.y,n.y),e.endX=Math.max(e.endX,n.x+n.width),e.endY=Math.max(e.endY,n.y+n.height)):e={x:n.x,y:n.y,endX:n.x+n.width,endY:n.y+n.height})});e&&(e.width=e.endX-e.x,e.height=e.endY-e.y);return e}return null},_moveChildToFront:function(e){for(var m=0;m<this.children.length;++m)if(this.children[m]==
e){h(this.children,m);this.children.push(e);break}return this},_moveChildToBack:function(e){for(var m=0;m<this.children.length;++m)if(this.children[m]==e){h(this.children,m);this.children.unshift(e);break}return this}};g.Surface=x("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){d.forEach(this._nodes,c.destroy);this._nodes=[];d.forEach(this._events,function(e){e&&e.remove()});this._events=[];this.rawNode=null;
if(w("ie"))for(;this._parent.lastChild;)c.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(e){},whenLoaded:function(e,m){var n=D.hitch(e,m);if(this.isLoaded)n(this);else f.once(this,"load",function(l){n(l)})}});D.extend(g.Surface,g._eventsProcessing);g.Rect=x("dojox.gfx.shape.Rect",g.Shape,{constructor:function(e){this.shape=y.getDefault("Rect");this.rawNode=
e},getBoundingBox:function(){return this.shape}});g.Ellipse=x("dojox.gfx.shape.Ellipse",g.Shape,{constructor:function(e){this.shape=y.getDefault("Ellipse");this.rawNode=e},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:e.cx-e.rx,y:e.cy-e.ry,width:2*e.rx,height:2*e.ry}}return this.bbox}});g.Circle=x("dojox.gfx.shape.Circle",g.Shape,{constructor:function(e){this.shape=y.getDefault("Circle");this.rawNode=e},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:e.cx-
e.r,y:e.cy-e.r,width:2*e.r,height:2*e.r}}return this.bbox}});g.Line=x("dojox.gfx.shape.Line",g.Shape,{constructor:function(e){this.shape=y.getDefault("Line");this.rawNode=e},getBoundingBox:function(){if(!this.bbox){var e=this.shape;this.bbox={x:Math.min(e.x1,e.x2),y:Math.min(e.y1,e.y2),width:Math.abs(e.x2-e.x1),height:Math.abs(e.y2-e.y1)}}return this.bbox}});g.Polyline=x("dojox.gfx.shape.Polyline",g.Shape,{constructor:function(e){this.shape=y.getDefault("Polyline");this.rawNode=e},setShape:function(e,
m){e&&e instanceof Array?(this.inherited(arguments,[{points:e}]),m&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[e]);return this},_normalizePoints:function(){var e=this.shape.points,m=e&&e.length;if(m&&"number"==typeof e[0]){for(var n=[],l=0;l<m;l+=2)n.push({x:e[l],y:e[l+1]});this.shape.points=n}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var e=this.shape.points,m=e.length,n=e[0],l=n.x,r=n.y,p=n.x,v=n.y,q=1;q<m;++q)n=
e[q],l>n.x&&(l=n.x),p<n.x&&(p=n.x),r>n.y&&(r=n.y),v<n.y&&(v=n.y);this.bbox={x:l,y:r,width:p-l,height:v-r}}return this.bbox}});g.Image=x("dojox.gfx.shape.Image",g.Shape,{constructor:function(e){this.shape=y.getDefault("Image");this.rawNode=e},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});g.Text=x(g.Shape,{constructor:function(e){this.fontStyle=null;this.shape=y.getDefault("Text");this.rawNode=e},getFont:function(){return this.fontStyle},
setFont:function(e){this.fontStyle="string"==typeof e?y.splitFontString(e):y.makeParameters(y.defaultFont,e);this._setFont();return this},getBoundingBox:function(){var e=null;this.getShape().text&&(e=y._base._computeTextBoundingBox(this));return e}});g.Creator={createShape:function(e){switch(e.type){case y.defaultPath.type:return this.createPath(e);case y.defaultRect.type:return this.createRect(e);case y.defaultCircle.type:return this.createCircle(e);case y.defaultEllipse.type:return this.createEllipse(e);
case y.defaultLine.type:return this.createLine(e);case y.defaultPolyline.type:return this.createPolyline(e);case y.defaultImage.type:return this.createImage(e);case y.defaultText.type:return this.createText(e);case y.defaultTextPath.type:return this.createTextPath(e)}return null},createGroup:function(){return this.createObject(y.Group)},createRect:function(e){return this.createObject(y.Rect,e)},createEllipse:function(e){return this.createObject(y.Ellipse,e)},createCircle:function(e){return this.createObject(y.Circle,
e)},createLine:function(e){return this.createObject(y.Line,e)},createPolyline:function(e){return this.createObject(y.Polyline,e)},createImage:function(e){return this.createObject(y.Image,e)},createText:function(e){return this.createObject(y.Text,e)},createPath:function(e){return this.createObject(y.Path,e)},createTextPath:function(e){return this.createObject(y.TextPath,{}).setText(e)},createObject:function(e,m){return null}};return g})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),
function(y,D,x,A,w,f){var d=x("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(c){c=c||{};var a=d.defaultTheme;D.forEach("chart plotarea axis grid series marker indicator".split(" "),function(b){this[b]=y.delegate(a[b],c[b])},this);c.seriesThemes&&c.seriesThemes.length?(this.colors=null,this.seriesThemes=c.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(c.colors||d.defaultColors).slice(0));this.markerThemes=null;c.markerThemes&&c.markerThemes.length&&
(this.markerThemes=c.markerThemes.slice(0));this.markers=c.markers?y.clone(c.markers):y.delegate(d.defaultMarkers);this.noGradConv=c.noGradConv;this.noRadialConv=c.noRadialConv;c.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var c=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,
markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv,pieInnerRadius:this.pieInnerRadius});D.forEach("clone clear next skip addMixin post getTick".split(" "),function(a){this.hasOwnProperty(a)&&(c[a]=this[a])},this);return c},clear:function(){this._current=0},next:function(c,a,b){var h=w.merge;if(this.colors){var g=y.delegate(this.series);h=y.delegate(this.marker);var e=new A(this.colors[this._current%this.colors.length]);if(g.stroke&&g.stroke.color){g.stroke=y.delegate(g.stroke);
var m=new A(g.stroke.color);g.stroke.color=new A(e);g.stroke.color.a=m.a}else g.stroke={color:e};h.stroke&&h.stroke.color?(h.stroke=y.delegate(h.stroke),m=new A(h.stroke.color),h.stroke.color=new A(e),h.stroke.color.a=m.a):h.stroke={color:e};!g.fill||g.fill.type?g.fill=e:(m=new A(g.fill),g.fill=new A(e),g.fill.a=m.a);!h.fill||h.fill.type?h.fill=e:(m=new A(h.fill),h.fill=new A(e),h.fill.a=m.a)}else g=this.seriesThemes?h(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,
h=this.markerThemes?h(this.marker,this.markerThemes[this._current%this.markerThemes.length]):g;g={series:g,marker:h,symbol:h&&h.symbol||this._markers[this._current%this._markers.length]};++this._current;a&&(g=this.addMixin(g,c,a));b&&(g=this.post(g,c));return g},skip:function(){++this._current},addMixin:function(c,a,b,h){if(y.isArray(b))D.forEach(b,function(e){c=this.addMixin(c,a,e)},this);else{var g={};"color"in b&&("line"==a||"area"==a?(y.setObject("series.stroke.color",b.color,g),y.setObject("marker.stroke.color",
b.color,g)):y.setObject("series.fill",b.color,g));D.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(e){var m="marker"+e.charAt(0).toUpperCase()+e.substr(1),n=m in b;e in b&&(y.setObject("series."+e,b[e],g),n||y.setObject("marker."+e,b[e],g));n&&y.setObject("marker."+e,b[m],g)});"marker"in b&&(g.symbol=b.marker,g.symbol=b.marker);c=w.merge(c,g)}h&&(c=this.post(c,a));return c},post:function(c,a){var b=c.series.fill,h;return!this.noGradConv&&this.shapeSpaces[b.space]&&
"linear"==b.type&&("bar"==a?h={x1:b.y1,y1:b.x1,x2:b.y2,y2:b.x2}:this.noRadialConv||"shape"!=b.space||"slice"!=a&&"circle"!=a||(h={type:"radial",cx:0,cy:0,r:100}),h)?w.merge(c,{series:{fill:h}}):c},getTick:function(c,a){var b=this.axis.tick;c+="Tick";var h=w.merge;b?this.axis[c]&&(b=h(b,this.axis[c])):b=this.axis[c];a&&(b?a[c]&&(b=h(b,a[c])):b=a[c]);return b},inspectObjects:function(c){D.forEach("chart plotarea axis grid series marker indicator".split(" "),function(a){c(this[a])},this);this.seriesThemes&&
D.forEach(this.seriesThemes,c);this.markerThemes&&D.forEach(this.markerThemes,c)},reverseFills:function(){this.inspectObjects(function(c){c&&c.fill&&(c.fill=f.reverse(c.fill))})},addMarker:function(c,a){this.markers[c]=a;this._buildMarkerArray()},setMarkers:function(c){this.markers=c;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var c in this.markers)this._markers.push(this.markers[c])}});y.mixin(d,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",
DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",
font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},
shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}});
return d})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(y,D){var x=D.getObject("lang.utils",!0,y),A={},w=Object.prototype.toString,f=function(d){if(d)switch(w.call(d)){case "[object Array]":return d.slice(0);case "[object Object]":return D.delegate(d)}return d};D.mixin(x,{coerceType:function(d,c){switch(typeof d){case "number":return Number(eval("("+c+")"));case "string":return String(c);case "boolean":return!!eval("("+c+")")}return eval("("+c+")")},updateWithObject:function(d,
c,a){if(!c)return d;for(var b in d)if(b in c&&!(b in A)){var h=d[b];h&&"object"==typeof h?x.updateWithObject(h,c[b],a):d[b]=a?x.coerceType(h,c[b]):f(c[b])}return d},updateWithPattern:function(d,c,a,b){if(!c||!a)return d;for(var h in a)h in c&&!(h in A)&&(d[h]=b?x.coerceType(a[h],c[h]):f(c[h]));return d},merge:function(d,c){if(c){var a=w.call(d),b=w.call(c);switch(b){case "[object Array]":if(b==a){a=Array(Math.max(d.length,c.length));var h=0;for(b=a.length;h<b;++h)a[h]=x.merge(d[h],c[h]);return a}return c.slice(0);
case "[object Object]":if(b==a&&d){a=D.delegate(d);for(h in c)if(h in d){b=d[h];var g=c[h];g!==b&&(a[h]=x.merge(b,g))}else a[h]=D.clone(c[h]);return a}return D.clone(c)}}return c}});return x})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(y,D,x,A){function w(f,d){if(0>=f)return d[0].color;var c=d.length;if(1<=f)return d[c-1].color;for(var a=0;a<c;++a){var b=d[a];if(b.offset>=f)return a?(d=d[a-1],A.blendColors(new A(d.color),new A(b.color),
(f-d.offset)/(b.offset-d.offset))):b.color}return d[c-1].color}y=y.gradutils={};y.getColor=function(f,d){if(f){switch(f.type){case "linear":var c=x.rotate(-Math.atan2(f.y2-f.y1,f.x2-f.x1));var a=x.project(f.x2-f.x1,f.y2-f.y1);d=x.multiplyPoint(a,d);var b=x.multiplyPoint(a,f.x1,f.y1);a=x.multiplyPoint(a,f.x2,f.y2);a=x.multiplyPoint(c,a.x-b.x,a.y-b.y).x;c=x.multiplyPoint(c,d.x-b.x,d.y-b.y).x/a;break;case "radial":c=d.x-f.cx,d=d.y-f.cy,c=Math.sqrt(c*c+d*d)/f.r}return w(c,f.colors)}return new A(f||[0,
0,0,0])};y.reverse=function(f){if(f)switch(f.type){case "linear":case "radial":if(f=D.delegate(f),f.colors){for(var d=f.colors,c=d.length,a=0,b,h=f.colors=Array(d.length);a<c;++a)b=d[a],h[a]={offset:1-b.offset,color:b.color};h.sort(function(g,e){return g.offset-e.offset})}}return f};return y})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(y,D,x){return D("dojox.charting.Series",x,{constructor:function(A,w,f){y.mixin(this,f);"string"!=typeof this.plot&&
(this.plot="default");this.update(w)},clear:function(){this.dyn={}},update:function(A){y.isArray(A)?this.data=A:(this.source=A,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx","dojo/has"],function(y,D,x,A,w){var f=y.getObject("dojox.charting.axis2d.common",!0),d=function(c){c.marginLeft="0px";c.marginTop=
"0px";c.marginRight="0px";c.marginBottom="0px";c.paddingLeft="0px";c.paddingTop="0px";c.paddingRight="0px";c.paddingBottom="0px";c.borderLeftWidth="0px";c.borderTopWidth="0px";c.borderRightWidth="0px";c.borderBottomWidth="0px"};return y.mixin(f,{createText:{gfx:function(c,a,b,h,g,e,m,n){return a.createText({x:b,y:h,text:e,align:g}).setFont(m).setFill(n)},html:function(c,a,b,h,g,e,m,n,l){a=D.doc.createElement("div");var r=a.style;c.getTextDir&&(a.dir=c.getTextDir(e));d(r);r.font=m;a.innerHTML=String(e).replace(/\s/g,
"\x26nbsp;");r.color=n;r.position="absolute";r.left="-10000px";D.body().appendChild(a);var p=A.normalizedLength(A.splitFontString(m).size);if(!l)if(a.getBoundingClientRect){var v=a.getBoundingClientRect();v=v.width||v.right-v.left}else v=x.getMarginBox(a).w;"rtl"==a.dir&&(b+=l?l:v);D.body().removeChild(a);r.position="relative";if(l)switch(r.width=l+"px",g){case "middle":r.textAlign="center";r.left=b-l/2+"px";break;case "end":r.textAlign="right";r.left=b-l+"px";break;default:r.left=b+"px",r.textAlign=
"left"}else switch(g){case "middle":r.left=Math.floor(b-v/2)+"px";break;case "end":r.left=Math.floor(b-v)+"px";break;default:r.left=Math.floor(b)+"px"}r.top=Math.floor(h-p)+"px";r.whiteSpace="nowrap";l=D.doc.createElement("div");r=l.style;d(r);r.width="0px";r.height="0px";l.appendChild(a);c.node.insertBefore(l,c.node.firstChild);w("dojo-bidi")&&c.htmlElementsRegistry.push([l,b,h,g,e,m,n]);return l}}})})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Color dojox/gfx dojox/lang/functional ../scaler/common".split(" "),
function(y,D,x,A,w,f){var d=y.getObject("dojox.charting.plot2d.common",!0);return y.mixin(d,{doIfLoaded:f.doIfLoaded,makeStroke:function(c){if(!c)return c;if("string"==typeof c||c instanceof x)c={color:c};return A.makeParameters(A.defaultStroke,c)},augmentColor:function(c,a){c=new x(c);a=new x(a);a.a=c.a;return a},augmentStroke:function(c,a){if(c=d.makeStroke(c))c.color=d.augmentColor(c.color,a);return c},augmentFill:function(c,a){new x(a);return"string"==typeof c||c instanceof x?d.augmentColor(c,
a):c},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(c,a){for(var b=y.delegate(d.defaultStats),h=0;h<c.length;++h)for(var g=c[h],e=0;e<g.data.length;e++)if(!a(g.data[e])){if("number"==typeof g.data[e]){e=b.vmin;var m=b.vmax;D.forEach(g.data,function(r,p){a(r)||(p+=1,isNaN(r)&&(r=0),b.hmin=Math.min(b.hmin,p),b.hmax=Math.max(b.hmax,p),b.vmin=Math.min(b.vmin,r),b.vmax=Math.max(b.vmax,r))})}else{var n=
b.hmin,l=b.hmax;e=b.vmin;m=b.vmax;"xmin"in g&&"xmax"in g&&"ymin"in g&&"ymax"in g||D.forEach(g.data,function(r,p){a(r)||(p="x"in r?r.x:p+1,r=r.y,isNaN(p)&&(p=0),isNaN(r)&&(r=0),b.hmin=Math.min(b.hmin,p),b.hmax=Math.max(b.hmax,p),b.vmin=Math.min(b.vmin,r),b.vmax=Math.max(b.vmax,r))});"xmin"in g&&(b.hmin=Math.min(n,g.xmin));"xmax"in g&&(b.hmax=Math.max(l,g.xmax))}"ymin"in g&&(b.vmin=Math.min(e,g.ymin));"ymax"in g&&(b.vmax=Math.max(m,g.ymax));break}return b},calculateBarSize:function(c,a,b){b||(b=1);
var h=(c-2*a.gap)/b;"minBarSize"in a&&(h=Math.max(h,a.minBarSize));"maxBarSize"in a&&(h=Math.min(h,a.maxBarSize));h=Math.max(h,1);return{size:h,gap:(c-h*b)/2}},collectStackedStats:function(c){var a=y.clone(d.defaultStats);if(c.length){a.hmin=Math.min(a.hmin,1);a.hmax=w.foldl(c,"seed, run -\x3e Math.max(seed, run.data.length)",a.hmax);for(var b=0;b<a.hmax;++b){var h=c[0].data[b];h=h&&("number"==typeof h?h:h.y);isNaN(h)&&(h=0);a.vmin=Math.min(a.vmin,h);for(var g=1;g<c.length;++g){var e=c[g].data[b];
e=e&&("number"==typeof e?e:e.y);isNaN(e)&&(e=0);h+=e}a.vmax=Math.max(a.vmax,h)}}return a},curve:function(c,a){var b=c.slice(0);"x"==a&&(b[b.length]=b[0]);return D.map(b,function(h,g){if(0==g)return"M"+h.x+","+h.y;if(!isNaN(a)){var e=h.x-b[g-1].x;return"C"+(h.x-e/a*(a-1))+","+b[g-1].y+" "+(h.x-e/a)+","+h.y+" "+h.x+","+h.y}if("X"==a||"x"==a||"S"==a){h=b[g-1];e=b[g];var m=1/6;if(1==g){var n="x"==a?b[b.length-2]:h;m=1/3}else n=b[g-2];g==b.length-1?(g="x"==a?b[1]:e,m=1/3):g=b[g+1];var l=Math.sqrt((e.x-
h.x)*(e.x-h.x)+(e.y-h.y)*(e.y-h.y));var r=Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y));var p=Math.sqrt((g.x-h.x)*(g.x-h.x)+(g.y-h.y)*(g.y-h.y));var v=r*m,q=p*m;v>l/2&&q>l/2?(v=l/2,q=l/2):v>l/2?(v=l/2,q=l/2*p/r):q>l/2&&(q=l/2,v=l/2*r/p);"S"==a&&(n==h&&(v=0),e==g&&(q=0));m=h.x+v*(e.x-n.x)/r;n=h.y+v*(e.y-n.y)/r;r=e.x-q*(g.x-h.x)/p;p=e.y-q*(g.y-h.y)/p}return"C"+(m+","+n+" "+r+","+p+" "+e.x+","+e.y)}).join(" ")},getLabel:function(c,a,b){return f.doIfLoaded("dojo/number",function(h){return(a?h.format(c,
{places:b}):h.format(c))||""},function(){return a?c.toFixed(b):c.toString()})},purgeGroup:function(c){return c.purgeGroup()}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(y){return y})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang","dojo/_base/array"],function(y,D,x){var A=D.getObject("lang.functional",!0,y),w={},f=1<"ab".split(/a*/).length?String.prototype.split:function(a){var b=this.split.call(this,
a);(a=a.exec(this))&&0==a.index&&b.unshift("");return b},d=function(a){var b=[],h=f.call(a,/\s*->\s*/m);if(1<h.length)for(;h.length;)a=h.pop(),b=h.pop().split(/\s*,\s*|\s+/m),h.length&&h.push("(function("+b.join(", ")+"){ return ("+a+"); })");else if(a.match(/\b_\b/))b=["_"];else{h=a.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m);var g=a.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(h||g)h&&(b.push("$1"),a="$1"+a),g&&(b.push("$2"),a+="$2");else{h=a.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,
"").match(/([a-z_$][a-z_$\d]*)/gi)||[];var e={};x.forEach(h,function(m){e.hasOwnProperty(m)||(b.push(m),e[m]=1)})}}return{args:b,body:a}},c=function(a){return a.length?function(){var b=a.length-1,h=A.lambda(a[b]).apply(this,arguments);for(--b;0<=b;--b)h=A.lambda(a[b]).call(this,h);return h}:function(b){return b}};D.mixin(A,{rawLambda:function(a){return d(a)},buildLambda:function(a){a=d(a);return"function("+a.args.join(",")+"){return ("+a.body+");}"},lambda:function(a){if("function"==typeof a)return a;
if(a instanceof Array)return c(a);if(w.hasOwnProperty(a))return w[a];var b=d(a);return w[a]=new Function(b.args,"return ("+b.body+");")},clearLambdaCache:function(){w={}}});return A})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(y,D,x,A){var w={};D.mixin(A,{filter:function(f,d,c){"string"==typeof f&&(f=f.split(""));c=c||y.global;d=A.lambda(d);var a=[],b;if(D.isArray(f)){var h=0;for(b=f.length;h<b;++h){var g=f[h];d.call(c,
g,h,f)&&a.push(g)}}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(h=0;f.hasNext();)g=f.next(),d.call(c,g,h++,f)&&a.push(g);else for(h in f)h in w||(g=f[h],d.call(c,g,h,f)&&a.push(g));return a},forEach:function(f,d,c){"string"==typeof f&&(f=f.split(""));c=c||y.global;d=A.lambda(d);var a;if(D.isArray(f)){var b=0;for(a=f.length;b<a;d.call(c,f[b],b,f),++b);}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(b=0;f.hasNext();d.call(c,f.next(),b++,f));else for(b in f)b in
w||d.call(c,f[b],b,f);return c},map:function(f,d,c){"string"==typeof f&&(f=f.split(""));c=c||y.global;d=A.lambda(d);var a,b;if(D.isArray(f)){var h=Array(a=f.length);for(b=0;b<a;h[b]=d.call(c,f[b],b,f),++b);}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(h=[],b=0;f.hasNext();h.push(d.call(c,f.next(),b++,f)));else for(b in h=[],f)b in w||h.push(d.call(c,f[b],b,f));return h},every:function(f,d,c){"string"==typeof f&&(f=f.split(""));c=c||y.global;d=A.lambda(d);var a;if(D.isArray(f)){var b=
0;for(a=f.length;b<a;++b)if(!d.call(c,f[b],b,f))return!1}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(b=0;f.hasNext();){if(!d.call(c,f.next(),b++,f))return!1}else for(b in f)if(!(b in w||d.call(c,f[b],b,f)))return!1;return!0},some:function(f,d,c){"string"==typeof f&&(f=f.split(""));c=c||y.global;d=A.lambda(d);var a;if(D.isArray(f)){var b=0;for(a=f.length;b<a;++b)if(d.call(c,f[b],b,f))return!0}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(b=0;f.hasNext();){if(d.call(c,
f.next(),b++,f))return!0}else for(b in f)if(!(b in w)&&d.call(c,f[b],b,f))return!0;return!1}});return A})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(y,D,x){var A={};D.mixin(x,{keys:function(w){var f=[],d;for(d in w)d in A||f.push(d);return f},values:function(w){var f=[],d;for(d in w)d in A||f.push(w[d]);return f},filterIn:function(w,f,d){d=d||y.global;f=x.lambda(f);var c={},a;for(a in w)if(!(a in A)){var b=w[a];f.call(d,b,a,w)&&(c[a]=
b)}return c},forIn:function(w,f,d){d=d||y.global;f=x.lambda(f);for(var c in w)c in A||f.call(d,w[c],c,w);return d},mapIn:function(w,f,d){d=d||y.global;f=x.lambda(f);var c={},a;for(a in w)a in A||(c[a]=f.call(d,w[a],a,w));return c}});return x})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(y){var D=function(w,f){return Math.abs(w-f)<=1E-6*(Math.abs(w)+Math.abs(f))},x=y.getObject("dojox.charting.scaler.common",!0),A={};return y.mixin(x,{doIfLoaded:function(w,f,d){if(void 0===
A[w])try{A[w]=require(w)}catch(c){A[w]=null}return A[w]?f(A[w]):d()},getNumericLabel:function(w,f,d){var c="";x.doIfLoaded("dojo/number",function(e){c=(d.fixed?e.format(w,{places:0>f?-f:0}):e.format(w))||""},function(){c=d.fixed?w.toFixed(0>f?-f:0):w.toString()});if(d.labelFunc){var a=d.labelFunc(c,w,f);if(a)return a}if(d.labels){a=d.labels;for(var b=0,h=a.length;b<h;){var g=Math.floor((b+h)/2);a[g].value<w?b=g+1:h=g}if(b<a.length&&D(a[b].value,w))return a[b].text;--b;if(0<=b&&b<a.length&&D(a[b].value,
w))return a[b].text;b+=2;if(b<a.length&&D(a[b].value,w))return a[b].text}return c}})})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(y,D,x,A){var w={};y.mixin(A,{foldl:function(f,d,c,a){"string"==typeof f&&(f=f.split(""));a=a||x.global;d=A.lambda(d);var b;if(y.isArray(f)){var h=0;for(b=f.length;h<b;c=d.call(a,c,f[h],h,f),++h);}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(h=0;f.hasNext();c=d.call(a,
c,f.next(),h++,f));else for(h in f)h in w||(c=d.call(a,c,f[h],h,f));return c},foldl1:function(f,d,c){"string"==typeof f&&(f=f.split(""));c=c||x.global;d=A.lambda(d);var a;if(y.isArray(f)){var b=f[0];var h=1;for(a=f.length;h<a;b=d.call(c,b,f[h],h,f),++h);}else if("function"==typeof f.hasNext&&"function"==typeof f.next){if(f.hasNext())for(b=f.next(),h=1;f.hasNext();b=d.call(c,b,f.next(),h++,f));}else for(h in a=!0,f)h in w||(a?(b=f[h],a=!1):b=d.call(c,b,f[h],h,f));return b},foldr:function(f,d,c,a){"string"==
typeof f&&(f=f.split(""));a=a||x.global;d=A.lambda(d);for(var b=f.length;0<b;--b,c=d.call(a,c,f[b],b,f));return c},foldr1:function(f,d,c){"string"==typeof f&&(f=f.split(""));c=c||x.global;d=A.lambda(d);var a=f.length,b=f[a-1];for(--a;0<a;--a,b=d.call(c,b,f[a],a,f));return b},reduce:function(f,d,c){return 3>arguments.length?A.foldl1(f,d):A.foldl(f,d,c)},reduceRight:function(f,d,c){return 3>arguments.length?A.foldr1(f,d):A.foldr(f,d,c)},unfold:function(f,d,c,a,b){b=b||x.global;d=A.lambda(d);c=A.lambda(c);
f=A.lambda(f);for(var h=[];!f.call(b,a);h.push(d.call(b,a)),a=c.call(b,a));return h}})})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(y,D,x){y.mixin(x,{filterRev:function(A,w,f){"string"==typeof A&&(A=A.split(""));f=f||D.global;w=x.lambda(w);for(var d=[],c,a=A.length-1;0<=a;--a)c=A[a],w.call(f,c,a,A)&&d.push(c);return d},forEachRev:function(A,w,f){"string"==typeof A&&(A=A.split(""));f=f||D.global;w=x.lambda(w);for(var d=A.length-1;0<=
d;w.call(f,A[d],d,A),--d);},mapRev:function(A,w,f){"string"==typeof A&&(A=A.split(""));f=f||D.global;w=x.lambda(w);var d=A.length,c=Array(d);--d;for(var a=0;0<=d;c[a++]=w.call(f,A[d],d,A),--d);return c},everyRev:function(A,w,f){"string"==typeof A&&(A=A.split(""));f=f||D.global;w=x.lambda(w);for(var d=A.length-1;0<=d;--d)if(!w.call(f,A[d],d,A))return!1;return!0},someRev:function(A,w,f){"string"==typeof A&&(A=A.split(""));f=f||D.global;w=x.lambda(w);for(var d=A.length-1;0<=d;--d)if(w.call(f,A[d],d,
A))return!0;return!1}});return x})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),function(y,D,x,A,w,f,d,c,a,b,h,g,e){d=A(x("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",d,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",
natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1,position:"leftOrBottom"},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",
titleOrientation:""},constructor:function(m,n){this.opt=y.clone(this.defaultParams);h.updateWithObject(this.opt,n);h.updateWithPattern(this.opt,n,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0;n&&"position"in n||(this.opt.position=this.opt.leftBottom?"leftOrBottom":"rightOrTop");this.renderingOptions={"shape-rendering":"crispEdges"}},setWindow:function(m,n){m!=this.scale&&(this._invalidMaxLabelSize=
!0);return this.inherited(arguments)},_groupLabelWidth:function(m,n,l){if(!m.length)return 0;50<m.length&&(m.length=50);y.isObject(m[0])&&(m=g.map(m,function(r){return r.text}));l&&(m=g.map(m,function(r){return 0==y.trim(r).length?"":r.substring(0,l)+this.trailingSymbol},this));m=m.join("\x3cbr\x3e");return b._base._getTextBox(m,{font:n}).w||0},_getMaxLabelSize:function(m,n,l,r,p,v){if(null==this._maxLabelSize&&6==arguments.length){var q=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;
var k=y.clone(q);delete k.to;delete k.from;var z=c.buildScaler(m,n,l,k,q.to-q.from);z.minMinorStep=0;this._majorStart=z.major.start;q=c.buildTicks(z,q);if(v&&q){var B=z=0,H=function(N){N.label&&this.push(N.label)},J=[];this.opt.majorLabels&&(D.forEach(q.major,H,J),z=this._groupLabelWidth(J,p,k.maxLabelCharCount),k.maxLabelSize&&(z=Math.min(k.maxLabelSize,z)));J=[];this.opt.dropLabels&&this.opt.minorLabels&&(D.forEach(q.minor,H,J),B=this._groupLabelWidth(J,p,k.maxLabelCharCount),k.maxLabelSize&&(B=
Math.min(k.maxLabelSize,B)));this._maxLabelSize={majLabelW:z,minLabelW:B,majLabelH:v,minLabelH:v}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(m,n,l){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||l!=this._oldSpan)&&Infinity!=m&&-Infinity!=n){this._invalidMaxLabelSize=!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=l;var r=this.opt,p=this.chart.theme.axis,v=r.rotation%360,q=this.chart.theme.axis.tick.labelGap,
k=r.font||p.majorTick&&p.majorTick.font||p.tick&&p.tick.font;p=k?b.normalizedLength(b.splitFontString(k).size):0;k=this._getMaxLabelSize(m,n,l,v,k,p);"number"!=typeof q&&(q=4);if(k&&r.dropLabels){r=Math.abs(Math.cos(v*Math.PI/180));var z=Math.abs(Math.sin(v*Math.PI/180));0>v&&(v+=360);switch(v){case 0:case 180:this.vertical?v=p:(v=k.majLabelW,p=k.minLabelW);break;case 90:case 270:this.vertical?(v=k.majLabelW,p=k.minLabelW):v=p;break;default:v=this.vertical?Math.min(k.majLabelW,p/r):Math.min(k.majLabelW,
p/z),p=Math.min(Math.sqrt(k.minLabelW*k.minLabelW+p*p),this.vertical?p*r+k.minLabelW*z:k.minLabelW*r+p*z)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(v,p)+q;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((v+q)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=c.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var m={l:0,r:0,t:0,b:0};if(!this.scaler)return m;var n=this.opt,
l=this.chart.theme.axis,r=this.chart.theme.axis.tick.labelGap,p=n.titleFont||l.title&&l.title.font;l=0==n.titleGap?0:n.titleGap||l.title&&l.title.gap;var v=this.chart.theme.getTick("major",n),q=this.chart.theme.getTick("minor",n);p=p?b.normalizedLength(b.splitFontString(p).size):0;var k=n.rotation%360,z=n.position,B="rightOrTop"!==z,H=Math.abs(Math.cos(k*Math.PI/180)),J=Math.abs(Math.sin(k*Math.PI/180));this.trailingSymbol=void 0===n.trailingSymbol||null===n.trailingSymbol?this.trailingSymbol:n.trailingSymbol;
"number"!=typeof r&&(r=4);0>k&&(k+=360);var N=this._getMaxLabelSize();if(N){var C=Math.ceil(Math.max(N.majLabelW,N.minLabelW))+1,L=Math.ceil(Math.max(N.majLabelH,N.minLabelH))+1;if(this.vertical)switch(N=B?"l":"r",k){case 0:case 180:m[N]="center"===z?0:C;m.t=m.b=L/2;break;case 90:case 270:m[N]=L;m.t=m.b=C/2;break;default:45>=k||180<k&&225>=k?(m[N]=L*J/2+C*H,m[B?"t":"b"]=L*H/2+C*J,m[B?"b":"t"]=L*H/2):315<k||180>k&&135<k?(m[N]=L*J/2+C*H,m[B?"b":"t"]=L*H/2+C*J,m[B?"t":"b"]=L*H/2):90>k||180<k&&270>k?
(m[N]=L*J+C*H,m[B?"t":"b"]=L*H+C*J):(m[N]=L*J+C*H,m[B?"b":"t"]=L*H+C*J)}else switch(N=B?"b":"t",k){case 0:case 180:m[N]="center"===z?0:L;m.l=m.r=C/2;break;case 90:case 270:m[N]=C;m.l=m.r=L/2;break;default:45<=k&&90>=k||225<=k&&270>=k?(m[N]=L*H/2+C*J,m[B?"r":"l"]=L*J/2+C*H,m[B?"l":"r"]=L*J/2):90<=k&&135>=k||270<=k&&315>=k?(m[N]=L*H/2+C*J,m[B?"l":"r"]=L*J/2+C*H,m[B?"r":"l"]=L*J/2):45>k||180<k&&225>k?(m[N]=L*H+C*J,m[B?"r":"l"]=L*J+C*H):(m[N]=L*H+C*J,m[B?"l":"r"]=L*J+C*H)}m[N]="center"===z?0:m[N]+(r+
Math.max(0<v.length?v.length:0,0<q.length?q.length:0)+(n.title?p+l:0))}return m},cleanGroup:function(m){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]);this.inherited(arguments)},createText:function(m,n,l,r,p,v,q,k,z){if(!this.opt.enableCache||"html"==m)return a.createText[m](this.chart,n,l,r,p,v,q,k,z);0<this._textFreePool.length?(m=this._textFreePool.pop(),
m.setShape({x:l,y:r,text:v,align:p}),n.add(m)):m=a.createText[m](this.chart,n,l,r,p,v,q,k);this._textUsePool.push(m);return m},createLine:function(m,n){if(this.opt.enableCache&&0<this._lineFreePool.length){var l=this._lineFreePool.pop();l.setShape(n);m.add(l)}else l=m.createLine(n);this.opt.enableCache&&this._lineUsePool.push(l);return l},render:function(m,n){var l,r=this._isRtl();if(!this.dirty||!this.scaler)return this;var p=this.opt;var v=this.chart.theme.axis;var q=p.position,k="rightOrTop"!==
q,z=p.rotation%360,B=0;B=this.chart.theme.axis.tick.labelGap;var H=p.font||v.majorTick&&v.majorTick.font||v.tick&&v.tick.font,J=p.titleFont||v.title&&v.title.font,N=p.fontColor||v.majorTick&&v.majorTick.fontColor||v.tick&&v.tick.fontColor||"black",C=p.titleFontColor||v.title&&v.title.fontColor||"black";var L=0==p.titleGap?0:p.titleGap||v.title&&v.title.gap||15;var F=p.titleOrientation||v.title&&v.title.orientation||"axis",K=this.chart.theme.getTick("major",p),t=this.chart.theme.getTick("minor",p),
u=this.chart.theme.getTick("micro",p),E="stroke"in p?p.stroke:v.stroke,G=H?b.normalizedLength(b.splitFontString(H).size):0;var M=Math.abs(Math.cos(z*Math.PI/180));var P=Math.abs(Math.sin(z*Math.PI/180));var Q=J?b.normalizedLength(b.splitFontString(J).size):0;"number"!=typeof B&&(B=4);0>z&&(z+=360);var S=this._getMaxLabelSize();S=S&&S.majLabelW;if(this.vertical){var I=m.height-n.b;var O=void 0;var R=n.t;var T=void 0;v=(m.height-n.b+n.t)/2;var W=void 0;P=G*P+(S||0)*M+B+Math.max(0<K.length?K.length:
0,0<t.length?t.length:0)+Q+L;var na=0;var Z=-1;var ba=l=0;L=1;M=0;var ka=B;var la=0;switch(z){case 0:var Y="end";ba=.4*G;break;case 90:Y="middle";l=-G;break;case 180:Y="start";ba=.4*-G;break;case 270:Y="middle";break;default:45>z?(Y="end",ba=.4*G):90>z?(Y="end",ba=.4*G):135>z?Y="start":225>z?(Y="start",ba=.4*-G):270>z?(Y="start",l=k?0:.4*G):315>z?(Y="end",l=k?0:.4*G):(Y="end",ba=.4*G)}if(k)O=T="center"===q?m.width/2:n.l,B=F&&"away"==F?90:270,W=n.l-P+(270==B?Q:0),L=-1,ka=-ka;else switch(O=T=m.width-
n.r,B=F&&"axis"==F?90:270,W=m.width-n.r+P-(270==B?0:Q),Y){case "start":Y="end";break;case "end":Y="start";break;case "middle":l+=G}}else{O=n.l;I=void 0;T=m.width-n.r;R=void 0;W=(m.width-n.r+n.l)/2;v=void 0;P=G*M+(S||0)*P+B+Math.max(0<K.length?K.length:0,0<t.length?t.length:0)+Q+L;na=r?-1:1;L=ba=l=Z=0;M=1;ka=0;la=B;switch(z){case 0:Y="middle";ba=G;break;case 90:Y="start";l=.4*-G;break;case 180:Y="middle";break;case 270:Y="end";l=.4*G;break;default:45>z?(Y="start",ba=k?G:0):135>z?(Y="start",l=.4*-G):
180>z?(Y="start",ba=k?0:-G):225>z?(Y="end",ba=k?0:-G):315>z?(Y="end",ba=k?.4*G:0):(Y="end",ba=k?G:0)}if(k)I=R="center"===q?m.height/2:m.height-n.b,B=F&&"axis"==F?180:0,v=m.height-n.b+P-(B?Q:0);else switch(I=R=n.t,B=F&&"away"==F?180:0,v=n.t-P+(B?0:Q),M=-1,la=-la,Y){case "start":Y="end";break;case "end":Y="start";break;case "middle":ba-=G}}this.cleanGroup();var ia=this.group;m=this.scaler;n=this.ticks;var U=c.getTransformerFromModel(this.scaler),V=p.title&&B||z||!this.opt.htmlLabels||x("ie")||x("opera")?
"gfx":"html",X=L*K.length,aa=M*K.length,ea=this._skipInterval;ia.createLine({x1:O,y1:I,x2:T,y2:R}).setStroke(E);p.title&&(J=a.createText[V](this.chart,ia,W,v,"middle",p.title,J,C),"html"==V?this.htmlElements.push(J):J.setTransform(b.matrix.rotategAt(B,W,v)));if(null==n)return this.dirty=!1,this;var da=0<n.major.length?(n.major[0].value-this._majorStart)/m.major.tick:0,ja=this.opt.majorLabels;D.forEach(n.major,function(fa,ca){var ma=U(fa.value),oa=(r?T:O)+na*ma;ma=I+Z*ma;ca+=da;this.createLine(ia,
{x1:oa,y1:ma,x2:oa+X,y2:ma+aa}).setStroke(K);if(fa.label&&(!ea||0==(ca-(1+ea))%(1+ea))){var ha=p.maxLabelCharCount?this.getTextWithLimitCharCount(fa.label,H,p.maxLabelCharCount):{text:fa.label,truncated:!1};ha=p.maxLabelSize?this.getTextWithLimitLength(ha.text,H,p.maxLabelSize,ha.truncated):ha;ca=this.createText(V,ia,oa+(0<K.length?X:0)+ka+(z?0:l),ma+(0<K.length?aa:0)+la+(z?0:ba),Y,ha.text,H,N);ha.truncated&&this.chart.formatTruncatedLabel(ca,fa.label,V);ha.truncated&&this.labelTooltip(ca,this.chart,
fa.label,ha.text,H,V);"html"==V?this.htmlElements.push(ca):z&&ca.setTransform([{dx:l,dy:ba},b.matrix.rotategAt(z,oa+(0<K.length?X:0)+ka,ma+(0<K.length?aa:0)+la)])}},this);X=L*t.length;aa=M*t.length;ja=this.opt.minorLabels&&m.minMinorStep<=m.minor.tick*m.bounds.scale;D.forEach(n.minor,function(fa){var ca=U(fa.value),ma=(r?T:O)+na*ca,oa=I+Z*ca;this.createLine(ia,{x1:ma,y1:oa,x2:ma+X,y2:oa+aa}).setStroke(t);if(ja&&fa.label){var ha=p.maxLabelCharCount?this.getTextWithLimitCharCount(fa.label,H,p.maxLabelCharCount):
{text:fa.label,truncated:!1};ha=p.maxLabelSize?this.getTextWithLimitLength(ha.text,H,p.maxLabelSize,ha.truncated):ha;ca=this.createText(V,ia,ma+(0<t.length?X:0)+ka+(z?0:l),oa+(0<t.length?aa:0)+la+(z?0:ba),Y,ha.text,H,N);ha.truncated&&this.chart.formatTruncatedLabel(ca,fa.label,V);ha.truncated&&this.labelTooltip(ca,this.chart,fa.label,ha.text,H,V);"html"==V?this.htmlElements.push(ca):z&&ca.setTransform([{dx:l,dy:ba},b.matrix.rotategAt(z,ma+(0<t.length?X:0)+ka,oa+(0<t.length?aa:0)+la)])}},this);X=L*
u.length;aa=M*u.length;D.forEach(n.micro,function(fa){var ca=U(fa.value);fa=O+na*ca;ca=I+Z*ca;this.createLine(ia,{x1:fa,y1:ca,x2:fa+X,y2:ca+aa}).setStroke(u)},this);this.dirty=!1;return this},labelTooltip:function(m,n,l,r,p,v){var q=["dijit/Tooltip"],k={type:"rect"},z=["above","below"];r=b._base._getTextBox(r,{font:p}).w||0;p=p?b.normalizedLength(b.splitFontString(p).size):0;"html"==v?(y.mixin(k,f.position(m.firstChild,!0)),k.width=Math.ceil(r),k.height=Math.ceil(p),this._events.push({shape:dojo,
handle:w.connect(m.firstChild,"onmouseover",this,function(B){require(q,function(H){H.show(l,k,z)})})}),this._events.push({shape:dojo,handle:w.connect(m.firstChild,"onmouseout",this,function(B){require(q,function(H){H.hide(k)})})})):(v=m.getShape(),n=n.getCoords(),k=y.mixin(k,{x:v.x-r/2,y:v.y}),k.x+=n.x,k.y+=n.y,k.x=Math.round(k.x),k.y=Math.round(k.y),k.width=Math.ceil(r),k.height=Math.ceil(p),this._events.push({shape:m,handle:m.connect("onmouseenter",this,function(B){require(q,function(H){H.show(l,
k,z)})})}),this._events.push({shape:m,handle:m.connect("onmouseleave",this,function(B){require(q,function(H){H.hide(k)})})}))},_isRtl:function(){return!1}});return x("dojo-bidi")?A("dojox.charting.axis2d.Default",[d,e]):d})},"dojox/charting/axis2d/Invisible":function(){define(["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(y,D,x,A,w){return D("dojox.charting.axis2d.Invisible",x,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,
leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(f,d){this.opt=y.clone(this.defaultParams);w.updateWithObject(this.opt,d);w.updateWithPattern(this.opt,d,this.optionalParams)},dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},
setWindow:function(f,d){this.scale=f;this.offset=d;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(f,d,c,a){if(this.initialized())return this;var b=this.opt;this.labels=b.labels;this.scaler=(a||A).buildScaler(f,d,c,b);var h=this.scaler.bounds;"scale"in this&&(b.from=h.lower+this.offset,b.to=(h.upper-h.lower)/this.scale+b.from,!isFinite(b.from)||isNaN(b.from)||!isFinite(b.to)||isNaN(b.to)||
b.to-b.from>=h.upper-h.lower?(delete b.from,delete b.to,delete this.scale,delete this.offset):(b.from<h.lower?(b.to+=h.lower-b.from,b.from=h.lower):b.to>h.upper&&(b.from+=h.upper-b.to,b.to=h.upper),this.offset=b.from-h.lower),this.scaler=(a||A).buildScaler(f,d,c,b),h=this.scaler.bounds,1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset));return this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare",
"../Element"],function(y,D){return y("dojox.charting.axis2d.Base",D,{constructor:function(x,A){this.vertical=A&&A.vertical;this.opt={};this.opt.min=A&&A.min;this.opt.max=A&&A.max},clear:function(){return this},initialized:function(){return!1},calculate:function(x,A,w){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(x,A){this.dirty=!1;return this},isNullValue:function(x){return!1},naturalBaseline:0})})},
"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(y,D){function x(d,c){d=d.toLowerCase();for(var a=c.length-1;0<=a;--a)if(d===c[a])return!0;return!1}var A=y.getObject("dojox.charting.scaler.linear",!0),w=D.getNumericLabel,f=function(d,c,a,b,h,g,e){a=y.delegate(a);b||("major"==a.fixUpper&&(a.fixUpper="minor"),"major"==a.fixLower&&(a.fixLower="minor"));h||("minor"==a.fixUpper&&(a.fixUpper="micro"),"minor"==a.fixLower&&(a.fixLower="micro"));g||("micro"==a.fixUpper&&
(a.fixUpper="none"),"micro"==a.fixLower&&(a.fixLower="none"));var m=x(a.fixLower,["major"])?Math.floor(a.min/b)*b:x(a.fixLower,["minor"])?Math.floor(a.min/h)*h:x(a.fixLower,["micro"])?Math.floor(a.min/g)*g:a.min,n=x(a.fixUpper,["major"])?Math.ceil(a.max/b)*b:x(a.fixUpper,["minor"])?Math.ceil(a.max/h)*h:x(a.fixUpper,["micro"])?Math.ceil(a.max/g)*g:a.max;a.useMin&&(d=m);a.useMax&&(c=n);var l=!b||a.useMin&&x(a.fixLower,["major"])?d:Math.ceil(d/b)*b,r=!h||a.useMin&&x(a.fixLower,["major","minor"])?d:Math.ceil(d/
h)*h,p=!g||a.useMin&&x(a.fixLower,["major","minor","micro"])?d:Math.ceil(d/g)*g,v=b?(a.useMax&&x(a.fixUpper,["major"])?Math.round((c-l)/b):Math.floor((c-l)/b))+1:0,q=h?(a.useMax&&x(a.fixUpper,["major","minor"])?Math.round((c-r)/h):Math.floor((c-r)/h))+1:0;a=g?(a.useMax&&x(a.fixUpper,["major","minor","micro"])?Math.round((c-p)/g):Math.floor((c-p)/g))+1:0;var k=h?Math.round(b/h):0,z=g?Math.round(h/g):0,B=b?Math.floor(Math.log(b)/Math.LN10):0,H=h?Math.floor(Math.log(h)/Math.LN10):0,J=e/(c-d);isFinite(J)||
(J=1);return{bounds:{lower:m,upper:n,from:d,to:c,scale:J,span:e},major:{tick:b,start:l,count:v,prec:B},minor:{tick:h,start:r,count:q,prec:H},micro:{tick:g,start:p,count:a,prec:0},minorPerMajor:k,microPerMinor:z,scaler:A}};return y.mixin(A,{buildScaler:function(d,c,a,b,h,g){var e={fixUpper:"none",fixLower:"none",natural:!1};b&&("fixUpper"in b&&(e.fixUpper=String(b.fixUpper)),"fixLower"in b&&(e.fixLower=String(b.fixLower)),"natural"in b&&(e.natural=!!b.natural));g=!g||3>g?3:g;"min"in b&&(d=b.min);"max"in
b&&(c=b.max);b.includeZero&&(0<d&&(d=0),0>c&&(c=0));e.min=d;e.useMin=!0;e.max=c;e.useMax=!0;"from"in b&&(d=b.from,e.useMin=!1);"to"in b&&(c=b.to,e.useMax=!1);if(c<=d)return f(d,c,e,0,0,0,a);h||(h=c-d);h=Math.floor(Math.log(h)/Math.LN10);h=b&&"majorTickStep"in b?b.majorTickStep:Math.pow(10,h);var m=0,n=0;if(b&&"minorTickStep"in b)m=b.minorTickStep;else{do{m=h/10;if(!e.natural||.9<m){var l=f(d,c,e,h,m,0,a);if(l.bounds.scale*l.minor.tick>g)break}m=h/5;if(!e.natural||.9<m)if(l=f(d,c,e,h,m,0,a),l.bounds.scale*
l.minor.tick>g)break;m=h/2;if(!e.natural||.9<m)if(l=f(d,c,e,h,m,0,a),l.bounds.scale*l.minor.tick>g)break;return f(d,c,e,h,0,0,a)}while(0)}if(b&&"microTickStep"in b)n=b.microTickStep,l=f(d,c,e,h,m,n,a);else{do{n=m/10;if(!e.natural||.9<n)if(l=f(d,c,e,h,m,n,a),3<l.bounds.scale*l.micro.tick)break;n=m/5;if(!e.natural||.9<n)if(l=f(d,c,e,h,m,n,a),3<l.bounds.scale*l.micro.tick)break;n=m/2;if(!e.natural||.9<n)if(l=f(d,c,e,h,m,n,a),3<l.bounds.scale*l.micro.tick)break;n=0}while(0)}return n?l:f(d,c,e,h,m,0,a)},
buildTicks:function(d,c){var a=d.major.start,b=d.minor.start,h=d.micro.start;if(c.microTicks&&d.micro.tick){var g=d.micro.tick;var e=h}else if(c.minorTicks&&d.minor.tick)g=d.minor.tick,e=b;else if(d.major.tick)g=d.major.tick,e=a;else return null;var m=1/d.bounds.scale;if(d.bounds.to<=d.bounds.from||isNaN(m)||!isFinite(m)||0>=g||isNaN(g)||!isFinite(g))return null;for(var n=[],l=[],r=[];e<=d.bounds.to+m;){if(Math.abs(a-e)<g/2){var p={value:a};c.majorLabels&&(p.label=w(a,d.major.prec,c));n.push(p);a+=
d.major.tick;b+=d.minor.tick}else Math.abs(b-e)<g/2?(c.minorTicks&&(p={value:b},c.minorLabels&&d.minMinorStep<=d.minor.tick*d.bounds.scale&&(p.label=w(b,d.minor.prec,c)),l.push(p)),b+=d.minor.tick):c.microTicks&&r.push({value:h});h+=d.micro.tick;e+=g}return{major:n,minor:l,micro:r}},getTransformerFromModel:function(d){var c=d.bounds.from,a=d.bounds.scale;return function(b){return(b-c)*a}},getTransformerFromPlot:function(d){var c=d.bounds.from,a=d.bounds.scale;return function(b){return b/a+c}}})})},
"dojox/charting/plot2d/Default":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),function(y,D,x,A,w,f,d,c,a,b){return D("dojox.charting.plot2d.Default",[w,f],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",
markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",zeroLine:0},constructor:function(h,g){this.opt=y.clone(y.mixin(this.opt,this.defaultParams));a.updateWithObject(this.opt,g);a.updateWithPattern(this.opt,g,this.optionalParams);this.animate=this.opt.animate},createPath:function(h,g,e){if(this.opt.enableCache&&0<h._pathFreePool.length){var m=h._pathFreePool.pop();m.setShape(e);g.add(m)}else m=g.createPath(e);this.opt.enableCache&&h._pathUsePool.push(m);return m},
buildSegments:function(h,g){h=this.series[h];for(var e=g?Math.min(h.data.length,Math.ceil(this._hScaler.bounds.to)):h.data.length,m=null,n=[],l=g?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0;l<e;l++)if(!this.isNullValue(h.data[l]))m||(m=[],n.push({index:l,rseg:m})),m.push(g&&h.data[l].hasOwnProperty("y")?h.data[l].y:h.data[l]);else if(!this.opt.interpolate||g)m=null;return n},render:function(h,g){if(this.zoom&&!this.isDataDirty())return this.performZoom(h,g);this.resetEvents();this.dirty=
this.isDirty();if(this.dirty){x.forEach(this.series,d.purgeGroup);this._eventSeries={};this.cleanGroup();this.getGroup().setTransform(null);var e=this.getGroup();c.forEachRev(this.series,function(R){R.cleanGroup(e)})}for(var m=this.chart.theme,n,l,r=this.events(),p=0;p<this.series.length;p++){var v=this.series[p];if(this.dirty||v.dirty)if(v.cleanGroup(),this.opt.enableCache&&(v._pathFreePool=(v._pathFreePool?v._pathFreePool:[]).concat(v._pathUsePool?v._pathUsePool:[]),v._pathUsePool=[]),v.data.length){var q=
m.next(this.opt.areas?"area":"line",[this.opt,v],!0),k=this._hScaler.scaler.getTransformerFromModel(this._hScaler),z=this._vScaler.scaler.getTransformerFromModel(this._vScaler),B=this._eventSeries[v.name]=Array(v.data.length);e=v.group;if(v.hidden){this.opt.lines&&(v.dyn.stroke=q.series.stroke);if(v.markers||void 0===v.markers&&this.opt.markers)v.dyn.markerFill=q.marker.fill,v.dyn.markerStroke=q.marker.stroke,v.dyn.marker=q.symbol;this.opt.areas&&(v.dyn.fill=q.series.fill)}else{for(var H=x.some(v.data,
function(R){return"number"==typeof R||R&&!R.hasOwnProperty("x")}),J=this.buildSegments(p,H),N=0;N<J.length;N++){var C=J[N];var L=H?x.map(C.rseg,function(R,T){return{x:k(T+C.index+1)+g.l,y:h.height-g.b-z(R),data:R}},this):x.map(C.rseg,function(R){return{x:k(R.x)+g.l,y:h.height-g.b-z(R.y),data:R}},this);if(H&&this.opt.interpolate)for(;N<J.length;)N++,(C=J[N])&&(L=L.concat(x.map(C.rseg,function(R,T){return{x:k(T+C.index+1)+g.l,y:h.height-g.b-z(R),data:R}},this)));var F=this.opt.tension?d.curve(L,this.opt.tension):
"";if(this.opt.areas&&1<L.length){var K=this._plotFill(q.series.fill,h,g),t=y.clone(L),u=h.height-g.b;isNaN(this.opt.zeroLine)||(u=Math.max(g.t,Math.min(h.height-g.b-z(this.opt.zeroLine),u)));this.opt.tension?v.dyn.fill=e.createPath(F+" L"+(t[t.length-1].x+","+u+" L"+t[0].x+","+u+" L"+t[0].x+","+t[0].y)).setFill(K).getFill():(t.push({x:L[L.length-1].x,y:u}),t.push({x:L[0].x,y:u}),t.push(L[0]),v.dyn.fill=e.createPolyline(t).setFill(K).getFill())}if(this.opt.lines||this.opt.markers)n=q.series.stroke,
q.series.outline&&(l=v.dyn.outline=d.makeStroke(q.series.outline),l.width=2*l.width+(n&&n.width||0));this.opt.markers&&(v.dyn.marker=q.symbol);var E=null,G=null,M=null;if(n&&q.series.shadow&&1<L.length){var P=q.series.shadow;K=x.map(L,function(R){return{x:R.x+P.dx,y:R.y+P.dy}});this.opt.lines&&(v.dyn.shadow=this.opt.tension?e.createPath(d.curve(K,this.opt.tension)).setStroke(P).getStroke():e.createPolyline(K).setStroke(P).getStroke());this.opt.markers&&q.marker.shadow&&(P=q.marker.shadow,M=x.map(K,
function(R){return this.createPath(v,e,"M"+R.x+" "+R.y+" "+q.symbol).setStroke(P).setFill(P.color)},this))}if(this.opt.lines&&1<L.length){var Q;l&&(v.dyn.outline=this.opt.tension?e.createPath(F).setStroke(l).getStroke():e.createPolyline(L).setStroke(l).getStroke());v.dyn.stroke=this.opt.tension?(Q=e.createPath(F)).setStroke(n).getStroke():(Q=e.createPolyline(L)).setStroke(n).getStroke();Q.setFilter&&q.series.filter&&Q.setFilter(q.series.filter)}F=null;if(this.opt.markers){var S=q;E=Array(L.length);
G=Array(L.length);l=null;S.marker.outline&&(l=d.makeStroke(S.marker.outline),l.width=2*l.width+(S.marker.stroke?S.marker.stroke.width:0));x.forEach(L,function(R,T){if(this.opt.styleFunc||"number"!=typeof R.data){var W="number"!=typeof R.data?[R.data]:[];this.opt.styleFunc&&W.push(this.opt.styleFunc(R.data));S=m.addMixin(q,"marker",W,!0)}else S=m.post(q,"marker");R="M"+R.x+" "+R.y+" "+S.symbol;l&&(G[T]=this.createPath(v,e,R).setStroke(l));E[T]=this.createPath(v,e,R).setStroke(S.marker.stroke).setFill(S.marker.fill)},
this);v.dyn.markerFill=S.marker.fill;v.dyn.markerStroke=S.marker.stroke;!F&&this.opt.labels&&(F=E[0].getBoundingBox());r?x.forEach(E,function(R,T){R={element:"marker",index:T+C.index,run:v,shape:R,outline:G[T]||null,shadow:M&&M[T]||null,cx:L[T].x,cy:L[T].y};H?(R.x=T+C.index+1,R.y=v.data[T+C.index]):(R.x=C.rseg[T].x,R.y=v.data[T+C.index].y);this._connectEvents(R);B[T+C.index]=R},this):delete this._eventSeries[v.name]}if(this.opt.labels){var I=F?F.width:2,O=F?F.height:2;x.forEach(L,function(R,T){if(this.opt.styleFunc||
"number"!=typeof R.data){var W="number"!=typeof R.data?[R.data]:[];this.opt.styleFunc&&W.push(this.opt.styleFunc(R.data));S=m.addMixin(q,"marker",W,!0)}else S=m.post(q,"marker");this.createLabel(e,C.rseg[T],{x:R.x-I/2,y:R.y-O/2,width:I,height:O},S)},this)}}v.dirty=!1}}else v.dirty=!1,m.skip();else m.skip(),this._reconnectEvents(v.name)}A("dojo-bidi")&&this._checkOrientation(this.group,h,g);this.animate&&(n=this.getGroup(),b.animateTransform(y.delegate({shape:n,duration:1200,transform:[{name:"translate",
start:[0,h.height-g.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=!1;return this}})})},"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/has ./Base ../scaler/primitive dojox/gfx dojox/gfx/fx dojox/lang/utils".split(" "),function(y,D,x,A,w,f,d,c,a){var b=function(){return!1};return D("dojox.charting.plot2d.CartesianBase",w,{baseParams:{hAxis:"x",vAxis:"y",labels:!1,labelOffset:10,
fixed:!0,precision:1,labelStyle:"inside",htmlLabels:!0,omitLabels:!0,labelFunc:null},constructor:function(h,g){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};this.hAxis=g&&g.hAxis||"x";this.vAxis=g&&g.vAxis||"y";this.series=[];this.opt=y.clone(this.baseParams);a.updateWithObject(this.opt,g)},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(h,g){this.inherited(arguments);if(!g&&
this.chart._nativeClip){var e=this.chart.offsets,m=this.chart.dim;this.group.setClip({x:e.l,y:e.t,width:Math.max(0,m.width-e.l-e.r),height:Math.max(0,m.height-e.t-e.b)});this._clippedGroup||(this._clippedGroup=this.group.createGroup())}},purgeGroup:function(){this.inherited(arguments);this._clippedGroup=null},getGroup:function(){return this._clippedGroup||this.group},setAxis:function(h){h&&(this[h.vertical?"_vAxis":"_hAxis"]=h);return this},toPage:function(h){var g=this._hAxis,e=this._vAxis,m=g.getScaler(),
n=e.getScaler(),l=m.scaler.getTransformerFromModel(m),r=n.scaler.getTransformerFromModel(n),p=this.chart.getCoords(),v=this.chart.offsets,q=this.chart.dim;m=function(k){var z={};z.x=l(k[g.name])+p.x+v.l;z.y=p.y+q.height-v.b-r(k[e.name]);return z};return h?m(h):m},toData:function(h){var g=this._hAxis,e=this._vAxis,m=g.getScaler(),n=e.getScaler(),l=m.scaler.getTransformerFromPlot(m),r=n.scaler.getTransformerFromPlot(n),p=this.chart.getCoords(),v=this.chart.offsets,q=this.chart.dim;m=function(k){var z=
{};z[g.name]=l(k.x-p.x-v.l);z[e.name]=r(p.y+q.height-k.y-v.b);return z};return h?m(h):m},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},createLabel:function(h,g,e,m){if(this.opt.labels){var n=this.opt.labelFunc?this.opt.labelFunc.apply(this,[g,this.opt.fixed,this.opt.precision]):this._getLabel(isNaN(g.y)?g:g.y);if("inside"==this.opt.labelStyle){var l=d._base._getTextBox(n,{font:m.series.font});g=e.x+e.width/2;var r=e.y+e.height/2+l.h/4;if(l.w>
e.width||l.h>e.height)return}else g=e.x+e.width/2,r=e.y-this.opt.labelOffset;this.renderLabel(h,g,r,n,m,"inside"==this.opt.labelStyle)}},performZoom:function(h,g){var e=this._vAxis.scale||1,m=this._hAxis.scale||1;h=h.height-g.b;var n=this._hScaler.bounds;n=(n.from-n.lower)*n.scale;var l=this._vScaler.bounds;l=(l.from-l.lower)*l.scale;var r=e/this.lastWindow.vscale,p=m/this.lastWindow.hscale,v=(this.lastWindow.xoffset-n)/(1==this.lastWindow.hscale?m:this.lastWindow.hscale),q=(l-this.lastWindow.yoffset)/
(1==this.lastWindow.vscale?e:this.lastWindow.vscale),k=this.getGroup();g=c.animateTransform(y.delegate({shape:k,duration:1200,transform:[{name:"translate",start:[0,0],end:[g.l*(1-p),h*(1-r)]},{name:"scale",start:[1,1],end:[p,r]},{name:"original"},{name:"translate",start:[0,0],end:[v,q]}]},this.zoom));y.mixin(this.lastWindow,{vscale:e,hscale:m,xoffset:n,yoffset:l});this.zoomQueue.push(g);x.connect(g,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});
1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(h,g){this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(g.hmin,g.hmax,h.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=f.buildScaler(g.hmin,g.hmax,h.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(g.vmin,g.vmax,h.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=f.buildScaler(g.vmin,g.vmax,h.height);return this},isNullValue:function(h){if(null===h||"undefined"==
typeof h)return!0;var g=this._hAxis?this._hAxis.isNullValue:b,e=this._vAxis?this._vAxis.isNullValue:b;return"number"==typeof h?g(1)||e(h):g(isNaN(h.x)?1:h.x)||null===h.y||e(h.y)}})})},"dojox/charting/plot2d/Base":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojox/gfx ../Element ./common ../axis2d/common dojo/has".split(" "),function(y,D,x,A,w,f,d,c){y=y("dojox.charting.plot2d.Base",w,{constructor:function(a,b){b&&b.tooltipFunc&&(this.tooltipFunc=b.tooltipFunc)},clear:function(){this.series=
[];this.dirty=!0;return this},setAxis:function(a){return this},assignAxes:function(a){D.forEach(this.axes,function(b){this[b]&&this.setAxis(a[this[b]])},this)},addSeries:function(a){this.series.push(a);return this},getSeriesStats:function(){return f.collectSimpleStats(this.series,x.hitch(this,"isNullValue"))},calculateAxes:function(a){this.initializeScalers(a,this.getSeriesStats());return this},initializeScalers:function(){return this},isDataDirty:function(){return D.some(this.series,function(a){return a.dirty})},
render:function(a,b){return this},renderLabel:function(a,b,h,g,e,m,n){a=d.createText[this.opt.htmlLabels&&"vml"!=A.renderer?"html":"gfx"](this.chart,a,b,h,n?n:"middle",g,e.series.font,e.series.fontColor);m&&(this.opt.htmlLabels&&"vml"!=A.renderer?a.style.pointerEvents="none":a.rawNode&&(a.rawNode.style.pointerEvents="none"));this.opt.htmlLabels&&"vml"!=A.renderer&&this.htmlElements.push(a);return a},getRequiredColors:function(){return this.series.length},_getLabel:function(a){return f.getLabel(a,
this.opt.fixed,this.opt.precision)}});c("dojo-bidi")&&y.extend({_checkOrientation:function(a,b,h){this.chart.applyMirroring(this.group,b,h)}});return y})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],function(y){var D=y.getObject("dojox.charting.scaler.primitive",!0);return y.mixin(D,{buildScaler:function(x,A,w,f){x==A&&(x-=.5,A+=.5);return{bounds:{lower:x,upper:A,from:x,to:A,scale:w/(A-x),span:w},scaler:D}},buildTicks:function(x,A){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(x){var A=
x.bounds.from,w=x.bounds.scale;return function(f){return(f-A)*w}},getTransformerFromPlot:function(x){var A=x.bounds.from,w=x.bounds.scale;return function(f){return f/w+A}}})})},"dojox/gfx/fx":function(){define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),function(y,D,x,A,w,f,d,c){function a(p,v){this.start=p;this.end=v}function b(p,v,q){this.start=p;this.end=v;this.units=q}function h(p,v){this.start=p;this.end=v;this.temp=
new A}function g(p){this.values=p;this.length=p.length}function e(p,v){this.values=p;this.def=v?v:{}}function m(p,v){this.stack=p;this.original=v}function n(p,v,q,k){if(p.values)return new g(p.values);var z;var B=p.start?D.normalizeColor(p.start):z=v?q?v[q]:v:k;p.end?p=D.normalizeColor(p.end):(z||(z=v?q?v[q]:v:k),p=z);return new h(B,p)}var l=D.fx={};a.prototype.getValue=function(p){return(this.end-this.start)*p+this.start};b.prototype.getValue=function(p){return(this.end-this.start)*p+this.start+
this.units};h.prototype.getValue=function(p){return A.blendColors(this.start,this.end,p,this.temp)};g.prototype.getValue=function(p){return this.values[Math.min(Math.floor(p*this.length),this.length-1)]};e.prototype.getValue=function(p){var v=y.clone(this.def),q;for(q in this.values)v[q]=this.values[q].getValue(p);return v};m.prototype.getValue=function(p){var v=[];w.forEach(this.stack,function(q){if(q instanceof x.Matrix2D)v.push(q);else if("original"==q.name&&this.original)v.push(this.original);
else if("matrix"==q.name){if(q.start instanceof x.Matrix2D&&q.end instanceof x.Matrix2D){var k=new x.Matrix2D;for(z in q.start)k[z]=(q.end[z]-q.start[z])*p+q.start[z];v.push(k)}}else if(q.name in x)if(k=x[q.name],"function"!=typeof k)v.push(k);else{var z=w.map(q.start,function(B,H){return(q.end[H]-B)*p+B});k=k.apply(x,z);k instanceof x.Matrix2D&&v.push(k)}},this);return v};var r=new A(0,0,0,0);l.animateStroke=function(p){p.easing||(p.easing=f._defaultEasing);var v=new f.Animation(p),q=p.shape,k;d.connect(v,
"beforeBegin",v,function(){k=q.getStroke();var z=p.color,B={};z&&(B.color=n(z,k,"color",r));(z=p.style)&&z.values&&(B.style=new g(z.values));if(z=p.width){var H=z,J=k;if(H.values)var N=new g(H.values);else z=H.start?H.start:N=J?J.width:1,H.end?N=H.end:"number"!=typeof N&&(N=J?J.width:1),N=new a(z,N);B.width=N}(z=p.cap)&&z.values&&(B.cap=new g(z.values));if(z=p.join)z.values?B.join=new g(z.values):(N=z.start?z.start:k&&k.join||0,z=z.end?z.end:k&&k.join||0,"number"==typeof N&&"number"==typeof z&&(B.join=
new a(N,z)));this.curve=new e(B,k)});d.connect(v,"onAnimate",q,"setStroke");return v};l.animateFill=function(p){p.easing||(p.easing=f._defaultEasing);var v=new f.Animation(p),q=p.shape,k;d.connect(v,"beforeBegin",v,function(){k=q.getFill();var z=p.color;z&&(this.curve=n(z,k,"",r))});d.connect(v,"onAnimate",q,"setFill");return v};l.animateFont=function(p){p.easing||(p.easing=f._defaultEasing);var v=new f.Animation(p),q=p.shape,k;d.connect(v,"beforeBegin",v,function(){k=q.getFont();var z=p.style,B=
{};z&&z.values&&(B.style=new g(z.values));(z=p.variant)&&z.values&&(B.variant=new g(z.values));(z=p.weight)&&z.values&&(B.weight=new g(z.values));(z=p.family)&&z.values&&(B.family=new g(z.values));if((z=p.size)&&z.units){var H=parseFloat(z.start?z.start:q.font&&q.font.size||"0");var J=parseFloat(z.end?z.end:q.font&&q.font.size||"0");B.size=new b(H,J,z.units)}this.curve=new e(B,k)});d.connect(v,"onAnimate",q,"setFont");return v};l.animateTransform=function(p){p.easing||(p.easing=f._defaultEasing);
var v=new f.Animation(p),q=p.shape,k;d.connect(v,"beforeBegin",v,function(){k=q.getTransform();this.curve=new m(p.transform,k)});d.connect(v,"onAnimate",q,"setTransform");if("svg"===D.renderer&&(9<=c("ie")||c("ff")))var z=[d.connect(v,"onBegin",v,function(){for(var B=q.getParent();B&&B.getParent;)B=B.getParent();B&&(q.__svgContainer=B.rawNode.parentNode,q.__svgRoot=B.rawNode,q.__svgRoot&&q.__svgRoot.getAttribute&&(q.__svgWidth=parseInt(q.__svgRoot.getAttribute("width"),10),isNaN(q.__svgWidth)&&delete q.__svgWidth))}),
d.connect(v,"onAnimate",v,function(){try{if(q.__svgContainer){var B=q.__svgContainer.style.visibility;q.__svgContainer.style.visibility="visible";q.__svgContainer.style.visibility=B;var H=q.__svgWidth;if(!isNaN(H))try{q.__svgRoot.setAttribute("width",H-5E-6),q.__svgRoot.setAttribute("width",H)}catch(J){}}}catch(J){}}),d.connect(v,"onEnd",v,function(){w.forEach(z,d.disconnect);if(q.__svgContainer){var B=q.__svgContainer;if(null==B.getAttribute("__gotVis")){B.setAttribute("__gotVis",!0);var H=q.__svgContainer.style.visibility,
J=q.__svgRoot,N=q.__svgWidth;B.style.visibility="visible";setTimeout(function(){try{B.style.visibility=H;B.removeAttribute("__gotVis");B=null;try{isNaN(N)||(J.setAttribute("width",N-5E-6),J.setAttribute("width",N))}catch(C){}}catch(C){}},100)}}delete q.__svgContainer;delete q.__svgRoot;delete q.__svgWidth})];return v};return l})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(y,D,x,A){return x("dojox.charting.plot2d._PlotEvents",
null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(w){},raiseEvent:function(w){this.plotEvent(w);var f=y.delegate(w);f.originalEvent=w.type;f.originalPlot=w.plot;f.type="onindirect";D.forEach(this.chart.stack,function(d){d!==this&&d.plotEvent&&(f.plot=d,d.plotEvent(f))},this)},connect:function(w,f){this.dirty=!0;return A.connect(this,"plotEvent",w,f)},events:function(){return!!this.plotEvent.after},
resetEvents:function(){this._shapeEvents.length&&(D.forEach(this._shapeEvents,function(w){w.shape.disconnect(w.handle)}),this._shapeEvents=[]);this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(w,f){this._shapeEvents.push({shape:w.eventMask,handle:w.eventMask.connect(f,this,function(d){w.type=f;w.event=d;this.raiseEvent(w);w.event=null})})},_connectEvents:function(w){w&&(w.chart=this.chart,w.plot=this,w.hAxis=this.hAxis||null,w.vAxis=this.vAxis||null,w.eventMask=w.eventMask||
w.shape,this._connectSingleEvent(w,"onmouseover"),this._connectSingleEvent(w,"onmouseout"),this._connectSingleEvent(w,"onclick"))},_reconnectEvents:function(w){(w=this._eventSeries[w])&&D.forEach(w,this._connectEvents,this)},fireEvent:function(w,f,d,c){(w=this._eventSeries[w])&&w.length&&d<w.length&&(d=w[d],d.type=f,d.event=c||null,this.raiseEvent(d),d.event=null)}})})},"dojox/charting/plot2d/Lines":function(){define(["dojo/_base/declare","./Default"],function(y,D){return y("dojox.charting.plot2d.Lines",
D,{constructor:function(){this.opt.lines=!0}})})},"dojox/charting/plot2d/Areas":function(){define(["dojo/_base/declare","./Default"],function(y,D){return y("dojox.charting.plot2d.Areas",D,{constructor:function(){this.opt.lines=!0;this.opt.areas=!0}})})},"dojox/charting/plot2d/Markers":function(){define(["dojo/_base/declare","./Default"],function(y,D){return y("dojox.charting.plot2d.Markers",D,{constructor:function(){this.opt.markers=!0}})})},"dojox/charting/plot2d/MarkersOnly":function(){define(["dojo/_base/declare",
"./Default"],function(y,D){return y("dojox.charting.plot2d.MarkersOnly",D,{constructor:function(){this.opt.lines=!1;this.opt.markers=!0}})})},"dojox/charting/plot2d/Scatter":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx dojox/gfx/gradutils".split(" "),function(y,D,x,A,w,f,d,c,a,b,h){return x("dojox.charting.plot2d.Scatter",[w,f],{defaultParams:{shadows:null,animate:null},optionalParams:{markerStroke:{},
markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",styleFunc:null},constructor:function(g,e){this.opt=y.clone(y.mixin(this.opt,this.defaultParams));a.updateWithObject(this.opt,e);a.updateWithPattern(this.opt,e,this.optionalParams);this.animate=this.opt.animate},render:function(g,e){if(this.zoom&&!this.isDataDirty())return this.performZoom(g,e);this.resetEvents();this.dirty=this.isDirty();if(this.dirty){D.forEach(this.series,d.purgeGroup);this._eventSeries={};this.cleanGroup();
var m=this.getGroup();c.forEachRev(this.series,function(C){C.cleanGroup(m)})}for(var n=this.chart.theme,l=this.events(),r=0;r<this.series.length;r++){var p=this.series[r];if(this.dirty||p.dirty)if(p.cleanGroup(),p.data.length){var v=n.next("marker",[this.opt,p]),q=this._hScaler.scaler.getTransformerFromModel(this._hScaler),k=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(p.hidden)p.dyn.marker=v.symbol,p.dyn.markerFill=v.marker.fill,p.dyn.markerStroke=v.marker.stroke;else{m=p.group;
var z="number"==typeof p.data[0]?D.map(p.data,function(C,L){return{x:q(L+1)+e.l,y:g.height-e.b-k(C)}},this):D.map(p.data,function(C,L){return{x:q(C.x)+e.l,y:g.height-e.b-k(C.y)}},this);var B=Array(z.length),H=Array(z.length),J=Array(z.length);D.forEach(z,function(C,L){var F=p.data[L];if(this.opt.styleFunc||"number"!=typeof F){var K="number"!=typeof F?[F]:[];this.opt.styleFunc&&K.push(this.opt.styleFunc(F));K=n.addMixin(v,"marker",K,!0)}else K=n.post(v,"marker");var t="M"+C.x+" "+C.y+" "+K.symbol;
K.marker.shadow&&(B[L]=m.createPath("M"+(C.x+K.marker.shadow.dx)+" "+(C.y+K.marker.shadow.dy)+" "+K.symbol).setStroke(K.marker.shadow).setFill(K.marker.shadow.color),this.animate&&this._animateScatter(B[L],g.height-e.b));if(K.marker.outline){var u=d.makeStroke(K.marker.outline);u.width=2*u.width+(K.marker.stroke&&K.marker.stroke.width||0);J[L]=m.createPath(t).setStroke(u);this.animate&&this._animateScatter(J[L],g.height-e.b)}u=d.makeStroke(K.marker.stroke);var E=this._plotFill(K.marker.fill,g,e);
!E||"linear"!==E.type&&"radial"!=E.type?H[L]=m.createPath(t).setStroke(u).setFill(E):(C=h.getColor(E,{x:C.x,y:C.y}),u&&(u.color=C),H[L]=m.createPath(t).setStroke(u).setFill(C));this.opt.labels&&(C=H[L].getBoundingBox(),this.createLabel(m,F,C,K));this.animate&&this._animateScatter(H[L],g.height-e.b)},this);H.length&&(p.dyn.marker=v.symbol,p.dyn.markerStroke=H[H.length-1].getStroke(),p.dyn.markerFill=H[H.length-1].getFill());if(l){var N=Array(H.length);D.forEach(H,function(C,L){C={element:"marker",
index:L,run:p,shape:C,outline:J&&J[L]||null,shadow:B&&B[L]||null,cx:z[L].x,cy:z[L].y};"number"==typeof p.data[0]?(C.x=L+1,C.y=p.data[L]):(C.x=p.data[L].x,C.y=p.data[L].y);this._connectEvents(C);N[L]=C},this);this._eventSeries[p.name]=N}else delete this._eventSeries[p.name];p.dirty=!1}}else p.dirty=!1,n.skip();else n.skip(),this._reconnectEvents(p.name)}this.dirty=!1;A("dojo-bidi")&&this._checkOrientation(this.group,g,e);return this},_animateScatter:function(g,e){b.animateTransform(y.delegate({shape:g,
duration:1200,transform:[{name:"translate",start:[0,e],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Stacked":function(){define(["dojo/_base/declare","dojo/_base/lang","./Default","./commonStacked"],function(y,D,x,A){return y("dojox.charting.plot2d.Stacked",x,{getSeriesStats:function(){return A.collectStats(this.series,D.hitch(this,"isNullValue"))},buildSegments:function(w,f){for(var d=this.series[w],c=f?Math.max(0,Math.floor(this._hScaler.bounds.from-
1)):0,a=f?Math.min(d.data.length-1,Math.ceil(this._hScaler.bounds.to)):d.data.length-1,b=null,h=[],g=D.hitch(this,"isNullValue");c<=a;c++){var e=f?A.getIndexValue(this.series,w,c,g):A.getValue(this.series,w,d.data[c]?d.data[c].x:null,g);if(!g(e[0])&&(f||null!=e[0].y))b||(b=[],h.push({index:c,rseg:b})),b.push(e[0]);else if(!this.opt.interpolate||f)b=null}return h}})})},"dojox/charting/plot2d/commonStacked":function(){define(["dojo/_base/lang","dojox/lang/functional","./common"],function(y,D,x){var A=
y.getObject("dojox.charting.plot2d.commonStacked",!0);return y.mixin(A,{collectStats:function(w,f){for(var d=y.delegate(x.defaultStats),c=0;c<w.length;++c)for(var a=w[c],b=0;b<a.data.length;b++)if(null!==a.data[b]){if("number"!=typeof a.data[b]&&a.data[b].hasOwnProperty("x")){var h=a.data[b].x;if(null!==h){var g=A.getValue(w,c,h,f)[0];g=null!=g&&g.y?g.y:null}}else g=A.getIndexValue(w,c,b,f)[0],h=b+1;d.hmin=Math.min(d.hmin,h);d.hmax=Math.max(d.hmax,h);d.vmin=Math.min(d.vmin,g);d.vmax=Math.max(d.vmax,
g)}return d},rearrangeValues:function(w,f,d){var c=D.filter(w,"x"),a=c.length;if(!a)return w;for(var b={},h=0;h<a;++h){for(var g=c[h],e=g.min,m=g.max;e<m;++e)g[e]=(g[e]||0)+(b[e]||0);b=g}for(h=0;h<a;++h)for(g=c[h],e=g.min,m=g.max;e<m;++e)g[e]=this.isNullValue(g[e])?0:f(g[e])-d;if(this.opt.minWidth){f=this.opt.minWidth;for(h=a-1;h;--h)for(g=c[h],b=c[h-1],e=g.min,m=g.max;e<m;++e)g[e]-=b[e];b=g.max;for(e=g.min;e<b;++e){for(h=d=g=0;h<a;++h)m=c[h][e],0<m&&(g+=m,++d);if(g<=d*f)for(h=0;h<a;++h)m=c[h][e],
0<m&&(c[h][e]=f);else{for(h=d=0;h<a;++h)g=c[h],m=g[e],0<m&&(m<f?(d+=f-m,g[e]=f):0<d&&(m=g[e]-f,m>=d?(g[e]-=d,d=0):0<m&&(g[e]=f,d-=m)));if(0<d)for(h=a-1;0<=h;--h)if(g=c[h],m=g[e],0<m)if(m=g[e]-f,m>=d){g[e]-=d;break}else 0<m&&(g[e]=f,d-=m)}}for(h=1;h<a;++h)for(g=c[h],b=c[h-1],e=g.min,m=g.max;e<m;++e)g[e]+=b[e]}return w},getIndexValue:function(w,f,d,c){var a=0,b;for(b=0;b<=f;++b)if(!w[b].hidden){var h=a;var g=w[b].data[d];c(g)||(isNaN(g)&&(g=g.y||0),a+=g)}return[a,h]},getValue:function(w,f,d,c){var a=
null,b,h;for(b=0;b<=f;++b)if(!w[b].hidden)for(h=0;h<w[b].data.length;h++){var g=a;var e=w[b].data[h];if(!c(e))if(e.x==d){a||(a={x:d});null!=e.y&&(null==a.y&&(a.y=0),a.y+=e.y);break}else if(e.x>d)break}return[a,g]}})})},"dojox/charting/plot2d/StackedLines":function(){define(["dojo/_base/declare","./Stacked"],function(y,D){return y("dojox.charting.plot2d.StackedLines",D,{constructor:function(){this.opt.lines=!0}})})},"dojox/charting/plot2d/StackedAreas":function(){define(["dojo/_base/declare","./Stacked"],
function(y,D){return y("dojox.charting.plot2d.StackedAreas",D,{constructor:function(){this.opt.lines=!0;this.opt.areas=!0}})})},"dojox/charting/plot2d/Columns":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),function(y,D,x,A,w,f,d,c,a,b){var h=function(){return!1};return x("dojox.charting.plot2d.Columns",[w,f],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,
maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(g,e){this.opt=y.clone(y.mixin(this.opt,this.defaultParams));a.updateWithObject(this.opt,e);a.updateWithPattern(this.opt,e,this.optionalParams);this.animate=this.opt.animate;this.renderingOptions={"shape-rendering":"crispEdges"}},getSeriesStats:function(){var g=d.collectSimpleStats(this.series,y.hitch(this,"isNullValue"));g.hmin-=.5;g.hmax+=.5;return g},createRect:function(g,e,m){if(this.opt.enableCache&&
0<g._rectFreePool.length){var n=g._rectFreePool.pop();n.setShape(m);e.add(n)}else n=e.createRect(m);this.opt.enableCache&&g._rectUsePool.push(n);return n},render:function(g,e){if(this.zoom&&!this.isDataDirty())return this.performZoom(g,e);this.resetEvents();this.dirty=this.isDirty();if(this.dirty){D.forEach(this.series,d.purgeGroup);this._eventSeries={};this.cleanGroup();var m=this.getGroup();c.forEachRev(this.series,function(I){I.cleanGroup(m)})}var n=this.chart.theme,l=this._hScaler.scaler.getTransformerFromModel(this._hScaler),
r=this._vScaler.scaler.getTransformerFromModel(this._vScaler),p=Math.max(this._vScaler.bounds.lower,this._vAxis?this._vAxis.naturalBaseline:0),v=r(p),q=this.events(),k=this.getBarProperties(),z=0,B=this.extractValues(this._hScaler);B=this.rearrangeValues(B,r,v);for(var H=0;H<this.series.length;H++){var J=this.series[H];if(this.dirty||J.dirty){J.cleanGroup();this.opt.enableCache&&(J._rectFreePool=(J._rectFreePool?J._rectFreePool:[]).concat(J._rectUsePool?J._rectUsePool:[]),J._rectUsePool=[]);var N=
n.next("column",[this.opt,J]),C=Array(J.data.length);if(J.hidden)J.dyn.fill=N.series.fill;else{m=J.group;for(var L=D.some(J.data,function(I){return"number"==typeof I||I&&!I.hasOwnProperty("x")}),F=L?Math.min(J.data.length,Math.ceil(this._hScaler.bounds.to)):J.data.length,K=L?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0;K<F;++K){var t=J.data[K];if(!this.isNullValue(t)){var u=this.getValue(t,K,H,L);r(u.y);var E=B[H][K];if(this.opt.styleFunc||"number"!=typeof t){var G="number"!=typeof t?[t]:
[];this.opt.styleFunc&&G.push(this.opt.styleFunc(t));G=n.addMixin(N,"column",G,!0)}else G=n.post(N,"column");if(1<=k.width){var M={x:e.l+l(u.x+.5)+k.gap+k.thickness*z,y:g.height-e.b-v-Math.max(E,0),width:k.width,height:Math.abs(E)};if(G.series.shadow){var P=y.clone(M);P.x+=G.series.shadow.dx;P.y+=G.series.shadow.dy;P=this.createRect(J,m,P).setFill(G.series.shadow.color).setStroke(G.series.shadow);this.animate&&this._animateColumn(P,g.height-e.b+v,E)}var Q=this._plotFill(G.series.fill,g,e);Q=this._shapeFill(Q,
M);Q=this.createRect(J,m,M).setFill(Q).setStroke(G.series.stroke);this.overrideShape(Q,{index:K,value:u});Q.setFilter&&G.series.filter&&Q.setFilter(G.series.filter);J.dyn.fill=Q.getFill();J.dyn.stroke=Q.getStroke();if(q){var S={element:"column",index:K,run:J,shape:Q,shadow:P,cx:u.x+.5,cy:u.y,x:L?K:J.data[K].x,y:L?J.data[K]:J.data[K].y};this._connectEvents(S);C[K]=S}!isNaN(u.py)&&u.py>p&&(M.height=E-r(u.py));this.createLabel(m,t,M,G);this.animate&&this._animateColumn(Q,g.height-e.b-v,E)}}}this._eventSeries[J.name]=
C;J.dirty=!1;z++}}else n.skip(),this._reconnectEvents(J.name)}this.dirty=!1;A("dojo-bidi")&&this._checkOrientation(this.group,g,e);return this},getValue:function(g,e,m,n){n?(m="number"==typeof g?g:g.y,g=e):(m=g.y,g=g.x-1);return{x:g,y:m}},extractValues:function(g){for(var e=[],m=this.series.length-1;0<=m;--m){var n=this.series[m];if(this.dirty||n.dirty){var l=D.some(n.data,function(q){return"number"==typeof q||q&&!q.hasOwnProperty("x")}),r=l?Math.max(0,Math.floor(g.bounds.from-1)):0;l=l?Math.min(n.data.length,
Math.ceil(g.bounds.to)):n.data.length;var p=e[m]=[];p.min=r;for(p.max=l;r<l;++r){var v=n.data[r];p[r]=this.isNullValue(v)?0:"number"==typeof v?v:v.y}}}return e},rearrangeValues:function(g,e,m){for(var n=0,l=g.length;n<l;++n){var r=g[n];if(r)for(var p=r.min,v=r.max;p<v;++p){var q=r[p];r[p]=this.isNullValue(q)?0:e(q)-m}}return g},isNullValue:function(g){if(null===g||"undefined"==typeof g)return!0;var e=this._hAxis?this._hAxis.isNullValue:h,m=this._vAxis?this._vAxis.isNullValue:h;return"number"==typeof g?
m(.5)||e(g):m(isNaN(g.x)?.5:g.x+.5)||null===g.y||e(g.y)},getBarProperties:function(){var g=d.calculateBarSize(this._hScaler.bounds.scale,this.opt);return{gap:g.gap,width:g.size,thickness:0}},_animateColumn:function(g,e,m){0===m&&(m=1);b.animateTransform(y.delegate({shape:g,duration:1200,transform:[{name:"translate",start:[0,e-e/m],end:[0,0]},{name:"scale",start:[1,1/m],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/StackedColumns":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./Columns","./commonStacked"],function(y,D,x,A){return y("dojox.charting.plot2d.StackedColumns",x,{getSeriesStats:function(){var w=A.collectStats(this.series,D.hitch(this,"isNullValue"));w.hmin-=.5;w.hmax+=.5;return w},rearrangeValues:function(w,f,d){return A.rearrangeValues.call(this,w,f,d)}})})},"dojox/charting/plot2d/ClusteredColumns":function(){define(["dojo/_base/declare","dojo/_base/array","./Columns","./common"],function(y,D,x,A){return y("dojox.charting.plot2d.ClusteredColumns",
x,{getBarProperties:function(){var w=this.series.length;D.forEach(this.series,function(d){d.hidden&&w--});var f=A.calculateBarSize(this._hScaler.bounds.scale,this.opt,w);return{gap:f.gap,width:f.size,thickness:f.size,clusterSize:w}}})})},"dojox/charting/plot2d/Bars":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/gfx/fx dojox/lang/utils dojox/lang/functional".split(" "),function(y,D,x,A,w,f,d,c,a,b){var h=function(){return!1};
return x("dojox.charting.plot2d.Bars",[w,f],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(g,e){this.opt=y.clone(y.mixin(this.opt,this.defaultParams));a.updateWithObject(this.opt,e);a.updateWithPattern(this.opt,e,this.optionalParams);this.animate=this.opt.animate;this.renderingOptions={"shape-rendering":"crispEdges"}},getSeriesStats:function(){var g=
d.collectSimpleStats(this.series,y.hitch(this,"isNullValue"));g.hmin-=.5;g.hmax+=.5;var e=g.hmin;g.hmin=g.vmin;g.vmin=e;e=g.hmax;g.hmax=g.vmax;g.vmax=e;return g},createRect:function(g,e,m){if(this.opt.enableCache&&0<g._rectFreePool.length){var n=g._rectFreePool.pop();n.setShape(m);e.add(n)}else n=e.createRect(m);this.opt.enableCache&&g._rectUsePool.push(n);return n},createLabel:function(g,e,m,n){this.opt.labels&&"outside"==this.opt.labelStyle?this.renderLabel(g,m.x+m.width+this.opt.labelOffset,m.y+
m.height/2,this._getLabel(isNaN(e.y)?e:e.y),n,"start"):this.inherited(arguments)},render:function(g,e){if(this.zoom&&!this.isDataDirty())return this.performZoom(g,e);this.dirty=this.isDirty();this.resetEvents();if(this.dirty){D.forEach(this.series,d.purgeGroup);this._eventSeries={};this.cleanGroup();var m=this.getGroup();b.forEachRev(this.series,function(O){O.cleanGroup(m)})}var n=this.chart.theme,l=this._hScaler.scaler.getTransformerFromModel(this._hScaler),r=this._vScaler.scaler.getTransformerFromModel(this._vScaler),
p=Math.max(this._hScaler.bounds.lower,this._hAxis?this._hAxis.naturalBaseline:0),v=l(p),q=this.events(),k=this.getBarProperties(),z=this.series.length;D.forEach(this.series,function(O){O.hidden&&z--});var B=z,H=this.extractValues(this._vScaler);H=this.rearrangeValues(H,l,v);for(var J=0;J<this.series.length;J++){var N=this.series[J];if(this.dirty||N.dirty){N.cleanGroup();this.opt.enableCache&&(N._rectFreePool=(N._rectFreePool?N._rectFreePool:[]).concat(N._rectUsePool?N._rectUsePool:[]),N._rectUsePool=
[]);var C=n.next("bar",[this.opt,N]);if(N.hidden)N.dyn.fill=C.series.fill,N.dyn.stroke=C.series.stroke;else{B--;var L=Array(N.data.length);m=N.group;for(var F=D.some(N.data,function(O){return"number"==typeof O||O&&!O.hasOwnProperty("x")}),K=F?Math.min(N.data.length,Math.ceil(this._vScaler.bounds.to)):N.data.length,t=F?Math.max(0,Math.floor(this._vScaler.bounds.from-1)):0;t<K;++t){var u=N.data[t];if(!this.isNullValue(u)){var E=this.getValue(u,t,J,F),G=H[J][t];if(this.opt.styleFunc||"number"!=typeof u){var M=
"number"!=typeof u?[u]:[];this.opt.styleFunc&&M.push(this.opt.styleFunc(u));M=n.addMixin(C,"bar",M,!0)}else M=n.post(C,"bar");if(G&&1<=k.height){var P={x:e.l+v+Math.min(G,0),y:g.height-e.b-r(E.x+1.5)+k.gap+k.thickness*(z-B-1),width:Math.abs(G),height:k.height};if(M.series.shadow){var Q=y.clone(P);Q.x+=M.series.shadow.dx;Q.y+=M.series.shadow.dy;Q=this.createRect(N,m,Q).setFill(M.series.shadow.color).setStroke(M.series.shadow);this.animate&&this._animateBar(Q,e.l+v,-G)}var S=this._plotFill(M.series.fill,
g,e);S=this._shapeFill(S,P);S=this.createRect(N,m,P).setFill(S).setStroke(M.series.stroke);S.setFilter&&M.series.filter&&S.setFilter(M.series.filter);N.dyn.fill=S.getFill();N.dyn.stroke=S.getStroke();if(q){var I={element:"bar",index:t,run:N,shape:S,shadow:Q,cx:E.y,cy:E.x+1.5,x:F?t:N.data[t].x,y:F?N.data[t]:N.data[t].y};this._connectEvents(I);L[t]=I}!isNaN(E.py)&&E.py>p&&(P.x+=l(E.py),P.width-=l(E.py));this.createLabel(m,u,P,M);this.animate&&this._animateBar(S,e.l+v,-Math.abs(G))}}}this._eventSeries[N.name]=
L;N.dirty=!1}}else n.skip(),this._reconnectEvents(N.name)}this.dirty=!1;A("dojo-bidi")&&this._checkOrientation(this.group,g,e);return this},getValue:function(g,e,m,n){n?(m="number"==typeof g?g:g.y,g=e):(m=g.y,g=g.x-1);return{y:m,x:g}},extractValues:function(g){for(var e=[],m=this.series.length-1;0<=m;--m){var n=this.series[m];if(this.dirty||n.dirty){var l=D.some(n.data,function(q){return"number"==typeof q||q&&!q.hasOwnProperty("x")}),r=l?Math.max(0,Math.floor(g.bounds.from-1)):0;l=l?Math.min(n.data.length,
Math.ceil(g.bounds.to)):n.data.length;var p=e[m]=[];p.min=r;for(p.max=l;r<l;++r){var v=n.data[r];p[r]=this.isNullValue(v)?0:"number"==typeof v?v:v.y}}}return e},rearrangeValues:function(g,e,m){for(var n=0,l=g.length;n<l;++n){var r=g[n];if(r)for(var p=r.min,v=r.max;p<v;++p){var q=r[p];r[p]=this.isNullValue(q)?0:e(q)-m}}return g},isNullValue:function(g){if(null===g||"undefined"==typeof g)return!0;var e=this._hAxis?this._hAxis.isNullValue:h,m=this._vAxis?this._vAxis.isNullValue:h;return"number"==typeof g?
m(.5)||e(g):m(isNaN(g.x)?.5:g.x+.5)||null===g.y||e(g.y)},getBarProperties:function(){var g=d.calculateBarSize(this._vScaler.bounds.scale,this.opt);return{gap:g.gap,height:g.size,thickness:0}},_animateBar:function(g,e,m){0==m&&(m=1);c.animateTransform(y.delegate({shape:g,duration:1200,transform:[{name:"translate",start:[e-e/m,0],end:[0,0]},{name:"scale",start:[1/m,1],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/StackedBars":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./Bars","./commonStacked"],function(y,D,x,A){return y("dojox.charting.plot2d.StackedBars",x,{getSeriesStats:function(){var w=A.collectStats(this.series,D.hitch(this,"isNullValue"));w.hmin-=.5;w.hmax+=.5;var f=w.hmin;w.hmin=w.vmin;w.vmin=f;f=w.hmax;w.hmax=w.vmax;w.vmax=f;return w},rearrangeValues:function(w,f,d){return A.rearrangeValues.call(this,w,f,d)}})})},"dojox/charting/plot2d/ClusteredBars":function(){define(["dojo/_base/declare","dojo/_base/array","./Bars","./common"],function(y,
D,x,A){return y("dojox.charting.plot2d.ClusteredBars",x,{getBarProperties:function(){var w=this.series.length;D.forEach(this.series,function(d){d.hidden&&w--});var f=A.calculateBarSize(this._vScaler.bounds.scale,this.opt,w);return{gap:f.gap,height:f.size,thickness:f.size}}})})},"dojox/charting/plot2d/Grid":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/sniff ./CartesianBase ./common dojox/lang/utils dojox/gfx/fx".split(" "),function(y,D,x,A,w,f,d,c){var a=function(b,h){return b.value-
h.value};return D("dojox.charting.plot2d.Grid",w,{defaultParams:{hMajorLines:!0,hMinorLines:!1,vMajorLines:!0,vMinorLines:!1,hStripes:!1,vStripes:!1,animate:null,enableCache:!1,renderOnAxis:!0},optionalParams:{majorHLine:{},minorHLine:{},majorVLine:{},minorVLine:{},hFill:{},vFill:{},hAlternateFill:{},vAlternateFill:{}},constructor:function(b,h){this.opt=y.clone(this.defaultParams);d.updateWithObject(this.opt,h);d.updateWithPattern(this.opt,h,this.optionalParams);this.animate=this.opt.animate;this.opt.enableCache&&
(this._lineFreePool=[],this._lineUsePool=[],this._rectFreePool=[],this._rectUsePool=[])},addSeries:function(b){return this},getSeriesStats:function(){return y.delegate(f.defaultStats)},cleanGroup:function(){this.inherited(arguments);this.opt.enableCache&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._rectFreePool=this._rectFreePool.concat(this._rectUsePool),this._rectUsePool=[])},createLine:function(b,h){if(this.opt.enableCache&&0<this._lineFreePool.length){var g=
this._lineFreePool.pop();g.setShape(h);b.add(g)}else g=b.createLine(h);this.opt.enableCache&&this._lineUsePool.push(g);return g},createRect:function(b,h){if(this.opt.enableCache&&0<this._rectFreePool.length){var g=this._rectFreePool.pop();g.setShape(h);b.add(g)}else g=b.createRect(h);this.opt.enableCache&&this._rectUsePool.push(g);return g},render:function(b,h){if(this.zoom)return this.performZoom(b,h);this.dirty=this.isDirty();if(!this.dirty)return this;this.cleanGroup();var g=this.getGroup(),e=
this.chart.theme;(A("ios")&&6>A("ios")||A("android")||A("safari")&&!A("ios"))&&g.createRect({x:h.l,y:h.t,width:Math.max(0,b.width-h.l-h.r),height:Math.max(0,b.height-h.t-h.b)});if(this._vAxis){var m=this._vAxis.getTicks();var n=this._vAxis.getScaler();if(null!=m&&null!=n){var l=n.scaler.getTransformerFromModel(n);this.opt.hStripes&&this._renderHRect(m,e.grid,b,h,n,l);this.opt.hMinorLines&&(g=this.opt.minorHLine||e.grid&&e.grid.minorLine||e.axis.minorTick,this._renderHLines(m.minor,g,b,h,n,l));this.opt.hMajorLines&&
(g=this.opt.majorHLine||e.grid&&e.grid.majorLine||e.axis.majorTick,this._renderHLines(m.major,g,b,h,n,l))}}this._hAxis&&(m=this._hAxis.getTicks(),n=this._hAxis.getScaler(),null!=m&&null!=n&&(l=n.scaler.getTransformerFromModel(n),this.opt.vStripes&&this._renderVRect(m,e.grid,b,h,n,l),m&&this.opt.vMinorLines&&(g=this.opt.minorVLine||e.grid&&e.grid.minorLine||e.axis.minorTick,this._renderVLines(m.minor,g,b,h,n,l)),m&&this.opt.vMajorLines&&(g=this.opt.majorVLine||e.grid&&e.grid.majorLine||e.axis.majorTick,
this._renderVLines(m.major,g,b,h,n,l))));this.dirty=!1;return this},_renderHLines:function(b,h,g,e,m,n){var l=this.getGroup();x.forEach(b,function(r){if(this.opt.renderOnAxis||r.value!=(this._vAxis.opt.leftBottom?m.bounds.from:m.bounds.to))r=g.height-e.b-n(r.value),r=this.createLine(l,{x1:e.l,y1:r,x2:g.width-e.r,y2:r}).setStroke(h),this.animate&&this._animateGrid(r,"h",e.l,e.r+e.l-g.width)},this)},_renderVLines:function(b,h,g,e,m,n){var l=this.getGroup();x.forEach(b,function(r){if(this.opt.renderOnAxis||
r.value!=(this._hAxis.opt.leftBottom?m.bounds.from:m.bounds.to))r=e.l+n(r.value),r=this.createLine(l,{x1:r,y1:e.t,x2:r,y2:g.height-e.b}).setStroke(h),this.animate&&this._animateGrid(r,"v",g.height-e.b,g.height-e.b-e.t)},this)},_renderHRect:function(b,h,g,e,m,n){b=b.major.concat(b.minor);b.sort(a);b[0].value>m.bounds.from&&b.splice(0,0,{value:m.bounds.from});b[b.length-1].value<m.bounds.to&&b.push({value:m.bounds.to});m=this.getGroup();for(var l=0;l<b.length-1;l++){var r=b[l];var p=g.height-e.b-n(r.value);
var v=g.height-e.b-n(b[l+1].value);if(r=0==l%2?this.opt.hAlternateFill||h&&h.alternateFill:this.opt.hFill||h&&h.fill)r=this.createRect(m,{x:e.l,y:p,width:g.width-e.r,height:p-v}).setFill(r),this.animate&&this._animateGrid(r,"h",e.l,e.r+e.l-g.width)}},_renderVRect:function(b,h,g,e,m,n){b=b.major.concat(b.minor);b.sort(a);b[0].value>m.bounds.from&&b.splice(0,0,{value:m.bounds.from});b[b.length-1].value<m.bounds.to&&b.push({value:m.bounds.to});m=this.getGroup();for(var l=0;l<b.length-1;l++){var r=b[l];
var p=e.l+n(r.value);var v=e.l+n(b[l+1].value);if(r=0==l%2?this.opt.vAlternateFill||h&&h.alternateFill:this.opt.vFill||h&&h.fill)r=this.createRect(m,{x:p,y:e.t,width:v-p,height:g.width-e.r}).setFill(r),this.animate&&this._animateGrid(r,"v",g.height-e.b,g.height-e.b-e.t)}},_animateGrid:function(b,h,g,e){c.animateTransform(y.delegate({shape:b,duration:1200,transform:[{name:"translate",start:"h"==h?[g,0]:[0,g],end:[0,0]},{name:"scale",start:"h"==h?[1/e,1]:[1,1/e],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},
"dojox/charting/plot2d/Pie":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-geometry dojo/_base/Color ./Base ./_PlotEvents ./common dojox/gfx dojox/gfx/matrix dojox/lang/functional dojox/lang/utils dojo/has".split(" "),function(y,D,x,A,w,f,d,c,a,b,h,g,e){return x("dojox.charting.plot2d.Pie",[f,d],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:!0,radGrad:"native",fanSize:5,startAngle:0,innerRadius:0,minWidth:0,
zeroDataMessage:""},optionalParams:{radius:0,omitLabels:!1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelWiring:{}},constructor:function(m,n){this.opt=y.clone(this.defaultParams);g.updateWithObject(this.opt,n);g.updateWithPattern(this.opt,n,this.optionalParams);this.axes=[];this.run=null;this.dyn=[];this.runFilter=[];n&&n.hasOwnProperty("innerRadius")&&(this._plotSetInnerRadius=!0)},clear:function(){this.inherited(arguments);this.dyn=[];this.run=null;return this},
setAxis:function(m){return this},addSeries:function(m){this.run=m;return this},getSeriesStats:function(){return y.delegate(c.defaultStats)},getRequiredColors:function(){return this.run?this.run.data.length:0},render:function(m,n){if(!this.dirty)return this;this.resetEvents();this.dirty=!1;this._eventSeries={};this.cleanGroup();var l=this.group,r=this.chart.theme;!this._plotSetInnerRadius&&r&&r.pieInnerRadius&&(this.opt.innerRadius=r.pieInnerRadius);var p=(m.width-n.l-n.r)/2,v=(m.height-n.t-n.b)/2,
q=Math.min(p,v),k="font"in this.opt?this.opt.font:r.axis.tick.titleFont||"",z=k?a.normalizedLength(a.splitFontString(k).size):0,B=this.opt.hasOwnProperty("fontColor")?this.opt.fontColor:r.axis.tick.fontColor,H=b._degToRad(this.opt.startAngle),J=H,N,C=this.run.data,L=this.events(),F=y.hitch(this,function(){var U=r.clone(),V=h.map(C,function(da){var ja=[this.opt,this.run];null!==da&&"number"!=typeof da&&ja.push(da);this.opt.styleFunc&&ja.push(this.opt.styleFunc(da));return U.next("slice",ja,!0)},this);
"radius"in this.opt&&(q=this.opt.radius<q?this.opt.radius:q);var X={cx:n.l+p,cy:n.t+v,r:q},aa=new w(B);this.opt.innerRadius&&(aa.a=.1);var ea=this._createRing(l,X).setStroke(aa);this.opt.innerRadius&&ea.setFill(aa);this.opt.zeroDataMessage&&this.renderLabel(l,X.cx,X.cy+z/3,this.opt.zeroDataMessage,{series:{font:k,fontColor:B}},null,"middle");this.dyn=[];D.forEach(C,function(da,ja){this.dyn.push({fill:this._plotFill(V[ja].series.fill,m,n),stroke:V[ja].series.stroke})},this)});if(!this.run&&!this.run.data.ength)return F(),
this;if("number"==typeof C[0]){var K=h.map(C,"x ? Math.max(x, 0) : 0");if(h.every(K,"\x3c\x3d 0"))return F(),this;var t=h.map(K,"/this",h.foldl(K,"+",0));this.opt.labels&&(N=D.map(t,function(U){return 0<U?this._getLabel(100*U)+"%":""},this))}else{K=h.map(C,"x ? Math.max(x.y, 0) : 0");if(!K.length||h.every(K,"\x3c\x3d 0"))return F(),this;t=h.map(K,"/this",h.foldl(K,"+",0));this.opt.labels&&(N=D.map(t,function(U,V){if(0>U)return"";V=C[V];return V.hasOwnProperty("text")?V.text:this._getLabel(100*U)+
"%"},this))}var u=h.map(C,function(U){var V=[this.opt,this.run];null!==U&&"number"!=typeof U&&V.push(U);this.opt.styleFunc&&V.push(this.opt.styleFunc(U));return r.next("slice",V,!0)},this);this.opt.labels&&(K=h.foldl1(h.map(N,function(U,V){return a._base._getTextBox(U,{font:u[V].series.font}).w},this),"Math.max(a, b)")/2,0>this.opt.labelOffset&&(q=Math.min(p-2*K,v-z)+this.opt.labelOffset));this.opt.hasOwnProperty("radius")&&(q=this.opt.radius<.9*q?this.opt.radius:.9*q);!this.opt.radius&&this.opt.labels&&
"columns"==this.opt.labelStyle?(q/=2,p>v&&p>2*q&&(q*=p/(2*q)),q>=.8*v&&(q=.8*v)):q>=.9*v&&(q=.9*v);var E=q-this.opt.labelOffset;var G={cx:n.l+p,cy:n.t+v,r:q};this.dyn=[];var M=Array(t.length),P=[],Q=J,S=this.opt.minWidth;D.forEach(t,function(U,V){if(0===U)P[V]={step:0,end:Q,start:Q,weak:!1};else{U=Q+2*U*Math.PI;V===t.length-1&&(U=H+2*Math.PI);var X=U-Q;P[V]={step:X,start:Q,end:U,weak:X*q<S};Q=U}});if(0<S){K=0;var I=S/q;F=0;var O;for(O=P.length-1;0<=O;O--)P[O].weak&&(++K,F+=P[O].step,P[O].step=I);
I*=K;if(I>Math.PI){I=Math.PI/K;for(O=0;O<P.length;++O)P[O].weak&&(P[O].step=I);I=Math.PI}if(0<K)for(I=1-(I-F)/2/Math.PI,O=0;O<P.length;++O)P[O].weak||(P[O].step*=I);for(O=0;O<P.length;++O)P[O].start=O?P[O].end:Q,P[O].end=P[O].start+P[O].step;for(O=P.length-1;0<=O;--O)if(0!==P[O].step){P[O].end=Q+2*Math.PI;break}}Q=J;var R,T;D.some(t,function(U,V){var X=C[V],aa=u[V];if(1<=U){T=this._plotFill(aa.series.fill,m,n);T=this._shapeFill(T,{x:G.cx-G.r,y:G.cy-G.r,width:2*G.r,height:2*G.r});T=this._pseudoRadialFill(T,
{x:G.cx,y:G.cy},G.r);var ea=this._createRing(l,G).setFill(T).setStroke(aa.series.stroke);this.dyn.push({fill:T,stroke:aa.series.stroke});L&&(R={element:"slice",index:V,run:this.run,shape:ea,x:V,y:"number"==typeof X?X:X.y,cx:G.cx,cy:G.cy,cr:q},this._connectEvents(R),M[V]=R);for(V+=1;V<t.length;V++)aa=u[V],this.dyn.push({fill:aa.series.fill,stroke:aa.series.stroke});return!0}if(0===P[V].step)return this.dyn.push({fill:aa.series.fill,stroke:aa.series.stroke}),!1;U=P[V].step;ea=G.cx+q*Math.cos(Q);var da=
G.cy+q*Math.sin(Q),ja=G.cx+q*Math.cos(Q+U),fa=G.cy+q*Math.sin(Q+U),ca=b._degToRad(this.opt.fanSize);if(aa.series.fill&&"radial"===aa.series.fill.type&&"fan"===this.opt.radGrad&&U>ca){var ma=l.createGroup();ca=Math.ceil(U/ca);var oa=U/ca;T=this._shapeFill(aa.series.fill,{x:G.cx-G.r,y:G.cy-G.r,width:2*G.r,height:2*G.r});var ha;for(ha=0;ha<ca;++ha){var qa=Q+(ha-.2)*oa;var pa=Q+(ha+1+.2)*oa;var ra=0==ha?ea:G.cx+q*Math.cos(qa);var sa=0==ha?da:G.cy+q*Math.sin(qa);var ta=ha==ca-1?ja:G.cx+q*Math.cos(pa);
pa=ha==ca-1?fa:G.cy+q*Math.sin(pa);this._createSlice(ma,G,q,ra,sa,ta,pa,qa,oa).setFill(this._pseudoRadialFill(T,{x:G.cx,y:G.cy},q,Q+(ha+.5)*oa,Q+(ha+.5)*oa))}ca=aa.series.stroke;this._createSlice(ma,G,q,ea,da,ja,fa,Q,U).setStroke(ca);ea=ma}else{ca=aa.series.stroke;ea=this._createSlice(l,G,q,ea,da,ja,fa,Q,U).setStroke(ca);if((T=aa.series.fill)&&"radial"===T.type)T=this._shapeFill(T,{x:G.cx-G.r,y:G.cy-G.r,width:2*G.r,height:2*G.r}),"linear"===this.opt.radGrad&&(T=this._pseudoRadialFill(T,{x:G.cx,y:G.cy},
q,Q,Q+U));else if(T&&"linear"===T.type){da=y.clone(ea.getBoundingBox());if("svg"===a.renderer){ja={w:0,h:0};try{ja=A.position(ea.rawNode)}catch(ua){}ja.h>da.height&&(da.height=ja.h);ja.w>da.width&&(da.width=ja.w)}T=this._plotFill(T,m,n);T=this._shapeFill(T,da)}ea.setFill(T)}this.dyn.push({fill:T,stroke:aa.series.stroke});L&&(R={element:"slice",index:V,run:this.run,shape:ea,x:V,y:"number"==typeof X?X:X.y,cx:G.cx,cy:G.cy,cr:q},this._connectEvents(R),M[V]=R);Q+=U;return!1},this);if(this.opt.labels){var W=
e("dojo-bidi")&&this.chart.isRightToLeft();if("default"==this.opt.labelStyle)Q=J=H,D.some(t,function(U,V){if(0>=U&&!this.opt.minWidth)return!1;var X=u[V];if(1<=U)return this.renderLabel(l,G.cx,G.cy+z/2,N[V],X,0<this.opt.labelOffset),!0;U=J+2*U*Math.PI;V+1==t.length&&(U=H+2*Math.PI);if(this.opt.omitLabels&&.001>U-J)return!1;var aa=Q+P[V].step/2,ea=G.cx+E*Math.cos(aa);this.renderLabel(l,W?m.width-ea:ea,G.cy+E*Math.sin(aa)+z/2,N[V],X,0<this.opt.labelOffset);Q+=P[V].step;J=U;return!1},this);else if("columns"==
this.opt.labelStyle){var na=this.opt.omitLabels;Q=J=H;var Z=[],ba=0;for(K=t.length-1;0<=K;--K)t[K]&&++ba;D.forEach(t,function(U,V){U=J+2*U*Math.PI;V+1==t.length&&(U=H+2*Math.PI);if(0!==this.minWidth||.001<=U-J){var X=Q+P[V].step/2;1!==ba||this.opt.minWidth||(X=(J+U)/2);Z.push({angle:X,left:0>Math.cos(X),theme:u[V],index:V,omit:na?.001>U-J:!1})}J=U;Q+=P[V].step},this);var ka=a._base._getTextBox("a",{font:k,whiteSpace:"nowrap"}).h;this._getProperLabelRadius(Z,ka,1.1*G.r);var la=G.cx-2*G.r,Y=G.cx+2*
G.r;D.forEach(Z,function(U){if(!U.omit){var V=u[U.index],X=0;V&&V.axis&&V.axis.tick&&V.axis.tick.labelGap&&(X=V.axis.tick.labelGap);var aa=a._base._getTextBox(N[U.index],{font:V.series.font,whiteSpace:"nowrap",paddingLeft:X+"px"}).w,ea=G.cx+U.labelR*Math.cos(U.angle),da=G.cy+U.labelR*Math.sin(U.angle),ja=U.left?la+aa:Y-aa;X=U.left?la:ja+X;var fa=G.r;fa=l.createPath().moveTo(G.cx+fa*Math.cos(U.angle),G.cy+fa*Math.sin(U.angle));Math.abs(U.labelR*Math.cos(U.angle))<2*G.r-aa&&fa.lineTo(ea,da);fa.lineTo(ja,
da).setStroke(U.theme.series.labelWiring);fa.moveToBack();ea=this.renderLabel(l,X,ka/3+da||0,N[U.index],V,!1,"left");L&&!this.opt.htmlLabels&&(V=a._base._getTextBox(N[U.index],{font:U.theme.series.font}).w||0,aa=a.normalizedLength(a.splitFontString(U.theme.series.font).size),R={element:"labels",index:U.index,run:this.run,shape:ea,x:X,y:da,label:N[U.index]},X=ea.getShape(),da=A.position(this.chart.node,!0),X=y.mixin({type:"rect"},{x:X.x,y:X.y-2*aa}),X.x+=da.x,X.y+=da.y,X.x=Math.round(X.x),X.y=Math.round(X.y),
X.width=Math.ceil(V),X.height=Math.ceil(aa),R.aroundRect=X,this._connectEvents(R),M[t.length+U.index]=R)}},this)}}var ia=0;this._eventSeries[this.run.name]=h.map(C,function(U){return 0>=U?null:M[ia++]});e("dojo-bidi")&&this._checkOrientation(this.group,m,n);return this},_getProperLabelRadius:function(m,n,l){if(1==m.length)m[0].labelR=l;else{var r={},p={},v=2,q=2,k;for(k=0;k<m.length;++k){var z=Math.abs(Math.sin(m[k].angle));m[k].left?v>z&&(v=z,r=m[k]):q>z&&(q=z,p=m[k])}r.labelR=p.labelR=l;this._caculateLabelR(r,
m,n);this._caculateLabelR(p,m,n)}},_caculateLabelR:function(m,n,l){var r,p=n.length,v=m.labelR,q=n[m.index].left?-l:l;var k=0;l=m.index;for(r=(l+1)%p;k<p&&n[l].left===n[r].left;++k)v=(Math.sin(n[l].angle)*v+q)/Math.sin(n[r].angle),v=Math.max(m.labelR,v),n[r].labelR=v,l=(l+1)%p,r=(r+1)%p;k>=p&&(n[0].labelR=m.labelR);k=0;l=m.index;for(r=(l||p)-1;k<p&&n[l].left===n[r].left;++k)v=(Math.sin(n[l].angle)*v-q)/Math.sin(n[r].angle),v=Math.max(m.labelR,v),n[r].labelR=v,l=(l||p)-1,r=(r||p)-1},_createRing:function(m,
n){var l=this.opt.innerRadius;0<l?l=l/100*n.r:0>l&&(l=-l);return l?m.createPath({}).setAbsoluteMode(!0).moveTo(n.cx,n.cy-n.r).arcTo(n.r,n.r,0,!1,!0,n.cx+n.r,n.cy).arcTo(n.r,n.r,0,!0,!0,n.cx,n.cy-n.r).closePath().moveTo(n.cx,n.cy-l).arcTo(l,l,0,!1,!0,n.cx+l,n.cy).arcTo(l,l,0,!0,!0,n.cx,n.cy-l).closePath():m.createCircle(n)},_createSlice:function(m,n,l,r,p,v,q,k,z){var B=this.opt.innerRadius;0<B?B=B/100*n.r:0>B&&(B=-B);if(B){var H=n.cx+B*Math.cos(k),J=n.cy+B*Math.sin(k),N=n.cx+B*Math.cos(k+z);n=n.cy+
B*Math.sin(k+z);return m.createPath({}).setAbsoluteMode(!0).moveTo(H,J).lineTo(r,p).arcTo(l,l,0,z>Math.PI,!0,v,q).lineTo(N,n).arcTo(B,B,0,z>Math.PI,!1,H,J).closePath()}return m.createPath({}).setAbsoluteMode(!0).moveTo(n.cx,n.cy).lineTo(r,p).arcTo(l,l,0,z>Math.PI,!0,v,q).lineTo(n.cx,n.cy).closePath()}})})},"dojox/charting/plot2d/Bubble":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),
function(y,D,x,A,w,f,d,c,a,b){return D("dojox.charting.plot2d.Bubble",[w,f],{defaultParams:{animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelFunc:null},constructor:function(h,g){this.opt=y.clone(y.mixin(this.opt,this.defaultParams));a.updateWithObject(this.opt,g);a.updateWithPattern(this.opt,g,this.optionalParams);this.opt.labelFunc||(this.opt.labelFunc=function(e,m,n){return this._getLabel(e.size,m,n)});this.animate=this.opt.animate},
render:function(h,g){if(this.zoom&&!this.isDataDirty())return this.performZoom(h,g);this.resetEvents();if(this.dirty=this.isDirty()){x.forEach(this.series,d.purgeGroup);this._eventSeries={};this.cleanGroup();var e=this.getGroup();c.forEachRev(this.series,function(L){L.cleanGroup(e)})}for(var m=this.chart.theme,n=this._hScaler.scaler.getTransformerFromModel(this._hScaler),l=this._vScaler.scaler.getTransformerFromModel(this._vScaler),r=this.events(),p=0;p<this.series.length;p++){var v=this.series[p];
if(this.dirty||v.dirty)if(v.cleanGroup(),v.data.length)if("number"==typeof v.data[0])console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",v);else{var q=m.next("circle",[this.opt,v]),k=x.map(v.data,function(L){return L?{x:n(L.x)+g.l,y:h.height-g.b-l(L.y),radius:L.size/2*this._vScaler.bounds.scale}:null},this);if(v.hidden)v.dyn.fill=q.series.fill,v.dyn.stroke=q.series.stroke;else{e=v.group;var z=null,B=null,H=null,J=this.opt.styleFunc,
N=function(L){return J?m.addMixin(q,"circle",[L,J(L)],!0):m.addMixin(q,"circle",L,!0)};q.series.shadow&&(H=x.map(k,function(L,F){return this.isNullValue(L)?null:(F=N(v.data[F]).series.shadow,F=e.createCircle({cx:L.x+F.dx,cy:L.y+F.dy,r:L.radius}).setStroke(F).setFill(F.color),this.animate&&this._animateBubble(F,h.height-g.b,L.radius),F)},this),H.length&&(v.dyn.shadow=H[H.length-1].getStroke()));q.series.outline&&(B=x.map(k,function(L,F){return this.isNullValue(L)?null:(F=N(v.data[F]),F=d.makeStroke(F.series.outline),
F.width=2*F.width+(q.series.stroke&&q.series.stroke.width||0),F=e.createCircle({cx:L.x,cy:L.y,r:L.radius}).setStroke(F),this.animate&&this._animateBubble(F,h.height-g.b,L.radius),F)},this),B.length&&(v.dyn.outline=B[B.length-1].getStroke()));z=x.map(k,function(L,F){if(!this.isNullValue(L)){var K=N(v.data[F]),t={x:L.x-L.radius,y:L.y-L.radius,width:2*L.radius,height:2*L.radius},u=this._plotFill(K.series.fill,h,g);u=this._shapeFill(u,t);u=e.createCircle({cx:L.x,cy:L.y,r:L.radius}).setFill(u).setStroke(K.series.stroke);
u.setFilter&&K.series.filter&&u.setFilter(K.series.filter);this.animate&&this._animateBubble(u,h.height-g.b,L.radius);this.createLabel(e,v.data[F],t,K);return u}return null},this);z.length&&(v.dyn.fill=z[z.length-1].getFill(),v.dyn.stroke=z[z.length-1].getStroke());if(r){var C=Array(z.length);x.forEach(z,function(L,F){null!==L&&(L={element:"circle",index:F,run:v,shape:L,outline:B&&B[F]||null,shadow:H&&H[F]||null,x:v.data[F].x,y:v.data[F].y,r:v.data[F].size/2,cx:k[F].x,cy:k[F].y,cr:k[F].radius},this._connectEvents(L),
C[F]=L)},this);this._eventSeries[v.name]=C}else delete this._eventSeries[v.name];v.dirty=!1}}else v.dirty=!1,m.skip();else m.skip(),this._reconnectEvents(v.name)}this.dirty=!1;A("dojo-bidi")&&this._checkOrientation(this.group,h,g);return this},_animateBubble:function(h,g,e){b.animateTransform(y.delegate({shape:h,duration:1200,transform:[{name:"translate",start:[0,g],end:[0,0]},{name:"scale",start:[0,1/e],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Candlesticks":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),
function(y,D,x,A,w,f,d,c,a,b){return D("dojox.charting.plot2d.Candlesticks",[w,f],{defaultParams:{gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(h,g){this.opt=y.clone(this.defaultParams);a.updateWithObject(this.opt,g);a.updateWithPattern(this.opt,g,this.optionalParams);this.animate=this.opt.animate},collectStats:function(h){for(var g=y.delegate(d.defaultStats),e=0;e<h.length;e++){var m=h[e];if(m.data.length){var n=
g.vmin,l=g.vmax;"ymin"in m&&"ymax"in m||x.forEach(m.data,function(r,p){this.isNullValue(r)||(p=r.x||p+1,g.hmin=Math.min(g.hmin,p),g.hmax=Math.max(g.hmax,p),g.vmin=Math.min(g.vmin,r.open,r.close,r.high,r.low),g.vmax=Math.max(g.vmax,r.open,r.close,r.high,r.low))},this);"ymin"in m&&(g.vmin=Math.min(n,m.ymin));"ymax"in m&&(g.vmax=Math.max(l,m.ymax))}}return g},getSeriesStats:function(){var h=this.collectStats(this.series);h.hmin-=.5;h.hmax+=.5;return h},render:function(h,g){if(this.zoom&&!this.isDataDirty())return this.performZoom(h,
g);this.resetEvents();this.dirty=this.isDirty();if(this.dirty){x.forEach(this.series,d.purgeGroup);this._eventSeries={};this.cleanGroup();var e=this.getGroup();c.forEachRev(this.series,function(I){I.cleanGroup(e)})}var m=this.chart.theme,n=this._hScaler.scaler.getTransformerFromModel(this._hScaler),l=this._vScaler.scaler.getTransformerFromModel(this._vScaler),r=this.events();var p=d.calculateBarSize(this._hScaler.bounds.scale,this.opt);var v=p.gap;p=p.size;for(var q=this.series.length-1;0<=q;--q){var k=
this.series[q];if(this.dirty||k.dirty){k.cleanGroup();var z=m.next("candlestick",[this.opt,k]),B=Array(k.data.length);if(k.hidden)k.dyn.fill=z.series.fill,k.dyn.stroke=z.series.stroke;else{e=k.group;for(var H=0;H<k.data.length;++H){var J=k.data[H];if(!this.isNullValue(J)){var N=m.addMixin(z,"candlestick",J,!0),C=n(J.x||H+.5)+g.l+v,L=h.height-g.b,F=l(J.open),K=l(J.close),t=l(J.high),u=l(J.low);if("mid"in J)var E=l(J.mid);if(u>t){var G=t;t=u;u=G}if(1<=p){G=F>K;var M={x1:p/2,x2:p/2,y1:L-t,y2:L-u},P=
{x:0,y:L-Math.max(F,K),width:p,height:Math.max(G?F-K:K-F,1)},Q=e.createGroup();Q.setTransform({dx:C,dy:0});var S=Q.createGroup();S.createLine(M).setStroke(N.series.stroke);S.createRect(P).setStroke(N.series.stroke).setFill(G?N.series.fill:"white");"mid"in J&&S.createLine({x1:N.series.stroke?N.series.stroke.width||1:1,x2:p-(N.series.stroke?N.series.stroke.width||1:1),y1:L-E,y2:L-E}).setStroke(G?"white":N.series.stroke);k.dyn.fill=N.series.fill;k.dyn.stroke=N.series.stroke;r&&(J={element:"candlestick",
index:H,run:k,shape:S,x:C,y:L-Math.max(F,K),cx:p/2,cy:L-Math.max(F,K)+Math.max(G?F-K:K-F,1)/2,width:p,height:Math.max(G?F-K:K-F,1),data:J},this._connectEvents(J),B[H]=J)}this.animate&&this._animateCandlesticks(Q,L-u,t-u)}}this._eventSeries[k.name]=B;k.dirty=!1}}else m.skip(),this._reconnectEvents(k.name)}this.dirty=!1;A("dojo-bidi")&&this._checkOrientation(this.group,h,g);return this},tooltipFunc:function(h){return'\x3ctable cellpadding\x3d"1" cellspacing\x3d"0" border\x3d"0" style\x3d"font-size:0.9em;"\x3e\x3ctr\x3e\x3ctd\x3eOpen:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+
h.data.open+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eHigh:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+h.data.high+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eLow:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+h.data.low+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eClose:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+h.data.close+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e"+(void 0!==h.data.mid?'\x3ctr\x3e\x3ctd\x3eMid:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+
h.data.mid+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e":"")+"\x3c/table\x3e"},_animateCandlesticks:function(h,g,e){b.animateTransform(y.delegate({shape:h,duration:1200,transform:[{name:"translate",start:[0,g-g/e],end:[0,0]},{name:"scale",start:[1,1/e],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/OHLC":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),
function(y,D,x,A,w,f,d,c,a,b){return x("dojox.charting.plot2d.OHLC",[w,f],{defaultParams:{gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(h,g){this.opt=y.clone(this.defaultParams);a.updateWithObject(this.opt,g);a.updateWithPattern(this.opt,g,this.optionalParams);this.animate=this.opt.animate},collectStats:function(h){for(var g=y.delegate(d.defaultStats),e=0;e<h.length;e++){var m=h[e];if(m.data.length){var n=
g.vmin,l=g.vmax;"ymin"in m&&"ymax"in m||D.forEach(m.data,function(r,p){this.isNullValue(r)||(p=r.x||p+1,g.hmin=Math.min(g.hmin,p),g.hmax=Math.max(g.hmax,p),g.vmin=Math.min(g.vmin,r.open,r.close,r.high,r.low),g.vmax=Math.max(g.vmax,r.open,r.close,r.high,r.low))},this);"ymin"in m&&(g.vmin=Math.min(n,m.ymin));"ymax"in m&&(g.vmax=Math.max(l,m.ymax))}}return g},getSeriesStats:function(){var h=this.collectStats(this.series);h.hmin-=.5;h.hmax+=.5;return h},render:function(h,g){if(this.zoom&&!this.isDataDirty())return this.performZoom(h,
g);this.resetEvents();if(this.dirty=this.isDirty()){D.forEach(this.series,d.purgeGroup);this._eventSeries={};this.cleanGroup();var e=this.getGroup();c.forEachRev(this.series,function(S){S.cleanGroup(e)})}var m=this.chart.theme,n=this._hScaler.scaler.getTransformerFromModel(this._hScaler),l=this._vScaler.scaler.getTransformerFromModel(this._vScaler),r=this.events();var p=d.calculateBarSize(this._hScaler.bounds.scale,this.opt);var v=p.gap;p=p.size;for(var q=0;q<this.series.length;q++){var k=this.series[q];
if(this.dirty||k.dirty){k.cleanGroup();var z=m.next("candlestick",[this.opt,k]);e=k.group;for(var B=Array(k.data.length),H=0;H<k.data.length;++H){var J=k.data[H];if(!this.isNullValue(J)){var N=m.addMixin(z,"candlestick",J,!0),C=n(J.x||H+.5)+g.l+v,L=h.height-g.b,F=l(J.open),K=l(J.close),t=l(J.high),u=l(J.low);if(u>t){var E=t;t=u;u=E}if(1<=p){E={x1:p/2,x2:p/2,y1:L-t,y2:L-u};var G={x1:0,x2:p/2+(N.series.stroke?N.series.stroke.width||1:1)/2,y1:L-F,y2:L-F},M={x1:p/2-(N.series.stroke?N.series.stroke.width||
1:1)/2,x2:p,y1:L-K,y2:L-K},P=e.createGroup();P.setTransform({dx:C,dy:0});var Q=P.createGroup();Q.createLine(E).setStroke(N.series.stroke);Q.createLine(G).setStroke(N.series.stroke);Q.createLine(M).setStroke(N.series.stroke);k.dyn.stroke=N.series.stroke;r&&(J={element:"candlestick",index:H,run:k,shape:Q,x:C,y:L-Math.max(F,K),cx:p/2,cy:L-Math.max(F,K)+Math.max(F>K?F-K:K-F,1)/2,width:p,height:Math.max(F>K?F-K:K-F,1),data:J},this._connectEvents(J),B[H]=J)}this.animate&&this._animateOHLC(P,L-u,t-u)}}this._eventSeries[k.name]=
B;k.dirty=!1}else m.skip(),this._reconnectEvents(k.name)}this.dirty=!1;A("dojo-bidi")&&this._checkOrientation(this.group,h,g);return this},_animateOHLC:function(h,g,e){b.animateTransform(y.delegate({shape:h,duration:1200,transform:[{name:"translate",start:[0,g-g/e],end:[0,0]},{name:"scale",start:[1,1/e],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Spider":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/dom-geometry dojo/_base/fx dojo/fx dojo/sniff ./Base ./_PlotEvents ./common ../axis2d/common dojox/gfx dojox/gfx/matrix dojox/gfx/fx dojox/lang/functional dojox/lang/utils dojo/fx/easing".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p){return D("dojox.charting.plot2d.Spider",[a,b],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:!0,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:.2,spiderOrigin:.16,markerSize:3,spiderType:"polygon",animationType:p.backOut,animate:null,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",
fontColor:""},constructor:function(v,q){this.opt=y.clone(this.defaultParams);r.updateWithObject(this.opt,q);r.updateWithPattern(this.opt,q,this.optionalParams);this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animate=null===this.opt.animate?{}:this.opt.animate;this.animations={}},clear:function(){this.inherited(arguments);this.dyn=[];this.axes=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this},setAxis:function(v){v&&(void 0!=v.opt.min&&(this.datas[v.name].min=
v.opt.min),void 0!=v.opt.max&&(this.datas[v.name].max=v.opt.max));return this},addSeries:function(v){this.series.push(v);for(var q in v.data){var k=v.data[q],z=this.datas[q];z?(z.vlist.push(k),z.min=Math.min(z.min,k),z.max=Math.max(z.max,k)):(z="__"+q,this.axes.push(z),this[z]=q,this.datas[q]={min:k,max:k,vlist:[k]})}if(0>=this.labelKey.length)for(q in v.data)this.labelKey.push(q);return this},getSeriesStats:function(){return h.collectSimpleStats(this.series,function(v){return null===v})},render:function(v,
q){if(!this.dirty)return this;this.dirty=!1;this.cleanGroup();var k=this.group,z=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length)return this;var B=this.opt,H=z.axis,J=(v.width-q.l-q.r)/2,N=(v.height-q.t-q.b)/2,C=Math.min(J,N),L=B.font||H.majorTick&&H.majorTick.font||H.tick&&H.tick.font||"normal normal normal 7pt Tahoma",F=B.axisFont||H.tick&&H.tick.titleFont||"normal normal normal 11pt Tahoma",K=B.axisTickFontColor||H.majorTick&&H.majorTick.fontColor||H.tick&&H.tick.fontColor||
"silver",t=B.axisFontColor||H.tick&&H.tick.titleFontColor||"black",u=B.axisColor||H.tick&&H.tick.axisColor||"silver",E=B.spiderColor||H.tick&&H.tick.spiderColor||"silver",G=B.axisWidth||H.stroke&&H.stroke.width||2,M=B.spiderWidth||H.stroke&&H.stroke.width||2;H=B.seriesWidth||H.stroke&&H.stroke.width||2;var P=e.normalizedLength(e.splitFontString(F).size),Q=m._degToRad(B.startAngle),S=B.spiderOrigin,I=3<=B.divisions?B.divisions:3,O=B.markerSize,R=B.spiderType,T=B.animationType,W=-10>B.labelOffset?B.labelOffset:
-10;if(B.labels){C=A.map(this.series,function(da){return da.name},this);C=l.foldl1(l.map(C,function(da){return e._base._getTextBox(da,{font:z.series.font}).w},this),"Math.max(a, b)")/2;C=Math.min(J-2*C,N-P)+W;var na=C-W}"radius"in B&&(C=B.radius,na=C-W);C/=1.2;q={cx:q.l+J,cy:q.t+N,r:C};for(J=0;J<this.series.length;J++){var Z=this.series[J];if(this.dirty||Z.dirty){if(Z.cleanGroup(),P=Z.data,null!==P&&(N=this._getObjectLength(P),!ba||0>=ba.length)){var ba=[];var ka=[];var la=[];this._buildPoints(ba,
N,q,C,Q,!0,v);this._buildPoints(ka,N,q,C*S,Q,!0,v);this._buildPoints(la,N,q,na,Q,!1,v);if(2<I){var Y=[];var ia=[];for(P=0;P<I-2;P++)Y[P]=[],this._buildPoints(Y[P],N,q,C*(S+(1-S)*(P+1)/(I-1)),Q,!0,v),ia[P]=C*(S+(1-S)*(P+1)/(I-1))}}}else z.skip()}N=k.createGroup();u={color:u,width:G};J={color:E,width:M};for(P=ba.length-1;0<=P;--P)E=ba[P],M={x:E.x+.2*(E.x-q.cx),y:E.y+.2*(E.y-q.cy)},E={x:E.x+.2*(E.x-q.cx)/2,y:E.y+.2*(E.y-q.cy)/2},N.createLine({x1:q.cx,y1:q.cy,x2:M.x,y2:M.y}).setStroke(u),this._drawArrow(N,
M,E,u);N=k.createGroup();for(P=la.length-1;0<=P;--P)E=la[P],M=e._base._getTextBox(this.labelKey[P],{font:F}).w||0,u=this.opt.htmlLabels&&"vml"!=e.renderer?"html":"gfx",E=g.createText[u](this.chart,N,w.isBodyLtr()||"html"!=u?E.x:E.x+M-v.width,E.y,"middle",this.labelKey[P],F,t),this.opt.htmlLabels&&this.htmlElements.push(E);F=k.createGroup();if("polygon"==R){if(F.createPolyline(ba).setStroke(J),F.createPolyline(ka).setStroke(J),0<Y.length)for(P=Y.length-1;0<=P;--P)F.createPolyline(Y[P]).setStroke(J)}else if(F.createCircle({cx:q.cx,
cy:q.cy,r:C}).setStroke(J),F.createCircle({cx:q.cx,cy:q.cy,r:C*S}).setStroke(J),0<ia.length)for(P=ia.length-1;0<=P;--P)F.createCircle({cx:q.cx,cy:q.cy,r:ia[P]}).setStroke(J);N=this._getObjectLength(this.datas);t=k.createGroup();Y=0;for(var U in this.datas){ia=this.datas[U];ba=ia.min;ia=ia.max;ia-=ba;F=Q+2*Math.PI*Y/N;for(J=0;J<I;J++)la=ba+ia*J/(I-1),E=this._getCoordinate(q,C*(S+(1-S)*J/(I-1)),F,v),la=this._getLabel(la),M=e._base._getTextBox(la,{font:L}).w||0,u=this.opt.htmlLabels&&"vml"!=e.renderer?
"html":"gfx",this.opt.htmlLabels&&this.htmlElements.push(g.createText[u](this.chart,t,w.isBodyLtr()||"html"!=u?E.x:E.x+M-v.width,E.y,"start",la,L,K));Y++}this.chart.seriesShapes={};for(J=this.series.length-1;0<=J;J--)if(Z=this.series[J],P=Z.data,null!==P){L=z.next("spider",[B,Z]);var V=e.normalizeColor(L.series.fill);L={color:L.series.fill,width:H};V.a=B.seriesFillAlpha;Z.dyn={fill:V,stroke:L};if(!Z.hidden){var X=[],aa=[];Y=0;for(U in P)ia=this.datas[U],ba=ia.min,ia=ia.max,ia-=ba,K=P[U],F=Q+2*Math.PI*
Y/N,E=this._getCoordinate(q,C*(S+(1-S)*(K-ba)/ia),F,v),X.push(E),aa.push({sname:Z.name,key:U,data:K}),Y++;X[X.length]=X[0];aa[aa.length]=aa[0];K=this._getBoundary(X);var ea=Z.group;L=this._createSeriesEntry(ea,this.oldSeriePoints[Z.name]||ka,X,V,L,C,S,O,T);this.chart.seriesShapes[Z.name]=L;this.oldSeriePoints[Z.name]=X;this._connectEvents({element:"spider_poly",index:J,id:"spider_poly_"+Z.name,run:Z,plot:this,shape:L.poly,parent:ea,brect:K,cx:q.cx,cy:q.cy,cr:C,f:V,s:k});this._connectEvents({element:"spider_plot",
index:J,id:"spider_plot_"+Z.name,run:Z,plot:this,shape:Z.group});A.forEach(L.circles,function(da,ja){this._connectEvents({element:"spider_circle",index:ja,id:"spider_circle_"+Z.name+ja,run:Z,plot:this,shape:da,parent:ea,tdata:aa[ja],cx:X[ja].x,cy:X[ja].y,f:V,s:k})},this)}}return this},_createSeriesEntry:function(v,q,k,z,B,H,J,N,C){H=this.animate?q:k;var L=v.createPolyline(H).setFill(z).setStroke(B),F=[];for(J=0;J<H.length;J++){var K=H[J];K=v.createCircle({cx:K.x,cy:K.y,r:N}).setFill(z).setStroke(B);
F.push(K)}this.animate&&(z=A.map(k,function(t,u){t=new f.Animation(y.delegate({duration:1E3,easing:C,curve:[q[u].y,t.y]},this.animate));var E=F[u];x.connect(t,"onAnimate",function(G){var M=L.getShape();M.points[u].y=G;L.setShape(M);M=E.getShape();M.cy=G;E.setShape(M)});return t},this),k=A.map(k,function(t,u){t=new f.Animation(y.delegate({duration:1E3,easing:C,curve:[q[u].x,t.x]},this.animate));var E=F[u];x.connect(t,"onAnimate",function(G){var M=L.getShape();M.points[u].x=G;L.setShape(M);M=E.getShape();
M.cx=G;E.setShape(M)});return t},this),d.combine(z.concat(k)).play());return{group:v,poly:L,circles:F}},plotEvent:function(v){"spider_plot"==v.element&&("onmouseover"!=v.type||c("ie")||v.shape.moveToFront())},tooltipFunc:function(v){return"spider_circle"==v.element?v.tdata.sname+"\x3cbr/\x3e"+v.tdata.key+"\x3cbr/\x3e"+v.tdata.data:null},_getBoundary:function(v){for(var q=v[0].x,k=v[0].x,z=v[0].y,B=v[0].y,H=0;H<v.length;H++){var J=v[H];q=Math.max(J.x,q);z=Math.max(J.y,z);k=Math.min(J.x,k);B=Math.min(J.y,
B)}return{x:k,y:B,width:q-k,height:z-B}},_drawArrow:function(v,q,k,z){var B=Math.sqrt(Math.pow(k.x-q.x,2)+Math.pow(k.y-q.y,2)),H=(k.y-q.y)/B,J=(k.x-q.x)/B;v.createPolyline([q,{x:k.x+B/3*-H,y:k.y+B/3*J},{x:k.x+B/3*H,y:k.y+B/3*-J}]).setFill(z.color).setStroke(z)},_buildPoints:function(v,q,k,z,B,H,J){for(var N=0;N<q;N++)v.push(this._getCoordinate(k,z,B+2*Math.PI*N/q,J));H&&v.push(this._getCoordinate(k,z,B+2*Math.PI,J))},_getCoordinate:function(v,q,k,z){var B=v.cx+q*Math.cos(k);c("dojo-bidi")&&this.chart.isRightToLeft()&&
z&&(B=z.width-B);return{x:B,y:v.cy+q*Math.sin(k)}},_getObjectLength:function(v){var q=0;if(y.isObject(v))for(var k in v)q++;return q},_getLabel:function(v){return h.getLabel(v,this.opt.fixed,this.opt.precision)}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(y){var D={linear:function(x){return x},quadIn:function(x){return Math.pow(x,2)},quadOut:function(x){return x*(x-2)*-1},quadInOut:function(x){x*=2;return 1>x?Math.pow(x,2)/2:-1*(--x*(x-2)-1)/2},cubicIn:function(x){return Math.pow(x,
3)},cubicOut:function(x){return Math.pow(x-1,3)+1},cubicInOut:function(x){x*=2;return 1>x?Math.pow(x,3)/2:(Math.pow(x-2,3)+2)/2},quartIn:function(x){return Math.pow(x,4)},quartOut:function(x){return-1*(Math.pow(x-1,4)-1)},quartInOut:function(x){x*=2;return 1>x?Math.pow(x,4)/2:-.5*(Math.pow(x-2,4)-2)},quintIn:function(x){return Math.pow(x,5)},quintOut:function(x){return Math.pow(x-1,5)+1},quintInOut:function(x){x*=2;return 1>x?Math.pow(x,5)/2:(Math.pow(x-2,5)+2)/2},sineIn:function(x){return-1*Math.cos(Math.PI/
2*x)+1},sineOut:function(x){return Math.sin(Math.PI/2*x)},sineInOut:function(x){return-1*(Math.cos(Math.PI*x)-1)/2},expoIn:function(x){return 0==x?0:Math.pow(2,10*(x-1))},expoOut:function(x){return 1==x?1:-1*Math.pow(2,-10*x)+1},expoInOut:function(x){if(0==x)return 0;if(1==x)return 1;x*=2;if(1>x)return Math.pow(2,10*(x-1))/2;--x;return(-1*Math.pow(2,-10*x)+2)/2},circIn:function(x){return-1*(Math.sqrt(1-Math.pow(x,2))-1)},circOut:function(x){return Math.sqrt(1-Math.pow(x-1,2))},circInOut:function(x){x*=
2;return 1>x?-.5*(Math.sqrt(1-Math.pow(x,2))-1):.5*(Math.sqrt(1-Math.pow(x-2,2))+1)},backIn:function(x){return Math.pow(x,2)*(2.70158*x-1.70158)},backOut:function(x){--x;return Math.pow(x,2)*(2.70158*x+1.70158)+1},backInOut:function(x){x*=2;if(1>x)return Math.pow(x,2)*(3.5949095*x-2.5949095)/2;x-=2;return(Math.pow(x,2)*(3.5949095*x+2.5949095)+2)/2},elasticIn:function(x){if(0==x||1==x)return x;--x;return-1*Math.pow(2,10*x)*Math.sin(2*(x-.075)*Math.PI/.3)},elasticOut:function(x){return 0==x||1==x?x:
Math.pow(2,-10*x)*Math.sin(2*(x-.075)*Math.PI/.3)+1},elasticInOut:function(x){if(0==x)return 0;x*=2;if(2==x)return 1;var A=.3*1.5,w=A/4;if(1>x)return--x,-.5*Math.pow(2,10*x)*Math.sin(2*(x-w)*Math.PI/A);--x;return.5*Math.pow(2,-10*x)*Math.sin(2*(x-w)*Math.PI/A)+1},bounceIn:function(x){return 1-D.bounceOut(1-x)},bounceOut:function(x){return x=x<1/2.75?7.5625*Math.pow(x,2):x<2/2.75?7.5625*Math.pow(x-1.5/2.75,2)+.75:x<2.5/2.75?7.5625*Math.pow(x-2.25/2.75,2)+.9375:7.5625*Math.pow(x-2.625/2.75,2)+.984375},
bounceInOut:function(x){return.5>x?D.bounceIn(2*x)/2:D.bounceOut(2*x-1)/2+.5}};y.setObject("dojo.fx.easing",D);return D})},"widgets/RelatedTableCharts/setting/FieldSelector":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/text!./FieldSelector.html dijit/TooltipDialog dijit/popup dojo/_base/lang dojo/_base/html dojo/on dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/_base/array".split(" "),function(y,D,x,A,w,f,d,c,a,b,h,g,e){return y([D,x],{baseClass:"jimu-widget-RelatedTableCharts-setting",
templateString:A,_stringFieldType:"esriFieldTypeString",_oidFieldType:"esriFieldTypeOID",_numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],_isTooltipDialogOpened:!1,fields:[],hideOnSelect:!1,showOnlyNumericFields:!1,startup:function(){this.inherited(arguments)},postCreate:function(){this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){f.close(this.tooltipDialog);this.tooltipDialog.destroy();this.inherited(arguments)},
isPartOfPopup:function(m){var n=this.tooltipDialog.domNode;return m===n||c.isDescendant(m,n)},onSelect:function(m){},_showTooltipDialog:function(){f.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){f.close(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var m=this._createFieldList();this.tooltipDialog=new w({content:m});this.own(a(this.domNode,"click",d.hitch(this,function(n){n.stopPropagation();
n.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(a(document.body,"click",d.hitch(this,function(n){this.isPartOfPopup(n.target||n.srcElement)||this._hideTooltipDialog()})))},_createFieldList:function(){var m=g.create("div",{style:{"max-height":"150px",overflow:"auto"}});if(this.fields){var n=d.clone(this.fields);e.forEach(n,d.hitch(this,function(l){var r=!0;this.showOnlyNumericFields&&0>this._numberFieldTypes.indexOf(l.type)&&(r=!1);if(r){r=
l.alias+" {"+l.name+"}";var p=g.create("div",{innerHTML:r,style:{cursor:"pointer",padding:"4px 2px"}},m);h.set(p,"name",l.name);h.set(p,"alias",l.alias);a(p,"mouseover",d.hitch(this,function(){b.set(p,"background-color","#e4e4e4")}));a(p,"mouseout",d.hitch(this,function(){b.set(p,"background-color","#FFFFFF")}));a(p,"click",d.hitch(this,function(){var v={};v.name=h.get(p,"name");v.alias=h.get(p,"alias");this.onSelect(v);this.hideOnSelect&&this._hideTooltipDialog()}))}}))}return m}})})},"widgets/RelatedTableCharts/ChartLayout":function(){define("jimu/BaseWidgetSetting jimu/utils dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/_base/declare dojo/_base/lang dijit/_WidgetsInTemplateMixin dojo/text!./ChartLayout.html dojox/charting/Chart dojox/charting/plot2d/Pie dojox/charting/action2d/Tooltip dojox/charting/action2d/Highlight dojox/charting/action2d/MoveSlice dojox/charting/plot2d/Spider dojox/charting/widget/SelectableLegend dojox/charting/action2d/Magnify dojo/_base/array dojox/charting/Theme dojo/Evented dojox/charting/plot2d/Bars dojox/charting/axis2d/Default dojox/charting/plot2d/Lines".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v,q){return f([y,c,q],{baseClass:"jimu-widget-RelatedTableCharts-layout",templateString:a,postCreate:function(){this.inherited(arguments)},startup:function(){this._createChartLayout()},_createChartLayout:function(){this._setNodeValue(this.layoutHeaderTitle,this.config.chartConfig.chartTitle,!0);this._setNodeValue(this.chartDescription,this.config.chartConfig.description,!1);this._initChart()},resizeChart:function(k){this.chart&&setTimeout(d.hitch(this,
function(){"PieChart"!==this.config.chartConfig.chartType?this.chart.resize():this._initChart();this.onChartResize()}),k)},_setNodeValue:function(k,z,B){var H=z;this.config.isPreview||(H=this._getFieldValues(z,this.config.selectedFeature.attributes));H?(H=D.sanitizeHTML(H),x.set(k,"innerHTML",H),B&&x.set(k,"title",H)):w.set(k,"display","none")},_initChart:function(){switch(this.config.chartConfig.chartType){case "BarChart":this._createBarChart();break;case "PieChart":this._createPieChart();break;
case "PolarChart":this._createPolarChart();break;case "LineChart":this._createLineChart();break;default:x.set(this.chartContainer,"innerHTML",this.nls.errMsgNoFeaturesFound)}},_getBarChartContainerHeight:function(){var k=30;0<this.config.chartData.chartSeries.length&&(k=30*this.config.chartData.chartSeries.length);this.config.isPreview?150>=k&&(k+=150):150>=k&&(k+=100);return k+"px"},_createBarChart:function(){var k={},z={};k=40;var B={};A.empty(this.chartContainer);k=this._getBarChartContainerHeight();
var H=new b(A.create("div",{style:"overflow:hidden; width:100%; height:"+k},this.chartContainer));H.addPlot("default",{type:"Bars",gap:4,minBarSize:10,maxBarSize:15});z=w.get(this.chartDescription,"fontFamily");var J=w.get(this.chartDescription,"fontSize");var N=w.get(this.chartDescription,"color");k={labels:this.config.chartData.chartLabels,maxLabelCharCount:35,trailingSymbol:"...",natural:!0,majorTickStep:1,minorTicks:!1,fixUpper:!0,includeZero:!1,vertical:!0,titleFontColor:N,titleFont:"normal normal normal "+
J+" "+z,font:"normal normal normal 9px "+z};window.isRTL&&(k.leftBottom=!1,H.setDir("rtl"));z={fixLower:"major",fixUpper:"major",minorTicks:!1,includeZero:!0,titleFontColor:N,titleFont:"normal normal normal "+J+" "+z,font:"normal normal normal 9px "+z};this.config.isPreview?(z.titleGap=5,k.majorTick={length:0},z.majorTick={length:0},k.majorLabels=!1,z.majorLabels=!1,k.minorLabels=!1,z.minorLabels=!1,k.title=this.config.chartConfig.labelYAxis,z.title=this.config.chartConfig.labelXAxis,B.stroke={width:0}):
(new g(H,"default"),k.title=this._getFieldValues(this.config.chartConfig.labelYAxis,this.config.selectedFeature.attributes),z.title=this._getFieldValues(this.config.chartConfig.labelXAxis,this.config.selectedFeature.attributes),B.stroke={width:1});z.titleOrientation="away";H.addAxis("y",k);H.addAxis("x",z);this.config.chartData.selectedTheme&&H.setTheme(this.config.chartData.selectedTheme);this.config.chartData.fill&&(B.fill=this.config.chartData.fill);p.forEach(this.config.chartData.chartSeries,
function(C,L){C.x=L+1;C.y=C.y;H.addSeries(L+1,[C],B,{plot:"default"})},this);new e(H,"default");H.render();this.chart=H;this.onChartCreated()},_createLineChart:function(){var k={};k.marker=v.defaultMarkers.CIRCLE;k.markerStroke={width:1};A.empty(this.chartContainer);var z=new b(A.create("div",{style:"overflow:hidden; width:100%; height:"+(this.config.isPreview?"300px":"270px")},this.chartContainer));var B=w.get(this.chartDescription,"fontFamily");var H=w.get(this.chartDescription,"fontSize");var J=
w.get(this.chartDescription,"color");var N={maxLabelCharCount:30,trailingSymbol:"...",natural:!0,vertical:!0,titleGap:0,titleFontColor:J,titleFont:"normal normal normal "+H+" "+B,max:this._calculateMajorTickStep(!0,!0),majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,fixLower:"major",fixUpper:"major",majorTickStep:this._calculateMajorTickStep(!0,!1)};this._setLineChartYaxisMin(N);this.config.isPreview||(N.font="normal normal bold 9px "+B);window.isRTL&&(N.leftBottom=!1,z.setDir("rtl"));B=
{labels:this.config.chartData.chartLabels[0],maxLabelCharCount:35,trailingSymbol:"...",titleGap:0,titleFontColor:J,titleFont:"normal normal normal "+H+" "+B,font:"normal normal bold "+this._calculateXAxisLabelFontSize(this.config.chartData.chartLabels[0].length)+"px "+B,titleOrientation:"away",rotation:-90,minorLabels:!0,majorLabels:!0,minorTicks:!0,microTicks:!1,max:this.config.chartData.chartLabels[0].length+.5,min:.5};this.config.isPreview?(N.minorLabels=!1,N.majorLabels=!0,N.title=this.config.chartConfig.labelYAxis,
B.minorLabels=!0,B.majorLabels=!0,B.title=this.config.chartConfig.labelXAxis,B.max=11):(N.title=this._getFieldValues(this.config.chartConfig.labelYAxis,this.config.selectedFeature.attributes),B.title=this._getFieldValues(this.config.chartConfig.labelXAxis,this.config.selectedFeature.attributes));k.stroke={width:1};z.addPlot("default",{type:"Lines",markers:!0,styleFunc:d.hitch(this,function(F){return this.config.chartConfig.chartColor&&"ColorByFieldValue"===this.config.chartConfig.chartColor.colorType?
(F=this.config.chartConfig.chartColor.colorInfo.layerFieldValues[F])?{fill:F}:{fill:"#000000"}:this.config.isPreview?{fill:"#0000ff"}:{fill:"#000000"}})});z.addAxis("y",N);z.addAxis("x",B);this.config.chartData.selectedTheme&&z.setTheme(this.config.chartData.selectedTheme);this.config.chartData.fill&&(k.stroke.color=this.config.chartData.fill);var C=Object.keys(v.defaultMarkers);C[3]&&C[5]&&this.swap(C,3,5);C[4]&&C[6]&&this.swap(C,4,6);var L=C.length;p.forEach(this.config.chartData.chartSeries,d.hitch(this,
function(F,K){var t=F[0]&&F[0].seriesName?F[0].seriesName:this.nls.ChartSetting.layoutSeriesLabel+" "+K;if(this.config.chartConfig.chartColor&&"ColorByFieldValue"===this.config.chartConfig.chartColor.colorType||this.config.isPreview)k.stroke.color="#"+Math.floor(16777215*Math.random()).toString(16);this.config.chartData.fill&&(K<L?k.marker=v.defaultMarkers[C[K]]:(K%=L,k.marker=v.defaultMarkers[C[K]]));z.addSeries(t,F,d.clone(k))}));new g(z,"default");new e(z,"default");new r(z,"default");z.render();
this.chart=z;w.set(this.legendContainer,"display","block");1<this.config.chartData.chartSeries.length&&this._createChartLegend(z,!0);this.onChartCreated()},swap:function(k,z,B){var H=k[z];k[z]=k[B];k[B]=H},_calculateXAxisLabelFontSize:function(k){switch(!0){case 20>k:return 9;case 20<=k:return 9;default:return 9}},_calculateMajorTickStep:function(k,z){var B=[];k&&this.config.chartData.chartSeries.forEach(d.hitch(this,function(H){H.forEach(d.hitch(this,function(J){z?B.push(J.y):B.push(Math.abs(J.y))}))}));
if(0<B.length){k=Math.max.apply(null,B);if(z)return k+1;k/=20;k=Math.round(k)?Math.round(k):k}else k=null;return Math.abs(k)},_createPieChart:function(){var k={};A.empty(this.chartContainer);var z=A.create("div",{style:"width:100%; height:100%; overflow:auto"},this.chartContainer);z=new b(z);k={type:h,labels:!0,ticks:!0,fixed:!0,precision:0,labelWiring:"#ccc",labelStyle:"columns",htmlLabels:!0,startAngle:-10,maxLabelCharCount:20,trailingSymbol:"..."};"esriCTEmptyOption"===this.config.chartConfig.labelField&&
(k.labels=!1);z.addPlot("default",k);this.config.isPreview||new g(z,"default");this.config.chartData.fill?z.addSeries(this.config.chartConfig.dataSeriesField,this.config.chartData.chartSeries,{fill:this.config.chartData.fill},{plot:"default"}):z.addSeries(this.config.dataSeriesField,this.config.chartData.chartSeries,{plot:"default"});this.config.chartData.selectedTheme&&z.setTheme(this.config.chartData.selectedTheme);new m(z,"default");new e(z,"default");z.render();this.chart=z;this.onChartCreated()},
_createPolarChart:function(){var k,z=.2,B=!1;this.chart&&this.chart.destroy();A.empty(this.chartContainer);w.set(this.chartContainer,"direction","inherit");var H=A.create("div",{style:"width:100%; height:100%; overflow:hidden"},this.chartContainer);var J=w.get(this.chartDescription,"fontFamily");H=new b(H);this.config.chartConfig.showPolygonFill||(z=0);H.addPlot("default",{type:n,labelOffset:-10,divisions:5,seriesFillAlpha:z,markerSize:3,precision:0,spiderType:"polygon",axisFont:"normal normal normal 9px/25px "+
J});this.config.chartData.selectedTheme?H.setTheme(this.config.chartData.selectedTheme):this.config.chartConfig.chartColor.colorInfo&&this.config.chartConfig.chartColor.colorInfo.layerField&&(B=!0);for(z=0;z<this.config.chartData.chartSeries.length;z++)for(k in J=this.config.chartData.chartSeries[z],J)J.hasOwnProperty(k)&&(this.config.chartData.fill?H.addSeries(k,J[k],{fill:this.config.chartData.fill}):J[k].fill?H.addSeries(k,J[k],{fill:J[k].fill,legend:J[k].legendLabel}):H.addSeries(k,J[k]));this.config.isPreview||
new g(H,"default");new e(H,"default");new r(H,"default",{duration:800,scale:1.5});H.render();this.chart=H;!this.config.isPreview&&B&&(w.set(this.legendContainer,"display","block"),this._createChartLegend(H,!0));this.onChartCreated()},_createChartLegend:function(k,z){setTimeout(d.hitch(this,function(){this.legend&&(this.legend.destroy(),this.legend=null);A.empty(this.legendNode);this.legend=new l({chart:k,horizontal:z},A.create("div",{},this.legendNode));this.emit("setFocusNodes")}),1500)},onChartCreated:function(){},
onChartResize:function(){},_getFieldValues:function(k,z){var B="",H,J;k=k.replace(/(\n|\r|\r\n)/g,"\x3cbr\x3e");var N=k.split("{");for(H=0;H<N.length;H++)if(0===H)B+=N[H];else if(-1!==N[H].indexOf("}"))for(k=N[H].split("}"),J=0;J<k.length;J++)if(0===J){if(z[k[J]]||0===z[k[J]])B+=z[k[J]]}else B=1===J?B+k[J]:B+("}"+k[J]);else B+="{";return B},_setLineChartYaxisMin:function(k){var z=[];var B=[];p.forEach(this.config.chartData.chartSeries,d.hitch(this,function(J){p.forEach(J,d.hitch(this,function(N){0<=
N.y&&z.push(N.y);B.push(N.y)}))}));if(z.length===B.length)k.min=0;else{var H=Math.min.apply(null,B);k.min=H-1}}})})},"dojox/charting/action2d/Tooltip":function(){define("dijit/Tooltip dojo/_base/lang dojo/_base/declare dojo/_base/window dojo/_base/connect dojo/dom-style ./PlotAction dojox/gfx/matrix dojo/has dojo/has!dojo-bidi?../bidi/action2d/Tooltip dojox/lang/functional dojox/lang/functional/scan dojox/lang/functional/fold".split(" "),function(y,D,x,A,w,f,d,c,a,b,h){var g=function(n,l){var r=n.run&&
n.run.data&&n.run.data[n.index];return r&&"number"!=typeof r&&(r.tooltip||r.text)?r.tooltip||r.text:l.tooltipFunc?l.tooltipFunc(n):n.y},e=Math.PI/4,m=Math.PI/2;f=x(a("dojo-bidi")?"dojox.charting.action2d.NonBidiTooltip":"dojox.charting.action2d.Tooltip",d,{defaultParams:{text:g,mouseOver:!0,defaultPosition:["after-centered","before-centered"]},optionalParams:{},constructor:function(n,l,r){this.text=r&&r.text?r.text:g;this.mouseOver=r&&void 0!=r.mouseOver?r.mouseOver:!0;this.defaultPosition=r&&void 0!=
r.defaultPosition?r.defaultPosition:["after-centered","before-centered"];this.connect()},process:function(n){if("onplotreset"===n.type||"onmouseout"===n.type)y.hide(this.aroundRect),this.aroundRect=null,"onplotreset"===n.type&&delete this.angles;else if(!(!n.shape||this.mouseOver&&"onmouseover"!==n.type||!this.mouseOver&&"onclick"!==n.type)){var l={type:"rect"},r=this.defaultPosition;switch(n.element){case "marker":l.x=n.cx;l.y=n.cy;l.w=l.h=1;break;case "circle":l.x=n.cx-n.cr;l.y=n.cy-n.cr;l.w=l.h=
2*n.cr;break;case "spider_circle":l.x=n.cx;l.y=n.cy;l.w=l.h=1;break;case "spider_plot":return;case "column":r=["above-centered","below-centered"];case "bar":l=D.clone(n.shape.getShape());l.w=l.width;l.h=l.height;break;case "candlestick":l.x=n.x;l.y=n.y;l.w=n.width;l.h=n.height;break;default:if(!this.angles){var p="number"==typeof n.run.data[0]?h.map(n.run.data,"x ? Math.max(x, 0) : 0"):h.map(n.run.data,"x ? Math.max(x.y, 0) : 0");this.angles=h.map(h.scanl(p,"+",0),"* 2 * Math.PI / this",h.foldl(p,
"+",0))}p=c._degToRad(n.plot.opt.startAngle);var v=(this.angles[n.index]+this.angles[n.index+1])/2+p;l.x=n.cx+n.cr*Math.cos(v);l.y=n.cy+n.cr*Math.sin(v);l.w=l.h=1;p&&(0>v||v>2*Math.PI)&&(v=Math.abs(2*Math.PI-Math.abs(v)));v<e||(v<m+e?r=["below-centered","above-centered"]:v<Math.PI+e?r=["before-centered","after-centered"]:v<2*Math.PI-e&&(r=["above-centered","below-centered"]))}a("dojo-bidi")&&this._recheckPosition(n,l,r);p=this.chart.getCoords();l.x+=p.x;l.y+=p.y;l.x=Math.round(l.x);l.y=Math.round(l.y);
l.w=Math.ceil(l.w);l.h=Math.ceil(l.h);this.aroundRect=l;(n=this.text(n,this.plot))&&y.show(this._format(n),this.aroundRect,r);this.mouseOver||(this._handle=w.connect(A.doc,"onclick",this,"onClick"))}},onClick:function(){this.process({type:"onmouseout"})},_recheckPosition:function(n,l,r){},_format:function(n){return n}});return a("dojo-bidi")?x("dojox.charting.action2d.Tooltip",[f,b]):f})},"dojox/charting/action2d/PlotAction":function(){define(["dojo/_base/connect","dojo/_base/declare","./Base","dojo/fx/easing",
"dojox/lang/functional"],function(y,D,x,A,w){var f=A.backOut;return D("dojox.charting.action2d.PlotAction",x,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(d,c,a){this.anim={};a||(a={});this.duration=a.duration?a.duration:400;this.easing=a.easing?a.easing:f},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process")},disconnect:function(){this.handle&&(y.disconnect(this.handle),this.handle=null)},reset:function(){},destroy:function(){this.inherited(arguments);
w.forIn(this.anim,function(d){w.forIn(d,function(c){c.action.stop(!0)})});this.anim={}}})})},"dojox/charting/action2d/Base":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Evented"],function(y,D,x){return D("dojox.charting.action2d.Base",x,{constructor:function(A,w){this.chart=A;this.plot=w?y.isString(w)?this.chart.getPlot(w):w:this.chart.getPlot("default")},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect()}})})},"dojox/lang/functional/scan":function(){define(["dojo/_base/kernel",
"dojo/_base/lang","./lambda"],function(y,D,x){var A={};D.mixin(x,{scanl:function(w,f,d,c){"string"==typeof w&&(w=w.split(""));c=c||y.global;f=x.lambda(f);var a,b;if(D.isArray(w)){var h=Array((a=w.length)+1);h[0]=d;for(b=0;b<a;d=f.call(c,d,w[b],b,w),h[++b]=d);}else if("function"==typeof w.hasNext&&"function"==typeof w.next)for(h=[d],b=0;w.hasNext();h.push(d=f.call(c,d,w.next(),b++,w)));else for(b in h=[d],w)b in A||h.push(d=f.call(c,d,w[b],b,w));return h},scanl1:function(w,f,d){"string"==typeof w&&
(w=w.split(""));d=d||y.global;f=x.lambda(f);var c;var a=!0;if(D.isArray(w)){var b=Array(a=w.length);b[0]=c=w[0];for(var h=1;h<a;b[h]=c=f.call(d,c,w[h],h,w),++h);}else if("function"==typeof w.hasNext&&"function"==typeof w.next){if(w.hasNext())for(b=[c=w.next()],h=1;w.hasNext();b.push(c=f.call(d,c,w.next(),h++,w)));}else for(h in w)h in A||(a?(b=[c=w[h]],a=!1):b.push(c=f.call(d,c,w[h],h,w)));return b},scanr:function(w,f,d,c){"string"==typeof w&&(w=w.split(""));c=c||y.global;f=x.lambda(f);var a=w.length,
b=Array(a+1),h=a;for(b[a]=d;0<h;--h,d=f.call(c,d,w[h],h,w),b[h]=d);return b},scanr1:function(w,f,d){"string"==typeof w&&(w=w.split(""));d=d||y.global;f=x.lambda(f);var c=w.length,a=Array(c),b=w[c-1];--c;for(a[c]=b;0<c;--c,b=f.call(d,b,w[c],c,w),a[c]=b);return a}})})},"dojox/charting/action2d/Highlight":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color dojo/_base/connect dojox/color/_base ./PlotAction dojo/fx/easing dojox/gfx/fx".split(" "),function(y,D,x,A,w,f,d,c){var a=function(g){return function(){return g}},
b=function(g){g=new w.Color(g);var e=g.toHsl();0==e.s?e.l=50>e.l?100:0:(e.s=100,e.l=50>e.l?75:75<e.l?50:e.l-50>75-e.l?50:75);e=w.fromHsl(e);e.a=g.a;return e},h=function(g){g=b(g);g.a=.7;return g};return D("dojox.charting.action2d.Highlight",f,{defaultParams:{duration:400,easing:d.backOut},optionalParams:{highlight:"red"},constructor:function(g,e,m){this.colorFunc=(g=m&&m.highlight)?y.isFunction(g)?g:a(g):b;this.connect()},process:function(g){if(g.shape&&g.type in this.overOutEvents&&"spider_circle"!=
g.element&&"spider_plot"!=g.element){"spider_poly"==g.element&&this.colorFunc==b&&(this.colorFunc=h);var e=g.run.name,m=g.index,n;e in this.anim?n=this.anim[e][m]:this.anim[e]={};if(n)n.action.stop(!0);else{n=g.shape.getFill();if(!(n&&n instanceof x))return;this.anim[e][m]=n={start:n,end:this.colorFunc(n)}}var l=n.start,r=n.end;if("onmouseout"==g.type){var p=l;l=r;r=p}n.action=c.animateFill({shape:g.shape,duration:this.duration,easing:this.easing,color:{start:l,end:r}});"onmouseout"==g.type&&A.connect(n.action,
"onEnd",this,function(){this.anim[e]&&delete this.anim[e][m]});n.action.play()}}})})},"dojox/charting/action2d/MoveSlice":function(){define("dojo/_base/connect dojo/_base/declare dojo/_base/array ./PlotAction dojo/fx/easing dojox/gfx/matrix dojox/gfx/fx dojox/lang/functional dojox/lang/functional/scan dojox/lang/functional/fold".split(" "),function(y,D,x,A,w,f,d,c){return D("dojox.charting.action2d.MoveSlice",A,{defaultParams:{duration:400,easing:w.backOut,scale:1.05,shift:7},optionalParams:{},constructor:function(a,
b,h){h||(h={});this.scale="number"==typeof h.scale?h.scale:1.05;this.shift="number"==typeof h.shift?h.shift:7;this.connect()},process:function(a){if(a.shape&&"slice"==a.element&&a.type in this.overOutEvents){if(!this.angles){var b=f._degToRad(a.plot.opt.startAngle);this.angles="number"==typeof a.run.data[0]?c.map(c.scanl(a.run.data,"+",0),"* 2 * Math.PI / this",c.foldl(a.run.data,"+",0)):c.map(c.scanl(a.run.data,"a + b.y",0),"* 2 * Math.PI / this",c.foldl(a.run.data,"a + b.y",0));this.angles=x.map(this.angles,
function(v){return v+b})}var h=a.index;var g=(this.angles[h]+this.angles[h+1])/2;var e=f.rotateAt(-g,a.cx,a.cy),m=f.rotateAt(g,a.cx,a.cy);(g=this.anim[h])?g.action.stop(!0):this.anim[h]=g={};if("onmouseover"==a.type){var n=0;var l=this.shift;var r=1;var p=this.scale}else n=this.shift,l=0,r=this.scale,p=1;g.action=d.animateTransform({shape:a.shape,duration:this.duration,easing:this.easing,transform:[m,{name:"translate",start:[n,0],end:[l,0]},{name:"scaleAt",start:[r,a.cx,a.cy],end:[p,a.cx,a.cy]},e]});
"onmouseout"==a.type&&y.connect(g.action,"onEnd",this,function(){delete this.anim[h]});g.action.play()}},reset:function(){delete this.angles}})})},"dojox/charting/widget/SelectableLegend":function(){define("dojo/_base/array dojo/_base/declare dojo/query dojo/_base/connect dojo/_base/Color ./Legend dijit/form/CheckBox ../action2d/Highlight dojox/lang/functional dojox/gfx/fx dojo/keys dojo/dom-construct dojo/dom-prop dijit/registry".split(" "),function(y,D,x,A,w,f,d,c,a,b,h,g,e,m){function n(p){return"mouseenter"==
p?"onmouseover":"mouseleave"==p?"onmouseout":"on"+p}var l=D(null,{constructor:function(p){this.legend=p;this.index=0;this.horizontalLength=this._getHrizontalLength();y.forEach(p.legends,function(v,q){0<q&&x("input",v).attr("tabindex",-1)});this.firstLabel=x("input",p.legends[0])[0];A.connect(this.firstLabel,"focus",this,function(){this.legend.active=!0});A.connect(this.legend.domNode,"keydown",this,"_onKeyEvent")},_getHrizontalLength:function(){var p=this.legend.horizontal;return"number"==typeof p?
Math.min(p,this.legend.legends.length):p?this.legend.legends.length:1},_onKeyEvent:function(p){if(this.legend.active)if(p.keyCode==h.TAB)this.legend.active=!1;else{var v=this.legend.legends.length;switch(p.keyCode){case h.LEFT_ARROW:this.index--;0>this.index&&(this.index+=v);break;case h.RIGHT_ARROW:this.index++;this.index>=v&&(this.index-=v);break;case h.UP_ARROW:0<=this.index-this.horizontalLength&&(this.index-=this.horizontalLength);break;case h.DOWN_ARROW:this.index+this.horizontalLength<v&&(this.index+=
this.horizontalLength);break;default:return}this._moveToFocus();Event.stop(p)}},_moveToFocus:function(){x("input",this.legend.legends[this.index])[0].focus()}}),r=D(c,{connect:function(){}});return D("dojox.charting.widget.SelectableLegend",f,{outline:!1,transitionFill:null,transitionStroke:null,autoScale:!1,postCreate:function(){this.legends=[];this.legendAnim={};this._cbs=[];this.inherited(arguments)},refresh:function(){this.legends=[];this._clearLabels();this.inherited(arguments);this._applyEvents();
new l(this)},_clearLabels:function(){for(var p=this._cbs;p.length;)p.pop().destroyRecursive()},_addLabel:function(p,v){this.inherited(arguments);var q=x("td",this.legendBody),k=q[q.length-1];this.legends.push(k);q=new d({checked:!0});this._cbs.push(q);g.place(q.domNode,k,"first");k=x("label",k)[0];e.set(k,"for",q.id)},_applyEvents:function(){this.chart.dirty||y.forEach(this.legends,function(p,v){if(this._isPie()){var q=this.chart.stack[0];var k=q.name;var z=this.chart.series[0].name}else q=this.chart.series[v],
k=q.plot,z=q.name;var B=m.byNode(x(".dijitCheckBox",p)[0]);B.set("checked",!this._isHidden(k,v));A.connect(B,"onClick",this,function(N){this.toogle(k,v,!B.get("checked"));N.stopPropagation()});var H=x(".dojoxLegendIcon",p)[0],J=this._getFilledShape(this._surfaces[v].children);y.forEach(["onmouseenter","onmouseleave"],function(N){A.connect(H,N,this,function(C){this._highlight(C,J,v,!B.get("checked"),z,k)})},this)},this)},_isHidden:function(p,v){return this._isPie()?-1!=y.indexOf(this.chart.getPlot(p).runFilter,
v):this.chart.series[v].hidden},toogle:function(p,v,q){p=this.chart.getPlot(p);this._isPie()?-1!=y.indexOf(p.runFilter,v)?q||(p.runFilter=y.filter(p.runFilter,function(k){return k!=v})):q&&p.runFilter.push(v):this.chart.series[v].hidden=q;this.autoScale?this.chart.dirty=!0:p.dirty=!0;this.chart.render()},_highlight:function(p,v,q,k,z,B){if(!k){var H=this._getAnim(B),J=this._isPie(),N=n(p.type);H.process({shape:v,index:J?"legend"+q:"legend",run:{name:z},type:N});y.forEach(this._getShapes(q,B),function(C,
L){C={shape:C,index:J?q:L,run:{name:z},type:N};H.duration=100;H.process(C)})}},_getShapes:function(p,v){var q=[];if(this._isPie()){var k=0;y.forEach(this.chart.getPlot(v).runFilter,function(z){p>z&&k++});q.push(this.chart.stack[0].group.children[p-k])}else this._isCandleStick(v)?y.forEach(this.chart.series[p].group.children,function(z){y.forEach(z.children,function(B){y.forEach(B.children,function(H){"line"!=H.shape.type&&q.push(H)})})}):q=this.chart.series[p].group.children;return q},_getAnim:function(p){this.legendAnim[p]||
(this.legendAnim[p]=new r(this.chart,p));return this.legendAnim[p]},_getTransitionFill:function(p){return-1!=this.chart.stack[this.chart.plots[p]].declaredClass.indexOf("dojox.charting.plot2d.Stacked")?this.chart.theme.plotarea.fill:null},_getFilledShape:function(p){for(var v=0;p[v];){if(p[v].getFill())return p[v];v++}return null},_isPie:function(){return"dojox.charting.plot2d.Pie"==this.chart.stack[0].declaredClass},_isCandleStick:function(p){return"dojox.charting.plot2d.Candlesticks"==this.chart.stack[this.chart.plots[p]].declaredClass},
destroy:function(){this._clearLabels();this.inherited(arguments)}})})},"dojox/charting/widget/Legend":function(){define("dojo/_base/declare dijit/_WidgetBase dojox/gfx dojo/_base/array dojo/has dojo/has!dojo-bidi?../bidi/widget/Legend dojox/lang/functional dojo/dom dojo/dom-construct dojo/dom-class dijit/registry".split(" "),function(y,D,x,A,w,f,d,c,a,b,h){D=y(w("dojo-bidi")?"dojox.charting.widget.NonBidiLegend":"dojox.charting.widget.Legend",D,{chartRef:"",horizontal:!0,swatchSize:18,legendBody:null,
postCreate:function(){!this.chart&&this.chartRef&&((this.chart=h.byId(this.chartRef)||h.byNode(c.byId(this.chartRef)))||console.log("Could not find chart instance with id: "+this.chartRef));this.chart=this.chart.chart||this.chart;this.refresh()},buildRendering:function(){this.domNode=a.create("table",{role:"group","aria-label":"chart legend","class":"dojoxLegendNode"});this.legendBody=a.create("tbody",null,this.domNode);this.inherited(arguments)},destroy:function(){this._surfaces&&A.forEach(this._surfaces,
function(g){g.destroy()});this.inherited(arguments)},refresh:function(){this._surfaces&&A.forEach(this._surfaces,function(m){m.destroy()});for(this._surfaces=[];this.legendBody.lastChild;)a.destroy(this.legendBody.lastChild);this.horizontal&&(b.add(this.domNode,"dojoxLegendHorizontal"),this._tr=a.create("tr",null,this.legendBody),this._inrow=0);var g=this.series||this.chart.series;if(0!=g.length)if("dojox.charting.plot2d.Pie"==g[0].chart.stack[0].declaredClass){var e=g[0].chart.stack[0];"number"==
typeof e.run.data[0]?(g=d.map(e.run.data,"Math.max(x, 0)"),g=d.map(g,"/this",d.foldl(g,"+",0)),A.forEach(g,function(m,n){this._addLabel(e.dyn[n],e._getLabel(100*m)+"%")},this)):A.forEach(e.run.data,function(m,n){this._addLabel(e.dyn[n],m.legend||m.text||m.y)},this)}else A.forEach(g,function(m){this._addLabel(m.dyn,m.legend||m.name)},this)},_addLabel:function(g,e){var m=a.create("td"),n=a.create("div",null,m),l=a.create("label",null,m),r=a.create("div",{style:{width:this.swatchSize+"px",height:this.swatchSize+
"px","float":"left"}},n);b.add(n,"dojoxLegendIcon dijitInline");b.add(l,"dojoxLegendText");this._tr?(this._tr.appendChild(m),++this._inrow===this.horizontal&&(this._tr=a.create("tr",null,this.legendBody),this._inrow=0)):a.create("tr",null,this.legendBody).appendChild(m);this._makeIcon(r,g);l.innerHTML=String(e);w("dojo-bidi")&&(l.dir=this.getTextDir(e,l.dir))},_makeIcon:function(g,e){var m=this.swatchSize,n=this.swatchSize;g=x.createSurface(g,n,m);this._surfaces.push(g);if(e.fill)g.createRect({x:2,
y:2,width:n-4,height:m-4}).setFill(e.fill).setStroke(e.stroke);else if(e.stroke||e.marker){var l={x1:0,y1:m/2,x2:n,y2:m/2};e.stroke&&g.createLine(l).setStroke(e.stroke);e.marker&&g.createPath({path:"M"+n/2+" "+m/2+" "+e.marker}).setFill(e.markerFill).setStroke(e.markerStroke)}else g.createRect({x:2,y:2,width:n-4,height:m-4}).setStroke("black"),g.createLine({x1:2,y1:2,x2:n-2,y2:m-2}).setStroke("black"),g.createLine({x1:2,y1:m-2,x2:n-2,y2:2}).setStroke("black")}});return w("dojo-bidi")?y("dojox.charting.widget.Legend",
[D,f]):D})},"dojox/charting/action2d/Magnify":function(){define("dojo/_base/connect dojo/_base/declare ./PlotAction dojox/gfx/matrix dojox/gfx/fx dojo/fx dojo/fx/easing".split(" "),function(y,D,x,A,w,f,d){return D("dojox.charting.action2d.Magnify",x,{defaultParams:{duration:400,easing:d.backOut,scale:2},optionalParams:{},constructor:function(c,a,b){this.scale=b&&"number"==typeof b.scale?b.scale:2;this.connect()},process:function(c){if(c.shape&&c.type in this.overOutEvents&&"cx"in c&&"cy"in c&&"spider_plot"!=
c.element&&"spider_poly"!=c.element){var a=c.run.name,b=c.index,h=[],g;a in this.anim?g=this.anim[a][b]:this.anim[a]={};g?g.action.stop(!0):this.anim[a][b]=g={};if("onmouseover"==c.type){var e=A.identity;var m=this.scale}else e=A.scaleAt(this.scale,c.cx,c.cy),m=1/this.scale;e={shape:c.shape,duration:this.duration,easing:this.easing,transform:[{name:"scaleAt",start:[1,c.cx,c.cy],end:[m,c.cx,c.cy]},e]};c.shape&&h.push(w.animateTransform(e));c.outline&&(e.shape=c.outline,h.push(w.animateTransform(e)));
c.shadow&&(e.shape=c.shadow,h.push(w.animateTransform(e)));h.length?(g.action=f.combine(h),"onmouseout"==c.type&&y.connect(g.action,"onEnd",this,function(){this.anim[a]&&delete this.anim[a][b]}),g.action.play()):delete this.anim[a][b]}}})})},"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(y,D,x,A,w,f){var d=D("dojox.charting.Theme",A,{});y.mixin(d,{defineColors:function(c){c=
c||{};var a=[],b=c.num||5;if(c.colors){var h=c.colors.length;for(var g=0;g<b;g++)a.push(c.colors[g%h]);return a}return c.hue?f.generate(w.fromHsv(c.hue,c.saturation||100,((c.high||90)+(c.low||30))/2),"monochromatic").colors:c.generator?w.Palette.generate(c.base,c.generator).colors:a},generateGradient:function(c,a,b){c=y.delegate(c);c.colors=[{offset:0,color:a},{offset:1,color:b}];return c},generateHslColor:function(c,a){c=new x(c);var b=c.toHsl();a=w.fromHsl(b.h,b.s,a);a.a=c.a;return a},generateHslGradient:function(c,
a,b,h){c=new x(c);var g=c.toHsl();b=w.fromHsl(g.h,g.s,b);h=w.fromHsl(g.h,g.s,h);b.a=h.a=c.a;return d.generateGradient(a,b,h)}});d.defaultMarkers=A.defaultMarkers;d.defaultColors=A.defaultColors;d.defaultTheme=A.defaultTheme;return d})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(y,D,x){function A(a,b,h){var g=new x.Palette;g.colors=[];D.forEach(a.colors,function(e){g.colors.push(new x.Color({r:Math.min(255,Math.max(0,"dr"==b?e.r+h:e.r)),g:Math.min(255,
Math.max(0,"dg"==b?e.g+h:e.g)),b:Math.min(255,Math.max(0,"db"==b?e.b+h:e.b)),a:Math.min(1,Math.max(0,"da"==b?e.a+h:e.a))}))});return g}function w(a,b,h){var g=new x.Palette;g.colors=[];D.forEach(a.colors,function(e){e=e.toCmy();g.colors.push(x.fromCmy(Math.min(100,Math.max(0,"dc"==b?e.c+h:e.c)),Math.min(100,Math.max(0,"dm"==b?e.m+h:e.m)),Math.min(100,Math.max(0,"dy"==b?e.y+h:e.y))))});return g}function f(a,b,h){var g=new x.Palette;g.colors=[];D.forEach(a.colors,function(e){e=e.toCmyk();g.colors.push(x.fromCmyk(Math.min(100,
Math.max(0,"dc"==b?e.c+h:e.c)),Math.min(100,Math.max(0,"dm"==b?e.m+h:e.m)),Math.min(100,Math.max(0,"dy"==b?e.y+h:e.y)),Math.min(100,Math.max(0,"dk"==b?e.b+h:e.b))))});return g}function d(a,b,h){var g=new x.Palette;g.colors=[];D.forEach(a.colors,function(e){e=e.toHsl();g.colors.push(x.fromHsl(("dh"==b?e.h+h:e.h)%360,Math.min(100,Math.max(0,"ds"==b?e.s+h:e.s)),Math.min(100,Math.max(0,"dl"==b?e.l+h:e.l))))});return g}function c(a,b,h){var g=new x.Palette;g.colors=[];D.forEach(a.colors,function(e){e=
e.toHsv();g.colors.push(x.fromHsv(("dh"==b?e.h+h:e.h)%360,Math.min(100,Math.max(0,"ds"==b?e.s+h:e.s)),Math.min(100,Math.max(0,"dv"==b?e.v+h:e.v))))});return g}x.Palette=function(a){this.colors=[];a instanceof x.Palette?this.colors=a.colors.slice(0):a instanceof x.Color?this.colors=[null,null,a,null,null]:y.isArray(a)?this.colors=D.map(a.slice(0),function(b){return y.isString(b)?new x.Color(b):b}):y.isString(a)&&(this.colors=[null,null,new x.Color(a),null,null])};y.extend(x.Palette,{transform:function(a){var b=
A;if(a.use){var h=a.use.toLowerCase();0==h.indexOf("hs")?b="l"==h.charAt(2)?d:c:0==h.indexOf("cmy")&&(b="k"==h.charAt(3)?f:w)}else if("dc"in a||"dm"in a||"dy"in a)b="dk"in a?f:w;else if("dh"in a||"ds"in a)b="dv"in a?c:d;h=this;for(var g in a)"use"!=g&&(h=b(h,g,a[g]));return h},clone:function(){return new x.Palette(this)}});y.mixin(x.Palette,{generators:{analogous:function(a){var b=a.high||60,h=a.low||18;a=(y.isString(a.base)?new x.Color(a.base):a.base).toHsv();var g=Math.max(10,95>=a.s?a.s+5:100-
(a.s-95)),e=92<=a.v?a.v-9:Math.max(a.v+9,20),m=90>=a.v?Math.max(a.v+5,20):95+Math.ceil((a.v-90)/2),n=[g,1<a.s?a.s-1:21-a.s,a.s,g,g],l=[e,m,a.v,e,m];return new x.Palette(D.map([(a.h+h+360)%360,(a.h+Math.round(h/2)+360)%360,a.h,(a.h-Math.round(b/2)+360)%360,(a.h-b+360)%360],function(r,p){return x.fromHsv(r,n[p],l[p])}))},monochromatic:function(a){a=y.isString(a.base)?new x.Color(a.base):a.base;var b=a.toHsv(),h=9<b.s-30?b.s-30:b.s+30,g=b.s,e=20<b.v-20?b.v-20:b.v+60,m=20<b.v-50?b.v-50:b.v+30;return new x.Palette([x.fromHsv(b.h,
h,100-.8*(100-b.v)),x.fromHsv(b.h,g,m),a,x.fromHsv(b.h,h,m),x.fromHsv(b.h,g,e)])},triadic:function(a){a=y.isString(a.base)?new x.Color(a.base):a.base;var b=a.toHsv(),h=(b.h-157+360)%360,g=90<b.s?b.s-10:b.s+10,e=95<b.s?b.s-5:b.s+5,m=20<b.v-20?b.v-20:b.v+20,n=20<b.v-30?b.v-30:b.v+30,l=70<b.v-30?b.v-30:b.v+30;return new x.Palette([x.fromHsv((b.h+57+360)%360,20<b.s?b.s-10:b.s+10,b.v),x.fromHsv(b.h,g,n),a,x.fromHsv(h,g,m),x.fromHsv(h,e,l)])},complementary:function(a){a=y.isString(a.base)?new x.Color(a.base):
a.base;var b=a.toHsv(),h=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,g=100-.9*(100-b.s),e=Math.min(100,b.s+20),m=20<b.v?b.v-30:b.v+30;return new x.Palette([x.fromHsv(b.h,Math.max(b.s-10,0),Math.min(100,b.v+30)),x.fromHsv(b.h,g,m),a,x.fromHsv(h,e,m),x.fromHsv(h,b.s,b.v)])},splitComplementary:function(a){var b=y.isString(a.base)?new x.Color(a.base):a.base,h=a.da||30;a=b.toHsv();var g=360>2*a.h+137?2*a.h+137:Math.floor(a.h/2)-137,e=(g-h+360)%360;h=(g+h)%360;g=100-.9*(100-a.s);var m=Math.min(100,a.s+
20),n=20<a.v?a.v-30:a.v+30;return new x.Palette([x.fromHsv(e,Math.max(a.s-10,0),Math.min(100,a.v+30)),x.fromHsv(e,g,n),b,x.fromHsv(h,m,n),x.fromHsv(h,a.s,a.v)])},compound:function(a){a=y.isString(a.base)?new x.Color(a.base):a.base;var b=a.toHsv(),h=360>2*b.h+18?2*b.h+18:Math.floor(b.h/2)-18,g=360>2*b.h+120?2*b.h+120:Math.floor(b.h/2)-120,e=360>2*b.h+99?2*b.h+99:Math.floor(b.h/2)-99,m=80<b.s-10?b.s-10:b.s+10,n=10<b.s-25?b.s-25:b.s+25,l=80<b.v-20?b.v-20:b.v+20,r=Math.max(b.v,20);return new x.Palette([x.fromHsv(h,
10<b.s-40?b.s-40:b.s+40,10<b.v-40?b.v-40:b.v+40),x.fromHsv(h,m,l),a,x.fromHsv(g,n,r),x.fromHsv(e,m,l)])},shades:function(a){a=y.isString(a.base)?new x.Color(a.base):a.base;var b=a.toHsv(),h=100==b.s&&0==b.v?0:b.s,g=20<=b.v-25?b.v-25:b.v+55,e=20<=b.v-75?b.v-75:b.v+5,m=Math.max(b.v-10,20);return new x.Palette([new x.fromHsv(b.h,h,20<b.v-50?b.v-50:b.v+30),new x.fromHsv(b.h,h,g),a,new x.fromHsv(b.h,h,e),new x.fromHsv(b.h,h,m)])}},generate:function(a,b){if(y.isFunction(b))return b({base:a});if(x.Palette.generators[b])return x.Palette.generators[b]({base:a});
throw Error("dojox.color.Palette.generate: the specified generator ('"+b+"') does not exist.");}});return x.Palette})},"dojox/charting/themes/GreySkies":function(){define(["../SimpleTheme","./common"],function(y,D){D.GreySkies=new y;return D.GreySkies})},"dojox/charting/themes/common":function(){define(["dojo/_base/lang"],function(y){return y.getObject("dojox.charting.themes",!0)})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e){var m=x("dijit._editor.plugins.LinkDialog",h,{allowUnsafeHtml:!1,linkFilter:[[/</g,"\x26lt;"]],buttonClass:g,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=f.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(l){y("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),f.hitch(this,function(r,p,v){var q=this;this.tag="insertImage"==this.command?"img":"a";r=f.delegate(r.getLocalization("dijit","common",this.lang),r.getLocalization("dijit._editor",
"LinkDialog",this.lang));var k=this.dropDown=this.button.dropDown=new p({title:r[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:f.hitch(this,"setValue"),onOpen:function(){q._onOpenDialog();p.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(f.hitch(q,"_onCloseDialog"),0)}});r.urlRegExp=this.urlRegExp;r.id=v.getUniqueId(this.editor.id);this._uniqueId=r.id;this._setContent(k.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
b.substitute(this.linkDialogTemplate,r));k.startup();this._urlInput=v.byId(this._uniqueId+"_urlInput");this._textInput=v.byId(this._uniqueId+"_textInput");this._setButton=v.byId(this._uniqueId+"_setButton");this.own(v.byId(this._uniqueId+"_cancelButton").on("click",f.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",f.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",f.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=f.hitch(this,function(){var z=this._urlInput.get("value");return this._urlRegExp.test(z)||this._emailRegExp.test(z)});this.own(d(k.domNode,"keydown",f.hitch(this,f.hitch(this,function(z){!z||z.keyCode!=w.ENTER||z.shiftKey||z.metaKey||z.ctrlKey||z.altKey||this._setButton.get("disabled")||(k.onExecute(),k.execute(k.get("value")))}))));l()}))},_checkAndFixInput:function(){var l=this,r=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var p=r,v=!1,q=!1;p&&1<p.length&&(p=f.trim(p),0!==p.indexOf("mailto:")&&(0<p.indexOf("/")?-1===p.indexOf("://")&&"/"!==p.charAt(0)&&p.indexOf("./")&&0!==p.indexOf("../")&&l._hostRxp.test(p)&&(v=!0):l._userAtRxp.test(p)&&(q=!0)));v&&l._urlInput.set("value","http://"+p);q&&l._urlInput.set("value","mailto:"+p);l._setButton.set("disabled",!l._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(f.hitch(this,
function(){this.own(d(this.editor.editNode,"mouseup",f.hitch(this,"_onMouseUp")));this.own(d(this.editor.editNode,"dblclick",f.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(l){this.dropDown.set({parserScope:"dojo",content:l})},_checkValues:function(l){l&&l.urlInput&&(l.urlInput=l.urlInput.replace(/"/g,"\x26quot;"));!this.allowUnsafeHtml&&l&&l.textInput&&("function"===typeof this.linkFilter?l.textInput=this.linkFilter(l.textInput):
D.forEach(this.linkFilter,function(r){l.textInput=l.textInput.replace(r[0],r[1])}));return l},_createlinkEnabledImpl:function(){return!0},setValue:function(l){this._onCloseDialog();if(9>c("ie")){var r=e.getSelection(this.editor.window).getRangeAt(0).endContainer;3===r.nodeType&&(r=r.parentNode);r&&r.nodeName&&r.nodeName.toLowerCase()!==this.tag&&(r=this.editor.selection.getSelectedElement(this.tag));r&&r.nodeName&&r.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(r),
this.editor.execCommand("unlink"))}l=this._checkValues(l);this.editor.execCommand("inserthtml",b.substitute(this.htmlTemplate,l));a("a",this.editor.document).forEach(function(p){p.innerHTML||A.has(p,"name")||p.parentNode.removeChild(p)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(l){if(l&&l.tagName.toLowerCase()===this.tag){var r=l.getAttribute("_djrealurl")||l.getAttribute("href");var p=l.getAttribute("target")||"_self";var v=l.textContent||
l.innerText;this.editor.selection.selectElement(l,!0)}else v=this.editor.selection.getSelectedText();return{urlInput:r||"",textInput:v||"",targetSelect:p||""}},_onOpenDialog:function(){if(c("ie")){var l=e.getSelection(this.editor.window);if(l.rangeCount){var r=l.getRangeAt(0);var p=r.endContainer;3===p.nodeType&&(p=p.parentNode);p&&p.nodeName&&p.nodeName.toLowerCase()!==this.tag&&(p=this.editor.selection.getSelectedElement(this.tag));if(!p||p.nodeName&&p.nodeName.toLowerCase()!==this.tag)(l=this.editor.selection.getAncestorElement(this.tag))&&
l.nodeName&&l.nodeName.toLowerCase()==this.tag?(p=l,this.editor.selection.selectElement(p)):r.startContainer===r.endContainer&&(l=r.startContainer.firstChild)&&l.nodeName&&l.nodeName.toLowerCase()==this.tag&&(p=l,this.editor.selection.selectElement(p))}}else p=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(p))},_onDblClick:function(l){if(l&&l.target&&(l=l.target,(l.tagName?l.tagName.toLowerCase():
"")===this.tag&&A.get(l,"href"))){var r=this.editor;this.editor.selection.selectElement(l);r.onDisplayChanged();r._updateTimer&&(r._updateTimer.remove(),delete r._updateTimer);r.onNormalizedDisplayChanged();var p=this.button;setTimeout(function(){p.set("disabled",!1);p.loadAndOpenDropDown().then(function(){p.dropDown.focus&&p.dropDown.focus()})},10)}},_onMouseUp:function(){if(c("ff")){var l=this.editor.selection.getAncestorElement(this.tag);if(l){var r=e.getSelection(this.editor.window).getRangeAt(0);
if(r.collapsed&&l.childNodes.length){var p=r.cloneRange();p.selectNodeContents(l.childNodes[l.childNodes.length-1]);p.setStart(l.childNodes[0],0);1!==r.compareBoundaryPoints(p.START_TO_START,p)?r.setStartBefore(l):-1!==r.compareBoundaryPoints(p.END_TO_START,p)&&r.setStartAfter(l)}}}}}),n=x("dijit._editor.plugins.ImgLinkDialog",[m],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(l){if(l&&l.tagName.toLowerCase()===this.tag){var r=l.getAttribute("_djrealurl")||l.getAttribute("src");var p=l.getAttribute("alt");this.editor.selection.selectElement(l,!0)}else p=this.editor.selection.getSelectedText();return{urlInput:r||"",textInput:p||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);
this.editor.onLoadDeferred.then(f.hitch(this,function(){this.own(d(this.editor.editNode,"mousedown",f.hitch(this,"_selectTag")))}))},_selectTag:function(l){l&&l.target&&(l=l.target,(l.tagName?l.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(l))},_checkValues:function(l){l&&l.urlInput&&(l.urlInput=l.urlInput.replace(/"/g,"\x26quot;"));l&&l.textInput&&(l.textInput=l.textInput.replace(/"/g,"\x26quot;"));return l},_onDblClick:function(l){if(l&&l.target&&(l=l.target,(l.tagName?
l.tagName.toLowerCase():"")===this.tag&&A.get(l,"src"))){var r=this.editor;this.editor.selection.selectElement(l);r.onDisplayChanged();r._updateTimer&&(r._updateTimer.remove(),delete r._updateTimer);r.onNormalizedDisplayChanged();var p=this.button;setTimeout(function(){p.set("disabled",!1);p.loadAndOpenDropDown().then(function(){p.dropDown.focus&&p.dropDown.focus()})},10)}}});h.registry.createLink=function(l){var r={command:"createLink",allowUnsafeHtml:"allowUnsafeHtml"in l?l.allowUnsafeHtml:!1};
"linkFilter"in l&&(r.linkFilter=l.linkFilter);return new m(r)};h.registry.insertImage=function(){return new n({command:"insertImage"})};m.ImgLinkDialog=n;return m})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(y,D,x,A,w){D=D("dijit._editor._Plugin",A,{constructor:function(f){this.params=f||{};x.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,
command:"",useDefaultCommand:!0,buttonClass:w,disabled:!1,getLabel:function(f){return this.editor.commands[f]},_initButton:function(){if(this.command.length){var f=this.getLabel(this.command),d=this.editor,c=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(f=x.mixin({label:f,ownerDocument:d.ownerDocument,dir:d.dir,lang:d.lang,showLabel:!1,iconClass:c,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete f.name,this.button=
new this.buttonClass(f))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(f,d,c){this.own(y.connect(f,d,this,c))},updateState:function(){var f=this.editor,d=this.command;if(f&&f.isLoaded&&d.length){var c=this.get("disabled");if(this.button)try{var a=f._implCommand(d);var b=!c&&(this[a]?this[a](d):f.queryCommandEnabled(d));this.enabled!==b&&(this.enabled=
b,this.button.set("disabled",!b));if(b&&"boolean"==typeof this.button.checked){var h=f.queryCommandState(d);this.checked!==h&&(this.checked=h,this.button.set("checked",f.queryCommandState(d)))}}catch(g){console.log(g)}}},setEditor:function(f){this.editor=f;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",x.hitch(this.editor,"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");
this.own(this.editor.on("NormalizedDisplayChanged",x.hitch(this,"updateState")))},setToolbar:function(f){this.button&&f.addChild(this.button)},set:function(f,d){if("object"===typeof f){for(var c in f)this.set(c,f[c]);return this}c=this._getAttrNames(f);if(this[c.s])var a=this[c.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(f,d);return a||this},get:function(f){var d=this._getAttrNames(f);return this[d.g]?this[d.g]():this[f]},_setDisabledAttr:function(f){this._set("disabled",
f);this.updateState()},_getAttrNames:function(f){var d=this._attrPairNames;if(d[f])return d[f];var c=f.charAt(0).toUpperCase()+f.substr(1);return d[f]={s:"_set"+c+"Attr",g:"_get"+c+"Attr"}},_set:function(f,d){this[f]=d}});D.registry={};return D})},"dijit/_editor/range":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(y,D,x){var A={getIndex:function(d,c){for(var a=[],b=[],h=d,g,e;d!=c;){var m=0;for(g=d.parentNode;e=g.childNodes[m++];)if(e===d){--m;break}a.unshift(m);
b.unshift(m-g.childNodes.length);d=g}if(0<a.length&&3==h.nodeType){for(e=h.previousSibling;e&&3==e.nodeType;)a[a.length-1]--,e=e.previousSibling;for(e=h.nextSibling;e&&3==e.nodeType;)b[b.length-1]++,e=e.nextSibling}return{o:a,r:b}},getNode:function(d,c){if(!x.isArray(d)||0==d.length)return c;var a=c;y.every(d,function(b){if(0<=b&&b<a.childNodes.length)a=a.childNodes[b];else return a=null,!1;return!0});return a},getCommonAncestor:function(d,c,a){a=a||d.ownerDocument.body;var b=function(e){for(var m=
[];e;)if(m.unshift(e),e!==a)e=e.parentNode;else break;return m};d=b(d);c=b(c);b=Math.min(d.length,c.length);for(var h=d[0],g=1;g<b;g++)if(d[g]===c[g])h=d[g];else break;return h},getAncestor:function(d,c,a){for(a=a||d.ownerDocument.body;d&&d!==a;){var b=d.nodeName.toUpperCase();if(c.test(b))return d;d=d.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(d,c,a){a=a||d.ownerDocument.body;c=c||A.BlockTagNames;for(var b=null,h;d&&
d!==a;){var g=d.nodeName.toUpperCase();!b&&c.test(g)&&(b=d);!h&&/^(?:BODY|TD|TH|CAPTION)$/.test(g)&&(h=d);d=d.parentNode}return{blockNode:b,blockContainer:h||d.ownerDocument.body}},atBeginningOfContainer:function(d,c,a){var b=!1,h=0==a;h||3!=c.nodeType||/^[\s\xA0]+$/.test(c.nodeValue.substr(0,a))&&(h=!0);if(h)for(b=!0;c&&c!==d;){if(c.previousSibling){b=!1;break}c=c.parentNode}return b},atEndOfContainer:function(d,c,a){var b=!1,h=a==(c.length||c.childNodes.length);h||3!=c.nodeType||/^[\s\xA0]+$/.test(c.nodeValue.substr(a))&&
(h=!0);if(h)for(b=!0;c&&c!==d;){if(c.nextSibling){b=!1;break}c=c.parentNode}return b},adjacentNoneTextNode:function(d,c){var a=d;d=0-d.length||0;for(c=c?"nextSibling":"previousSibling";a&&3==a.nodeType;)d+=a.length,a=a[c];return[a,d]},create:function(d){d=d||window;return d.getSelection?d.document.createRange():new f},getSelection:function(d,c){if(d.getSelection)return d.getSelection();d=new w.selection(d);c||d._getCurrentSelection();return d}};if(!window.getSelection)var w=A.ie={cachedSelection:{},
selection:function(d){this._ranges=[];this.addRange=function(c,a){this._ranges.push(c);a||c._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(c){return this._ranges[c]};this._getCurrentSelection=function(){this.removeAllRanges();var c=d.document.selection.createRange();c="CONTROL"==d.document.selection.type.toUpperCase()?new f(w.decomposeControlRange(c)):new f(w.decomposeTextRange(c));this.addRange(c,!0),this.isCollapsed=
c.collapsed}},decomposeControlRange:function(d){var c=d.item(0),a=d.item(d.length-1);d=c.parentNode;var b=a.parentNode;c=A.getIndex(c,d).o[0];a=A.getIndex(a,b).o[0]+1;return[d,c,b,a]},getEndPoint:function(d,c){var a=d.duplicate();a.collapse(!c);var b="EndTo"+(c?"End":"Start"),h=a.parentElement(),g;if(0<h.childNodes.length)y.every(h.childNodes,function(n,l){if(3!=n.nodeType)if(a.moveToElementText(n),0<a.compareEndPoints(b,d))if(g&&3==g.nodeType){e=g;var r=!0}else return e=h,m=l,!1;else{if(l==h.childNodes.length-
1)return e=h,m=h.childNodes.length,!1}else l==h.childNodes.length-1&&(e=n,r=!0);if(r&&e)return e=(n=A.adjacentNoneTextNode(e)[0])?n.nextSibling:h.firstChild,l=A.adjacentNoneTextNode(e),n=l[0],l=l[1],n?(a.moveToElementText(n),a.collapse(!1)):a.moveToElementText(h),a.setEndPoint(b,d),m=a.text.length-l,!1;g=n;return!0});else{var e=h;var m=0}c||1!=e.nodeType||m!=e.childNodes.length||(c=e.nextSibling)&&3==c.nodeType&&(e=c,m=0);return[e,m]},setEndPoint:function(d,c,a){d=d.duplicate();var b;if(3!=c.nodeType)if(0<
a){if(b=c.childNodes[a-1])if(3==b.nodeType)c=b,a=b.length;else if(b.nextSibling&&3==b.nextSibling.nodeType)c=b.nextSibling,a=0;else{d.moveToElementText(b.nextSibling?b:c);var h=b.parentNode;b=h.insertBefore(b.ownerDocument.createTextNode(" "),b.nextSibling);d.collapse(!1);h.removeChild(b)}}else d.moveToElementText(c),d.collapse(!0);3==c.nodeType&&(b=A.adjacentNoneTextNode(c),h=b[0],b=b[1],h?(d.moveToElementText(h),d.collapse(!1),"inherit"!=h.contentEditable&&b++):(d.moveToElementText(c.parentNode),
d.collapse(!0),d.move("character",1),d.move("character",-1)),a+=b,0<a&&d.move("character",a)!=a&&console.error("Error when moving!"));return d},decomposeTextRange:function(d){var c=w.getEndPoint(d),a=c[0],b=c[1],h=c[0];c=c[1];d.htmlText.length&&(d.htmlText==d.text?c=b+d.text.length:(c=w.getEndPoint(d,!0),h=c[0],c=c[1]));return[a,b,h,c]},setRange:function(d,c,a,b,h,g){c=w.setEndPoint(d,c,a);d.setEndPoint("StartToStart",c);if(!g)var e=w.setEndPoint(d,b,h);d.setEndPoint("EndToEnd",e||c);return d}},f=
A.W3CRange=D(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=this.startContainer!==this.endContainer?A.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===
this.endContainer&&this.startOffset==this.endOffset},setStart:function(d,c){c=parseInt(c);if(this.startContainer!==d||this.startOffset!=c)delete this._cachedBookmark,this.startContainer=d,this.startOffset=c,this.endContainer?this._updateInternal():this.setEnd(d,c)},setEnd:function(d,c){c=parseInt(c);if(this.endContainer!==d||this.endOffset!=c)delete this._cachedBookmark,this.endContainer=d,this.endOffset=c,this.startContainer?this._updateInternal():this.setStart(d,c)},setStartAfter:function(d,c){this._setPoint("setStart",
d,c,1)},setStartBefore:function(d,c){this._setPoint("setStart",d,c,0)},setEndAfter:function(d,c){this._setPoint("setEnd",d,c,1)},setEndBefore:function(d,c){this._setPoint("setEnd",d,c,0)},_setPoint:function(d,c,a,b){a=A.getIndex(c,c.parentNode).o;this[d](c.parentNode,a.pop()+b)},_getIERange:function(){var d=(this._body||this.endContainer.ownerDocument.body).createTextRange();w.setRange(d,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return d},getBookmark:function(){this._getIERange();
return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var d=this.startContainer,c=this._getIERange();3!==d.nodeType||this.startOffset||this.setStartBefore(d);c.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var d=new f([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);d._body=this._body;return d},detach:function(){this.startContainer=this.commonAncestorContainer=
this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});x.setObject("dijit.range",A);return A})},"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),function(y,D,x,A,w,f,d,
c,a,b,h,g,e,m,n,l,r,p){var v=x("dijit._editor.plugins.ViewSource",n,{stripScripts:!0,stripComments:!0,stripIFrames:!0,stripEventHandlers:!0,readOnly:!1,_fsPlugin:null,toggle:function(){g("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var q=c.getLocalization("dijit._editor","commands"),k=this.editor;this.button=new l({label:q.viewSource,ownerDocument:k.ownerDocument,dir:k.dir,lang:k.lang,showLabel:!1,iconClass:this.iconClassPrefix+" "+
this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:b.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(q){this.editor=q;this._initButton();this.removeValueFilterHandles();this._setValueFilterHandle=D.before(this.editor,"setValue",b.hitch(this,function(k){return[this._filter(k)]}));this._getValueFilterHandle=D.after(this.editor,"getValue",b.hitch(this,function(k){return this._filter(k)}));this.editor.addKeyHandler(a.F12,!0,!0,b.hitch(this,function(k){this.button.focus();
this.toggle();k.stopPropagation();k.preventDefault();setTimeout(b.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(q){var k=this.editor,z=k._plugins;this._sourceShown=q;var B=this;try{this.sourceArea||this._createSourceView();if(q)k._sourceQueryCommandEnabled=k.queryCommandEnabled,k.queryCommandEnabled=function(J){return"viewsource"===J.toLowerCase()},this.editor.onDisplayChanged(),y.forEach(z,function(J){!J||J instanceof v||!J.isInstanceOf(n)||J.set("disabled",
!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return B.sourceArea}),this.sourceArea.value=k.get("value"),this.sourceArea.style.height=k.iframe.style.height,this.sourceArea.style.width=k.iframe.style.width,k.iframe.parentNode.style.position="relative",d.set(k.iframe,{position:"absolute",top:0,visibility:"hidden"}),d.set(this.sourceArea,{display:"block"}),this._resizeHandle=h(window,"resize",b.hitch(this,function(){var J=e.getBox(k.ownerDocument);"_prevW"in this&&"_prevH"in this&&
J.w===this._prevW&&J.h===this._prevH||(this._prevW=J.w,this._prevH=J.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(b.hitch(this,function(){delete this._resizer;this._resize()}),10))})),setTimeout(b.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=b.hitch(this,function(){var J=this.sourceArea.value;return J=this._filter(J)}),this._setListener=D.after(this.editor,
"setValue",b.hitch(this,function(J){this.sourceArea.value=J||""}),!0);else{if(!k._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);k.queryCommandEnabled=k._sourceQueryCommandEnabled;if(!this._readOnly){var H=this.sourceArea.value;k.beginEditing();k.set("value",H);k.endEditing()}y.forEach(z,function(J){J&&
J.isInstanceOf(n)&&J.set("disabled",!1)});d.set(this.sourceArea,"display","none");d.set(k.iframe,{position:"relative",visibility:"visible"});delete k._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(b.hitch(this,function(){var J=k.domNode.parentNode;J&&(J=p.getEnclosingWidget(J))&&J.resize&&J.resize();k.resize()}),300)}catch(J){console.log(J)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var q=this.editor,k=q.getHeaderHeight(),z=
q.getFooterHeight(),B=f.position(q.domNode),H=f.getPadBorderExtents(q.iframe.parentNode),J=f.getMarginExtents(q.iframe.parentNode),N=f.getPadBorderExtents(q.domNode),C=B.w-N.w;B=B.h-(k+N.h+z);this._fsPlugin&&this._fsPlugin.isFullscreen&&(q=e.getBox(q.ownerDocument),C=q.w-N.w,B=q.h-(k+N.h+z));f.setMarginBox(this.sourceArea,{w:Math.round(C-(H.w+J.w)),h:Math.round(B-(H.h+J.h))})},_createSourceView:function(){var q=this.editor,k=q._plugins;this.sourceArea=w.create("textarea");this.readOnly&&(A.set(this.sourceArea,
"readOnly",!0),this._readOnly=!0);d.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});A.set(this.sourceArea,"aria-label",this.editor.id);w.place(this.sourceArea,q.iframe,"before");g("ie")&&q.iframe.parentNode.lastChild!==q.iframe&&d.set(q.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});q._viewsource_oldFocus=q.focus;var z=this;q.focus=function(){if(z._sourceShown)z.setSourceAreaCaret();else try{this._vsFocused?
(delete this._vsFocused,m.focus(q.editNode)):q._viewsource_oldFocus()}catch(J){console.log("ViewSource focus code error: "+J)}};var B,H;for(B=0;B<k.length;B++)if((H=k[B])&&("dijit._editor.plugins.FullScreen"===H.declaredClass||H.declaredClass===r._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=H;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return z._sourceShown?z.sourceArea:this._viewsource_getAltViewNode()});
this.own(h(this.sourceArea,"keydown",b.hitch(this,function(J){this._sourceShown&&J.keyCode==a.F12&&J.ctrlKey&&J.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(b.hitch(this,function(){q.focus()}),100),J.stopPropagation(),J.preventDefault())})))},_stripScripts:function(q){q&&(q=q.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,""),q=q.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),q=q.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return q},_stripComments:function(q){q&&
(q=q.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return q},_stripIFrames:function(q){q&&(q=q.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return q},_stripEventHandlers:function(q){if(q){var k=q.match(/<[a-z]+?\b(.*?on.*?(['"]).*?\2.*?)+>/gim);if(k)for(var z=0,B=k.length;z<B;z++){var H=k[z],J=H.replace(/\s+on[a-z]*\s*=\s*(['"])(.*?)\1/igm,"");q=q.replace(H,J)}}return q},_filter:function(q){q&&(this.stripScripts&&(q=this._stripScripts(q)),this.stripComments&&(q=this._stripComments(q)),
this.stripIFrames&&(q=this._stripIFrames(q)),this.stripEventHandlers&&(q=this._stripEventHandlers(q)));return q},removeValueFilterHandles:function(){this._setValueFilterHandle&&(this._setValueFilterHandle.remove(),delete this._setValueFilterHandle);this._getValueFilterHandle&&(this._getValueFilterHandle.remove(),delete this._getValueFilterHandle)},setSourceAreaCaret:function(){var q=this.sourceArea;m.focus(q);this._sourceShown&&!this.readOnly&&(q.setSelectionRange?q.setSelectionRange(0,0):this.sourceArea.createTextRange&&
(q=q.createTextRange(),q.collapse(!0),q.moveStart("character",-99999),q.moveStart("character",0),q.moveEnd("character",0),q.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.removeValueFilterHandles();this.inherited(arguments)}});n.registry.viewSource=n.registry.viewsource=function(q){return new v({readOnly:"readOnly"in
q?q.readOnly:!1,stripComments:"stripComments"in q?q.stripComments:!0,stripScripts:"stripScripts"in q?q.stripScripts:!0,stripIFrames:"stripIFrames"in q?q.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in q?q.stripEventHandlers:!0})};return v})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n){y=x("dijit._editor.plugins._FontDropDown",[b,h,g],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:y,postMixInProperties:function(){this.inherited(arguments);this.strings=w.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=a.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new c({idProperty:"value",data:D.map(this.values,function(q){var k=this.strings[q]||q;return{label:this.getLabel(q,k),name:k,value:q}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(q,k){k=!1!==k;this.select.set("value",0>D.indexOf(this.values,q)?"":q,k);k||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(q){this._set("disabled",q);this.select.set("disabled",q)}});var l=x("dijit._editor.plugins._FontNameDropDown",y,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(q,k){return this.plainText?k:"\x3cdiv style\x3d'font-family: "+q+"'\x3e"+k+"\x3c/div\x3e"},_normalizeFontName:function(q){var k=this.values;if(!q||!k)return q;var z=q.split(",");if(1<z.length)for(var B=0,H=z.length;B<H;B++){var J=d.trim(z[B]);if(-1<D.indexOf(k,J))return J}return q},_setValueAttr:function(q,k){k=!1!==
k;q=this._normalizeFontName(q);this.generic&&(q={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[q]||q);this.inherited(arguments,[q,k])}}),r=x("dijit._editor.plugins._FontSizeDropDown",y,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(q,
k){return this.plainText?k:"\x3cfont size\x3d"+q+"'\x3e"+k+"\x3c/font\x3e"},_setValueAttr:function(q,k){k=!1!==k;q.indexOf&&-1!=q.indexOf("px")&&(q={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(q,10)]||q);this.inherited(arguments,[q,k])}}),p=x("dijit._editor.plugins._FormatBlockDropDown",y,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(q,k){return this.plainText||
"noFormat"==q?k:"\x3c"+q+"\x3e"+k+"\x3c/"+q+"\x3e"},_execCommand:function(q,k,z){if("noFormat"===z){var B;if((k=n.getSelection(q.window))&&0<k.rangeCount&&(z=k.getRangeAt(0),z)){k=z.startContainer;for(B=z.endContainer;k&&k!==q.editNode&&k!==q.document.body&&1!==k.nodeType;)k=k.parentNode;for(;B&&B!==q.editNode&&B!==q.document.body&&1!==B.nodeType;)B=B.parentNode;var H=f.hitch(this,function(L,F){if(L.childNodes&&L.childNodes.length){var K;for(K=0;K<L.childNodes.length;K++){var t=L.childNodes[K];if(1==
t.nodeType&&q.selection.inSelection(t)){var u=t.tagName?t.tagName.toLowerCase():"";-1!==D.indexOf(this.values,u)&&F.push(t);H(t,F)}}}});z=f.hitch(this,function(L){if(L&&L.length){for(q.beginEditing();L.length;)this._removeFormat(q,L.pop());q.endEditing()}});var J=[];if(k==B){for(B=k;B&&B!==q.editNode&&B!==q.document.body;){if(1==B.nodeType){var N=B.tagName?B.tagName.toLowerCase():"";if(-1!==D.indexOf(this.values,N)){var C=B;break}}B=B.parentNode}H(k,J);C&&(J=[C].concat(J))}else for(B=k;q.selection.inSelection(B);)1==
B.nodeType&&(N=B.tagName?B.tagName.toLowerCase():"",-1!==D.indexOf(this.values,N)&&J.push(B),H(B,J)),B=B.nextSibling;z(J);q.onDisplayChanged()}}else q.execCommand(k,z)},_removeFormat:function(q,k){if(q.customUndo){for(;k.firstChild;)A.place(k.firstChild,k,"before");k.parentNode.removeChild(k)}else{q.selection.selectElementChildren(k);var z=q.selection.getSelectedHtml();q.selection.selectElement(k);q.execCommand("inserthtml",z||"")}}}),v=x("dijit._editor.plugins.FontChoice",m,{useDefaultCommand:!1,
_initButton:function(){var q={fontName:l,fontSize:r,formatBlock:p}[this.command],k=this.params;this.params.custom&&(k.values=this.params.custom);var z=this.editor;this.button=new q(f.delegate({dir:z.dir,lang:z.lang},k));this.own(this.button.select.on("change",f.hitch(this,function(B){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=B.indexOf(" ")&&(B="'"+B+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,B):this.editor.execCommand(this.command,
B)})))},updateState:function(){var q=this.editor,k=this.command;if(q&&q.isLoaded&&k.length&&this.button){var z=this.get("disabled");this.button.set("disabled",z);if(!z){try{var B=q.queryCommandValue(k)||""}catch(J){B=""}(z=f.isString(B)&&(B.match(/'([^']*)'/)||B.match(/"([^"]*)"/)))&&(B=z[1]);"fontSize"!==k||B||(B=3);if("formatBlock"===k)if(B&&"p"!=B)0>D.indexOf(this.button.values,B)&&(B="noFormat");else{B=null;if((k=n.getSelection(this.editor.window))&&0<k.rangeCount&&(k=k.getRangeAt(0)))var H=k.endContainer;
for(;H&&H!==q.editNode&&H!==q.document;){if((k=H.tagName?H.tagName.toLowerCase():"")&&-1<D.indexOf(this.button.values,k)){B=k;break}H=H.parentNode}B||(B="noFormat")}B!==this.button.get("value")&&this.button.set("value",B,!1)}}}});D.forEach(["fontName","fontSize","formatBlock"],function(q){m.registry[q]=function(k){return new v({command:q,plainText:k.plainText})}});v._FontDropDown=y;v._FontNameDropDown=l;v._FontSizeDropDown=r;v._FormatBlockDropDown=p;return v})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),
function(y,D,x,A){var w=y.declare("dojox.editor.plugins.Preview",A,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=y.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new D.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:y.hitch(this,"_preview")})},setEditor:function(f){this.editor=f;this._initButton()},
updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var f=this.editor.get("value"),d="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",c;if(this.stylesheets)for(c=0;c<this.stylesheets.length;c++)d+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[c]+"'\x3e\n";this.styles&&(d+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");f="\x3chtml\x3e\n\t\x3chead\x3e\n"+d+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+
f+"\n\t\x3c/body\x3e\n\x3c/html\x3e";var a=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");a.document.open();a.document.write(f);a.document.close()}catch(b){console.warn(b)}}});y.subscribe(D._scopeName+".Editor.getPlugin",null,function(f){f.plugin||"preview"!==f.args.name.toLowerCase()||(f.plugin=new w({styles:"styles"in f.args?f.args.styles:"",stylesheets:"stylesheets"in f.args?f.args.stylesheets:null}))});return w})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(y,D,x,A,w,f){var d=x("dijit._editor.plugins.TextColor",w,{buttonClass:f,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var c=this;this.button.loadDropDown=function(a){function b(h){c.button.dropDown=new h({dir:c.editor.dir,ownerDocument:c.editor.ownerDocument,value:c.value,onChange:function(g){c.editor.execCommand(c.command,g)},onExecute:function(){c.editor.execCommand(c.command,this.get("value"))}});a()}"string"==
typeof c.colorPicker?y([c.colorPicker],b):b(c.colorPicker)}},updateState:function(){var c=this.editor,a=this.command;if(c&&c.isLoaded&&a.length){if(this.button){var b=this.get("disabled");this.button.set("disabled",b);if(b)return;try{var h=c.queryCommandValue(a)||""}catch(g){h=""}}""==h&&(h="#000000");"transparent"==h&&(h="#ffffff");"string"==typeof h?-1<h.indexOf("rgb")&&(h=D.fromRgb(h).toHex()):(h=((h&255)<<16|h&65280|(h&16711680)>>>16).toString(16),h="#000000".slice(0,7-h.length)+h);this.value=
h;(c=this.button.dropDown)&&c.get&&h!==c.get("value")&&c.set("value",h,!1)}}});w.registry.foreColor=function(c){return new d(c)};w.registry.hiliteColor=function(c){return new d(c)};return d})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(y,D,x,A,w,f,d){var c=d("dojox.editor.plugins.ToolbarLineBreak",[A,w],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",
postCreate:function(){y.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}});y.subscribe(D._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var b=a.args.name.toLowerCase();if("||"===b||"toolbarlinebreak"===b)a.plugin=new f({button:new c,setEditor:function(h){this.editor=h}})}});return c})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n){y.experimental("dojox.editor.plugins.FindReplace");var l=y.declare("dojox.editor.plugins._FindReplaceCloseBox",[f,d,a],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=D.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),r=y.declare("dojox.editor.plugins._FindReplaceTextBox",[f,d,a],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=D.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");y.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(k){this.value=k;this.textBox.set("value",k)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(k){this.disabled=k;this.textBox.set("disabled",
k)},onChange:function(k){this.value=k},_onKeyPress:function(k){var z=0,B=0;!k.target||k.ctrlKey||k.altKey||k.shiftKey||(k.keyCode==y.keys.LEFT_ARROW?(z=k.target.selectionStart,B=k.target.selectionEnd,z<B&&(D.selectInputText(k.target,z,z),y.stopEvent(k))):k.keyCode==y.keys.RIGHT_ARROW&&(z=k.target.selectionStart,B=k.target.selectionEnd,z<B&&(D.selectInputText(k.target,B,B),y.stopEvent(k))))}}),p=y.declare("dojox.editor.plugins._FindReplaceCheckBox",[f,d,a],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=D.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(k){this.checkBox.set("value",k)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(k){this.disabled=k;this.checkBox.set("disabled",k)}}),v=y.declare("dojox.editor.plugins._FindReplaceToolbar",h,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");y.addClass(this.domNode,"dijitToolbar")},addChild:function(k,z){D._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(k){k.stopPropagation()}}),q=y.declare("dojox.editor.plugins.FindReplace",[n],{buttonClass:D.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=y.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new D.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:y.hitch(this,
"_toggleFindReplace")});y.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",y.hitch(this,function(k,z){"disabled"===k&&this._toggleFindReplace(!z&&this._displayed,!0,!0)}))},setEditor:function(k){this.editor=k;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(k,z,B){var H=y.marginBox(this.editor.domNode);k&&!y.isOpera?(y.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),z||(this._displayed=
!0)):(y.style(this._frToolbar.domNode,"display","none"),z||(this._displayed=!1),B||this.editor.focus());this.editor.resize({h:H.h})},_populateFindField:function(){var k=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(k&&this._findField.textBox.set("value",k),this._findField.textBox.focus(),D.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(k){this.inherited(arguments);if(!y.isOpera){var z=this._frToolbar=new v;y.style(z.domNode,"display",
"none");y.place(z.domNode,k.domNode,"after");z.startup();this._closeBox=new l;z.addChild(this._closeBox);this._findField=new r({label:this._strings.findLabel,tooltip:this._strings.findTooltip});z.addChild(this._findField);this._replaceField=new r({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});z.addChild(this._replaceField);z.addChild(new x.editor.plugins.ToolbarLineBreak);this._findButton=new D.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;z.addChild(this._findButton);this._replaceButton=new D.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;z.addChild(this._replaceButton);this._replaceAllButton=new D.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;z.addChild(this._replaceAllButton);this._caseSensitive=new p({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});z.addChild(this._caseSensitive);this._backwards=new p({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});z.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new D.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(k){k.keyCode==y.keys.ENTER&&(this._find(),y.stopEvent(k))},_onReplaceKeyDown:function(k){k.keyCode==y.keys.ENTER&&(this._replace()||this._replace(),y.stopEvent(k))},_find:function(k){var z=this._findField.get("value")||"";if(z){var B=this._caseSensitive.get("value"),
H=this._backwards.get("value");z=this._findText(z,B,H);!z&&k&&(this._promDialog.set("content",y.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),D.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(y.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;D.popup.close(this._promDialog)}),3E3),setTimeout(y.hitch(this,function(){this.editor.focus()}),0));return z}return!1},_replace:function(k){var z=
!1,B=this.editor;B.focus();var H=this._findField.get("value")||"",J=this._replaceField.get("value")||"";if(H){var N=this._caseSensitive.get("value"),C=this._backwards.get("value"),L=B._sCall("getSelectedText",[null]);y.isMoz&&(H=y.trim(H),L=y.trim(L));H=this._filterRegexp(H,!N);L&&H.test(L)&&(B.execCommand("inserthtml",J),z=!0,C&&(this._findText(J,N,C),B._sCall("collapse",[!0])));!this._find(!1)&&k&&(this._promDialog.set("content",y.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
D.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(y.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;D.popup.close(this._promDialog)}),3E3),setTimeout(y.hitch(this,function(){this.editor.focus()}),0));return z}return null},_replaceAll:function(k){var z=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&z++;var B=y.hitch(this,function(){this._replace(!1)?
(z++,setTimeout(B,10)):k&&(this._promDialog.set("content",y.string.substitute(this._strings.replaceDialogText,{0:""+z})),D.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(y.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;D.popup.close(this._promDialog)}),3E3),setTimeout(y.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});B()},_findText:function(k,z,
B){var H=this.editor,J=H.window,N=!1;if(k)if(J.find)N=J.find(k,z,B,!1,!1,!1,!1);else{var C=H.document;if(C.selection||J.getSelection)if(this.editor.focus(),H=C.body.createTextRange(),N=H.duplicate(),J.getSelection().getRangeAt(0),(C=C.selection?C.selection.createRange():null)?B?H.setEndPoint("EndToStart",C):H.setEndPoint("StartToEnd",C):this._bookmark&&(J=J.getSelection().toString(),H.moveToBookmark(this._bookmark),H.text!=J?(H=N.duplicate(),this._bookmark=null):(B?N.setEndPoint("EndToStart",H):N.setEndPoint("StartToEnd",
H),H=N.duplicate())),z=z?4:0,B&&(z|=1),N=H.findText(k,H.text.length,z))H.select(),this._bookmark=H.getBookmark()}return N},_filterRegexp:function(k,z){for(var B="",H=null,J=0;J<k.length;J++)switch(H=k.charAt(J),H){case "\\":B+=H;J++;B+=k.charAt(J);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":B+="\\";default:B+=H}B="^"+B+"$";return z?new RegExp(B,"mi"):new RegExp(B,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,D.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});q._FindReplaceCloseBox=l;q._FindReplaceTextBox=r;q._FindReplaceCheckBox=p;q._FindReplaceToolbar=v;y.subscribe(D._scopeName+".Editor.getPlugin",null,function(k){k.plugin||"findreplace"!==
k.args.name.toLowerCase()||(k.plugin=new q({}))});return q})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(y,D,x,A,w,f,d,c){x("dijit-legacy-requires")&&w(0,function(){y(["dijit/ToolbarSeparator"])});return D("dijit.Toolbar",[f,c,d],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",
_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(y,D,x,A){var w=y.declare("dojox.editor.plugins.PasteFromWord",
A,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var f=y.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");y.mixin(f,y.i18n.getLocalization("dijit","common"));y.mixin(f,y.i18n.getLocalization("dijit._editor","commands"));this.button=new D.form.Button({label:f.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:y.hitch(this,"_openDialog")});this._uId=D.getUniqueId(this.editor.id);f.uId=this._uId;f.width=this.width||"400px";f.height=this.height||"300px";this._dialog=(new D.Dialog({title:f.pasteFromWord})).placeAt(y.body());this._dialog.set("content",y.string.substitute(this._template,f));y.style(y.byId(this._uId+"_rte"),"opacity",.001);this.connect(D.byId(this._uId+"_paste"),"onClick","_paste");this.connect(D.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(f){this.editor=f;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(y.hitch(this,function(){this._rte=new D._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(y.hitch(this,function(){y.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var f=x.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var d;for(d=0;d<this._filters.length;d++){var c=this._filters[d];f=f.replace(c.regexp,c.handler)}f=x.html.format.prettyPrint(f);this.editor.focus();this.editor.execCommand("inserthtml",f)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});y.subscribe(D._scopeName+".Editor.getPlugin",null,function(f){f.plugin||"pastefromword"!==f.args.name.toLowerCase()||(f.plugin=new w({width:"width"in f.args?f.args.width:"400px",height:"height"in f.args?f.args.width:"300px"}))});return w})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v,q,k,z,B,H,J,N,C,L,F){var K=x("dijit._editor.RichText",[B,H],{constructor:function(t){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};t&&e.isString(t.value)&&(this.value=t.value);this.onLoadDeferred=new A},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[e.trim,e.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);r("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));r("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(r("ie")||r("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[e.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[e.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);v.publish(F._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var t=e.hitch(this,function(G,M){return function(){return!this.execCommand(G,M)}}),u={b:t("bold"),i:t("italic"),u:t("underline"),a:t("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:t("formatblock",
"h1"),2:t("formatblock","h2"),3:t("formatblock","h3"),4:t("formatblock","h4"),"\\":t("insertunorderedlist")};r("ie")||(u.Z=t("redo"));for(var E in u)this.addKeyHandler(E,!0,!1,u[E])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(K._editorCommandsLocalized)this._local2NativeFormatNames=K._local2NativeFormatNames,this._native2LocalFormatNames=K._native2LocalFormatNames;else{K._editorCommandsLocalized=!0;K._local2NativeFormatNames={};
K._native2LocalFormatNames={};this._local2NativeFormatNames=K._local2NativeFormatNames;this._native2LocalFormatNames=K._native2LocalFormatNames;for(var t="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),u="",E,G=0;E=t[G++];)u="l"!==E.charAt(1)?u+("\x3c"+E+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+E+"\x3e\x3cbr/\x3e"):u+("\x3c"+E+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+E+"\x3e\x3cbr/\x3e");var M=c.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:u});this.ownerDocumentBody.appendChild(M);
t=e.hitch(this,function(){for(var P=M.firstChild;P;)try{this.selection.selectElement(P.firstChild);var Q=P.tagName.toLowerCase();this._local2NativeFormatNames[Q]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[Q]]=Q;P=P.nextSibling.nextSibling}catch(S){}c.destroy(M)});this.defer(t)}},open:function(t){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new A;this.isClosed||this.close();v.publish(F._scopeName+"._editor.RichText::open",
this);1===arguments.length&&t.nodeName&&(this.domNode=t);var u=this.domNode;if(e.isString(this.value)){var E=this.value;u.innerHTML=""}else if(u.nodeName&&"textarea"==u.nodeName.toLowerCase()){var G=this.textarea=u;this.name=G.name;E=G.value;u=this.domNode=this.ownerDocument.createElement("div");u.setAttribute("widgetId",this.id);G.removeAttribute("widgetId");u.cssText=G.cssText;u.className+=" "+G.className;c.place(u,G,"before");var M=e.hitch(this,function(){b.set(G,{display:"block",position:"absolute",
top:"-1000px"});if(r("ie")){var I=G.style;this.__overflow=I.overflow;I.overflow="hidden"}});r("ie")?this.defer(M,10):M();if(G.form){var P=G.value;this.reset=function(){this.getValue()!==P&&this.replaceValue(P)};m(G.form,"submit",e.hitch(this,function(){f.set(G,"disabled",this.disabled);G.value=this.getValue()}))}}else E=C.getChildrenHtml(u),u.innerHTML="";this.value=E;u.nodeName&&"LI"===u.nodeName&&(u.innerHTML=" \x3cbr\x3e");this.header=u.ownerDocument.createElement("div");u.appendChild(this.header);
this.editingArea=u.ownerDocument.createElement("div");u.appendChild(this.editingArea);this.footer=u.ownerDocument.createElement("div");u.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!D.useXDomain||D.allowXdRichTextSave)){if((E=w.byId(F._scopeName+"._editor.RichText.value"))&&""!==E.value){M=E.value.split(this._SEPARATOR);for(var Q=0,S;S=M[Q++];)if(S=S.split(this._NAME_CONTENT_SEP),S[0]===this.name){this.value=S[1];M=M.splice(Q,1);E.value=M.join(this._SEPARATOR);
break}}K._globalSaveHandler||(K._globalSaveHandler={},q.addOnUnload(function(){for(var I in K._globalSaveHandler){var O=K._globalSaveHandler[I];e.isFunction(O)&&O()}}));K._globalSaveHandler[this.id]=e.hitch(this,"_saveContent")}this.isClosed=!1;E=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");E.id=this.id+"_iframe";E.style.border="none";E.style.width="100%";this._layoutMode?E.style.height="100%":7<=r("ie")?(this.height&&(E.style.height=this.height),this.minHeight&&(E.style.minHeight=
this.minHeight)):E.style.height=this.height?this.height:this.minHeight;E.frameBorder=0;E._loadFunc=e.hitch(this,function(I){this.window=I;this.document=I.document;this.selection=new J.SelectionManager(I);r("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});M=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");M=11>r("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+M+"');document.close()":"javascript: '"+
M+"'";this.editingArea.appendChild(E);E.src=M;"LI"===u.nodeName&&(u.lastChild.style.marginTop="-1.2em");d.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var t=b.getComputedStyle(this.domNode);if(this["aria-label"])var u=this["aria-label"];else{var E=n('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||w.byId(this["aria-labelledby"],this.ownerDocument);E&&(u=E.textContent||E.innerHTML||"")}E="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(u?" aria-label\x3d'"+p.escape(u)+"'":"")+"\x3e\x3c/div\x3e";var G=[t.fontWeight,t.fontSize,t.fontFamily].join(" "),M=t.lineHeight;M=0<=M.indexOf("px")?parseFloat(M)/parseFloat(t.fontSize):0<=M.indexOf("em")?parseFloat(M):"normal";var P="",Q=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(S){S=S.replace(/^;/ig,"")+";";var I=S.split(":")[0];if(I){I=e.trim(I);I=I.toLowerCase();var O,R="";for(O=0;O<I.length;O++){var T=I.charAt(O);switch(T){case "-":O++,T=I.charAt(O).toUpperCase();default:R+=
T}}b.set(Q.domNode,R,"")}P+=S+";"});this.iframe.setAttribute("title",u);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||h.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",u?"\x3ctitle\x3e"+p.escape(u)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",G,";\n",this.height||r("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",M,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",r("ie")||r("trident")||r("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",u?" aria-label\x3d'"+p.escape(u)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+P+"'\x3e",E,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var t=[];this.styleSheets&&(t=this.styleSheets.split(";"),this.styleSheets=
"");t=t.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var u="",E=0,G,M=z.get(this.ownerDocument);G=t[E++];)G=(new k(M.location,G)).toString(),this.editingAreaStyleSheets.push(G),u+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+G+'"/\x3e';return u},addStyleSheet:function(t){var u=t.toString(),E=z.get(this.ownerDocument);if("."===u.charAt(0)||"/"!==u.charAt(0)&&!t.host)u=(new k(E.location,u)).toString();-1<y.indexOf(this.editingAreaStyleSheets,u)||(this.editingAreaStyleSheets.push(u),
this.onLoadDeferred.then(e.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(u);else{var G=this.document.getElementsByTagName("head")[0],M=this.document.createElement("link");M.rel="stylesheet";M.type="text/css";M.href=u;G.appendChild(M)}})))},removeStyleSheet:function(t){var u=t.toString(),E=z.get(this.ownerDocument);if("."===u.charAt(0)||"/"!==u.charAt(0)&&!t.host)u=(new k(E.location,u)).toString();t=y.indexOf(this.editingAreaStyleSheets,u);-1!==t&&(delete this.editingAreaStyleSheets[t],
n('link[href\x3d"'+u+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(t){t=!!t;this._set("disabled",t);if(this.isLoaded){var u=r("ie")&&(this.isLoaded||!this.focusOnLoad);u&&(this.editNode.unselectable="on");this.editNode.contentEditable=!t;this.editNode.tabIndex=t?"-1":this.tabIndex;u&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(r("mozilla")&&!t&&this._mozSettingProps){t=this._mozSettingProps;for(var E in t)if(t.hasOwnProperty(E))try{this.document.execCommand(E,
!1,t[E])}catch(G){}}this._disabledOK=!0}},onLoad:function(t){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=L.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var u=this;this.beforeIframeNode=c.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=c.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){u.editNode.focus()};this.focusNode=
this.editNode;var E=this.events.concat(this.captureEvents),G=this.iframe?this.document:this.editNode;this.own.apply(this,y.map(E,function(M){var P=M.toLowerCase().replace(/^on/,"");return m(G,P,e.hitch(this,M))},this));this.own(m(G,"mouseup",e.hitch(this,"onClick")));r("ie")&&(this.own(m(this.document,"mousedown",e.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);r("webkit")&&(this._webkitListener=this.own(m(this.document,"mouseup",e.hitch(this,"onDisplayChanged")))[0],this.own(m(this.document,
"mousedown",e.hitch(this,function(M){M=M.target;!M||M!==this.document.body&&M!==this.document||this.defer("placeCursorAtEnd")}))));if(r("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(M){}this.isLoaded=!0;this.set("disabled",this.disabled);E=e.hitch(this,function(){this.setValue(t);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&l(e.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(E):E()},onKeyDown:function(t){if(t.keyCode===g.SHIFT||t.keyCode===g.ALT||t.keyCode===g.META||t.keyCode===g.CTRL)return!0;t.keyCode===g.TAB&&this.isTabIndent&&(t.stopPropagation(),t.preventDefault(),this.queryCommandEnabled(t.shiftKey?"outdent":"indent")&&this.execCommand(t.shiftKey?"outdent":"indent"));if(t.keyCode==g.TAB&&!this.isTabIndent&&!t.ctrlKey&&!t.altKey)return t.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>r("ie")&&t.keyCode===g.BACKSPACE&&"Control"===this.document.selection.type&&(t.stopPropagation(),t.preventDefault(),this.execCommand("delete"));r("ff")&&(t.keyCode===g.PAGE_UP||t.keyCode===g.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&t.preventDefault();var u=this._keyHandlers[t.keyCode],E=arguments;u&&!t.altKey&&y.some(u,function(G){if(!(G.shift^t.shiftKey||G.ctrl^(t.ctrlKey||t.metaKey)))return G.handler.apply(this,E)||t.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(t){h.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",t)},_setValueAttr:function(t){this.setValue(t)},_setDisableSpellCheckAttr:function(t){this.document?f.set(this.document.body,"spellcheck",!t):this.onLoadDeferred.then(e.hitch(this,function(){f.set(this.document.body,"spellcheck",!t)}));this._set("disableSpellCheck",t)},addKeyHandler:function(t,u,E,G){"string"==
typeof t&&(t=t.toUpperCase().charCodeAt(0));e.isArray(this._keyHandlers[t])||(this._keyHandlers[t]=[]);this._keyHandlers[t].push({shift:E||!1,ctrl:u||!1,handler:G})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(t){this.onDisplayChanged(t)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(t){(r("ie")||r("trident"))&&this.defer(function(){L.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var u=this.getValue(!0);if(u!==this.value)this.onChange(u);
this._set("value",u)},_onFocus:function(t){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!r("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>r("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(t,u){t=t.toLowerCase();"formatblock"===t?r("safari")&&void 0===u&&(t="heading"):"hilitecolor"!==t||r("mozilla")||(t="backcolor");return t},_implCommand:function(t){return"_"+this._normalizeCommand(t)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(t){var u=this._qcaCache[t];return void 0!==u?u:this._qcaCache[t]=this._queryCommandAvailable(t)},_queryCommandAvailable:function(t){switch(t.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return r("ie")||r("trident")||r("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!r("webkit");default:return!1}},execCommand:function(t,u){this.focused&&this.focus();t=this._normalizeCommand(t,u);if(void 0!==u){if("heading"===t)throw Error("unimplemented");"formatblock"===
t&&(r("ie")||r("trident"))&&(u="\x3c"+u+"\x3e")}var E="_"+t+"Impl";if(this[E])var G=this[E](u);else if((u=1<arguments.length?u:null)||"createlink"!==t)G=this.document.execCommand(t,!1,u);this.onDisplayChanged();return G},queryCommandEnabled:function(t){if(this.disabled||!this._disabledOK)return!1;t=this._normalizeCommand(t);var u=this._implCommand(t);return this[u]?this[u](t):this._browserQueryCommandEnabled(t)},queryCommandState:function(t){if(this.disabled||!this._disabledOK)return!1;t=this._normalizeCommand(t);
try{return this.document.queryCommandState(t)}catch(u){return!1}},queryCommandValue:function(t){if(this.disabled||!this._disabledOK)return!1;t=this._normalizeCommand(t);if(r("ie")&&"formatblock"===t)t=this._native2LocalFormatNames[this.document.queryCommandValue(t)];else if(r("mozilla")&&"hilitecolor"===t){try{var u=this.document.queryCommandValue("styleWithCSS")}catch(E){u=!1}this.document.execCommand("styleWithCSS",!1,!0);t=this.document.queryCommandValue(t);this.document.execCommand("styleWithCSS",
!1,u)}else t=this.document.queryCommandValue(t);return t},_sCall:function(t,u){return this.selection[t].apply(this.selection,u)},placeCursorAtStart:function(){this.focus();var t=!1;if(r("mozilla"))for(var u=this.editNode.firstChild;u;){if(3===u.nodeType){if(0<u.nodeValue.replace(/^\s+|\s+$/g,"").length){t=!0;this.selection.selectElement(u);break}}else if(1===u.nodeType){t=!0;var E=u.tagName?u.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(E)?this.selection.selectElement(u):
this.selection.selectElementChildren(u);break}u=u.nextSibling}else t=!0,this.selection.selectElementChildren(this.editNode);t&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var t=!1;if(r("mozilla"))for(var u=this.editNode.lastChild;u;){if(3===u.nodeType){if(0<u.nodeValue.replace(/^\s+|\s+$/g,"").length){t=!0;this.selection.selectElement(u);break}}else if(1===u.nodeType){t=!0;this.selection.selectElement(u.lastChild||u);break}u=u.previousSibling}else t=!0,this.selection.selectElementChildren(this.editNode);
t&&this.selection.collapse(!1)},getValue:function(t){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,t):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(t){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){t=this._preFilterContent(t);var u=this.isClosed?this.domNode:this.editNode;u.innerHTML=t;this._preDomFilterContent(u)}else this.textarea.value=t;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(e.hitch(this,function(){this.setValue(t)}))},replaceValue:function(t){this.isClosed?this.setValue(t):this.window&&this.window.getSelection&&!r("mozilla")?this.setValue(t):this.window&&this.window.getSelection?(t=this._preFilterContent(t),this.execCommand("selectall"),this.execCommand("inserthtml",t),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(t);this._set("value",this.getValue(!0))},_preFilterContent:function(t){var u=
t;y.forEach(this.contentPreFilters,function(E){E&&(u=E(u))});return u},_preDomFilterContent:function(t){t=t||this.editNode;y.forEach(this.contentDomPreFilters,function(u){u&&e.isFunction(u)&&u(t)},this)},_postFilterContent:function(t,u){if(e.isString(t))var E=t;else t=t||this.editNode,this.contentDomPostFilters.length&&(u&&(t=e.clone(t)),y.forEach(this.contentDomPostFilters,function(G){t=G(t)})),E=C.getChildrenHtml(t);e.trim(E.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(E="");y.forEach(this.contentPostFilters,
function(G){E=G(E)});return E},_saveContent:function(){var t=w.byId(F._scopeName+"._editor.RichText.value");t&&(t.value&&(t.value+=this._SEPARATOR),t.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(t,u){t=t.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");u||(t=t.replace(/'/gm,"\x26#39;"));return t},getNodeHtml:function(t){h.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return C.getNodeHtml(t)},getNodeChildrenHtml:function(t){h.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return C.getChildrenHtml(t)},close:function(t){if(!this.isClosed){arguments.length||(t=!0);t&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);r("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var u=this.textarea.style;u.position="";u.left=u.top="";r("ie")&&(u.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;c.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;d.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);K._globalSaveHandler&&delete K._globalSaveHandler[this.id]},_removeMozBogus:function(t){return t.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(t){t=t.replace(/\sclass="webkit-block-placeholder"/gi,"");t=t.replace(/\sclass="apple-style-span"/gi,
"");return t=t.replace(/<meta charset="utf-8" \/>/gi,"")},_normalizeFontStyle:function(t){return t.replace(/<(\/)?strong([ >])/gi,"\x3c$1b$2").replace(/<(\/)?em([ >])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(t){return t.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(t){if(!t)return!1;
var u=9>r("ie")?this.document.selection.createRange():this.document;try{return u.queryCommandEnabled(t)}catch(E){return!1}},_createlinkEnabledImpl:function(){var t=!0;return t=r("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var t=!0;return t=r("mozilla")||r("webkit")?this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var t=
!0;return t=r("mozilla")||r("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var t=!0;r("webkit")?((t=this.window.getSelection())&&(t=t.toString()),t=!!t):t=this._browserQueryCommandEnabled("cut");return t},_copyEnabledImpl:function(){var t=!0;r("webkit")?((t=this.window.getSelection())&&(t=t.toString()),t=!!t):t=this._browserQueryCommandEnabled("copy");return t},_pasteEnabledImpl:function(){var t=!0;return r("webkit")?!0:t=this._browserQueryCommandEnabled("paste")},
_inserthorizontalruleImpl:function(t){return r("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,t)},_unlinkImpl:function(t){return this.queryCommandEnabled("unlink")&&(r("mozilla")||r("webkit"))?(t=this.selection.getAncestorElement("a"),this.selection.selectElement(t),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",!1,t)},_hilitecolorImpl:function(t){if(!this._handleTextColorOrProperties("hilitecolor",t))if(r("mozilla")){this.document.execCommand("styleWithCSS",
!1,!0);console.log("Executing color command.");var u=this.document.execCommand("hilitecolor",!1,t);this.document.execCommand("styleWithCSS",!1,!1)}else u=this.document.execCommand("hilitecolor",!1,t);return u},_backcolorImpl:function(t){r("ie")&&(t=t?t:null);var u=this._handleTextColorOrProperties("backcolor",t);u||(u=this.document.execCommand("backcolor",!1,t));return u},_forecolorImpl:function(t){r("ie")&&(t=t?t:null);var u=!1;(u=this._handleTextColorOrProperties("forecolor",t))||(u=this.document.execCommand("forecolor",
!1,t));return u},_inserthtmlImpl:function(t){t=this._preFilterContent(t);var u=!0;if(9>r("ie")){var E=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var G=E.item(0);E.length;)E.remove(E.item(0));G.outerHTML=t}else E.pasteHTML(t);E.select()}else if(8>r("trident")){var M=N.getSelection(this.window);if(M&&M.rangeCount&&M.getRangeAt){E=M.getRangeAt(0);E.deleteContents();var P=c.create("div");P.innerHTML=t;for(G=this.document.createDocumentFragment();t=
P.firstChild;)var Q=G.appendChild(t);E.insertNode(G);Q&&(E=E.cloneRange(),E.setStartAfter(Q),E.collapse(!1),M.removeAllRanges(),M.addRange(E))}}else r("mozilla")&&!t.length?this.selection.remove():u=this.document.execCommand("inserthtml",!1,t);return u},_boldImpl:function(t){var u=!1;if(r("ie")||r("trident"))this._adaptIESelection(),u=this._adaptIEFormatAreaAndExec("bold");u||(u=this.document.execCommand("bold",!1,t));return u},_italicImpl:function(t){var u=!1;if(r("ie")||r("trident"))this._adaptIESelection(),
u=this._adaptIEFormatAreaAndExec("italic");u||(u=this.document.execCommand("italic",!1,t));return u},_underlineImpl:function(t){var u=!1;if(r("ie")||r("trident"))this._adaptIESelection(),u=this._adaptIEFormatAreaAndExec("underline");u||(u=this.document.execCommand("underline",!1,t));return u},_strikethroughImpl:function(t){var u=!1;if(r("ie")||r("trident"))this._adaptIESelection(),u=this._adaptIEFormatAreaAndExec("strikethrough");u||(u=this.document.execCommand("strikethrough",!1,t));return u},_superscriptImpl:function(t){var u=
!1;if(r("ie")||r("trident"))this._adaptIESelection(),u=this._adaptIEFormatAreaAndExec("superscript");u||(u=this.document.execCommand("superscript",!1,t));return u},_subscriptImpl:function(t){var u=!1;if(r("ie")||r("trident"))this._adaptIESelection(),u=this._adaptIEFormatAreaAndExec("subscript");u||(u=this.document.execCommand("subscript",!1,t));return u},_fontnameImpl:function(t){if(r("ie")||r("trident"))var u=this._handleTextColorOrProperties("fontname",t);u||(u=this.document.execCommand("fontname",
!1,t));return u},_fontsizeImpl:function(t){if(r("ie")||r("trident"))var u=this._handleTextColorOrProperties("fontsize",t);u||(u=this.document.execCommand("fontsize",!1,t));return u},_insertorderedlistImpl:function(t){var u=!1;if(r("ie")||r("trident")||r("edge"))u=this._adaptIEList("insertorderedlist",t);u||(u=this.document.execCommand("insertorderedlist",!1,t));return u},_insertunorderedlistImpl:function(t){var u=!1;if(r("ie")||r("trident")||r("edge"))u=this._adaptIEList("insertunorderedlist",t);
u||(u=this.document.execCommand("insertunorderedlist",!1,t));return u},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(t){var u=0;if(t&&t.childNodes){var E;for(E=0;E<t.childNodes.length;E++){var G=a.position(t.childNodes[E]);u+=G.h}}return u},_isNodeEmpty:function(t,u){return 1===t.nodeType?0<t.childNodes.length?this._isNodeEmpty(t.childNodes[0],u):!0:3===t.nodeType?
""===t.nodeValue.substring(u):!1},_removeStartingRangeFromRange:function(t,u){if(t.nextSibling)u.setStart(t.nextSibling,0);else{for(t=t.parentNode;t&&null==t.nextSibling;)t=t.parentNode;t&&u.setStart(t.nextSibling,0)}return u},_adaptIESelection:function(){var t=N.getSelection(this.window);if(t&&t.rangeCount&&!t.isCollapsed){for(var u=t.getRangeAt(0),E=u.startContainer,G=u.startOffset;3===E.nodeType&&G>=E.length&&E.nextSibling;)G-=E.length,E=E.nextSibling;for(var M=null;this._isNodeEmpty(E,G)&&E!==
M;)M=E,u=this._removeStartingRangeFromRange(E,u),E=u.startContainer,G=0;t.removeAllRanges();t.addRange(u)}},_adaptIEFormatAreaAndExec:function(t){var u=N.getSelection(this.window),E=this.document,G;if(t&&u&&u.isCollapsed){if(this.queryCommandValue(t)){t=this._tagNamesForCommand(t);var M=u.getRangeAt(0);var P=M.startContainer;if(3===P.nodeType){var Q=M.endOffset;P.length<Q&&(Q=this._adjustNodeAndOffset(S,Q),P=Q.node,Q=Q.offset)}for(;P&&P!==this.editNode;){var S=P.tagName?P.tagName.toLowerCase():"";
if(-1<y.indexOf(t,S)){var I=P;break}P=P.parentNode}if(I&&(S=M.startContainer,t=E.createElement(I.tagName),c.place(t,I,"after"),S&&3===S.nodeType)){Q=M.endOffset;S.length<Q&&(Q=this._adjustNodeAndOffset(S,Q),S=Q.node,Q=Q.offset);P=S.nodeValue;M=E.createTextNode(P.substring(0,Q));var O=P.substring(Q,P.length);O&&(G=E.createTextNode(O));c.place(M,S,"before");if(G){var R=E.createElement("span");R.className="ieFormatBreakerSpan";c.place(R,S,"after");c.place(G,R,"after");G=R}c.destroy(S);Q=M.parentNode;
for(S=[];Q!==I;){P=Q.tagName;M={tagName:P};S.push(M);P=E.createElement(P);Q.style&&P.style&&Q.style.cssText&&(P.style.cssText=Q.style.cssText,M.cssText=Q.style.cssText);"FONT"===Q.tagName&&(Q.color&&(P.color=Q.color,M.color=Q.color),Q.face&&(P.face=Q.face,M.face=Q.face),Q.size&&(P.size=Q.size,M.size=Q.size));Q.className&&(P.className=Q.className,M.className=Q.className);if(G)for(;G;)M=G.nextSibling,P.appendChild(G),G=M;P.tagName==Q.tagName?(R=E.createElement("span"),R.className="ieFormatBreakerSpan",
c.place(R,Q,"after"),c.place(P,R,"after")):c.place(P,Q,"after");M=Q;G=P;Q=Q.parentNode}if(G){if(1===G.nodeType||3===G.nodeType&&G.nodeValue)t.innerHTML="";for(;G;)M=G.nextSibling,t.appendChild(G),G=M}if(S.length){M=S.pop();G=E.createElement(M.tagName);M.cssText&&G.style&&(G.style.cssText=M.cssText);M.className&&(G.className=M.className);"FONT"===M.tagName&&(M.color&&(G.color=M.color),M.face&&(G.face=M.face),M.size&&(G.size=M.size));for(c.place(G,t,"before");S.length;)M=S.pop(),I=E.createElement(M.tagName),
M.cssText&&I.style&&(I.style.cssText=M.cssText),M.className&&(I.className=M.className),"FONT"===M.tagName&&(M.color&&(I.color=M.color),M.face&&(I.face=M.face),M.size&&(I.size=M.size)),G.appendChild(I),G=I;I=E.createTextNode(".");R.appendChild(I);G.appendChild(I)}else R=E.createElement("span"),R.className="ieFormatBreakerSpan",I=E.createTextNode("."),R.appendChild(I),c.place(R,t,"before");G=N.create(this.window);G.setStart(I,0);G.setEnd(I,I.length);u.removeAllRanges();u.addRange(G);this.selection.collapse(!1);
I.parentNode.innerHTML="";t.firstChild||c.destroy(t);return!0}return!1}M=u.getRangeAt(0);if((S=M.startContainer)&&3===S.nodeType)return Q=M.startOffset,S.length<Q&&(Q=this._adjustNodeAndOffset(S,Q),S=Q.node,Q=Q.offset),P=S.nodeValue,M=E.createTextNode(P.substring(0,Q)),O=P.substring(Q),""!==O&&(G=E.createTextNode(P.substring(Q))),R=E.createElement("span"),I=E.createTextNode("."),R.appendChild(I),M.length?c.place(M,S,"after"):M=S,c.place(R,M,"after"),G&&c.place(G,R,"after"),c.destroy(S),G=N.create(this.window),
G.setStart(I,0),G.setEnd(I,I.length),u.removeAllRanges(),u.addRange(G),E.execCommand(t),c.place(R.firstChild,R,"before"),c.destroy(R),G.setStart(I,0),G.setEnd(I,I.length),u.removeAllRanges(),u.addRange(G),this.selection.collapse(!1),I.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(t){var u=N.getSelection(this.window);if(u.isCollapsed&&u.rangeCount&&!this.queryCommandValue(t)){var E=u.getRangeAt(0),G=E.startContainer;if(G&&3==G.nodeType&&!E.startOffset)return E="ul","insertorderedlist"===
t&&(E="ol"),t=this.document.createElement(E),E=c.create("li",null,t),c.place(t,G,"before"),E.appendChild(G),c.create("br",null,t,"after"),t=N.create(this.window),t.setStart(G,0),t.setEnd(G,G.length),u.removeAllRanges(),u.addRange(t),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(t,u){var E=N.getSelection(this.window),G=this.document,M,P;u=u||null;if(t&&E&&E.isCollapsed&&E.rangeCount){var Q=E.getRangeAt(0);if((M=Q.startContainer)&&3===M.nodeType){var S=Q.startOffset;
M.length<S&&(Q=this._adjustNodeAndOffset(M,S),M=Q.node,S=Q.offset);var I=M.nodeValue;Q=G.createTextNode(I.substring(0,S));""!==I.substring(S)&&(P=G.createTextNode(I.substring(S)));I=G.createElement("span");S=G.createTextNode(".");I.appendChild(S);G=G.createElement("span");I.appendChild(G);Q.length?c.place(Q,M,"after"):Q=M;c.place(I,Q,"after");P&&c.place(P,I,"after");c.destroy(M);M=N.create(this.window);M.setStart(S,0);M.setEnd(S,S.length);E.removeAllRanges();E.addRange(M);if(r("webkit")){E="color";
if("hilitecolor"===t||"backcolor"===t)E="backgroundColor";b.set(I,E,u);this.selection.remove();c.destroy(G);I.innerHTML="\x26#160;";this.selection.selectElement(I);this.focus()}else this.execCommand(t,u),c.place(I.firstChild,I,"before"),c.destroy(I),M.setStart(S,0),M.setEnd(S,S.length),E.removeAllRanges(),E.addRange(M),this.selection.collapse(!1),S.parentNode.removeChild(S);return!0}}return!1},_adjustNodeAndOffset:function(t,u){for(;t.length<u&&t.nextSibling&&3===t.nextSibling.nodeType;)u-=t.length,
t=t.nextSibling;return{node:t,offset:u}},_tagNamesForCommand:function(t){return"bold"===t?["b","strong"]:"italic"===t?["i","em"]:"strikethrough"===t?["s","strike"]:"superscript"===t?["sup"]:"subscript"===t?["sub"]:"underline"===t?["u"]:[]},_stripBreakerNodes:function(t){if(this.isLoaded)return n(".ieFormatBreakerSpan",t).forEach(function(u){for(;u.firstChild;)c.place(u.firstChild,u,"before");c.destroy(u)}),t},_stripTrailingEmptyNodes:function(t){function u(E){return/^(p|div|br)$/i.test(E.nodeName)&&
0==E.children.length&&/^[\s\xA0]*$/.test(E.textContent||E.innerText||"")||3===E.nodeType&&/^[\s\xA0]*$/.test(E.nodeValue)}for(;t.lastChild&&u(t.lastChild);)c.destroy(t.lastChild);return t},_setTextDirAttr:function(t){this._set("textDir",t);this.onLoadDeferred.then(e.hitch(this,function(){this.editNode.dir=t}))}});return K})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(y,D,x){var A={};D.setObject("dijit._editor.html",A);var w=A.escapeXml=function(f,
d){f=f.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");d||(f=f.replace(/'/gm,"\x26#39;"));return f};A.getNodeHtml=function(f){var d=[];A.getNodeHtmlHelper(f,d);return d.join("")};A.getNodeHtmlHelper=function(f,d){switch(f.nodeType){case 1:var c=f.nodeName.toLowerCase();if(!c||"/"==c.charAt(0))return"";d.push("\x3c",c);var a=[],b={},h;if(x("dom-attributes-explicit")||x("dom-attributes-specified-flag"))for(var g=0;h=f.attributes[g++];){var e=h.name;
"_dj"===e.substr(0,3)||x("dom-attributes-specified-flag")&&!h.specified||e in b||(h=h.value,("src"==e||"href"==e)&&f.getAttribute("_djrealurl")&&(h=f.getAttribute("_djrealurl")),8===x("ie")&&"style"===e&&(h=h.replace("HEIGHT:","height:").replace("WIDTH:","width:")),a.push([e,h]),b[e]=h)}else{var m=(/^input$|^img$/i.test(f.nodeName)?f:f.cloneNode(!1)).outerHTML;b=m.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);m=m.substr(0,m.indexOf("\x3e"));y.forEach(b,function(n){if(n){var l=n.indexOf("\x3d");if(0<l&&
(n=n.substring(0,l),"_dj"!=n.substr(0,3)))if("src"!=n&&"href"!=n||!f.getAttribute("_djrealurl")){switch(n){case "style":var r=f.style.cssText.toLowerCase();break;case "class":r=f.className;break;case "width":if("img"===c){(l=/width=(\S+)/i.exec(m))&&(r=l[1]);break}case "height":if("img"===c){(l=/height=(\S+)/i.exec(m))&&(r=l[1]);break}default:r=f.getAttribute(n)}null!=r&&a.push([n,r.toString()])}else a.push([n,f.getAttribute("_djrealurl")])}},this)}a.sort(function(n,l){return n[0]<l[0]?-1:n[0]==l[0]?
0:1});for(b=0;h=a[b++];)d.push(" ",h[0],'\x3d"',"string"===typeof h[1]?w(h[1],!0):h[1],'"');switch(c){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":d.push(" /\x3e");break;case "script":d.push("\x3e",f.innerHTML,"\x3c/",c,"\x3e");break;default:d.push("\x3e"),f.hasChildNodes()&&A.getChildrenHtmlHelper(f,d),d.push("\x3c/",c,"\x3e")}break;case 4:case 3:d.push(w(f.nodeValue,!0));break;case 8:d.push("\x3c!--",w(f.nodeValue,!0),"--\x3e");break;default:d.push("\x3c!-- Element not recognized - Type: ",
f.nodeType," Name: ",f.nodeName,"--\x3e")}};A.getChildrenHtml=function(f){var d=[];A.getChildrenHtmlHelper(f,d);return d.join("")};A.getChildrenHtmlHelper=function(f,d){if(f)for(var c=f.childNodes||f,a=!x("ie")||c!==f,b,h=0;b=c[h++];)a&&b.parentNode!=f||A.getNodeHtmlHelper(b,d)};return A})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(y,D,x,A,w){var f=y.getObject("dojox.html.format",!0);f.prettyPrint=function(d,
c,a,b,h){var g=[],e=0,m=[],n="\t",l="",r=[],p,v=/[=]([^"']+?)(\s|>)/g,q=/style=("[^"]*"|'[^']*'|\S*)/gi,k=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(c&&0<c&&10>c)for(n="",p=0;p<c;p++)n+=" ";c=A.doc.createElement("div");c.innerHTML=d;var z=D.encode,B=D.decode,H=c.ownerDocument.createElement("div"),J=function(t){t=t.cloneNode(!1);H.appendChild(t);t=H.innerHTML;H.innerHTML="";return t},N=function(){var t;for(t=0;t<e;t++)g.push(n)},C=function(){g.push("\n")},L=function(t){var u;t=t.split("\n");for(u=0;u<t.length;u++)t[u]=
y.trim(t[u]);t=t.join(" ");t=y.trim(t);if(""!==t){var E=[];if(a&&0<a){var G="";for(u=0;u<e;u++)G+=n;u=G.length;G=a;for(a>u&&(G-=u);t;)if(t.length>a){for(u=G;0<u&&" "!==t.charAt(u);u--);if(!u)for(u=G;u<t.length&&" "!==t.charAt(u);u++);var M=t.substring(0,u);M=y.trim(M);t=y.trim(t.substring(u==t.length?t.length:u+1,t.length));if(M){var P="";for(u=0;u<e;u++)P+=n;M=P+M+"\n"}E.push(M)}else{P="";for(u=0;u<e;u++)P+=n;t=P+t+"\n";E.push(t);t=null}return E.join("")}P="";for(u=0;u<e;u++)P+=n;return t=P+t+"\n"}return""},
F=function(t){var u=t.nodeName.toLowerCase(),E=y.trim(J(t));t=E.substring(0,E.indexOf("\x3e")+1);t=t.replace(v,'\x3d"$1"$2');t=t.replace(q,function(M){var P=M.substring(0,6);M=M.substring(6,M.length);var Q=M.charAt(0);M=y.trim(M.substring(1,M.length-1));M=M.split(";");var S=[];x.forEach(M,function(O){if(O=y.trim(O))O=O.substring(0,O.indexOf(":")).toLowerCase()+O.substring(O.indexOf(":"),O.length),S.push(O)});S=S.sort();M=S.join("; ");var I=y.trim(M);return I&&";"!==I?P+Q+(M+";")+Q:""});var G=[];t=
t.replace(k,function(M){G.push(y.trim(M));return""});G=G.sort();t="\x3c"+u;G.length&&(t+=" "+G.join(" "));-1!=E.indexOf("\x3c/")?(m.push(u),t+="\x3e"):(t=h?t+" /\x3e":t+"\x3e",m.push(!1));a:switch(u){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":u=!0;break a;default:u=!1}r.push(u);l&&!u&&(g.push(L(l)),l="");u?l+=t:(N(),g.push(t),C(),e++)},K=function(t){var u=t.childNodes;
if(u){var E;for(E=0;E<u.length;E++){var G=u[E];if(1===G.nodeType){var M=y.trim(G.tagName.toLowerCase());if(!w("ie")||G.parentNode==t)if(!M||"/"!==M.charAt(0)){F(G);if("script"===M){M=g;var P=M.push,Q=void 0,S=Q=void 0,I=void 0;if(I=G.innerHTML){I&&(I=I.replace(/&quot;/gi,'"'),I=I.replace(/&gt;/gi,"\x3e"),I=I.replace(/&lt;/gi,"\x3c"),I=I.replace(/&amp;/gi,"\x26"));G=0;var O=I.split("\n"),R=[];for(I=0;I<O.length;I++){var T=O[I],W=-1<T.indexOf("\n");if(T=y.trim(T)){W=G;for(Q=0;Q<T.length;Q++)S=T.charAt(Q),
"{"===S?G++:"}"===S&&(G--,W=G);Q="";for(S=0;S<e+W;S++)Q+=n;R.push(Q+T+"\n")}else W&&0===I&&R.push("\n")}I=R.join("")}P.call(M,I)}else"pre"===M?(M=G.innerHTML,w("mozilla")&&(M=M.replace("\x3cbr\x3e","\n"),M=M.replace("\x3cpre\x3e",""),M=M.replace("\x3c/pre\x3e","")),"\n"!==M.charAt(M.length-1)&&(M+="\n"),g.push(M)):K(G);M=r.pop();l&&!M&&(g.push(L(l)),l="");(P=m.pop())?(P="\x3c/"+P+"\x3e",M?l+=P:(e--,N(),g.push(P),C())):e--}}else 3===G.nodeType||4===G.nodeType?l+=z(G.nodeValue,b):8===G.nodeType&&(M=
B(G.nodeValue,b),N(),g.push("\x3c!--"),C(),e++,g.push(L(M)),e--,N(),g.push("--\x3e"),C())}}};K(c);l&&(g.push(L(l)),l="");return g.join("")};return f})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(y,D,x,A){var w=y.declare("dojox.editor.plugins.InsertAnchor",A,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var f=this,d=y.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),c=this.dropDown=new D.TooltipDialog({title:d.title,execute:y.hitch(this,"setValue"),onOpen:function(){f._onOpenDialog();D.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(y.hitch(f,"_onCloseDialog"),0)}});this.button=new D.form.DropDownButton({label:d.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});d.id=D.getUniqueId(this.editor.id);this._uniqueId=d.id;this.dropDown.set("content",c.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+y.string.substitute(this._template,d));c.startup();this._anchorInput=D.byId(this._uniqueId+"_anchorInput");this._textInput=D.byId(this._uniqueId+"_textInput");this._setButton=D.byId(this._uniqueId+"_setButton");this.connect(D.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(y.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(y.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(f){this.editor=f;this._initButton()},_checkInput:function(){var f=!0;this._anchorInput.isValid()&&
(f=!1);this._setButton.set("disabled",f)},_setup:function(){this.editor.onLoadDeferred.addCallback(y.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(y.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var f=y.moduleUrl(x._scopeName,"editor/plugins/resources").toString();if(!f.match(/^https?:\/\//i)&&!f.match(/^file:\/\//i)){var d="/"===f.charAt(0)?y.doc.location.protocol+"//"+y.doc.location.host:this._calcBaseUrl(y.global.location.href);
"/"!==d[d.length-1]&&"/"!==f.charAt(0)&&(d+="/");f=d+f}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,f)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var f=this.editor.document,d=this.getAnchorStyle();if(y.isIE)f.createStyleSheet("").cssText=
d;else{var c=f.createElement("style");c.appendChild(f.createTextNode(d));f.getElementsByTagName("head")[0].appendChild(c)}}catch(a){}},_calcBaseUrl:function(f){var d=null;null!==f&&(d=f.indexOf("?"),-1!=d&&(f=f.substring(0,d)),d=f.lastIndexOf("/"),d=0<d&&d<f.length?f.substring(0,d):f);return d},_checkValues:function(f){f&&(f.anchorInput&&(f.anchorInput=f.anchorInput.replace(/"/g,"\x26quot;")),f.textInput||(f.textInput="\x26nbsp;"));return f},setValue:function(f){this._onCloseDialog();if(!this.editor.window.getSelection){var d=
D.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===d.nodeType&&(d=d.parentNode);d&&d.nodeName&&"a"!==d.nodeName.toLowerCase()&&(d=this.editor._sCall("getSelectedElement",["a"]));d&&d.nodeName&&"a"===d.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[d]),this.editor.execCommand("unlink"))}f=this._checkValues(f);this.editor.execCommand("inserthtml",y.string.substitute(this.htmlTemplate,f))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(f){if(f&&"a"===f.tagName.toLowerCase()&&y.attr(f,"name")){var d=y.attr(f,"name");var c=f.textContent||f.innerText;this.editor._sCall("selectElement",[f,!0])}else c=this.editor._sCall("getSelectedText");return{anchorInput:d||"",textInput:c||""}},_onOpenDialog:function(){if(this.editor.window.getSelection)var f=this.editor._sCall("getAncestorElement",["a"]);else f=D.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===f.nodeType&&(f=f.parentNode),f&&f.nodeName&&
"a"!==f.nodeName.toLowerCase()&&(f=this.editor._sCall("getSelectedElement",["a"]));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(f))},_onDblClick:function(f){f&&f.target&&(f=f.target,"a"===(f.tagName?f.tagName.toLowerCase():"")&&y.attr(f,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[f]),setTimeout(y.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(f){y.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(f){f&&y.query("a[name]:not([href])",f).removeClass("dijitEditorPluginInsertAnchorStyle");return f}});y.subscribe(D._scopeName+".Editor.getPlugin",null,function(f){if(!f.plugin){var d=f.args.name;d&&(d=d.toLowerCase());"insertanchor"===d&&(f.plugin=new w)}});return w})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(y,D,x,A){var w=y.declare("dojox.editor.plugins.Blockquote",A,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=y.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new D.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:y.hitch(this,"_toggleQuote")})},setEditor:function(f){this.editor=f;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");f.customUndo=!0},_toggleQuote:function(f){try{var d=this.editor;d.focus();var c=this.button.get("checked"),a=D.range.getSelection(d.window),b,h,g,e;a&&0<a.rangeCount&&(b=a.getRangeAt(0));if(b){d.beginEditing();if(c)if(b.startContainer===b.endContainer){if(this._isRootInline(b.startContainer)){for(g=b.startContainer;g&&g.parentNode!==d.editNode;)g=g.parentNode;for(;g&&g.previousSibling&&(this._isTextElement(g)||1===g.nodeType&&this._isInlineFormat(this._getTagName(g)));)g=
g.previousSibling;g&&1===g.nodeType&&!this._isInlineFormat(this._getTagName(g))&&(g=g.nextSibling);if(g){var m=d.document.createElement("blockquote");y.place(m,g,"after");m.appendChild(g);for(e=m.nextSibling;e&&(this._isTextElement(e)||1===e.nodeType&&this._isInlineFormat(this._getTagName(e)));)m.appendChild(e),e=m.nextSibling}}else{for(var n=b.startContainer;(this._isTextElement(n)||this._isInlineFormat(this._getTagName(n))||"li"===this._getTagName(n))&&n!==d.editNode&&n!==d.document.body;)n=n.parentNode;
n!==d.editNode&&n!==n.ownerDocument.documentElement&&(m=d.document.createElement("blockquote"),y.place(m,n,"after"),m.appendChild(n))}m&&(d._sCall("selectElementChildren",[m]),d._sCall("collapse",[!0]))}else{var l;g=b.startContainer;for(e=b.endContainer;g&&this._isTextElement(g)&&g.parentNode!==d.editNode;)g=g.parentNode;for(l=g;l.nextSibling&&d._sCall("inSelection",[l]);)l=l.nextSibling;e=l;if(e===d.editNode||e===d.document.body){m=d.document.createElement("blockquote");y.place(m,g,"after");var r=
this._getTagName(g);if(this._isTextElement(g)||this._isInlineFormat(r))for(d=g;d&&(this._isTextElement(d)||1===d.nodeType&&this._isInlineFormat(this._getTagName(d)));)m.appendChild(d),d=m.nextSibling;else m.appendChild(g);return}e=e.nextSibling;for(l=g;l&&l!==e;){if(1===l.nodeType){if(r=this._getTagName(l),"br"!==r){if(!window.getSelection&&"p"===r&&this._isEmpty(l)){l=l.nextSibling;continue}this._isInlineFormat(r)?m||(m=d.document.createElement("blockquote"),y.place(m,l,"after")):(m&&this._isEmpty(m)&&
m.parentNode.removeChild(m),m=d.document.createElement("blockquote"),y.place(m,l,"after"));m.appendChild(l);l=m}}else this._isTextElement(l)&&(m||(m=d.document.createElement("blockquote"),y.place(m,l,"after")),m.appendChild(l),l=m);l=l.nextSibling}m&&(this._isEmpty(m)?m.parentNode.removeChild(m):(d._sCall("selectElementChildren",[m]),d._sCall("collapse",[!0])),m=null)}else if(m=!1,b.startContainer===b.endContainer){for(h=b.endContainer;h&&h!==d.editNode&&h!==d.document.body;){if("blockquote"===(h.tagName?
h.tagName.toLowerCase():"")){m=!0;break}h=h.parentNode}if(m){for(var p;h.firstChild;)p=h.firstChild,y.place(p,h,"before");h.parentNode.removeChild(h);p&&(d._sCall("selectElementChildren",[p]),d._sCall("collapse",[!0]))}}else{g=b.startContainer;for(e=b.endContainer;g&&this._isTextElement(g)&&g.parentNode!==d.editNode;)g=g.parentNode;for(b=[];g&&g.nextSibling&&d._sCall("inSelection",[g]);)g.parentNode&&"blockquote"===this._getTagName(g.parentNode)&&(g=g.parentNode),b.push(g),g=g.nextSibling;for(var v=
this._findBlockQuotes(b);v.length;){var q=v.pop();if(q.parentNode){for(;q.firstChild;)y.place(q.firstChild,q,"before");q.parentNode.removeChild(q)}}}d.endEditing()}d.onNormalizedDisplayChanged()}catch(k){}},updateState:function(){var f=this.editor,d=this.get("disabled");if(f&&f.isLoaded&&this.button&&(this.button.set("disabled",d),!d)){d=!1;var c=D.range.getSelection(f.window);if(c&&0<c.rangeCount&&(c=c.getRangeAt(0)))var a=c.endContainer;for(;a&&a!==f.editNode&&a!==f.document;){if("blockquote"===
(a.tagName?a.tagName.toLowerCase():"")){d=!0;break}a=a.parentNode}this.button.set("checked",d)}},_findBlockQuotes:function(f){var d=[];if(f){var c;for(c=0;c<f.length;c++){var a=f[c];1===a.nodeType&&("blockquote"===this._getTagName(a)&&d.push(a),a.childNodes&&0<a.childNodes.length&&(d=d.concat(this._findBlockQuotes(a.childNodes))))}}return d},_getTagName:function(f){var d="";f&&1===f.nodeType&&(d=f.tagName?f.tagName.toLowerCase():"");return d},_isRootInline:function(f){var d=this.editor;if(this._isTextElement(f)&&
f.parentNode===d.editNode||1===f.nodeType&&this._isInlineFormat(f)&&f.parentNode===d.editNode)return!0;if(this._isTextElement(f)&&this._isInlineFormat(this._getTagName(f.parentNode))){for(f=f.parentNode;f&&f!==d.editNode&&this._isInlineFormat(this._getTagName(f));)f=f.parentNode;if(f===d.editNode)return!0}return!1},_isTextElement:function(f){return f&&3===f.nodeType||4===f.nodeType?!0:!1},_isEmpty:function(f){if(f.childNodes){var d=!0,c;for(c=0;c<f.childNodes.length;c++){var a=f.childNodes[c];if(1===
a.nodeType){if("p"!==this._getTagName(a)||y.trim(a.innerHTML)){d=!1;break}}else if(this._isTextElement(a)){if((a=y.trim(a.nodeValue))&&"\x26nbsp;"!==a&&"\u00a0"!==a){d=!1;break}}else{d=!1;break}}return d}return!0},_isInlineFormat:function(f){switch(f){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});y.subscribe(D._scopeName+".Editor.getPlugin",
null,function(f){f.plugin||"blockquote"!==f.args.name.toLowerCase()||(f.plugin=new w({}))});return w})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(y,D,x,A){y.experimental("dojox.editor.plugins.UploadImage");var w=y.declare("dojox.editor.plugins.UploadImage",A,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,
label:"Upload",setToolbar:function(f){this.button.destroy();this.createFileInput();f.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var f=y.create("span",{innerHTML:"."},document.body);y.style(f,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=
new x.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},f);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(f,d,c){f=f[0];d=y.byId(this.currentImageId,this.editor.document);c=this.downloadPath?this.downloadPath+f.name:f.file;
d.src=c;y.attr(d,"_djrealurl",c);f.width&&(d.width=f.width,d.height=f.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});y.subscribe(D._scopeName+".Editor.getPlugin",null,function(f){if(!f.plugin)switch(f.args.name){case "uploadImage":f.plugin=new w({url:f.args.url})}});return w})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v,q,k,z,B,H,J,N){y.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return D("dojox.form.FileUploader",[k,z,B],{swfPath:l.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(H.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();if("flash"==this.uploaderType)var C="createFlashUploader";else this.uploaderType="html",C="createHtmlUploader";this[C]();this.fileListId&&this.connect(a.byId(this.fileListId),"click",function(L){L=L.target.parentNode.parentNode.parentNode;L.id&&-1<L.id.indexOf("file_")&&
this.removeFile(L.id.split("file_")[1])});q.addOnUnload(this,this.destroy)},getHiddenNode:function(C){if(!C)return null;var L=null;for(C=C.parentNode;C&&"body"!=C.tagName.toLowerCase();){if("none"==b.get(C,"display")){L=C;break}C=C.parentNode}return L},getButtonStyle:function(){var C=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(C))&&b.set(this._hiddenNode,"display","block");if(!C&&this.button&&this.button.domNode){var L=!0;C=this.button.domNode.className+" dijitButtonNode";var F=this.getText(c(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=C=m.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+C+'"\x3e'+F+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(C=this.button);g.get(C,"class")&&(this.baseClass+=" "+g.get(C,"class"));g.set(C,"class",this.baseClass);this.norm=this.getStyle(C);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(C,this.baseClass+" "+this.hoverClass,L),this.down=this.getTempNodeStyle(C,this.baseClass+" "+this.activeClass,L),this.dsbl=this.getTempNodeStyle(C,this.baseClass+" "+this.disabledClass,L),this.fhtml={cn:this.getText(C),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(C),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){b.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&b.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
b.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),b.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):m.destroy(this.progNode);
b.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});e.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&e.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(L){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);f.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var C=w.connect(this,"onReady",this,function(){w.disconnect(C);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&b.set(this._hiddenNode,"display","none")},onChange:function(C){},onProgress:function(C){},onComplete:function(C){},onCancel:function(){},onError:function(C){},onReady:function(C){},onLoad:function(C){},submit:function(C){C=C?n.toObject(C):null;this.upload(C);return!1},upload:function(C){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var L=r.byId(this.progressWidgetId).domNode;"none"==b.get(L,"display")&&(this.restoreProgDisplay="none",b.set(L,"display","block"));"hidden"==b.get(L,"visibility")&&(this.restoreProgDisplay="hidden",b.set(L,"visibility","visible"))}C&&!C.target&&(this.postData=C);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(C=0;C<this.fileList.length;C++)L=
this.fileList[C],L.bytesLoaded=0,L.bytesTotal=L.size||1E5,L.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(C,L){var F;for(F=0;F<this.fileList.length;F++)if(this.fileList[F].name==C){L||this.fileList.splice(F,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(C):L||(m.destroy(this.fileInputs[F]),this.fileInputs.splice(F,1),this._renumberInputs());this.fileListId&&m.destroy("file_"+C)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(A.forEach(this._subs,w.unsubscribe,dojo),A.forEach(this._cons,w.disconnect,dojo),this.scrollConnect&&w.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(m.destroy(this._fileInput),m.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(w.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(C){!0===C?("flash"==this.uploaderType?b.set(this.insideNode,"top","-2500px"):b.set(this.insideNode,"display",
"none"),b.set(this.progNode,"display","")):!1===C?(b.set(this.insideNode,{display:"",top:"0"}),b.set(this.progNode,"display","none")):b.set(this.progNode,"width",C*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var C=!1,L=w.connect(this,"_complete",function(){w.disconnect(L);C=!0}),F=0,K=setInterval(x.hitch(this,function(){F+=5;F>this.fhtml.nr.w&&(F=0,C=!0);this._displayProgress(F/this.fhtml.nr.w);C&&(clearInterval(K),setTimeout(x.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(C){"string"==typeof C&&(C=Error(C));this.onError(C)},_addToFileList:function(){if(this.fileListId){var C="";A.forEach(this.fileList,function(L){C+='\x3ctable id\x3d"file_'+L.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+L.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(L.size?Math.ceil(.001*L.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);a.byId(this.fileListId).innerHTML=
C}},_change:function(C){d("ie")&&A.forEach(C,function(L){L.name=L.name.split("\\")[L.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(C):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=C);this._addToFileList();this.onChange(C);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(C){C=
x.isArray(C)?C:[C];A.forEach(C,function(L){L.ERROR&&this._error(L.ERROR)},this);A.forEach(this.fileList,function(L){L.bytesLoaded=1;L.bytesTotal=1;L.percent=100;this._progress(L)},this);A.forEach(this.fileList,function(L){this.removeFile(L.name,!0)},this);this.onComplete(C);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(x.hitch(this,function(){b.set(r.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(C){for(var L=0,F=0,K=0;K<this.fileList.length;K++){var t=this.fileList[K];t.name==C.name&&(t.bytesLoaded=C.bytesLoaded,t.bytesTotal=C.bytesTotal,t.percent=Math.ceil(t.bytesLoaded/t.bytesTotal*100),this.log(t.name,"percent:",t.percent));F+=Math.ceil(.001*t.bytesLoaded);L+=Math.ceil(.001*t.bytesTotal)}C=Math.ceil(F/L*100);this.progressWidgetId&&r.byId(this.progressWidgetId).update({progress:C+"%"});this.showProgress&&this._displayProgress(.01*C);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(C){if(this._disabled!=C){if("flash"==this.uploaderType){if(!this.flashReady){var L=w.connect(this,"onLoad",this,function(){w.disconnect(L);this._setDisabledAttr(C)});return}this._disabled=C;this.flashMovie.doDisable(C)}else this._disabled=C,b.set(this._fileInput,"display",this._disabled?"none":"");e.toggle(this.domNode,this.disabledClass,C)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var C=
c("[tabIndex]"),L=0;L<C.length;L++)if(C[L].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=C[L];break}this.nextFocusObject.focus()},_disconnect:function(){A.forEach(this._cons,w.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&m.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();p.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:x.hitch(this,function(C){this._error("HTML Upload Error:"+C.message)}),load:x.hitch(this,
function(C,L,F){this._complete(C)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();b.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(w.connect(this._fileInput,"mouseover",this,function(C){e.add(this.domNode,this.hoverClass);this.onMouseOver(C)}));this._cons.push(w.connect(this._fileInput,"mouseout",this,function(C){setTimeout(x.hitch(this,
function(){e.remove(this.domNode,this.activeClass);e.remove(this.domNode,this.hoverClass);this.onMouseOut(C);this._checkHtmlCancel("off")}),0)}));this._cons.push(w.connect(this._fileInput,"mousedown",this,function(C){e.add(this.domNode,this.activeClass);e.remove(this.domNode,this.hoverClass);this.onMouseDown(C)}));this._cons.push(w.connect(this._fileInput,"mouseup",this,function(C){e.remove(this.domNode,this.activeClass);this.onMouseUp(C);this.onClick(C);this._checkHtmlCancel("up")}));this._cons.push(w.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var C=this._fileInput.value;C?this._change([{name:C,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&g.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(C){"change"==C&&(this.dialogIsOpen=!1);"up"==C&&(this.dialogIsOpen=!0);if("off"==C){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var C=this.fhtml.nr;b.set(this.insideNode,{width:C.w+"px",height:"middle"==C.va?C.h+"px":"auto",
textAlign:C.ta,paddingTop:C.p[0]+"px",paddingRight:C.p[1]+"px",paddingBottom:C.p[2]+"px",paddingLeft:C.p[3]+"px"});try{b.set(this.insideNode,"lineHeight","inherit")}catch(L){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],c("*",this._formNode).forEach(function(C){m.destroy(C)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>d("ie")||d("ie")&&d("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=r.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=m.create("form",{enctype:"multipart/form-data",method:"post",id:r.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,b.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var C=
this.htmlFieldName;this.selectMultipleFiles&&(C+=this.fileCount,this.fileCount++);g.set(this._fileInput,{id:this.id,name:C,type:"file"});e.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);C=h.getMarginBox(this._fileInput);b.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-C.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var C;this.fileCount=0;A.forEach(this.fileInputs,function(L){C=this.htmlFieldName+this.fileCount;this.fileCount++;
g.set(L,"name",C)},this)}},_setFormStyle:function(){N.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");b.set(this.domNode,{overflow:"hidden",position:"relative"});b.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var C in this.postData)m.create("input",{type:"hidden",name:C,value:this.postData[C]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var C=w.connect(this,"_complete",this,function(){w.disconnect(C);this._displayProgress(!1)})}var L={},F;for(F in this.postData)L[F]=this.postData[F];this.flashMovie.doUpload(L)}catch(K){this._error("FileUploader - Sorry, the SWF failed to initialize."+K)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var C=window.location.href.split("/");C.pop();C=C.join("/")+"/";this.uploadUrl=C+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",C," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");C={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:J.serialize("fh",this.fhtml),fileMask:J.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new H(C,this.insideNode);this.flashObject.onError=x.hitch(function(L){this._error("Flash Error: "+L)});this.flashObject.onReady=x.hitch(this,function(){b.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=x.hitch(this,function(L){this.flashMovie=L;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&g.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(C,L){this._subs.push(w.subscribe(this.id+C,this,L))},urlencode:function(C){return C&&"none"!=C?C.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(C){C=C.tagName.toLowerCase();
return"button"==C||"input"==C},getTextStyle:function(C){var L={};L.ff=b.get(C,"fontFamily");if(L.ff){L.ff=L.ff.replace(", ",",");L.ff=L.ff.replace(/"|'/g,"");L.ff="sans-serif"==L.ff?"Arial":L.ff;L.fw=b.get(C,"fontWeight");L.fi=b.get(C,"fontStyle");L.fs=parseInt(b.get(C,"fontSize"),10);if(-1<b.get(C,"fontSize").indexOf("%"))for(var F=C;F.tagName;){if(-1==b.get(F,"fontSize").indexOf("%")){L.fs=parseInt(b.get(F,"fontSize"),10);break}"body"==F.tagName.toLowerCase()&&(L.fs=.16*parseInt(b.get(F,"fontSize"),
10));F=F.parentNode}L.fc=(new v(b.get(C,"color"))).toHex();L.fc=parseInt(L.fc.substring(1,Infinity),16)}L.lh=b.get(C,"lineHeight");L.ta=b.get(C,"textAlign");L.ta="start"!=L.ta&&L.ta?L.ta:"left";L.va=this.isButton(C)?"middle":L.lh==L.h?"middle":b.get(C,"verticalAlign");return L},getText:function(C){C=x.trim(C.innerHTML);-1<C.indexOf("\x3c")&&(C=escape(C));return C},getStyle:function(C){var L={},F=h.getContentBox(C),K=h.getPadExtents(C);L.p=[K.t,K.w-K.l,K.h-K.t,K.l];L.w=F.w+K.w;L.h=F.h+K.h;L.d=b.get(C,
"display");F=new v(b.get(C,"backgroundColor"));L.bc=0==F.a?"#ffffff":F.toHex();L.bc=parseInt(L.bc.substring(1,Infinity),16);if(F=this.urlencode(b.get(C,"backgroundImage")))L.bi={url:F,rp:b.get(C,"backgroundRepeat"),pos:escape(b.get(C,"backgroundPosition"))},L.bi.pos||(F=b.get(C,"backgroundPositionX"),K=b.get(C,"backgroundPositionY"),L.bi.pos=escape(("left"==F?"0%":"right"==F?"100%":F)+" "+("top"==K?"0%":"bottom"==K?"100%":K)));return x.mixin(L,this.getTextStyle(C))},getTempNodeStyle:function(C,L,
F){if(F){F=m.place("\x3c"+C.tagName+"\x3e\x3cspan\x3e"+C.innerHTML+"\x3c/span\x3e\x3c/"+C.tagName+"\x3e",C.parentNode);var K=F.firstChild;e.add(K,C.className);e.add(F,L);C=this.getStyle(K)}else F=m.place("\x3c"+C.tagName+"\x3e"+C.innerHTML+"\x3c/"+C.tagName+"\x3e",C.parentNode),e.add(F,C.className),e.add(F,L),F.id=C.id,C=this.getStyle(F);m.destroy(F);return C}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e){x.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");f=e._iframeName;f=f.substring(0,f.lastIndexOf("_"));var m=A.delegate(e,{create:function(){return m._frame=e.create.apply(e,arguments)},get:null,post:null,send:function(n){var l=w._ioSetArgs(n,function(z){k&&k.cancel()},function(z){var B=null;z=z.ioArgs;try{var H=z.handleAs;"xml"===H||"html"===H?B=k.response.data:(B=k.response.text,"json"===H?B=D.fromJson(B):"javascript"===H&&(B=x.eval(B)))}catch(J){B=
J}return B},function(z,B){B.ioArgs._hasError=!0;return z}),r=l.ioArgs,p="GET",v=c.byId(n.form);n.method&&"POST"===n.method.toUpperCase()&&v&&(p="POST");n={method:p,handleAs:"json"===n.handleAs||"javascript"===n.handleAs?"text":n.handleAs,form:n.form,query:v?null:n.content,data:v?n.content:null,timeout:n.timeout,ioArgs:r};n.method&&(n.method=n.method.toUpperCase());if(y.ioPublish&&x.publish&&!1!==r.args.ioPublish)var q=g.after(e,"_notifyStart",function(z){z.options.ioArgs===r&&(q.remove(),w._ioNotifyStart(l))},
!0);var k=e(r.url,n,!0);r._callNext=k._callNext;k.then(function(){l.resolve(l)}).otherwise(function(z){l.ioArgs.error=z;l.reject(z)});return l},_iframeOnload:d.global[f+"_onload"]});A.setObject("dojo.io.iframe",m);return m})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(y,D,x,A,w,f,d,c,a){function b(l){l=y.delegate(g,l);if(!("path"in l))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in l||(l.id="dojox-embed-flash-"+h++);return l}var h=0,g={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(w("ie")){var e=function(l){l=b(l);if(!l)return null;var r,p=l.path;if(l.vars){var v=[];for(r in l.vars)v.push(encodeURIComponent(r)+"\x3d"+encodeURIComponent(l.vars[r]));l.params.FlashVars=v.join("\x26");delete l.vars}p='\x3cobject id\x3d"'+a.escape(String(l.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
a.escape(String(l.width))+'" height\x3d"'+a.escape(String(l.height))+'"'+(l.style?' style\x3d"'+a.escape(String(l.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+a.escape(String(p))+'" /\x3e';if(l.params)for(r in l.params)p+='\x3cparam name\x3d"'+a.escape(r)+'" value\x3d"'+a.escape(String(l.params[r]))+'" /\x3e';return{id:l.id,markup:p+"\x3c/object\x3e"}};var m=function(){for(var l=10,r=null;!r&&7<l;)try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+l--)}catch(p){}return r?(l=r.GetVariable("$version").split(" ")[1].split(","),
{major:null!=l[0]?parseInt(l[0]):0,minor:null!=l[1]?parseInt(l[1]):0,rev:null!=l[2]?parseInt(l[2]):0}):{major:0,minor:0,rev:0}}();D.addOnWindowUnload(function(){console.warn("***************UNLOAD");var l=function(){};A("object").reverse().style("display","none").forEach(function(r){for(var p in r)if("FlashVars"!=p&&"function"==typeof r[p])try{r[p]=l}catch(v){}})})}else e=function(l){l=b(l);if(!l)return null;var r,p=l.path;if(l.vars){var v=[];for(r in l.vars)v.push(encodeURIComponent(r)+"\x3d"+encodeURIComponent(l.vars[r]));
l.params.flashVars=v.join("\x26");delete l.vars}p='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+a.escape(String(p))+'" id\x3d"'+a.escape(String(l.id))+'" width\x3d"'+a.escape(String(l.width))+'" height\x3d"'+a.escape(String(l.height))+'"'+(l.style?' style\x3d"'+a.escape(String(l.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(l.params)for(r in l.params)p+=" "+a.escape(r)+'\x3d"'+a.escape(String(l.params[r]))+'"';return{id:l.id,markup:p+
" /\x3e"}},m=function(){var l=navigator.plugins["Shockwave Flash"];return l&&l.description?(l=l.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=l[0]?parseInt(l[0]):0,minor:null!=l[1]?parseInt(l[1]):0,rev:null!=l[2]?parseInt(l[2]):0}):{major:0,minor:0,rev:0}}();var n=function(l,r){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=m.major;this.minimumVersion=l.minimumVersion||9;this.domNode=this.movie=this.id=null;r&&(r=f.byId(r));setTimeout(y.hitch(this,function(){if(l.expressInstall||this.available&&this.available>=this.minimumVersion)if(l&&r)this.init(l,r);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};y.extend(n,{onReady:function(l){},onLoad:function(l){},onError:function(l){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(l,r){this.destroy();r=f.byId(r||this.domNode);if(!r)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var p=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;n.initialized&&(this.id=n.place(l,r),this.domNode=r,setTimeout(y.hitch(this,
function(){this.movie=this.byId(this.id,l.doc);this.onReady(this.movie);this._poller=setInterval(y.hitch(this,function(){try{p=this.movie.PercentLoaded()}catch(v){console.warn("this.movie.PercentLoaded() failed",v,this.movie)}if(100==p)this._onload();else if(0==p&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(l){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var l=
y.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),r;for(r in this)l[r]||delete this[r];this._poller?d(this,"Load",this,"_destroy"):this._destroy()}},byId:function(l,r){r=r||document;return r.embeds[l]?r.embeds[l]:r[l]?r[l]:window[l]?window[l]:document[l]?document[l]:null}});y.mixin(n,{minSupported:8,available:m.major,supported:m.major>=m.required,minimumRequired:m.required,version:m,initialized:!1,onInitialize:function(){n.initialized=!0},__ie_markup__:function(l){return e(l)},proxy:function(l,
r){x.forEach(r instanceof Array?r:[r],function(p){this[p]=y.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+p+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+x.map(arguments,function(v){return __flash__toXML(v)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},l)}});n.place=function(l,r){l=e(l);r=f.byId(r);r||(r=c.doc.createElement("div"),r.id=l.id+"-container",c.body().appendChild(r));return l?(r.innerHTML=l.markup,
l.id):null};n.onInitialize();y.setObject("dojox.embed.Flash",n);return n})},"dojox/embed/flashVars":function(){define(["dojo"],function(y){y.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var D={serialize:function(x,A){var w=function(a){"string"==typeof a&&(a=a.replace(/;/g,"_sc_"),a=a.replace(/\./g,"_pr_"),a=a.replace(/:/g,"_cl_"));return a},f=dojox.embed.flashVars.serialize,d="";if(y.isArray(A)){for(var c=0;c<A.length;c++)d+=f(x+"."+c,w(A[c]))+";";return d.replace(/;{2,}/g,";")}if(y.isObject(A)){for(c in A)d+=
f(x+"."+c,w(A[c]))+";";return d.replace(/;{2,}/g,";")}return x+":"+A}};y.setObject("dojox.embed.flashVars",D);return D})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(y,D,x,A){var w=y.getObject("dojox.html",!0),f={},d={},c=[];w.insertCssRule=function(a,b,h){h=w.getDynamicStyleSheet(h);var g=a+" {"+b+"}";console.log("insertRule:",g);A("ie")?(h.cssText+=g,console.log("ss.cssText:",h.cssText)):h.sheet?h.sheet.insertRule(g,
h._indicies.length):h.appendChild(x.doc.createTextNode(g));h._indicies.push(a+" "+b);return a};w.removeCssRule=function(a,b,h){var g=-1,e,m;for(e in f)if(!h||h===e){var n=f[e];for(m=0;m<n._indicies.length;m++)if(a+" "+b===n._indicies[m]){g=m;break}if(-1<g)break}if(!n)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===g)return console.warn("The css rule was not found and could not be removed."),!1;n._indicies.splice(g,1);A("ie")?n.removeRule(g):n.sheet&&
n.sheet.deleteRule(g);return!0};w.modifyCssRule=function(a,b,h){};w.getStyleSheet=function(a){if(f[a||"default"])return f[a||"default"];if(!a)return!1;var b=w.getStyleSheets();if(b[a])return w.getStyleSheets()[a];for(var h in b)if(b[h].href&&-1<b[h].href.indexOf(a))return b[h];return!1};w.getDynamicStyleSheet=function(a){a||(a="default");f[a]||(x.doc.createStyleSheet?(f[a]=x.doc.createStyleSheet(),9>A("ie")&&(f[a].title=a)):(f[a]=x.doc.createElement("style"),f[a].setAttribute("type","text/css"),x.doc.getElementsByTagName("head")[0].appendChild(f[a]),
console.log(a," ss created: ",f[a].sheet)),f[a]._indicies=[]);return f[a]};w.enableStyleSheet=function(a){if(a=w.getStyleSheet(a))a.sheet?a.sheet.disabled=!1:a.disabled=!1};w.disableStyleSheet=function(a){if(a=w.getStyleSheet(a))a.sheet?a.sheet.disabled=!0:a.disabled=!0};w.activeStyleSheet=function(a){var b=w.getToggledStyleSheets(),h;if(1===arguments.length)D.forEach(b,function(g){g.disabled=g.title===a?!1:!0});else for(h=0;h<b.length;h++)if(!1===b[h].disabled)return b[h];return!0};w.getPreferredStyleSheet=
function(){};w.getToggledStyleSheets=function(){var a;if(!c.length){var b=w.getStyleSheets();for(a in b)b[a].title&&c.push(b[a])}return c};w.getStyleSheets=function(){if(d.collected)return d;D.forEach(x.doc.styleSheets,function(a){var b=a.sheet?a.sheet:a;a=b.title||b.href;if(A("ie"))-1===b.cssText.indexOf("#default#VML")&&(b.href?d[a]=b:b.imports.length?D.forEach(b.imports,function(h){d[h.title||h.href]=h}):d[a]=b);else{d[a]=b;d[a].id=b.ownerNode.id;a=[];try{a=b[b.cssRules?"cssRules":"rules"]}catch(h){console.warn("Reading css rules from stylesheet "+
b.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",b)}D.forEach(a,function(h){h.href&&(d[h.href]=h.styleSheet,d[h.href].id=b.ownerNode.id)})}});d.collected=!0;return d};return w})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(y,D,x,A,w,f){D.experimental("dijit.editor.plugins.EditorTextColor");var d=A("dijit.editor.plugins.EditorTextColor",
w,{buttonClass:f,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var c="",a=!1;this.params.custom&&(this.params.custom.recordUID&&(c=this.params.custom.recordUID),this.params.custom.forceAttr&&(a=this.params.custom.forceAttr));var b=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));
this.button.loadDropDown=function(h){function g(e){b.button.dropDown=new e({dir:b.editor.dir,ownerDocument:b.editor.ownerDocument,value:b.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:c,onChange:function(m){b.editor.execCommand("useCSS",a);b.editor.execCommand("styleWithCSS",!a);b.editor.execCommand(b.hackCommand,m)},onClose:function(){b.button.closeDropDown()}});h()}"string"===typeof b.colorPicker?y([b.colorPicker],
g):g(b.colorPicker)}},updateState:function(){var c=this.editor,a=this.hackCommand;if(c&&c.isLoaded&&a.length){if(this.button){var b=this.get("disabled");this.button.set("disabled",b);if(b)return;try{var h=c.queryCommandValue(a)||""}catch(g){h=""}}""===h?h="#000000":"transparent"===h&&(h="rgba(0, 0, 0, 0)");this.value=h;(c=this.button.dropDown)&&c.getColor&&h!==c.getColor()&&(c.refreshRecords(),c.setColor(h))}}});D.subscribe(x._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin)switch(c.args.name){case "editorTextColor":c.plugin=
new d}});return d})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(y,D,x,A,w,f){D.experimental("dijit.editor.plugins.EditorBackgroundColor");var d=A("dijit.editor.plugins.EditorBackgroundColor",w,{buttonClass:f,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);
var c="";this.params.custom&&this.params.custom.recordUID&&(c=this.params.custom.recordUID);var a=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(b){function h(g){a.button.dropDown=new g({dir:a.editor.dir,ownerDocument:a.editor.ownerDocument,value:a.value,appearance:{showTransparent:!0,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,
showCoustomRecord:!0},recordUID:c,onChange:function(e){a.editor.execCommand("useCSS",!1);a.editor.execCommand("styleWithCSS",!0);a.editor.execCommand(a.hackCommand,e)},onExecute:function(){a.editor.execCommand(a.hackCommand,this.get("value"))},onClose:function(){a.button.closeDropDown()}});b()}"string"===typeof a.colorPicker?y([a.colorPicker],h):h(a.colorPicker)}},updateState:function(){var c=this.editor,a=this.hackCommand;if(c&&c.isLoaded&&a.length){if(this.button){var b=this.get("disabled");this.button.set("disabled",
b);if(b)return;try{var h=c.queryCommandValue(a)||""}catch(g){h=""}}""===h?h="#000000":"transparent"===h&&(h="rgba(0, 0, 0, 0)");this.value=h;(c=this.button.dropDown)&&c.getColor&&h!==c.getColor()&&(c.refreshRecords(),c.setColor(h))}}});D.subscribe(x._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin)switch(c.args.name){case "editorBackgroundColor":c.plugin=new d}});return d})},"widgets/RelatedTableCharts/setting/GeneralSetting":function(){define("jimu/BaseWidgetSetting dojo/_base/declare dojo/_base/lang dojo/on dijit/_WidgetsInTemplateMixin ./SymbolChooserPopup jimu/symbolUtils jimu/utils dojo/text!./GeneralSetting.html esri/symbols/jsonUtils jimu/dijit/Message dojo/dom-construct".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g){return D([y,w],{baseClass:"jimu-widget-RelatedTableCharts-setting",templateString:a,nls:this.nls,config:this.config,graphicLocatoionSymbolJSON:null,postMixInProperties:function(){this.nls=x.mixin(this.nls,window.jimuNls.common)},postCreate:function(){this._createSymbolPickerNode();this._setRefreshIntervalTxtBxValue();this._setLocationChkBxValue()},_createSymbolPickerNode:function(){var e={};e.type=c.getSymbolTypeByGeometryType("esriGeometryPoint");this.config&&this.config.symbol&&
this.config.symbol.graphicLocationSymbol&&(e.symbol=b.fromJson(this.config.symbol.graphicLocationSymbol));var m=this._createPreviewContainer(this.locationSymbolIconNode);var n={symbolChooserTitle:this.nls.locationSymbolLabel,symbolParams:e,nls:this.nls};this._showSelectedSymbol(m,e.symbol);this.own(A(m,"click",x.hitch(this,function(){e.symbol=b.fromJson(this.graphicLocatoionSymbolJSON);this._initSymbolChooserPopup(n,m)})))},_createPreviewContainer:function(e){e=g.create("table",{cellspacing:"0",cellpadding:"0"},
e);e=g.create("tr",{style:"height:30px"},e);var m=g.create("td",{},e);g.create("div",{innerHTML:this.nls.symbolPickerPreviewText,"class":"esriCTSymbolPreviewText"},m);e=g.create("td",{},e);return g.create("div",{"class":"esriCTSymbolChooserNode"},e)},_initSymbolChooserPopup:function(e,m){var n=new f(e);n.onOkClick=x.hitch(this,function(){var l=n.symbolChooser.getSymbol();this._showSelectedSymbol(m,l);n.popup.close()})},_showSelectedSymbol:function(e,m){g.empty(e);if(m){var n=d.createSymbolNode(m);
n||(n=g.create("div"));g.place(n,e);this.graphicLocatoionSymbolJSON=m.toJson()}},getConfig:function(){var e={symbol:{graphicLocationSymbol:this.graphicLocatoionSymbolJSON},refreshInterval:this.refreshIntervalTxtBx.value,showLocationTool:this.setLocationCheckBoxNode.getValue()};if(this.refreshIntervalTxtBx.isValid())return e;this._errorMessage(this.nls.errMsgRefreshInterval,this.nls.generalSettingLabel);return!1},_setRefreshIntervalTxtBxValue:function(){this.config&&this.config.refreshInterval&&this.refreshIntervalTxtBx.set("value",
this.config.refreshInterval)},_setLocationChkBxValue:function(){this.config.showLocationTool&&this.setLocationCheckBoxNode.setValue(this.config.showLocationTool)},_onRefreshIntervalChanged:function(){isNaN(this.refreshIntervalTxtBx.get("value"))&&this.refreshIntervalTxtBx.set("value",0)},_errorMessage:function(e,m){(new h({message:e})).message=e;this.tab&&m&&this.tab.getSelectedTitle()!==m&&this.tab.selectTab(m)}})})},"widgets/RelatedTableCharts/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dijit/focus dojo/domReady!".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h){return y([D,x],{templateString:c,baseClass:"jimu-widget-RelatedTableCharts-setting",postCreate:function(){this.own(d(this.okButton,"click",A.hitch(this,this._onOKButtonClicked)));this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new a(this.symbolParams,f.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new b({titleLabel:this.symbolChooserTitle,width:420,
height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!w.contains(this.okButton,"jimu-state-disabled"))if(this._validatePointSymbolSize())if(this._validatePointOutlineWidth())if(this._validateLineWidth())if(this._validatePolygonOutlineWidth())this.onOkClick();else h.focus(this.symbolChooser.fillOutlineWidth.focusNode);else h.focus(this.symbolChooser.lineWidth.focusNode);else h.focus(this.symbolChooser.pointOutlineWidth.focusNode);else h.focus(this.symbolChooser.pointSize.focusNode)},
onOkClick:function(g){return g},_validatePointSymbolSize:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("pointSize")?this.symbolChooser.pointSize.isValid():!0},_validatePolygonOutlineWidth:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("fillOutlineWidth")?this.symbolChooser.fillOutlineWidth.isValid():!0},_validatePointOutlineWidth:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("pointOutlineWidth")?this.symbolChooser.pointOutlineWidth.isValid():
!0},_validateLineWidth:function(){if(this.symbolChooser&&this.symbolChooser.hasOwnProperty("lineWidth"))if(this.symbolChooser.lineWidth.isValid()){var g=this.symbolChooser.lineWidth.getValue();if(""===g||null===g||void 0===g||isNaN(g))return this.symbolChooser.lineWidth.setValue("0"),!1}else return!1;return!0}})})},"widgets/RelatedTableCharts/setting/SearchSourceSettings":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./SearchSourceSettings.html dojo/_base/html jimu/dijit/SimpleTable ./QuerySourceSetting ./LocatorSourceSetting jimu/LayerInfos/LayerInfos ../searchSourceUtils jimu/utils dojo/when esri/lang dojo/_base/lang dojo/_base/array dojo/query dojo/on dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v,q){return y([D,x,A],{baseClass:"jimu-widget-RelatedTableCharts-search-source-settings",templateString:w,startup:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(p(this.menuItemClickNode,"click",n.hitch(this,this._onMenuItemClick)));this._createSourceListTable();this.showInfoWindowOnSelect=new q({checked:!1,label:this.nls.searchSourceSetting.generalSettingCheckboxLabel},this.showInfoWindowOnSelectNode);this.config&&
this.config.sources||(this.config.sources=[]);this.shelter.show(this.nls.loading);b.getInstance(this.map,this.map.itemInfo).then(n.hitch(this,function(k){this.layerInfosObj=k;h.setMap(this.map);h.setLayerInfosObj(this.layerInfosObj);h.setAppConfig(this.appConfig);e(h.getConfigInfo(this.config)).then(n.hitch(this,this._loadConfig))}))},_loadConfig:function(k){this.domNode&&(this.setConfig(k),this.shelter.hide())},setConfig:function(k){this.config=k;k=k.sources;this.allPlaceholder.set("value",g.stripHTML(this.config.allPlaceholder));
this.showInfoWindowOnSelect.setValue(m.isDefined(this.config.showInfoWindowOnSelect)?!!this.config.showInfoWindowOnSelect:!0);l.forEach(k,n.hitch(this,function(z,B){var H=this.sourceList.addRow({name:z.name||""});H&&H.success?(this._setRelatedConfig(H.tr,z),0===B&&setTimeout(n.hitch(this,function(){this.sourceList.selectRow(H.tr)}),100)):console.error("add row failed ",H)}))},getConfig:function(){var k={};if(this._currentSourceSetting){k.inputValidationStatus=this._currentSourceSetting.validateAllNumberInputs();
if(!k.inputValidationStatus.isInputValid)return k;if(this._currentSourceSetting.isValidConfig())this._closeSourceSetting();else return null}k={allPlaceholder:g.stripHTML(this.allPlaceholder.get("value")),showInfoWindowOnSelect:this.showInfoWindowOnSelect.checked};var z=this.sourceList.getRows(),B=[];l.forEach(z,n.hitch(this,function(H){var J=this._getRelatedConfig(H);delete J._definition;this._removeRelatedConfig(H);B.push(J)}));k.sources=B;return k},destroy:function(){h.setMap(null);h.setLayerInfosObj(null);
h.setAppConfig(null);this.inherited(arguments)},_onAllPlaceholderBlur:function(){this.allPlaceholder.set("value",g.stripHTML(this.allPlaceholder.get("value")))},_createSourceListTable:function(){this.sourceList=new d({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.searchSourceSetting.nameTitle,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.sourceList);f.setStyle(this.sourceList.domNode,"height","100%");
this.sourceList.startup();this.own(p(this.sourceList,"row-select",n.hitch(this,this._onSourceItemSelected)));this.own(p(this.sourceList,"row-delete",n.hitch(this,this._onSourceItemRemoved)))},_onSourceItemRemoved:function(k){this._currentSourceSetting&&this._currentSourceSetting.getRelatedTr()===k&&(this._currentSourceSetting.destroy(),this._currentSourceSetting=null)},_onSourceItemSelected:function(k){var z=this._getRelatedConfig(k),B=this._currentSourceSetting&&this._currentSourceSetting.tr;z&&
k!==B&&(this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?(this._currentSourceSetting.showValidationTip(),this.sourceList.selectRow(B)):(v.remove(this.searchSources,"esriCTSourcesExtraHeight"),"query"===z.type?this._createNewQuerySourceSettingFromSourceList(z,z._definition||{},k):"locator"===z.type&&this._createNewLocatorSourceSettingFromSourceList(z,z._definition||{},k)))},_setRelatedConfig:function(k,z){r(k).data("config",n.clone(z))},_getRelatedConfig:function(k){return r(k).data("config")[0]},
_removeRelatedConfig:function(k){return r(k).removeData("config")},_onMenuItemClick:function(k){k=k&&k.target&&f.getAttr(k.target,"type");this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?this.emit("invalid-source-setting"):(v.remove(this.searchSources,"esriCTSourcesExtraHeight"),"locator"===k?this._addNewLocator():"query"===k&&this._addNewQuerySource())},_addNewLocator:function(){this._createNewLocatorSourceSettingFromMenuItem({},{})},_addNewQuerySource:function(){this._createNewQuerySourceSettingFromMenuItem({},
{})},_createNewLocatorSourceSettingFromMenuItem:function(k,z){var B=new a({nls:this.nls.searchSourceSetting,map:this.map,loading:this.nls.loading});B.setDefinition(z);B.setConfig({url:k.url||"",name:k.name||"",singleLineFieldName:k.singleLineFieldName||"",placeholder:k.placeholder||"",countryCode:k.countryCode||"",zoomScale:k.zoomScale||5E4,maxSuggestions:k.maxSuggestions||6,maxResults:k.maxResults||6,searchInCurrentMapExtent:!!k.searchInCurrentMapExtent,type:"locator"});B._openLocatorChooser();B.own(p(B,
"select-locator-url-ok",n.hitch(this,function(H){(H=this.sourceList.addRow({name:H.name||"New Geocoder"},this.sourceList.getRows().length))&&H.success&&(this._currentSourceSetting&&this._closeSourceSetting(),B.setRelatedTr(H.tr),B.placeAt(this.sourceSettingNode),this.sourceList.selectRow(H.tr),this._currentSourceSetting=B)})));B.own(p(B,"reselect-locator-url-ok",n.hitch(this,function(H){var J=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(J,{name:H.name})})));B.own(p(B,"select-locator-url-cancel",
n.hitch(this,function(){this._currentSourceSetting!==B&&(B.destroy(),B=null)})))},_createNewLocatorSourceSettingFromSourceList:function(k,z,B){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new a({nls:this.nls.searchSourceSetting,map:this.map,loading:this.nls.loading});this._currentSourceSetting.own(p(this._currentSourceSetting,"enable-local-search",n.hitch(this,function(){v.add(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.own(p(this._currentSourceSetting,
"disable-local-search",n.hitch(this,function(){v.remove(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.setDefinition(z);this._currentSourceSetting.setConfig({url:k.url||"",name:k.name||"",singleLineFieldName:k.singleLineFieldName||"",placeholder:k.placeholder||"",countryCode:k.countryCode||"",zoomScale:k.zoomScale||5E4,maxSuggestions:k.maxSuggestions||6,maxResults:k.maxResults||6,searchInCurrentMapExtent:!!k.searchInCurrentMapExtent,enableLocalSearch:!!k.enableLocalSearch,
localSearchMinScale:k.localSearchMinScale,localSearchDistance:k.localSearchDistance,type:"locator"});this._currentSourceSetting.setRelatedTr(B);this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.own(p(this._currentSourceSetting,"reselect-locator-url-ok",n.hitch(this,function(H){var J=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(J,{name:H.name})})))},_closeSourceSetting:function(){var k=this._currentSourceSetting.getRelatedTr(),z=this._currentSourceSetting.getConfig();
z._definition=this._currentSourceSetting.getDefinition();this._setRelatedConfig(k,z);this.sourceList.editRow(k,{name:z.name});this._currentSourceSetting.destroy()},_createNewQuerySourceSettingFromMenuItem:function(k,z){var B=new c({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});B.setDefinition(z);B.setConfig({url:k.url,name:k.name||"",layerId:k.layerId,placeholder:k.placeholder||"",searchFields:k.searchFields||[],displayField:k.displayField||z.displayField||"",exactMatch:!!k.exactMatch,
zoomScale:k.zoomScale||5E4,maxSuggestions:k.maxSuggestions||6,maxResults:k.maxResults||6,searchInCurrentMapExtent:!!k.searchInCurrentMapExtent,type:"query"});B._openQuerySourceChooser();B.own(p(B,"select-query-source-ok",n.hitch(this,function(H){(H=this.sourceList.addRow({name:H.name},0))&&H.success&&(this._currentSourceSetting&&this._closeSourceSetting(),B.setRelatedTr(H.tr),B.placeAt(this.sourceSettingNode),this.sourceList.selectRow(H.tr),this._currentSourceSetting=B)})));B.own(p(B,"reselect-query-source-ok",
n.hitch(this,function(H){var J=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(J,{name:H.name})})));B.own(p(B,"select-query-source-cancel",n.hitch(this,function(){this._currentSourceSetting!==B&&(B.destroy(),B=null)})))},_createNewQuerySourceSettingFromSourceList:function(k,z,B){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new c({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});this._currentSourceSetting.placeAt(this.sourceSettingNode);
this._currentSourceSetting.setDefinition(z);this._currentSourceSetting.setConfig({url:k.url,name:k.name||"",layerId:k.layerId,placeholder:k.placeholder||"",searchFields:k.searchFields||[],displayField:k.displayField||z.displayField||"",exactMatch:!!k.exactMatch,zoomScale:k.zoomScale||5E4,maxSuggestions:k.maxSuggestions||6,maxResults:k.maxResults||6,searchInCurrentMapExtent:!!k.searchInCurrentMapExtent,type:"query"});this._currentSourceSetting.setRelatedTr(B);this._currentSourceSetting.own(p(this._currentSourceSetting,
"reselect-query-source",n.hitch(this,function(H){var J=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(J,{name:H.name})})))}})})},"widgets/RelatedTableCharts/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v){return y([x,A,w,g],{baseClass:"jimu-widget-RelatedTableCharts-query-source-setting",templateString:f,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,postMixInProperties:function(){this.nls.common={};this.nls.common=window.jimuNls.common;this.nls.loadingShelter=window.jimuNls.loadingShelter},postCreate:function(){this.inherited(arguments);this.own(a(this.setSourceBtnClickNode,
"click",d.hitch(this,this._onSetSourceClick)));this.own(a(this.sourceName,"Blur",d.hitch(this,this._onSourceNameBlur)));this.own(a(this.placeholder,"Blur",d.hitch(this,this._onPlaceholderBlur)));this.own(a(this.fieldsSelectorNode,"click",d.hitch(this,this._onFieldsSelectorClick)));this.exactMatch=new v({checked:!1,label:this.nls.exactMatch},this.exactMatch);this.searchInCurrentMapExtent=new v({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition=
{};this._fieldsCheckBox=[];this._setMessageNodeContent("")},setDefinition:function(q){this._layerDefinition=q||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(q){this.tr=q},getRelatedTr:function(){return this.tr},setConfig:function(q){if("[object Object]"===Object.prototype.toString.call(q)){var k=q.url;k&&(this.config=q,this.shelter.show(this.nls.loadingShelter.loading),this._layerDefinition.url!==k?this._getDefinitionFromRemote(k).then(d.hitch(this,function(z){k&&
z&&"error"!==z.type?(this._layerDefinition=z,this._layerDefinition.url=k,this._setSourceItems(),this._setMessageNodeContent("")):k&&z&&"error"===z.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(l.substitute({URL:z.url},d.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},isValidConfig:function(){var q=this.getConfig();return q.url&&q.name&&q.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);
this._showValidationErrorTip(this.sourceName)},getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:r.stripHTML(this.sourceName.get("value")),placeholder:r.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,zoomScale:this.zoomScale.get("value")||5E4,maxSuggestions:this.maxSuggestions.get("value")||
6,maxResults:this.maxResults.get("value")||6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",r.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",r.stripHTML(this.placeholder.get("value")))},_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",
!0);this.searchFields.set("disabled",!0);D.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);D.setStyle(this.fieldsSelectorNode,"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",
!1);this.maxResults.set("disabled",!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",r.stripHTML(this.config.name||""));this.placeholder.set("value",r.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",this.config.displayField||"");this.exactMatch.setValue(!!this.config.exactMatch);
this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);this.zoomScale.set("value",this.config.zoomScale||5E4);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?this._hideSuggestibleTips():this._showSuggestibleTips();
this._layerDefinition&&"esriGeometryPoint"===this._layerDefinition.geometryType?D.setStyle(this.zoomScaleTr,"display",""):D.setStyle(this.zoomScaleTr,"display","none");this._enableSourceItems()},_getDefinitionFromRemote:function(q){var k=new h,z=n({url:q,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(z);z.then(d.hitch(this,function(B){k.resolve(B)}),d.hitch(this,function(B){console.error(B);k.resolve({type:"error",url:this._getRequestUrl(q)})}));return k.promise},_setMessageNodeContent:function(q,
k){D.empty(this.messageNode);q.nodeType||(q=D.toDom(q));D.place(q,this.messageNode);k?D.setStyle(this.messageTr,"display",""):D.setStyle(this.messageTr,"display","none")},_getRequestUrl:function(q){var k=window.location.protocol;return"http:"===k?m.setHttpProtocol(q):"https:"===k?m.setHttpsProtocol(q):q},_setSearchFields2Node:function(){var q=null,k=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||
(q=[]);if(k){var z=this._layerDefinition.fields;q=c.filter(this.config.searchFields,function(B){return c.some(z,function(H){return H.name===B})})}else q=this.config.searchFields;this.searchFields.set("_fields",q)},_setDisplayFieldOptions:function(){var q=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?q=c.map(this._layerDefinition.fields,function(k){return{label:k.alias||k.name||"",value:k.name||""}}):this.config&&this.config.displayField&&(q=[{label:this.config.displayField,
value:this.config.displayField}]);this.displayField.set("options",q)},_getSearchFieldsAlias:function(){var q=this._getSearchFields();if(!(q&&0<q.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var k=this._layerDefinition.fields,z=c.map(k,function(C){return C&&C.name}),B=[],H=0,J=q.length;H<J;H++){var N=z.indexOf(q[H]);-1<N&&(k[N].alias?B.push(k[N].alias):B.push(k[N].name))}return B.join(",")}return q.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},
_setSearchFields:function(q){this.searchFields.set("_fields",q)},_onSetSourceClick:function(){this._clickSet=!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var q=new e({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});a.once(q,"ok",d.hitch(this,function(k){q.close();this.setDefinition(k.definition||
{});this.setConfig({layerId:k.layerInfo&&k.layerInfo.id||null,url:k.url,name:k.name||"",placeholder:"",searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,zoomScale:5E4,maxSuggestions:6,maxResults:6,type:"query"});q=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",k):this.emit("select-query-source-ok",k)}));a.once(q,"cancel",d.hitch(this,function(){q.close();q=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var q=
D.create("div",{style:{maxHeight:"480px"}}),k=this._layerDefinition.fields;this._fieldsCheckBox=[];c.forEach(k,d.hitch(this,function(z,B){var H=new v({checked:this._isSearchable(z),label:z.alias||z.name});D.addClass(H.domNode,"esriCTSearchSourceFieldCheckbox");D.addClass(H.labelNode,"jimu-ellipsis");D.setAttr(H.domNode,{title:z.alias||z.name});0===B%3&&(window.isRTL?D.setStyle(H.domNode,"marginRight",0):D.setStyle(H.domNode,"marginLeft",0));H.placeAt(q);b(H.domNode).data("fieldName",z.name);this._fieldsCheckBox.push(H)}));
this.fieldsPopup=new p({titleLabel:this.nls.setSearchFields,autoHeight:!0,content:q,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.common.ok,onClick:d.hitch(this,"_onSearchFieldsOk")},{label:this.nls.common.cancel,classNames:["jimu-btn-vacation"]}],onClose:d.hitch(this,function(){this.fieldsPopup=null})});D.addClass(this.fieldsPopup.domNode,this.baseClass)},_onSearchFieldsOk:function(){var q=[];c.forEach(this._fieldsCheckBox,function(k){if(k.getValue()){var z=
b(k.domNode).data("fieldName");q.push(z[0]);b(k.domNode).removeData()}});this._setSearchFields(q);this.searchFields.set("value",this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(q){var k=this._getSearchFields();return c.some(k,d.hitch(this,function(z){return q.name===z}))},_showSuggestibleTips:function(){D.removeClass(this.tipsNode,"esriCTHidden");D.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){D.addClass(this.tipsNode,"esriCTHidden");
D.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(q){if(!q.validate()&&q.domNode&&q.focusNode){var k=q.get("disabled");k&&q.set("disabled",!1);q.focusNode.focus();setTimeout(d.hitch(this,function(){q.focusNode.blur();k&&q.set("disabled",!0);q=null}),100)}},validateAllNumberInputs:function(){var q={isInputValid:!0};if(this.maxSuggestions&&!this.maxSuggestions.isInRange()||!this.maxSuggestions.isValid())return q.isInputValid=!1,q.validationMessage=this.nls.maxSuggestionErrorMessage,
q;if(this.maxResults&&!this.maxResults.isInRange()||!this.maxResults.isValid())return q.isInputValid=!1,q.validationMessage=this.nls.maxResultsErrorMessage,q;if(this.zoomScale&&!this.zoomScale.isInRange()||!this.zoomScale.isValid())q.isInputValid=!1,q.validationMessage=this.nls.zoomScaleErrorMessage;return q}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),
function(y,D,x,A,w,f,d,c,a){return y([f,D],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);w.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new d(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(x(this.fls,"ok",A.hitch(this,function(b){if(0!==b.length){var h=b[0];
if(h.definition)try{h.definition.name=h.name,h.definition.url=h.url,this.emit("ok",h)}catch(g){console.error(g)}else this.loading.show(),a({url:h.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(A.hitch(this,function(g){if(this.domNode){this.loading.hide();h.definition=g;try{h.definition.name=h.name,h.definition.url=h.url,this.emit("ok",h)}catch(e){console.error(e)}}}),A.hitch(this,function(g){console.error(g);this.domNode&&this.loading.hide()}))}})));this.own(x(this.fls,
"cancel",A.hitch(this,function(){try{this.emit("cancel")}catch(b){console.error(b)}})))},_initLoading:function(){this.loading=new c({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m){return y([D,x,A,a],{templateString:w,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,layerChooserFromMap:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=m.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var n=[];this.mapRadio.checked?n=this.flcMap.getSelectedItems():this.portalRadio.checked?n=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(n=this.flcUrl.getSelectedItems());return n},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();
this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new h({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0,layerChooserFromMap:this.layerChooserFromMap});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(c(this.flcMap,"ok",f.hitch(this,function(n){n&&0<n.length&&
this.emit("ok",n)})));this.own(c(this.flcMap,"cancel",f.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new g({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(c(this.flcPortal,"next",f.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));
this.own(c(this.flcPortal,"back",f.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(c(this.flcPortal,"ok",f.hitch(this,function(n){n&&0<n.length&&this.emit("ok",n)})));this.own(c(this.flcPortal,"cancel",f.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=
new e({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(c(this.flcUrl,"ok",f.hitch(this,function(n){n&&0<n.length&&this.emit("ok",n)})));this.own(c(this.flcUrl,"cancel",f.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var n="featureLayerSourceRadios_"+this._getRandomString(),l=f.hitch(this,this._onRadioClicked);this.mapRadio=new b({group:n,onStateChange:l,checked:!0});
this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new b({group:n,onStateChange:l,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new b({group:n,onStateChange:l,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(c(this.mapLabel,"click",f.hitch(this,function(){this.mapRadio.check()})));this.own(c(this.portalLabel,"click",f.hitch(this,function(){this.portalRadio.check()})));this.own(c(this.urlLabel,"click",f.hitch(this,function(){this.urlRadio.check()})))},
_getRandomString:function(){var n=Math.random().toString();return n=n.slice(2,n.length)},_onRadioClicked:function(){d.setStyle(this.flcContainer,"display","none");d.setStyle(this.hflcContainer,"display","none");d.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(d.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(d.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(d.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(y,D,x,A,w,f,d,c,a){return w([f,d,c,D],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
layerChooserFromMap:null,constructor:function(b){this.options=b},postMixInProperties:function(){this.nls=x.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=this.layerChooserFromMap?this.layerChooserFromMap:new a(this.options);this.layerChooser.placeAt(this.chooserContainer);A.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(y(this.layerChooser,"tree-click",x.hitch(this,function(){0<this.getSelectedItems().length?A.removeClass(this.btnOk,
"jimu-state-disabled"):A.addClass(this.btnOk,"jimu-state-disabled")})));this.own(y(this.btnOk,"click",x.hitch(this,function(){var b=this.getSelectedItems();0<b.length&&this.emit("ok",b)})));this.own(y(this.btnCancel,"click",x.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(y,D,x,A,w){return y([w],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=A.hitch(this,
this.basicFilter);this.filter=w.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=w.andCombineFilters([this.filter,A.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);x.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(f){return f.getLayerType().then(function(d){return!("ArcGISDynamicMapServiceLayer"===d||"ArcGISTiledMapServiceLayer"===
d||"GroupLayer"===d)})},basicFilter:function(f){var d=new D;0<=this.ignoredFeaturelayerIds.indexOf(f.id)?d.resolve(!1):this.onlyShowVisible&&"Table"!==f.getLayerType()?d.resolve(f.isShowInMap()):d.resolve(!0);return d},getHandledItem:function(f){var d=this.inherited(arguments),c=f&&f.layerInfo;c=c&&c.layerObject;d.url=c&&c.url||"";return d}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r){return y([D,x,A,g],{templateString:w,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=f.mixin({},window.jimuNls.common);this.nls=f.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=l.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new m({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(a(this.selector,"item-selected",f.hitch(this,this._onItemSelected)));this.own(a(this.selector,"none-item-selected",f.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new n({multiple:this.multiple});this.own(a(this.serviceBrowser,"tree-click",f.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){d.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){d.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();d.setStyle(this.btnOk,"display","none");d.setStyle(this.btnNext,"display","block");d.setStyle(this.btnBack,"display","none");d.addClass(this.btnOk,"jimu-state-disabled");d.setStyle(this.selectorContainer,"display","block");d.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var p=this.getSelectedItems();0<p.length&&this.emit("ok",p)},_onBtnNextClicked:function(){var p=this.selector.getSelectedItem();
p&&(d.setStyle(this.btnNext,"display","none"),d.setStyle(this.btnBack,"display","block"),d.setStyle(this.btnOk,"display","block"),d.addClass(this.btnOk,"jimu-state-disabled"),d.setStyle(this.selectorContainer,"display","none"),d.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(p.url||p.item),this._serviceBrowserDef.then(f.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),f.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?d.removeClass(this.btnOk,"jimu-state-disabled"):d.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v,q,k,z,B,H,J){return y([x,A,w,J,d],{templateString:f,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=q.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";b.forEach(this.itemTypes,c.hitch(this,function(N,C){this._itemTypes+=
'"'+N+'"';C!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";b.forEach(this.typeKeywords,c.hitch(this,function(N,C){this._typeKeywords+='"'+N+'"';C!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var N=this._getPortalUrl();
this.portal=p.getPortal(N);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=r.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=r.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var N={title:this.nls.myContent,content:this.mycontentTabNode},C={title:this.nls.myOrganization,content:this.organizationTabNode},
L={title:this.nls.myGroup,content:this.groupTabNode},F={title:this.nls.publicMap,content:this.publicTabNode};l.set(this.mycontentTabNode,"display","none");l.set(this.organizationTabNode,"display","none");l.set(this.groupTabNode,"display","none");l.set(this.publicTabNode,"display","none");var K=[];this.showMyContent&&(K.push(N),l.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(K.push(C),l.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(K.push(L),l.set(this.groupTabNode,
"display","block"));this.showPublic&&(K.push(F),l.set(this.publicTabNode,"display","block"));this.tab=new B({tabs:K},this.tabNode);this.own(n(this.tab,"tabChanged",c.hitch(this,function(t){h.setStyle(this.signinSection,"display","none");t!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){h.setStyle(this.signinSection,"display","none");var N=m(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);v.userHaveSignInPortal(this._getPortalUrl())?N.style("display","block"):(N.style("display","none"),this._isPublicTabShow||h.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var N=this._getPortalUrl();N=q.getServerByUrl(N);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var C=!1;q.isArcGIScom(N)?(C=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
N,C=this.showOnlineItems?!1:!0);C&&(this.onlinePublicRaido.set("disabled",!0),h.setStyle(this.onlinePublicRaido,"display","none"),h.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var N="esri_"+(a.locale&&a.locale.slice(0,2)||"en").toLowerCase(),C=b.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
c.hitch(this,function(F){return F!==N})),L="";b.forEach(C,c.hitch(this,function(F){L+=" -owner:"+F+" "}));C=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(C=" orgid:"+this.portal.user.orgId+" ");C=C+this._itemTypeQueryString+" AND access:public "+L+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:C});this._filterPublicPortalQuery=this._getQuery({q:C,basicQ:C});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(N){return c.mixin({start:1,num:16,f:"json"},N||{})},_getPortalUrl:function(){return q.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(n(this.publicPortalItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(n(this.publicOnlineItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(n(this.organizationItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(n(this.groupItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));
this.own(n(this.mycontentItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(n(this.publicPortalItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(n(this.publicOnlineItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(n(this.organizationItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(n(this.groupItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(n(this.mycontentItemTable,"update",c.hitch(this,this._onItemTableUpdate)));
var N=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",N),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(n(this.portalPublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this.own(n(this.onlinePublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(N){(N=N&&c.trim(N))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=N+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=N+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(n(this.groupsSelect,"change",c.hitch(this,this._onGroupsSelectChange)));var N=q.getServerByUrl(this._getPortalUrl());q.isArcGIScom(N)&&(N="ArcGIS.com");v.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(N){if(N=N&&c.trim(N)){if(this._allOrganizationQuery){var C=this._allOrganizationQuery.q;C&&(this._filterOrganizationQuery.q=N+" "+C,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(N){if(N=N&&c.trim(N)){if(this._allMyContentQuery){var C=this._allMyContentQuery.q;C&&(this._filterMyContentQuery.q=N+" "+
C,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(N){if(N=N&&c.trim(N)){if(this._allGroupQuery){var C=this._allGroupQuery.q;C&&(this._filterGroupQuery.q=N+" "+C,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var N=this._getPortalUrl();p.getPortal(N).getUser().then(c.hitch(this,function(C){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(C),this._searchMyContent(C),this._searchGroups(C))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(N){this.organizationItemTable.clear();N=" orgid:"+N.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var C=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:N});this._filterOrganizationQuery=this._getQuery({q:N});this.organizationItemTable.set("portalUrl",C);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(N){this.mycontentItemTable.clear();var C=this._getPortalUrl();N="owner:"+N.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:N});this._filterMyContentQuery=this._getQuery({q:N});this.mycontentItemTable.set("portalUrl",C);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(N){this._resetGroupsSection();h.setStyle(this.groupsSection,"display","flex");N=N.getGroups();if(0<N.length){h.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();h.empty(this.groupsSelect);for(var C=0;C<N.length;C++){var L=N[C];h.create("option",
{value:L.id,innerHTML:L.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(N.length)},_resetGroupsSection:function(){h.setStyle(this.groupsSection,"display","none");h.empty(this.groupsSelect);h.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();h.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(N){0===N?h.setStyle(this.groupsSection,
"top","15px"):h.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var N=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===N)h.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{h.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var C=this._getPortalUrl();N="group:"+N+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:N});this._filterGroupQuery=this._getQuery({q:N});
this.groupItemTable.set("portalUrl",C);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(N){var C=h.hasClass(N,"jimu-state-active");m(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");C&&h.addClass(N,"jimu-state-active");(N=this.getSelectedItem())?this.emit("item-selected",N):this.emit("none-item-selected")},getSelectedItem:function(){var N=null,C=m(".item.jimu-state-active",this.domNode);
0<C.length&&(N=c.mixin({},C[0].item));return N}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l){return y([D,x,A,f],{templateString:w,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=n.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){a.setStyle(this.domNode,"display","block")},hide:function(){a.setStyle(this.domNode,"display","none")},searchAllItems:function(r){this.showAllItemsSection();r&&(this.query=d.mixin({},r),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),m.getPortal(this.portalUrl).queryItems(this.query).then(d.hitch(this,function(p){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=p.nextStart,this._createItems(p,this.allItemTbody))}),d.hitch(this,function(p){console.error(p);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(r){this.showFilterItemsSection();r&&(this.filteredQuery=d.clone(r),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),m.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(d.hitch(this,function(p){this.domNode&&
(this.showFilterItemsSection(),r&&this.clearFilteredItemsSection(),this.filteredQuery.start=p.nextStart,this._createItems(p,this.filteredItemsTbody),this._filterItemCallback())}),d.hitch(this,function(p){console.error(p);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(a.setStyle(this.filteredItemsTableDiv,"display","block"),a.setStyle(this.searchNoneTipSection,"display","none")):(a.setStyle(this.filteredItemsTableDiv,
"display","none"),a.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){a.empty(this.allItemTbody)},clearFilteredItemsSection:function(){a.empty(this.filteredItemsTbody)},showAllItemsSection:function(){a.setStyle(this.allItemsSection,"display","block");a.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){a.setStyle(this.allItemsSection,"display","none");
a.setStyle(this.filteredItemsSection,"display","block");a.setStyle(this.filteredItemsTableDiv,"display","block");a.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(r){return e.isScrollToBottom(r)},_createItems:function(r,p){r=r.results;var v=
c.map(this.types,d.hitch(this,function(N){return N.toLowerCase()}));r=c.filter(r,d.hitch(this,function(N){N=N.type&&N.type.toLowerCase()||"";return 0<=c.indexOf(v,N)}));if(0!==r.length){var q=h("td.empty",p),k;if(0<q.length){var z=Math.min(r.length,q.length),B=r.splice(0,z);for(k=0;k<z;k++){var H=q[k];var J=this._createItem(B[k]);a.place(J,H);a.removeClass(H,"empty")}}if(0!==r.length){q=Math.ceil(r.length/2);for(k=0;k<q;k++)for(J=a.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
a.place(J,p),z=h("td",J),B=0;B<z.length;B++)H=z[B],(J=r[2*k+B])?(J=this._createItem(J),a.place(J,H)):a.addClass(H,"empty");this.emit("update")}}},_getItemCount:function(r){return h(".item",r).length},_createItem:function(r){var p=a.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
p.item=r;var v=h(".item-thumbnail",p)[0],q=h(".item-name",p)[0],k=h(".item-type-owner",p)[0],z=h(".item-date",p)[0],B=h(".item-details",p)[0],H=h(".none-thumbnail-tip",p)[0];if(!r.thumbnailUrl){var J=this._defaultThumbnail[r.type];J&&(r.thumbnailUrl=require.toUrl("jimu")+"/images/"+J)}r.thumbnailUrl?a.setStyle(v,"backgroundImage","url("+r.thumbnailUrl+")"):H.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(z=h(".item-info",p)[0],this.onCreateItemContent(r,z)):(q.innerHTML=
r.title,q.title=q.innerHTML,k.innerHTML=r.type+" by "+r.owner,k.title=k.innerHTML,v=new Date,v.setTime(r.modified),z.innerHTML=v.toLocaleString(),z.title=z.innerHTML,B.innerHTML=this.nls.moreDetails,B.href=r.detailsPageUrl||"#");return p},_onItemsTableClicked:function(r){var p=r.target||r.srcElement;r=null;a.hasClass(p,"item-thumbnail")?r=p.parentNode:a.hasClass(p,"none-thumbnail-tip")&&(r=p.parentNode.parentNode);r&&(p=a.hasClass(r,"jimu-state-active"),h(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
p?a.removeClass(r,"jimu-state-active"):a.addClass(r,"jimu-state-active"),this.emit("item-dom-clicked",r))},getSelectedItem:function(){var r=null,p=h(".item.jimu-state-active",this.domNode);0<p.length&&(r=d.mixin({},p[0].item));return r}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(y,D,x,A,w){return y([D],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",
url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=w.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var f=this.inherited(arguments);return f=A.map(f,x.hitch(this,function(d){return{name:d.name,url:d.url,definition:d.definition}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n){return y([D,x,A,w],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(l){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new a;l&&"string"===typeof l&&l.replace(/\/*$/g,"")||this._def.reject();l=l.replace(/\/*$/g,"");l=f.trim(l);var r=l.match(/^http(s?):\/\//gi);r&&0<r.length||
(l="http://"+l);if(!(0>=l.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=l))return l=this._getRootItem(),l=m.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,l):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,l):this._searchFolderServiceUrl(this._currentUrl,l),this.shelter.show(),l.then(f.hitch(this,function(p){this.domNode&&this.shelter.hide();var v=this.tree.getAllLeafTreeNodeWidgets();1===v.length&&
v[0].select();this._def.resolve(p)}),f.hitch(this,function(p){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(p)})),this._def;this._def.reject()},_getItem:function(l){return this.rule.getItem(l)},_getSubItemUrls:function(l){return this.rule.getSubItemUrls(l)},_getSubItems:function(l){var r=new a;this._getSubItemUrls(l).then(f.hitch(this,function(p){p=c.map(p,f.hitch(this,function(v){return this._getItem(v)}));b(p).then(f.hitch(this,function(v){v=c.filter(v,f.hitch(this,
function(q){return q&&"object"===typeof q}));r.resolve(v)}),f.hitch(this,function(v){r.reject(v)}))}),f.hitch(this,function(p){r.reject(p)}));return r},_selectFirstLeafTreeNodeWidget:function(){var l=this.tree.getAllLeafTreeNodeWidgets();1===l.length&&l[0].select()},isLeafItem:function(l){return 0<=this.rule.leafTypes.indexOf(l.type)},isServiceTypeSupported:function(l){return this.rule.isServiceTypeSupported(l)},_getStringEndWith:function(l,r){var p="",v=l.indexOf(r);0<=v&&(p=l.slice(0,v+r.length));
return p},_isUrlContainsServiceType:function(l){return this.rule.isUrlContainsServiceType(l)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(l){var r="";l=l.split("/");return r=l[l.length-1]},_searchBaseServiceUrl:function(l,r){var p=new a;this._getRestInfo(l).then(f.hitch(this,function(v){if(this.domNode){var q=[];c.map(v.folders,f.hitch(this,function(k){var z={name:k,type:"folder",url:l+"/"+k,parent:r.id};this._addItem(z);
var B=new a;this._doSearchFolderServiceUrl(z.url,z.id).then(f.hitch(this,function(H){0<H.length?c.forEach(H,f.hitch(this,function(J){J.parent=z.id;this._addItem(J)})):this._removeItem(z.id);B.resolve()}),f.hitch(this,function(H){B.reject(H)}));q.push(B);return B}));c.forEach(v.services,f.hitch(this,function(k){if(this.isServiceTypeSupported(k.type)){k=l+"/"+k.name+"/"+k.type;var z=new a;this.rule.getItem(k).then(f.hitch(this,function(B){B&&(B.parent=r.id,this._addItem(B));z.resolve()}),f.hitch(this,
function(B){console.error(B);z.reject(B)}));q.push(z)}}));b(q).then(f.hitch(this,function(){this.domNode&&p.resolve()}),f.hitch(this,function(k){console.error(k);this.domNode&&p.reject(k)}))}}),f.hitch(this,function(v){console.error(v);this.domNode&&p.reject({errorCode:"NETWORK_ERROR",error:v})}));return p},_searchFolderServiceUrl:function(l,r){var p=new a;this._doSearchFolderServiceUrl(l,r).then(f.hitch(this,function(v){this.domNode&&(c.forEach(v,f.hitch(this,function(q){q.parent=r.id;this._addItem(q)})),
p.resolve())}),f.hitch(this,function(v){console.error(v);this.domNode&&p.reject({errorCode:"NETWORK_ERROR",error:v})}));return p},_doSearchFolderServiceUrl:function(l){var r=new a,p=this._getBaseServiceUrl();this._getRestInfo(l).then(f.hitch(this,function(v){v=v.services;var q=[];v&&0<v.length&&c.forEach(v,f.hitch(this,function(k){this.isServiceTypeSupported(k.type)&&(k=this.rule.getItem(p+"/"+k.name+"/"+k.type),q.push(k))}));b(q).then(f.hitch(this,function(k){k=c.filter(k,f.hitch(this,function(z){return z}));
r.resolve(k)}),f.hitch(this,function(k){console.error(k);r.reject(k)}))}),f.hitch(this,function(v){console.error(v);r.reject(v)}));return r},_searchServiceUrl:function(l,r){var p=new a;this._getSubItems(l).then(f.hitch(this,function(v){v&&0<v.length?(c.forEach(v,f.hitch(this,function(q){q.parent=r.id;this._addItem(q)})),p.resolve()):this._getItem(l).then(f.hitch(this,function(q){q&&(q.parent=r.id,this._addItem(q));p.resolve()}),f.hitch(this,function(q){p.reject(q)}))}),f.hitch(this,function(v){p.reject(v)}));
return p},_getRestInfo:function(l){var r=new a;this.rule.getRestInfo(l).then(f.hitch(this,function(p){this.domNode&&r.resolve(p)}),f.hitch(this,function(p){this.domNode&&r.reject(p)}));return r},_clear:function(){var l=this._store.query({parent:"root"});c.forEach(l,f.hitch(this,function(r){r&&"root"!==r.id&&this._store.remove(r.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(l){this._id++;l.id=this._id.toString();this._store.add(l);return l},_removeItem:function(l){this._store.remove(l)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var l=this._getRootItem();l=new h({data:[l],getChildren:function(r){return this.query({parent:r.id})}});this._store=new g(l);l=new e({store:this._store,query:{id:"root"},mayHaveChildren:f.hitch(this,this._mayHaveChildren)});this.tree=new n({multiple:this.multiple,model:l,showRoot:!1,style:{width:"100%"},isLeafItem:f.hitch(this,this.isLeafItem),onOpen:f.hitch(this,function(r,p){this._onTreeOpen(r,p);
this.emit("tree-open",r,p)}),onClick:f.hitch(this,function(r,p,v){this._onTreeClick(r,p,v);this.emit("tree-click",r,p,v)}),getIconStyle:f.hitch(this,function(r,p){var v=null;if(!r)return null;var q={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},k=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),z=this._getIconImageName(r,p);z||("folder"===r.type?z=p?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(r.type)&&
(z=p?"folder_open_default.png":"folder_close_default.png"));z&&(q.backgroundImage="url("+k+"/css/images/"+z+")",v=q);return v})});d.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(l,r){var p="";"function"===typeof this.rule.getIconImageName&&(p=this.rule.getIconImageName(l,r));return p},_mayHaveChildren:function(l){return"root"===l.type?!0:!this.isLeafItem(l)},_onTreeOpen:function(l,r){"root"===l.id||0<this._store.query({parent:l.id}).length||
l.checking||l.checked||(l.checking=!0,this._getSubItems(l.url).then(f.hitch(this,function(p){c.forEach(p,f.hitch(this,function(v){v.parent=l.id;this._addItem(v)}));l.checking=!1;l.checked=!0}),f.hitch(this,function(p){console.error(p);l.checking=!1;l.checked=!0})))},_onTreeClick:function(l,r,p){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred",
"jimu/utils","jimu/ServiceBrowserRule"],function(y,D,x,A,w){var f={combineRules:function(d){var c=new w;D.forEach(d,function(a){D.forEach(a.leafTypes,function(b){0>c.leafTypes.indexOf(b)&&c.leafTypes.push(b)});D.forEach(a.serviceTypes,function(b){0>c.serviceTypes.indexOf(b)&&c.serviceTypes.push(b)})});c.getMatchedRule=function(a){var b=null;D.some(d,function(h){return h.isUrlContainsServiceType(a)?(b=h,!0):!1});return b};c.getItem=function(a){var b=null;return b=(b=c.getMatchedRule(a))?b.getItem(a):
c.defaultGetItem(a)};c.getSubItemUrls=function(a){var b=null;return b=(b=c.getMatchedRule(a))?b.getSubItemUrls(a):c.defaultGetSubItemUrls(a)};c.getIconImageName=function(a,b){var h="";if(a.url){var g=c.getMatchedRule(a.url);g&&"function"===typeof g.getIconImageName&&(h=g.getIconImageName(a,b))}return h};return c},getFeaturelayerServiceBrowserRule:function(d,c,a){d=y.clone(d);var b=["point","polyline","polygon"];y.isArrayLike(d)&&0<d.length?(d=D.filter(d,function(h){return 0<=b.indexOf(h)}),0===d.length&&
(d=b)):d=b;return f._getFeaturelayerServiceBrowserRule(d,c,a)},_getFeaturelayerServiceBrowserRule:function(d,c,a){return new w({types:d,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(b){var h=new x;this.isUrlEndWithServiceType(b,this.serviceTypes)?h=this.defaultGetItem(b):this.getRestInfo(b).then(y.hitch(this,function(g){g=this._getItemByLayerDefinition(b,g);h.resolve(g)}),
y.hitch(this,function(g){h.reject(g)}));return h},getSubItemUrls:function(b){var h=new x;return h=this.isUrlEndWithServiceType(b)?this._getSubUrlsByServiceUrl(b):this._getSubUrlsByGroupUrl(b)},getIconImageName:function(b,h){var g="";"MapServer"===b.type||"FeatureServer"===b.type?g=h?"mapserver_open.png":"mapserver_close.png":b.type===this._groupLayerType?g=h?"group_layer2.png":"group_layer1.png":b.type===this._featureLayerType?(b=A.getTypeByGeometryType(b.definition&&b.definition.geometryType),"point"===
b?g="point_layer1.png":"polyline"===b?g="line_layer1.png":"polygon"===b&&(g="polygon_layer1.png")):b.type===this._tableType?g="table.png":"root"===b.type&&this._currentUrl&&D.some(this.serviceTypes,y.hitch(this,function(e){return A.isStringEndWith(this._currentUrl,"/"+e)}))&&(g=h?"mapserver_open.png":"mapserver_close.png");return g},_getSubUrlsByServiceUrl:function(b){var h=new x;this.getRestInfo(b).then(y.hitch(this,function(g){var e=[];D.forEach(g.layers,y.hitch(this,function(m){0<=m.parentLayerId||
e.push(b+"/"+m.id)}));a&&D.forEach(g.tables,y.hitch(this,function(m){0<=m.parentLayerId||e.push(b+"/"+m.id)}));h.resolve(e)}),y.hitch(this,function(g){h.reject(g)}));return h},_getSubUrlsByGroupUrl:function(b){var h=new x;this.getRestInfo(b).then(y.hitch(this,function(g){var e=[];if(g.type===this._groupLayerType){var m=this._getServiceUrlByLayerUrl(b);e=D.map(g.subLayers||[],y.hitch(this,function(n){return m+"/"+n.id}))}h.resolve(e)}),y.hitch(this,function(g){h.reject(g)}));return h},_getItemByLayerDefinition:function(b,
h){var g=null,e=h.type;if(e===this._groupLayerType)g={name:h.name,type:e,url:b,definition:h};else if(e===this._featureLayerType||e===this._tableType){var m=!1;e===this._featureLayerType?m=this._validateEsriGeometryType(h.geometryType):e===this._tableType&&(m=!0);m&&(m=!1,(m=c?A.isFeaturelayerUrlSupportQuery(b,h.capabilities):!0)&&(g={name:h.name,type:e,url:b,definition:h}))}return g},_validateEsriGeometryType:function(b){b=A.getTypeByGeometryType(b);return 0<=this.types.indexOf(b)},_getServiceUrlByLayerUrl:function(b){for(var h=
"",g=0;g<this.serviceTypes.length;g++){var e=this.serviceTypes[g].toLowerCase(),m=b.toLowerCase().lastIndexOf("/"+e+"/");if(0<=m){h=b.slice(0,m+e.length+1);break}}return h}})},getGeocodeServiceBrowserRule:function(){return new w({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new w({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(d){var c=new x;this.isUrlEndWithServiceType(d)?c=this.defaultGetItem(d):this.getRestInfo(d).then(y.hitch(this,
function(a){c.resolve({name:a.displayName||a.name,type:"GPTask",url:d,definition:a})}),y.hitch(this,function(a){c.reject(a)}));return c},getSubItemUrls:function(d){var c=new x;this.isUrlEndWithServiceType(d)?this.getRestInfo(d).then(y.hitch(this,function(a){a=D.map(a.tasks||[],y.hitch(this,function(b){return d+"/"+b}));c.resolve(a)}),y.hitch(this,function(a){c.reject(a)})):c.resolve([]);return c},getIconImageName:function(d,c){c="";"GPServer"===d.type?c="toolbox.png":"GPTask"===d.type&&(c="tool.png");
return c}})},getImageServiceBrowserRule:function(d){return new w({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(c){var a=new x;this.isUrlEndWithServiceType(c)?this.defaultGetItem(c).then(y.hitch(this,function(b){d?A.isImageServiceSupportQuery(b.definition.capabilities)?a.resolve(b):a.resolve(null):a.resolve(b)}),y.hitch(this,function(b){a.reject(b)})):a.resolve(null);return a},getIconImageName:function(c,a){a="";"ImageServer"===c.type&&(a="image_layer.png");return a}})},
getQueryableServiceBrowserRule:function(){var d=f.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),c=f.getImageServiceBrowserRule(!0);return f.combineRules([d,c])}};return f})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(y,D,x,A,w,f,d){return y([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(c){D.mixin(this,c);D.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);D.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(c){return this.defaultGetItem(c)},getSubItemUrls:function(c){return this.defaultGetSubItemUrls(c)},getIconImageName:function(c,a){return""},defaultGetItem:function(c){var a=new A;c=c.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(c)){var b=c.split("/"),h=b[b.length-1],g=b[b.length-2];this.getRestInfo(c).then(D.hitch(this,function(e){a.resolve({name:g,type:h,url:c,definition:e})}),D.hitch(this,function(e){console.error(e);
a.reject({errorCode:"NETWORK_ERROR",error:e})}))}else a.resolve(null);return a},defaultGetSubItemUrls:function(c){c=new A;c.resolve([]);return c},getRestInfo:function(c){var a=new A;c=c.replace(/\/*$/g,"");var b=this._restInfoCache[c];if(b)a.resolve(b);else{b={url:c,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4};var h=d.findCredential(c);h&&h.token&&(b.content.token=h.token);f(b).then(D.hitch(this,function(g){this._restInfoCache[c]=g;a.resolve(g)}),function(g){a.reject(g)})}return a},
isServiceTypeSupported:function(c){c=c.toLowerCase();return x.some(this.serviceTypes,D.hitch(this,function(a){return a.toLowerCase()===c}))},isUrlEndWithServiceType:function(c){return x.some(this.serviceTypes,D.hitch(this,function(a){return w.isStringEndWith(c,"/"+a)}))},isUrlContainsServiceType:function(c){c=c.toLowerCase();return x.some(this.serviceTypes,D.hitch(this,function(a){a=a.toLowerCase();return 0<=c.indexOf("/"+a)}))}})})},"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare",
"./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(y,D,x){return y([D],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(A){return new x(A)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n){return y([D,x,A,f],{templateString:w,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=b.mixin({},window.jimuNls.common);this.nls=b.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
c.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(l){var r=new d;(this.url=l)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),r=this._onBtnValidateClick()):r.reject();return r},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?a.forEach(this._examples,b.hitch(this,function(r){c.create("div",{innerHTML:r,
"class":"example-url"},this.exampleTd)})):c.setStyle(this.exampleTr,"display","none");var l={multiple:this.multiple,_onTreeClick:b.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(l);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(g.after(this.urlInput,"validator",b.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(h(this.serviceBrowser,"error",b.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(l){},_validateUrl:function(l){l=l.replace(/\/*$/g,"");if((l=l.match(/\/rest\/services\/*(.*)/gi))&&0<l.length)if(l=l[0].replace(/\/rest\/services\/*/,"")){var r=l.split("/");if(1===r.length)return!0;if(2===r.length)return this.serviceBrowser.isServiceTypeSupported(r[1]);if(3<=r.length)return l=this.serviceBrowser.isServiceTypeSupported(r[1]),r=this.serviceBrowser.isServiceTypeSupported(r[2]),l||r}else return!0;else return!1},_afterUrlValidate:function(l){l&&
(l=this.urlInput.get("value"),l=this._validateUrl(l));l?c.removeClass(this.btnValidate,"jimu-state-disabled"):c.addClass(this.btnValidate,"jimu-state-disabled");return l},_onServiceBrowserError:function(l){this._showErrorMessage(l)},_showErrorMessage:function(l){l&&"string"===typeof l?(this.errorNode.innerHTML=l,c.addClass(this.errorSection,"visible")):c.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";c.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var l=new d;if(this.urlInput.validate()){var r=this.urlInput.get("value");this.serviceBrowser.setUrl(r).then(b.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();l.resolve()}),b.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();l.reject()}));this.emit("validate-click")}else l.reject();return l},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):
c.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var l=this.getSelectedItems();0<l.length&&this.emit("ok",l)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(y,D,x,A,w){var f=D.NodeList,d={},c=0,a=function(g){var e=w.get(g,"data-dojo-dataid");e||(e="pid"+c++,w.set(g,"data-dojo-dataid",e));return e},
b=y._nodeData=function(g,e,m){var n=a(g),l;d[n]||(d[n]={});if(1==arguments.length)return d[n];"string"==typeof e?2<arguments.length?d[n][e]=m:l=d[n][e]:l=x.mixin(d[n],e);return l},h=y._removeNodeData=function(g,e){g=a(g);d[g]&&(e?delete d[g][e]:delete d[g])};f._gcNodeData=y._gcNodeData=function(){var g=D("[data-dojo-dataid]").map(a),e;for(e in d)0>A.indexOf(g,e)&&delete d[e]};x.extend(f,{data:f._adaptWithCondition(b,function(g){return 0===g.length||1==g.length&&"string"==typeof g[0]}),removeData:f._adaptAsForEach(h)});
return f})},"widgets/RelatedTableCharts/setting/LocatorSourceSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/portalUrlUtils jimu/dijit/Message jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter esri/request esri/lang ../searchSourceUtils jimu/utils dojo/text!./LocatorSourceSetting.html jimu/dijit/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox".split(" "),
function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l,r,p,v,q){return y([d,c,a,w],{baseClass:"jimu-widget-RelatedTableCharts-locator-source-setting",tr:null,nls:null,config:null,singleLineFieldName:null,templateString:v,_suggestible:!1,_locatorDefinition:null,_esriLocatorRegExp:/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,serviceChooserContent:null,geocoderPopup:null,_clickSet:!1,postCreate:function(){this.inherited(arguments);this.exampleHint=this.nls.locatorExample+
": http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer";this.own(A(this.setButtonNode,"click",D.hitch(this,this._onSetLocatorUrlClick)));this.own(A(this.locatorName,"Blur",D.hitch(this,this._onLocatorNameBlur)));this.own(A(this.placeholder,"Blur",D.hitch(this,this._onPlaceholderBlur)));this.own(A(this.countryCode,"Blur",D.hitch(this,this._onCountryCodeBlur)));this.searchInCurrentMapExtent=new q({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);
this.enableLocalSearch=new q({checked:!1,label:this.nls.enableLocalSearch},this.enableLocalSearch);this._processlocalSearchTable(!1);this.own(A(this.enableLocalSearch,"change",D.hitch(this,function(){this._processlocalSearchTable(this.enableLocalSearch.getValue())})));x.setStyle(this.enableLocalSearch.domNode,"display","none");this._setMessageNodeContent(this.exampleHint);this.config=this.config?this.config:{};this.setConfig(this.config)},setRelatedTr:function(k){this.tr=k},getRelatedTr:function(){return this.tr},
setDefinition:function(k){this._locatorDefinition=k||{}},getDefinition:function(){return this._locatorDefinition},setConfig:function(k){if("[object Object]"===Object.prototype.toString.call(k)){var z=k.url;z&&(this.config=k,this.shelter.show(this.loading),this._locatorDefinition.url!==z?this._getDefinitionFromRemote(z).then(D.hitch(this,function(B){z&&B&&"error"!==B.type?(this._locatorDefinition=B,this._locatorDefinition.url=z,this._setSourceItems(),this._setMessageNodeContent(this.exampleHint)):
z&&B&&"error"===B.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(l.substitute({URL:B.url},D.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setSourceItems(),this._setMessageNodeContent(this.exampleHint),this.shelter.hide()))}},isValidConfig:function(){var k=this.getConfig();return k.url&&k.name&&k.singleLineFieldName?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.locatorUrl);this._showValidationErrorTip(this.locatorName)},
getConfig:function(){return{url:this.locatorUrl.get("value"),name:p.stripHTML(this.locatorName.get("value")),singleLineFieldName:this.singleLineFieldName,placeholder:p.stripHTML(this.placeholder.get("value")),countryCode:p.stripHTML(this.countryCode.get("value")),zoomScale:this.zoomScale.get("value")||5E4,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,enableLocalSearch:this.enableLocalSearch.getValue(),
localSearchMinScale:this.localSearchMinScale.get("value"),localSearchDistance:this.localSearchDistance.get("value"),type:"locator"}},_onLocatorNameBlur:function(){this.locatorName.set("value",p.stripHTML(this.locatorName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",p.stripHTML(this.placeholder.get("value")))},_onCountryCodeBlur:function(){this.countryCode.set("value",p.stripHTML(this.countryCode.get("value")))},_disableSourceItems:function(){this.locatorName.set("disabled",
!0);this.placeholder.set("disabled",!0);this.countryCode.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.locatorName.set("disabled",!1);this.placeholder.set("disabled",!1);this.countryCode.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){var k=this.config;k.url&&(this.locatorUrl.set("value",
k.url),this._processCountryCodeRow(k.url));k.name&&this.locatorName.set("value",p.stripHTML(k.name));k.singleLineFieldName&&(this.singleLineFieldName=k.singleLineFieldName);k.placeholder&&this.placeholder.set("value",p.stripHTML(k.placeholder));k.countryCode&&this.countryCode.set("value",p.stripHTML(k.countryCode));"capabilities"in this._locatorDefinition?(x.setStyle(this.enableLocalSearch.domNode,"display",""),this._processlocalSearchTable(k.enableLocalSearch),this.enableLocalSearch.setValue(k.enableLocalSearch),
k.localSearchMinScale&&k.enableLocalSearch&&this.localSearchMinScale.set("value",k.localSearchMinScale),k.localSearchDistance&&k.enableLocalSearch&&this.localSearchDistance.set("value",k.localSearchDistance)):(this.enableLocalSearch.setValue(!1),x.setStyle(this.enableLocalSearch.domNode,"display","none"));(this._suggestible=this._locatorDefinition&&this._locatorDefinition.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips();
this.searchInCurrentMapExtent.setValue(!!k.searchInCurrentMapExtent);this.zoomScale.set("value",k.zoomScale||5E4);this.maxSuggestions.set("value",k.maxSuggestions||6);this.maxResults.set("value",k.maxResults||6);this._enableSourceItems()},_isEsriLocator:function(k){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(k)},_getDefinitionFromRemote:function(k){var z=new f;if(this._isEsriLocator(k))z.resolve({singleLineAddressField:{name:"SingleLine",type:"esriFieldTypeString",alias:"Single Line Input",
required:!1,length:200,localizedNames:{},recognizedNames:{}},capabilities:"Geocode,ReverseGeocode,Suggest"});else{var B=n({url:k,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(B);B.then(D.hitch(this,function(H){z.resolve(H)}),D.hitch(this,function(H){console.error(H);z.resolve({type:"error",url:this._getRequestUrl(k)})}))}return z.promise},_setMessageNodeContent:function(k,z){x.empty(this.messageNode);k.nodeType||(k=x.toDom(k));x.place(k,this.messageNode);z?x.addClass(this.messageNode,
"esriCTErrorMessage"):x.removeClass(this.messageNode,"esriCTErrorMessage")},_getRequestUrl:function(k){var z=window.location.protocol;return"http:"===z?b.setHttpProtocol(k):"https:"===z?b.setHttpsProtocol(k):k},_onSetLocatorUrlClick:function(){this._clickSet=!0;this._openServiceChooser()},_openLocatorChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){this.serviceChooserContent=new g({url:this.locatorUrl.get("value")||""});this.shelterObj=new m({hidden:!0});
this.geocoderPopup=new e({titleLabel:this.nls.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,container:window.jimuConfig.layoutId,width:640});this.shelterObj.placeAt(this.geocoderPopup.domNode);x.setStyle(this.serviceChooserContent.domNode,"width","580px");x.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(A(this.serviceChooserContent,"validate-click",D.hitch(this,function(){x.removeClass(this.serviceChooserContent.domNode,
"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(A(this.serviceChooserContent,"ok",D.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(A(this.serviceChooserContent,"cancel",D.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(k){k&&k[0]&&k[0].url&&this.domNode&&(this.shelter.show(this.loading),n({url:k[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(D.hitch(this,function(z){this.shelter.hide();z&&
z.singleLineAddressField&&z.singleLineAddressField.name?(this._enableSourceItems(),this.locatorUrl.set("value",k[0].url),this.locatorName.get("value")||this.locatorName.set("value",r.getGeocoderName(k[0].url)),"capabilities"in z?(x.setStyle(this.enableLocalSearch.domNode,"display",""),this._isEsriLocator(k[0].url)?this.enableLocalSearch.setValue(!0):this.enableLocalSearch.setValue(!1)):(this.enableLocalSearch.setValue(!1),x.setStyle(this.enableLocalSearch.domNode,"display","none")),this.singleLineFieldName=
z.singleLineAddressField.name,this._processCountryCodeRow(k[0].url),this._locatorDefinition=z,this._locatorDefinition.url=k[0].url,(this._suggestible=z.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips(),this._clickSet?this.emit("reselect-locator-url-ok",this.getConfig()):this.emit("select-locator-url-ok",this.getConfig()),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),this._setMessageNodeContent(this.exampleHint)):
new h({message:this.nls.locatorWarning})}),D.hitch(this,function(z){console.error(z);this.shelter.hide();new h({message:l.substitute({URL:this._getRequestUrl(k[0].url)},D.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_processlocalSearchTable:function(k){k?(x.removeClass(this.minScaleNode,"esriCTHidden"),x.removeClass(this.radiusNode,"esriCTHidden"),this.emit("enable-local-search")):
(x.addClass(this.minScaleNode,"esriCTHidden"),x.addClass(this.radiusNode,"esriCTHidden"),this.emit("disable-local-search"))},_processCountryCodeRow:function(k){this._isEsriLocator(k)?(this.countryCode.set("value",""),x.removeClass(this.countryCodeRow,"hide-country-code-row")):x.addClass(this.countryCodeRow,"hide-country-code-row")},_showSuggestibleTips:function(){x.removeClass(this.tipsNode,"esriCTHidden");x.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){x.addClass(this.tipsNode,
"esriCTHidden");x.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(k){if(!k.validate()&&k.domNode&&k.focusNode){var z=k.get("disabled");z&&k.set("disabled",!1);k.focusNode.focus();setTimeout(D.hitch(this,function(){k.focusNode.blur();z&&k.set("disabled",!0);k=null}),100)}},validateAllNumberInputs:function(){var k={isInputValid:!0};if(this.maxSuggestions&&!this.maxSuggestions.isInRange()||!this.maxSuggestions.isValid())return k.isInputValid=!1,k.validationMessage=
this.nls.maxSuggestionErrorMessage,k;if(this.maxResults&&!this.maxResults.isInRange()||!this.maxResults.isValid())return k.isInputValid=!1,k.validationMessage=this.nls.maxResultsErrorMessage,k;if(this.zoomScale&&!this.zoomScale.isInRange()||!this.zoomScale.isValid())return k.isInputValid=!1,k.validationMessage=this.nls.zoomScaleErrorMessage,k;if(this.localSearchMinScale&&!this.localSearchMinScale.isInRange()||!this.localSearchMinScale.isValid())return k.isInputValid=!1,k.validationMessage=this.nls.minScaleErrorMessage,
k;if(this.localSearchDistance&&!this.localSearchDistance.isInRange()||!this.localSearchDistance.isValid())k.isInputValid=!1,k.validationMessage=this.nls.radiusErrorMessage;return k}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(y,D,x){return y([D],{baseClass:"jimu-geocode-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder",
"http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(A){return new x(A)}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(y,D,x,A,w){return y([D],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=w.getGeocodeServiceBrowserRule()},
getSelectedItems:function(){var f=this.inherited(arguments);return f=A.map(f,x.hitch(this,function(d){return{name:d.name,url:d.url}}))}})})},"widgets/RelatedTableCharts/searchSourceUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils esri/lang esri/request".split(" "),function(y,D,x,A,w,f,d,c){return{map:null,layerInfosObj:null,appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,
setMap:function(a){this.map=a},setLayerInfosObj:function(a){this.layerInfosObj=a},setAppConfig:function(a){this.appConfig=a},getConfigInfo:function(a){if(a&&a.sources&&0<a.sources.length){var b=null;return this.searchLayer(this.map)&&a.upgradeFromGeocoder?(b=this.map.itemInfo.itemData.applicationProperties.viewing.search,b=D.map(b.layers,y.hitch(this,function(h,g){g.hintText=h;return this._getQueryTypeGeocoder(g)},b.hintText)),w(b).then(y.hitch(this,function(h){a.sources=[].concat(h).concat(a.sources);
return a}))):a}return A(this._getSoucesFromPortalAndWebmap()).then(y.hitch(this,function(h){return{allPlaceholder:"",showInfoWindowOnSelect:!0,sources:h}}))},_getSoucesFromPortalAndWebmap:function(){var a=[],b=null;this.searchLayer(this.map)&&(b=this.map.itemInfo.itemData.applicationProperties.viewing.search,D.forEach(b.layers,y.hitch(this,function(h,g){g.hintText=h;a.push(this._getQueryTypeGeocoder(g))},b.hintText)));return f.getPortalSelfInfo(this.appConfig.portalUrl).then(y.hitch(this,function(h){if((h=
h.helperServices&&h.helperServices.geocode)&&0<h.length)for(var g=0,e=h.length;g<e;g++){var m=h[g];m&&a.push(this._processSingleLine(m))}return w(a).then(y.hitch(this,function(n){for(var l=[],r=0;r<n.length;r++){var p=n[r];p&&(p&&"query"===p.type?l.push(p):(p={name:p.name||this._getGeocodeName(p.url),url:p.url,singleLineFieldName:p.singleLineFieldName,placeholder:p.placeholder||p.name||this._getGeocodeName(p.url),maxResults:6,searchInCurrentMapExtent:!1,type:"locator"},p.enableLocalSearch=this._isEsriLocator(p.url),
p.localSearchMinScale=3E5,p.localSearchDistance=5E4,l.push(p)))}return l}))}))},_getQueryTypeGeocoder:function(a){var b=this.map.getLayer(a.id),h=null,g=null,e=null;e=d.isDefined(a.subLayer)?a.id+"_"+a.subLayer:a.id;h=this.layerInfosObj.traversal(function(m){return m.id===e?(g=m,!0):!1});return b&&h&&g?(h=d.isDefined(a.subLayer)?g.url||b.url+"/"+a.subLayer:g.url||b.url,{name:g.title,layerId:e,url:h,placeholder:a.hintText,searchFields:[a.field.name],displayField:a.field.name,exactMatch:a.field.exactMatch||
!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(a){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(a)},_processSingleLine:function(a){if(a.singleLineFieldName)return a;if(this._isEsriLocator(a.url))return a.singleLineFieldName="SingleLine",a;var b=new x;c({url:a.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(y.hitch(this,function(h){h.singleLineAddressField&&h.singleLineAddressField.name?(a.singleLineFieldName=
h.singleLineAddressField.name,b.resolve(a)):(console.warn(a.url+"has no singleLineFieldName"),b.resolve(null))}),y.hitch(this,function(h){console.error(h);b.resolve(null)}));return b.promise},_getGeocodeName:function(a){if("string"!==typeof a)return"geocoder";a=a.split("/");return a[a.length-2]||"geocoder"},getGeocoderName:function(a){return this._getGeocodeName(a)},hasAppSearchInfo:function(a){return a.itemInfo&&a.itemInfo.itemData&&a.itemInfo.itemData.applicationProperties&&a.itemInfo.itemData.applicationProperties.viewing&&
a.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(a){if(!this.hasAppSearchInfo(a))return!1;a=a.itemInfo.itemData.applicationProperties.viewing.search;return a.enabled&&0!==a.layers.length?!0:!1}}})},"widgets/RelatedTableCharts/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/RelatedTableCharts/setting/LayerChooser.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerSelectorDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTLayerChooserContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.layerChooser.selectPolygonLayerLabel}"\x3e\r\n                ${nls.layerChooser.selectPolygonLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"itemSelectDiv"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                    ${nls.layerChooser.selectPolygonLayerHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLayerChooserContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.layerChooser.selectRelatedTableLayerLabel}"\x3e\r\n                ${nls.layerChooser.selectRelatedTableLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                \x3cselect data-dojo-attach-point\x3d"relationshipSelect" style\x3d"width: 232px;" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                    ${nls.layerChooser.selectRelatedTableLayerHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 jimu-state-disabled"\r\n                data-dojo-attach-point\x3d"okButton" tabindex\x3d"0"\x3e\r\n                ${nls.ok}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"cancelButton" tabindex\x3d"0"\x3e\r\n                ${nls.cancel}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable role\x3d"listbox" aria-haspopup\x3d"true" data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.customSelectLayer}" aria-label\x3d"${nls.customSelectLayer}"\x3e\r\n    \x3ccaption class\x3d"screen-readers-only-no-position"\x3e${nls.customSelectLayer}\x3c/caption\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/ChartSetting.html":'\x3cdiv class\x3d"esriCTFullHeight"\x3e\r\n    \x3c!-- Settings tab --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"settingsTabNode" class\x3d"esriCTFullHeight"\x3e\r\n        \x3cdiv class\x3d"esriCTChartSettingsNode"\x3e\r\n            \x3cdiv class\x3d"esriCTmainContainer"\x3e\r\n                \x3c!-- Section Title --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv class\x3d"esriCTChartTitleDiv esriCTChartTitleDivContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.sectionTitle}"\x3e\r\n                            ${nls.ChartSetting.sectionTitle}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                            \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"sectionTitleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                                required\x3d"true" trim\x3d"true" data-dojo-attach-event\x3d"change:_onSectionTitleChanged"\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.sectionTitleHintText}"\x3e\r\n                                ${nls.ChartSetting.sectionTitleHintText}\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Chart Title --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv class\x3d"esriCTChartTitleDiv esriCTChartTitleDivContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.chartTitle}"\x3e\r\n                            ${nls.ChartSetting.chartTitle}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                            \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"chartTitleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.chartTitleHintText}"\x3e\r\n                                ${nls.ChartSetting.chartTitleHintText}\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"titleFieldSelectorDiv"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Chart Description --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel esriCTChartDescriptionLabel" title\x3d"${nls.ChartSetting.chartDescription}"\x3e\r\n                            ${nls.ChartSetting.chartDescription}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput editorDescriptionContainer"\x3e\r\n                            \x3ctextarea class\x3d"esriCTChartDescription" data-dojo-attach-point\x3d"chartDescriptionInput" rows\x3d"5"\x3e\x3c/textarea\x3e\r\n                            \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.chartDescriptionHintText}"\x3e\r\n                                ${nls.ChartSetting.chartDescriptionHintText}\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"descriptionFieldSelectorDiv"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Select chart type--\x3e\r\n                \x3cdiv class\x3d"esriCTChartChartTypeDiv esriCTFieldRow"\x3e\r\n                    \x3cdiv class\x3d"esriCTChartSettingLabel" data-dojo-attach-point\x3d"chartTypeLabelNode" title\x3d"${nls.ChartSetting.chartType}"\x3e\r\n                        ${nls.ChartSetting.chartType}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldInput" style\x3d"width: 80%;"\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" checked\x3d"checked" value\x3d"rdoBarChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                name\x3d"chart" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoBarChart" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoBarChart" data-dojo-attach-point\x3d"barLabel" title\x3d"${nls.ChartSetting.barChart}"\x3e\r\n                                ${nls.ChartSetting.barChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoPieChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"chart"\r\n                                data-dojo-attach-point\x3d"rdoPieChart" data-dojo-attach-event\x3d"change:_onChartTypeChanged" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoPieChart" data-dojo-attach-point\x3d"pieLabel" title\x3d"${nls.ChartSetting.pieChart}"\x3e\r\n                                ${nls.ChartSetting.pieChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoPolarChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"chart"\r\n                                data-dojo-attach-point\x3d"rdoPolarChart" data-dojo-attach-event\x3d"change:_onChartTypeChanged" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoPolarChart" data-dojo-attach-point\x3d"polarLabel" title\x3d"${nls.ChartSetting.polarChart}"\x3e\r\n                                ${nls.ChartSetting.polarChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3c!-- Line chart --\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoLineChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"chart"\r\n                                data-dojo-attach-point\x3d"rdoLineChart" data-dojo-attach-event\x3d"change:_onChartTypeChanged" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoLineChart" data-dojo-attach-point\x3d"polarLabel" title\x3d"${nls.ChartSetting.lineChart}"\x3e\r\n                                ${nls.ChartSetting.lineChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"labelSection"\x3e\r\n                    \x3c!-- Data Series Field - Bar, Pie \x26 Polar chart --\x3e\r\n                    \x3cdiv class\x3d"esriCTControlWidth esriCTLeftAlign esriCTFieldRow"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.dataSeriesField}" data-dojo-attach-point\x3d"dataSeriesFieldLabel"\x3e\r\n                                ${nls.ChartSetting.dataSeriesField}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv data-dojo-attach-point\x3d"dataSeriesFieldDropdownParentContainer"\x3e\r\n                                    \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"dataSeriesFieldDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                    \x3c/select\x3e\r\n                                \x3c/div\x3e\r\n                                \x3c!-- For line chart --\x3e\r\n                                \x3cdiv class\x3d"esriCTHidden" data-dojo-attach-point\x3d"dataSeriesFieldPickerLineChart"\x3e\r\n                                    \x3cdiv class\x3d"esriCTlineChartValueFieldsContainer" data-dojo-attach-point\x3d"lineChartValueFieldsContainer"\x3e\r\n                                        \x3cdiv class\x3d"esriCTlineChartValueFields" data-dojo-attach-point\x3d"lineChartValueFieldsTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                                            data-dojo-props\x3d"required:true,trim:true,disabled:true"\x3e\x3c/div\x3e\r\n                                    \x3c/div\x3e\r\n                                    \x3cdiv class\x3d"esriCTlineChartValueFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"lineChartFieldsSelectorNode"\x3e\x3c/div\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- Label Field - Bar, Pie \x26 Polar chart --\x3e\r\n                    \x3cdiv class\x3d"esriCTControlWidth esriCTLeftAlign esriCTFieldRow esriCTChartChartTypeDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.labelField}" data-dojo-attach-point\x3d"labelSeriesField"\x3e\r\n                                ${nls.ChartSetting.labelField}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3c!-- Bar, Pie \x26 Polar chart label dropdown  --\x3e\r\n                                \x3cdiv class\x3d"esriCTLabelSeriesFieldDropdown" data-dojo-attach-point\x3d"labelSeriesFieldDropdownContainer"\x3e\r\n                                    \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"labelSeriesFieldDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                    \x3c/select\x3e\r\n                                \x3c/div\x3e\r\n                                \x3c!-- Line chart value dropdown --\x3e\r\n                                \x3cdiv class\x3d"esriCTLineLabelSeriesFieldDropdown esriCTHidden" data-dojo-attach-point\x3d"lineValueSeriesFieldDropdownContainer"\x3e\r\n                                    \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"lineSequenceSeriesFieldDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                    \x3c/select\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n\r\n                \x3c/div\x3e\r\n                \x3c!-- Chart Color --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d" ${nls.ChartSetting.chartColor}"\x3e\r\n                            ${nls.ChartSetting.chartColor}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartColorMargin esriCTSingleColorContainer"\x3e\r\n                                \x3cdiv class\x3d"jimu-trailing-margin2 esriCTLeftAlign esriCTChartColorWidth"\x3e\r\n                                    \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" checked\x3d"checked" value\x3d"rdoSingleColor" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                        name\x3d"ChartColor" data-dojo-attach-point\x3d"rdoSingleColor" /\x3e\r\n                                    \x3clabel class\x3d"esriCTChartColorEllipsis esriCTCursorPointer" for\x3d"rdoSingleColor" title\x3d"${nls.ChartSetting.singleColor}"\x3e\r\n                                        ${nls.ChartSetting.singleColor}\x3c/label\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTColorPicker" data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPicker"\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTChartColorMargin esriCTChartColorHeight"\x3e\r\n                                \x3cdiv class\x3d"jimu-trailing-margin2 esriCTLeftAlign esriCTChartColorWidth esriCTColorByThemeContainer"\x3e\r\n                                    \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoColorByTheme" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"ChartColor"\r\n                                        data-dojo-attach-point\x3d"rdoColorByTheme" data-dojo-attach-event\x3d"change:_onChartColorChanged"\r\n                                    /\x3e\r\n                                    \x3clabel class\x3d"esriCTChartColorEllipsis esriCTCursorPointer" for\x3d"rdoColorByTheme" title\x3d"${nls.ChartSetting.colorByTheme}"\x3e\r\n                                        ${nls.ChartSetting.colorByTheme}\x3c/label\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTThemeSelectorDiv" data-dojo-attach-point\x3d"themeSelectorDiv"\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTChartColorMargin esriCTHidden" data-dojo-attach-point\x3d"colorByFieldContainer"\x3e\r\n                                \x3cdiv class\x3d"jimu-trailing-margin2 esriCTLeftAlign esriCTChartColorWidth"\x3e\r\n                                    \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoColorByFieldValue" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"ChartColor"\r\n                                        data-dojo-attach-point\x3d"rdoColorByFieldValue" data-dojo-attach-event\x3d"change:_onChartColorChanged"\r\n                                    /\x3e\r\n                                    \x3clabel class\x3d"esriCTChartColorEllipsis esriCTCursorPointer" for\x3d"rdoColorByFieldValue" title\x3d"${nls.ChartSetting.colorByFieldValue}"\x3e\r\n                                        ${nls.ChartSetting.colorByFieldValue}\x3c/label\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"colorByFieldValueDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                \x3c/select\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTColorByFieldContainer esriCTHidden" data-dojo-attach-point\x3d"colorByFieldTableContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTypeDiv"\x3e\r\n                            \x3cdiv data-dojo-attach-point\x3d"colorByFieldTablePanel"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"axisSection"\x3e\r\n                    \x3c!-- X-axis label --\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"xAxisArea"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTitleDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.xAxisTitle}"\x3e\r\n                                ${nls.ChartSetting.xAxisTitle}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"xAxisTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.xAxisHintText}"\x3e\r\n                                    ${nls.ChartSetting.xAxisHintText}\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"xAxisFieldSelectorDiv"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- Y-axis label --\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"yAxisArea"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTitleDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.yAxisTitle}"\x3e\r\n                                ${nls.ChartSetting.yAxisTitle}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"yAxisTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.yAxisHintText}"\x3e\r\n                                    ${nls.ChartSetting.yAxisHintText}\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"yAxisFieldSelectorDiv"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"polarChartSection" class\x3d"esriCTHidden esriCTPolarChartSection"\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTitleDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.polarChartPolygonFillLabel}"\x3e\r\n                                ${nls.ChartSetting.polarChartPolygonFillLabel}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv class\x3d"esriCTCheckBox" checked\x3d"true" data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"polarChartFillColor"\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTHint esriCTHintInline" title\x3d"${nls.ChartSetting.polarChartPolygonFillHintText}"\x3e\r\n                                    ${nls.ChartSetting.polarChartPolygonFillHintText}\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"polarChartFieldInfos"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.polarChartSelectFieldsHintText}"\x3e\r\n                        ${nls.ChartSetting.polarChartSelectFieldsHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTViewLayoutButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-event\x3d"onclick:_updatePreview"\r\n        data-dojo-attach-point\x3d"viewLayoutButton"\x3e\r\n        ${nls.ChartSetting.viewLayoutLabel}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/RelatedTableCharts/setting/ChartThemeSelector.html":'\x3cdiv style\x3d"width: 232px; position: relative;"\x3e\r\n    \x3cdiv class\x3d"esriCTselectedItemNode"  data-dojo-attach-event\x3d"onclick: _onDropDownClick"\x3e\r\n        \x3cdiv class\x3d"esriCTThemeItem"\x3e\r\n            \x3cdiv class\x3d"esriCTThemeChart" data-dojo-attach-point\x3d"selectedThemeChart"\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv  class\x3d"esriCTThemeName" data-dojo-attach-point\x3d"selectedThemeName"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropSelect jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\r\n        data-dojo-attach-event\x3d"onclick: _onDropDownClick"\x3e\r\n        \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTThemeChooserList" data-dojo-attach-point\x3d"themeChooseNode" style\x3d"display: block"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"themeList"\x3e\r\n            \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/FieldSelector.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"showFieldsButton" class\x3d"jimu-icon jimu-icon-add esriCTHover"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/RelatedTableCharts/ChartLayout.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTLayoutContent" tabindex\x3d"0" aria-labelledby\x3d"${id}title ${id}description"\x3e\r\n        \x3cdiv class\x3d"esriCTLabels"\x3e\r\n            \x3c!-- chart title --\x3e\r\n            \x3cdiv class\x3d"esriCTLayoutHeaderTitle" data-dojo-attach-point\x3d"layoutHeaderTitle" id\x3d"${id}title"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTChartContainer" data-dojo-attach-point\x3d"chartContainer"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLegendContainer" data-dojo-attach-point\x3d"legendContainer"\x3e\r\n            \x3cdiv class\x3d"esriCTLegendNode" data-dojo-attach-point\x3d"legendNode"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- chart description --\x3e\r\n        \x3cdiv class\x3d"esriCTChartDescription" data-dojo-attach-point\x3d"chartDescription" id\x3d"${id}description"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/RelatedTableCharts/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton" tabindex\x3d"0"\x3e\r\n                ${nls.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/GeneralSetting.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTmainContainer"\x3e\r\n        \x3cfieldset class\x3d"esriCTGeneralSettingFieldset"\x3e\r\n            \x3clegend class\x3d"esriCTGeneralSettingLegend" title\x3d"${nls.legendGeneralSettingText}"\x3e\r\n                ${nls.legendGeneralSettingText} \x3c/legend\x3e\r\n            \x3c!-- All components of general setting --\x3e\r\n            \x3cdiv class\x3d"esriCTGeneralSettingComponentsDiv"\x3e\r\n                \x3c!-- This part of html contains Label, Hint and icon for Graphic Location Symbol --\x3e\r\n                \x3cdiv class\x3d"esriCTGraphicLocationSymbolMainDiv"\x3e\r\n                    \x3cdiv class\x3d"esriCTLocationSymbolLabelMainDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTLocationSymbolLabel esriCTGeneralSettingLabel"\x3e\r\n                            ${nls.locationSymbolLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTLocationSymbolHint esriCTHint"\x3e\r\n                            ${nls.locationSymbolHintText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- End of esriCTLocationSymbolLabelMainDiv --\x3e\r\n                    \x3cdiv class\x3d"esriCTLocationSymbolIconDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTLocationSymbolIcon" data-dojo-attach-point\x3d"locationSymbolIconNode"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- End of esriCTLocationSymbolIconDiv --\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- End of esriCTGraphicLocationSymbolMainDiv --\x3e\r\n\r\n                \x3c!-- This part of html contains Label, Hint and textbox for refresh interval --\x3e\r\n                \x3cdiv class\x3d"esriCTRefreshIntervalMainDiv"\x3e\r\n                    \x3cdiv class\x3d"esriCTRefreshIntervalLabelMainDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTRefreshIntervalLabel esriCTGeneralSettingLabel"\x3e\r\n                            ${nls.refreshIntervalLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTRefreshIntervalHint esriCTHint"\x3e\r\n                            ${nls.refreshIntervalHintText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- End of esriCTRefreshIntervalLabelMainDiv --\x3e\r\n                    \x3cdiv class\x3d"esriCTRefreshIntervalTxtBxDiv"\x3e\r\n                        \x3cinput type\x3d"text" value\x3d"0"  data-dojo-attach-point\x3d"refreshIntervalTxtBx"\r\n                            data-dojo-type\x3d"dijit/form/NumberTextBox" trim\x3d"true" constraints\x3d"{min:0,max:1440}"\r\n                            data-dojo-attach-event\x3d"change:_onRefreshIntervalChanged" /\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- End of esriCTRefreshIntervalTxtBxDiv --\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- End of esriCTRefreshIntervalMainDiv --\x3e\r\n                \r\n                \x3c!-- Show location tool --\x3e\r\n                \x3cdiv class\x3d"esriCTShowLocationMainDiv"\x3e\r\n                    \x3cdiv class\x3d"esriCTShowLocationLabelMainDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTGeneralSettingLabel"\x3e\r\n                            ${nls.showToolToSelectLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint"\x3e\r\n                            ${nls.showToolToSelectHintText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTShowLocationChkBxDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTCheckBox" checked\x3d"false" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                                data-dojo-attach-point\x3d"setLocationCheckBoxNode"\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- End of general setting components --\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/SearchSourceSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Search source setting hint text --\x3e\r\n  \x3cdiv class\x3d"esriCTHint" style\x3d"width: 99%"\x3e\r\n    ${nls.searchSourceSetting.searchSourceSettingTitleHintText}\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTDropdownButton" role\x3d"button"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan\x3e ${nls.searchSourceSetting.addSearchSourceLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cul class\x3d"esriCTDropdownMenu" role\x3d"menu" data-dojo-attach-point\x3d"menuItemClickNode"\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"query"\x3e${nls.searchSourceSetting.featureLayerLabel}\x3c/li\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"locator"\x3e${nls.searchSourceSetting.geocoderLabel}\x3c/li\x3e\r\n    \x3c/ul\x3e\r\n  \x3c/div\x3e\r\n \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTSources" data-dojo-attach-point\x3d"searchSources"\x3e\r\n    \x3cdiv class\x3d"esriCTSourceList jimu-float-leading"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"sourceList" style\x3d"100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTSourceSetting jimu-float-trailing" data-dojo-attach-point\x3d"sourceSettingNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n     \x3c!--General setting: Label--\x3e\r\n    \x3cdiv class\x3d"esriCTlabel esriCTGeneralSettingLabelStyle"\x3e\r\n      ${nls.searchSourceSetting.generalSettingLabel}\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: All Place Holder Label--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.allPlaceholderLabel}"\x3e\r\n        ${nls.searchSourceSetting.allPlaceholderLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerField" style\x3d"width: 72%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"allPlaceholder" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n         \x3c!--General setting: All Place Holder Hint--\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e\r\n          ${nls.searchSourceSetting.allPlaceholderHintText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n     \x3c!--General setting: Checkbox--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont " data-dojo-attach-point\x3d"showInfoWindowOnSelectNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/RelatedTableCharts/setting/QuerySourceSetting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3c!--Select geocoder url --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.layerSource}"\x3e\r\n        ${nls.layerSource}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1"\r\n        data-dojo-attach-point\x3d"setSourceBtnClickNode"  title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint esriCTErrorMessage"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection"\x3e\r\n    \x3c!--Details section: Name --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.nameTitle}"\x3e\r\n        ${nls.nameTitle}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField "\x3e\r\n       \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n       data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: searchFields --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.searchFields}"\x3e\r\n        ${nls.searchFields}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTsearchFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: displayField --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.displayField}"\x3e\r\n        ${nls.displayField}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxSuggestions --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e${nls.searchLayerTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxResult --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: zoomScale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"zoomScaleTr"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.zoomScale}"\x3e\r\n        ${nls.zoomScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:50000"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: exactMatch --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section: loading shelter --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/RelatedTableCharts/setting/LocatorSourceSetting.html":'\x3cdiv\x3e\r\n  \x3c!--Select Locator URL --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.locatorUrl}"\x3e\r\n        ${nls.locatorUrl}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv title\x3d"${nls.set}" class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setButtonNode"  \x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Locator Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection" ata-dojo-attach-point\x3d"detailsSection"\x3e\r\n    \x3c!--Details section: locatorName --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.locatorName}"\x3e\r\n        ${nls.locatorName}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"locatorName"\r\n         placeHolder\x3d"${nls.locatorName}"\r\n        required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeholder"\r\n         placeHolder\x3d"${nls.placeholder}" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: country --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"countryCodeRow"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.countryCode}"\x3e\r\n          ${nls.countryCode}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n          \x3cdiv type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"countryCode"\r\n          placeHolder\x3d"${nls.countryCodeEg} USA,CHN" data-dojo-props\x3d\'style:{width:"97%"}\'\x3e\x3c/div\x3e\r\n          \x3ca class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"\r\n            style\x3d"line-height:30px;"\x3e${nls.questionMark}\x3c/a\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.countryCodeHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max suggestion --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.locatorTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.locatorTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max result --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: zoom Scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.zoomScale}"\x3e\r\n        ${nls.zoomScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:50000"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"enableLocalSearch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - minimum scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"minScaleNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.minScale}"\x3e\r\n        ${nls.minScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"localSearchMinScale" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:300000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.minScaleHint}"\x3e${nls.minScaleHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - radius --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"radiusNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.radius}"\x3e\r\n        ${nls.radius}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading" data-dojo-attach-point\x3d"localSearchDistance"\r\n        data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-props\x3d"constraints:{min:1},style:{width:\'75%\'},value:50000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint esriCTLocalSearchRadiusUnit"\x3e${nls.meters}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"radiusHintNode" title\x3d"${nls.radiusHint}"\x3e${nls.radiusHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: loading shelter --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:widgets/RelatedTableCharts/setting/Setting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"tabDiv" class\x3d"esriCTFullHeight"\x3e\r\n        \x3c!-- Chart Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTChartTabNode" data-dojo-attach-point\x3d"chartTabNode" class\x3d"esriCTFullHeight"\x3e\r\n            \x3cdiv style\x3d"height: 98%;"\x3e\r\n                \x3cdiv class\x3d"esriCTListContainer" data-dojo-attach-point\x3d"chartListContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTListHeader" style\x3d"overflow: hidden;"\x3e\r\n                        \x3cdiv class\x3d"jimu-float-leading"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"jimu-float-trailing"\x3e\r\n                            \x3cdiv class\x3d"add-with-icon" data-dojo-attach-event\x3d"onclick:_onAddNewClicked"\x3e\r\n                                \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n                                \x3cspan class\x3d"add-label"\x3e${nls.addNewLabel}\x3c/span\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTListContent"\x3e\r\n                        \x3cdiv class\x3d"esriCTListTable" data-dojo-attach-point\x3d"chartListPanel"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTChartSettingsContainer" data-dojo-attach-point\x3d"chartSettingsContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTFullHeight" data-dojo-attach-point\x3d"chartSettingsContainer"\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"loadingIndicator" data-dojo-type\x3d"jimu/dijit/LoadingShelter" hidden\x3d"true"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Search Source Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTChartTabNode" data-dojo-attach-point\x3d"searchSourceTabNode" class\x3d"esriCTFullHeight"\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- General Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTChartTabNode" data-dojo-attach-point\x3d"generalTabNode" class\x3d"esriCTFullHeight"\x3e\r\n            \x3cdiv class\x3d"esriCTFullHeight esriCTGeneralSettingsContainer" data-dojo-attach-point\x3d"generalSettingsContainer"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/css/style.css":".jimu-widget-RelatedTableCharts-layout .esriCTLabels {width: 100%; clear: both;}.jimu-widget-RelatedTableCharts-layout .esriCTLayoutHeaderTitle {font-weight: bold; text-align: center; margin: 5px 10px 0 10px; overflow-wrap: break-word;}.jimu-widget-RelatedTableCharts-layout .esriCTLayoutContent {width: calc(100% - 140px); border: 1px solid #d2dae2; margin: 20px auto;}.jimu-widget-RelatedTableCharts-layout .esriCTChartContainer {margin: 10px 50px; display: inline-block; direction: ltr;}.jimu-widget-RelatedTableCharts-layout .esriCTChartDescription {margin: 0 10px 10px 10px; word-break: break-word;}.jimu-widget-RelatedTableCharts-layout .esriCTLegendContainer {width: 100%; overflow-x: auto; margin-bottom: 10px; display: inline-block;}.jimu-widget-RelatedTableCharts-layout .esriCTLegendContainer .dijitCheckBox {margin: 1px;}.jimu-widget-RelatedTableCharts-layout .dojoxLegendNode td {padding: 6px 4px 6px 6px;}.jimu-widget-RelatedTableCharts-layout .dojoxLegendNode tr {display: table-cell;}.jimu-widget-RelatedTableCharts-layout .dojoxLegendNode {border-top: 1px solid #DDDDDD; margin: 0; padding: 0; width: 100%; white-space: nowrap;}.jimu-widget-RelatedTableCharts-setting .esriCTHint {margin: 5px 5px 10px 0; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-RelatedTableCharts-setting .esriCTHintInline {line-height: 24px;}.esriCTHidden {display: none;}.esriCTFullHeight {height: 100%;}.jimu-widget-RelatedTableCharts-setting .esriCTListContainer {width: 270px; height: 100%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTHover {cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTListContent {height: calc(100% - 70px); width: 100%; top: 10px; bottom: 5px;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingsContainer {overflow: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTViewLayoutButton {float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTChartSettingsContainer {width: calc( 100% - 300px); float: right;}.jimu-widget-RelatedTableCharts-setting .esriCTLayoutContainer {height: calc(100% - 40px); width: 100%; overflow: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTChartTabNode {margin-top: 20px; height: 92%;}.jimu-widget-RelatedTableCharts-setting .jimu-viewstack {height: calc(100% - 40px); overflow: auto;}.jimu-widget-RelatedTableCharts-setting .jimu-simple-table .simple-table-field,.jimu-simple-table .simple-table-cell {cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTChartSettingsNode {height: calc(100% - 40px); width: 100%; overflow: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTmainContainer {width: 100%; height: 100%; overflow: hidden;}.jimu-widget-RelatedTableCharts-setting .esriCTChartColorMargin {margin: 0px 0px 10px 0px; clear: both;}.jimu-widget-RelatedTableCharts-setting .esriCTSingleColorContainer {margin-bottom: 3px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartColorWidth {width: 227px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartColorHeight {height: 30px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartTitleInput {width: 62%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTColorPicker {display: inline-block; width: 24px; height: 24px; margin-top: 2px; margin-left: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTCursorPointer {cursor: pointer;}.dijitRadio input,.jimu-widget-RelatedTableCharts-setting .esriCTCursorPointer {cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTChartTypeEllipsis {min-width: 80px; width: 80px; display: inline-block; vertical-align: middle; margin-left: 1px; color: #7989a0; font-size: 14px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-RelatedTableCharts-setting .esriCTChartColorEllipsis {min-width: 140px; width: 140px; display: inline-block; vertical-align: middle; margin-left: 1px; color: #7989a0; font-size: 14px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartTitleDivContainer {overflow: hidden;}.jimu-widget-RelatedTableCharts-setting .esriCTChartSettingLabel {float: left; padding: 5px 10px 5px 0px; width: 18%; min-width: 18%; font-size: 14px; color: #596679;}.jimu-widget-RelatedTableCharts-setting .esriCTChartDescriptionLabel {width: 100%;}.jimu-widget-RelatedTableCharts-setting .esriCTChartDescription {width: 100%; margin-top: 10px; resize: vertical;}.jimu-widget-RelatedTableCharts-setting .esriCTFieldInput {width: 77%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTLeftAlign {float: left; padding-top: 5px;}.jimu-widget-RelatedTableCharts-setting .esriCTControlWidth {width: 100%;}.jimu-widget-RelatedTableCharts-setting .fieldColorPicker {width: 25px; height: 25px; border-radius: 5px;}.jimu-widget-RelatedTableCharts-setting .esriCTColorByFieldContainer {float: left; width: 100%; margin-bottom: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartTypeDiv {float: left; width: 70%; margin-left: 25%; max-height: 230px;}.jimu-widget-RelatedTableCharts-setting .esriCTColorByFieldContainer .jimu-simple-table {max-height: 230px;}.jimu-widget-RelatedTableCharts-setting .esriCTPolarChartSection .jimu-simple-table {max-height: 230px; width: 95%;}.jimu-widget-RelatedTableCharts-setting .esriCTMarginRight {float: left; margin-right: 22px;}.jimu-widget-RelatedTableCharts-setting .esriCTCheckBox {float: left; height: 20px; width: 20px; margin-top: 7px; margin-right: 10px;}.jimu-widget-RelatedTableCharts-setting .dijitInline {margin-top: 2px;}.jimu-widget-RelatedTableCharts-setting .editorDescriptionContainer {width: 95%;}.jimu-widget-RelatedTableCharts-setting .editor-container .dijitFontNameCombo {margin-left: 19px;}.jimu-widget-RelatedTableCharts-setting .editor-container {width: 100%; height: 100%; position: relative;}.jimu-widget-RelatedTableCharts-setting .jimu-image-chooser {right: inherit !important;}.jimu-widget-RelatedTableCharts-setting .editor-container .uploaderInsideNode embed {display: none;}.jimu-widget-RelatedTableCharts-setting .esriCTFieldSelectorDiv {margin-left: 10px; margin-top: 6px; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeSelectorDiv {float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeChart {float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeItem {padding: 2px 2px 8px 10px; height: 28px; cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeItem:hover {background-color: #edf2f5;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeName {float: left; line-height: 24px; white-space: nowrap; margin-left: 10px; overflow: hidden; text-overflow: ellipsis; width: 130px; color: #7989a0;}div.chart {width: 24px; height: 24px;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeChooserList {position: absolute; top: 30px; overflow: auto; max-height: 186px; background-color: #FFFFFF; border: 1px solid #aaaaaa; width: 232px; z-index: 1; background-color: #fafafc;}.jimu-widget-RelatedTableCharts-setting .esriCTselectedItemNode {height: 30px; line-height: 36px; width: 100%; border: solid 1px #d2dae2; cursor: pointer; background-color: #fafafc;}.jimu-widget-RelatedTableCharts-setting .esriCTDropSelect {width: 30px; height: 30px; cursor: pointer; margin-top: -30px;}.jimu-widget-RelatedTableCharts-setting .esriCTDropSelect .jimu-icon-down-arrow-8 {position: relative; left: 9px; top: 1px;}.jimu-widget-RelatedTableCharts-setting .esriCTFieldRow {float: left; width: 100%; margin-bottom: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTLabelContainer {width: 45%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTlabel {width: 45%; padding: 5px; margin-top: 5px; margin-bottom: 5px; float: left; padding-left: 0px; min-width: 330px; color: #596679;}.jimu-widget-RelatedTableCharts-setting .row {clear: both;}.jimu-widget-RelatedTableCharts-setting .esriCTLayerField {width: 53%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTLayerSelectorDiv {height: 135px; overflow-y: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTLayerChooserContainer {width: 99%; float: left; margin: 0 0 0 5px;}.jimu-widget-RelatedTableCharts-setting .jimu-layer-chooser-from-map-withdropbox .layer-name {text-overflow: ellipsis; overflow: hidden; white-space: nowrap; padding: 0px 18px 0px 9px;}.jimu-widget-RelatedTableCharts-setting .dijitValidationTextBoxLabel {max-width: 232px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingFieldset {width: 99%; top: 10px; height: 100%; border: 1px solid #D2DAE2; border-radius: 5px; font-size: 14px;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingLegend {margin-left: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingComponentsDiv {height: 100%; margin: 4px;}.jimu-widget-RelatedTableCharts-setting .esriCTGraphicLocationSymbolMainDiv,.jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalMainDiv,.jimu-widget-RelatedTableCharts-setting .esriCTShowLocationMainDiv {height: 40%; width: 100%; float: left; margin-bottom: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolLabelMainDiv,.jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalLabelMainDiv,.jimu-widget-RelatedTableCharts-setting .esriCTShowLocationLabelMainDiv {float: left; width: 40%; margin: 25px 0px 10px 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolIconDiv,.jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalTxtBxDiv,.jimu-widget-RelatedTableCharts-setting .esriCTShowLocationChkBxDiv {float: right; width: 40%; margin: 35px 10px 10px 0px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolIcon {float: left;}.jimu-widget-RelatedTableCharts-setting table {border-spacing: 0;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingLabel {color: #596679;}.jimu-widget-RelatedTableCharts-setting .esriCTSymbolChooserNode {text-align: center; cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTSymbolPreviewText {padding-right: 5px; word-break: break-all; width: 59px; height: 100%; color: #7989a0;}.jimu-widget-RelatedTableCharts-setting .esriCTSymbolChooserContainer {height: calc(100% - 50px); overflow: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTURLSetButton {line-height: 30px; margin: 0 0 0 10px; float: right; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding: 0;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownButton {margin: 8px 0; display: inline-block; position: relative; padding-left: 16px; color: #518dca; background: url(../images/add_icon.png) no-repeat left; cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownButton .esriCTDropdownMenu {position: absolute; display: none; list-style-type: none; top: 18px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.jimu-rtl .jimu-widget-RelatedTableCharts-setting .esriCTDropdownButton .esriCTDropdownMenu {right: 0; left: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownButton:hover .esriCTDropdownMenu {display: inline-block;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownMenu .esriCTDropdownItem {white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownMenu .esriCTDropdownItem:hover {background: #edf2f5; color: #15a4fa;}.jimu-widget-RelatedTableCharts-setting .esriCTSources {height: 366px;}.jimu-widget-RelatedTableCharts-setting .esriCTSourcesExtraHeight {height: 516px !important;}.jimu-widget-RelatedTableCharts-setting .esriCTSourceList {width: 270px; height: 100%;}.jimu-widget-RelatedTableCharts-setting .esriCTSourceSetting {width: 660px; position: relative;}.jimu-widget-RelatedTableCharts-setting .source-table,.jimu-widget-RelatedTableCharts-setting .general-setting-table {width: 100%;}.jimu-widget-RelatedTableCharts-setting .jimu-simple-table .simple-table-field,.jimu-simple-table .simple-table-cell {cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceLayerField {width: 70%;}.jimu-widget-RelatedTableCharts-setting .esriCTsearchFieldsSelector {display: inline-block; margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background: url(../images/selector.png) no-repeat center;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceLabel {width: 25%; min-width: 182px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocalSearchLabel {margin-left: 22px; width: 24%; min-width: 146px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocalSearchRadiusUnit {line-height: 30px; float: right;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceLabelFont {font-size: 14px; color: #596679;}.jimu-widget-RelatedTableCharts-setting .esriCTLayerSource {width: 80% !important;}.jimu-widget-RelatedTableCharts-setting .esriCTlineChartValueFieldsSelector {margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background: url(../images/selector.png) no-repeat center;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceURLField {width: 76%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceLayer {width: 84% !important;}.jimu-widget-RelatedTableCharts-setting .esriCTURLWidthLabel {width: 145px; min-width: 145px; font-size: 14px;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchDetailsSection {width: 175px;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingLabelStyle {font-weight: bold;}.jimu-widget-RelatedTableCharts-query-source-setting .esriCTSearchSourceFieldCheckbox,.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceFieldCheckbox {width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-RelatedTableCharts-query-source-setting .esriCTSearchSourceFieldCheckbox .label,.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceFieldCheckbox .label {width: 140px;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceFieldCheckbox {width: 186px; margin-left: 2px;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceFieldCheckbox .label {width: 160px;}.jimu-widget-RelatedTableCharts-setting .esriCTErrorMessage {color: #e84b4b;}.jimu-widget-RelatedTableCharts-setting .esriCTValueFieldErrorMessage {border: 1px solid #e84b4b;}.jimu-widget-RelatedTableCharts-setting .esriCTlineChartValueFieldsContainer {width: 95%; display: inline-block;}.jimu-widget-RelatedTableCharts-setting .esriCTlineChartValueFields {width: 100%; margin-top: 0px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTlabel {padding: 5px 0px 5px 10px; float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTDropdownButton {padding-right: 16px; background-position: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceURLField {float: left; margin-left: 10px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLocalSearchRadiusUnit {float: left;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTTraverseUnits {float: right; width: 30%; padding-right: 0;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTTraverseDirectionUnits {margin-left: 0px; margin-right: 25px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTURLSetButton {float: left; margin: 0px 0px 0px 0px;}.claro .dijitTextBox .dijitInputInner,.claro .dijitTextBox,.claro .dijitSelect,.claro .dijitSelect .dijitInputField,.claro .dijitInputContainer {color: #7989a0; background-color: #fafafc; font-size: 14px; border-color: #d2dae2;}.claro .dijitMenuItem {color: #7989a0;}.jimu-widget-RelatedTableCharts-setting .esriCTChartChartTypeDiv {margin-bottom: 6px !important;}.claro .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-RelatedTableCharts-setting .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.claro .dijitSelect .dijitInputField {margin-right: 8px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTDropSelect .jimu-icon-down-arrow-8 {right: 9px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTThemeChart {float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTThemeItem {padding: 2px 10px 8px 2px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTThemeName {float: right; margin-right: 10px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTColorPicker {margin-right: 10px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTThemeSelectorDiv {float: right;}.esriRtl .claro .dijitSelect .dijitInputField {margin-left: 8px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTHint {margin: 5px 0px 10px 5px; float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTChartSettingsContainer {float: left;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTListContainer {float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTChartSettingLabel {float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTFieldInput {float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTMarginRight {float: right; margin-right: 0px; margin-left: 22px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLeftAlign {float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTlabel {float: right; padding-right: 0; padding-left: 5px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLayerField {float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLayerChooserContainer {float: none;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolLabelMainDiv,.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalLabelMainDiv,.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTShowLocationLabelMainDiv {float: right; margin: 25px 10px 10px 0px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTGraphicLocationSymbolMainDiv,.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalMainDiv,.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTShowLocationMainDiv {float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolIcon {float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTCheckBox {float: right; margin-left: 10px; margin-right: 0px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTChartTypeDiv {float: right; margin-right: 25%; margin-left: 0px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTViewLayoutButton {float: right;}.jimu-widget-RelatedTableCharts-setting .esriCTLabelSeriesFieldDropdown {clear: both;}.jimu-widget-RelatedTableCharts-setting .esriRTLTabContainerNode {overflow: overlay;}",
"*now":function(y){y(['dojo/i18n!*preload*widgets/RelatedTableCharts/setting/nls/Setting*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin jimu/dijit/Popup dojo/_base/lang ./LayerChooser ./ChartSetting ./GeneralSetting dojo/on dojo/dom-construct jimu/dijit/Message jimu/dijit/SimpleTable jimu/dijit/TabContainer3 ./SearchSourceSettings jimu/utils dojo/dom-class jimu/dijit/LoadingShelter".split(" "),function(y,D,x,A,w,f,d,c,a,b,h,g,e,m,n,l){return y([D,x],{baseClass:"jimu-widget-RelatedTableCharts-setting",generalSettings:null,currentChartSettings:null,startup:function(){this._createSearchSourceSettings();
this._initGeneralSettingsTab()},postMixInProperties:function(){this.nls=w.mixin(this.nls,window.jimuNls.common);this.nls=w.mixin(this.nls,window.jimuNls.loadingShelter)},postCreate:function(){this._createChartListTable();this.setConfig(this.config);this._initTabs()},_createChartListTable:function(){this.chartList=new g({fields:[{name:"name",title:this.nls.chartSettingLabel,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}],autoHeight:!1,
selectable:!0,style:{height:"100%",top:"0",bottom:"10px"}},this.chartListPanel);this.chartList.startup();a(this.chartList,"row-select",w.hitch(this,this._onChartItemSelected));a(this.chartList,"row-delete",w.hitch(this,this._onChartItemRemoved))},setConfig:function(r){var p,v;if(r&&""!==r&&r.charts){for(v=0;v<r.charts.length;v++){var q=this.chartList.addRow({name:r.charts[v].chartConfig.sectionTitle});q.success&&(q=q.tr,q.layerDetails=w.clone(r.charts[v].layerDetails),q.chartConfig=w.clone(r.charts[v].chartConfig),
0===v&&(p=q))}p&&setTimeout(w.hitch(this,function(){this.chartList.selectRow(p)}),500)}},getConfig:function(){var r,p;if(this.currentChartSettings)if(r=this.currentChartSettings.getConfig(!0))this.currentChartSettings.tr.chartConfig=w.clone(r);else return!1;if(this.generalSettings){var v=this.generalSettings.getConfig(!0);if(!v)return!1}r=this._searchSourceSettings.getConfig();if(r.hasOwnProperty("inputValidationStatus")&&!r.inputValidationStatus.isInputValid)return this._errorMessage(r.inputValidationStatus.validationMessage,
this.nls.searchSourceSettingLabel),!1;if(!r||0===r.sources.length)return this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSettingLabel),!1;v={charts:[],generalSettings:v,searchSourceSettings:r};r=this.chartList.getRows();for(p=0;p<r.length;p++){var q=r[p];var k={};k.layerDetails=w.clone(q.layerDetails);k.chartConfig=w.clone(q.chartConfig);v.charts.push(k)}this.config=w.clone(v);return v},_onAddNewClicked:function(){if(this.currentChartSettings&&""===this.currentChartSettings.sectionTitleTextBox.get("value"))return this._errorMessage(this.nls.ChartSetting.errMsgSectionTitle,
this.nls.chartSettingLabel),!1;var r="*";var p=this.chartList.getRows();0<p.length&&p[0].layerDetails&&p[0].layerDetails.polygonLayerInfo&&(r=p[0].layerDetails.polygonLayerInfo.geometryType);p=new f({nls:this.nls,map:this.map,geometryType:r});var v=new A({titleLabel:this.nls.layerChooser.title,width:800,height:250,content:p});p.onOkClick=w.hitch(this,function(q){this._addLayer(q);v.close()});p.onCancleClick=w.hitch(this,function(){v.close()})},_errorMessage:function(r,p){(new h({message:r})).message=
r;this.tab&&p&&this.tab.getSelectedTitle()!==p&&this.tab.selectTab(p)},_addLayer:function(r){var p=this.chartList.addRow({name:r.polygonLayerInfo.title});p.success&&(p=p.tr,p.layerDetails=r,this.chartList.selectRow(p))},_onChartItemRemoved:function(r){this.currentChartSettings&&this.currentChartSettings.tr===r&&(this.currentChartSettings.destroy(),this.currentChartSettings=null,r=this.chartList.getRows(),r.length&&this.chartList.selectRow(r[0]))},_onChartItemSelected:function(r){if(this.currentChartSettings){if(this.currentChartSettings.tr!==
r){var p=this.currentChartSettings.getConfig(!0);p?(this.currentChartSettings.tr.chartConfig=p,this.currentChartSettings.destroy(),this.currentChartSettings=null,this._createChartSettings(r)):this.chartList.selectRow(this.currentChartSettings.tr)}}else this._createChartSettings(r)},_createChartSettings:function(r){this.currentChartSettings=new d({map:this.map,nls:this.nls,config:r.chartConfig,layerDetails:r.layerDetails,tr:r,folderUrl:this.folderUrl,appConfig:this.appConfig,tab:this.tab},b.create("div",
{},this.chartSettingsContainer));this.own(a(this.currentChartSettings,"sectionTitleChanged",w.hitch(this,function(p){this.chartList.editRow(r,{name:p})})));this.own(a(this.currentChartSettings,"showLoadingIndicator",w.hitch(this,function(){this.loadingIndicator.show(this.nls.loading)})));this.own(a(this.currentChartSettings,"hideLoadingIndicator",w.hitch(this,function(){this.loadingIndicator.hide()})));this.currentChartSettings.startup();this.currentChartSettings.setConfig(r.chartConfig);return this.currentChartSettings},
_initTabs:function(){this.tab=new e({tabs:[{title:this.nls.chartSettingLabel,content:this.chartTabNode},{title:this.nls.searchSourceSettingLabel,content:this.searchSourceTabNode},{title:this.nls.generalSettingLabel,content:this.generalTabNode}],"class":"esriCTFullHeight"});this.own(a(this.tab,"tabChanged",w.hitch(this,function(){this.tab.containerNode.scrollTop=0})));this.tab.placeAt(this.tabDiv);n.has("chrome")&&l.add(this.tab.containerNode,"esriRTLTabContainerNode");this.own(a(this.tab.containerNode,
"scroll",w.hitch(this,function(){this.currentChartSettings&&this.currentChartSettings.closeColorPicker()})))},_initGeneralSettingsTab:function(){this.generalSettings=new c({nls:this.nls.GeneralSetting,config:this.config.generalSettings,tab:this.tab});this.generalSettings.placeAt(this.generalSettingsContainer)},_createSearchSourceSettings:function(){var r={};this.config&&this.config.hasOwnProperty("searchSourceSettings")&&(r=this.config.searchSourceSettings);this._searchSourceSettings=new m({nls:this.nls,
map:this.map,appConfig:this.appConfig,shelter:this.loadingIndicator,config:r},b.create("div",{},this.searchSourceTabNode));this.own(a(this._searchSourceSettings,"invalid-source-setting",w.hitch(this,function(){this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSettingLabel)})))}})});
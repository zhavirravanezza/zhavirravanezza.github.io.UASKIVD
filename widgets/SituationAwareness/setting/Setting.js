// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/SituationAwareness/setting/FieldPicker":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dijit/form/Select dijit/form/ValidationTextBox dijit/registry dojo/dom-construct dojo/_base/array dojo/_base/lang dojo/_base/html dojo/dom-style dojo/dom-class dojo/Deferred dojo/on dojo/query jimu/BaseWidget jimu/dijit/Message jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox esri/layers/FeatureLayer dojo/text!./FieldPicker.html dojo/Evented jimu/dijit/SimpleTable ./FieldOptions".split(" "),
function(E,J,D,H,y,g,l,b,k,q,n,m,t,v,M,p,x,u,B,w,z,I,K,O){return E([M,J,I],{templateString:z,baseClass:"jimu-widget-SAT-setting",advStat:{},fieldsList:null,callerLayer:null,callerTab:null,callerOpLayers:null,layerList:null,test:!1,fields:null,hasFields:!0,areaOptions:{},lengthOptions:{},constructor:function(f){this.map=f.map;f.test&&(this.test=f.test)},postMixInProperties:function(){this.inherited(arguments);this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.startup()},
_initCheckBoxes:function(){this.chk_count_only=this._initCheckBox(this.nls.count_checkBox,this.div_chkCountOnly);this.own(t(this.chk_count_only,"change",b.hitch(this,this.chkCountChanged)));this.chk_count=this._initCheckBox(this.nls.count_checkBox,this.div_chkCount);this.own(t(this.chk_count,"change",b.hitch(this,this.chkCountChanged)));this.chk_area=this._initCheckBox(this.nls.area_checkBox,this.div_chkArea);this.own(t(this.chk_area,"change",b.hitch(this,this.chkAreaChanged)));this.editAreaOptions=
this._initValueOptions(this.div_chkArea);this.own(t(this.editAreaOptions,"click",b.hitch(this,this.showAreaOptions)));this.chk_length=this._initCheckBox(this.nls.length_checkBox,this.div_chkLength);this.own(t(this.chk_length,"change",b.hitch(this,this.chkLengthChanged)));this.editLengthOptions=this._initValueOptions(this.div_chkLength);this.own(t(this.editLengthOptions,"click",b.hitch(this,this.showLengthOptions)));this.chk_analysisSummary=this._initCheckBox(this.nls.analysisSummaryLabelForReport,
this.div_chkAnalysisSummary);this.chk_analysisSummary.check();this.chk_PopUpSummary=this._initCheckBox(this.nls.popUpSummaryLabelForReport,this.div_chkPopUpSummary);this.chk_PopUpSummary.check()},_initCheckBox:function(f,d){var h=new B;h.setLabel(f);h.placeAt(d);return h},_initValueOptions:function(f){f=g.create("div",{className:"float-right edit-options edit-fields"},f);f.setStatus=this._setStatus;return f},_setStatus:function(f){var d=f?"edit-fields-disabled":"edit-fields";f=f?"edit-fields":"edit-fields-disabled";
n.contains(this,d)&&n.remove(this,d);n.add(this,f)},startup:function(){var f=null;this.test||(f="summary"===this.callerTab.type?[{name:"layer",title:this.nls.fieldTitle,"class":"label",type:"empty",width:"250px"},{name:"label",title:this.nls.layerLabel,"class":"label",type:"empty",width:"200px"},{name:"type",title:this.nls.typeTitle,"class":"sumlabel",type:"empty",width:"150px"},{name:"actions",title:this.nls.actionsTitle,"class":"actions",type:"actions",actions:["up","down","edit","delete"]}]:"groupedSummary"===
this.callerTab.type?[{name:"layer",title:this.nls.groupByField,"class":"label",type:"empty",width:"40%"},{name:"label",title:this.nls.layerLabel,"class":"label",type:"empty",width:"20%"},{name:"type",title:this.nls.labelType,"class":"label",type:"empty",width:"20%"}]:[{name:"layer",title:this.nls.fieldTitle,"class":"label",type:"empty",width:"60%"},{name:"label",title:this.nls.layerLabel,"class":"label",type:"empty",width:"200px"},{name:"actions",title:this.nls.actionsTitle,"class":"actions",type:"actions",
actions:["up","down","edit","delete"],width:"40%"}],this.displayFieldsTable=new K({fields:f}),this.displayFieldsTable.placeAt(this.fieldTable),k.setStyle(this.displayFieldsTable.domNode,{height:"100%"}),this.displayFieldsTable.startup(),this.operationsList=[],"summary"===this.callerTab.type?this.operationsList.push({value:"sum",label:this.nls.sum},{value:"avg",label:this.nls.avg},{value:"min",label:this.nls.min},{value:"max",label:this.nls.max}):"groupedSummary"===this.callerTab.type&&this.operationsList.push({value:"pre",
label:this.nls.prefix},{value:"suf",label:this.nls.suffix}),this._initCheckBoxes(),"summary"===this.callerTab.type?(q.set(this.chk_summary,"display","block"),q.set(this.chk_summaryLabels,"display","block"),q.set(this.chk_countOnly,"display","none"),q.set(this.editAreaOptions,"display","block"),q.set(this.editLengthOptions,"display","block")):(q.set(this.chk_countOnly,"display","block"),q.set(this.chk_summary,"display","none"),q.set(this.chk_summaryLabels,"display","none"),q.set(this.editAreaOptions,
"display","none"),q.set(this.editLengthOptions,"display","none")),this.btnCancel.innerText=this.nls.common.cancel,this.own(t(this.btnCancel,"click",b.hitch(this,function(){this.emit("cancel")}))),this.btnOk.innerText=this.nls.common.ok,this.own(t(this.btnOk,"click",b.hitch(this,function(){if(!n.contains(this.btnOk,"jimu-state-disabled")){this.updateSummaryType();var d=!1,h;for(h in this.advStat.stats)this.advStat.stats.hasOwnProperty(h)&&(d=!0);d||(this.advStat=null);this._addFieldOrder();this._addReportOptions();
this.emit("ok",this.advStat)}}))),this.layerTables=[],this.summaryLayers=[],this.advStat={},this._getAllValidLayers().then(b.hitch(this,function(){"groupedSummary"===this.callerTab.type?(q.set(this.btnAddField,"display","none"),this.hasFields&&this._addTabRow()):this.hasFields&&(this.addHandler=this.own(t(this.btnAddField,"click",b.hitch(this,this._addTabRow))),this.own(t(this.displayFieldsTable,"row-delete",b.hitch(this,this._rowDeleted))),this.own(t(this.displayFieldsTable,"actions-edit",b.hitch(this,
this._rowEdit))))})))},_addFieldOrder:function(){var f=[],d=this.displayFieldsTable.getRows();l.forEach(d,function(h){h.selectTypes?f.push({fieldName:h.selectFields.value,fieldType:h.selectTypes.value}):f.push(h.selectFields.value)});1<f.length&&(this.advStat.fieldOrder=f)},_updateGeomOptions:function(f){f&&(this.chk_area.setStatus("esriGeometryPolygon"===f),this.editAreaOptions.setStatus("esriGeometryPolygon"===f&&this.chk_area.checked),this.chk_length.setStatus("esriGeometryPolyline"===f),this.editLengthOptions.setStatus("esriGeometryPolyline"===
f&&this.chk_length.checked))},_getAllValidLayers:function(f){var d=new m;l.forEach(this.callerOpLayers,b.hitch(this,function(G){0<G.newSubLayers.length?this._recurseOpLayers(G.newSubLayers):G.id===this.callerLayer&&(this.layerList=G)}));if(this.layerList.layerObject.empty){if(this.layerList.layerObject.url){var h=new w(this.layerList.layerObject.url);t(h,"load",b.hitch(this,function(){this._completeMapLayers(h,f);d.resolve("sucess")}))}}else this._completeMapLayers(this.layerList,f),d.resolve("sucess");
return d},_recurseOpLayers:function(f){l.forEach(f,b.hitch(this,function(d){0<d.newSubLayers.length?this._recurseOpLayers(d.newSubLayers):d.id===this.callerLayer&&(this.layerList=d)}))},_completeMapLayers:function(f,d){if(f){f="undefined"===typeof f.layerObject?f:f.layerObject;var h=f.geometryType;this.objectIdField=f.objectIdField;var G={url:f.url,stats:{}},N=b.clone(f.fields),P=this.getSkipFields(f),S=[];l.forEach(N,function(C){-1===P.indexOf(C.name)&&S.push(C)});this.fields=S;this.popUpFields=
this._getPopupFields(f);this.advStat=G;if("undefined"===typeof d){this._updateGeomOptions(h);if(this.advStat.url){if("undefined"!==typeof this.callerTab.advStat&&this.callerTab.advStat){this.callerTab.advStat.stats?this._setFields(S):this._setFields(S,!0);var U=b.clone(this.callerTab.advStat.stats);this.callerTab.advStat.stats&&this.callerTab.advStat.fieldOrder&&l.forEach(this.callerTab.advStat.fieldOrder,b.hitch(this,function(C){if(C=C&&C.hasOwnProperty("fieldName")?this._initFieldsByFieldOrder(U,
C):this._initFieldsByName(U,C))this._populateTabTableRow(C.key,C.element),U[C.key].splice(C.index,1),0===U[C.key].length&&delete U[C.key]}));for(var R in U)"count"===R?(this.chk_count.setValue(!0),this.featureCountLabel.set("value",U[R][0].label)):"area"===R?(this.chk_area.setValue(!0),this.featureAreaLabel.set("value",U[R][0].label),this.areaOptions=U[R][0]):"length"===R?(this.chk_length.setValue(!0),this.featureLengthLabel.set("value",U[R][0].label),this.lengthOptions=U[R][0]):"tabCount"===R?this.chk_count_only.setValue(U[R]):
"undefined"===typeof this.callerTab.advStat.fieldOrder&&l.forEach(U[R],b.hitch(this,function(C){this._populateTabTableRow(R,C)}))}else this._setFields(S,!0);d=this.callerTab.advStat;if(!d||"undefined"!==typeof d&&!d.hasOwnProperty("stats"))if(d=0<this.popUpFields.length,f=this.fieldsList.length,"groupedSummary"===this.callerTab.type&&(f=1,d||this._setFields(S)),0<f){h="summary"===this.callerTab.type?21:4;N=G=0;a:for(;N<f;N++){var Y=!1,e=this.fieldsList[N];if(d){var r=this.popUpFields[N],A=0;b:for(;A<
this.fieldsList.length;A++)if(e=this.fieldsList[A],e.value===r){Y=!0;break b}}if(Y)if(G+=1,G<h)this._addTabRow(e);else{n.add(this.btnAddField,"btn-add-disabled");break a}}3===G&&n.add(this.btnAddField,"btn-add-disabled")}else n.add(this.btnAddField,"btn-add-disabled"),this.hasFields=!1}this.callerTab.hasOwnProperty("advStat")&&this.callerTab.advStat.hasOwnProperty("analysisSummaryForReport")&&this.callerTab.advStat.hasOwnProperty("PopUpSummaryForReport")?(this.chk_analysisSummary.setValue(this.callerTab.advStat.analysisSummaryForReport),
this.chk_PopUpSummary.setValue(this.callerTab.advStat.PopUpSummaryForReport)):(this.chk_analysisSummary.setValue(!0),this.chk_PopUpSummary.setValue(!0));("groupedSummary"===this.callerTab.type&&0<this.popUpFields.length||"groupedSummary"!==this.callerTab.type)&&this._setFields(S)}}},_initFieldsByFieldOrder:function(f,d){return this._getFieldInfo(f,d.fieldType,d.fieldName)},_initFieldsByName:function(f,d){var h=["count","area","length","tabCount"],G;for(G in f)if(-1===h.indexOf(G))return this._getFieldInfo(f,
G,d)},_getFieldInfo:function(f,d,h){f=f[d];for(var G=0;G<f.length;G++){var N=f[G];if(N.expression&&N.expression===h)return{key:d,element:N,index:G,statGroup:f}}},_validatePopupFields:function(){var f=new m;this._getAllValidLayers(!0).then(b.hitch(this,function(){for(var d=[],h=0;h<this.popUpFields.length;h++){var G=this.popUpFields[h],N=0;a:for(;N<this.fields.length;N++){var P=this.fields[N];if(G===P.name){d.push(P);break a}}}this.callerTab.type="summary";this._setFields(d,!0);h=0<this.fieldsList.length;
this._setFields(this.fields);f.resolve({layer:this.callerLayer,hasPopupFields:0<d.length,hasFields:0<this.fields.length,hasSummaryPopupFields:h,hasSummaryFields:0<this.fieldsList.length,popUpFields:d,validSummaryFields:this.fieldsList,advStat:this.advStat})}));return f},_getPopupFields:function(f){var d=this.getSkipFields(f),h=[];this.objectIdField=f.objectIdField;if(f.infoTemplate)var G=f.infoTemplate.info.fieldInfos;else if(f.url&&-1<f.url.indexOf("MapServer")){f=f.url.split("MapServer/")[1];var N=
this.map.itemInfo.itemData.operationalLayers;G=null;for(var P=0;P<N.length;P++){var S=N[P];if(S.layerObject&&S.layerObject.infoTemplates&&(S=S.layerObject.infoTemplates[f])){G=S.infoTemplate.info.fieldInfos;break}}}if(G)for(f=0;f<G.length;f++)(N=G[f])&&N.visible&&-1===d.indexOf(N.fieldName)&&h.push(N.fieldName);return h},checkStringWidth:function(f){var d=g.create("div",{"class":"visDivLength",id:"SA_VisDiv",innerHTML:f},this.domNode);f=220>d.clientWidth?!0:!1;g.destroy(d);var h=f,G=y.byNode(this.domNode).id;
v(".validationBox").forEach(function(N){N=y.byNode(N);G!==N.id&&(h=h?"Error"!==N.state:h)});(d=v(".field-picker-footer")[0])&&(h?k.removeClass(d.children[0],"jimu-state-disabled"):k.addClass(d.children[0],"jimu-state-disabled"));return f},_setFields:function(f,d){var h=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeDouble"];"summary"!==this.callerTab.type&&(h.push("esriFieldTypeString"),h.push("esriFieldTypeDate"));var G=[],N=[];l.forEach(f,b.hitch(this,function(P){-1<h.indexOf(P.type)&&
(d&&this.popUpFields&&-1<this.popUpFields.indexOf(P.name)&&N.push(P.name),G.push({label:P.alias||P.name,value:P.name}))}));1>G.length?(n.add(this.btnAddField,"btn-add-disabled"),this.hasFields=!1):this.test||(q.set(this.displayFieldsTable.domNode,"display","block"),q.set(this.btnAddField,"display","inline-block"));N.length!==this.popUpFields.length&&(this.popUpFields=N);this.fieldsList=b.clone(G)},_populateTabTableRow:function(f,d){var h=this.displayFieldsTable.addRow({});h.success&&h.tr&&(h=h.tr,
this._addTabFields(h),this._addTabTypes(h),this._addTabLabel(h),h.selectFields.set("value",d.expression),("summary"===this.callerTab.type||"groupedSummary"===this.callerTab.type||d.validLabel)&&h.labelText.set("value",d.label),h.selectTypes&&h.selectTypes.set("value",f),this._addFieldOptions(h,d));this._checkFields()},_addTabRow:function(f){var d=this.displayFieldsTable.getRows().length;"summary"!==this.callerTab.type&&3<=d?new p({message:this.nls.max_records}):"groupedSummary"===this.callerTab.type&&
0<d||(d=this.displayFieldsTable.addRow({}),d.success&&d.tr&&(d=d.tr,this._addTabFields(d),this._addTabTypes(d),this._addTabLabel(d),f&&d.selectFields.set("value",f.value),this._enableOk()),this._checkFields())},_checkFields:function(){"summary"!==this.callerTab.type&&"groupedSummary"!==this.callerTab.type&&3===this.displayFieldsTable.getRows().length&&n.add(this.btnAddField,"btn-add-disabled")},_addTabFields:function(f){var d=b.clone(this.fieldsList),h=v(".simple-table-cell",f)[0];h&&(d=new D({style:{height:"24px",
width:"100%"},"class":"summary"===this.callerTab.type?"shortSelect":"longSelect",options:d}),d.placeAt(h),d.startup(),f.selectFields=d)},_addTabLabel:function(f){var d=v(".simple-table-cell",f)[1],h=new H({style:{width:"100%",height:"24px"},"class":"validationBox"});h.invalidMessage=this.nls.invalid_string_width;h.placeAt(d);h.startup();h.validator=this.checkStringWidth;f.labelText=h},_addTabTypes:function(f){if("summary"===this.callerTab.type||"groupedSummary"===this.callerTab.type){var d=b.clone(this.operationsList),
h=v(".simple-table-cell",f)[2];h&&(d=new D({style:{width:"100%",height:"24px"},options:d}),d.placeAt(h),d.startup(),f.selectTypes=d)}},_addFieldOptions:function(f,d){f.modify=d.modify;f.round=d.round;f.truncate=d.truncate;f.roundPlaces=d.roundPlaces;f.truncatePlaces=d.truncatePlaces;f.show1KSeparator=d.show1KSeparator},getSkipFields:function(f){var d=[];if(f.fields)for(var h=0;h<f.fields.length;h++){var G=f.fields[h];G&&G.type&&G.name&&"esriFieldTypeGeometry"===G.type&&d.push(G.name)}f.globalIdField&&
""!==f.globalIdField&&d.push(f.globalIdField);f.objectIdField&&""!==f.objectIdField&&d.push(f.objectIdField);return d},getDefaultFields:function(f,d,h){var G={stats:{fields:[],tabCount:!1},analysisSummaryForReport:!0,PopUpSummaryForReport:!0};if("summary"!==h&&"groupedSummary"!==h){d=[];for(h=0;h<(3>f.length?f.length:3);h++){var N=f[h];d.push({value:0,expression:N.name,label:N.alias||N.name})}0<d.length&&(G.stats.outFields=d)}else"summary"===h&&d&&d.hasOwnProperty("length")&&0<d.length&&(G.stats.sum=
[],l.forEach(d,b.hitch(this,function(P){G.stats.sum.push({value:0,expression:P.name||P.value,label:P.alias?P.alias:P.label?P.label:P.name||P.value})})));return G},updateSummaryType:function(){var f=this.displayFieldsTable.getRows();if("summary"!==this.callerTab.type&&"groupedSummary"!==this.callerTab.type){var d=[];l.forEach(f,function(h){d.push({value:0,expression:h.selectFields.value,label:x.stripHTML(h.labelText.value),validLabel:!0,modify:h.modify,round:h.round,truncate:h.truncate,roundPlaces:h.roundPlaces,
truncatePlaces:h.truncatePlaces,show1KSeparator:h.show1KSeparator})});0<d.length&&(this.advStat.stats.outFields=d);this.advStat.stats.tabCount=this.chk_count_only.getValue()}else this.advStat.stats.tabCount="groupedSummary"===this.callerTab.type?this.chk_count_only.getValue():this.chk_count.getValue(),this.chk_count.getValue()&&(this.advStat.stats.count=[{value:0,expression:this.objectIdField,label:x.stripHTML(this.featureCountLabel.value?this.featureCountLabel.value:this.nls.count)}]),this.chk_area.getValue()&&
(this.advStat.stats.area=[{value:0,expression:this.objectIdField,label:x.stripHTML(this.featureAreaLabel.value?this.featureAreaLabel.value:this.nls.area)}],this.areaOptions&&b.mixin(this.advStat.stats.area[0],this.areaOptions)),this.chk_length.getValue()&&(this.advStat.stats.length=[{value:0,expression:this.objectIdField,label:x.stripHTML(this.featureLengthLabel.value?this.featureLengthLabel.value:this.nls.length)}],this.lengthOptions&&b.mixin(this.advStat.stats.length[0],this.lengthOptions)),l.forEach(f,
b.hitch(this,function(h){"undefined"===typeof this.advStat.stats[h.selectTypes.value]&&(this.advStat.stats[h.selectTypes.value]=[]);for(var G={value:0,expression:h.selectFields.value,modify:h.modify,round:h.round,truncate:h.truncate,roundPlaces:h.roundPlaces,truncatePlaces:h.truncatePlaces,show1KSeparator:h.show1KSeparator},N=0;N<h.selectFields.options.length;N++)if(h.selectFields.options[N].value===h.selectFields.value){G.label="groupedSummary"!==this.callerTab.type?h.labelText.value?h.labelText.value:
h.selectFields.options[N].label:h.labelText.value;break}"undefined"===typeof G.label&&(G.label=G.expression);this.advStat.stats[h.selectTypes.value].push(G)}));console.log("ADVSTAT",this.advStat)},chkCountChanged:function(f){"summary"===this.callerTab.type&&(this.updateLabel(this.featureCountLabel,f),f?this._enableOk():0===this.displayFieldsTable.getRows().length?this._disableOk():this._enableOk())},chkAreaChanged:function(f){this.updateLabel(this.featureAreaLabel,f);this.updateEdit(this.editAreaOptions,
f)},showAreaOptions:function(){n.contains(this.editAreaOptions,"edit-fields-disabled")||this._showEditOptions("area")},chkLengthChanged:function(f){this.updateLabel(this.featureLengthLabel,f);this.updateEdit(this.editLengthOptions,f)},showLengthOptions:function(){n.contains(this.editLengthOptions,"edit-fields-disabled")||this._showEditOptions("length")},_showEditOptions:function(f){this._initFieldOptions("area"===f?this.areaOptions:this.lengthOptions,f)},_initFieldOptions:function(f,d){var h=new O({nls:this.nls,
tr:"area"===d?this.areaOptions:"length"===d?this.lengthOptions:f}),G=new u({width:445,autoHeight:!0,content:h,titleLabel:this.nls.fieldOptions,nls:this.nls});this.own(t(h,"ok",b.hitch(this,function(N){"area"===d?this.areaOptions=N:"length"===d?this.lengthOptions=N:b.mixin(f,N);h.destroy();h=null;G.close()})));this.own(t(h,"cancel",b.hitch(this,function(){h.destroy();h=null;G.close()})))},updateLabel:function(f,d){f.set("disabled",!d);f.validator=this.checkStringWidth;f.invalidMessage=this.nls.invalid_string_width;
d&&""===f.value&&(d="",f.id===this.featureCountLabel.id?d=this.nls.count:f.id===this.featureAreaLabel.id?d=this.nls.area:f.id===this.featureLengthLabel.id&&(d=this.nls.length),f.set("value",d));this.validateAll()},updateEdit:function(f,d){f.setStatus(d)},validateAll:function(){var f=!0;v(".validationBox").forEach(function(h){h=y.byNode(h);f=f?"Error"!==h.state:f});var d=v(".field-picker-footer")[0];d&&(f?k.removeClass(d.children[0],"jimu-state-disabled"):k.addClass(d.children[0],"jimu-state-disabled"))},
_rowDeleted:function(){this.validateAll();var f=this.displayFieldsTable.getRows();0===f.length?"summary"===this.callerTab.type&&this.chk_count.getValue()?this._enableOk():this._disableOk():this._enableOk();"summary"!==this.callerTab.type&&"groupedSummary"!==this.callerTab.type&&3>f.length&&n.contains(this.btnAddField,"btn-add-disabled")&&n.remove(this.btnAddField,"btn-add-disabled")},_rowEdit:function(f){this._validateRowType(f.selectFields.value)?this._initFieldOptions(f,"",!1):new p({message:this.nls.onlyDouble})},
_validateRowType:function(f){var d=["esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle"],h=this.fields.filter(function(G){return G.name===f&&-1<d.indexOf(G.type)});return h&&0<h.length},_disableOk:function(){var f=v(".field-picker-footer")[0];f&&k.addClass(f.children[0],"jimu-state-disabled")},_enableOk:function(){var f=v(".field-picker-footer")[0];f&&k.removeClass(f.children[0],"jimu-state-disabled")},destroy:function(){this.advStat=null},_addReportOptions:function(){this.advStat.analysisSummaryForReport=
this.chk_analysisSummary.getValue();this.advStat.PopUpSummaryForReport=this.chk_PopUpSummary.getValue()}})})},"widgets/SituationAwareness/setting/FieldOptions":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dijit/form/ValidationTextBox dojo/_base/lang dojo/dom-class dojo/on jimu/BaseWidget dojo/text!./FieldOptions.html dojo/Evented jimu/dijit/CheckBox".split(" "),function(E,J,D,H,y,g,l,b,k,q){return E([l,J,k],{templateString:b,baseClass:"jimu-widget-SAT-setting",_modify:!1,row:void 0,
_show1KSeparator:!1,_firstTime:!0,constructor:function(n){this.row=n.tr},postCreate:function(){this.inherited(arguments);this.startup()},startup:function(){this.own(g(this.btnCancel,"click",H.hitch(this,function(){this.emit("cancel")})));this.own(g(this.btnOk,"click",H.hitch(this,function(){y.contains(this.btnOk,"jimu-state-disabled")||this.emit("ok",{modify:this._modify,round:this.rdo_round.get("checked"),truncate:this.rdo_truncate.get("checked"),roundPlaces:this.roundPlaces.textBox.value,truncatePlaces:this.truncatePlaces.textBox.value,
show1KSeparator:this._show1KSeparator})})));this._initPopup()},_initPopup:function(){this._initRadio();this._initValidationTextBox(this.roundPlaces,"undefined"!==typeof this.row.roundPlaces?this.row.roundPlaces:2);this._initValidationTextBox(this.truncatePlaces,"undefined"!==typeof this.row.truncatePlaces?this.row.truncatePlaces:2);this._init1KSeparatorCheckBox("undefined"!==typeof this.row.show1KSeparator?this.row.show1KSeparator:!0);this._initCheckBox("undefined"!==typeof this.row.modify?this.row.modify:
!1)},_initValidationTextBox:function(n,m){var t=new D({style:{width:"60px",height:"30px"}});t.invalidMessage=this.nls.validatePlaces;t.placeAt(n);t.startup();t.validator=H.hitch(this,this._validatePlaces);t.set("value",m);n.textBox=t},_validatePlaces:function(n){(n=/^\d+$/.test(n))?this._enableOk():this._disableOk();return n},_initRadio:function(){this.own(g(this.rdo_round,"change",H.hitch(this,this.rdoChanged)));this.own(g(this.rdo_truncate,"change",H.hitch(this,this.rdoChanged)));this.rdo_round.set("checked",
"undefined"!==typeof this.row.round?this.row.round:!0);this.rdo_truncate.set("checked","undefined"!==typeof this.row.truncate?this.row.truncate:!1)},_initCheckBox:function(n){this.chkModify=new q({label:this.nls.modifyValues});this.chkModify.placeAt(this.chkModifyDIV);this.own(g(this.chkModify,"change",H.hitch(this,this.chkModifyChanged)));this.chkModify.setValue(n)},chkModifyChanged:function(n){this._modify=n;this._toggleEnabled(this.rdo_round,n);this._toggleEnabled(this.rdo_truncate,n);n?this.rdoChanged():
this._toggleNodes(n,n)},rdoChanged:function(){this._firstTime||this._toggleNodes(this.rdo_round.get("checked"),this.rdo_truncate.get("checked"));this._firstTime=!1},_toggleNodes:function(n,m){this._toggleEnabled(this.roundPlaces.textBox,n);this._toggleEnabled(this.roundSignificantFigures,n);this._toggleEnabled(this.roundLabel,n);this._toggleEnabled(this.truncatePlaces.textBox,m);this._toggleEnabled(this.truncateSignificantFigures,m);this._toggleEnabled(this.truncateLabel,m)},_toggleEnabled:function(n,
m){n.setDisabled&&n.setDisabled(!m);n.disabled=!m;n.set&&n.set("disabled",!m);var t=m?"content-disabled":"content-enabled";y.contains(n,t)&&y.remove(n,t);y.add(n,m?"content-enabled":"content-disabled")},_disableOk:function(){y.contains(this.btnOk,"jimu-state-disabled")||y.add(this.btnOk,"jimu-state-disabled")},_enableOk:function(){y.contains(this.btnOk,"jimu-state-disabled")&&y.remove(this.btnOk,"jimu-state-disabled")},_init1KSeparatorCheckBox:function(n){this.chk1kSeparator=new q({label:this.nls.show1KSeparatorLabel});
this.chk1kSeparator.placeAt(this.chk1KSeparatorDIV);this.own(g(this.chk1kSeparator,"change",H.hitch(this,this.chk1kSeparatorChanged)));this.chk1kSeparator.setValue(n)},chk1kSeparatorChanged:function(n){this._show1KSeparator=n}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(E,J,D,H,y){return E([y],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",
types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=H.hitch(this,this.basicFilter);this.filter=y.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=y.andCombineFilters([this.filter,
H.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);D.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(g){return g.getLayerType().then(function(l){return!("ArcGISDynamicMapServiceLayer"===l||"ArcGISTiledMapServiceLayer"===l||"GroupLayer"===l)})},basicFilter:function(g){var l=new J;0<=this.ignoredFeaturelayerIds.indexOf(g.id)?l.resolve(!1):this.onlyShowVisible&&"Table"!==g.getLayerType()?l.resolve(g.isShowInMap()):
l.resolve(!0);return l},getHandledItem:function(g){var l=this.inherited(arguments),b=g&&g.layerInfo;b=b&&b.layerObject;l.url=b&&b.url||"";return l}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(E,J,D,H,y,g,l,b,k,q,n,m,t,v,M,p,x,u){var B=D([H,y,g,J],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);t.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new u({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=m.hitch(this,this.basicFilter);
this.filter=B.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(w){var z=new b;this.onlyShowVisible?z.resolve(w.isShowInMap()):z.resolve(!0);return z},filter:function(w){w=new b;w.resolve(!0);return w},getSelectedItems:function(){var w=this.tree.getSelectedItems();return v.map(w,m.hitch(this,function(z){return this.getHandledItem(z)}))},getAllItems:function(){var w=this.tree.getAllItems(),z=[];v.forEach(w,
m.hitch(this,function(I){"root"!==I.id&&(I=this.getHandledItem(I),z.push(I))}));return z},getHandledItem:function(w){return{name:w.name,layerInfo:w.layerInfo}},_isLeafItem:function(w){return w.isLeaf},setCreateMapResponse:function(w){this.createMapResponse=w;x.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(m.hitch(this,function(z){this.layerInfosObj=z;this.own(E(this.layerInfosObj,"layerInfosChanged",m.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&
this.own(E(this.layerInfosObj,"layerInfosIsShowInMapChanged",m.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(w,z){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(w){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(w){this._clear();t.setStyle(this.errorTipSection,"display","block");var z=[];this.onlyShowWebMapLayers?(z=w.getLayerInfoArrayOfWebmap(),
z=z.concat(w.getTableInfoArrayOfWebmap())):(z=w.getLayerInfoArray(),z=z.concat(w.getTableInfoArray()));0!==z.length&&(t.setStyle(this.errorTipSection,"display","none"),v.forEach(z,m.hitch(this,function(I){this._addDirectLayerInfo(I)})))},_addDirectLayerInfo:function(w){w&&w.getLayerObject().then(m.hitch(this,function(){this._addItem("root",w)}),m.hitch(this,function(z){console.error(z)}))},_clear:function(){var w=this._store.query({parent:"root"});v.forEach(w,m.hitch(this,function(z){z&&"root"!==
z.id&&this._store.remove(z.id)}))},_addItem:function(w,z){var I=null,K=z.getLayerType(),O=this.filter(z);n({layerType:K,valid:O}).then(m.hitch(this,function(f){if(f.valid){var d=m.hitch(this,function(P,S){this._id++;I={name:z.title||"",parent:w,layerInfo:z,type:f.layerType,layerClass:z.layerObject.declaredClass,id:this._id.toString(),isLeaf:P,hasChildren:S};this._store.add(I)}),h=z.getSubLayers(),G=0===h.length,N=!0;this.onlyFilterCurrentLayerWhenAddItem?(G&&(N=!1),d(G,N)):G?d(G,!1):(h=v.map(h,m.hitch(this,
function(P){return this.filter(P)})),n(h).then(m.hitch(this,function(P){(P=v.some(P,function(S){return S}))&&d(G,P)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var w=this._getRootItem();w=new l({data:[w],getChildren:function(z){return this.query({parent:z.id})}});this._store=new k(w);w=new q({store:this._store,query:{id:"root"},mayHaveChildren:m.hitch(this,this._mayHaveChildren)});this.tree=new p({multiple:this.multiple,
model:w,showRoot:!1,isLeafItem:m.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:m.hitch(this,function(z,I){"root"!==z.id&&this._onTreeOpen(z,I)}),onClick:m.hitch(this,function(z,I,K){this._onTreeClick(z,I,K);this.emit("tree-click",z,I,K)}),getIconStyle:m.hitch(this,function(z,I){var K=null;if(!z||"root"===z.id)return null;var O={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},f=window.location.protocol+"//"+window.location.host+
require.toUrl("jimu");if(z=this._getIconInfo(z,I).imageName)O.backgroundImage="url("+f+"/css/images/"+z+")",K=O;return K}),getIconClass:m.hitch(this,function(z,I){return this._getIconInfo(z,I).className}),getTooltip:m.hitch(this,function(z){return this.displayTooltipForTreeNode?z.layerInfo.title:""})});t.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(w){return w.hasChildren},_getIconInfo:function(w,z){var I="",K="";"ArcGISDynamicMapServiceLayer"===
w.type||"ArcGISTiledMapServiceLayer"===w.type?z?(I="mapserver_open.png",K="mapservice-layer-icon open"):(I="mapserver_close.png",K="mapservice-layer-icon close"):"GroupLayer"===w.type?z?(I="group_layer2.png",K="group-layer-icon open"):(I="group_layer1.png",K="group-layer-icon close"):"FeatureLayer"===w.type?(w=M.getTypeByGeometryType(w.layerInfo.layerObject.geometryType),"point"===w?(I="point_layer1.png",K="point-layer-icon"):"polyline"===w?(I="line_layer1.png",K="line-layer-icon"):"polygon"===w&&
(I="polygon_layer1.png",K="polygon-layer-icon")):"Table"===w.type?(I="table.png",K="table-icon"):"ArcGISImageServiceLayer"===w.type||"ArcGISImageServiceVectorLayer"===w.type?(I="image_layer.png",K="iamge-layer-icon"):z?(I="mapserver_open.png",K="mapservice-layer-icon open"):(I="mapserver_close.png",K="mapservice-layer-icon close");return{imageName:I,className:K}},_onTreeOpen:function(w,z){if("root"!==w.id){var I=[];z=[];I=w.layerInfo.getSubLayers();w.checked||(this.shelter.show(),z=v.map(I,m.hitch(this,
function(K){return K.getLayerObject()})),n(z).then(m.hitch(this,function(){this.domNode&&(v.forEach(I,m.hitch(this,function(K){this._addItem(w.id,K)})),w.checked=!0,this.shelter.hide())}),m.hitch(this,function(K){console.error(K);this.shelter.hide()})))}},_onTreeClick:function(w,z,I){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});B.createFilterByLayerType=function(w){m.isArrayLike(w)||(w=[]);return function(z){var I=
new b;if(0===w.length)I.resolve(!0);else{var K=[];z.traversal(function(O){K.push(O.getLayerType())});n(K).then(function(O){for(var f=0;f<O.length;f++)for(var d=0;d<w.length;d++)if(O[f]===w[d]){I.resolve(!0);return}I.resolve(!1)},function(O){console.error(O);I.reject(O)})}return I}};B.createFeaturelayerFilter=function(w,z,I,K){var O=["point","polyline","polygon"];w&&0<w.length?(w=v.filter(w,function(f){return 0<=O.indexOf(f)}),0===w.length&&(w=O)):w=O;return function(f){var d=f.getLayerType();f=f.getLayerObject();
return n({layerType:d,layerObject:f}).then(function(h){var G=h.layerType;h=h.layerObject;if("ArcGISDynamicMapServiceLayer"===G||"ArcGISTiledMapServiceLayer"===G||"GroupLayer"===G||"FeatureCollection"===G)return!0;if("FeatureLayer"===G){G=M.getTypeByGeometryType(h.geometryType);G=0<=v.indexOf(w,G);var N=B._shouldPassStatisticsCheck(K,h);return h.url?(h=M.isFeaturelayerUrlSupportQuery(h.url,h.capabilities),G&&h&&N):z&&G}return"Table"===G?(G=M.isFeaturelayerUrlSupportQuery(h.url,h.capabilities),h=B._shouldPassStatisticsCheck(K,
h),I&&G&&h):!1})}};B.createImageServiceLayerFilter=function(w,z){return function(I){var K=I.getLayerType();I=I.getLayerObject();return n({layerType:K,layerObject:I}).then(function(O){var f=O.layerType,d=O.layerObject;return"ArcGISImageServiceLayer"===f||"ArcGISImageServiceVectorLayer"===f?w?M.isImageServiceSupportQuery(O.layerObject.capabilities)?z?B._shouldPassStatisticsCheck(z,d):!0:!1:!0:!1})}};B._shouldPassStatisticsCheck=function(w,z){return w?(w=!1,w=z.advancedQueryCapabilities?!!z.advancedQueryCapabilities.supportsStatistics:
!!z.supportsStatistics):!0};B.createQueryableLayerFilter=function(w){var z=B.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,w);w=B.createImageServiceLayerFilter(!0,w);return B.orCombineFilters([z,w])};B.andCombineFilters=function(w){return B._combineFilters(w,!0)};B.orCombineFilters=function(w){return B._combineFilters(w,!1)};B._combineFilters=function(w,z){return function(I){var K=new b,O=v.map(w,function(f){return f(I)});n(O).then(function(f){var d=!1;d=z?v.every(f,function(h){return h}):
v.some(f,function(h){return h});K.resolve(d)},function(f){console.error(f);K.reject(f)});return K}};return B})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(E,J,D,H,y,g,l){return D("dijit.tree.ObjectStoreModel",l,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(b){y.mixin(this,b);this.childrenCache={}},getRoot:function(b,k){if(this.root)b(this.root);
else{var q=this.store.query(this.query);q.then&&this.own(q);g(q,y.hitch(this,function(n){if(1!=n.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+n.length+" items, but must return exactly one");this.root=n[0];b(this.root);q.observe&&q.observe(y.hitch(this,function(m){this.onChange(m)}),!0)}),k)}},mayHaveChildren:function(){return!0},getChildren:function(b,k,q){var n=this.store.getIdentity(b);if(this.childrenCache[n])g(this.childrenCache[n],k,q);else{var m=this.childrenCache[n]=
this.store.getChildren(b);m.then&&this.own(m);m.observe&&this.own(m.observe(y.hitch(this,function(t,v,M){this.onChange(t);v!=M&&g(m,y.hitch(this,"onChildrenChange",b))}),!0));g(m,k,q)}},isItem:function(){return!0},getIdentity:function(b){return this.store.getIdentity(b)},getLabel:function(b){return b[this.labelAttr]},newItem:function(b,k,q,n){return this.store.put(b,{parent:k,before:n})},pasteItem:function(b,k,q,n,m,t){var v=new H;if(k===q&&!n&&!t)return v.resolve(!0),v;k&&!n?this.getChildren(k,y.hitch(this,
function(M){M=[].concat(M);var p=E.indexOf(M,b);M.splice(p,1);this.onChildrenChange(k,M);v.resolve(this.store.put(b,{overwrite:!0,parent:q,oldParent:k,before:t,isCopy:!1}))})):v.resolve(this.store.put(b,{overwrite:!0,parent:q,oldParent:k,before:t,isCopy:!0}));return v},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(E,J,D,H,y,g,l,b,k,q,n,m,t,v,M,p){var x=E([M._TreeNode,t],{templateString:H,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);g.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=g.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=g.toDom('\x3cinput type\x3d"checkbox" /\x3e');g.addClass(this.checkNode,"jimu-tree-check-node");g.place(this.checkNode,this.contentNode,
"first");this.own(n(this.checkNode,"click",y.hitch(this,this._onClick)));this.own(n(this.rowNode,"keydown",y.hitch(this,function(u,B){B.target=u;B.keyCode!==m.ENTER&&B.keyCode!==m.SPACE||this._onClick(B)},this.checkNode)));this.isLeaf?this.groupId?g.setStyle(this.checkNode,"display","none"):g.setStyle(this.checkNode,"display","inline"):g.setStyle(this.checkNode,"display","none");this.isLeaf?g.addClass(this.domNode,"jimu-tree-leaf-node"):g.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,g.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,g.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(u){(u.target||u.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,u):this.tree._onClick(this,u)},_onChange:function(){this.isLeaf&&setTimeout(y.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return E([M,t],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+p.getRandomString()},postCreate:function(){this.inherited(arguments);g.addClass(this.domNode,"jimu-tree");this.own(q.before(this,"onClick",y.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&g.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;g.setAttr(this.domNode,"tabindex",0)},removeItem:function(u){this.model.store.remove(u)},getAllItems:function(){var u=this.getAllTreeNodeWidgets();return l.map(u,y.hitch(this,function(B){var w=B.item;w.selected=B.checkNode.checked;return w}))},getSelectedItems:function(){var u=this.getAllTreeNodeWidgets();u=l.filter(u,y.hitch(this,function(B){return B.checkNode.checked}));return l.map(u,
y.hitch(this,function(B){return B.item}))},getFilteredItems:function(u){var B=this.getAllTreeNodeWidgets();B=l.map(B,y.hitch(this,function(w){var z=w.item;z.selected=w.checkNode.checked;return z}));return l.filter(B,y.hitch(this,function(w){return u(w)}))},getTreeNodeByItemId:function(u){for(var B=this._getAllTreeNodeDoms(),w=0;w<B.length;w++){var z=v.byNode(B[w]);if(z.item.id.toString()===u.toString())return z}return null},selectItem:function(u){(u=this.getTreeNodeByItemId(u))&&u.isLeaf&&this.selectNodeWidget(u)},
unselectItem:function(u){(u=this.getTreeNodeByItemId(u))&&u.isLeaf&&u.unselect()},getAllLeafTreeNodeWidgets:function(){var u=this.getAllTreeNodeWidgets();return l.filter(u,y.hitch(this,function(B){return B.isLeaf}))},getAllTreeNodeWidgets:function(){var u=this._getAllTreeNodeDoms();return l.map(u,y.hitch(this,function(B){return v.byNode(B)}))},isLeafItem:function(u){return u&&u.isLeaf},_getAllTreeNodeDoms:function(){return k(".dijitTreeNode",this.domNode)},_createTreeNode:function(u){u.isLeaf=this.isLeafItem(u.item);
this.multiple||(u.groupId=this.uniqueId);return new x(u)},_onTreeNodeSelect:function(u){this.emit("item-select",{item:u.item,treeNode:u})},_onTreeNodeUnselect:function(u){this.emit("item-unselect",{item:u.item,treeNode:u})},selectNodeWidget:function(u){this.multiple||this.unselectAllLeafNodeWidgets();u.select()},_jimuBeforeClick:function(u,B,w){B.isLeaf&&(g.hasClass(w.target||w.srcElement,"jimu-tree-check-node")||(this.multiple?B.toggleSelect():this.selectNodeWidget(B)));return arguments},_onCheckNodeClick:function(u,
B,w){!this.multiple&&B&&this.unselectAllLeafNodeWidgets();b.stop(w);this.focusNode(u);setTimeout(y.hitch(this,function(){B?this.selectNodeWidget(u):u.unselect();this.onClick(u.item,u,w)}),0)},unselectAllLeafNodeWidgets:function(){var u=this.getAllLeafTreeNodeWidgets();l.forEach(u,y.hitch(this,function(B){B.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(E,J,D,H,y,g,l,b,k,q,n,m,t,v,M,p,x,u,B,w,z,I,K,O,f,d,h,G,N,P,S,U,R,Y,e){function r(a){return p.delegate(a.promise||a,{addCallback:function(c){this.then(c)},addErrback:function(c){this.otherwise(c)}})}var A=H("dijit._TreeNode",[f,d,h,G,N],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);t("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:S,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var c=Math.max(a,0)*this.tree._nodePixelIndent+"px";q.set(this.domNode,
"backgroundPosition",c+" 0px");q.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",c);E.forEach(this.getChildren(),function(F){F.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var c=this.tree,F=c.model;c._v10Compat&&a===F.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,c,F){var L="_"+c+"Class";c+="Node";var Q=this[L];this[L]=this.tree["get"+F+"Class"](a,this.isExpanded);b.replace(this[c],this[L]||"",Q||"");q.set(this[c],this.tree["get"+F+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();a=!a||!a.rowNode||"none"==a.rowNode.style.display;b.toggle(this.domNode,"dijitTreeIsRoot",a);b.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var c=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;b.replace(this.expandoNode,c[a],c);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return r(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");b.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=m.wipeIn({node:this.containerNode,duration:O.defaultDuration}),c=this._expandDeferred=new y(function(){a.stop()});J.after(a,"onEnd",function(){c.resolve(!0)},!0);a.play();return r(c)},collapse:function(){if(this._collapseDeferred)return r(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");b.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=m.wipeOut({node:this.containerNode,duration:O.defaultDuration}),c=this._collapseDeferred=new y(function(){a.stop()});J.after(a,"onEnd",
function(){c.resolve(!0)},!0);a.play();return r(c)},indent:0,setChildItems:function(a){var c=this.tree,F=c.model,L=[],Q=c.focusedChild,Z=this.getChildren();E.forEach(Z,function(T){h.prototype.removeChild.call(this,T)},this);this.defer(function(){E.forEach(Z,function(T){if(!T._destroyed&&!T.getParent()){c.dndController.removeTreeNode(T);(function da(V){var aa=F.getIdentity(V.item),ca=c._itemNodesMap[aa];1==ca.length?delete c._itemNodesMap[aa]:(aa=E.indexOf(ca,V),-1!=aa&&ca.splice(aa,1));E.forEach(V.getChildren(),
da)})(T);if(c.persist){var X=E.map(T.getTreePath(),function(V){return c.model.getIdentity(V)}).join("/"),W;for(W in c._openedNodes)W.substr(0,X.length)==X&&delete c._openedNodes[W];c._saveExpandedNodes()}c.lastFocusedChild&&!l.isDescendant(c.lastFocusedChild.domNode,c.domNode)&&delete c.lastFocusedChild;Q&&!l.isDescendant(Q.domNode,c.domNode)&&c.focus();T.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,E.forEach(a,function(T){var X=F.getIdentity(T),W=c._itemNodesMap[X];
if(W)for(var ba=0;ba<W.length;ba++)if(W[ba]&&!W[ba].getParent()){var V=W[ba];V.set("indent",this.indent+1);break}V||(V=this.tree._createTreeNode({item:T,tree:c,isExpandable:F.mayHaveChildren(T),label:c.getLabel(T),labelType:c.model&&c.model.labelType||"text",tooltip:c.getTooltip(T),ownerDocument:c.ownerDocument,dir:c.dir,lang:c.lang,textDir:c.textDir,indent:this.indent+1}),W?W.push(V):c._itemNodesMap[X]=[V]);this.addChild(V);(this.tree.autoExpand||this.tree._state(V))&&L.push(c._expandNode(V))},this),
E.forEach(this.getChildren(),function(T){T._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=g(L);this.tree._startPaint(a);return r(a)},getTreePath:function(){for(var a=this,c=[];a&&a!==this.tree.rootNode;)c.unshift(a.item),a=a.getParent();c.unshift(this.tree.rootNode.item);return c},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var c=this.getChildren();0==c.length&&
(this.isExpandable=!1,this.collapse());E.forEach(c,function(F){F._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");b.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){I.focus(this.focusNode)}});t("dojo-bidi")&&A.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),E.forEach(this.getChildren(),
function(c){c.set("textDir",a)},this))}});var C=H("dijit.Tree",[f,P,d,N],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:U,persist:!1,autoExpand:!1,dndController:e,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,c){u.publish(this.id,p.mixin({tree:this,event:a},c||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new y;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=
this;this.own(x(this.containerNode,x.selector(".dijitTreeNode",B.enter),function(L){a._onNodeMouseEnter(K.byNode(this),L)}),x(this.containerNode,x.selector(".dijitTreeNode",B.leave),function(L){a._onNodeMouseLeave(K.byNode(this),L)}),x(this.containerNode,x.selector(".dijitTreeRow",z.press),function(L){a._onNodePress(K.getEnclosingWidget(this),L)}),x(this.containerNode,x.selector(".dijitTreeRow",z),function(L){a._onClick(K.getEnclosingWidget(this),L)}),x(this.containerNode,x.selector(".dijitTreeRow",
"dblclick"),function(L){a._onDblClick(K.getEnclosingWidget(this),L)}));this.model||this._store2model();this.own(J.after(this.model,"onChange",p.hitch(this,"_onItemChange"),!0),J.after(this.model,"onChildrenChange",p.hitch(this,"_onItemChildrenChange"),!0),J.after(this.model,"onDelete",p.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){p.isString(this.dndController)&&(this.dndController=p.getObject(this.dndController));for(var c={},F=0;F<this.dndParams.length;F++)this[this.dndParams[F]]&&
(c[this.dndParams[F]]=this[this.dndParams[F]]);this.dndController=new this.dndController(this,c)}this._load();this.onLoadDeferred=r(this.pendingCommandsPromise);this.onLoadDeferred.then(p.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;v.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=
p.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(a.getChildren=p.hitch(this,function(c,F,L){this.getItemChildren(this._v10Compat&&c===this.model.root?null:c,F,L)}));this.model=new Y(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(p.hitch(this,function(a){var c=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(c.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(c.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(c.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),c.labelNode.setAttribute("role","presentation"),c.labelNode.removeAttribute("aria-selected"),c.containerNode.setAttribute("role","tree"),c.containerNode.setAttribute("aria-expanded","true"),c.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(c.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(c):this._itemNodesMap[a]=[c];c._updateLayout();
this._expandNode(c).then(p.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),p.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=p.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var c=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(p.hitch(this,function(){var F=E.map(a,function(Q){return!Q||p.isString(Q)?Q:c.model.getIdentity(Q)}),L=[];E.forEach(F,function(Q){L=L.concat(c._itemNodesMap[Q]||[])});this.set("selectedNodes",L)}))},_setPathAttr:function(a){return a.length?r(this.set("paths",[a]).then(function(c){return c[0]})):r(this.set("paths",[]).then(function(c){return c[0]}))},_setPathsAttr:function(a){function c(L,Q){var Z=L.shift(),T=E.filter(Q,function(X){return X.getIdentity()==Z})[0];
if(T)return L.length?F._expandNode(T).then(function(){return c(L,T.getChildren())}):T;throw new C.PathError("Could not expand path at "+Z);}var F=this;return r(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return g(E.map(a,function(L){L=E.map(L,function(Q){return Q&&p.isObject(Q)?F.model.getIdentity(Q):Q});if(L.length)return c(L,[F.rootNode]);throw new C.PathError("Empty path");}))}).then(function(L){F.set("selectedNodes",L);return F.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",
[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function a(F){return c._expandNode(F).then(function(){var L=E.filter(F.getChildren()||[],function(Q){return Q.isExpandable});return g(E.map(L,a))})}var c=this;return r(a(this.rootNode))},collapseAll:function(){function a(F){var L=E.filter(F.getChildren()||[],function(Q){return Q.isExpandable});L=g(E.map(L,a));return!F.isExpanded||F==c.rootNode&&!c.showRoot?L:L.then(function(){return c._collapseNode(F)})}
var c=this;return r(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,c){return!a||this.model.mayHaveChildren(a)?c?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,c){(a=this._getNext(c))&&a.isTreeNode&&this.focusNode(a)},
_onUpArrow:function(a,c){if(a=c.getPreviousSibling())for(c=a;c.isExpandable&&c.isExpanded&&c.hasChildren();)c=c.getChildren(),c=c[c.length-1];else if(a=c.getParent(),this.showRoot||a!==this.rootNode)c=a;c&&c.isTreeNode&&this.focusNode(c)},_onRightArrow:function(a,c){c.isExpandable&&!c.isExpanded?this._expandNode(c):c.hasChildren()&&(c=c.getChildren()[0])&&c.isTreeNode&&this.focusNode(c)},_onLeftArrow:function(a,c){c.isExpandable&&c.isExpanded?this._collapseNode(c):(a=c.getParent())&&a.isTreeNode&&
(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},focusLastChild:function(){var a=this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var c=a.getChildren();if(!c.length)break;a=c[c.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var c=a.getNextSibling();if(c)return c;
a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,c){return l.isDescendant(a,c.expandoNode)||l.isDescendant(a,c.expandoNodeText)},_onNodePress:function(a,c){this.focusNode(a)},__click:function(a,c,F,L){var Q=this.isExpandoNode(c.target,a);a.isExpandable&&(F||Q)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:c}),this[L](a.item,a,c),this.focusNode(a));c.stopPropagation();c.preventDefault()},_onClick:function(a,c){this.__click(a,c,this.openOnClick,
"onClick")},_onDblClick:function(a,c){this.__click(a,c,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){v.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){v.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var c=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(c);return c}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var c=this.model,F=a.item,L=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new y,c.getChildren(F,function(Q){a.unmarkProcessing();
a.setChildItems(Q).then(function(){a._loadDeferred.resolve(Q)})},function(Q){console.error(L,": error loading "+a.label+" children: ",Q);a._loadDeferred.reject(Q)}));c=a._loadDeferred.then(p.hitch(this,function(){var Q=a.expand();this.onOpen(a.item,a);this._state(a,!0);return Q}));this._startPaint(c);return c},focusNode:function(a){for(var c=[],F=this.domNode;F&&F.tagName&&"IFRAME"!==F.tagName.toUpperCase();F=F.parentNode)c.push({domNode:F.contentWindow||F,scrollLeft:F.scrollLeft||0,scrollTop:F.scrollTop||
0});this.focusChild(a);this.defer(function(){for(var L=0,Q=c.length;L<Q;L++)c[L].domNode.scrollLeft=c[L].scrollLeft,c[L].domNode.scrollTop=c[L].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var c=this.model.getIdentity(a);if(c=this._itemNodesMap[c]){var F=this.getLabel(a),L=this.getTooltip(a);E.forEach(c,function(Q){Q.set({item:a,label:F,tooltip:L});Q._updateItemClasses(a)})}},_onItemChildrenChange:function(a,c){a=this.model.getIdentity(a);
(a=this._itemNodesMap[a])&&E.forEach(a,function(F){F.setChildItems(c)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var c=this._itemNodesMap[a];c&&(E.forEach(c,function(F){this.dndController.removeTreeNode(F);var L=F.getParent();L&&L.removeChild(F);this.lastFocusedChild&&!l.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!l.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();F.destroyRecursive()},this),delete this._itemNodesMap[a])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=D(this.cookieName);a&&E.forEach(a.split(","),function(c){this._openedNodes[c]=!0},this)}},_state:function(a,c){if(!this.persist)return!1;var F=E.map(a.getTreePath(),function(L){return this.model.getIdentity(L)},this).join("/");if(1===arguments.length)return this._openedNodes[F];c?this._openedNodes[F]=!0:delete this._openedNodes[F];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=
[],c;for(c in this._openedNodes)a.push(c);D(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!p.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&k.setMarginBox(this.domNode,a);this._nodePixelIndent=k.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(p.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var c=p.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
w(a,c,c)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new A(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});t("dojo-bidi")&&C.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",
a),this.rootNode.set("textDir",a))}});C.PathError=n("TreePathError");C._TreeNode=A;return C})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(E,J,D,H){return D("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(y){H.mixin(this,y);this.connects=[];y=this.store;if(!y.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
y.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([J.after(y,"onNew",H.hitch(this,"onNewItem"),!0),J.after(y,"onDelete",H.hitch(this,"onDeleteItem"),!0),J.after(y,"onSet",H.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var y;y=this.connects.pop();)y.remove()},getRoot:function(y,g){this.root?y(this.root):this.store.fetch({query:this.query,onComplete:H.hitch(this,function(l){if(1!=l.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+l.length+
" items, but must return exactly one");this.root=l[0];y(this.root)}),onError:g})},mayHaveChildren:function(y){return E.some(this.childrenAttrs,function(g){return this.store.hasAttribute(y,g)},this)},getChildren:function(y,g,l){var b=this.store;if(b.isItemLoaded(y)){for(var k=[],q=0;q<this.childrenAttrs.length;q++){var n=b.getValues(y,this.childrenAttrs[q]);k=k.concat(n)}var m=0;this.deferItemLoadingUntilExpand||E.forEach(k,function(v){b.isItemLoaded(v)||m++});0==m?g(k):E.forEach(k,function(v,M){b.isItemLoaded(v)||
b.loadItem({item:v,onItem:function(p){k[M]=p;0==--m&&g(k)},onError:l})})}else{var t=H.hitch(this,arguments.callee);b.loadItem({item:y,onItem:function(v){t(v,g,l)},onError:l})}},isItem:function(y){return this.store.isItem(y)},fetchItemByIdentity:function(y){this.store.fetchItemByIdentity(y)},getIdentity:function(y){return this.store.getIdentity(y)},getLabel:function(y){return this.labelAttr?this.store.getValue(y,this.labelAttr):this.store.getLabel(y)},newItem:function(y,g,l){var b={parent:g,attribute:this.childrenAttrs[0]},
k;this.newItemIdAttr&&y[this.newItemIdAttr]?this.fetchItemByIdentity({identity:y[this.newItemIdAttr],scope:this,onItem:function(q){q?this.pasteItem(q,null,g,!0,l):(k=this.store.newItem(y,b))&&void 0!=l&&this.pasteItem(k,g,g,!1,l)}}):(k=this.store.newItem(y,b))&&void 0!=l&&this.pasteItem(k,g,g,!1,l)},pasteItem:function(y,g,l,b,k){var q=this.store,n=this.childrenAttrs[0];g&&E.forEach(this.childrenAttrs,function(t){if(q.containsValue(g,t,y)){if(!b){var v=E.filter(q.getValues(g,t),function(M){return M!=
y});q.setValues(g,t,v)}n=t}});if(l)if("number"==typeof k){var m=q.getValues(l,n).slice();m.splice(k,0,y);q.setValues(l,n,m)}else q.setValues(l,n,q.getValues(l,n).concat(y))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(y,g){g&&this.getChildren(g.item,H.hitch(this,function(l){this.onChildrenChange(g.item,l)}))},onDeleteItem:function(y){this.onDelete(y)},onSetItem:function(y,g){if(-1!=E.indexOf(this.childrenAttrs,g))this.getChildren(y,H.hitch(this,function(l){this.onChildrenChange(y,
l)}));else this.onChange(y)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(E,J,D,H,y){return J("dijit.tree.ForestStoreModel",y,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(g){this.root={store:this,root:!0,id:g.rootId,label:g.rootLabel,children:g.rootChildren}},mayHaveChildren:function(g){return g===this.root||this.inherited(arguments)},getChildren:function(g,l,b){g===
this.root?this.root.children?l(this.root.children):this.store.fetch({query:this.query,onComplete:H.hitch(this,function(k){this.root.children=k;l(k)}),onError:b}):this.inherited(arguments)},isItem:function(g){return g===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(g){if(g.identity==this.root.id){var l=g.scope||D.global;g.onItem&&g.onItem.call(l,this.root)}else this.inherited(arguments)},getIdentity:function(g){return g===this.root?this.root.id:this.inherited(arguments)},getLabel:function(g){return g===
this.root?this.root.label:this.inherited(arguments)},newItem:function(g,l,b){return l===this.root?(this.onNewRootItem(g),this.store.newItem(g)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(g,l,b,k,q){if(l===this.root&&!k)this.onLeaveRoot(g);this.inherited(arguments,[g,l===this.root?null:l,b===this.root?null:b,k,q]);if(b===this.root)this.onAddToRoot(g)},onAddToRoot:function(g){console.log(this,": item ",g," added to root")},onLeaveRoot:function(g){console.log(this,": item ",
g," removed from root")},_requeryTop:function(){var g=this.root.children||[];this.store.fetch({query:this.query,onComplete:H.hitch(this,function(l){this.root.children=l;if(g.length!=l.length||E.some(g,function(b,k){return l[k]!=b}))this.onChildrenChange(this.root,l)})})},onNewItem:function(g,l){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(g){-1!=E.indexOf(this.root.children,g)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(g,l,b,k){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(E,J,D,H,y,g,l,b,k,q,n){return J("dijit.tree._dndSelector",n,{constructor:function(){this.selection={};this.anchor=null;this.events.push(b(this.tree.domNode,k.press,H.hitch(this,"onMouseDown")),b(this.tree.domNode,k.release,H.hitch(this,"onMouseUp")),b(this.tree.domNode,k.move,H.hitch(this,
"onMouseMove")),b(this.tree.domNode,q.press,H.hitch(this,"onClickPress")),b(this.tree.domNode,q.release,H.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var m=[],t=this.selection,v;for(v in t)m.push(t[v]);return m},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(m,t){this.setSelection(this.getSelectedTreeNodes().concat([m]));t&&(this.anchor=m);return m},removeTreeNode:function(m){var t=
E.filter(this.getSelectedTreeNodes(),function(v){return!g.isDescendant(v.domNode,m.domNode)});this.setSelection(t);return m},isTreeNodeSelected:function(m){return m.id&&!!this.selection[m.id]},setSelection:function(m){var t=this.getSelectedTreeNodes();E.forEach(this._setDifference(t,m),H.hitch(this,function(v){v.setSelected(!1);this.anchor==v&&delete this.anchor;delete this.selection[v.id]}));E.forEach(this._setDifference(m,t),H.hitch(this,function(v){v.setSelected(!0);this.selection[v.id]=v}));this._updateSelectionProperties()},
_setDifference:function(m,t){E.forEach(t,function(v){v.__exclude__=!0});m=E.filter(m,function(v){return!v.__exclude__});E.forEach(t,function(v){delete v.__exclude__});return m},_updateSelectionProperties:function(){var m=this.getSelectedTreeNodes(),t=[],v=[];E.forEach(m,function(M){var p=M.getTreePath();v.push(M);t.push(p)},this);m=E.map(v,function(M){return M.item});this.tree._set("paths",t);this.tree._set("path",t[0]||[]);this.tree._set("selectedNodes",v);this.tree._set("selectedNode",v[0]||null);
this.tree._set("selectedItems",m);this.tree._set("selectedItem",m[0]||null)},onClickPress:function(m){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(m.target,this.current))){"mousedown"==m.type&&l.isLeft(m)&&m.preventDefault();var t="keydown"==m.type?this.tree.focusedChild:this.current;if(t){var v=y.getCopyKeyState(m),M=t.id;this.singular||m.shiftKey||!this.selection[M]?(this._doDeselect=!1,this.userSelect(t,v,m.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(m){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==m.type?this.tree.focusedChild:this.current,y.getCopyKeyState(m),m.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(m,t){if(m===t)return 0;if("sourceIndex"in document.documentElement)return m.sourceIndex-t.sourceIndex;if("compareDocumentPosition"in document.documentElement)return m.compareDocumentPosition(t)&2?1:-1;if(document.createRange){var v=doc.createRange();v.setStartBefore(m);
m=doc.createRange();m.setStartBefore(t);return v.compareBoundaryPoints(v.END_TO_END,m)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(m,t,v){if(this.singular)this.anchor==m&&t?this.selectNone():(this.setSelection([m]),this.anchor=m);else if(v&&this.anchor){t=this._compareNodes(this.anchor.rowNode,m.rowNode);v=this.anchor;0>t?t=v:(t=m,m=v);for(v=[];t!=m;)v.push(t),t=this.tree._getNext(t);v.push(m);this.setSelection(v)}else this.selection[m.id]&&
t?this.removeTreeNode(m):t?this.addTreeNode(m,!0):(this.setSelection([m]),this.anchor=m)},getItem:function(m){return{data:this.selection[m],type:["treeNode"]}},forInSelectedItems:function(m,t){t=t||D.global;for(var v in this.selection)m.call(t,this.getItem(v),v,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(E,J,D,H,y,g){return J("dijit.tree._dndContainer",null,{constructor:function(l,b){this.tree=
l;this.node=l.domNode;H.mixin(this,b);this.containerState="";D.add(this.node,"dojoDndContainer");this.events=[y(this.node,g.enter,H.hitch(this,"onOverEvent")),y(this.node,g.leave,H.hitch(this,"onOutEvent")),E.after(this.tree,"_onNodeMouseEnter",H.hitch(this,"onMouseOver"),!0),E.after(this.tree,"_onNodeMouseLeave",H.hitch(this,"onMouseOut"),!0),y(this.node,"dragstart, selectstart",function(k){k.preventDefault()})]},destroy:function(){for(var l;l=this.events.pop();)l.remove();this.node=this.parent=
null},onMouseOver:function(l){this.current=l},onMouseOut:function(){this.current=null},_changeState:function(l,b){var k="dojoDnd"+l;l=l.toLowerCase()+"State";D.replace(this.node,k+b,k+this[l]);this[l]=b},_addItemClass:function(l,b){D.add(l,"dojoDndItem"+b)},_removeItemClass:function(l,b){D.remove(l,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/GpSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/GpChooserFromPortal jimu/dijit/_GpServiceChooserContent jimu/portalUrlUtils dijit/form/RadioButton".split(" "),
function(E,J,D,H,y,g,l,b,k,q,n,m){var t=0;return E([J,D,H,k],{templateString:y,baseClass:"jimu-gp-source",declaredClass:"jimu.dijit.GpSource",nls:null,multiple:!1,portalUrl:null,uniqueID:null,mode:null,constructor:function(){this.inherited(arguments);this.uniqueID=++t},postMixInProperties:function(){this.nls=window.jimuNls.gpSource;this.portalUrl=m.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){var v=[];this.portalRadio.checked?
v=this.gpcPortal.getSelectedItems():this.urlRadio.checked&&(v=this.gpcUrl.getSelectedItems());return v},startup:function(){this._started||(this.inherited(arguments),this.gpcPortal.startup(),this.gpcUrl.startup());this._started=!0},_initSelf:function(){this._initRadios();this._createGpChooserFromPortal();this._createGpServiceChooserContent();this._onRadioClicked("url");this.own(b(this.urlRadio,"click",g.hitch(this,function(){this._onRadioClicked("url")})));this.own(b(this.portalRadio,"click",g.hitch(this,
function(){this._onRadioClicked("portal")})))},_createGpChooserFromPortal:function(){this.gpcPortal=new q({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.gpcPortal.operationTip=this.nls.chooseItem;this.gpcPortal.placeAt(this.hflcContainer);this.own(b(this.gpcPortal,"next",g.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseTask;this._updateOperationTip()})));this.own(b(this.gpcPortal,"back",g.hitch(this,function(){this.gpcPortal.operationTip=
this.nls.chooseItem;this._updateOperationTip()})));this.own(b(this.gpcPortal,"ok",g.hitch(this,function(v){v&&0<v.length&&this.emit("ok",v)})));this.own(b(this.gpcPortal,"cancel",g.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createGpServiceChooserContent:function(){this.gpcUrl=new n({multiple:this.multiple,style:{width:"100%",height:"100%"}});
this.gpcUrl.operationTip=this.nls.setServiceUrl;this.gpcUrl.placeAt(this.flscContainer);this.own(b(this.gpcUrl,"ok",g.hitch(this,function(v){v&&0<v.length&&this.emit("ok",v)})));this.own(b(this.gpcUrl,"cancel",g.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var v="gpSourceRadios_"+this._getRandomString();this.portalRadio.name=v;l.setAttr(this.portalRadio,"id","portalRadio_"+this._getRandomString());l.setAttr(this.portalLabel,"for",this.portalRadio.id);this.urlRadio.name=v;
l.setAttr(this.urlRadio,"id","urlRadio_"+this._getRandomString());l.setAttr(this.urlLabel,"for",this.urlRadio.id)},_getRandomString:function(){var v=Math.random().toString();return v=v.slice(2,v.length)},_onRadioClicked:function(v){this.mode!==v&&(this.mode=v,"portal"===v?(this.portalRadio.set("checked",!0),this.urlRadio.set("checked",!1),l.setStyle(this.hflcContainer,"display","block"),l.setStyle(this.flscContainer,"display","none"),this.operationTip.innerHTML=this.nls.chooseItem):"url"===v&&(this.portalRadio.set("checked",
!1),this.urlRadio.set("checked",!0),l.setStyle(this.hflcContainer,"display","none"),l.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl,setTimeout(g.hitch(this,function(){this.gpcUrl.focusInput()}),50)),this._updateOperationTip())},_updateOperationTip:function(){if(this.portalRadio.checked){this.operationTip.innerHTML=this.gpcPortal.operationTip;var v=this.gpcPortal.browserContainer;v.style.top=0;var M=this.operationTip.clientHeight;19<=M&&(v.style.top=
M-19+"px")}else this.urlRadio.checked&&(this.operationTip.innerHTML=this.gpcUrl.operationTip)}})})},"jimu/dijit/GpChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/GpServiceBrowser jimu/portalUrlUtils esri/request".split(" "),function(E,
J,D,H,y,g,l,b,k,q,n,m,t,v,M,p,x){return E([J,D,H,m],{templateString:y,declaredClass:"jimu.dijit.GpChooserFromPortal",baseClass:"jimu-gp-chooser-from-portal",_serviceDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=g.mixin({},window.jimuNls.common);this.portalUrl=p.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.gpServiceBrowser.getSelectedItems()},_initSelf:function(){this.selector=
new v({portalUrl:this.portalUrl,itemTypes:["Geoprocessing Service"],onlyShowOnlineFeaturedItems:!1});this.own(k(this.selector,"item-selected",g.hitch(this,this._onItemSelected)));this.own(k(this.selector,"none-item-selected",g.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);this.selector.startup();this.gpServiceBrowser._onTreeClick=g.hitch(this,this._onBrowserClicked)},_onItemSelected:function(){l.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){l.addClass(this.btnNext,
"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceDef&&!this._serviceDef.isFulfilled()&&this._serviceDef.cancel();l.setStyle(this.btnOk,"display","none");l.setStyle(this.btnNext,"display","block");l.setStyle(this.btnBack,"display","none");l.addClass(this.btnOk,"jimu-state-disabled");l.setStyle(this.selectorContainer,"display","block");l.setStyle(this.browserContainer,"display","none");this._reset();this.emit("back")},_onBtnOkClicked:function(){var u=this.getSelectedItems();0<u.length&&
this.emit("ok",u)},_onBtnNextClicked:function(){var u=this.selector.getSelectedItem();u&&(this._reset(),l.setStyle(this.btnNext,"display","none"),l.setStyle(this.btnBack,"display","block"),l.setStyle(this.btnOk,"display","block"),l.addClass(this.btnOk,"jimu-state-disabled"),l.setStyle(this.selectorContainer,"display","none"),l.setStyle(this.browserContainer,"display","block"),this.gpServiceBrowser.setUrl(u.url||u.item).then(g.hitch(this,function(){0<this.getSelectedItems().length&&l.removeClass(this.btnOk,
"jimu-state-disabled")})),this.emit("next"))},_reset:function(){this.gpServiceBrowser.reset()},_onBrowserClicked:function(){0<this.gpServiceBrowser.getSelectedItems().length?l.removeClass(this.btnOk,"jimu-state-disabled"):l.addClass(this.btnOk,"jimu-state-disabled")},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(E,J,D,H,y,g,l,b,k,q,n,m,t,v,M,p,x,u,B,w,z,I,K,O,f){return E([D,H,y,f,l],{templateString:g,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=w.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";q.forEach(this.itemTypes,b.hitch(this,function(d,h){this._itemTypes+=
'"'+d+'"';h!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";q.forEach(this.typeKeywords,b.hitch(this,function(d,h){this._typeKeywords+='"'+d+'"';h!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var d=this._getPortalUrl();
this.portal=u.getPortal(d);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=x.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=x.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var d={title:this.nls.myContent,content:this.mycontentTabNode},h={title:this.nls.myOrganization,content:this.organizationTabNode},
G={title:this.nls.myGroup,content:this.groupTabNode},N={title:this.nls.publicMap,content:this.publicTabNode};p.set(this.mycontentTabNode,"display","none");p.set(this.organizationTabNode,"display","none");p.set(this.groupTabNode,"display","none");p.set(this.publicTabNode,"display","none");var P=[];this.showMyContent&&(P.push(d),p.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(P.push(h),p.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(P.push(G),p.set(this.groupTabNode,
"display","block"));this.showPublic&&(P.push(N),p.set(this.publicTabNode,"display","block"));this.tab=new K({tabs:P},this.tabNode);this.own(M(this.tab,"tabChanged",b.hitch(this,function(S){n.setStyle(this.signinSection,"display","none");S!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){n.setStyle(this.signinSection,"display","none");var d=v(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);B.userHaveSignInPortal(this._getPortalUrl())?d.style("display","block"):(d.style("display","none"),this._isPublicTabShow||n.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var d=this._getPortalUrl();d=w.getServerByUrl(d);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var h=!1;w.isArcGIScom(d)?(h=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
d,h=this.showOnlineItems?!1:!0);h&&(this.onlinePublicRaido.set("disabled",!0),n.setStyle(this.onlinePublicRaido,"display","none"),n.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var d="esri_"+(k.locale&&k.locale.slice(0,2)||"en").toLowerCase(),h=q.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
b.hitch(this,function(N){return N!==d})),G="";q.forEach(h,b.hitch(this,function(N){G+=" -owner:"+N+" "}));h=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(h=" orgid:"+this.portal.user.orgId+" ");h=h+this._itemTypeQueryString+" AND access:public "+G+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:h});this._filterPublicPortalQuery=this._getQuery({q:h,basicQ:h});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(d){return b.mixin({start:1,num:16,f:"json"},d||{})},_getPortalUrl:function(){return w.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(M(this.publicPortalItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(M(this.publicOnlineItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(M(this.organizationItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(M(this.groupItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));
this.own(M(this.mycontentItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(M(this.publicPortalItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(M(this.publicOnlineItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(M(this.organizationItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(M(this.groupItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(M(this.mycontentItemTable,"update",b.hitch(this,this._onItemTableUpdate)));
var d=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",d),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(M(this.portalPublicRaido,"click",b.hitch(this,this._onPublicRaidoClicked)));this.own(M(this.onlinePublicRaido,"click",b.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(d){(d=d&&b.trim(d))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=d+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=d+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(M(this.groupsSelect,"change",b.hitch(this,this._onGroupsSelectChange)));var d=w.getServerByUrl(this._getPortalUrl());w.isArcGIScom(d)&&(d="ArcGIS.com");B.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(d){if(d=d&&b.trim(d)){if(this._allOrganizationQuery){var h=this._allOrganizationQuery.q;h&&(this._filterOrganizationQuery.q=d+" "+h,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(d){if(d=d&&b.trim(d)){if(this._allMyContentQuery){var h=this._allMyContentQuery.q;h&&(this._filterMyContentQuery.q=d+" "+
h,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(d){if(d=d&&b.trim(d)){if(this._allGroupQuery){var h=this._allGroupQuery.q;h&&(this._filterGroupQuery.q=d+" "+h,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var d=this._getPortalUrl();u.getPortal(d).getUser().then(b.hitch(this,function(h){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(h),this._searchMyContent(h),this._searchGroups(h))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(d){this.organizationItemTable.clear();d=" orgid:"+d.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var h=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:d});this._filterOrganizationQuery=this._getQuery({q:d});this.organizationItemTable.set("portalUrl",h);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(d){this.mycontentItemTable.clear();var h=this._getPortalUrl();d="owner:"+d.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:d});this._filterMyContentQuery=this._getQuery({q:d});this.mycontentItemTable.set("portalUrl",h);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(d){this._resetGroupsSection();n.setStyle(this.groupsSection,"display","flex");d=d.getGroups();if(0<d.length){n.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();n.empty(this.groupsSelect);for(var h=0;h<d.length;h++){var G=d[h];n.create("option",
{value:G.id,innerHTML:G.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(d.length)},_resetGroupsSection:function(){n.setStyle(this.groupsSection,"display","none");n.empty(this.groupsSelect);n.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();n.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(d){0===d?n.setStyle(this.groupsSection,
"top","15px"):n.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var d=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===d)n.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{n.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var h=this._getPortalUrl();d="group:"+d+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:d});this._filterGroupQuery=this._getQuery({q:d});
this.groupItemTable.set("portalUrl",h);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(d){var h=n.hasClass(d,"jimu-state-active");v(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");h&&n.addClass(d,"jimu-state-active");(d=this.getSelectedItem())?this.emit("item-selected",d):this.emit("none-item-selected")},getSelectedItem:function(){var d=null,h=v(".item.jimu-state-active",this.domNode);
0<h.length&&(d=b.mixin({},h[0].item));return d}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(E,J,D,H,y,g,l,b,k,q,n,m,t,v,M,p){return E([J,D,H,g],{templateString:y,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=M.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){k.setStyle(this.domNode,"display","block")},hide:function(){k.setStyle(this.domNode,"display","none")},searchAllItems:function(x){this.showAllItemsSection();x&&(this.query=l.mixin({},x),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),v.getPortal(this.portalUrl).queryItems(this.query).then(l.hitch(this,function(u){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=u.nextStart,this._createItems(u,this.allItemTbody))}),l.hitch(this,function(u){console.error(u);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(x){this.showFilterItemsSection();x&&(this.filteredQuery=l.clone(x),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),v.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(l.hitch(this,function(u){this.domNode&&
(this.showFilterItemsSection(),x&&this.clearFilteredItemsSection(),this.filteredQuery.start=u.nextStart,this._createItems(u,this.filteredItemsTbody),this._filterItemCallback())}),l.hitch(this,function(u){console.error(u);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(k.setStyle(this.filteredItemsTableDiv,"display","block"),k.setStyle(this.searchNoneTipSection,"display","none")):(k.setStyle(this.filteredItemsTableDiv,
"display","none"),k.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){k.empty(this.allItemTbody)},clearFilteredItemsSection:function(){k.empty(this.filteredItemsTbody)},showAllItemsSection:function(){k.setStyle(this.allItemsSection,"display","block");k.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){k.setStyle(this.allItemsSection,"display","none");
k.setStyle(this.filteredItemsSection,"display","block");k.setStyle(this.filteredItemsTableDiv,"display","block");k.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(x){return t.isScrollToBottom(x)},_createItems:function(x,u){x=x.results;var B=
b.map(this.types,l.hitch(this,function(d){return d.toLowerCase()}));x=b.filter(x,l.hitch(this,function(d){d=d.type&&d.type.toLowerCase()||"";return 0<=b.indexOf(B,d)}));if(0!==x.length){var w=n("td.empty",u),z;if(0<w.length){var I=Math.min(x.length,w.length),K=x.splice(0,I);for(z=0;z<I;z++){var O=w[z];var f=this._createItem(K[z]);k.place(f,O);k.removeClass(O,"empty")}}if(0!==x.length){w=Math.ceil(x.length/2);for(z=0;z<w;z++)for(f=k.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
k.place(f,u),I=n("td",f),K=0;K<I.length;K++)O=I[K],(f=x[2*z+K])?(f=this._createItem(f),k.place(f,O)):k.addClass(O,"empty");this.emit("update")}}},_getItemCount:function(x){return n(".item",x).length},_createItem:function(x){var u=k.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
u.item=x;var B=n(".item-thumbnail",u)[0],w=n(".item-name",u)[0],z=n(".item-type-owner",u)[0],I=n(".item-date",u)[0],K=n(".item-details",u)[0],O=n(".none-thumbnail-tip",u)[0];if(!x.thumbnailUrl){var f=this._defaultThumbnail[x.type];f&&(x.thumbnailUrl=require.toUrl("jimu")+"/images/"+f)}x.thumbnailUrl?k.setStyle(B,"backgroundImage","url("+x.thumbnailUrl+")"):O.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(I=n(".item-info",u)[0],this.onCreateItemContent(x,I)):(w.innerHTML=
x.title,w.title=w.innerHTML,z.innerHTML=x.type+" by "+x.owner,z.title=z.innerHTML,B=new Date,B.setTime(x.modified),I.innerHTML=B.toLocaleString(),I.title=I.innerHTML,K.innerHTML=this.nls.moreDetails,K.href=x.detailsPageUrl||"#");return u},_onItemsTableClicked:function(x){var u=x.target||x.srcElement;x=null;k.hasClass(u,"item-thumbnail")?x=u.parentNode:k.hasClass(u,"none-thumbnail-tip")&&(x=u.parentNode.parentNode);x&&(u=k.hasClass(x,"jimu-state-active"),n(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
u?k.removeClass(x,"jimu-state-active"):k.addClass(x,"jimu-state-active"),this.emit("item-dom-clicked",x))},getSelectedItem:function(){var x=null,u=n(".item.jimu-state-active",this.domNode);0<u.length&&(x=l.mixin({},u[0].item));return x}})})},"jimu/dijit/GpServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(E,J,D,H,y){return E([J],{baseClass:"jimu-gp-service-browser",declaredClass:"jimu.dijit.GpServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=y.getGpServiceBrowserRule()},getSelectedItems:function(){var g=this.inherited(arguments);return g=H.map(g,D.hitch(this,function(l){return{name:l.name,url:l.url}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(E,J,D,H,y,g,l,b,k,q,n,m,t,v,M){return E([J,D,H,y],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);l.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(p){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new k;p&&"string"===typeof p&&p.replace(/\/*$/g,"")||this._def.reject();p=p.replace(/\/*$/g,"");p=g.trim(p);var x=p.match(/^http(s?):\/\//gi);x&&0<x.length||
(p="http://"+p);if(!(0>=p.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=p))return p=this._getRootItem(),p=v.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,p):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,p):this._searchFolderServiceUrl(this._currentUrl,p),this.shelter.show(),p.then(g.hitch(this,function(u){this.domNode&&this.shelter.hide();var B=this.tree.getAllLeafTreeNodeWidgets();1===B.length&&
B[0].select();this._def.resolve(u)}),g.hitch(this,function(u){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(u)})),this._def;this._def.reject()},_getItem:function(p){return this.rule.getItem(p)},_getSubItemUrls:function(p){return this.rule.getSubItemUrls(p)},_getSubItems:function(p){var x=new k;this._getSubItemUrls(p).then(g.hitch(this,function(u){u=b.map(u,g.hitch(this,function(B){return this._getItem(B)}));q(u).then(g.hitch(this,function(B){B=b.filter(B,g.hitch(this,
function(w){return w&&"object"===typeof w}));x.resolve(B)}),g.hitch(this,function(B){x.reject(B)}))}),g.hitch(this,function(u){x.reject(u)}));return x},_selectFirstLeafTreeNodeWidget:function(){var p=this.tree.getAllLeafTreeNodeWidgets();1===p.length&&p[0].select()},isLeafItem:function(p){return 0<=this.rule.leafTypes.indexOf(p.type)},isServiceTypeSupported:function(p){return this.rule.isServiceTypeSupported(p)},_getStringEndWith:function(p,x){var u="",B=p.indexOf(x);0<=B&&(u=p.slice(0,B+x.length));
return u},_isUrlContainsServiceType:function(p){return this.rule.isUrlContainsServiceType(p)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(p){var x="";p=p.split("/");return x=p[p.length-1]},_searchBaseServiceUrl:function(p,x){var u=new k;this._getRestInfo(p).then(g.hitch(this,function(B){if(this.domNode){var w=[];b.map(B.folders,g.hitch(this,function(z){var I={name:z,type:"folder",url:p+"/"+z,parent:x.id};this._addItem(I);
var K=new k;this._doSearchFolderServiceUrl(I.url,I.id).then(g.hitch(this,function(O){0<O.length?b.forEach(O,g.hitch(this,function(f){f.parent=I.id;this._addItem(f)})):this._removeItem(I.id);K.resolve()}),g.hitch(this,function(O){K.reject(O)}));w.push(K);return K}));b.forEach(B.services,g.hitch(this,function(z){if(this.isServiceTypeSupported(z.type)){z=p+"/"+z.name+"/"+z.type;var I=new k;this.rule.getItem(z).then(g.hitch(this,function(K){K&&(K.parent=x.id,this._addItem(K));I.resolve()}),g.hitch(this,
function(K){console.error(K);I.reject(K)}));w.push(I)}}));q(w).then(g.hitch(this,function(){this.domNode&&u.resolve()}),g.hitch(this,function(z){console.error(z);this.domNode&&u.reject(z)}))}}),g.hitch(this,function(B){console.error(B);this.domNode&&u.reject({errorCode:"NETWORK_ERROR",error:B})}));return u},_searchFolderServiceUrl:function(p,x){var u=new k;this._doSearchFolderServiceUrl(p,x).then(g.hitch(this,function(B){this.domNode&&(b.forEach(B,g.hitch(this,function(w){w.parent=x.id;this._addItem(w)})),
u.resolve())}),g.hitch(this,function(B){console.error(B);this.domNode&&u.reject({errorCode:"NETWORK_ERROR",error:B})}));return u},_doSearchFolderServiceUrl:function(p){var x=new k,u=this._getBaseServiceUrl();this._getRestInfo(p).then(g.hitch(this,function(B){B=B.services;var w=[];B&&0<B.length&&b.forEach(B,g.hitch(this,function(z){this.isServiceTypeSupported(z.type)&&(z=this.rule.getItem(u+"/"+z.name+"/"+z.type),w.push(z))}));q(w).then(g.hitch(this,function(z){z=b.filter(z,g.hitch(this,function(I){return I}));
x.resolve(z)}),g.hitch(this,function(z){console.error(z);x.reject(z)}))}),g.hitch(this,function(B){console.error(B);x.reject(B)}));return x},_searchServiceUrl:function(p,x){var u=new k;this._getSubItems(p).then(g.hitch(this,function(B){B&&0<B.length?(b.forEach(B,g.hitch(this,function(w){w.parent=x.id;this._addItem(w)})),u.resolve()):this._getItem(p).then(g.hitch(this,function(w){w&&(w.parent=x.id,this._addItem(w));u.resolve()}),g.hitch(this,function(w){u.reject(w)}))}),g.hitch(this,function(B){u.reject(B)}));
return u},_getRestInfo:function(p){var x=new k;this.rule.getRestInfo(p).then(g.hitch(this,function(u){this.domNode&&x.resolve(u)}),g.hitch(this,function(u){this.domNode&&x.reject(u)}));return x},_clear:function(){var p=this._store.query({parent:"root"});b.forEach(p,g.hitch(this,function(x){x&&"root"!==x.id&&this._store.remove(x.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(p){this._id++;p.id=this._id.toString();this._store.add(p);return p},_removeItem:function(p){this._store.remove(p)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var p=this._getRootItem();p=new n({data:[p],getChildren:function(x){return this.query({parent:x.id})}});this._store=new m(p);p=new t({store:this._store,query:{id:"root"},mayHaveChildren:g.hitch(this,this._mayHaveChildren)});this.tree=new M({multiple:this.multiple,model:p,showRoot:!1,style:{width:"100%"},isLeafItem:g.hitch(this,this.isLeafItem),onOpen:g.hitch(this,function(x,u){this._onTreeOpen(x,u);
this.emit("tree-open",x,u)}),onClick:g.hitch(this,function(x,u,B){this._onTreeClick(x,u,B);this.emit("tree-click",x,u,B)}),getIconStyle:g.hitch(this,function(x,u){var B=null;if(!x)return null;var w={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},z=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),I=this._getIconImageName(x,u);I||("folder"===x.type?I=u?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(x.type)&&
(I=u?"folder_open_default.png":"folder_close_default.png"));I&&(w.backgroundImage="url("+z+"/css/images/"+I+")",B=w);return B})});l.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(p,x){var u="";"function"===typeof this.rule.getIconImageName&&(u=this.rule.getIconImageName(p,x));return u},_mayHaveChildren:function(p){return"root"===p.type?!0:!this.isLeafItem(p)},_onTreeOpen:function(p,x){"root"===p.id||0<this._store.query({parent:p.id}).length||
p.checking||p.checked||(p.checking=!0,this._getSubItems(p.url).then(g.hitch(this,function(u){b.forEach(u,g.hitch(this,function(B){B.parent=p.id;this._addItem(B)}));p.checking=!1;p.checked=!0}),g.hitch(this,function(u){console.error(u);p.checking=!1;p.checked=!0})))},_onTreeClick:function(p,x,u){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred",
"jimu/utils","jimu/ServiceBrowserRule"],function(E,J,D,H,y){var g={combineRules:function(l){var b=new y;J.forEach(l,function(k){J.forEach(k.leafTypes,function(q){0>b.leafTypes.indexOf(q)&&b.leafTypes.push(q)});J.forEach(k.serviceTypes,function(q){0>b.serviceTypes.indexOf(q)&&b.serviceTypes.push(q)})});b.getMatchedRule=function(k){var q=null;J.some(l,function(n){return n.isUrlContainsServiceType(k)?(q=n,!0):!1});return q};b.getItem=function(k){var q=null;return q=(q=b.getMatchedRule(k))?q.getItem(k):
b.defaultGetItem(k)};b.getSubItemUrls=function(k){var q=null;return q=(q=b.getMatchedRule(k))?q.getSubItemUrls(k):b.defaultGetSubItemUrls(k)};b.getIconImageName=function(k,q){var n="";if(k.url){var m=b.getMatchedRule(k.url);m&&"function"===typeof m.getIconImageName&&(n=m.getIconImageName(k,q))}return n};return b},getFeaturelayerServiceBrowserRule:function(l,b,k){l=E.clone(l);var q=["point","polyline","polygon"];E.isArrayLike(l)&&0<l.length?(l=J.filter(l,function(n){return 0<=q.indexOf(n)}),0===l.length&&
(l=q)):l=q;return g._getFeaturelayerServiceBrowserRule(l,b,k)},_getFeaturelayerServiceBrowserRule:function(l,b,k){return new y({types:l,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(q){var n=new D;this.isUrlEndWithServiceType(q,this.serviceTypes)?n=this.defaultGetItem(q):this.getRestInfo(q).then(E.hitch(this,function(m){m=this._getItemByLayerDefinition(q,m);n.resolve(m)}),
E.hitch(this,function(m){n.reject(m)}));return n},getSubItemUrls:function(q){var n=new D;return n=this.isUrlEndWithServiceType(q)?this._getSubUrlsByServiceUrl(q):this._getSubUrlsByGroupUrl(q)},getIconImageName:function(q,n){var m="";"MapServer"===q.type||"FeatureServer"===q.type?m=n?"mapserver_open.png":"mapserver_close.png":q.type===this._groupLayerType?m=n?"group_layer2.png":"group_layer1.png":q.type===this._featureLayerType?(q=H.getTypeByGeometryType(q.definition&&q.definition.geometryType),"point"===
q?m="point_layer1.png":"polyline"===q?m="line_layer1.png":"polygon"===q&&(m="polygon_layer1.png")):q.type===this._tableType?m="table.png":"root"===q.type&&this._currentUrl&&J.some(this.serviceTypes,E.hitch(this,function(t){return H.isStringEndWith(this._currentUrl,"/"+t)}))&&(m=n?"mapserver_open.png":"mapserver_close.png");return m},_getSubUrlsByServiceUrl:function(q){var n=new D;this.getRestInfo(q).then(E.hitch(this,function(m){var t=[];J.forEach(m.layers,E.hitch(this,function(v){0<=v.parentLayerId||
t.push(q+"/"+v.id)}));k&&J.forEach(m.tables,E.hitch(this,function(v){0<=v.parentLayerId||t.push(q+"/"+v.id)}));n.resolve(t)}),E.hitch(this,function(m){n.reject(m)}));return n},_getSubUrlsByGroupUrl:function(q){var n=new D;this.getRestInfo(q).then(E.hitch(this,function(m){var t=[];if(m.type===this._groupLayerType){var v=this._getServiceUrlByLayerUrl(q);t=J.map(m.subLayers||[],E.hitch(this,function(M){return v+"/"+M.id}))}n.resolve(t)}),E.hitch(this,function(m){n.reject(m)}));return n},_getItemByLayerDefinition:function(q,
n){var m=null,t=n.type;if(t===this._groupLayerType)m={name:n.name,type:t,url:q,definition:n};else if(t===this._featureLayerType||t===this._tableType){var v=!1;t===this._featureLayerType?v=this._validateEsriGeometryType(n.geometryType):t===this._tableType&&(v=!0);v&&(v=!1,(v=b?H.isFeaturelayerUrlSupportQuery(q,n.capabilities):!0)&&(m={name:n.name,type:t,url:q,definition:n}))}return m},_validateEsriGeometryType:function(q){q=H.getTypeByGeometryType(q);return 0<=this.types.indexOf(q)},_getServiceUrlByLayerUrl:function(q){for(var n=
"",m=0;m<this.serviceTypes.length;m++){var t=this.serviceTypes[m].toLowerCase(),v=q.toLowerCase().lastIndexOf("/"+t+"/");if(0<=v){n=q.slice(0,v+t.length+1);break}}return n}})},getGeocodeServiceBrowserRule:function(){return new y({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new y({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(l){var b=new D;this.isUrlEndWithServiceType(l)?b=this.defaultGetItem(l):this.getRestInfo(l).then(E.hitch(this,
function(k){b.resolve({name:k.displayName||k.name,type:"GPTask",url:l,definition:k})}),E.hitch(this,function(k){b.reject(k)}));return b},getSubItemUrls:function(l){var b=new D;this.isUrlEndWithServiceType(l)?this.getRestInfo(l).then(E.hitch(this,function(k){k=J.map(k.tasks||[],E.hitch(this,function(q){return l+"/"+q}));b.resolve(k)}),E.hitch(this,function(k){b.reject(k)})):b.resolve([]);return b},getIconImageName:function(l,b){b="";"GPServer"===l.type?b="toolbox.png":"GPTask"===l.type&&(b="tool.png");
return b}})},getImageServiceBrowserRule:function(l){return new y({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(b){var k=new D;this.isUrlEndWithServiceType(b)?this.defaultGetItem(b).then(E.hitch(this,function(q){l?H.isImageServiceSupportQuery(q.definition.capabilities)?k.resolve(q):k.resolve(null):k.resolve(q)}),E.hitch(this,function(q){k.reject(q)})):k.resolve(null);return k},getIconImageName:function(b,k){k="";"ImageServer"===b.type&&(k="image_layer.png");return k}})},
getQueryableServiceBrowserRule:function(){var l=g.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),b=g.getImageServiceBrowserRule(!0);return g.combineRules([l,b])}};return g})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(E,J,D,H,y,g,l){return E([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(b){J.mixin(this,b);J.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);J.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(b){return this.defaultGetItem(b)},getSubItemUrls:function(b){return this.defaultGetSubItemUrls(b)},getIconImageName:function(b,k){return""},defaultGetItem:function(b){var k=new H;b=b.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(b)){var q=b.split("/"),n=q[q.length-1],m=q[q.length-2];this.getRestInfo(b).then(J.hitch(this,function(t){k.resolve({name:m,type:n,url:b,definition:t})}),J.hitch(this,function(t){console.error(t);
k.reject({errorCode:"NETWORK_ERROR",error:t})}))}else k.resolve(null);return k},defaultGetSubItemUrls:function(b){b=new H;b.resolve([]);return b},getRestInfo:function(b){var k=new H;b=b.replace(/\/*$/g,"");var q=this._restInfoCache[b];if(q)k.resolve(q);else{q={url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4};var n=l.findCredential(b);n&&n.token&&(q.content.token=n.token);g(q).then(J.hitch(this,function(m){this._restInfoCache[b]=m;k.resolve(m)}),function(m){k.reject(m)})}return k},
isServiceTypeSupported:function(b){b=b.toLowerCase();return D.some(this.serviceTypes,J.hitch(this,function(k){return k.toLowerCase()===b}))},isUrlEndWithServiceType:function(b){return D.some(this.serviceTypes,J.hitch(this,function(k){return y.isStringEndWith(b,"/"+k)}))},isUrlContainsServiceType:function(b){b=b.toLowerCase();return D.some(this.serviceTypes,J.hitch(this,function(k){k=k.toLowerCase();return 0<=b.indexOf("/"+k)}))}})})},"jimu/dijit/_GpServiceChooserContent":function(){define(["dojo/_base/declare",
"./_BasicServiceChooserContent","./GpServiceBrowser"],function(E,J,D){return E([J],{baseClass:"jimu-gp-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/myservice/GpServer","http://sampleserver6.arcgisonline.com/arcgis/rest/services/Elevation/ESRI_Elevation_World/GPServer/Viewshed"],_createServiceBrowser:function(H){return new D(H)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(E,J,D,H,y,g,l,b,k,q,n,m,t,v,M){return E([J,D,H,g],{templateString:y,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=q.mixin({},window.jimuNls.common);this.nls=q.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
b.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(p){var x=new l;(this.url=p)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),x=this._onBtnValidateClick()):x.reject();return x},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?k.forEach(this._examples,q.hitch(this,function(x){b.create("div",{innerHTML:x,
"class":"example-url"},this.exampleTd)})):b.setStyle(this.exampleTr,"display","none");var p={multiple:this.multiple,_onTreeClick:q.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(p);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(m.after(this.urlInput,"validator",q.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(n(this.serviceBrowser,"error",q.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(p){},_validateUrl:function(p){p=p.replace(/\/*$/g,"");if((p=p.match(/\/rest\/services\/*(.*)/gi))&&0<p.length)if(p=p[0].replace(/\/rest\/services\/*/,"")){var x=p.split("/");if(1===x.length)return!0;if(2===x.length)return this.serviceBrowser.isServiceTypeSupported(x[1]);if(3<=x.length)return p=this.serviceBrowser.isServiceTypeSupported(x[1]),x=this.serviceBrowser.isServiceTypeSupported(x[2]),p||x}else return!0;else return!1},_afterUrlValidate:function(p){p&&
(p=this.urlInput.get("value"),p=this._validateUrl(p));p?b.removeClass(this.btnValidate,"jimu-state-disabled"):b.addClass(this.btnValidate,"jimu-state-disabled");return p},_onServiceBrowserError:function(p){this._showErrorMessage(p)},_showErrorMessage:function(p){p&&"string"===typeof p?(this.errorNode.innerHTML=p,b.addClass(this.errorSection,"visible")):b.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";b.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var p=new l;if(this.urlInput.validate()){var x=this.urlInput.get("value");this.serviceBrowser.setUrl(x).then(q.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();p.resolve()}),q.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();p.reject()}));this.emit("validate-click")}else p.reject();return p},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?b.removeClass(this.btnOk,"jimu-state-disabled"):
b.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var p=this.getSelectedItems();0<p.length&&this.emit("ok",p)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),
function(E,J,D,H,y,g,l,b,k,q,n,m){return E([k,q,g],{templateString:n,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource;this.nls.customSelectLayer=this.label?this.label:this.nls.selectLayer},postCreate:function(){this.inherited(arguments);this.layerInfosObj=
m.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(H(this.layerChooser,"tree-click",J.hitch(this,this._onTreeClick)));this.own(H(this.layerChooser,"update",J.hitch(this,this._onLayerChooserUpdate)));this.own(H(document.body,"click",J.hitch(this,this._onBodyClicked)));this.own(H(document.body,"keydown",J.hitch(this,function(t){t.keyCode===y.ENTER&&this._onBodyClicked(t)})));
this.own(H(this.layerChooser.domNode,"keydown",J.hitch(this,function(t){t.keyCode===y.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(t){var v=new l;if(t){var M=this.layerInfosObj.getLayerOrTableInfoById(t.id);M?this.layerChooser.filter(M).then(J.hitch(this,function(p){p?(this._onSelectNewItem({layerInfo:M,
name:M.title,url:t.url}),v.resolve(!0)):v.resolve(!1)}),J.hitch(this,function(){v.resolve(!1)})):v.resolve(!1)}else this._onSelectNewItem(null),v.resolve(!0);return v},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(t){t=t.target||t.srcElement;t===this.domNode||D.isDescendant(t,this.domNode)||t===this.layerChooser.domNode||D.isDescendant(t,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(t){t.stopPropagation();
t.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(t){t.keyCode===y.ENTER&&this._onDropDownClick(t)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";b.open({parent:this,popup:this.layerChooser,around:this.domNode});var t=this.layerChooser.domNode.parentNode;t&&(D.addClass(t,"jimu-layer-chooser-from-map-withdropbox-popup"),
this.customClass&&D.addClass(t,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){b.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(t){var v=J.getObject("layerInfo.id",
!1,this._selectedItem)||-1,M=J.getObject("layerInfo.id",!1,t)||-1;v=v!==M;this._selectedItem=t;this.hideLayerChooser();t=J.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=t;D.setAttr(this.layerNameNode,"title",t);t=J.getObject("layerInfo.layerObject",!1,this._selectedItem);v&&this.emit("selection-change",[t])},_onTreeClick:function(){var t=this._getSelectedItems();this._onSelectNewItem(0<t.length?t[0]:null)}})})},"jimu/dijit/ColorPickerButton":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorSelector".split(" "),
function(E,J,D,H,y,g,l,b,k,q){return E([J,D],{baseClass:"jimu-color-picker-btn",declaredClass:"jimu.dijit.ColorPickerButton",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"color-node" data-dojo-attach-point\x3d"colorNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"seperator"\x3e\x3c/div\x3e\x3cdiv class\x3d"action-node" data-dojo-attach-point\x3d"actionNode"\x3e\x3c/div\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showHex:!0,showHsv:!0,showRgb:!0,ensureMode:!1,postMixInProperties:function(){this.nls=
window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.color?this.color instanceof l||(this.color=new l(this.color)):this.color=new l("#ccc");y.setStyle(this.colorNode,"backgroundColor",this.color.toHex());this.colorNode.title=this.color.toHex();this.showLabel&&this._changeLabel(this.color);this._createTooltipDialog(this.domNode);this._hideTooltipDialog();this.own(g(this.colorNode,"click",H.hitch(this,this._onNodeClick)));this.own(g(this.actionNode,"click",H.hitch(this,this._onNodeClick)));
this.own(g(document.body,"click",H.hitch(this,function(n){this.isPartOfPopup(n.target||n.srcElement)||this._hideTooltipDialog()})))},_onNodeClick:function(n){n.stopPropagation();n.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()},destroy:function(){k.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},isPartOfPopup:function(n){var m=this.tooltipDialog.domNode;return n===m||y.isDescendant(n,m)},hideTooltipDialog:function(){this._hideTooltipDialog()},
_showTooltipDialog:function(){k.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){k.close(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var n=y.create("div");this.tooltipDialog=new b({content:n});y.addClass(this.tooltipDialog.domNode,"jimu-color-picker-dialog");this.picker=new q({showHex:this.showHex,showRgb:this.showRgb,showHsv:this.showHsv,value:this.color.toHex(),onChange:H.hitch(this,
function(t){this.ensureMode||(t=new l(t),this.setColor(t))})});this.picker.placeAt(n);this.picker.startup();if(this.ensureMode){var m=y.create("div",{"class":"jimu-btn jimu-btn-vacation jimu-float-trailing jimu-leading-margin1",title:this.nls.cancel,innerHTML:this.nls.cancel},n);this.own(g(m,"click",H.hitch(this,function(){this._hideTooltipDialog()})));m=y.create("div",{"class":"jimu-btn jimu-float-trailing jimu-leading-margin1",title:this.nls.ok,innerHTML:this.nls.ok},n);this.own(g(m,"click",H.hitch(this,
function(){var t=this.picker.get("value");this.setColor(new l(t));this._hideTooltipDialog()})));n=y.create("div",{"class":"jimu-btn jimu-float-trailing jimu-leading-margin1",title:this.nls.apply,innerHTML:this.nls.apply},n);this.own(g(n,"click",H.hitch(this,function(){var t=this.picker.get("value");this.setColor(new l(t))})))}},setColor:function(n){if(n instanceof l){var m=this.color,t="";m&&(t=m.toHex());m=n.toHex();this.color=n;y.setStyle(this.colorNode,"backgroundColor",m);t!==m&&(this.picker.set("value",
m),this.onChange(new l(m)))}},getColor:function(){return this.color},onChange:function(n){}})})},"widgets/SituationAwareness/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/SituationAwareness/setting/FieldPicker.html":'\x3cdiv class\x3d"field-picker-main"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tableArea" class\x3d"tableArea"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"btnAddField" class\x3d"btn-add-section enable"\x3e\r\n      \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"btn-add-label" data-dojo-attach-point\x3d"divLayerTitle"\x3e${nls.addField}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTFieldTableParent" data-dojo-attach-point\x3d"fieldTable"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"jimu-r-row pad-top20" data-dojo-attach-point\x3d"chk_countOnly"\x3e\r\n    \x3cdiv class\x3d"col-1-3" data-dojo-attach-point\x3d"div_chkCountOnly"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"jimu-r-row pad-top20" data-dojo-attach-point\x3d"chk_summary"\x3e\r\n    \x3cdiv class\x3d"col-1-3 esriCTSummaryChk" data-dojo-attach-point\x3d"div_chkCount"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"col-1-3 esriCTSummaryChk" data-dojo-attach-point\x3d"div_chkArea"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"col-1-3 esriCTSummaryChk" data-dojo-attach-point\x3d"div_chkLength"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"jimu-r-row pad-top20" data-dojo-attach-point\x3d"chk_summaryLabels"\x3e\r\n    \x3cdiv class\x3d"col-1-3" data-dojo-attach-point\x3d"div_chkCountLabel"\x3e\r\n      \x3cspan class\x3d"label"\x3e ${nls.count_label}:\x3c/span\x3e\r\n      \x3cinput class\x3d"validationBox" data-dojo-attach-point\x3d"featureCountLabel" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n             disabled\x3d"disabled" title\x3d"${nls.count_label}" /\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"col-1-3" data-dojo-attach-point\x3d"div_chkAreaLabel"\x3e\r\n      \x3cspan class\x3d"label"\x3e ${nls.area_label}:\x3c/span\x3e\r\n      \x3cinput class\x3d"validationBox" data-dojo-attach-point\x3d"featureAreaLabel" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n             disabled\x3d"disabled" title\x3d"${nls.area_label}" /\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"col-1-3" data-dojo-attach-point\x3d"div_chkLengthLabel"\x3e\r\n      \x3cspan class\x3d"label"\x3e ${nls.length_label}:\x3c/span\x3e\r\n      \x3cinput class\x3d"validationBox" data-dojo-attach-point\x3d"featureLengthLabel" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n             disabled\x3d"disabled" title\x3d"${nls.length_label}" /\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- Report options Starts --\x3e\r\n  \x3cdiv class\x3d"esriCTReportOptionsContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTReportOption"\x3e${nls.report_label}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTReportOption" data-dojo-attach-point\x3d"div_chkAnalysisSummary"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTReportOption" data-dojo-attach-point\x3d"div_chkPopUpSummary"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- Report options ends --\x3e\r\n\r\n  \x3cdiv class\x3d"field-picker-footer"\x3e\r\n    \x3cdiv class\x3d"jimu-btn ok" data-dojo-attach-point\x3d"btnOk"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-point\x3d"btnCancel"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/SituationAwareness/setting/FieldOptions.html":'\x3cdiv\x3e\r\n\r\n  \x3cdiv class\x3d"jimu-r-row esriCTPaddingBtm5" title\x3d"${nls.show1KSeparatorLabel}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"chk1KSeparatorDIV"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"jimu-r-row" title\x3d"${nls.modifyValues}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"chkModifyDIV"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3ctable class\x3d"field-option-table"\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"rdo_round" type\x3d"radio" class\x3d"jimu-radio-btn" id\x3d"rdo-round" name\x3d"modifyOptions"\r\n              data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"roundLabel" for\x3d"rdo-round"\x3e${nls.roundValue}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"roundPlaces"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"roundSignificantFigures"\x3e\r\n            \x3clabel\x3e${nls.significantFigures}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n  \r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"rdo_truncate" type\x3d"radio" class\x3d"jimu-radio-btn" id\x3d"rdo-truncate" name\x3d"modifyOptions"\r\n              data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"truncateLabel" for\x3d"rdo-truncate"\x3e${nls.truncateValue}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"truncatePlaces"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"truncateSignificantFigures"\x3e\r\n            \x3clabel\x3e${nls.significantFigures}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\r\n  \x3cdiv class\x3d"field-options-footer"\x3e\r\n    \x3cdiv class\x3d"jimu-btn ok" data-dojo-attach-point\x3d"btnOk"\x3e${nls.common.ok}\x3c/div\x3e\r\n    \x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.common.cancel}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/GpSource.html":'\x3cdiv\x3e\r\n  \x3cdiv style\x3d"display: flex;"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"margin-left: 20px;"\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"source-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container hflc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container flsc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"layers" data-dojo-attach-point\x3d"browserContainer"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/GpServiceBrowser" data-dojo-attach-point\x3d"gpServiceBrowser"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable role\x3d"listbox" aria-haspopup\x3d"true" data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.customSelectLayer}" aria-label\x3d"${nls.customSelectLayer}"\x3e\r\n    \x3ccaption class\x3d"screen-readers-only-no-position"\x3e${nls.customSelectLayer}\x3c/caption\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/SituationAwareness/setting/Setting.html":'\x3cdiv class\x3d"main-section"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tabContainer"\x3e\r\n    \x3c!--Analysis Options Tab--\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"tabOptionsTab" class\x3d"jimu-r-row"\x3e\r\n      \x3c!-- Tabs --\x3e\r\n      \x3cdiv class\x3d"jimu-r-row" style\x3d"margin-bottom: 10px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"btnAddTab" class\x3d"btn-add-section enable"\x3e\r\n          \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"btn-add-label"\x3e${nls.addTab}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"tabTable" data-dojo-type\x3d"jimu/dijit/SimpleTable" data-dojo-props\x3d\'fields:[{name:"layer",title:"${nls.layerName}","class":"label",type:"empty",width:"400px"},{name:"type",title:"${nls.layerType}","class":"label",type:"empty"},{name:"label",title:"${nls.layerLabel}","class":"label",type:"empty"},{name:"actions",title:"${nls.actions}","class":"actions",type:"actions",actions:["up","down","edit","delete"],width:"80px"}]\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- General Settings: Distances --\x3e\r\n      \x3cfieldset class\x3d"fieldSet downloadTabFieldSet"\x3e\r\n        \x3clegend class\x3d"fieldSetLegend"\x3e${nls.general_setting_Label}\x3c/legend\x3e\r\n        \x3cdiv class\x3d"settingsContainer"\x3e\r\n          \x3cdiv class\x3d"jimu-r-row"\x3e\r\n            \x3c!-- Label Settings --\x3e\r\n            \x3cdiv class\x3d"jimu-r-row"\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.incident_label}: \x3c/span\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.locate_incident_label}: \x3c/span\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.buffer_text_lbl}: \x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-r-row pad-row0"\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"incident_label" title\x3d"${nls.incident_label}"\r\n                       class\x3d"validationBox2" data-dojo-type\x3d"dijit/form/ValidationTextBox" /\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"locate_incident_label" title\x3d"${nls.locate_incident_label}"\r\n                       class\x3d"validationBox2" data-dojo-type\x3d"dijit/form/ValidationTextBox" /\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"buffer_lbl" title\x3d"${nls.buffer_text_lbl}" class\x3d"validationBox2" data-dojo-type\x3d"dijit/form/ValidationTextBox" /\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Distance Settings --\x3e\r\n            \x3cdiv class\x3d"jimu-r-row pad-row15"\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.buffer_min_lbl}: \x3c/span\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.buffer_default_lbl}: \x3c/span\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.buffer_max_lbl}: \x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-r-row pad-row0"\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"buffer_min" title\x3d"${nls.buffer_min_lbl}" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'intermediateChanges:true,constraints: {pattern: "#####0.##########", min:0}\'/\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"buffer_default" title\x3d"${nls.buffer_default_lbl}" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'intermediateChanges:true,constraints: {pattern: "#####0.##########", min:0}\'/\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"buffer_max" title\x3d"${nls.buffer_max_lbl}" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'intermediateChanges:true,constraints: {pattern: "#####0.##########", min:0}\'/\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Units Settings --\x3e\r\n            \x3cdiv class\x3d"jimu-r-row pad-row15"\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.units_text_lbl}: \x3c/span\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.maximum_distance_lbl}: \x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-r-row pad-row0"\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cselect class\x3d"select-units" data-dojo-attach-point\x3d"selectUnits" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"txt_maximumDistance" title\x3d"${nls.maximum_distance_lbl}" data-dojo-type\x3d"dijit/form/NumberTextBox" /\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3" data-dojo-attach-point\x3d"div_chk_geodesic"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Checkbox Settings --\x3e\r\n            \x3cdiv class\x3d"jimu-r-row pad-row15"\x3e\r\n              \x3cdiv class\x3d"col-1-3" data-dojo-attach-point\x3d"div_chk_routing"\x3e\x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3" data-dojo-attach-point\x3d"div_chk_visibility"\x3e\x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3" data-dojo-attach-point\x3d"div_chk_display"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Selection Color Settings --\x3e\r\n            \x3cdiv class\x3d"jimu-r-row pad-row15"\x3e\r\n              \x3cdiv class\x3d"col-1-3"\x3e\r\n                \x3cdiv class\x3d"label"\x3e${nls.setSelectionColor}\x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"selectionColorPicker" data-dojo-type\x3d"jimu/dijit/ColorPickerButton"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/fieldset\x3e\r\n\r\n      \x3cdiv class\x3d"jimu-r-row hintText"\x3e\r\n        \x3cp\x3e${nls.weather_removed_message}\x3c/p\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!--Output Options Tab--\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"exportOptionsTab" class\x3d"jimu-r-row"\x3e\r\n      \x3cdiv class\x3d"jimu-r-row" style\x3d"margin-top: 10px;"\x3e\r\n        \x3cfieldset class\x3d"fieldSet downloadTabFieldSet"\x3e\r\n          \x3clegend class\x3d"fieldSetLegend"\x3e${nls.data_label}\x3c/legend\x3e\r\n          \x3cdiv class\x3d"settingsContainer"\x3e\r\n            \x3cdiv class\x3d"jimu-r-row"\x3e\r\n              \x3cdiv class\x3d"col-1-3 pad-right-10"\x3e\r\n                \x3cdiv class\x3d"jimu-r-row hintText"\x3e\r\n                  \x3cp\x3e${nls.instruction_save}\x3c/p\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"div_chk_save"\x3e\x3c/div\x3e\r\n                \x3c!-- Save Options--\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"div_special_tab" class\x3d"jimu-r-row col-1-3" style\x3d"width: 100%;"\x3e      \r\n                  \x3cdiv class\x3d"jimu-r-row div_edit_options" style\x3d"padding-top: 10px;" data-dojo-attach-point\x3d"editOptions"\x3e\r\n                    \x3ctable\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd class\x3d"td-padding"\x3e\r\n                          \x3cdiv data-dojo-attach-point\x3d"div_chk_point_save"\x3e\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd class\x3d"td-padding"\x3e\r\n                          \x3cdiv data-dojo-attach-point\x3d"div_selectPointSaveLayer"\x3e\r\n                            \x3cselect class\x3d"select-width" data-dojo-attach-point\x3d"selectPointSaveLayer" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd class\x3d"td-padding"\x3e\r\n                          \x3cdiv data-dojo-attach-point\x3d"div_chk_line_save"\x3e\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd class\x3d"td-padding"\x3e\r\n                          \x3cdiv data-dojo-attach-point\x3d"div_selectLineSaveLayer"\x3e\r\n                            \x3cselect class\x3d"select-width" data-dojo-attach-point\x3d"selectLineSaveLayer" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd class\x3d"td-padding"\x3e\r\n                          \x3cdiv data-dojo-attach-point\x3d"div_chk_poly_save"\x3e\x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd class\x3d"td-padding"\x3e\r\n                          \x3cdiv data-dojo-attach-point\x3d"div_selectPolySaveLayer"\x3e\r\n                            \x3cselect class\x3d"select-width" data-dojo-attach-point\x3d"selectPolySaveLayer" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/div\x3e  \r\n              \x3c/div\x3e\r\n              \x3c/div\x3e\r\n\r\n              \x3cdiv class\x3d"chk_snapshot col-1-3"\x3e\r\n                \x3cdiv class\x3d"jimu-r-row hintText"\x3e\r\n                  \x3cp\x3e${nls.instruction_snapshot}\x3c/p\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"div_chk_snapshot"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"col-1-3 col-pad-12"\x3e\r\n                \x3cdiv class\x3d"jimu-r-row hintText"\x3e\r\n                  \x3cp\x3e${nls.instruction_all_fields}\x3c/p\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3c!-- exportToCSV Options --\x3e\r\n                \x3cdiv\x3e\r\n                  \x3cdiv style\x3d"padding-bottom: 5px;"\x3e\r\n                    \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group:\'exportFieldsOptionsForCSV\'" data-dojo-attach-point\x3d"allFieldsRadioButton" type\x3d"radio" name\x3d"jimuradiobtn" id\x3d"allFieldsRadioButton"/\x3e\r\n                    \x3clabel class\x3d"jimu-leading-margin025" for\x3d"allFieldsRadioButton" title\x3d"${nls.allFieldsLabel}"\x3e${nls.allFieldsLabel}\x3c/label\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv style\x3d"padding: 5px 0px 5px 0px;"\x3e\r\n                    \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group:\'exportFieldsOptionsForCSV\'" data-dojo-attach-point\x3d"PopUpFieldsRadioButton" type\x3d"radio" name\x3d"jimuradiobtn" id\x3d"PopUpFieldsRadioButton"/\x3e\r\n                    \x3clabel class\x3d"jimu-leading-margin025" for\x3d"PopUpFieldsRadioButton" title\x3d"${nls.configuredPopUpFieldsLabel}"\x3e${nls.configuredPopUpFieldsLabel}\x3c/label\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv style\x3d"padding: 5px 0px 5px 0px;"\x3e\r\n                    \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group:\'exportFieldsOptionsForCSV\'" data-dojo-attach-point\x3d"analysisFieldsRadioButton" type\x3d"radio" name\x3d"jimuradiobtn" id\x3d"analysisFieldsRadioButton"/\x3e\r\n                    \x3clabel class\x3d"jimu-leading-margin025" for\x3d"analysisFieldsRadioButton" title\x3d"${nls.analysisTypeFieldsLabel}"\x3e${nls.analysisTypeFieldsLabel}\x3c/label\x3e\r\n                  \x3c/div\x3e\r\n              \x3c/div\x3e\r\n\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e         \r\n          \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-r-row"\x3e\r\n        \x3c!--Report Settings--\x3e\r\n        \x3cfieldset class\x3d"fieldSet downloadTabFieldSet"\x3e\r\n          \x3clegend class\x3d"fieldSetLegend"\x3e${nls.downloadTab.reportLegend}\x3c/legend\x3e\r\n          \x3cdiv class\x3d"settingsContainer"\x3e\r\n            \x3cdiv class\x3d"jimu-r-row hintText"\x3e\r\n              \x3cp\x3e${nls.instruction_report}\x3c/p\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"chk_report" data-dojo-attach-point\x3d"div_chk_report"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"reportSettingsDiv"\x3e\r\n              \x3cdiv class\x3d"downloadTabInputContainer" style\x3d"padding-top: 10px;" data-dojo-attach-point\x3d"printGPServiceInputContainer"\x3e\r\n                \x3c!--Print Service url LABEL--\x3e\r\n                \x3cdiv class\x3d"downloadTabLabel"\x3e\r\n                  ${nls.downloadTab.printGPServiceLabel}\r\n                \x3c/div\x3e\r\n                \x3c!--Print Service url TEXTBOX--\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"printGPServiceTextBox" class\x3d"downloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                     data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Set BUTTON--\x3e\r\n                \x3cdiv class\x3d"jimu-btn jimu-float-trailing downloadTabSetButton" data-dojo-attach-point\x3d"printGPServiceSetButton"\x3e\r\n                  ${nls.downloadTab.setButtonLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--Logo chooser--\x3e\r\n              \x3cdiv class\x3d"logoChooserMainContainer"\x3e\r\n                \x3cdiv class\x3d"downloadTabLabel"\x3e\r\n                  ${nls.downloadTab.logoLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"logoChooserDiv"\x3e\r\n                  \x3cdiv class\x3d"imageChooserPreviewContainer"\x3e\r\n                    \x3cimg class\x3d"imageChooserPreview" data-dojo-attach-point\x3d"imageChooserPreview"\x3e\r\n                    \x3cdiv class\x3d"logoChooser" data-dojo-attach-point\x3d"logoChooserNode"\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"hint"\x3e\r\n                    ${nls.downloadTab.logoChooserHint}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--Footnote container--\x3e\r\n              \x3cdiv class\x3d"jimu-r-row footnoteContainer"\x3e\r\n                \x3c!--Footnote LABEL--\x3e\r\n                \x3cdiv class\x3d"downloadTabLabel"\x3e\r\n                  ${nls.downloadTab.footnoteLabel}\r\n                \x3c/div\x3e\r\n                \x3c!--Footnote TEXTAREA--\x3e\r\n                \x3ctextarea class\x3d"footnoteTextArea" data-dojo-attach-point\x3d"footnoteTextArea" rows\x3d"4"\x3e\x3c/textarea\x3e\r\n              \x3c/div\x3e\r\n\r\n              \x3c!--Text Color container--\x3e\r\n              \x3cdiv class\x3d"jimu-r-row textColorContainer"\x3e\r\n                \x3c!--Footnote LABEL--\x3e\r\n                \x3cdiv class\x3d"downloadTabLabel"\x3e\r\n                  ${nls.downloadTab.textColorLabel}\r\n                \x3c/div\x3e\r\n                \x3c!--TextColor COLORPICKER--\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPicker" data-dojo-props\x3d\'color:"${_highLightColor}"\' style\x3d"display:inline-block;"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SituationAwareness/setting/css/style.css":".jimu-widget-SAT-setting .main-section {width: 100%; height: 100%;}.jimu-widget-SAT-setting .select-units {width: 70%;}.jimu-widget-SAT-setting .pad-row15 {padding-top: 15px;}.jimu-widget-SAT-setting .pad-row0 {padding-top: 0px;}.jimu-widget-SAT-setting .selectUnits {margin-left: 10px;}.jimu-widget-SAT-setting .chk_display {padding-top: 15px; padding-bottom: 15px;}.jimu-widget-SAT-setting .display-checkbox {padding-bottom: 15px;}.jimu-widget-SAT-setting .chk_snapshot {}.jimu-widget-SAT-setting .maximum-distance-lbl {width: 60px;}.jimu-widget-SAT-setting .btn-add-section {display: inline-block; overflow: hidden; height: 24px; margin-left: 1px; margin-bottom: 3px; cursor: pointer; font-size: 13px; color: #538ec8; margin-top: 8px;}.jimu-widget-SAT-setting .btn-add-disabled {opacity: .6; cursor: default;}.jimu-widget-SAT .validationBox {}.jimu-widget-SAT .validationBox2 {}.jimu-widget-SAT-setting .btn-add-section .btn-add-icon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-SAT-setting .btn-add-section .btn-add-label {height: 100%; line-height: 24px; margin-left: 7px; text-decoration: underline; display: inline-block; vertical-align: top;}.jimu-widget-SAT-setting .settingAlign{padding-top: 4px; margin-left: 80px;}.jimu-rtl .jimu-widget-SAT-setting .settingAlign{padding-top: 4px; margin-right: 80px;}.jimu-widget-SAT-setting .claro .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectWrapper {border: none !important; background-color: transparent !important;}.jimu-widget-SAT-setting .footer {text-align: right;}.jimu-widget-SAT-setting .field-picker-footer {text-align: right;}.jimu-rtl .jimu-widget-SAT-setting .field-picker-footer {text-align: left;}.jimu-widget-SAT-setting .removeButtonWithIcon {background-image: url(\"../images/filterdialog_icons.png\"); background-repeat: no-repeat; background-position: -30px 0; width: 15px; height: 15px; margin: 0px 0px; display: block;}.jimu-widget-SAT-setting .upButton {background-image: url(\"../../../../jimu.js/css/images/up_enabled.png\"); background-repeat: no-repeat; width: 15px; height: 15px; margin: 0px 0px; display: block;}.jimu-widget-SAT-setting .downButton {background-image: url(\"../../../../jimu.js/css/images/down_enabled.png\"); background-repeat: no-repeat; width: 15px; height: 15px; margin: 0px 0px; display: block;}.jimu-widget-SAT-setting .colorButton {width: 15px; height: 15px; margin: 0px 0px; display: block; background-color: #00ff00;}.jimu-widget-SAT-setting .jimu-color-picker-btn .color-node {min-height: 16px;}.jimu-widget-SAT-setting .footer {padding-top: 5px; width: 100%; height: 30px;}.jimu-widget-SAT-setting .field-picker-footer {width: 100%; position: absolute; bottom: 0;}.jimu-widget-SAT-setting .jimu-simple-table .simple-table-cell{line-height: 26px;}.jimu-widget-SAT-setting .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectWrapper {height: 400px;}.jimu-widget-SAT-setting .dojoxMultiSelectItem {padding-bottom: 5px; padding-top: 5px;}.jimu-widget-SAT-setting .longSelect .dijitSelectLabel {text-align: left; text-overflow: ellipsis; overflow: hidden; max-width: 390px;}.jimu-widget-SAT-setting .medSelect .dijitSelectLabel {text-align: left; text-overflow: ellipsis; overflow: hidden; max-width: 340px;}.jimu-widget-SAT-setting .shortSelect .dijitSelectLabel {text-align: left; text-overflow: ellipsis; overflow: hidden; max-width: 190px;}.jimu-widget-SAT-setting .shortTypeSelect .dijitSelectLabel {text-align: left; text-overflow: ellipsis; overflow: hidden; max-width: 155px; min-width: 155px;}.jimu-rtl .jimu-widget-SAT-setting .shortTypeSelect .dijitSelectLabel {text-align: right;}.jimu-widget-SAT-setting .display-options{display: inline-block; margin-right: 30px; vertical-align: middle;}.jimu-widget-SAT-setting .display-on{display: block;}.jimu-widget-SAT-setting .display-off{display: none;}.jimu-widget-SAT-setting .visDivLength {position: absolute; visibility: hidden; width: auto;}.jimu-widget-SAT-setting .field-picker-main {height: 100%; width: 100%; overflow: auto;}.jimu-widget-SAT-setting .pad-top20 {padding-top: 20px;}.jimu-widget-SAT-setting .div_edit_options {padding-top: 5px;}.jimu-widget-SAT-setting .edit_options {padding-top: 15px;}.jimu-widget-SAT-setting .td-padding {padding-bottom: 5px; padding-left: 5px;}.jimu-rtl .jimu-widget-SAT-setting .td-padding {padding-bottom: 5px; padding-right: 5px;}.jimu-widget-SAT-setting .pad-right-10 {padding-right: 10px;}.jimu-rtl .jimu-widget-SAT-setting .pad-right-10 {padding-left: 10px;}.jimu-widget-SAT-setting .select-width {width: 250px;}.jimu-widget-SAT-setting .select-width .dijitSelectLabel {max-width: 250px; text-overflow: ellipsis; text-align: left; overflow: hidden;}.jimu-rtl .jimu-widget-SAT-setting .select-width .dijitSelectLabel {max-width: 250px; text-overflow: ellipsis; text-align: right; overflow: hidden;}.jimu-widget-SAT-setting .hintText {font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-SAT-setting .fieldSet {height: auto; width: 100%; border: 1px solid #a0acbf; border-radius: 5px; font-size: 14px; color: #596679; margin-bottom: 10px; min-width: 0px;}.jimu-widget-SAT-setting .downloadTabFieldSet {padding: 15px 0px;}.jimu-widget-SAT-setting .fieldSetLegend {margin-left: 20px;}.jimu-widget-SAT-setting .col-pad-12 {padding-left: 12px;}.jimu-rtl .jimu-widget-SAT-setting .col-pad-12 {padding-right: 12px;}.jimu-widget-SAT-setting .settingsContainer {margin-left: auto; margin-right: 0px; margin-top: 0px; margin-bottom: 0px; width: 98%;}.jimu-rtl .jimu-widget-SAT-setting .settingsContainer {margin-right: auto; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; width: 98%;}.jimu-widget-SAT-setting .downloadTabInputContainer {width: 100%; float: left; margin-bottom: 15px;}.jimu-widget-SAT-setting .downloadTabLabel {width: 35%; line-height: 30px; float: left; clear: left; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}.jimu-rtl .jimu-widget-SAT-setting .downloadTabLabel {float: right;}.jimu-widget-SAT-setting .downloadTabTextbox {width: 55%; float: left;}.jimu-rtl .jimu-widget-SAT-setting .downloadTabTextbox {float: right;}.jimu-widget-SAT-setting .downloadTabSetButton {width: 8%; float: left; margin-left: 17px; line-height: 28px;}.jimu-rtl .jimu-widget-SAT-setting .downloadTabSetButton {float: right; margin-right: 17px; margin-left: 0px;;}.jimu-widget-SAT-setting .downloadTabLabel {width: 35%; line-height: 30px; float: left; clear: left; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}.jimu-widget-SAT-setting .logoChooserDiv {width: 65%; float: left;}.jimu-rtl .jimu-widget-SAT-setting .logoChooserDiv {float: right;}.jimu-widget-SAT-setting .imageChooserPreviewContainer {position: relative;}.jimu-widget-SAT-setting .imageChooserPreview {position: absolute; height: 55px; background-position: center center; background-repeat: no-repeat;}.jimu-widget-SAT-setting .imageChooserContent {height: 50px !important; width: 50px !important;}.jimu-widget-SAT-setting .hint {margin: 5px 5px 10px 0px; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-rtl .jimu-widget-SAT-setting .hint {float: right;}.jimu-widget-SAT-setting .footnoteTextArea {width: 65% !important; padding: 5px !important; float: right; color: #596679;}.jimu-rtl .jimu-widget-SAT-setting .footnoteTextArea {float: left;}.jimu-widget-SAT-setting .textColorContainer{padding-top: 10px;}.jimu-widget-SAT-setting .field-option-table {border-spacing: 20px;}.jimu-widget-SAT-setting .field-option-table {border-spacing: 20px;}.jimu-widget-SAT-setting .content-disabled {opacity: .6; cursor: default;}.jimu-widget-SAT-setting .content-enabled {}.jimu-widget-SAT-setting .field-options-footer {position: relative; float: right;}.jimu-rtl .jimu-widget-SAT-setting .field-options-footer {float: left;}.jimu-popup .SAT-warning-icon {width: 25px; height: 25px; position: relative; background-size: contain; background-repeat: no-repeat; background-image: url('../images/warning.png'); margin-top: 8px;}.jimu-popup .SAT-warning-hint {color: #898989; font-size: 11px; margin-bottom: 10px;}.jimu-widget-SAT-setting .float-right {float: right; margin-right: 20px;}.jimu-rtl .jimu-widget-SAT-setting .float-right {float: left; margin-left: 20px; margin-right: 0px;}.jimu-widget-SAT-setting .edit-options {display: block; width: 18px; height: 16px; background-repeat: no-repeat;}.jimu-widget-SAT-setting .edit-fields-disabled {background-image: url('../css/images/edit_disabled.png'); cursor: default;}.jimu-widget-SAT-setting .edit-fields {background-image: url('../css/images/edit_default.png'); cursor: pointer;}.jimu-widget-SAT-setting .edit-fields:hover {background-image: url('../css/images/edit_hover.png');}.jimu-widget-SAT-setting .margin-left {margin-left: 20px;}.jimu-rtl .jimu-widget-SAT-setting .margin-left {margin-right: 20px;}.jimu-widget-SAT-setting .esriCTReportOptionsContainer {padding-top: 10px; width: 100%;}.jimu-widget-SAT-setting .esriCTReportOption {padding: 5px 0px 5px 0px; width: 100%;}.jimu-widget-SAT-setting .esriCTFieldTableParent .jimu-simple-table {max-height: 190px;}.jimu-widget-SAT-setting .esriCTPaddingBtm5 {padding-bottom: 5px;}.jimu-widget-SAT-setting .esriCTSummaryChk .jimu-checkbox .label{width: 190px;}.jimu-widget-SAT-setting .esriCTSummaryChk .jimu-checkbox {align-items: start;}",
"*now":function(E){E(['dojo/i18n!*preload*widgets/SituationAwareness/setting/nls/Setting*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Color dojo/dom-style dojo/promise/all dojo/Deferred dojo/Evented dojo/on dojo/query dojo/dom-attr dojo/string dijit/form/Select dijit/form/ValidationTextBox dijit/_WidgetsInTemplateMixin dijit/focus ./FieldPicker esri/lang jimu/dijit/FeaturelayerChooserFromMap jimu/BaseWidgetSetting jimu/dijit/Message jimu/dijit/Popup jimu/dijit/TabContainer3 jimu/dijit/GpSource jimu/LayerInfos/LayerInfos jimu/dijit/CheckBox dojo/dom-class dojo/dom-construct dojo/keys dijit/registry jimu/dijit/ImageChooser jimu/portalUtils jimu/utils jimu/dijit/LayerChooserFromMapWithDropbox jimu/dijit/RadioBtn jimu/dijit/SimpleTable jimu/dijit/ColorPicker jimu/dijit/ColorPickerButton".split(" "),function(E,
J,D,H,y,g,l,b,k,q,n,m,t,v,M,p,x,u,B,w,z,I,K,O,f,d,h,G,N,P,S,U,R,Y){return E([w,M,b],{baseClass:"jimu-widget-SAT-setting",opLayers:[],curRow:null,validFields:[],saveValid:!0,textValid:!0,bufferValid:!0,skipLayers:[],_selectedLayerIds:[],_allLayers:[],_highLightColor:"#0f96cc",postCreate:function(){this.inherited(arguments);this._initCheckBoxes();this.updateTabs();this._initTabs();this._initReport();this.nls=D.mixin(D.mixin(this.nls,window.jimuNls.units),window.jimuNls.temperature);this._initLayerChooser();
this.addSelectUnitOptions();this._getAllLayers();this.own(k(this.tabTable,"actions-edit",D.hitch(this,this._onEditLayerClicked)));this.own(k(this.tabTable,"row-delete",D.hitch(this,this._rowDeleted)));this.own(k(this.tabTable,"row-up",D.hitch(this,this._moveRow,!0)));this.own(k(this.tabTable,"row-down",D.hitch(this,this._moveRow,!1)));this.tabTable.onBeforeRowDelete=D.hitch(this,this._onBeforeDelete);this._addValidator(this.incident_label,this.checkSmallString,this.nls.invalid_string_width);this._addValidator(this.locate_incident_label,
this.checkLargeString,this.nls.invalid_string_width);this._addValidator(this.buffer_lbl,this.checkLargeString,this.nls.invalid_string_width);this._addValidator(this.buffer_min,this.checkMin,this.nls.not_less_than_max);this._addValidator(this.buffer_default,this.checkBetween,this.nls.not_between);this._addValidator(this.buffer_max,this.checkMax,this.nls.not_more_than_min);this.own(k(this.buffer_min,"keyup",D.hitch(this,this._validateBuffer)));this.own(k(this.buffer_default,"keyup",D.hitch(this,this._validateBuffer)));
this.own(k(this.buffer_max,"keyup",D.hitch(this,this._validateBuffer)));var e=function(){this.set("value",isNaN(this.value)?0:this.value)};this.own(k(this.buffer_min,"blur",e));this.own(k(this.buffer_default,"blur",e));this.own(k(this.buffer_max,"blur",e))},_initCheckBoxes:function(){this.chk_routing=this._initCheckBox(this.nls.routing_checkBox,this.div_chk_routing);this.chk_visibility=this._initCheckBox(this.nls.visibility_checkBox,this.div_chk_visibility);this.chk_display=this._initCheckBox(this.nls.display_checkbox,
this.div_chk_display);this.chk_save=this._initCheckBox(this.nls.save_checkbox,this.div_chk_save);this.chk_snapshot=this._initCheckBox(this.nls.snapshot_checkbox,this.div_chk_snapshot);this.chk_point_save=this._initCheckBox(this.nls.save_point_checkbox,this.div_chk_point_save);this.chk_line_save=this._initCheckBox(this.nls.save_line_checkbox,this.div_chk_line_save);this.chk_poly_save=this._initCheckBox(this.nls.save_poly_checkbox,this.div_chk_poly_save);this.chk_report=this._initCheckBox(this.nls.report_checkbox,
this.div_chk_report);this.chk_geodesic=this._initCheckBox(this.nls.drawGeodesic,this.div_chk_geodesic)},_initCheckBox:function(e,r){var A=new d;A.setLabel(e);A.placeAt(r);return A},_initLayerChooser:function(){this._selectedLayerIds=[];this._allLayers=[];this.layerChooserFromMap=new B({multiple:!1,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,createMapResponse:this.map.webMapResponse});this.layerChooserFromMap.startup();var e=this.layerChooserFromMap.layerInfosObj.getLayerInfoArray(),
r=[];this._getAllFilteredLayers(e,r);g(r).then(D.hitch(this,function(){0<this._allLayers.length?this.own(k(this.btnAddTab,"click",D.hitch(this,this._addTabRow))):(y.set(this.btnAddTab,"display","none"),y.set(this.tabOptionsTab,"margin-top","10px"),new z({message:this.nls.missingLayerInWebMap}),this.noValidLayers=!0)}))},_getAllFilteredLayers:function(e,r){J.forEach(e,D.hitch(this,function(A){if(A.isLeaf()){var C=new l;this.layerChooserFromMap.filter(A).then(D.hitch(this,function(a){a&&this._allLayers.push(A);
C.resolve()}));r.push(C)}else this._getAllFilteredLayers(A.newSubLayers,r)}))},updateTabs:function(){if(this.config&&this.config.tabs&&this.config.tabs.length)for(var e=this.config.tabs,r=0;r<e.length;r++){var A=e[r];A.type&&"weather"===A.type&&e.splice(r,1)}},_addValidator:function(e,r,A){e.invalidMessage=A;e.validator=D.hitch(this,r,e)},_validateBuffer:function(e){var r=[N.RIGHT_ARROW,N.LEFT_ARROW,190,110,13];if(!(e&&e.keyCode&&-1<r.indexOf(e.keyCode))){r=this.buffer_min.validate();var A=this.buffer_default.validate(),
C=this.buffer_max.validate();this.bufferValid=r&&A&&C;if(r||A||C)!r&&C&&A&&(p.focus(this.buffer_min.domNode),this.buffer_min.domNode.blur()),!A&&C&&r&&(p.focus(this.buffer_default.domNode),this.buffer_default.domNode.blur()),!C&&r&&A&&(p.focus(this.buffer_max.domNode),this.buffer_max.domNode.blur());e&&e.target?p.focus(e.target):p.focus(this.domNode);this.textValid&&this.saveValid&&this._validateRows()&&this.bufferValid?this._enableOk():this._disableOk()}},_initReport:function(){this.own(k(this.chk_report,
"change",D.hitch(this,function(e){this._updateDisplay(this.reportSettingsDiv,e)})));this._setPrintTaskURL();this._setFootnote();this._setReportTextColor();this.own(k(this.printGPServiceSetButton,"click",D.hitch(this,function(){var e=new O({portalUrl:this.appConfig.portalUrl}),r=this._onSetButtonClick(e);this._attachPrintReportGPSourceEvents(e,r)})));this._initImageChooser()},_setPrintTaskURL:function(){if(this.reportSettings&&this.reportSettings.printTaskURL&&""!==this.reportSettings.printTaskURL)this.printGPServiceTextBox.set("value",
this.reportSettings.printTaskURL),this._printTaskURL=this.reportSettings.printTaskURL;else{var e=U.getPortal(this.appConfig.portalUrl).helperServices;e&&e.printTask.url&&(this.printGPServiceTextBox.set("value",e.printTask.url),this._printTaskURL=e.printTask.url)}},_setFootnote:function(){this.reportSettings&&this.reportSettings.footnote&&""!==this.reportSettings.footnote&&(this.footnoteTextArea.value=this.reportSettings.footnote)},_setReportTextColor:function(){this.reportSettings&&this.reportSettings.textColor&&
this.colorPicker.setColor(new H(this.reportSettings.textColor))},addSelectUnitOptions:function(){this.selectUnits.addOption([{label:this.nls.miles,value:"miles",selected:!0},{label:this.nls.kilometers,value:"kilometers",selected:!1},{label:this.nls.feet,value:"feet",selected:!1},{label:this.nls.meters,value:"meters",selected:!1},{label:this.nls.yards,value:"yards",selected:!1},{label:this.nls.nauticalMiles,value:"nauticalMiles",selected:!1}])},startup:function(){this.inherited(arguments)},_initTabs:function(){this._tabsContainer=
new K({tabs:[{title:this.nls.tab_options,content:this.tabOptionsTab},{title:this.nls.export_options,content:this.exportOptionsTab}]},this.tabContainer);this.own(k(this._tabsContainer,"tabChanged",D.hitch(this,function(){this._tabsContainer.containerNode.scrollTop=0})));this._tabsContainer.startup()},setConfig:function(e){this.config=e;this.config.distanceUnits&&this.selectUnits.setValue(this.config.distanceUnits);this.config.maxDistance&&this.txt_maximumDistance.setValue(this.config.maxDistance);
this.config.enableRouting&&this.chk_routing.setValue(!0);this.config.drawGeodesic&&this.chk_geodesic.setValue(!0);e=[];this.tabTable.clear();for(var r=0;r<this.config.tabs.length;r++){var A=this._populateTabTableRow(this.config.tabs[r]);A&&e.push(A)}this._handleMissingLayers(e);this.incident_label.set("value",this.config.incidentLabel?this.config.incidentLabel:this.nls.incident);this.locate_incident_label.set("value",this.config.locateIncidentLabel?this.config.locateIncidentLabel:this.nls.locate_incident);
this.buffer_lbl.set("value",this.config.bufferLabel?this.config.bufferLabel:this.nls.buffer_value);this.buffer_max.set("value",this.config.bufferRange.maximum);this.buffer_min.set("value",this.config.bufferRange.minimum);this.buffer_default.set("value","undefined"!==typeof this.config.bufferRange._default?this.config.bufferRange._default:this.config.bufferRange.minimum);this._validateBuffer();this.config.disableVisibilityManagement&&this.chk_visibility.setValue(!0);this.config.saveEnabled&&"undefined"===
typeof this.config.savePolys&&"undefined"===typeof this.config.saveLines&&"undefined"===typeof this.config.savePoints&&(this.config.savePolys=!0,this.config.polyEditLayer=this.config.editLayer);e=!1;e=this._updateEditUI(this.save_point_layers,this.chk_point_save,this.div_selectPointSaveLayer,this.config.savePoints,this.selectPointSaveLayer,this.config.pointEditLayer)?!0:e;e=this._updateEditUI(this.save_line_layers,this.chk_line_save,this.div_selectLineSaveLayer,this.config.saveLines,this.selectLineSaveLayer,
this.config.lineEditLayer)?!0:e;this._updateEditUI(this.save_poly_layers,this.chk_poly_save,this.div_selectPolySaveLayer,this.config.savePolys,this.selectPolySaveLayer,this.config.polyEditLayer)||e?(this.own(k(this.chk_save,"change",D.hitch(this,function(C){this._updateDisplay(this.editOptions,C)}))),this.chk_save.setValue(this.config.saveEnabled),this._updateDisplay(this.editOptions,this.config.saveEnabled),this.config.saveEnabled&&this.config.editTemplate&&(this.selectedTemplate=this.config.editTemplate,
"undefined"!==typeof this.config.selectedTemplateIndex&&(this.selectedTemplateIndex=this.config.selectedTemplateIndex))):(this.chk_save.setStatus(!1),this._updateDisplay(this.editOptions,!1));this.config.hasOwnProperty("exportFieldsOptionForCSV")?"analysis"===this.config.exportFieldsOptionForCSV?this.analysisFieldsRadioButton.set("checked",!0):"popUpFields"===this.config.exportFieldsOptionForCSV?this.PopUpFieldsRadioButton.set("checked",!0):this.allFieldsRadioButton.set("checked",!0):this.config.hasOwnProperty("csvAllFields")&&
(this.config.csvAllFields?this.allFieldsRadioButton.set("checked",!0):this.analysisFieldsRadioButton.set("checked",!0));this.chk_display.setValue(this.config.summaryDisplayEnabled);this.config.selectionColor?this.selectionColorPicker.setColor(new H(this.config.selectionColor)):R.getStyleColorInTheme().then(D.hitch(this,function(C){C&&this.selectionColorPicker.setColor(new H(C))}));this.chk_snapshot.setValue(this.config.snapshotEnabled||!1);this.chk_report.setValue(this.config.reportEnabled||!1);this._updateDisplay(this.reportSettingsDiv,
this.config.reportEnabled||!1);this.reportSettings=this.config.reportSettings;this._setPrintTaskURL();this._setFootnote();this._setReportTextColor();this._createLogoPreview();this.noValidLayers&&this._disableOk()},_handleMissingLayers:function(e){if(0<e.length){var r="";J.forEach(e,D.hitch(this,function(A){r+=u.substitute({name:A},this.nls.missingLayer)+"\x3c/br\x3e\x3c/br\x3e"}));e=G.create("div",{style:"max-height:500px;overflow:auto;"});G.create("div",{className:"SAT-warning-hint",innerHTML:this.nls.missingLayerHint},
e);G.create("div",{innerHTML:r.substr(0,r.lastIndexOf("\x3c/br\x3e\x3c/br\x3e")),style:"padding-"+(window.isRTL?"right":"left")+": 10px;"},e);new z({titleLabel:"\x3cdiv class\x3d'SAT-warning-icon' style\x3d'float: "+(window.isRTL?"right; margin-left":"left; margin-right")+": 10px;'\x3e\x3c/div\x3e"+this.nls.layerNotAvalible,message:e,maxWidth:350})}},_updateEditUI:function(e,r,A,C,a,c){var F=!1;"undefined"!==typeof e&&0<e.length?(F=!0,r.onChange=D.hitch(this,function(L){this._updateDisplay(A,L)}),
a.addOption(e),e=!1,"undefined"!==typeof C&&(e=C)&&a.set("value",c),r.setValue(e),this._updateDisplay(A,e)):(r.setStatus(!1),r.setValue(!1),this._updateDisplay(A,!1));return F},_updateDisplay:function(e,r){h.contains(e,r?"display-off":"display-on")&&h.remove(e,r?"display-off":"display-on");h.add(e,r?"display-on":"display-off");(this.saveValid=this._validateSave())&&this._validateRows()&&this.textValid&&this.bufferValid?this._enableOk():this._disableOk()},_validateRows:function(){var e=!0,r=this.tabTable.getRows();
J.forEach(r,function(A){e=!1===A.isValid?A.isValid:e});return e},_validateSave:function(){var e=!1;if(this.chk_save.getValue()){if(this.chk_point_save.getValue()||this.chk_line_save.getValue()||this.chk_poly_save.getValue())e=!0}else e=!0;return e},getConfig:function(){var e=[],r={},A=this.tabTable.getRows();J.forEach(A,D.hitch(this,function(C){var a=C.selectTypes,c=C.labelText,F=C.selectLayers.getSelectedItem();r={};r.label=c.value;r.type=a.value;r.layerTitle=F.layerInfo.title;r.layers=F.layerInfo.id;
C.tabInfo&&C.tabInfo.advStat?r.advStat=C.tabInfo.advStat:C.validFields&&(c=new x({test:!0,nls:this.nls}),r.advStat=c.getDefaultFields(C.validFields.popUpFields,C.validFields.validSummaryFields,a.value));e.push(r)}));this.config.tabs=e;this.config.incidentLabel=this.incident_label.value;this.config.locateIncidentLabel=this.locate_incident_label.value;this.config.bufferLabel=this.buffer_lbl.value;this.config.bufferRange.maximum=this.buffer_max.value;this.config.bufferRange.minimum=this.buffer_min.value;
this.config.bufferRange._default=this.buffer_default.value;this.config.distanceUnits=this.selectUnits.value;this.config.disableVisibilityManagement=this.chk_visibility.getValue();this.config.enableRouting=this.chk_routing.getValue();this.config.saveEnabled=this.chk_save.getValue();this.config.savePoints=this.chk_point_save.getValue();this.config.drawGeodesic=this.chk_geodesic.getValue();this.config.savePoints&&(this.config.pointEditLayer=this.selectPointSaveLayer.value);this.config.saveLines=this.chk_line_save.getValue();
this.config.saveLines&&(this.config.lineEditLayer=this.selectLineSaveLayer.value);this.config.savePolys=this.chk_poly_save.getValue();this.config.savePolys&&(this.config.polyEditLayer=this.selectPolySaveLayer.value);this.txt_maximumDistance.value&&(this.config.maxDistance=this.txt_maximumDistance.value);this.config.selectionColor=this.selectionColorPicker.getColor().toHex();this.allFieldsRadioButton.checked&&(this.config.exportFieldsOptionForCSV="allFields");this.PopUpFieldsRadioButton.checked&&(this.config.exportFieldsOptionForCSV=
"popUpFields");this.analysisFieldsRadioButton.checked&&(this.config.exportFieldsOptionForCSV="analysis");this.config.summaryDisplayEnabled=this.chk_display.getValue();this.config.snapshotEnabled=this.chk_snapshot.getValue();this.config.reportEnabled=this.chk_report.getValue();this.config.reportSettings={printTaskURL:this.getPrintReportGPServiceURL(),footnote:this.getFootnoteForReport(),logo:this.getLogo(),textColor:this.colorPicker.getColor().toHex()};return this.config},_getAllLayers:function(){this.map.itemId&&
f.getInstance(this.map,this.map.itemInfo).then(D.hitch(this,function(e){this.opLayers=e;this._setLayers();this._setTypes();this.setConfig(this.config)}))},_setLayers:function(){var e=[],r=[],A=[],C=[];this.skipLayers=[];J.forEach(this.opLayers.getLayerInfoArray(),D.hitch(this,function(F){0<F.newSubLayers.length?this._recurseOpLayers(F.newSubLayers,e,r,A,C):this._checkSkipLayer(F).then(D.hitch(this,function(L){L||(e.push({label:F.title,value:F.id}),F.layerObject&&this._updateEditOptions(F,r,A,C))}))}));
if(0<this.skipLayers.length){var a="",c;J.forEach(this.skipLayers,function(F){c=null!==F.type&&void 0!==F.type?"collection"===F.type?"Feature Collection":F.type:"";a+="Layer Name: "+F.name+"\r\nLayer Type: "+c+"\r\n\r\n"});new z({titleLabel:this.nls.layer_type_not_supported,message:"\x3cdiv style\x3d'max-height: 500px; overflow: auto;'\x3e"+a+"\x3c/div\x3e",maxWidth:450})}this.layer_options=D.clone(e);this.checkFields();this.save_point_layers=D.clone(r);this.save_line_layers=D.clone(A);this.save_poly_layers=
D.clone(C)},checkFields:function(){this.validFields=[];for(var e,r=0;r<this.layer_options.length;r++)e=new x({nls:this.nls,callerLayer:this.layer_options[r].value,callerOpLayers:this.opLayers.getLayerInfoArray(),map:this.map,test:!0,callerTab:{type:"closest"}}),e._validatePopupFields().then(D.hitch(this,function(A){this.validFields.push(A)}))},_recurseOpLayers:function(e,r,A,C,a){J.forEach(e,D.hitch(this,function(c){0<c.newSubLayers.length?this._recurseOpLayers(c.newSubLayers,r,A,C,a):this._checkSkipLayer(c).then(D.hitch(this,
function(F){F||(r.push({label:c.title,value:c.id}),c.layerObject&&this._updateEditOptions(c,A,C,a))}))}))},_checkSkipLayer:function(e){var r=new l,A=["ArcGISFeatureLayer","ArcGISMapServiceLayer","Feature Layer","FeatureLayer"],C=!1;e.getLayerType().then(D.hitch(this,function(a){e.layerObject&&(e.layerObject.hasOwnProperty("tileInfo")&&(C=!0),e.layerObject.url&&(-1<e.layerObject.url.indexOf("ImageServer")||-1<e.layerObject.url.indexOf(".csv"))&&(C=!0),a&&-1===A.indexOf(a)&&(C=!0),e.layerObject.url||
(C=!0));C&&this.skipLayers.push({name:e.title,type:a});r.resolve(C)}));return r.promise},_updateEditOptions:function(e,r,A,C){var a=e.layerObject,c=a.capabilities,F;(c&&0<c.indexOf("Edit")||c&&0<c.indexOf("Create"))&&e.controlPopupInfo&&e.controlPopupInfo.enablePopup&&("esriGeometryPoint"===a.geometryType?F=r:"esriGeometryPolyline"===a.geometryType?F=A:"esriGeometryPolygon"===a.geometryType&&(F=C),"undefined"!==typeof F&&F.push({label:e.title,value:e.id,selected:!1}))},_setTypes:function(){this.analysis_options=
[{value:"closest",label:this.nls.closest},{value:"proximity",label:this.nls.proximity},{value:"summary",label:this.nls.summary},{value:"groupedSummary",label:this.nls.groupedSummary}]},_populateTabTableRow:function(e){var r="undefined"!==typeof e.layerTitle?e.layers:this.getLayerID(e.layers);if(r=this.opLayers.getLayerInfoById(r)){var A=this.tabTable.addRow({});if(A.success&&A.tr){var C=A.tr;C.tabInfo=e;this._addTabLayers(C);this._addTabTypes(C);this._addTabLabel(C);this.layerExists(C.selectLayers.options,
e)||C.selectLayers.invalidValues.push(e.layers);r.getLayerObject().then(D.hitch(this,function(a){C.selectLayers.setSelectedLayer(a)}));C.selectTypes.set("value",e.type,!1);C.type=e.type;C.labelText.set("value",e.label)}return!1}return e.layerTitle||e.layers},getLayerID:function(e){for(var r=0;r<this.layer_options.length;r++){var A=this.layer_options[r];if(e===A.label||e===A.value)return A.value}},_onBeforeDelete:function(e){this._selectedLayerIds.splice(e.rowIndex,1);return!0},_rowDeleted:function(e){e.selectLayers&&
e.selectLayers.destroy();e=this.tabTable.getRows();for(var r=!0,A=0;A<e.length;A++)if(!e[A].isValid){r=!1;break}r?this._enableOk():this._disableOk()},_moveRow:function(e,r){var A=this._selectedLayerIds[r.rowIndex],C=e?r.rowIndex+1:r.rowIndex-1,a=this._selectedLayerIds[C];this._selectedLayerIds.splice(e?r.rowIndex:C,2,e?a:A,e?A:a)},_getLayerList:function(){return this._selectedLayerIds.length<this._allLayers.length?J.filter(this._allLayers,D.hitch(this,function(e){return 0>this._selectedLayerIds.indexOf(e.id)})):
this._allLayers},_addTabRow:function(){var e=this.tabTable.addRow({});if(e.success&&e.tr){e=e.tr;var r=this._getLayerList();this._addTabLayers(e,r[0]);this._addTabTypes(e);this._addTabLabel(e)}},_addTabLayers:function(e,r){var A=D.clone(this.layer_options),C=q(".simple-table-cell",e)[0];if(C){var a=new B({multiple:!1,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,createMapResponse:this.map.webMapResponse});a.startup();A=new Y({layerChooser:a,options:A,isValid:this.validateLayer,required:!0,
invalidValues:[],row:e});A.placeAt(C);A.startup();e.selectLayers=A;A._missingMsg=this.nls.layer_error;this.own(k(A,"selection-change",function(c){this.emit("used-layer-change",{layer:c[0],rowIndex:this.row.rowIndex});c=this.domNode.parentNode;c.parentNode.selectTypes&&(c.parentNode.selectTypes.validate(),p.focus(c.parentNode.selectTypes.domNode),c.parentNode.selectTypes.domNode.blur());c=q(".jimu-simple-table")[0];p.focus(c);p.focus(this.domNode)}));this.own(k(A,"used-layer-change",D.hitch(this,function(c){this._selectedLayerIds[c.rowIndex]=
c.layer.id})));r&&r.getLayerObject().then(D.hitch(this,function(c){e.selectLayers.setSelectedLayer(c)}));p.focus(A.domNode);A.domNode.blur();r=q(".jimu-simple-table")[0];p.focus(r)}},_addTabTypes:function(e){var r=D.clone(this.analysis_options),A=q(".simple-table-cell",e)[1];A&&(r=new t({style:{width:"100%",height:"26px"},required:!0,isValid:this.validateType,validFields:this.validFields,options:r,row:e,parent:this,parentTable:this.tabTable,nls:this.nls,"class":"shortTypeSelect"}),r.placeAt(A),r.startup(),
r._missingMsg=this.nls.need_group_field,r.on("change",function(){this.row.type!==this.value&&this.row.tabInfo&&delete this.row.tabInfo.advStat;this.domNode.blur();var C=q(".jimu-simple-table")[0];this.row.type=this.value;p.focus(C)}),e.selectTypes=r,p.focus(r.domNode),r.domNode.blur(),e=q(".jimu-simple-table")[0],p.focus(e))},layerExists:function(e,r){var A=r.layers,C=!1;J.forEach(e,function(a){C||(C=a.value===A)});return C},validateLayer:function(){var e=-1===this.invalidValues.indexOf(this.value),
r=this.row.querySelectorAll(".jimu-icon-edit")[0];e?h.contains(r,"jimu-state-disabled")&&h.remove(r,"jimu-state-disabled"):h.add(r,"jimu-state-disabled");this.row.selectTypes&&(this.row.selectTypes.disabled=!e);return e},validateType:function(){var e=this.row,r=this.value,A=!0,C=e.tabInfo,a=!0,c;C&&e&&e.type&&C.type!==e.type&&"groupedSummary"!==C.type&&(C=void 0);C&&C.advStat&&C.advStat.stats?c=C.advStat.stats:a=!1;for(var F=0;F<this.validFields.length;F++){var L=this.validFields[F],Q=e.selectLayers.getSelectedItem();
if(Q&&L.layer===Q.layerInfo.id){e.validFields=L;if("summary"===r)c&&(c.hasOwnProperty("min")||c.hasOwnProperty("max")||c.hasOwnProperty("avg")||c.hasOwnProperty("sum")||c.hasOwnProperty("count")||c.hasOwnProperty("area")||c.hasOwnProperty("length")||(a=!1)),a||L.hasSummaryPopupFields||(this._missingMsg=L.hasSummaryFields?this.nls.no_valid_popup_fields:this.nls.no_valid_fields,A=!1);else if("groupedSummary"===r){if(this._missingMsg=this.nls.need_group_field,c&&!c.hasOwnProperty("pre")&&!c.hasOwnProperty("suf")||
!a)A=!1}else(a=c&&c.outFields?0<c.outFields.length:!1,a||"undefined"!==typeof C||L.hasPopupFields)?a||L.hasPopupFields||(this._missingMsg=L.hasPopupFields?this.nls.no_valid_fields:this.nls.no_valid_popup_fields,A=!1):(this._missingMsg=this.nls.no_valid_popup_fields,A=!1);break}}e.isValid=A;e.isEditable=!0;e=e.querySelectorAll(".jimu-icon-edit")[0];h.contains(e,"jimu-state-disabled")&&h.remove(e,"jimu-state-disabled");r=this.parentTable.getRows();e=!0;for(C=0;C<r.length;C++)if(!r[C].isValid){e=!1;
break}r=this.parent;e&&r.saveValid&&r.textValid&&r.bufferValid?this.parent._enableOk():this.parent._disableOk();return A},validatePattern:function(e){return!isNaN(R.parseNumber(R.localizeNumber(e)))},checkMax:function(e,r){r=r.toString();r=R.parseNumber(R.localizeNumber(r));var A=R.parseNumber(R.localizeNumber(this.buffer_min.value));if(isNaN(r)||isNaN(A))return e.invalidMessage=this.nls.not_valid_number,this.validatePattern();e.invalidMessage=this.nls.not_more_than_min;return A<r},checkBetween:function(e,
r){var A=R.parseNumber(R.localizeNumber(this.buffer_min.value));r=r.toString();r=R.parseNumber(R.localizeNumber(r));var C=R.parseNumber(R.localizeNumber(this.buffer_max.value));if(isNaN(A)||isNaN(C)||isNaN(r))return e.invalidMessage=this.nls.not_valid_number,this.validatePattern();e.invalidMessage=this.nls.not_between;return r>=A&&r<=C},checkMin:function(e,r){r=r.toString();r=R.parseNumber(R.localizeNumber(r));var A=R.parseNumber(R.localizeNumber(this.buffer_max.value));if(isNaN(r)||isNaN(A))return e.invalidMessage=
this.nls.not_valid_number,this.validatePattern();e.invalidMessage=this.nls.not_less_than_max;return r<A},checkSmallString:function(e,r){return this.checkString(e,r,180)},checkLargeString:function(e,r){return this.checkString(e,r,260)},checkString:function(e,r,A){r=G.create("div",{"class":"visDivLength",id:"SA_VisDiv",innerHTML:r},e.domNode);A=r.clientWidth<A?!0:!1;G.destroy(r);this.textValid=A;var C=P.byNode(e.domNode).id;q(".validationBox2").forEach(D.hitch(this,function(a){a=P.byNode(a);C!==a.id&&
(this.textValid=this.textValid?"Error"!==a.state:this.textValid)}));this.textValid&&this.saveValid&&this._validateRows()&&this.bufferValid?this._enableOk():this._disableOk();return A},_addTabLabel:function(e){var r=q(".simple-table-cell",e)[2],A=new v({style:{width:"100%",height:"26px"}});A.placeAt(r);A.startup();e.labelText=A},_onEditLayerClicked:function(e){this.curRow=e;if(e.isEditable){var r=e.selectLayers.getSelectedItem(),A=e.tabInfo;A||(A={},A.label=e.labelText.value,A.type=e.selectTypes.value,
A.layers=r.layerInfo.id,A.advStat={},e.tabInfo=A);var C="undefined"!==typeof A.layerTitle?A.layers:this.getLayerID(A.layers);if(A.type!==e.selectTypes.value||C!==r.layerInfo.id)A.type=e.selectTypes.value,A.layers=r.layerInfo.id,A.advStat={};e={nls:this.nls,callerLayer:r.layerInfo.id,callerTab:A,callerOpLayers:this.opLayers.getLayerInfoArray(),map:this.map};var a=new x(e),c=new I({width:830,height:560,content:a,titleLabel:this.nls.selectFields+": "+r.layerInfo.title});this.own(k(a,"ok",D.hitch(this,
function(F){this.curRow.tabInfo.advStat=F;F=this.curRow.selectTypes.domNode;this.curRow.selectTypes.validate();p.focus(F);p.focus(F.parentNode.offsetParent);this.curRow=null;a.destroy();a=null;c.close()})));this.own(k(a,"cancel",D.hitch(this,function(){this.curRow=null;a.destroy();a=null;c.close()})))}},_disableOk:function(){var e=q(".button-container")[0];y.set(e.children[0],"display","none");y.set(e.children[1],"display","inline-block")},_enableOk:function(){var e=q(".button-container")[0];y.set(e.children[0],
"display","inline-block");y.set(e.children[1],"display","none")},getLogo:function(){return this.logoChooser&&this.logoChooser.imageData?this.logoChooser.getImageData():this.reportSettings&&this.reportSettings.logo?this.reportSettings.logo:"${appPath}/widgets/SituationAwareness/images/defaultLogo.png"},_createLogoPreview:function(){var e=this.folderUrl+"/images/defaultLogo.png";if(this.reportSettings&&this.reportSettings.logo){var r=this.reportSettings.logo;-1<r.indexOf("${appPath}")?(e=this.folderUrl.slice(0,
this.folderUrl.lastIndexOf("widgets")),e=m.substitute(r,{appPath:e})):e=r}n.set(this.imageChooserPreview,"src",e)},_initImageChooser:function(){this.logoChooser=new S({cropImage:!1,showSelfImg:!1,goldenWidth:50,goldenHeight:50,displayImg:this.imageChooserPreview,format:[S.GIF,S.PNG,S.JPEG]});this.logoChooser.placeAt(this.logoChooserNode);this._createLogoPreview();h.add(this.logoChooser.domNode,"imageChooserContent")},getFootnoteForReport:function(){return this.footnoteTextArea.value?this.footnoteTextArea.value:
""},getPrintReportGPServiceURL:function(){return this._printTaskURL?this._printTaskURL:""},_attachPrintReportGPSourceEvents:function(e,r){this.own(k(e,"ok",D.hitch(this,function(A){A&&0<A.length&&A[0].url?(this.printGPServiceTextBox.set("value",A[0].url),this._printTaskURL=A[0].url):(this.printGPServiceTextBox.set("value",""),this._printTaskURL="");r.close()})));this.own(k(e,"cancel",D.hitch(this,function(){r.close()})))},_onSetButtonClick:function(e){return new I({titleLabel:this.nls.downloadTab.printGPServiceLabel,
width:830,height:560,content:e})}})});
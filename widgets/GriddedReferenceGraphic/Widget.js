// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/CoordinateControl":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang jimu/utils dojo/on dojo/has dojo/query dojo/dom-attr dojo/dom-class dojo/dom-style dojo/string dojo/topic dojo/keys dojo/Deferred dojo/Evented dojo/dom dojo/dom-construct dojo/aspect jimu/BaseWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Tooltip dijit/TooltipDialog dijit/popup dojo/text!./templates/CoordinateControl.html esri/geometry/webMercatorUtils esri/graphic esri/geometry/Point esri/request esri/SpatialReference esri/tasks/GeometryService esri/tasks/ProjectParameters esri/toolbars/draw jimu/dijit/Message ./_CoordinateControlFormatNotation ./_CoordinateControlConfirmNotation jimu/portalUtils dojo/_base/sniff dijit/form/TextBox dijit/form/Textarea dijit/form/Select dijit/InlineEditBox".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z,c,q,a,r,y,f,d,e,n,p,l,w,x,F,I,J,P,Q,T,Y,Z,W,U,ia,pa,aa,ea){return L([e,n,p,r],{templateString:I,baseClass:"jimu-coordinate-control",parentWidget:null,input:!0,label:null,showCopyButton:!1,showFormatButton:!1,zoomScale:null,showDeleteButton:!0,showExpandButton:!0,showDrawPoint:!0,drawButtonLabel:null,drawToolTip:null,graphicsLayer:null,type:"DD",inputFromText:!0,addSign:!1,hasCustomLabel:!1,numberOfDecimals:null,postMixInProperties:function(){this.nls=window.jimuNls.coordinateControl;
this.isRenderIdForAttrs=!0},constructor:function(k){L.safeMixin(this,k);this.uid=k.id||l.getUniqueId("cc");null===this.parentWidget&&console.error("No parentWidget parameter supplied: Parameter is mandatory");null===this.label&&console.info("No label parameter supplied (optional): Coordinate Control will have no label");null===this.zoomScale&&console.info("No zoomScale parameter supplied (optional): Coordinate Control will have no zoom button");null===this.drawButtonLabel&&console.info("No drawButtonLabel parameter supplied (optional): Coordinate Control will have no draw button");
null===this.graphicsLayer&&console.info("No graphicsLayer parameter supplied: Input graphics will not be shown on map")},postCreate:function(){this._frmtdlg=new x({id:this.uid+"_formatCoordinateTooltip",content:new pa({nls:this.nls,ct:this.type}),style:"width: 400px",onClose:t.hitch(this,this.popupDidClose)});d.after(this._frmtdlg,"onShow",t.hitch(this,function(){null!==this.numberOfDecimals?this._frmtdlg.content.significantDigitTextbox.set("value",this.numberOfDecimals):this._frmtdlg.content.significantDigitTextbox.set("value",
2);this._frmtdlg.content.frmtSelect.focus()}));d.after(this._frmtdlg,"onClose",t.hitch(this,function(){this.formatButton.focus()}));this.own(b(this._frmtdlg,"keydown",t.hitch(this,function(k){k.keyCode===q.ESCAPE&&F.close(this._frmtdlg)})));"DartTheme"===this.parentWidget.appConfig.theme.name&&B.add(this._frmtdlg.domNode,"coordinateControlDialog");this.defaultFormat&&(this._frmtdlg.content.formats[this.type].defaultFormat=this.defaultFormat);this._fetchPortalGeomSrvcUrl().then(t.hitch(this,function(k){""===
t.trim(k)&&(k=this.parentWidget.appConfig.geometryService);this.geomsrvc=new Z(k);this.dt=new U(this.parentWidget.map);this.initUI();this.setUIListeners()}))},_fetchPortalGeomSrvcUrl:function(){var k=new a;this.parentWidget.appConfig.portalUrl&&""!==t.trim(this.parentWidget.appConfig.portalUrl)?ea.getPortalSelfInfo(this.parentWidget.appConfig.portalUrl).then(t.hitch(this,function(E){E=E&&E.helperServices;var G="";E&&E.geometry&&E.geometry.url&&""!==E.geometry.url&&(G=E.geometry.url);k.resolve(G)}),
t.hitch(this,function(){k.resolve("")})):k.resolve("");return k.promise},initUI:function(){null===this.label?this.setHidden(this.coordNameContainer,!1):this.coordName.setValue(this.label);this.input?(this.zoomButton.parentNode.style.display="none",this.setHidden(this.expandButton,!0),this.setHidden(this.removeControlBtn,!0),this.coordName.set("disabled","disabled"),this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"),this.showDrawPoint?(this.drawPointButton.title=this.drawButtonLabel,
null===this.drawToolTip&&(this.drawToolTip=this.nls.tooltip)):this.setHidden(this.drawPointButton,!0)):(this.coordtext.disabled=!0,this.coordtext.placeholder="",this.setHidden(this.drawPointButton,!0),this.showExpandButton||(this.setHidden(this.expandButton,!0),B.remove(this.domNode,"coordinateContainer"),B.add(this.domNode,"outputCoordinateContainer"),B.add(this.cpbtn,"outputCopyBtn"),this.coordtext.readOnly=!0),this.showDeleteButton||this.setHidden(this.removeControlBtn,!0));this.showCopyButton||
(this.setHidden(this.cpbtn,!0),B.add(this.cpbtn,"inputCopyBtn"),v.set(this.cpbtn,"title",this.nls.copyAll));this.showFormatButton||this.setHidden(this.formatButton,!0);null===this.zoomScale&&this.setHidden(this.zoomButton,!0);this.formatButton.title=this.input?this.nls.formatInput:this.nls.formatOutput;v.set(this.formatButton,"aria-label",this.formatButton.title)},setUIListeners:function(){this.input||c.subscribe("INPUTPOINTDIDCHANGE",t.hitch(this,this.mapWasClicked));c.subscribe("INPUTERROR",t.hitch(this,
this.inputError));c.subscribe("VALIDINPUT",t.hitch(this,function(k){this.toggleZoomButton(k)}));this.own(b(this.expandButton,"click",t.hitch(this,this.expandButtonWasClicked)));this.own(b(this.expandButton,"keydown",t.hitch(this,function(k){if(k.keyCode===q.ENTER||k.keyCode===q.SPACE)this.expandButtonWasClicked(k),k.preventDefault()})));this.own(b(this.zoomButton,"click",t.hitch(this,this.zoomButtonWasClicked)));this.own(b(this.zoomButton,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==
q.SPACE||this.zoomButtonWasClicked(k)})));this.own(b(this.coordName,"change",t.hitch(this,this.coordNameDidChange)));this.cpbtn.addEventListener("click",t.hitch(this,this.cpBtnWasClicked));this.own(b(this.cpbtn,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||this.cpBtnWasClicked(k)})));this.subVal1CpBtn.addEventListener("click",t.hitch(this,this.cpSubBtnWasClicked));this.own(b(this.subVal1CpBtn,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||
this.cpSubBtnWasClicked(k)})));this.subVal2CpBtn.addEventListener("click",t.hitch(this,this.cpSubBtnWasClicked));this.own(b(this.subVal2CpBtn,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||this.cpSubBtnWasClicked(k)})));this.subVal3CpBtn.addEventListener("click",t.hitch(this,this.cpSubBtnWasClicked));this.own(b(this.subVal3CpBtn,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||this.cpSubBtnWasClicked(k)})));this.subVal4CpBtn.addEventListener("click",
t.hitch(this,this.cpSubBtnWasClicked));this.own(b(this.subVal4CpBtn,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||this.cpSubBtnWasClicked(k)})));this.own(b(this.formatButton,"click",t.hitch(this,this.formatButtonWasClicked)));this.own(b(this.formatButton,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||this.formatButtonWasClicked(k)})));this.own(b(this.drawPointButton,"click",t.hitch(this,this.drawPointButtonWasClicked)));this.own(b(this.drawPointButton,
"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||this.drawPointButtonWasClicked(k)})));this.own(b(this.removeControlBtn,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||this.remove()})));this.own(b(this._frmtdlg.content.applyButton,"click",t.hitch(this,this.formatDialogApplyButtonClicked)));this.own(b(this._frmtdlg.content.applyButton,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||this.formatDialogApplyButtonClicked()})));
this.own(b(this._frmtdlg.content.cancelButton,"click",t.hitch(this,function(){F.close(this._frmtdlg)})));this.own(b(this._frmtdlg.content.cancelButton,"keydown",t.hitch(this,function(k){k.keyCode!==q.ENTER&&k.keyCode!==q.SPACE||F.close(this._frmtdlg)})));this.own(b(this.coordtext,"keydown",t.hitch(this,this.coordTextInputKeyWasPressed)));this.own(b(this.coordtext,"input",t.hitch(this,function(){this.currentClickPointDD=null;this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none");
this.emit("coordinates-deleted",{})})));this.own(this.geomsrvc.on("error",t.hitch(this,this.geomSrvcDidFail)));this.own(b(this.dt,"draw-complete",t.hitch(this,this.drawComplete)));this.own(d.after(this.parentWidget,"onClose",t.hitch(this,function(){this.input&&B.contains(this.drawPointButton,"drawPointBtn-active")&&this.deactivateDrawTool();this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"closed"===this.parentWidget.state&&F.close(this._frmtdlg)})));this.own(d.after(this.parentWidget,"onOpen",
t.hitch(this,function(){var k=this.parentWidget.getParent().getParent().domNode;this.own(b(k,"click",t.hitch(this,function(E){"settingBtn"!==E.target.className&&this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"active"===this.parentWidget.state&&F.close(this._frmtdlg)})))})))},formatDialogApplyButtonClicked:function(){this._frmtdlg.content.significantDigitTextbox.isValid()?(this.type=this._frmtdlg.content.ct,this.updateDisplay(),this.input?this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+
")"):this.hasCustomLabel&&this.coordName.set("value",this.label),F.close(this._frmtdlg)):this._frmtdlg.content.significantDigitTextbox.focus()},popupDidClose:function(){if(this._frmtdlg.content.isCanceled)this.addSign!==this._frmtdlg.content.addSignChkBox.checked&&this._frmtdlg.content.addSignChkBox.setValue(this.addSign);else{this.addSign=this._frmtdlg.content.addSignChkBox.checked;this.numberOfDecimals=this._frmtdlg.content.significantDigitTextbox.value;var k=this._frmtdlg.content.ct;this.type!==
k&&(this.type=k,this.updateDisplay())}},coordNameDidChange:function(){this.hasCustomLabel=!0},cpSubBtnWasClicked:function(k){this[k.currentTarget.id.split("~")[0]].select();try{var E=document.execCommand("copy")}catch(G){E=!1}this.showToolTip(k.currentTarget.id,E?this.nls.copySuccessful:this.nls.copyFailed)},cpBtnWasClicked:function(k){k.preventDefault();if(this.input){k=l.toArray().filter(function(C){return"jimu-coordinate-control"===C.baseClass&&!C.input});var E=k.map(function(C){if(C.coordtext)return C.coordtext.value}).join("\r\n");
k=this.coordtext.value;this.coordtext.value=k+"\r\n"+E;this.selectText(this.coordtext);try{var G=document.execCommand("copy")}catch(C){G=!1}this.coordtext.value=k}else{this.selectText(this.coordtext);try{G=document.execCommand("copy")}catch(C){G=!1}}this.showToolTip(this.cpbtn.id,G?this.nls.copySuccessful:this.nls.copyFailed)},selectText:function(k){var E=document.getSelection();E.removeAllRanges();k.focus();var G=/Edge/.test(navigator.userAgent),C=!!window.MSInputMethodContext&&!!document.documentMode;
if(h("ff")||h("chrome")||h("safari"))!this.input&&this.coordtext.disabled?(this.coordtext.disabled=!1,k.select(),this.coordtext.disabled=!0):k.select();G&&k.select();C&&(G=document.createRange(),G.selectNode(k),E.addRange(G))},showToolTip:function(k,E){var G=y.byId(k);w.show(E,G);setTimeout(function(){w.hide(G)},1E3)},geomSrvcDidComplete:function(k){0>=k[0].length?(new ia({message:this.nls.parseCoordinatesError}),c.publish("INPUTERROR")):(this.currentClickPointDD=this.currentClickPoint=new Q(k[0][0],
k[0][1],new Y({wkid:4326})),this.input&&(this.currentClickPoint.spatialReference.equals(this.parentWidget.map.spatialReference)?this.parentWidget.map.centerAt(this.currentClickPoint):this.getProjectedPoint(this.currentClickPoint).then(t.hitch(this,function(E){this.currentClickPoint=E;this.parentWidget.map.centerAt(this.currentClickPoint)}),t.hitch(this,function(E){console.error(E);c.publish("INPUTERROR")})),this.updateDisplay(),c.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0}),
c.publish("VALIDINPUT",{show:!0})))},geomSrvcDidFail:function(){new ia({message:this.nls.parseCoordinatesError});c.publish("INPUTERROR")},coordTextInputKeyWasPressed:function(k){if(k.keyCode===q.ENTER){k.preventDefault();var E=this.getCleanInput(k.currentTarget.value);this.inputFromText=!1;this.getCoordinateType(E).then(t.hitch(this,function(G){if(G)if(1===G.length){var C=this.processCoordTextInput(E,G[0],!1);this.getXYNotation(C,G[0].conversionType).then(t.hitch(this,function(X){0<X[0].length?this.geomSrvcDidComplete(X):
this.geomSrvcDidFail()}))}else this.confirmNotationDialog||(this.confirmNotationDialog=new aa({title:this.nls.comfirmInputNotation,nls:this.nls,options:G,style:"width: 400px",hasSkipCheckBox:!1,theme:this.parentWidget.appConfig.theme.name})),this.confirmNotationDialog.show().then(t.hitch(this,function(){var X=g.filter(G,function(V){return V.name===this.confirmNotationDialog.comboOptions.get("value")},this),ca=this.processCoordTextInput(E,X[0],!1);this.getXYNotation(ca,X[0].conversionType).then(t.hitch(this,
function(V){0<V[0].length?this.geomSrvcDidComplete(V):this.geomSrvcDidFail()}))},function(){}));else new ia({message:this.nls.parseCoordinatesError}),c.publish("INPUTERROR")}));v.set(this.coordtext,"value",E);this.emit("get-coordinate-complete",E);this.currentClickPoint=null}if(k.keyCode===q.BACKSPACE||k.keyCode===q.DELETE)this.currentClickPointDD=null,this.zoomButton&&this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none"),this.emit("coordinates-deleted",{})},getFormattedCoordinateText:function(){return this.coordtext.value},
getCurrentMapCoordinate:function(){return this.currentClickPoint},getMapCoordinateDD:function(){return this.currentClickPointDD},deactivateDrawTool:function(){this.dt.deactivate();B.remove(this.drawPointButton,"drawPointBtn-active")},processCoordTextInput:function(k,E,G){var C=E.pattern.exec(k),X=!1,ca=E.name;switch(E.name){case "DD":var V=C[2];var fa=C[7];var da=C[10];var la=C[16];var ja=C[3].replace(/[,:]/,".");var qa=C[11].replace(/[,:]/,".");ca="DD";break;case "DDrev":V=C[11];fa=C[16];da=C[2];
la=C[8];ja=C[12].replace(/[,:]/,".");qa=C[3].replace(/[,:]/,".");ca="DD";break;case "DDM":V=C[2];fa=C[7];da=C[10];la=C[15];ja=C[3];var ha=C[4].replace(/[,:]/,".");qa=C[11];var O=C[12].replace(/[,:]/,".");ca="DDM";break;case "DDMrev":V=C[10];fa=C[15];da=C[2];la=C[7];ja=C[11];ha=C[12].replace(/[,:]/,".");qa=C[3];O=C[4].replace(/[,:]/,".");ca="DDM";break;case "DMS":V=C[2];fa=C[8];da=C[11];la=C[17];ja=C[3];ha=C[4];var ma=C[5].replace(/[,:]/,".");qa=C[12];O=C[13];var ba=C[14].replace(/[,:]/,".");ca="DMS";
break;case "DMSrev":V=C[11],fa=C[17],da=C[2],la=C[8],ja=C[12],ha=C[13],ma=C[14].replace(/[,:]/,"."),qa=C[3],O=C[4],ba=C[5].replace(/[,:]/,"."),ca="DMS"}V&&fa?(X=!0,V=(new RegExp(/[Ss-]/)).test(V)?"-":"+"):V=V&&(new RegExp(/[Ss-]/)).test(V)?"-":fa&&(new RegExp(/[Ss-]/)).test(fa)?"-":"+";da&&la?(X=!0,da=(new RegExp(/[Ww-]/)).test(da)?"-":"+"):da=da&&(new RegExp(/[Ww-]/)).test(da)?"-":la&&(new RegExp(/[Ww-]/)).test(la)?"-":"+";X&&(G||new ia({message:this.nls.latLongWarningMessage}));switch(ca){case "DD":k=
V+ja+","+da+qa;break;case "DDM":k=V+ja+" "+ha+","+da+qa+" "+O;break;case "DMS":k=V+ja+" "+ha+" "+ma+","+da+qa+" "+O+" "+ba}return k},zoomButtonWasClicked:function(){this.currentClickPoint&&(this.parentWidget.map.getZoom()<this.zoomScale?this.parentWidget.map.centerAt(this.currentClickPoint).then(t.hitch(this,function(){this.parentWidget.map.setScale(this.zoomScale)})):this.parentWidget.map.centerAt(this.currentClickPoint))},setHidden:function(k,E){A.set(k,"display","none");E&&f.destroy(k.parentNode)},
setVisible:function(k){A.set(k,"display","inline-flex")},remove:function(){this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&F.close(this._frmtdlg);this.destroyRecursive();this.emit("removeCoordsControl")},mapWasClicked:function(k){this.currentClickPoint=k.mapPoint;this.getDDPoint(k.mapPoint).then(t.hitch(this,function(E){this.currentClickPointDDDD=this.currentClickPointDD=E;this.inputFromText=k.inputFromText?!0:!1;this.updateDisplay()}),t.hitch(this,function(E){console.error(E)}))},getDDPoint:function(k){var E=
new a,G=new Y(3857);J.canProject(k,G)?E.resolve(J.webMercatorToGeographic(J.project(k,G))):(G={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:JSON.stringify(k.spatialReference.toJson()),outSR:4326,extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"},(new T(G,{usePost:!1})).then(t.hitch(this,function(C){C=(C=C&&C.transformations?C.transformations:void 0)&&0<C.length?C[0].wkid:void 0;var X=new W;X.outSR=new Y(4326);X.geometries=
[k];X.transformForward=!0;X.transformation=C;this.geomsrvc.project(X,t.hitch(this,function(ca){E.resolve(ca[0])}),function(ca){E.reject(ca)})}),t.hitch(this,function(C){E.reject(C)})));return E},getProjectedPoint:function(k){var E=new a;if(J.canProject(k,this.parentWidget.map))E.resolve(J.geographicToWebMercator(k));else{var G={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:4326,outSR:JSON.stringify(this.parentWidget.map.spatialReference.toJson()),extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},
handleAs:"json",callbackParamName:"callback"};(new T(G,{usePost:!1})).then(t.hitch(this,function(C){C=(C=C&&C.transformations?C.transformations:void 0)&&0<C.length&&C[0].geoTransforms&&0<C[0].geoTransforms.length&&C[0].geoTransforms[0].wkid?C[0].geoTransforms[0].wkid:void 0;var X=new W;X.outSR=new Y(this.parentWidget.map.spatialReference);X.geometries=[k];X.transformForward=!0;X.transformation=C;this.geomsrvc.project(X,t.hitch(this,function(ca){E.resolve(ca[0])}),function(ca){E.reject(ca)})}),t.hitch(this,
function(C){E.reject(C)}))}return E},expandButtonWasClicked:function(){B.toggle(this.coordcontrols,"expanded");B.contains(this.coordcontrols,"expanded")?(B.remove(this.expandButton,"expandBtn"),B.add(this.expandButton,"collapseBtn"),v.set(this.expandButton,"aria-expanded","true")):(B.remove(this.expandButton,"collapseBtn"),B.add(this.expandButton,"expandBtn"),v.set(this.expandButton,"aria-expanded","false"));this.setSubCoordUI(B.contains(this.coordcontrols,"expanded"));this._setCoordControlsTabindex(B.contains(this.coordcontrols,
"expanded"));this.emit("expandButtonClicked",B.contains(this.coordcontrols,"expanded"))},_setCoordControlsTabindex:function(k){var E=[];if(k){var G=0;k=-1}else G=-1,k=0;E=m("input[tabindex\x3d'"+k+"']",this.coordcontrols);E=E.concat(m("span[tabindex\x3d'"+k+"']",this.coordcontrols));g.forEach(E,t.hitch(this,function(C){v.set(C,"tabindex",G)}))},formatButtonWasClicked:function(){this._frmtdlg.content.setCt(this.type);F.open({popup:this._frmtdlg,around:this.formatButton})},drawPointButtonWasClicked:function(){if(B.contains(this.drawPointButton,
"drawPointBtn-active"))this.dt.deactivate(),this.parentWidget.map.enableMapNavigation();else{this.parentWidget.map.disableMapNavigation();this.dt.activate(U.POINT);var k=this.dt._tooltip;k&&(k.innerHTML=this.drawToolTip)}B.toggle(this.drawPointButton,"drawPointBtn-active")},drawComplete:function(k){var E={};E.mapPoint=k.geometry;this.parentWidget.map.enableMapNavigation();this.mapWasClicked(E)},setSubCoordUI:function(k){if(k){k="165px";switch(this.type){case "DD":case "DMS":case "DDM":this.sub1label.innerHTML=
"Lat";this.sub2label.innerHTML="Lon";this.setHidden(this.sub3,!1);this.setHidden(this.sub4,!1);k="90px";break;case "GARS":this.sub1label.innerHTML="Lon";this.sub2label.innerHTML="Lat";this.sub3label.innerHTML="Quadrant";this.sub4label.innerHTML="Key";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "GEOREF":this.sub1label.innerHTML="15\u00b0 Quad";this.sub2label.innerHTML="1\u00b0 Quad";this.sub3label.innerHTML="Easting";this.setVisible(this.sub3);this.sub4label.innerHTML="Northing";
this.setVisible(this.sub4);break;case "USNG":case "MGRS":this.sub1label.innerHTML="GZD";this.sub2label.innerHTML="Grid Sq";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM":this.sub1label.innerHTML="Zone";this.sub2label.innerHTML="Band";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM_H":this.sub1label.innerHTML="Zone",
this.sub2label.innerHTML="Hemisphere",this.sub3label.innerHTML="Easting",this.sub4label.innerHTML="Northing",this.setVisible(this.sub3),this.setVisible(this.sub4)}A.set(this.coordcontrols,"display","block");A.set(this.coordcontrols,"height",k);A.set(this.coordcontrols,"width","300px")}else A.set(this.coordcontrols,"display","none"),A.set(this.coordcontrols,"height","0px");k=this.uid.split("_")[1];v.set(this["cc_"+k+"sub1val"],"aria-label",this.sub1label.innerHTML);v.set(this["cc_"+k+"sub2val"],"aria-label",
this.sub2label.innerHTML);v.set(this["cc_"+k+"sub3val"],"aria-label",this.sub3label.innerHTML);v.set(this["cc_"+k+"sub4val"],"aria-label",this.sub4label.innerHTML)},setCoordUI:function(k){if(k){var E=this.uid.split("_")[1];if(!this["cc_"+E+"sub1val"]||this.input&&this.inputFromText)return;var G=this._frmtdlg.content.formats[this.type];G=G.useCustom?G.customFormat:G.defaultFormat;switch(this.type){case "DD":k=this.getFormattedDDStr(k,G,this.addSign);this["cc_"+E+"sub1val"].value=z.substitute("${xcrd}",
{xcrd:k.latdeg});this["cc_"+E+"sub2val"].value=z.substitute("${ycrd}",{ycrd:k.londeg});var C=k.formatResult;break;case "DDM":k=this.getFormattedDDMStr(k,G,this.addSign);this["cc_"+E+"sub1val"].value=z.substitute("${latd} ${latm}",{latd:k.latdeg,latm:k.latmin});this["cc_"+E+"sub2val"].value=z.substitute("${lond} ${lonm}",{lond:k.londeg,lonm:k.lonmin});C=k.formatResult;break;case "DMS":k=this.getFormattedDMSStr(k,G,this.addSign);this["cc_"+E+"sub1val"].value=z.substitute("${latd} ${latm} ${lats}",{latd:k.latdeg,
latm:k.latmin,lats:k.latsec});this["cc_"+E+"sub2val"].value=z.substitute("${lond} ${lonm} ${lons}",{lond:k.londeg,lonm:k.lonmin,lons:k.lonsec});C=k.formatResult;break;case "USNG":k=this.getFormattedUSNGStr(k,G,!1);this["cc_"+E+"sub1val"].value=k.gzd;this["cc_"+E+"sub2val"].value=k.grdsq;this["cc_"+E+"sub3val"].value=k.easting;this["cc_"+E+"sub4val"].value=k.northing;C=k.formatResult;break;case "MGRS":k=this.getFormattedMGRSStr(k,G,!1);this["cc_"+E+"sub1val"].value=k.gzd;this["cc_"+E+"sub2val"].value=
k.grdsq;this["cc_"+E+"sub3val"].value=k.easting;this["cc_"+E+"sub4val"].value=k.northing;C=k.formatResult;break;case "GARS":k=this.getFormattedGARSStr(k,G,!1);this["cc_"+E+"sub1val"].value=k.lon;this["cc_"+E+"sub2val"].value=k.lat;this["cc_"+E+"sub3val"].value=k.quadrant;this["cc_"+E+"sub4val"].value=k.key;C=k.formatResult;break;case "GEOREF":k=this.getFormattedGEOREFStr(k,G,!1);this["cc_"+E+"sub1val"].value=k.lon+k.lat;this["cc_"+E+"sub2val"].value=k.quadrant15lon+k.quadrant15lat;this["cc_"+E+"sub3val"].value=
k.quadrant1lon;this["cc_"+E+"sub4val"].value=k.quadrant1lat;C=k.formatResult;break;case "UTM":k=this.getFormattedUTMStr(k,G,!1);k.bandLetter.match(/^[AaBbYyZz]/)?(this["cc_"+E+"sub1val"].value="",this["cc_"+E+"sub2val"].value="",this["cc_"+E+"sub3val"].value="",this["cc_"+E+"sub4val"].value="",k.formatResult=""):(this["cc_"+E+"sub1val"].value=k.zone,this["cc_"+E+"sub2val"].value=k.bandLetter,this["cc_"+E+"sub3val"].value=k.easting,this["cc_"+E+"sub4val"].value=k.westing);C=k.formatResult;break;case "UTM_H":k=
this.getFormattedUTMHStr(k,G,!1),k.hemisphere.match(/^[AaBbYyZz]/)?(this["cc_"+E+"sub1val"].value="",this["cc_"+E+"sub2val"].value="",this["cc_"+E+"sub3val"].value="",this["cc_"+E+"sub4val"].value="",k.formatResult=""):(this["cc_"+E+"sub1val"].value=k.zone,this["cc_"+E+"sub2val"].value=k.hemisphere,this["cc_"+E+"sub3val"].value=k.easting,this["cc_"+E+"sub4val"].value=k.westing),C=k.formatResult}}else C="";this.coordcontrols&&this.setSubCoordUI(B.contains(this.coordcontrols,"expanded"));this.coordtext&&
(v.set(this.coordtext,"value",C),this.emit("get-coordinate-complete",C))},getFormattedCoordinates:function(){this.getCoordValues(this.currentClickPointDD,this.type,4).then(t.hitch(this,function(k){this.setCoordUI(k)}),t.hitch(this,function(k){console.log(k)}))},updateDisplay:function(){this.currentClickPoint&&(this.currentClickPointDD||(this.currentClickPointDD=this.currentClickPoint),this.getFormattedCoordinates(this.currentClickPointDD),this.input&&(null!==this.graphicsLayer&&(this.graphicsLayer.clear(),
this.currentClickPoint.spatialReference.equals(this.parentWidget.map.spatialReference)?this.graphicsLayer.add(new P(this.currentClickPoint)):this.getProjectedPoint(this.currentClickPointDD).then(t.hitch(this,function(k){this.graphicsLayer.add(new P(k))}),t.hitch(this,function(k){console.error(k)}))),c.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0}),c.publish("VALIDINPUT",{show:!0})))},clear:function(){this.coordtext.value="";this.currentClickPointDDDD=this.currentClickPointDD=
this.currentClickPoint=null;this.graphicsLayer.clear()},inputError:function(){this.setCoordUI();this.toggleZoomButton(!1)},toggleZoomButton:function(k){this.zoomButton&&this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display=k?"inline-block":"none")},getCleanInput:function(k){k=k.replace(/\n/g,"");k=k.replace(/\s+/g," ").trim();return k.toUpperCase()},getCoordValues:function(k,E,G){var C=new a;k={sr:4326,coordinates:[[k.x,k.y]],conversionType:E.name?E.name:E,numOfDigits:G||6,rounding:!0,
addSpaces:!1};switch(E){case "DD":k.numOfDigits=6;break;case "USNG":k.numOfDigits=5;break;case "MGRS":k.conversionMode="mgrsDefault";k.numOfDigits=5;break;case "UTM_H":k.conversionType="utm";k.conversionMode="utmNorthSouth";k.addSpaces=!0;break;case "UTM":k.conversionType="utm";k.conversionMode="utmDefault";k.addSpaces=!0;break;case "GARS":k.conversionMode="garsDefault"}this.geomsrvc.toGeoCoordinateString(k).then(function(X){C.resolve(X)},function(){C.resolve(null)});return C.promise},getXYNotation:function(k,
E){var G=new a;var C=E.name?E.name:E;E={sr:4326,conversionType:C,strings:[]};switch(C){case "DD":case "DDM":case "DMS":E.numOfDigits=2;k=k.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");E.strings.push(k);break;case "DDrev":E.conversionType="DD";E.numOfDigits=2;k=k.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");E.strings.push(k);break;case "DDMrev":E.conversionType="DDM";E.numOfDigits=2;k=k.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");E.strings.push(k);break;case "DMSrev":E.conversionType=
"DMS";E.numOfDigits=2;k=k.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");E.strings.push(k);break;case "USNG":E.strings.push(k);E.addSpaces="false";break;case "MGRS":E.conversionMode="mgrsNewStyle";E.strings.push(k);E.addSpaces="false";break;case "UTM_H":E.conversionType="utm";E.conversionMode="utmNorthSouth";E.strings.push(k);break;case "UTM":E.conversionType="utm";E.conversionMode="utmDefault";E.strings.push(k);break;case "GARS":E.conversionMode="garsCenter";E.strings.push(k);break;case "GEOREF":E.strings.push(k)}this.geomsrvc.fromGeoCoordinateString(E).then(function(X){G.resolve(X)},
function(){G.resolve(null)});return G.promise},getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(k){return k.source}).join("")),notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,
/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(k){return k.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(k){return k.source}).join("")),
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(k){return k.source}).join("")),notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(k){return k.source}).join("")),notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(k){return k.source}).join("")),
notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,
/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(k){return k.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(k){return k.source}).join("")),
notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(k){return k.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM_H"}]},getCoordinateType:function(k){var E=this.getCleanInput(k);k=new a;var G=this.getNotations();E=g.filter(G,function(C){return C.pattern.test(this.v)},{v:E});0<E.length?k.resolve(E):k.resolve(null);return k.promise},getFormattedDDStr:function(k,
E,G){var C={};C.sourceValue=k;C.sourceFormatString=E;k=k[0].split(/[ ,]+/);C.latdeg=k[0].replace(/[nNsS]/,"");C.londeg=k[1].replace(/[eEwW]/,"");null!==this.numberOfDecimals?(C.latdeg=H.localizeNumber(parseFloat(C.latdeg),{places:this.numberOfDecimals}),C.londeg=H.localizeNumber(parseFloat(C.londeg),{places:this.numberOfDecimals})):(C.latdeg=H.localizeNumber(parseFloat(C.latdeg)),C.londeg=H.localizeNumber(parseFloat(C.londeg)));G&&("N"===k[0].slice(-1)?C.latdeg="+"+C.latdeg:C.latdeg="-"+C.latdeg,
"W"===k[1].slice(-1)?C.londeg="-"+C.londeg:C.londeg="+"+C.londeg);E=E.replace(/X/,C.londeg);E=E.replace(/[eEwW]/,k[1].slice(-1));E=E.replace(/[nNsS]/,k[0].slice(-1));E=E.replace(/Y/,C.latdeg);C.formatResult=E;return C},getFormattedDDMStr:function(k,E,G){var C={};C.sourceValue=k;C.sourceFormatString=E;C.parts=k[0].split(/[ ,]+/);C.latdeg=C.parts[0];C.latmin=C.parts[1].replace(/[nNsS]/,"");C.londeg=C.parts[2];C.lonmin=C.parts[3].replace(/[eEwW]/,"");null!==this.numberOfDecimals?(C.latmin=H.localizeNumber(parseFloat(C.latmin),
{places:this.numberOfDecimals}),C.lonmin=H.localizeNumber(parseFloat(C.lonmin),{places:this.numberOfDecimals})):(C.latmin=H.localizeNumber(parseFloat(C.latmin)),C.lonmin=H.localizeNumber(parseFloat(C.lonmin)));G&&("N"===C.parts[1].slice(-1)?C.latdeg="+"+C.latdeg:C.latdeg="-"+C.latdeg,"W"===C.parts[3].slice(-1)?C.londeg="-"+C.londeg:C.londeg="+"+C.londeg);k=E.replace(/[EeWw]/,C.parts[3].slice(-1));k=k.replace(/Y/,C.lonmin);k=k.replace(/X/,C.londeg);k=k.replace(/[NnSs]/,C.parts[1].slice(-1));k=k.replace(/B/,
C.latmin);k=k.replace(/A/,C.latdeg);C.formatResult=k;return C},getFormattedDMSStr:function(k,E,G){var C={};C.sourceValue=k;C.sourceFormatString=E;C.parts=k[0].split(/[ ,]+/);C.latdeg=C.parts[0];C.latmin=C.parts[1];C.latsec=C.parts[2].replace(/[NnSs]/,"");C.londeg=C.parts[3];C.lonmin=C.parts[4];C.latsec=null!==this.numberOfDecimals?H.localizeNumber(parseFloat(C.latsec),{places:this.numberOfDecimals}):H.localizeNumber(parseFloat(C.latsec));C.parts[5]&&(C.lonsec=C.parts[5].replace(/[EWew]/,""),C.lonsec=
null!==this.numberOfDecimals?H.localizeNumber(parseFloat(C.lonsec),{places:this.numberOfDecimals}):H.localizeNumber(parseFloat(C.lonsec)));G&&("N"===C.parts[2].slice(-1)?C.latdeg="+"+C.latdeg:C.latdeg="-"+C.latdeg,"W"===C.parts[5].slice(-1)?C.londeg="-"+C.londeg:C.londeg="+"+C.londeg);k=E.replace(/A/,C.latdeg);k=k.replace(/B/,C.latmin);k=k.replace(/C/,C.latsec);k=k.replace(/X/,C.londeg);k=k.replace(/Y/,C.lonmin);k=k.replace(/Z/,C.lonsec);k=k.replace(/[NnSs]/,C.parts[2].slice(-1));C.parts[5]&&(k=k.replace(/[EeWw]/,
C.parts[5].slice(-1)));C.formatResult=k;return C},getFormattedUSNGStr:function(k,E){var G={};G.sourceValue=k;G.sourceFormatString=E;k[0].match(/^[ABYZ]/)?G.gzd=k[0].match(/[ABYZ]/)[0].trim():G.gzd=k[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();k[0].replace(G.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)&&(G.grdsq=k[0].replace(G.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim());k[0].replace(G.gzd+G.grdsq,"").match(/^\d{1,5}/)&&(G.easting=k[0].replace(G.gzd+G.grdsq,"").match(/^\d{1,5}/)[0].trim());k[0].replace(G.gzd+
G.grdsq,"").match(/\d{1,5}$/)&&(G.northing=k[0].replace(G.gzd+G.grdsq,"").match(/\d{1,5}$/)[0].trim());k=E.replace(/Y/,G.northing);k=k.replace(/X/,G.easting);k=k.replace(/S/,G.grdsq);k=k.replace(/Z/,G.gzd);G.formatResult=k;return G},getFormattedMGRSStr:function(k,E){var G={};G.sourceValue=k;G.sourceFormatString=E;k[0].match(/^[ABYZ]/)?G.gzd=k[0].match(/[ABYZ]/)[0].trim():G.gzd=k[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();G.grdsq=k[0].replace(G.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();G.easting=
k[0].replace(G.gzd+G.grdsq,"").match(/^\d{1,5}/)[0].trim();G.northing=k[0].replace(G.gzd+G.grdsq,"").match(/\d{1,5}$/)[0].trim();k=E.replace(/Y/,G.northing);k=k.replace(/X/,G.easting);k=k.replace(/S/,G.grdsq);k=k.replace(/Z/,G.gzd);G.formatResult=k;return G},getFormattedGARSStr:function(k,E){var G={};G.sourceValue=k;G.sourceFormatString=E;G.lon=k[0].match(/\d{3}/);G.lat=k[0].match(/[a-zA-Z]{2}/);k=k[0].match(/\d*$/);G.quadrant=k[0][0];G.key=k[0][1];E=E.replace(/K/,G.key);E=E.replace(/Q/,G.quadrant);
E=E.replace(/Y/,G.lat);E=E.replace(/X/,G.lon);G.formatResult=E;return G},getFormattedGEOREFStr:function(k,E){var G={};G.sourceValue=k;G.sourceFormatString=E;G.lon=k[0].match(/[a-zA-Z]{1}/)[0].trim();G.lat=k[0].replace(G.lon,"").match(/[a-zA-Z]{1}/)[0].trim();G.quadrant15lon=k[0].replace(G.lon+G.lat,"").match(/[a-zA-Z]{1}/)[0].trim();G.quadrant15lat=k[0].replace(G.lon+G.lat+G.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();k=k[0].replace(G.lon+G.lat+G.quadrant15lon+G.quadrant15lat,"");G.quadrant1lon=
k.substr(0,k.length/2);G.quadrant1lat=k.substr(k.length/2,k.length);E=E.replace(/Y/,G.quadrant1lat);E=E.replace(/X/,G.quadrant1lon);E=E.replace(/D/,G.quadrant15lat);E=E.replace(/C/,G.quadrant15lon);E=E.replace(/B/,G.lat);E=E.replace(/A/,G.lon);G.formatResult=E;return G},getFormattedUTMStr:function(k,E){var G={};G.sourceValue=k;G.sourceFormatString=E;G.parts=k[0].split(/[ ,]+/);G.zone=G.parts[0].replace(/[A-Z]/,"");G.bandLetter=G.parts[0].slice(-1);G.easting=G.parts[1];G.westing=G.parts[2];k=E.replace(/Y/,
G.westing);k=k.replace(/X/,G.easting);k=k.replace(/B/,G.bandLetter);k=k.replace(/Z/,G.zone);G.formatResult=k;return G},getFormattedUTMHStr:function(k,E){var G={};G.sourceValue=k;G.sourceFormatString=E;G.parts=k[0].split(/[ ,]+/);G.zone=G.parts[0].replace(/[A-Z]/,"");G.hemisphere=G.parts[0].slice(-1);G.easting=G.parts[1];G.westing=G.parts[2];k=E.replace(/Y/,G.westing);k=k.replace(/X/,G.easting);k=k.replace(/H/,G.hemisphere);k=k.replace(/Z/,G.zone);G.formatResult=k;return G}})})},"jimu/dijit/_CoordinateControlFormatNotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/formSelect jimu/dijit/CheckBox dijit/form/NumberSpinner".split(" "),
function(L,g,t,H,b,h,m,v){return L([h,m,v],{baseClass:"jimu-coordinate-control",templateString:'\x3cdiv\x3e\x3cspan class\x3d"formatText"\x3e${nls.editCoordinateDialogTitle}\x3c/span\x3e\x3cdiv class\x3d"controlContainer"\x3e\x3cselect tabindex\x3d"0" class\x3d"selectFormat" data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.editCoordinateDialogTitle}" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\x3c/select\x3e\x3cinput tabindex\x3d"0" type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput"\x3e\x3c/input\x3e\x3cdiv class\x3d"settingsContainer" data-dojo-attach-point\x3d"prefixContainer"\x3e\x3cdiv class \x3d "esriCTSignificantDigitNode"\x3e\x3cdiv class\x3d"formatText esriCTSignificantDigitLabel"title \x3d"${nls.significantDigitLabel}"\x3e${nls.significantDigitLabel}\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"significantDigitTextbox" value\x3d"2" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"constraints:{min:0,max:100,places:0}" aria-label\x3d"${nls.significantDigitLabel} style\x3d"width:50%"\x3e\x3c/div\x3e\x3c/div\x3e \x3cdiv class\x3d"formatText" data-dojo-attach-point\x3d"addSignChkBox" label\x3d"${nls.posNegPrefixLabel}" data-dojo-type\x3d"jimu/dijit/CheckBox"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btnContainer"\x3e\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.applyButtonLabel}" data-dojo-attach-point\x3d"applyButton" class\x3d"jimu-btn"\x3e${nls.applyButtonLabel}\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"cancelButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.cancelButtonLabel}" class\x3d"jimu-btn formatCoordCancelButton"\x3e${nls.cancelButtonLabel}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
isCanceled:!1,formats:{},setCt:function(B){this.ct=B;this.frmtSelect.set("value",this.ct)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",customFormat:null,
useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},UTM_H:{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};var B=[],A;for(A in this.formats){var z={value:A,label:this.nls.notations[A]};B.push(z)}this.frmtSelect.addOption(B);b.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(H(this.frmtSelect,"change",g.hitch(this,this.frmtSelectValueDidChange)));this.own(H(this.frmtVal,"change",g.hitch(this,
this.formatValDidChange)));this.own(H(this.cancelButton,"click",g.hitch(this,function(){this.isCanceled=!0})));this.own(H(this.applyButton,"click",g.hitch(this,function(){this.isCanceled=!1})));this.displayPrefixContainer()},formatValDidChange:function(){var B=b.get(this.frmtVal,"value"),A=this.frmtSelect.get("value");this.formats[A].customFormat=B;this.formats[A].useCustom=!0},frmtSelectValueDidChange:function(B){var A=this.formats[B].useCustom?this.formats[B].customFormat:this.formats[B].defaultFormat;
this.ct=B;b.set(this.frmtVal,"value",A);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.ct){case "DD":case "DDM":case "DMS":t.set(this.prefixContainer,{display:""});break;default:t.set(this.prefixContainer,{display:"none"})}}})})},"jimu/dijit/_CoordinateControlConfirmNotation":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/aspect dojo/keys dojo/query dijit/Dialog dijit/form/Select dojo/_base/lang".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z){return L([B],{baseClass:"jimu-coordinate-control",numberOfInputs:0,selectOptions:{},comboOptions:{},dfd:null,constructor:function(c){z.mixin(this,c);this.numberOfInputs=c.options.length;this.selectOptions=c.options},postCreate:function(){this.inherited("postCreate",arguments);this.closable=!1;this.closeButtonNode.style.display="none";"DartTheme"===this.theme&&b.add(this.containerNode,"coordinateControlDialog");this.message=H.create("div",{style:"margin-bottom: 5px"},
this.containerNode,"first");this.message.innerHTML=this.numberOfInputs+" "+this.nls.multipleNotationLabel;this.comboOptions=new A({style:{width:"99%"},"aria-label":this.numberOfInputs+" "+this.nls.multipleNotationLabel},H.create("div",{},this.containerNode,"last"));this.own(h.after(this.comboOptions,"onChange",t.hitch(this,this._onComboOptionsChanged)));for(var c=0;c<this.selectOptions.length;c++)this.comboOptions.addOption({value:this.selectOptions[c].name,label:this.selectOptions[c].notationType});
this.buttonDiv=H.create("div",{"class":"buttonContainer",style:"margin-top:10px;"+(window.isRTL?"text-align:left":"text-align:right")},this.containerNode,"last");this.okButton=H.create("div",{innerHTML:this.nls.applyButtonLabel,"class":"jimu-btn",role:"button",tabindex:"0","aria-label":this.nls.applyButtonLabel,onclick:z.hitch(this,function(){this.hide();this.dfd.resolve()}),onkeypress:z.hitch(this,function(q){if(q.keyCode===m.ENTER||q.keyCode===m.SPACE)this.hide(),this.dfd.resolve()})},this.buttonDiv,
"first");this.cancelButton=H.create("div",{innerHTML:this.nls.cancelButtonLabel,"class":"jimu-btn",style:"margin: 0 5px 0 5px",role:"button",tabindex:"0","aria-label":this.nls.cancelButtonLabel,onclick:z.hitch(this,function(){this.hide();this.dfd.cancel()}),onkeypress:z.hitch(this,function(q){if(q.keyCode===m.ENTER||q.keyCode===m.SPACE)this.hide(),this.dfd.cancel()})},this.buttonDiv,"last")},show:function(){this.inherited("show",arguments);this.dfd=new g;var c=this._getDOMElement(".dijitSelectLabel",
this.comboOptions.domNode);c&&b.add(c,"dijitSelectLabelConfirmNotation");return this.dfd},_onComboOptionsChanged:function(){var c=this._getDOMElement(".dijitSelectLabel",this.comboOptions.domNode);c&&b.add(c,"dijitSelectLabelConfirmNotation")},_getDOMElement:function(c,q){return(c=v(c,q))&&1===c.length?c[0]:null}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(L,g,t,H){return L("dijit.form.Textarea",[H,t],
{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);g.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(L,g,t,H,b,h,m){t.add("textarea-needs-help-shrinking",
function(){var v=h.body(),B=g.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},v,"last"),A=B.scrollHeight>=B.clientHeight;v.removeChild(B);return A});return L("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);
this.resize()},postCreate:function(){this.inherited(arguments);var v=this.textbox;v.style.overflowY="hidden";this.own(b(v,"focus, resize",H.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(m.on("resize",H.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(v){this.inherited(arguments);this.resize()},_estimateHeight:function(){var v=this.textbox;v.rows=(v.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function v(){var y=
!1;""===B.value&&(B.value=" ",y=!0);var f=B.scrollHeight;y&&(B.value="");return f}var B=this.textbox;"hidden"==B.style.overflowY&&(B.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(v()||B.offsetHeight){var A=v()+Math.max(B.offsetHeight-B.clientHeight,0),z=A+"px";z!=B.style.height&&(B.style.height=z,B.rows=1);if(t("textarea-needs-help-shrinking")){var c=v(),q=B.style.minHeight,a=4,r=B.scrollTop;B.style.minHeight=z;for(B.style.height="auto";0<A;){B.style.minHeight=Math.max(A-a,4)+"px";z=
v();c-=z;A-=c;if(c<a)break;c=z;a<<=1}B.style.height=A+"px";B.style.minHeight=q;B.scrollTop=r}B.style.overflowY=v()>B.clientHeight?"auto":"hidden";"hidden"==B.style.overflowY&&(B.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z,c,q,a,r,y,f,d,e,n,p,l,w,x,F){e=H("dijit._InlineEditor",[d,e,n],{templateString:F,contextRequire:L,postMixInProperties:function(){this.inherited(arguments);this.messages=B.getLocalization("dijit","common",this.lang);g.forEach(["buttonSave","buttonCancel"],function(I){this[I]||(this[I]=this.messages[I])},this)},buildRendering:function(){this.inherited(arguments);var I="string"==typeof this.editor?c.getObject(this.editor)||L(this.editor):this.editor,J=this.sourceStyle,
P="line-height:"+J.lineHeight+";",Q=v.getComputedStyle(this.domNode);g.forEach(["Weight","Family","Size","Style"],function(Y){Q["font"+Y]!=J["font"+Y]&&(P+="font-"+Y+":"+J["font"+Y]+";")},this);g.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(Y){this.domNode.style[Y]=J[Y]},this);var T=this.inlineEditBox.width;"100%"==T?(P+="width:100%;",this.domNode.style.display="block"):P+="width:"+(T+(Number(T)==T?"px":""))+";";T=c.delegate(this.inlineEditBox.editorParams,
{style:P,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new I(T,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,m.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var I=this.editWidget;this.inlineEditBox.autoSave?this.own(t.after(I,"onChange",c.hitch(this,"_onChange"),!0),q(I,"keydown",c.hitch(this,"_onKeyDown"))):"intermediateChanges"in I&&(I.set("intermediateChanges",
!0),this.own(t.after(I,"onChange",c.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var I=this.editWidget;return String(I.get("displayedValue"in I||"_getDisplayedValueAttr"in I?"displayedValue":
"value"))},_onKeyDown:function(I){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&!I.altKey&&!I.ctrlKey&&(I.keyCode==z.ESCAPE?(I.stopPropagation(),I.preventDefault(),this.cancel(!0)):I.keyCode==z.ENTER&&"INPUT"==I.target.tagName&&(I.stopPropagation(),I.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&this.enableSave()&&f.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(f._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){w.selectInputText(this.editWidget.focusNode)}))}});d=H("dijit.InlineEditBox"+(a("dojo-bidi")?"_NoBidi":""),d,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:x,editorWrapper:e,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=a("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(q(this.displayNode,y,c.hitch(this,"_onClick")),q(this.displayNode,"mouseover, focus",c.hitch(this,"_onMouseOver")),q(this.displayNode,"mouseout, blur",c.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=c.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);h.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(I){A.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",I)},_setDisabledAttr:function(I){this.domNode.setAttribute("aria-disabled",I?"true":"false");I?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);h.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",I);this._set("disabled",I)},_onMouseOver:function(){this.disabled||h.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){h.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(I){this.disabled||(I&&(I.stopPropagation(),I.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
b.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var I=m.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?c.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:v.getComputedStyle(this.displayNode),save:c.hitch(this,"save"),cancel:c.hitch(this,"cancel"),
textDir:this.textDir},I);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var J=this.wrapperWidget;h.add(this.displayNode,"dijitOffScreen");h.remove(J.domNode,"dijitOffScreen");v.set(J.domNode,{visibility:"visible"});b.set(this.displayNode,"tabIndex","-1");var P=J.editWidget,Q=this;r(P.onLoadDeferred,c.hitch(J,function(){P.set("displayedValue"in P||"_setDisplayedValueAttr"in P?"displayedValue":"value",Q.value);this.defer(function(){J.saveButton&&J.saveButton.set("disabled",
"intermediateChanges"in P);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(I){var J=this.wrapperWidget;v.set(J.domNode,{visibility:"hidden"});h.add(J.domNode,"dijitOffScreen");h.remove(this.displayNode,"dijitOffScreen");b.set(this.displayNode,"tabIndex",this._savedTabIndex);I&&
f.focus(this.displayNode)},save:function(I){if(!this.disabled&&this.editing){this._set("editing",!1);var J=this.wrapperWidget.getValue();this.set("value",J);this._showText(I)}},setValue:function(I){A.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",I)},_setValueAttr:function(I){I=c.trim(I);var J=this.renderAsHtml?I:I.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":J||this.noValueIndicator;this._set("value",I);this._started&&this.defer(function(){this.onChange(I)})},getValue:function(){A.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(I){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(I))}});a("dojo-bidi")&&(d=H("dijit.InlineEditBox",
d,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));d._InlineEditor=e;return d})},"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(L,g,t,H,b,h,m){var v={_defaultStandbyParams:{image:m.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(B){if(B=this._normalizeParams(B))return B=new h(v._toStandbyParams(B)),
b.place(B.domNode,t.doc.body),v._createHandle(B)},_normalizeParams:function(B){if(B){if(B.target)return B;if("string"===typeof B){var A=L.byId(B);B=A?A.domNode:H.byId(B)}else B=B.domNode?B.domNode:H.byId(B);if(B)return{target:B}}},_toStandbyParams:function(B){B.imageUrl&&(B.image=B.imageUrl);B.backgroundColor&&(B.color=B.backgroundColor);B.backgroundOpacity&&(B.opacity=B.backgroundOpacity);B.fadeDuration&&(B.duration=B.fadeDuration);return g.mixin({},v._defaultStandbyParams,B)},_createHandle:function(B){return{show:function(){B&&
B.show()},hide:function(){B&&B.hide()},destroy:function(){B&&(B.destroy(),B=null)}}}};return v})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(L,g,t,H,b,h,m,v,B,A,z,c,q,a,r,y,f){L.experimental("dojox.widget.Standby");
return g("dojox.widget.Standby",[r,y],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(d){if(!this._started){if("string"===typeof this.target){var e=f.byId(this.target);this.target=e?e.domNode:h.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,m.set(this._imageNode,"src",this.image),m.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;A.set(this._underlayNode,
{display:"none",backgroundColor:this.color});A.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=c.body()&&c.body().appendChild(this.domNode);7==b("ie")&&(this._ieFixNode=v.create("div"),A.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),c.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(d){console.error(d)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
A.set(this._centerNode,"display","none");A.set(this._underlayNode,"display","none");7==b("ie")&&this._ieFixNode&&(c.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var d=m.get(c.body(),"dir");d&&(d=d.toLowerCase());var e=this._scrollerWidths(),n=this.target,p=A.get(this._centerNode,"display");A.set(this._centerNode,
"display","block");var l=B.position(n,!0);if(n===c.body()||n===c.doc)l=z.getBox(),l.x=l.l,l.y=l.t;var w=B.getMarginBox(this._centerNode);A.set(this._centerNode,"display",p);if(this._ieFixNode){var x=-this._ieFixNode.offsetTop/1E3;l.x=Math.floor((l.x+.9)/x);l.y=Math.floor((l.y+.9)/x);l.w=Math.floor((l.w+.9)/x);l.h=Math.floor((l.h+.9)/x)}var F=A.get(n,"zIndex"),I=p=F;if("auto"===this.zIndex)if("auto"!=F)p=parseInt(p,10),I=parseInt(I,10);else{var J=n;if(J&&J!==c.body()&&J!==c.doc)for(J=n.parentNode,
x=-1E5;J&&J!==c.body();)(F=A.get(J,"zIndex"))&&"auto"!==F&&(F=parseInt(F,10),x<F&&(x=F,p=F+1,I=F+1)),J=J.parentNode}else p=parseInt(this.zIndex,10),I=parseInt(this.zIndex,10);A.set(this._centerNode,"zIndex",I);A.set(this._underlayNode,"zIndex",p);if((p=n.parentNode)&&p!==c.body()&&n!==c.body()&&n!==c.doc){J=l.h;I=l.w;n=B.position(p,!0);this._ieFixNode&&(x=-this._ieFixNode.offsetTop/1E3,n.x=Math.floor((n.x+.9)/x),n.y=Math.floor((n.y+.9)/x),n.w=Math.floor((n.w+.9)/x),n.h=Math.floor((n.h+.9)/x));n.w-=
p.scrollHeight>p.clientHeight&&0<p.clientHeight?e.v:0;n.h-=p.scrollWidth>p.clientWidth&&0<p.clientWidth?e.h:0;"rtl"===d&&(b("opera")?(l.x+=p.scrollHeight>p.clientHeight&&0<p.clientHeight?e.v:0,n.x+=p.scrollHeight>p.clientHeight&&0<p.clientHeight?e.v:0):b("ie")?n.x+=p.scrollHeight>p.clientHeight&&0<p.clientHeight?e.v:0:b("webkit"));n.w<l.w&&(l.w-=n.w);n.h<l.h&&(l.h-=n.h);var P=n.y,Q=n.y+n.h,T=l.y,Y=l.y+J;d=n.x;x=n.x+n.w;F=l.x;var Z=l.x+I;if(Y>P&&T<P)l.y=n.y,J-=P-T,l.h=J<n.h?J:l.h-2*(p.scrollWidth>
p.clientWidth&&0<p.clientWidth?e.h:0);else if(T<Q&&Y>Q)l.h=Q-T;else if(Y<=P||T>=Q)l.h=0;if(Z>d&&F<d)l.x=n.x,I-=d-F,l.w=I<n.w?I:l.w-2*(p.scrollHeight>p.clientHeight&&0<p.clientHeight?e.w:0);else if(F<x&&Z>x)l.w=x-F;else if(Z<=d||F>=x)l.w=0}0<l.h&&0<l.w?(A.set(this._underlayNode,{display:"block",width:l.w+"px",height:l.h+"px",top:l.y+"px",left:l.x+"px"}),e=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(e),b("ie")||(e=
"MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),this._cloneStyles(e,this)),e=l.h/2-w.h/2,p=l.w/2-w.w/2,l.h>=w.h&&l.w>=w.w?A.set(this._centerNode,{top:e+l.y+"px",left:p+l.x+"px",display:"block"}):A.set(this._centerNode,"display","none")):(A.set(this._underlayNode,"display","none"),A.set(this._centerNode,
"display","none"));if(null===this._resizeCheck){var W=this;this._resizeCheck=setInterval(function(){W._size()},100)}}},_cloneStyles:function(d){t.forEach(d,function(e){A.set(this._underlayNode,e,A.get(this.target,e))},this)},_fadeIn:function(){var d=this,e=q.animateProperty({duration:d.duration,node:d._underlayNode,properties:{opacity:{start:0,end:d.opacity}}}),n=q.animateProperty({duration:d.duration,node:d._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){d.onShow();delete d._anim}});
this._anim=a.combine([e,n]);this._anim.play()},_fadeOut:function(){var d=this,e=q.animateProperty({duration:d.duration,node:d._underlayNode,properties:{opacity:{start:d.opacity,end:0}},onEnd:function(){A.set(this.node,{display:"none",zIndex:"-1000"})}}),n=q.animateProperty({duration:d.duration,node:d._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){A.set(this.node,{display:"none",zIndex:"-1000"});d.onHide();d._enableOverflow();delete d._anim}});this._anim=a.combine([e,n]);this._anim.play()},
_ignore:function(d){d&&H.stop(d)},_scrollerWidths:function(){var d=v.create("div");A.set(d,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var e=v.create("div");A.set(e,{width:"200px",height:"10px"});d.appendChild(e);c.body().appendChild(d);e=B.getContentBox(d);A.set(d,"overflow","scroll");var n=B.getContentBox(d);c.body().removeChild(d);return{v:e.w-n.w,h:e.h-n.h}},_setTextAttr:function(d){this.text=this._textNode.innerHTML=
d},_setColorAttr:function(d){A.set(this._underlayNode,"backgroundColor",d);this.color=d},_setImageTextAttr:function(d){m.set(this._imageNode,"alt",d);this.imageText=d},_setImageAttr:function(d){m.set(this._imageNode,"src",d);this.image=d},_setCenterIndicatorAttr:function(d){this.centerIndicator=d;"image"===d?(this._centerNode=this._imageNode,A.set(this._textNode,"display","none")):(this._centerNode=this._textNode,A.set(this._imageNode,"display","none"))},_setTargetAttr:function(d){if("string"===typeof d){var e=
f.byId(d);this._set("target",e?e.domNode:h.byId(d))}else this._set("target",d)},_disableOverflow:function(){if(this.target===c.body()||this.target===c.doc){this._overflowDisabled=!0;var d=c.body();this._oldOverflow=d.style&&d.style.overflow?A.get(d,"overflow"):"";if(b("ie")&&!b("quirks")){if(d.parentNode&&d.parentNode.style&&d.parentNode.style.overflow)this._oldBodyParentOverflow=d.parentNode.style.overflow;else try{this._oldBodyParentOverflow=A.get(d.parentNode,"overflow")}catch(e){this._oldBodyParentOverflow=
"scroll"}A.set(d.parentNode,"overflow","hidden")}A.set(d,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var d=c.body();b("ie")&&!b("quirks")&&(d.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);A.set(d,"overflow",this._oldOverflow);if(b("webkit")){var e=v.create("div",{style:{height:"2px"}});d.appendChild(e);setTimeout(function(){d.removeChild(e)},0)}delete this._oldOverflow}}})})},"esri/toolbars/edit":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/has dojo/dom-construct dojo/dom-style ../kernel ../lang ../sniff ./_toolbar ./_Box ./_GraphicMover ./_VertexEditor ./TextEditor ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/TextSymbol ../graphic".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z,c,q,a,r,y,f,d,e,n,p){var l=g(q,{declaredClass:"esri.toolbars.Edit",constructor:function(w,x){this._map=w;this._tool=0;if(this._map.loaded)this._scratchGL=w.graphics;else var F=H.connect(this._map,"onLoad",this,function(){H.disconnect(F);F=null;this._scratchGL=this._map.graphics});w=m("esri-mobile");this._defaultOptions=t.mixin({vertexSymbol:new d(d.STYLE_CIRCLE,w?20:12,new e(e.STYLE_SOLID,new h([0,0,0,.5]),1),new h([128,128,128])),ghostVertexSymbol:new d(d.STYLE_CIRCLE,
w?18:10,new e(e.STYLE_SOLID,new h([0,0,0,.5]),1),new h([255,255,255,.75])),ghostLineSymbol:new e(e.STYLE_DOT,new h([128,128,128]),2),allowDeleteVertices:!0,allowAddVertices:!0,rotateHandleOffset:w?24:16,boxLineSymbol:new e(e.STYLE_DASH,new h([64,64,64]),1),boxHandleSymbol:new d(d.STYLE_SQUARE,w?16:9,new e(e.STYLE_SOLID,new h([0,0,0,.5]),1),new h([255,255,255,.75])),textAnchorSymbol:new d(d.STYLE_CIRCLE,10,null,new h([255,0,0]))},x||{})},activate:function(w,x,F){this.deactivate();this._graphic=x;this._options=
t.mixin(t.mixin({},this._defaultOptions),F||{});var I=l.MOVE;F=l.EDIT_VERTICES;var J=l.SCALE,P=l.ROTATE,Q=l.EDIT_TEXT,T=!1,Y=!1,Z=!1,W=this._map,U=W.spatialReference,ia=x.geometry.spatialReference;this._geo=!(!U||!ia||U.equals(ia)||!U.isWebMercator()||4326!==ia.wkid);this._isTextPoint=this._prepareTextSymbolEditing(x,w);(w&I)===I&&(T=this._enableMove(x));I=(w&J)===J;P=(w&P)===P;if(I||P)Z=this._enableBoxEditing(x,I,P);(w&F)===F&&(Y=this._enableVertexEditing(x));(w&Q)===Q&&this._enableTextEditing(x);
if(!(T||Y||Z))throw Error("[esri.toolbars.Edit::activate] Unable to activate the tool. Check if the tool is valid for the given geometry type.");if(this._tool=w)this._mapPanEndHandle=H.connect(W,"onPanEnd",this,this._mapPanEndHandler),this._mapExtChgHandle=H.connect(W,"onExtentChange",this,this._mapExtentChangeHandler),this.onActivate(this._tool,x);W.snappingManager&&(T||Y)&&W.snappingManager._startSelectionLayerQuery()},deactivate:function(){this._isTextPoint=null;var w=this._tool,x=this._graphic;
if(w){var F=!!this._modified;this._clear();H.disconnect(this._mapPanEndHandle);H.disconnect(this._mapExtChgHandle);this._graphic=this._geo=this._mapPanEndHandle=this._mapExtChgHandle=null;this.onDeactivate(w,x,{isModified:F});this._map.snappingManager&&this._map.snappingManager._stopSelectionLayerQuery()}},refresh:function(){this._refreshMoveables(!0)},getCurrentState:function(){return{tool:this._tool,graphic:this._graphic,isModified:!!this._modified}},onActivate:function(w,x){},onDeactivate:function(w,
x,F){},onGraphicMoveStart:function(w){},onGraphicFirstMove:function(w){this._modified=!0},onGraphicMove:function(w,x){},onGraphicMoveStop:function(w,x){},onGraphicClick:function(w,x){},onVertexMoveStart:function(w,x){},onVertexFirstMove:function(w,x){this._modified=!0},onVertexMove:function(w,x,F){},onVertexMoveStop:function(w,x,F){},onVertexAdd:function(w,x){this._modified=!0},onVertexClick:function(w,x){},onVertexMouseOver:function(w,x){},onVertexMouseOut:function(w,x){},onVertexDelete:function(w,
x){this._modified=!0},onTextEditStart:function(w,x){},onTextEditEnd:function(w){},onScaleStart:function(w){},onScaleFirstMove:function(w){this._modified=!0},onScale:function(w,x){},onScaleStop:function(w,x){},onRotateStart:function(w){},onRotateFirstMove:function(w){this._modified=!0},onRotate:function(w,x){},onRotateStop:function(w,x){},_eventMap:{activate:["tool","graphic"],deactivate:["tool","graphic","info"],"graphic-move-start":["graphic"],"graphic-first-move":["graphic"],"graphic-move":["graphic",
"transform"],"graphic-move-stop":["graphic","transform"],"graphic-click":["graphic","info"],"vertex-move-start":["graphic","vertexinfo"],"vertex-first-move":["graphic","vertexinfo"],"vertex-move":["graphic","vertexinfo","transform"],"vertex-move-stop":["graphic","vertexinfo","transform"],"vertex-add":["graphic","vertexinfo"],"vertex-click":["graphic","vertexinfo"],"vertex-mouse-over":["graphic","vertexinfo"],"vertex-mouse-out":["graphic","vertexinfo"],"vertex-delete":["graphic","vertexinfo"],"scale-start":["graphic"],
"scale-first-move":["graphic"],scale:["graphic","info"],"scale-stop":["graphic","info"],"rotate-start":["graphic"],"rotate-first-move":["graphic"],rotate:["graphic","info"],"rotate-stop":["graphic","info"]},_prepareTextSymbolEditing:function(w,x){if("point"===w.geometry.type||"multipoint"===w.geometry.type){var F=w.getLayer(),I=F.renderer;F=w.symbol||F._getSymbol(w);!F&&(I.hasVisualVariables("sizeInfo",!1)||I.hasVisualVariables("colorInfo",!1)||I.hasVisualVariables("opacityInfo",!1))&&I.addBreak&&
I.infos&&1===I.infos.length&&(F=I.infos[0].symbol||I.defaultSymbol);if(F&&"textsymbol"===F.type){if((x&l.SCALE)===l.SCALE||(x&l.ROTATE)===l.ROTATE||(x&l.EDIT_TEXT)===l.EDIT_TEXT){w.setSymbol(new n(F.toJson()));var J=this;this._textSymbolEditor?(this._textSymbolEditor.createForm(w),this._textSymbolEditor.show()):this._options&&this._options.textSymbolEditor?(this._textSymbolEditor=this._options.textSymbolEditor,this._textSymbolEditor.on("symbol-change",function(){J._boxEditor&&J._boxEditor.refresh()})):
L(["../dijit/SymbolEditor"],function(P){if(!J._textSymbolEditor){var Q=J._options.textSymbolEditorHolder?v.create("div",null,J._options.textSymbolEditorHolder):v.create("div",null,J._map.root);J._textSymbolEditor=new P({graphic:w},Q);P=J._textSymbolEditor.domNode.parentNode.id;B.set(J._textSymbolEditor.domNode,{position:"map_root"===P?"absolute":"relative",left:"map_root"===P?J._map.width/2-100+"px":"5px",top:"20px","z-index":50});J._textSymbolEditor.startup();J._textSymbolEditor.createForm(w);J._textSymbolEditor.show();
J._textSymbolEditor.on("symbol-change",function(){J._boxEditor&&J._boxEditor.refresh()})}})}if((x&l.MOVE)===l.MOVE||(x&l.ROTATE)===l.ROTATE||(x&l.SCALE)===l.SCALE)this._textAnchor=new p(w.geometry,this._options.textAnchorSymbol),this._scratchGL.add(this._textAnchor);return!0}}return!1},_enableMove:function(w){var x=this._map;switch(w.geometry.type){case "point":case "polyline":case "polygon":return this._graphicMover=new r(w,x,this,this._textAnchor),!0}return!1},_enableVertexEditing:function(w){var x=
this._map;switch(w.geometry.type){case "multipoint":case "polyline":case "polygon":return this._vertexEditor=y.create(w,x,this),!0}return!1},_enableBoxEditing:function(w,x,F){var I=this._map,J=w.geometry.type;return"polyline"===J||"polygon"===J||this._isTextPoint?(this._boxEditor=new a(w,I,this,x,F,this._options.uniformScaling,this._isTextPoint),!0):!1},_enableTextEditing:function(w){return this._isTextPoint?(this._textEditor=new f(w,this._map,this),H.connect(this._textEditor,"onEditStart",t.hitch(this,
function(){this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._map.disableKeyboardNavigation();this._disableMove();this._disableBoxEditing()})),!0):!1},_disableMove:function(){var w=this._graphicMover;w&&(w.destroy(),this._graphicMover=null)},_disableVertexEditing:function(){var w=this._vertexEditor;w&&(w.destroy(),this._vertexEditor=null)},_disableBoxEditing:function(){var w=this._boxEditor;w&&(w.destroy(),this._boxEditor=null)},_disableTextEditing:function(){this._textEditor&&
(this._textEditor.destroy(),this._textEditor=null);this._map.enableKeyboardNavigation()},_disableSymbolEditing:function(){this._textSymbolEditor&&this._textSymbolEditor.hide()},_clear:function(){this._disableMove();this._disableVertexEditing();this._disableBoxEditing();this._disableTextEditing();this._disableSymbolEditing();this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._tool=0;this._modified=!1},_mapPanEndHandler:function(){this._refreshMoveables()},
_mapExtentChangeHandler:function(w,x,F){F&&this._refreshMoveables()},_refreshMoveables:function(w){var x=b.filter([this._graphicMover,this._vertexEditor,this._boxEditor],z.isDefined);b.forEach(x,function(F){F.refresh(w)})},_beginOperation:function(w){b.forEach(this._getAffectedTools(w),function(x){x.suspend()})},_endOperation:function(w){b.forEach(this._getAffectedTools(w),function(x){x.resume()})},_getAffectedTools:function(w){var x=[];switch(w){case "MOVE":x=[this._vertexEditor,this._boxEditor];
break;case "VERTICES":x=[this._boxEditor];break;case "BOX":x=[this._vertexEditor]}return x=b.filter(x,z.isDefined)}});t.mixin(l,{MOVE:1,EDIT_VERTICES:2,SCALE:4,ROTATE:8,EDIT_TEXT:16});m("extend-esri")&&t.setObject("toolbars.Edit",l,A);return l})},"esri/toolbars/_Box":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/has dojo/dom-style dojox/gfx/Moveable dojox/gfx/matrix ../kernel ../lang ../geometry/Point ../geometry/Polyline ../symbols/SimpleMarkerSymbol ../geometry/webMercatorUtils ../geometry/jsonUtils ../graphic".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z,c,q,a,r,y,f){L=L(null,{declaredClass:"esri.toolbars._Box",constructor:function(d,e,n,p,l,w,x){this._graphic=d;this._map=e;this._toolbar=n;this._scale=p;this._rotate=l;this._defaultEventArgs={};this._scaleEvent="Scale";this._rotateEvent="Rotate";this._uniformScaling=w;d=n._options;this._markerSymbol=d.boxHandleSymbol;this._lineSymbol=d.boxLineSymbol;this._moveStartHandler=g.hitch(this,this._moveStartHandler);this._firstMoveHandler=g.hitch(this,this._firstMoveHandler);
this._moveStopHandler=g.hitch(this,this._moveStopHandler);this._moveHandler=g.hitch(this,this._moveHandler);this._isTextPoint=x;this._init()},destroy:function(){this._cleanUp();this._graphic=this._map=this._toolbar=this._markerSymbol=this._lineSymbol=null},refresh:function(){this._draw()},suspend:function(){t.forEach(this._getAllGraphics(),function(d){d.hide()})},resume:function(){t.forEach(this._getAllGraphics(),function(d){d.show()});this._draw()},_init:function(){this._draw()},_cleanUp:function(){this._connects&&
t.forEach(this._connects,H.disconnect);var d=this._toolbar._scratchGL;this._anchors&&t.forEach(this._anchors,function(e){d.remove(e.graphic);(e=e.moveable)&&e.destroy()});this._box&&d.remove(this._box);this._box=this._anchors=this._connects=null},_draw:function(){if(this._graphic.getDojoShape()){var d=this._map,e=this._toolbar._scratchGL,n=this._getBoxCoords(),p=new q(d.spatialReference),l=g.clone(t.filter(n,function(w,x){return 8!==x&&0===x%2}));l[0]&&l.push([l[0][0],l[0][1]]);p.addPath(l);this._rotate&&
p.addPath([n[1],n[8]]);this._box?this._box.setGeometry(p):(this._box=new f(p,this._lineSymbol),e.add(this._box));this._anchors?t.forEach(this._anchors,function(w,x){this._scale||(x=8);var F=new c(n[x],d.spatialReference);w.graphic.setGeometry(F);F=w.moveable;var I=w.graphic.getDojoShape();I&&(F?I!==F.shape&&(F.destroy(),w.moveable=this._getMoveable(w.graphic,x)):w.moveable=this._getMoveable(w.graphic,x))},this):(this._anchors=[],this._connects=[],t.forEach(n,function(w,x){!this._scale&&8>x||(w=new c(w,
d.spatialReference),w=new f(w,this._markerSymbol),this._isTextPoint&&1===x%2&&w.hide(),e.add(w),this._anchors.push({graphic:w,moveable:this._getMoveable(w,x)}))},this))}else this._cleanUp()},_getBoxCoords:function(d){var e=this._map,n=[],p,l,w;if(this._isTextPoint){var x=this._graphic.getNode().getBoundingClientRect();var F=e.__container.getBoundingClientRect();x=[{x:x.left-F.left,y:x.top-F.top},{x:x.right-F.left,y:x.top-F.top},{x:x.right-F.left,y:x.bottom-F.top},{x:x.left-F.left,y:x.bottom-F.top}]}else x=
this._getTransformedBoundingBox(this._graphic);t.forEach(x,function(I,J,P){p=I;(l=P[J+1])||(l=P[0]);w={x:(p.x+l.x)/2,y:(p.y+l.y)/2};d||(p=e.toMap(p),w=e.toMap(w));n.push([p.x,p.y]);n.push([w.x,w.y])});this._rotate&&(x=g.clone(n[1]),x=d?{x:x[0],y:x[1]}:e.toScreen({x:x[0],y:x[1],spatialReference:e.spatialReference}),x.y-=this._toolbar._options.rotateHandleOffset,d||(x=e.toMap(x)),n.push([x.x,x.y]));return n},_getTransformedBoundingBox:function(d){var e=this._map,n=d.geometry.getExtent(),p=d.geometry.spatialReference;
d=new c(n.xmin,n.ymax,p);n=new c(n.xmax,n.ymin,p);d=e.toScreen(d);n=e.toScreen(n);return[{x:d.x,y:d.y},{x:n.x,y:d.y},{x:n.x,y:n.y},{x:d.x,y:n.y}]},_getAllGraphics:function(){var d=[this._box];this._anchors&&t.forEach(this._anchors,function(e){d.push(e.graphic)});return d=t.filter(d,z.isDefined)},_getMoveable:function(d,e){var n=d.getDojoShape();if(n)return d=new v(n),d._index=e,this._connects.push(H.connect(d,"onMoveStart",this._moveStartHandler)),this._connects.push(H.connect(d,"onFirstMove",this._firstMoveHandler)),
this._connects.push(H.connect(d,"onMoveStop",this._moveStopHandler)),d.onMove=this._moveHandler,(n=n.getEventSource())&&m.set(n,"cursor",this._toolbar._cursors["box"+e]),d},_moveStartHandler:function(d){this._toolbar["on"+(8===d.host._index?this._rotateEvent:this._scaleEvent)+"Start"](this._graphic)},_firstMoveHandler:function(d){this._toolbar._deactivateScrollWheel();var e=d.host._index,n=this._wrapOffset=d.host.shape._wrapOffsets[0]||0,p=this._graphic.getLayer().getNavigationTransform();d=t.map(this._getBoxCoords(!0),
function(w){return{x:w[0]+n,y:w[1]}});var l=this._isTextPoint?this._map.toScreen(this._graphic.geometry):{x:d[1].x,y:d[3].y};this._centerCoord=B.multiplyPoint(B.invert(p),l);if(8===e)l=B.multiplyPoint(B.invert(p),d[1]),this._isTextPoint&&(this._centerCoord=this._deNormalizePoint(this._centerCoord,l)),this._startLine=[this._centerCoord,l],this._moveLine=g.clone(this._startLine);else if(l=B.multiplyPoint(B.invert(p),d[e]),p=B.multiplyPoint(B.invert(p),d[(e+4)%8]),this._isTextPoint&&(this._centerCoord=
this._deNormalizePoint(this._centerCoord,l)),this._firstMoverToAnchor=Math.sqrt((l.x-this._centerCoord.x)*(l.x-this._centerCoord.x)+(l.y-this._centerCoord.y)*(l.y-this._centerCoord.y)),this._startBox=p,this._startBox.width=d[4].x-d[0].x,this._startBox.height=d[4].y-d[0].y,this._moveBox=g.clone(this._startBox),this._xfactor=l.x>p.x?1:-1,this._yfactor=l.y>p.y?1:-1,1===e||5===e)this._xfactor=0;else if(3===e||7===e)this._yfactor=0;this._toolbar._beginOperation("BOX");this._toolbar["on"+(8===e?this._rotateEvent:
this._scaleEvent)+"FirstMove"](this._graphic)},_moveHandler:function(d,e){d=d.host._index;var n=this._defaultEventArgs;n.angle=0;n.scaleX=1;n.scaleY=1;if(8===d){var p=this._startLine;var l=this._moveLine;var w=l[1];w.x+=e.dx;w.y+=e.dy;e=this._getAngle(p,l);this._isTextPoint&&(e+=this._graphic.symbol.angle);l=B.rotategAt(e,p[0]);this._graphic.getDojoShape().setTransform(l);n.transform=l;n.angle=e;n.around=p[0]}else{p=this._startBox;l=this._moveBox;l.width+=e.dx*this._xfactor;l.height+=e.dy*this._yfactor;
this._uniformScaling||this._isTextPoint?(p=l.x+this._xfactor*l.width,l=l.y+this._yfactor*l.height,p=Math.sqrt((p-this._centerCoord.x)*(p-this._centerCoord.x)+(l-this._centerCoord.y)*(l-this._centerCoord.y)),this._scaleRatio=e=w=p/this._firstMoverToAnchor,p=this._centerCoord):(e=l.width/p.width,w=l.height/p.height,p={x:p.x,y:p.y});if(isNaN(e)||Infinity===e||-Infinity===e)e=1;if(isNaN(w)||Infinity===w||-Infinity===w)w=1;l=B.scaleAt(e,w,p);if(this._isTextPoint){var x=B.rotategAt(this._graphic.symbol.angle,
p);this._graphic.getDojoShape().setTransform([x,l])}else this._graphic.getDojoShape().setTransform(l);n.transform=l;n.scaleX=e;n.scaleY=w;n.around=p}this._toolbar["on"+(8===d?this._rotateEvent:this._scaleEvent)](this._graphic,n)},_moveStopHandler:function(d){this._toolbar._activateScrollWheel();var e=this._graphic,n=this._toolbar,p=n._geo?r.geographicToWebMercator(e.geometry):e.geometry,l=p.spatialReference,w=e.getDojoShape(),x=w.getTransform(),F=e.getLayer().getNavigationTransform();this._isTextPoint?
(e=this._graphic.symbol,8===d.host._index?e.angle+=this._getAngle(this._startLine,this._moveLine):e.font.setSize(Math.round(e.font.size*this._scaleRatio*100)/100),this._graphic.setSymbol(e)):(p=p.toJson(),this._updateSegments(p.paths||p.rings,x,F,l),w.setTransform(null),p=y.fromJson(p),e.setGeometry(n._geo?r.webMercatorToGeographic(p,!0):p));this._draw();this._startLine=this._moveLine=this._startBox=this._moveBox=this._xfactor=this._yfactor=null;n._endOperation("BOX");this._defaultEventArgs.transform=
x;n["on"+(8===d.host._index?this._rotateEvent:this._scaleEvent)+"Stop"](this._graphic,this._defaultEventArgs)},_updateSegments:function(d,e,n,p){var l=this._map,w=this._wrapOffset||0;t.forEach(d,function(x){t.forEach(x,function(F){this._updatePoint(F,p,w,B,l,n,e)},this)},this)},_updatePoint:function(d,e,n,p,l,w,x){e=l.toScreen({x:d[0],y:d[1],spatialReference:e},!0);e.x+=n;e=p.multiplyPoint([w,x,p.invert(w)],e);e.x-=n;n=l.toMap(e);d[0]=n.x;d[1]=n.y},_getAngle:function(d,e){return 180*Math.atan2(e[0].y-
e[1].y,e[0].x-e[1].x)/Math.PI-180*Math.atan2(d[0].y-d[1].y,d[0].x-d[1].x)/Math.PI},_deNormalizePoint:function(d,e){var n=this._map._getFrameWidth();if(-1===n)return d;for(d={x:d.x,y:d.y};Math.abs(d.x-e.x)>=n;)d.x=d.x<e.x?d.x+n:d.x-n;var p=Math.abs(d.x-e.x);Math.abs(d.x-e.x+n)<p?d.x+=n:Math.abs(d.x-e.x-n)<p&&(d.x-=n);return d}});h("extend-esri")&&g.setObject("toolbars._Box",L,A);return L})},"dojox/gfx/Moveable":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/topic dojo/touch dojo/dom-class dojo/_base/window ./Mover dojo/mouse".split(" "),
function(L,g,t,H,b,h,m,v,B,A){return g("dojox.gfx.Moveable",null,{constructor:function(z,c){this.shape=z;this.delay=c&&0<c.delay?c.delay:0;this.mover=c&&c.mover?c.mover:B;this.leftButtonOnly=c&&c.leftButtonOnly;this.events=[this.shape.on(h.press,L.hitch(this,"onMouseDown"))]},destroy:function(){t.forEach(this.events,function(z){z.remove()});this.events=this.shape=null},onMouseDown:function(z){this.delay?(this.events.push(this.shape.on(h.move,L.hitch(this,"onMouseMove")),this.shape.on(h.release,L.hitch(this,
"onMouseUp"))),this._lastX=z.clientX,this._lastY=z.clientY):this.leftButtonOnly&&!A.isLeft(z)||new this.mover(this.shape,z,this);H.stop(z)},onMouseMove:function(z){var c=z.clientY;if(Math.abs(z.clientX-this._lastX)>this.delay||Math.abs(c-this._lastY)>this.delay)this.onMouseUp(z),new this.mover(this.shape,z,this);H.stop(z)},onMouseUp:function(z){this.events.pop().remove()},onMoveStart:function(z){b.publish("/gfx/move/start",z);m.add(v.body(),"dojoMove")},onMoveStop:function(z){b.publish("/gfx/move/stop",
z);m.remove(v.body(),"dojoMove")},onFirstMove:function(z){},onMove:function(z,c,q){this.onMoving(z,c,q);this.shape.applyLeftTransform(c);this.onMoved(z,c)},onMoving:function(z,c){},onMoved:function(z,c){}})})},"dojox/gfx/Mover":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/on dojo/touch dojo/_base/event".split(" "),function(L,g,t,H,b,h){return t("dojox.gfx.Mover",null,{constructor:function(m,v,B){this.shape=m;this.lastX=v.clientX;this.lastY=v.clientY;m=this.host=B;v=
document;B=H(v,b.move,L.hitch(this,"onFirstMove"));this.events=[H(v,b.move,L.hitch(this,"onMouseMove")),H(v,b.release,L.hitch(this,"destroy")),H(v,"dragstart",L.hitch(h,"stop")),H(v,"selectstart",L.hitch(h,"stop")),B];if(m&&m.onMoveStart)m.onMoveStart(this)},onMouseMove:function(m){var v=m.clientX,B=m.clientY;this.host.onMove(this,{dx:v-this.lastX,dy:B-this.lastY},m);this.lastX=v;this.lastY=B;h.stop(m)},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove()},destroy:function(){g.forEach(this.events,
function(v){v.remove()});var m=this.host;if(m&&m.onMoveStop)m.onMoveStop(this);this.events=this.shape=null}})})},"esri/toolbars/_GraphicMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/json dojo/dom-style dojox/gfx/Moveable dojox/gfx/Mover dojox/gfx/matrix ../kernel ../PointerEvents ../sniff ../geometry/webMercatorUtils ../geometry/ScreenPoint ../geometry/Point".split(" "),function(L,g,t,H,b,h,m,v,B,A,z,c,q,a){var r=L(null,{declaredClass:"esri.toolbars._GraphicMover",
constructor:function(y,f,d,e){this.graphic=y;this.map=f;this.toolbar=d;this.tempPt=e;this._enableGraphicMover();this._moved=!1},refresh:function(y){var f=this.graphic.getDojoShape();!f||!y&&f._hostGraphic||(this._disableGraphicMover(),this._enableGraphicMover())},destroy:function(){this._disableGraphicMover()},hasMoved:function(){return this._moved},_enableGraphicMover:function(){var y=this.graphic,f=y.getDojoShape();f&&(f._hostGraphic=y,this._moveable=new h(f,{mover:r.Mover}),this._moveStartHandle=
t.connect(this._moveable,"onMoveStart",this,this._moveStartHandler),this._firstMoveHandle=t.connect(this._moveable,"onFirstMove",this,this._firstMoveHandler),this._movingHandle=t.connect(this._moveable,"onMoving",this,this._movingHandler),this._moveStopHandle=t.connect(this._moveable,"onMoveStop",this,this._moveStopHandler),(y=f.getEventSource())&&b.set(y,"cursor",this.toolbar._cursors.move))},_disableGraphicMover:function(){var y=this._moveable;if(y){t.disconnect(this._moveStartHandle);t.disconnect(this._firstMoveHandle);
t.disconnect(this._movingHandle);t.disconnect(this._moveStopHandle);var f=y.shape;f&&(f._hostGraphic=null,(f=f.getEventSource())&&b.set(f,"cursor","inherit"));y.destroy()}this._moveable=null},_moveStartHandler:function(){var y=this.graphic,f=this.map;this._startTx=y.getDojoShape().getTransform();"point"===this.graphic.geometry.type&&f.snappingManager&&f.snappingManager._setUpSnapping();this.toolbar.onGraphicMoveStart(y)},_firstMoveHandler:function(){this.toolbar._beginOperation("MOVE");this.toolbar.onGraphicFirstMove(this.graphic)},
_movingHandler:function(y,f,d){y=y.shape.getTransform();f=this.map;var e;z("esri-pointer")?e=f.navigationManager.pointerEvents._processTouchEvent(d,d):d&&"pointermove"===d.type&&(e=A.prototype._processTouchEvent.call({map:f},d,d));e&&f.snappingManager&&f.snappingManager._onSnappingMouseMoveHandler(e);this.tempPt&&this.tempPt.getDojoShape().setTransform(y);this.toolbar.onGraphicMove(this.graphic,y)},_moveStopHandler:function(y){var f=this.graphic,d=this.toolbar,e=this.map,n=d._geo?c.geographicToWebMercator(f.geometry):
f.geometry,p=n.type,l=f.getDojoShape(),w=l.getTransform();if(H.toJson(w)!==H.toJson(this._startTx)){this._moved=!0;switch(p){case "point":p=[w,v.invert(this._startTx)];if(e.snappingManager)var x=e.snappingManager._snappingPoint;n=x||e.toMap(v.multiplyPoint(p,e.toScreen(n,!0)));e.snappingManager&&e.snappingManager._killOffSnapping();break;case "polyline":n=this._updatePolyGeometry(n,n.paths,w);break;case "polygon":n=this._updatePolyGeometry(n,n.rings,w)}l.setTransform(null);f.setGeometry(d._geo?c.webMercatorToGeographic(n,
!0):n);this.tempPt&&this.tempPt.setGeometry(new a(f.geometry.toJson()))}else this._moved=!1;d._endOperation("MOVE");d.onGraphicMoveStop(f,w);this._moved||(y=y.__e,e=this.map.position,y=new q(y.pageX-e.x,y.pageY-e.y),d.onGraphicClick(f,{screenPoint:y,mapPoint:this.map.toMap(y)}))},_updatePolyGeometry:function(y,f,d){var e=this.map,n=y.getPoint(0,0);e=e.toMap(e.toScreen(n).offset(d.dx,d.dy));d=e.x-n.x;n=e.y-n.y;var p;for(e=0;e<f.length;e++){var l=f[e];for(p=0;p<l.length;p++){var w=y.getPoint(e,p);y.setPoint(e,
p,w.offset(d,n))}}return y}});r.Mover=L(m,{declaredClass:"esri.toolbars._Mover",constructor:function(y,f,d){this.__e=f}});z("extend-esri")&&(g.setObject("toolbars._GraphicMover",r,B),g.setObject("toolbars._Mover",r.Mover,B));return r})},"esri/toolbars/_VertexEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/has dijit/Menu dijit/MenuItem ../kernel ./_VertexMover ../geometry/Point ../geometry/jsonUtils dojo/i18n!../nls/jsapi".split(" "),function(L,
g,t,H,b,h,m,v,B,A,z,c){var q=L(null,{declaredClass:"esri.toolbars._GraphicVertexEditor",constructor:function(a,r,y){this.graphic=a;this.map=r;this.toolbar=y;a=y._options;this._symbol1=a.vertexSymbol;this._symbol2=a.ghostVertexSymbol;r=a.ghostLineSymbol;this._lineStroke={style:r.style,width:r.width,color:r.color};this._canDel=a.allowDeleteVertices;this._canAdd=a.allowAddVertices;this._addControllers()},destroy:function(){this._removeControllers()},refresh:function(a){a?(this._removeControllers(),this._addControllers()):
(this._refresh(this._vertexMovers),this._refresh(this._mpVertexMovers))},suspend:function(){this._suspended||this._removeControllers();this._suspended=!0},resume:function(){this._suspended&&this._addControllers();this._suspended=!1},_addControllers:function(){this._firstMoveHandle=t.connect(B,"onFirstMove",this,this._firstMoveHandler);this._moveStopHandle=t.connect(B,"onMoveStop",this,this._moveStopHandler);this._vertexMovers=this._add(this._getSegments(this.graphic.geometry),this._symbol1);this._canAdd&&
(this._mpVertexMovers=this._add(this._getMidpointSegments(this.graphic.geometry),this._symbol2,!0));var a=this._getGraphicsLayer();this._mouseOverHandle=t.connect(a,"onMouseOver",this,this._mouseOverHandler);this._mouseOutHandle=t.connect(a,"onMouseOut",this,this._mouseOutHandler);this._canDel&&(this._ctxMenu=new h({style:"font-size: 12px; margin-left: 5px; margin-top: 5px;"}),a=this._ctxDelete=new m({label:c.toolbars.edit.deleteLabel,iconClass:"vertexDeleteIcon",style:"outline: none;"}),this._deleteHandle=
t.connect(a,"onClick",this,this._deleteHandler),this._ctxMenu.addChild(a),this._ctxMenu.startup())},_removeControllers:function(){t.disconnect(this._firstMoveHandle);t.disconnect(this._moveStopHandle);t.disconnect(this._mouseOverHandle);t.disconnect(this._mouseOutHandle);t.disconnect(this._deleteHandle);this._ctxMenu&&(this._ctxDelete=null,this._unbindCtxNode(),this._ctxMenu.destroyRecursive());this._remove(this._vertexMovers);this._remove(this._mpVertexMovers);this._vertexMovers=this._mpVertexMovers=
null},_add:function(a,r,y){var f,d,e=this.graphic,n=[];for(f=0;f<a.length;f++){var p=a[f],l=[];for(d=0;d<p.length;d++)l.push(new B(p[d],r,e,f,d,p.length,this,y));n.push(l)}return n},_remove:function(a){a&&H.forEach(a,function(r){H.forEach(r,function(y){y.destroy()})})},_refresh:function(a){a&&H.forEach(a,function(r){H.forEach(r,function(y){y.refresh()})})},_isNew:function(a){return-1===H.indexOf(this._vertexMovers[a.segIndex],a)?!0:!1},_getGraphicsLayer:function(){return this.toolbar._scratchGL},
_deleteHandler:function(a){a=this._selectedMover;this._updateRelatedGraphic(a,a.relatedGraphic,a.graphic.geometry,a.segIndex,a.ptIndex,a.segLength,!1,!0);this._canAdd&&this._deleteMidpoints(a);this._deleteVertex(a);this.toolbar._endOperation("VERTICES")},_mouseOverHandler:function(a){a=a.graphic;var r=this._findMover(a);r&&(this.toolbar.onVertexMouseOver(this.graphic,r._getInfo()),r._placeholder||(this._selectedMover=r,this._canDel&&this._bindCtxNode(a.getDojoShape().getNode())))},_mouseOutHandler:function(a){if(a=
this._findMover(a.graphic))this.toolbar.onVertexMouseOut(this.graphic,a._getInfo())},_bindCtxNode:function(a){this._unbindCtxNode();this._ctxDelete.set("disabled",this._selectedMover.segLength<=this.minLength?!0:!1);this._ctxMenu.bindDomNode(a);this._bindNode=a},_unbindCtxNode:function(){var a=this._bindNode;a&&this._ctxMenu.unBindDomNode(a)},_findMover:function(a){var r=[];var y=this._mpVertexMovers;H.forEach(this._vertexMovers,function(d){r=r.concat(d)});y&&H.forEach(y,function(d){r=r.concat(d)});
for(y=0;y<r.length;y++){var f=r[y];if(f.graphic===a)return f}},_firstMoveHandler:function(a){!this._isNew(a)&&this._canAdd&&this._hideRelatedMidpoints(a);this.toolbar._beginOperation("VERTICES")},_moveStopHandler:function(a,r){var y=this._isNew(a);r&&(r.dx||r.dy)?(this._updateRelatedGraphic(a,a.relatedGraphic,a.graphic.geometry,a.segIndex,a.ptIndex,a.segLength,y),this._canAdd&&(y?this._addMidpoints(a):(this._repositionRelatedMidpoints(a),this._showRelatedMidpoints(a))),this.toolbar._endOperation("VERTICES")):
!y&&this._canAdd&&this._showRelatedMidpoints(a)},_showRelatedMidpoints:function(a){var r=this._getAdjacentMidpoints(a.ptIndex,a.segLength),y=this._mpVertexMovers[a.segIndex];for(a=0;a<r.length;a++){var f=y[r[a]];f.graphic.show();f.refresh()}},_hideRelatedMidpoints:function(a){var r=this._getAdjacentMidpoints(a.ptIndex,a.segLength),y=this._mpVertexMovers[a.segIndex];for(a=0;a<r.length;a++)y[r[a]].graphic.hide()},_repositionRelatedMidpoints:function(a){var r,y=this._getAdjacentMidpoints(a.ptIndex,a.segLength),
f=this._mpVertexMovers[a.segIndex];for(r=0;r<y.length;r++){var d=this._getAdjacentVertices(y[r],a.segLength),e=a.relatedGraphic.geometry.getPoint(a.segIndex,d[0]);d=a.relatedGraphic.geometry.getPoint(a.segIndex,d[1]);e=new A({x:(e.x+d.x)/2,y:(e.y+d.y)/2,spatialReference:e.spatialReference.toJson()});f[y[r]].graphic.setGeometry(e)}},_addMidpoints:function(a){var r=a.segIndex,y=a.ptIndex,f=a.segLength,d=y+1,e,n=f+1;this._mpVertexMovers[r].splice(y,1);var p=this._vertexMovers[r];for(e=0;e<d;e++)p[e].segLength+=
1;for(e=d;e<p.length;e++)p[e].ptIndex+=1,p[e].segLength+=1;a.ptIndex=d;a.segLength=p.length+1;p.splice(d,0,a);a.graphic.setSymbol(this._symbol1);p=this._mpVertexMovers[r];for(e=0;e<y;e++)p[e].segLength+=1;for(e=y;e<f-1;e++)p[e].ptIndex+=1,p[e].segLength+=1;d=this._getAdjacentVertices(y,n);r=this._getAdjacentVertices(y+1,n);f=a.relatedGraphic.geometry.getPoint(a.segIndex,d[0]);e=a.relatedGraphic.geometry.getPoint(a.segIndex,d[1]);d=new A({x:(f.x+e.x)/2,y:(f.y+e.y)/2,spatialReference:f.spatialReference.toJson()});
f=a.relatedGraphic.geometry.getPoint(a.segIndex,r[0]);e=a.relatedGraphic.geometry.getPoint(a.segIndex,r[1]);r=new A({x:(f.x+e.x)/2,y:(f.y+e.y)/2,spatialReference:f.spatialReference.toJson()});f=new B(d,this._symbol2,this.graphic,a.segIndex,y,n,this,!0);a=new B(r,this._symbol2,this.graphic,a.segIndex,y+1,n,this,!0);p.splice(y,0,f,a)},_deleteVertex:function(a){var r,y=a.ptIndex,f=this._vertexMovers[a.segIndex];for(r=0;r<y;r++)--f[r].segLength;for(r=y+1;r<f.length;r++){var d=f[r];--d.ptIndex;--d.segLength}f.splice(y,
1);r=a._getInfo();a.destroy();this.toolbar.onVertexDelete(this.graphic,r)}});g.mixin(q,{create:function(a,r,y){switch(a.geometry.type){case "multipoint":return new q.MultipointVertexEditor(a,r,y);case "polyline":return new q.PolylineVertexEditor(a,r,y);case "polygon":return new q.PolygonVertexEditor(a,r,y)}}});q.MultipointVertexEditor=L(q,{declaredClass:"esri.toolbars._MultipointVertexEditor",minLength:1,constructor:function(){this._moveStartHandle=t.connect(B,"onMoveStart",this,this._moveStartHandler);
t.disconnect(this._firstMoveHandle)},destroy:function(){this.inherited(arguments);t.disconnect(this._moveStartHandle)},_getSegments:function(a){var r=a.points,y=[],f=a.spatialReference;for(a=0;a<r.length;a++){var d=r[a];y.push(new A({x:d[0],y:d[1],spatialReference:f.toJson()}))}return[y]},_getMidpointSegments:function(a){return[]},_getControlPoints:function(a,r,y,f,d){return[]},_getGraphicsLayer:function(){return this.graphic._graphicsLayer},_mouseOverHandler:function(a){var r=a.graphic;if(a=this._findMover(a))this.toolbar.onVertexMouseOver(r,
a._getInfo()),this._selectedMover=a,this._canDel&&this._bindCtxNode(a.graphic.getDojoShape().getNode())},_mouseOutHandler:function(a){var r=a.graphic;if(a=this._findMover(a))this.toolbar.onVertexMouseOut(r,a._getInfo())},_findMover:function(a){var r=[].concat(this._vertexMovers[0]),y=a.target;for(a=0;a<r.length;a++){var f=r[a];if(f.graphic.getDojoShape().getNode()===y)return f}},_moveStartHandler:function(a){var r=a.ptIndex,y=a.segLength-1,f=a.relatedGraphic.geometry.points;a=f.splice(r,1);f.push(a[0]);
f=this._vertexMovers[0];for(a=y;a>r;a--)--f[a].ptIndex;a=f.splice(r,1);f.push(a[0]);a[0].ptIndex=y},_moveStopHandler:function(a){this._updateRelatedGraphic(a,a.relatedGraphic,a.graphic.geometry,a.segIndex,a.ptIndex,a.segLength);this.toolbar._endOperation("VERTICES")},_updateRelatedGraphic:function(a,r,y,f,d,e,n,p){a=r.geometry;p?a.removePoint(d):a.setPoint(d,y);r.setGeometry(a)},_deleteMidpoints:function(a){}});q.PolylineVertexEditor=L(q,{declaredClass:"esri.toolbars._PolylineVertexEditor",minLength:2,
_getSegments:function(a){var r,y,f=a.paths,d=[];for(r=0;r<f.length;r++){var e=f[r],n=[];for(y=0;y<e.length;y++)n.push(a.getPoint(r,y));d.push(n)}return d},_getMidpointSegments:function(a){var r,y,f=a.paths,d=[],e=a.spatialReference;for(r=0;r<f.length;r++){var n=f[r],p=[];for(y=0;y<n.length-1;y++){var l=a.getPoint(r,y),w=a.getPoint(r,y+1);l=new A({x:(l.x+w.x)/2,y:(l.y+w.y)/2,spatialReference:e.toJson()});p.push(l)}d.push(p)}return d},_getControlPoints:function(a,r,y,f,d){var e=this.map,n,p;this._isNew(a)?
(a=f,f+=1,0<=a&&(n=e.toScreen(r.getPoint(y,a))),f<=d&&(p=e.toScreen(r.getPoint(y,f)))):(a=f-1,f+=1,0<=a&&(n=e.toScreen(r.getPoint(y,a))),f<d&&(p=e.toScreen(r.getPoint(y,f))));return[n,p]},_getAdjacentMidpoints:function(a,r){var y=[],f=a-1;0<=f&&y.push(f);a<r-1&&y.push(a);return y},_getAdjacentVertices:function(a,r){return[a,a+1]},_deleteMidpoints:function(a){var r=this._mpVertexMovers[a.segIndex],y=r.length-1,f=this._getAdjacentMidpoints(a.ptIndex,a.segLength).sort(),d,e=f[0];for(d=0;d<e;d++)--r[d].segLength;
for(d=e+1;d<r.length;d++){var n=r[d];--n.ptIndex;--n.segLength}if(1===f.length)r.splice(e,1)[0].destroy();else for(n=this._getAdjacentVertices(e,y),d=a.relatedGraphic.geometry.getPoint(a.segIndex,n[0]),n=a.relatedGraphic.geometry.getPoint(a.segIndex,n[1]),d=new A({x:(d.x+n.x)/2,y:(d.y+n.y)/2,spatialReference:d.spatialReference.toJson()}),a=new B(d,this._symbol2,this.graphic,a.segIndex,e,y,this,!0),r=r.splice(e,f.length,a),d=0;d<r.length;d++)r[d].destroy()},_updateRelatedGraphic:function(a,r,y,f,d,
e,n,p){a=r.geometry;n?a.insertPoint(f,d+1,z.fromJson(y.toJson())):p?a.removePoint(f,d):a.setPoint(f,d,z.fromJson(y.toJson()));r.setGeometry(a)}});q.PolygonVertexEditor=L(q,{declaredClass:"esri.toolbars._PolygonVertexEditor",minLength:3,_getSegments:function(a){var r,y,f=a.rings,d=[];for(r=0;r<f.length;r++){var e=f[r],n=[];for(y=0;y<e.length-1;y++)n.push(a.getPoint(r,y));d.push(n)}return d},_getMidpointSegments:function(a){var r,y,f=a.rings,d=[],e=a.spatialReference;for(r=0;r<f.length;r++){var n=f[r],
p=[];for(y=0;y<n.length-1;y++){var l=a.getPoint(r,y),w=a.getPoint(r,y+1);l=new A({x:(l.x+w.x)/2,y:(l.y+w.y)/2,spatialReference:e.toJson()});p.push(l)}d.push(p)}return d},_getControlPoints:function(a,r,y,f,d){var e=this.map;this._isNew(a)?a=f:(a=f-1,a=0>a?(d+a)%d:a);f=(f+1)%d;d=e.toScreen(r.getPoint(y,a));r=e.toScreen(r.getPoint(y,f));return[d,r]},_getAdjacentMidpoints:function(a,r){var y=a-1;return[0>y?(r+y)%r:y,a]},_getAdjacentVertices:function(a,r){return[a,(a+1)%r]},_deleteMidpoints:function(a){var r=
a.ptIndex,y=this._mpVertexMovers[a.segIndex],f=y.length-1,d=this._getAdjacentMidpoints(r,a.segLength).sort();var e=d[0];var n=d[d.length-1];if(0===r){var p=this._getAdjacentVertices(f-1,f);r=a.relatedGraphic.geometry.getPoint(a.segIndex,p[0]);p=a.relatedGraphic.geometry.getPoint(a.segIndex,p[1]);r=new A({x:(r.x+p.x)/2,y:(r.y+p.y)/2,spatialReference:r.spatialReference.toJson()});a=new B(r,this._symbol2,this.graphic,a.segIndex,f-1,f,this,!0);y.splice(n,1,a)[0].destroy();y.splice(e,1)[0].destroy();for(d=
0;d<y.length-1;d++)e=y[d],--e.ptIndex,--e.segLength}else{p=this._getAdjacentVertices(e,f);r=a.relatedGraphic.geometry.getPoint(a.segIndex,p[0]);p=a.relatedGraphic.geometry.getPoint(a.segIndex,p[1]);r=new A({x:(r.x+p.x)/2,y:(r.y+p.y)/2,spatialReference:r.spatialReference.toJson()});a=new B(r,this._symbol2,this.graphic,a.segIndex,e,f,this,!0);n=y.splice(e,d.length,a);for(d=0;d<n.length;d++)n[d].destroy();for(d=0;d<e;d++)--y[d].segLength;for(d=e+1;d<y.length;d++)e=y[d],--e.ptIndex,--e.segLength}},_updateRelatedGraphic:function(a,
r,y,f,d,e,n,p){a=r.geometry;n?a.insertPoint(f,d+1,z.fromJson(y.toJson())):p?(a.removePoint(f,d),0===d&&a.setPoint(f,e-1,z.fromJson(a.getPoint(f,0).toJson()))):(a.setPoint(f,d,z.fromJson(y.toJson())),0===d&&a.setPoint(f,e,z.fromJson(y.toJson())));r.setGeometry(a)}});b("extend-esri")&&(g.setObject("toolbars._GraphicVertexEditor",q,v),g.setObject("toolbars._MultipointVertexEditor",q.MultipointVertexEditor,v),g.setObject("toolbars._PolylineVertexEditor",q.PolylineVertexEditor,v),g.setObject("toolbars._PolygonVertexEditor",
q.PolygonVertexEditor,v));return q})},"esri/toolbars/_VertexMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/sniff dojo/dom-style dojox/gfx/Moveable dojox/gfx/matrix ../kernel ../PointerEvents ../sniff ../geometry/Point ../graphic ../geometry/webMercatorUtils".split(" "),function(L,g,t,H,b,h,m,v,B,A,z,c,q){L=L(null,{declaredClass:"esri.toolbars.VertexMover",constructor:function(a,r,y,f,d,e,n,p){this.point=a;this.symbol=r;this.relatedGraphic=y;this.segIndex=f;this.ptIndex=
d;this.segLength=e;this.editor=n;this.map=n.map;this._scratchGL=n.toolbar._scratchGL;this._placeholder=p||!1;this._type=y.geometry.type;this._init();this._enable()},refresh:function(a){if(a||this._needRefresh())this._disable(),this._enable()},destroy:function(){this._disable();this.graphic&&this._scratchGL.remove(this.graphic);this.point=this.symbol=this.graphic=this.relatedGraphic=this.segIndex=this.ptIndex=this.segLength=this.editor=this.map=this._scratchGL=null},_init:function(){var a=new z(this.point.toJson());
a=new c(a,this.symbol);switch(this._type){case "multipoint":a._shape=this.relatedGraphic.getDojoShape().children[this.ptIndex];break;case "polyline":case "polygon":this._scratchGL.add(a)}this.graphic=a},_enable:function(){var a=this.graphic.getDojoShape();a&&(a._hasMover=!0,this._moveable=this._getMoveable(a),(a=a.getEventSource())&&b.set(a,"cursor",this.editor.toolbar._cursors[this._placeholder?"move-gv":"move-v"]))},_disable:function(){var a=this._moveable;if(a){t.disconnect(this._startHandle);
t.disconnect(this._firstHandle);t.disconnect(this._movingHandle);t.disconnect(this._stopHandle);var r=a.shape;r&&(r=r.getEventSource())&&b.set(r,"cursor","inherit");a.destroy();this._moveable=null}},_needRefresh:function(){var a=this.graphic.getDojoShape(),r=!1;if(a)switch(this._type){case "multipoint":var y=this.relatedGraphic.getDojoShape();y&&(y=y.children[this.ptIndex],a!==y&&(this.graphic._shape=y,r=!0));break;case "polyline":case "polygon":r=!a._hasMover}return r},_getMoveable:function(a){a=
new h(a,H("mac")&&H("ff")&&!A("esri-touch")&&{leftButtonOnly:!0});this._startHandle=t.connect(a,"onMoveStart",this,this._moveStartHandler);this._firstHandle=t.connect(a,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=t.connect(a,"onMoving",this,this._movingHandler);this._stopHandle=t.connect(a,"onMoveStop",this,this._moveStopHandler);return a},_getPtIndex:function(){return this.ptIndex+(this._placeholder?1:0)},_getInfo:function(){return{graphic:this.graphic,isGhost:this._placeholder,
segmentIndex:this.segIndex,pointIndex:this._getPtIndex()}},_moveStartHandler:function(a){var r=this.map;r.snappingManager&&r.snappingManager._setUpSnapping();this.editor.toolbar._deactivateScrollWheel();this._startTx=this.graphic.getDojoShape().getTransform();a.shape.moveToFront();this.constructor.onMoveStart(this);this.editor.toolbar.onVertexMoveStart(this.relatedGraphic,this._getInfo())},_firstMoveHandler:function(a){var r=a.shape,y=this._getControlEdges(),f=this._scratchGL._div,d,e=[],n=a.host.shape._wrapOffsets[0]||
0;for(d=0;d<y.length;d++){var p=y[d];p.x1+=n;p.x2+=n;e.push([f.createLine({x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2}).setStroke(this.editor._lineStroke),p.x1,p.y1,p.x2,p.y2])}r._lines=e;a.shape.moveToFront();this.constructor.onFirstMove(this);this.editor.toolbar.onVertexFirstMove(this.relatedGraphic,this._getInfo())},_movingHandler:function(a,r,y){r=this.map;var f;A("esri-pointer")?f=r.navigationManager.pointerEvents._processTouchEvent(y,y):y&&"pointermove"===y.type&&(f=B.prototype._processTouchEvent.call({map:r},
y,y));f&&r.snappingManager&&r.snappingManager._onSnappingMouseMoveHandler(f);y=a.shape;a=y.getTransform();y=y._lines;for(f=0;f<y.length;f++)r=y[f],r[0].setShape({x1:r[1]+a.dx,y1:r[2]+a.dy,x2:r[3],y2:r[4]});this.editor.toolbar.onVertexMove(this.relatedGraphic,this._getInfo(),a)},_moveStopHandler:function(a){a=a.shape;var r=this.editor.toolbar,y=a.getTransform(),f=this.map,d=this.graphic,e=r._geo?q.geographicToWebMercator(d.geometry):d.geometry;r._activateScrollWheel();var n,p=a._lines;if(p){for(n=
0;n<p.length;n++)p[n][0].removeShape();a._lines=null}n=!1;p=!0;var l=this._getInfo();y&&(y.dx||y.dy)?this._placeholder&&(this._placeholder=!1,n=!0):p=!1;if(f.snappingManager)var w=f.snappingManager._snappingPoint;var x=[y,m.invert(this._startTx)];w=w||f.toMap(m.multiplyPoint(x,f.toScreen(e,!0)));f.snappingManager&&f.snappingManager._killOffSnapping();a.setTransform(null);d.setGeometry(r._geo?q.webMercatorToGeographic(w,!0):w);this.constructor.onMoveStop(this,y);r.onVertexMoveStop(this.relatedGraphic,
l,y);if(!p)r.onVertexClick(this.relatedGraphic,l);if(n)r.onVertexAdd(this.relatedGraphic,this._getInfo())},_getControlEdges:function(){var a=this.map,r=this.relatedGraphic.geometry,y=this.segIndex,f=this.ptIndex,d=this.segLength,e=this._scratchGL.getNavigationTransform(),n=e.dx;e=e.dy;var p=a.toScreen(this.graphic.geometry);a=p.x-n;p=p.y-e;var l=[];r=this.editor._getControlPoints(this,r,y,f,d);r[0]&&l.push({x1:a,y1:p,x2:r[0].x-n,y2:r[0].y-e});r[1]&&l.push({x1:a,y1:p,x2:r[1].x-n,y2:r[1].y-e});return l}});
A("extend-esri")&&g.setObject("toolbars.VertexMover",L,v);g.mixin(L,{onMoveStart:function(){},onFirstMove:function(){},onMoveStop:function(){}});return L})},"esri/toolbars/TextEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/has dojo/dom-construct dojo/dom-class dojo/dom-style dojo/keys ../kernel".split(" "),function(L,g,t,H,b,h,m,v,B,A){L=L(null,{declaredClass:"esri.toolbars.TextEditor",constructor:function(z,c,q){this._graphic=z;this._map=c;
this._toolbar=q;this._enable(this._graphic)},destroy:function(){this._disable()},onEditStart:function(){},onEditEnd:function(){},_enable:function(z){this._editBox?(t.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null):(this._map.navigationManager.setImmediateClick(!0),this._addEditBoxHandler=t.connect(z.getLayer(),"onDblClick",this,function(c){this._map.navigationManager.setImmediateClick(!1);c.graphic==z&&(H.stop(c),t.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null,
this._addTextBox(z))}))},_disable:function(){this._applyEdit();this._addEditBoxHandler&&(t.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null);this._removeTextBox();this.onEditEnd(this._graphic);this._toolbar.onTextEditEnd(this._graphic)},_addTextBox:function(z,c){if(!this._editBox){if(!z.symbol.text){z.symbol.text="Tempt text";z.setSymbol(z.symbol);var q=""}var a=this._createInputTextStyle(z,this._map);""!==q&&(q=c||z.symbol.text);this._editBox=h.create("input",{type:"text",value:q});
v.set(this._editBox,a);m.add(this._editBox,"esriTextEditorInput");this._map.container.appendChild(this._editBox);this._editBox.focus();this._editBoxKeyHandler=t.connect(this._editBox,"onkeyup",g.hitch(this,function(y){y.keyCode!=B.ENTER&&y.keyCode!==B.TAB||this._disable()}));this._editBoxBlurHandler=t.connect(this._editBox,"onblur",g.hitch(this,function(y){this._disable()}));z.symbol.text="";z.setSymbol(z.symbol);z.hide();var r=this._editBox;this._disableBoxHandler||(this._disableBoxHandler=this._map.on("zoom-start",
g.hitch(this,function(){this._disable()})));this._moveBoxHandler=this._map.on("pan",function(y){v.set(r,{left:this._editBoxLeft+y.delta.x+"px",top:this._editBoxTop+y.delta.y+"px"})});this._moveBoxStartHandler=this._map.on("pan-start",function(){this._editBoxLeft=parseFloat(v.get(r,"left"));this._editBoxTop=parseFloat(v.get(r,"top"))});this.onEditStart(z,this._editBox);this._toolbar.onTextEditStart(z,this._editBox)}},_removeTextBox:function(){this._editBoxBlurHandler&&(t.disconnect(this._editBoxBlurHandler),
this._editBoxBlurHandler=null);this._editBox&&(this._editBox.parentNode.removeChild(this._editBox),this._editBox=null);this._disableBoxHandler&&(this._disableBoxHandler.remove(),this._disableBoxHandler=null);this._moveBoxHandler&&(this._moveBoxHandler.remove(),this._moveBoxHandler=null);this._moveBoxStartHandler&&(this._moveBoxStartHandler.remove(),this._moveBoxStartHandler=null);this._editBoxKeyHandler&&(t.disconnect(this._editBoxKeyHandler),this._editBoxKeyHandler=null)},_createInputTextStyle:function(z,
c){c=z.getDojoShape().getTransformedBoundingBox();var q=z.getLayer();q=q.hasLocalNavigationTransform()?{dx:0,dy:0}:q.getNavigationTransform();var a=z.symbol.font;return{"font-family":a.family,"font-size":a.size+"px","font-style":a.style,"font-variant":a.variant,"font-weight":a.weight,left:c[0].x+q.dx+"px",top:c[0].y+q.dy+"px",width:Math.abs(c[0].x-c[1].x)/Math.cos(z.symbol.angle/180*Math.PI)+"px"}},_applyEdit:function(){if(this._editBox)if(this._editBox.value){this._graphic.show();var z=this._graphic.symbol;
z.text=this._editBox.value;this._graphic.setSymbol(z)}else this._graphic.getLayer().remove(this._graphic)}});b("extend-esri")&&g.setObject("toolbars.TextEditor",L,A);return L})},"widgets/GriddedReferenceGraphic/js/GridSettings":function(){define("dojo/_base/declare dojo/_base/array dojo/on dojo/dom-style ./ColorPickerEditor ./FontSetting jimu/BaseWidget jimu/dijit/TabContainer3 dijit/_WidgetsInTemplateMixin dojo/text!../templates/GridSettings.html dojo/_base/lang dojo/Evented dojo/dom-class dojo/query dojo/keys dijit/registry jimu/dijit/formSelect".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z,c,q,a,r,y){return L([m,B,c],{baseClass:"jimu-widget-GRGDrafter-Settings",templateString:A,selectedGridSettings:{},_defaultColor:"#1a299c",_defaultTextSize:12,colorPickerNodes:null,_defaultFont:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},fontSize:12,textColor:"#2f4f4f"},gridSettingsOptions:{cellShape:["default","hexagon"],cellUnits:"meters kilometers miles nautical-miles yards feet".split(" "),labelStartPosition:["lowerLeft","lowerRight","upperLeft","upperRight"],
labelType:["alphaNumeric","alphaAlpha","numeric"],labelTypeWithRefSys:["gridReferenceSystem","alphaNumeric","alphaAlpha","numeric"],labelDirection:["horizontal","vertical"],gridOrigin:["center","lowerLeft","lowerRight","upperLeft","upperRight"],referenceSystem:["MGRS","USNG","UTM"]},constructor:function(f){z.mixin(this,f)},postCreate:function(){this.colorPickerNodes=null},startup:function(){this.tab=new v({tabs:[{title:this.nls.gridSettingsLabel,content:this.gridTab},{title:this.nls.labelSettingsLabel,
content:this.labelTab}],selected:this.nls.gridTabLabel});this.tab.placeAt(this.tabsContainer);this.tab.startup();this.gridOutlineColorPicker=new b({nls:this.nls,typeOfColorPicker:"Outline"},this.cellOutlineColorPicker);H.set(this.gridOutlineColorPicker.slider.domNode,"width","");this.gridOutlineColorPicker.setValues({color:this.config.grg.cellOutline.color,transparency:this.config.grg.cellOutline.transparency});this.gridOutlineColorPicker.startup();this.gridFillColorPicker=new b({nls:this.nls,typeOfColorPicker:"Fill"},
this.cellFillColorPicker);H.set(this.gridFillColorPicker.slider.domNode,"width","");this.gridFillColorPicker.setValues({color:this.config.grg.cellFill.color,transparency:this.config.grg.cellFill.transparency});this.gridFillColorPicker.startup();var f=a(".jimu-color-pickerPopup",this.domNode);g.forEach(f,z.hitch(this,function(d){this.own(t(d,"keydown",z.hitch(this,function(e){e.keyCode!==r.ENTER&&e.keyCode!==r.SPACE||e.currentTarget.click()})))}));this.fontSetting=new h({config:this.config.grg.font||
this._defaultFont,nls:this.nls},this.fontSettingNode);this.fontSetting.startup();this._loadOptionsForDropDown(this.cellShape,this.gridSettingsOptions.cellShape);this._loadOptionsForDropDown(this.labelStartPosition,this.gridSettingsOptions.labelStartPosition);this._loadOptionsForDropDown(this.cellUnits,this.gridSettingsOptions.cellUnits);this._loadOptionsForDropDown(this.labelType,this.gridSettingsOptions.labelType);this._loadOptionsForDropDown(this.labelTypeWithRefSys,this.gridSettingsOptions.labelTypeWithRefSys);
this._loadOptionsForDropDown(this.labelDirection,this.gridSettingsOptions.labelDirection);this._loadOptionsForDropDown(this.gridOrigin,this.gridSettingsOptions.gridOrigin);this._loadOptionsForDropDown(this.referenceSystem,this.gridSettingsOptions.referenceSystem);this.config.grg&&(this.cellShape.setValue(this.config.grg.cellShape),this.cellUnits.setValue(this.config.grg.cellUnits),this.gridOrigin.setValue(this.config.grg.gridOrigin),this.labelType.setValue(this.config.grg.labelType),this.labelDirection.setValue(this.config.grg.labelDirection),
this.labelStartPosition.setValue(this.config.grg.labelOrigin),this.referenceSystem.setValue(this.config.grg.referenceSystem),"hexagon"===this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1));this.colorPickerNodes=a(".colorPickerEditor",this.domNode);this.onGridsettingsChanged()},postCreate:function(){this.inherited(arguments);q.add(this.domNode,"GRGDrafterSettingsContainer GRGDrafterFullWidth");this._handleClickEvents()},
_handleClickEvents:function(){this.own(t(this.cellShape,"change",z.hitch(this,function(){"hexagon"===this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1)})))},_loadOptionsForDropDown:function(f,d){var e=[],n;g.forEach(d,z.hitch(this,function(p){n=this.nls.gridSettings[p]&&this.nls.gridSettings[p].hasOwnProperty("label")?{value:p,label:this.nls.gridSettings[p].label}:{value:p,label:this.nls.gridSettings[p]};
e.push(n)}));f.addOption(e)},_isSettingsChanged:function(){var f=!1;this.selectedGridSettings.cellShape!==this.cellShape.get("value")?f=!0:this.selectedGridSettings.labelStartPosition!==this.labelStartPosition.get("value")?f=!0:this.selectedGridSettings.cellUnits!==this.cellUnits.get("value")?f=!0:this.selectedGridSettings.labelType!==this.labelType.get("value")?f=!0:this.selectedGridSettings.labelTypeWithRefSys!==this.labelTypeWithRefSys.get("value")?f=!0:this.selectedGridSettings.labelDirection!==
this.labelDirection.get("value")?f=!0:this.selectedGridSettings.gridOrigin!==this.gridOrigin.get("value")?f=!0:this.selectedGridSettings.referenceSystem!==this.referenceSystem.get("value")?f=!0:this.selectedGridSettings.gridOutlineColor!==this.gridOutlineColorPicker.getValues().color?f=!0:this.selectedGridSettings.gridOutlineTransparency!==this.gridOutlineColorPicker.getValues().transparency?f=!0:this.selectedGridSettings.gridFillColor!==this.gridFillColorPicker.getValues().color?f=!0:this.selectedGridSettings.gridFillTransparency!==
this.gridFillColorPicker.getValues().transparency?f=!0:this.selectedGridSettings.fontSettings!==this.fontSetting.getConfig()&&(f=!0);return f},onClose:function(){if(this._isSettingsChanged())this.onGridsettingsChanged()},validInputs:function(){var f=!0;g.some(this.colorPickerNodes,function(d){if(y.byId(d.id).validateSpinner&&!y.byId(d.id).validateSpinner())return f=!1,!0},this);return f},onGridsettingsChanged:function(){this.selectedGridSettings={cellShape:this.cellShape.get("value"),labelStartPosition:this.labelStartPosition.get("value"),
cellUnits:this.cellUnits.get("value"),labelType:this.labelType.get("value"),labelTypeWithRefSys:this.labelTypeWithRefSys.get("value"),labelDirection:this.labelDirection.get("value"),gridOrigin:this.gridOrigin.get("value"),referenceSystem:this.referenceSystem.get("value"),gridOutlineColor:this.gridOutlineColorPicker.getValues().color,gridOutlineTransparency:this.gridOutlineColorPicker.getValues().transparency,gridFillColor:this.gridFillColorPicker.getValues().color,gridFillTransparency:this.gridFillColorPicker.getValues().transparency,
fontSettings:z.clone(this.fontSetting.getConfig())};this.emit("gridSettingsChanged",this.selectedGridSettings)}})})},"widgets/GriddedReferenceGraphic/js/ColorPickerEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/dom-attr dojo/on dojo/query dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/ColorPickerEditor.html dijit/form/HorizontalSlider jimu/dijit/ColorPickerPopup dijit/form/NumberSpinner".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z,c,q){return L([v,B,A],{_defaultColor:"#485566",templateString:z,nls:null,postCreate:function(){this.colorPicker=new q({color:this._defaultColor,width:this._defaultWidth,tabindex:"0",role:"button"},this.colorPicker);this.colorPicker.startup();this.slider=new c({name:"slider",value:100,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;"},this.sliderBar);this.slider.startup();this.inherited(arguments)},
startup:function(){this._setAriaLabelForEditorNodes();this.own(b(this.slider,"change",g.hitch(this,function(a){!1===this._isSameVal()&&this.spinner.setValue(a)})));this.own(b(this.spinner,"change",g.hitch(this,function(a){!1===this._isSameVal()&&100>=a&&this.slider.setValue(a)})));this._stylePolyfill();this.inherited(arguments)},_setAriaLabelForEditorNodes:function(){var a="",r="";this.nls.gridSettings&&(a="Fill"===this.typeOfColorPicker?this.nls.gridSettings.cellFill:this.nls.gridSettings.cellOutline,
r=this.nls.gridSettings.colorPicker);H.set(this.colorPicker.domNode,"aria-label",a+" "+r);H.set(this.slider,"aria-label",a+" "+this.nls.transparency);H.set(this.spinner,"aria-label",a+" "+this.nls.transparency)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var a=null,r=null;(r=this.colorPicker.getColor())&&r.toHex&&(a=r.toHex());r=this.spinner.getValue()/100;return{color:a,transparency:r}},setValues:function(a){if("object"===typeof a||"string"===
typeof a)this.colorPicker.setColor(new t(a.color)),a.transparency="undefined"===typeof a.transparency?0:100*a.transparency,this.slider.setValue(a.transparency),this.spinner.setValue(a.transparency)},validateSpinner:function(){var a=!0;this.spinner.isValid()||(this._shake(this.spinner.domNode,16),this.spinner.focus(),a=!1);return a},_stylePolyfill:function(){var a=h(".dijitSliderLeftBumper",this.domNode)[0];a&&a.parentNode&&m.setStyle(a.parentNode,"background-color","#24b5cc")},_shake:function(a,r){function y(){if(15>
f){a.style.transform="translate(0px, 0px)";r-=d;var p=e(-r,r),l=e(-r,r);a.style.transform="translate("+p+"px, "+l+"px)";f+=1;requestAnimationFrame(y)}15<=f&&(a.style.transform="translate(0, 0)",n._shakingElements.splice(n._shakingElements.indexOf(a),1))}var f=1,d=r/15,e=function(p,l){return Math.floor(Math.random()*(l-p+1))+p};this._shakingElements||(this._shakingElements=[]);if(-1===this._shakingElements.indexOf(a)){this._shakingElements.push(a);var n=this;y()}}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z){return L([g,t],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){B.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;b.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;b.addClass(this.domNode,"disable")},isPartOfPopup:function(c){var q=this.tooltipDialog.domNode;return c===q||b.isDescendant(c,q)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},isOpen:function(){return this._isTooltipDialogOpened},_showTooltipDialog:function(){B.open({parent:this.getParent(),
popup:this.tooltipDialog,around:this.around?this.around:this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){B.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var c=b.create("div");this.tooltipDialog=new v({content:c});b.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var q=new A({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,
closeDialogWhenChange:!0},recordUID:this.recordUID,onChange:H.hitch(this,function(a){a&&(a=new m(a),this.setColor(a),this.onChange(a))})});q.placeAt(c);q.startup();this.own(h(q,"close",H.hitch(this,function(){this._hideTooltipDialog()})));this.own(h(q,"change-style",H.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(h(this.domNode,"click",H.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==
this._ENABLE&&this._showTooltipDialog()})));this.own(h(document,"click",H.hitch(this,function(a){this.isPartOfPopup(a.srcElement||a.target)||this._hideTooltipDialog()})));this.picker=q},setColor:function(c){if(c instanceof m){null===this.color&&!0===this.showLabel&&this._changeLabel(c);var q=c.toHex();this.color=c;b.setStyle(this.domNode,"backgroundColor",q);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(q,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},
_changeLabel:function(c){b.empty(this.domNode);b.create("span",{innerHTML:c.toHex(),className:"color-label",style:{color:z.invertColor(c.toHex())}},this.domNode)},onChange:function(c){c&&this.showLabel&&this._changeLabel(c)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(c){this.domNode.title=c},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"widgets/GriddedReferenceGraphic/js/FontSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dojo/_base/array dojo/dom-attr dojo/Evented dojo/query dojo/keys dojo/aspect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/FontSetting.html jimu/dijit/ColorPickerPopup dijit/form/HorizontalSlider ./TransparencyEditor dojo/store/Memory jimu/dijit/formSelect jimu/dijit/CheckBox jimu/dijit/ImageChooser dijit/form/ComboBox".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z,c,q,a,r,y,f,d){return L([z,c,q,m],{templateString:a,nls:null,_FONTS:null,_MIN_TEXT_SIZE:12,_MAX_TEXT_SIZE:48,_INTERVAL_TEXT_SIZE:2,_DEFAULT_CONFIG:null,postCreate:function(){this.inherited(arguments);this._FONTS="Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";");this._DEFAULT_CONFIG={font:{fontFamily:this._FONTS[0],bold:!1,italic:!1,underline:!1},fontSize:"24",textColor:"#282828",haloSize:1,haloColor:"#FFFFFF",haloOn:!0,labelTransparency:1};
this.config=g.mixin(g.clone(this._DEFAULT_CONFIG),this.config);b.forEach(this._FONTS,g.hitch(this,function(x){this.fontSelect.addOption({value:x,label:x})}));for(var e=new d({}),n=this._MIN_TEXT_SIZE,p=this._MAX_TEXT_SIZE;n<=p;n+=this._INTERVAL_TEXT_SIZE)e.put({id:n,name:n});this.textSizeSelect.store=e;h.set(this.textSizeSelect.domNode,"aria-label",this.nls.textSize);h.set(this.textSizeSelect.domNode,"role","combobox");h.set(this.textSizeSelect.domNode,"aria-expanded","false");A.after(this.textSizeSelect,
"loadAndOpenDropDown",g.hitch(this,function(){h.set(this.textSizeSelect.domNode,"aria-expanded","true")}));A.after(this.textSizeSelect,"closeDropDown",g.hitch(this,function(){h.set(this.textSizeSelect.domNode,"aria-expanded","false")}));this.textSizeSelect.validator=g.hitch(this,function(){var x=this.textSizeSelect.getValue();return null!==x&&""!==x?!isNaN(x):!1});this.textSizeSlider=new y({name:"slider",value:0,minimum:this._MIN_TEXT_SIZE,maximum:this._MAX_TEXT_SIZE,discreteValues:this.textSizeSelect.store.data.length+
1,intermediateChanges:!0,showButtons:!1,style:"display: inline-block;","aria-label":this.nls.textSize},this.sliderBar);this.textSizeSlider.startup();e="";this.nls.gridSettings&&(e=this.nls.gridSettings.colorPicker);this.textColorPicker=new r({role:"button",tabindex:"0","aria-label":this.nls.textColor+" "+e,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showCoustomRecord:!0},recordUID:this.recordUID});this.textColorPicker.placeAt(this.textColorBtn);this.textColorPicker.startup();
this.labelTransparency=new f({ariaLabel:this.nls.transparency},this.transparencySlider);this.labelTransparency.startup();var l=[];n=1;for(p=10;n<=p;n+=1){var w={value:n.toString(),label:n.toString()};l.push(w)}this.haloSizeSelect.addOption(l);this.haloSizeSelect.validator=g.hitch(this,function(){var x=this.haloSizeSelect.get("value");return null!==x&&""!==x?!isNaN(x):!1});this.haloColorPicker=new r({role:"button",tabindex:"0","aria-label":this.nls.halo+" "+e,appearance:{showTransparent:!1,showColorPalette:!0,
showCoustom:!0,showCoustomRecord:!0}});this.haloColorPicker.placeAt(this.haloColorBtn);this.haloColorPicker.startup();this.own(t(this.fontSelect,"change",g.hitch(this,function(x){if(this.config.font.fontFamily!==x)this.onSettingChange({font:{fontFamily:x,bold:this.config.font.bold,italic:this.config.font.italic,underline:this.config.font.underline}})})));this._initAppearance();this.own(t(this.bold,"click",g.hitch(this,function(){this._clickHandlerOfBoldItalicUnderline(this.bold,"bold")})));this.own(t(this.italic,
"click",g.hitch(this,function(){this._clickHandlerOfBoldItalicUnderline(this.italic,"italic")})));this.own(t(this.underline,"click",g.hitch(this,function(){this._clickHandlerOfBoldItalicUnderline(this.underline,"underline")})));this.own(t(this.bold,"keydown",g.hitch(this,function(x){x.keyCode!==B.ENTER&&x.keyCode!==B.SPACE||this._clickHandlerOfBoldItalicUnderline(this.bold,"bold")})));this.own(t(this.italic,"keydown",g.hitch(this,function(x){x.keyCode!==B.ENTER&&x.keyCode!==B.SPACE||this._clickHandlerOfBoldItalicUnderline(this.italic,
"italic")})));this.own(t(this.underline,"keydown",g.hitch(this,function(x){x.keyCode!==B.ENTER&&x.keyCode!==B.SPACE||this._clickHandlerOfBoldItalicUnderline(this.underline,"underline")})));this.own(t(this.textSizeSelect,"change",g.hitch(this,function(x){this.config.fontSize!==x&&!1!==this.textSizeSelect.isValid()&&(this.setTextSize(x),this.onSettingChange({fontSize:x}))})));this.own(t(this.textSizeSlider,"change",g.hitch(this,function(x){this.config.fontSize!==x&&(this.setTextSize(Math.round(x)),
this.onSettingChange({fontSize:x}))})));this.own(t(this.textColorPicker,"change",g.hitch(this,function(x){if(this.config.textColor!==x)this.onSettingChange({textColor:x.toHex()})})));this.own(this.labelTransparency.watch("transparency",g.hitch(this,function(){this.onSettingChange({labelTransparency:this.labelTransparency.getValues().transparency})})));this.own(t(this.haloSizeSelect,"change",g.hitch(this,function(x){if(this.config.haloSize!==x&&!1!==this.haloSizeSelect.isValid())this.onSettingChange({haloSize:x})})));
this.own(t(this.haloColorPicker,"change",g.hitch(this,function(x){if(this.config.haloColor!==x)this.onSettingChange({haloColor:x.toHex()})})));this.own(t(this.showHalo,"change",g.hitch(this,function(){this.onSettingChange({haloOn:this.showHalo.checked})})));n=v(".jimu-color-pickerPopup",this.domNode);b.forEach(n,g.hitch(this,function(x){this.own(t(x,"keydown",g.hitch(this,function(F){F.keyCode!==B.ENTER&&F.keyCode!==B.SPACE||F.currentTarget.click()})))}))},startup:function(){this.inherited(arguments);
this.setConfig(this.config);this.refresh()},onSettingChange:function(e){this.config=g.mixin(this.config,e);this.onChange(this.config)},onChange:function(e){this.emit("change",e)},refresh:function(){this.onSettingChange({})},isValid:function(){return!1===this.textSizeSelect.isValid()?!1:!0},getConfig:function(){return this.isValid()?this.config:!1},setConfig:function(e){if("undefined"!==e){"undefined"!==typeof e.font&&(this.config.font=e.font,this.config.font.fontFamily&&this.fontSelect.set("value",
this.config.font.fontFamily),this.fontBtnClickd(this.config.font));"undefined"!==typeof e.fontSize&&(this.config.fontSize=e.fontSize,this.setTextSize(this.config.fontSize));if("undefined"===typeof e.textColor||""===e.textColor)e.textColor=this._DEFAULT_CONFIG.textColor;this.config.textColor=e.textColor;if("undefined"===typeof e.labelTransparency||""===e.labelTransparency)e.labelTransparency=this._DEFAULT_CONFIG.labelTransparency;this.config.labelTransparency=e.labelTransparency;this.labelTransparency.setValues({transparency:this.config.labelTransparency});
if("undefined"===typeof e.haloSize||""===e.haloSize)e.haloSize=this._DEFAULT_CONFIG.haloSize;this.config.haloSize=e.haloSize;this.haloSizeSelect.set("value",e.haloSize);if("undefined"===typeof e.haloColor||""===e.haloColor)e.haloColor=this._DEFAULT_CONFIG.haloColor;this.config.haloColor=e.haloColor;H.setStyle(this.textColorPicker.domNode,"backgroundColor",this.config.textColor);this.textColorPicker.picker.refreshRecords();this.textColorPicker.picker.setColor(this.config.textColor,!1,!0);H.setStyle(this.haloColorPicker.domNode,
"backgroundColor",this.config.haloColor);this.haloColorPicker.picker.refreshRecords();this.haloColorPicker.picker.setColor(this.config.haloColor,!1,!0);if("undefined"===typeof e.haloOn||""===e.haloOn)e.haloOn=this._DEFAULT_CONFIG.haloOn;this.showHalo.set("checked",this.config.haloOn)}},_clickHandlerOfBoldItalicUnderline:function(e,n){var p=!H.hasClass(e,"selected");e={fontFamily:this.config.font.fontFamily,bold:this.config.font.bold,italic:this.config.font.italic,underline:this.config.font.underline};
"bold"===n?e.bold=p:"italic"===n?e.italic=p:e.underline=p;var l={};l[n]=p;this.fontBtnClickd(l);this.onSettingChange({font:e})},setTextSize:function(e){e!==this.textSizeSelect.getValue()&&this.textSizeSelect.set("value",e);e!==this.textSizeSlider.getValue()&&(e>this._MAX_TEXT_SIZE?e=this._MAX_TEXT_SIZE:e<this._MIN_TEXT_SIZE&&(e=this._MIN_TEXT_SIZE),this.textSizeSlider.set("value",e))},fontBtnClickd:function(e){!0===e.bold?(H.addClass(this.bold,"selected"),h.set(this.bold,"aria-pressed","true")):!1===
e.bold&&(H.removeClass(this.bold,"selected"),h.set(this.bold,"aria-pressed","false"));!0===e.italic?(H.addClass(this.italic,"selected"),h.set(this.italic,"aria-pressed","true")):!1===e.italic&&(H.removeClass(this.italic,"selected"),h.set(this.italic,"aria-pressed","false"));!0===e.underline?(H.addClass(this.underline,"selected"),h.set(this.underline,"aria-pressed","true")):!1===e.underline&&(H.removeClass(this.underline,"selected"),h.set(this.underline,"aria-pressed","false"))},_initAppearance:function(){this.appearance&&
(!1===this.appearance.bold&&H.addClass(this.bold,"hide"),!1===this.appearance.italic&&H.addClass(this.italic,"hide"),!1===this.appearance.underline&&H.addClass(this.underline,"hide"))}})})},"widgets/GriddedReferenceGraphic/js/TransparencyEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/query dojo/dom-attr dojo/Stateful dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/TransparencyEditor.html dijit/form/HorizontalSlider dijit/form/NumberSpinner".split(" "),
function(L,g,t,H,b,h,m,v,B,A,z,c){return L([h,v,B,A],{templateString:z,transparency:1,postCreate:function(){this.slider=new c({name:"slider",value:0,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;",tabindex:"0","aria-label":this.ariaLabel},this.sliderBar);this.slider.startup();this.inherited(arguments);b.set(this.spinner,"aria-label",this.ariaLabel)},startup:function(){this.own(t(this.slider,"change",g.hitch(this,function(q){!1===
this._isSameVal()&&(this.spinner.setValue(q),this._set("transparency",q/100))})));this.own(t(this.spinner,"change",g.hitch(this,function(q){!1===this._isSameVal()&&100>=q&&(this.slider.setValue(q),this._set("transparency",q/100))})));this._stylePolyfill();this.inherited(arguments)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var q=null;q=this.spinner.getValue()/100;return{transparency:q}},setValues:function(q){if("object"===typeof q||"string"===
typeof q)q.transparency="undefined"===typeof q.transparency?0:100*q.transparency,this.slider.setValue(q.transparency),this.spinner.setValue(q.transparency)},_stylePolyfill:function(){var q=H(".dijitSliderLeftBumper",this.domNode)[0];q&&q.parentNode&&m.setStyle(q.parentNode,"background-color","#24b5cc")},validateSpinner:function(){var q=!0;this.spinner.isValid()||(this._shake(this.spinner.domNode,16),this.spinner.focus(),q=!1);return q},_shake:function(q,a){function r(){if(15>y){q.style.transform=
"translate(0px, 0px)";a-=f;var n=d(-a,a),p=d(-a,a);q.style.transform="translate("+n+"px, "+p+"px)";y+=1;requestAnimationFrame(r)}15<=y&&(q.style.transform="translate(0, 0)",e._shakingElements.splice(e._shakingElements.indexOf(q),1))}var y=1,f=a/15,d=function(n,p){return Math.floor(Math.random()*(p-n+1))+n};this._shakingElements||(this._shakingElements=[]);if(-1===this._shakingElements.indexOf(q)){this._shakingElements.push(q);var e=this;r()}}})})},"widgets/GriddedReferenceGraphic/js/drawGRG":function(){define("esri/geometry/Point esri/geometry/Polygon esri/geometry/geometryEngine esri/graphic esri/geometry/webMercatorUtils esri/SpatialReference esri/geometry/Circle esri/request dojo/json ./geometryUtils".split(" "),
function(L,g,t,H,b,h,m,v,B,A){var z={createGRG:function(c,q,a,r,y,f,d,e,n,p,l,w,x,F){var I=[],J=0,P=0,Q=r/2/Math.cos(30*Math.PI/180),T,Y=c;switch(d){case "upperLeft":if("horizontal"===n){var Z=q-1;var W=-1;if("numeric"!==e)var U=0;else U=(q-1)*c,"hexagon"===p&&(U+=Math.floor(q/2))}else Z=-1,W=q-1,"numeric"!==e&&(U=q);break;case "upperRight":"horizontal"===n?(Z=q-1,W=c,"numeric"!==e?U=c+1:(U=q*c+1,"hexagon"===p&&(U+=Math.floor(q/2)))):(U="numeric"!==e?q:q*(c+1),Z=c,W=q-1);break;case "lowerRight":"horizontal"===
n?(Z=0,W=c,U=c+1):(Z=c,W=0,U=1);break;case "lowerLeft":"horizontal"===n?(U=Z=0,W=-1):(Z=-1,U=1,W=0)}var ia=c*r/2;var pa="hexagon"===p?1===q%2?((q-1)/2*3*Q+Q)/2:(q/2*3*Q-Q/2)/2:q*y/2;var aa=null;aa=null;for(var ea=1;ea<=q;ea++){for(var k=1;k<=c;k++){if(w){aa=new g;if(1===ea&&1===k)switch(102100===a.spatialReference.wkid&&(a=b.webMercatorToGeographic(a)),l){case "center":var E=A.getDestinationPoint(a,180+f,pa);E=A.getDestinationPoint(E,270+f,ia);break;case "upperLeft":E=A.getDestinationPoint(a,180+
f,2*pa);break;case "upperRight":E=A.getDestinationPoint(a,180+f,2*pa);E=A.getDestinationPoint(E,270+f,2*ia);break;case "lowerRight":E=A.getDestinationPoint(a,270+f,2*ia);break;case "lowerLeft":E=a}if("default"===p){var G=A.getDestinationPoint(E,0+f,y);var C=A.getDestinationPoint(G,90+f,r);var X=A.getDestinationPoint(C,180+f,y);aa.addRing([[E.x,E.y],[G.x,G.y],[C.x,C.y],[X.x,X.y]]);E=X}else{X=E;var ca=A.getDestinationPoint(X,0+f,Q);var V=A.getDestinationPoint(ca,60+f,Q);C=A.getDestinationPoint(V,120+
f,Q);var fa=A.getDestinationPoint(C,180+f,Q);var da=A.getDestinationPoint(fa,240+f,Q);aa.addRing([[X.x,X.y],[ca.x,ca.y],[V.x,V.y],[C.x,C.y],[fa.x,fa.y],[da.x,da.y]]);E=A.getDestinationPoint(E,90+f,r)}aa=t.simplify(aa);x.spatialReference.wkid&&4326!==x.spatialReference.wkid&&(aa=F.isLoaded()?F.project(aa,x.spatialReference):b.geographicToWebMercator(aa));aa=new H(aa);1===k&&(T="hexagon"===p?Y===c?A.getDestinationPoint(ca,300+f,Q):V:G)}else{aa=new g(new h({wkid:102100}));4326===a.spatialReference.wkid&&
(a=b.geographicToWebMercator(a));switch(l){case "center":J=a.x-ia;P=a.y-pa;break;case "upperLeft":J=a.x;P=a.y-2*pa;break;case "upperRight":J=a.x-2*ia;P=a.y-2*pa;break;case "lowerRight":J=a.x-2*ia;P=a.y;break;case "lowerLeft":J=a.x,P=a.y}"default"===p?aa.addRing([[J+(k-1)*r,P+(ea-1)*y],[J+(k-1)*r,P+ea*y],[J+k*r,P+ea*y],[J+k*r,P+(ea-1)*y],[J+(k-1)*r,P+(ea-1)*y]]):(J=Y===c?J+(k-1)*r+r/2:J+(k-1)*r,P=P+Q+1.5*(ea-1)*Q,X=new L([J,P],new h({wkid:102100})),C=new m(X,{radius:Q,numberOfPoints:6}),X=t.rotate(C,
90,X),aa.addRing(X.rings[0]));aa=t.rotate(aa,-1*f,a);x.spatialReference.wkid&&102100!==x.spatialReference.wkid&&(aa=F.isLoaded()?F.project(aa,x.spatialReference):b.webMercatorToGeographic(aa));aa=new H(aa)}switch(d){case "upperLeft":"horizontal"===n?(W+=1,U+=1):(Z+=1,"numeric"===e&&(U=q*k-(ea-1)));break;case "lowerLeft":"horizontal"===n?(W+=1,U+=1):(Z+=1,"numeric"===e&&(U=q*(k-1)+ea));break;case "upperRight":"horizontal"===n?(--U,--W):(--Z,"numeric"===e&&(U-=c));break;case "lowerRight":"horizontal"===
n?(--U,--W):(--Z,"numeric"===e&&(U=q*(c-k)+ea))}I.push(z.addGraphicLabel(aa,e,U,Z,W))}E=T;"hexagon"===p&&(Y===c?c++:c--);switch(d){case "upperLeft":"horizontal"===n?(--Z,U="numeric"!==e?0:"hexagon"===p?U-2*Y-1:U-2*c,W=-1):(Z=-1,W=q-(ea+1),"numeric"!==e&&(U=q-ea));break;case "upperRight":"horizontal"===n?(--Z,"numeric"!==e&&(U=c+1),W=c):(U="numeric"!==e?U-1:q*(c+1)-ea,Z=c,--W);break;case "lowerRight":"horizontal"===n?(Z+=1,U="numeric"!==e?c+1:"hexagon"===p?U+2*Y+1:U+2*c,W=c):(Z=c,W+=1,U="numeric"!==
e?U+1:c*ea);break;case "lowerLeft":"horizontal"===n?(Z+=1,"numeric"!==e&&(U=0),W=-1):(Z=-1,"numeric"!==e&&(U+=1),W=ea)}}return I},convertNumberToLetters:function(c){for(var q="";0<=c;)q=String.fromCharCode(c%26+65)+q,c=Math.floor(c/26)-1;return q},checkGridSize:function(c,q){return 2E3>c*q},getFeatureServiceParams:function(c,q){return{name:c,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"GRG",description:"",
copyrightText:"",spatialReference:{wkid:102100},initialExtent:{xmin:q.extent.xmin,ymin:q.extent.ymin,xmax:q.extent.xmax,ymax:q.extent.ymax,spatialReference:{wkid:102100}},allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",xssInputRule:"rejectInvalid"}}},getLayerParams:function(c,q,a,r){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:c,type:"Feature Layer",displayField:"",description:"A GRG (Gridded Reference Graphic) is a grid overlay used for a commonreference point in many situations - from cordon and search operations to securityfor presidential inaugurations.",
tags:"GRG",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,allowOthersToDelete:!1,allowOthersToUpdate:!1},relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,
supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},useStandardizedQueries:!1,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,extent:{xmin:q.extent.xmin,ymin:q.extent.ymin,xmax:q.extent.xmax,ymax:q.extent.ymax,spatialReference:{wkid:102100}},drawingInfo:{renderer:{type:"simple",symbol:r},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},
format:null,fieldInfos:null,useCodedValues:!1,maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:a}]},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!1,editable:!1,domain:null,defaultValue:null},{name:"grid",type:"esriFieldTypeString",
alias:"grid",actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256}],indexes:[],types:[],templates:[{name:"New Feature",description:"",drawingTool:"esriFeatureEditToolPolygon",prototype:{attributes:{grid:""}}}],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(c,
q,a){return v({url:c,content:{name:a,type:"Feature Service",token:q,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},createFeatureService:function(c,q,a){return v({url:c,content:{f:"json",token:q,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:B.stringify(a),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},addDefinitionToService:function(c,q,a){return v({url:c,content:{token:q,addToDefinition:B.stringify(a),
f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},labelReferenceGrid:function(c,q,a,r){for(var y=-1,f=1,d,e=!0,n=null,p=[],l;0<c.length;)if(e){y++;"alphaNumeric"===q?f=1:"alphaAlpha"===q&&(d=0);var w=t.union(c);l=w.getExtent();switch(a){case "lowerLeft":var x=t.nearestCoordinate(w,new L(l.xmin,l.ymin,l.spatialReference));break;case "lowerRight":x=t.nearestCoordinate(w,new L(l.xmax,l.ymin,l.spatialReference));break;case "upperLeft":x=t.nearestCoordinate(w,new L(l.xmin,l.ymax,l.spatialReference));
break;case "upperRight":x=t.nearestCoordinate(w,new L(l.xmax,l.ymax,l.spatialReference))}for(l=0;l<c.length;l++)if(t.touches(c[l],x.coordinate)){n=c[l];p.push(z.addGraphicLabel(new H(c[l]),q,f,y,d));f++;d++;e=c.indexOf(c[l]);c.splice(e,1);e=!1;break}}else{e=!0;l=n.getExtent();switch(a){case "lowerLeft":var F=t.nearestCoordinate(n,new L(l.xmax,l.ymin,l.spatialReference));break;case "lowerRight":F=t.nearestCoordinate(n,new L(l.xmin,l.ymin,l.spatialReference));break;case "upperLeft":F=t.nearestCoordinate(n,
new L(l.xmax,l.ymax,l.spatialReference));break;case "upperRight":F=t.nearestCoordinate(n,new L(l.xmin,l.ymax,l.spatialReference))}for(w=0;w<c.length;w++){l=c[w].getExtent();switch(a){case "lowerLeft":var I=t.nearestCoordinate(c[w],new L(l.xmin,l.ymin,l.spatialReference));break;case "lowerRight":I=t.nearestCoordinate(c[w],new L(l.xmax,l.ymin,l.spatialReference));break;case "upperLeft":I=t.nearestCoordinate(c[w],new L(l.xmin,l.ymax,l.spatialReference));break;case "upperRight":I=t.nearestCoordinate(c[w],
new L(l.xmax,l.ymax,l.spatialReference))}l=t.buffer(I.coordinate,"UTM"===r?1E4:r/5,9001);if(t.contains(l,F.coordinate)){n=c[w];p.push(z.addGraphicLabel(new H(c[w]),q,f,y,d));f++;d++;e=c.indexOf(c[w]);c.splice(e,1);e=!1;break}}}return p},addGraphicLabel:function(c,q,a,r,y){r=z.convertNumberToLetters(r);y=z.convertNumberToLetters(y);var f={};switch(q){case "alphaNumeric":f.grid=r.toString()+a.toString();break;case "alphaAlpha":f.grid=r.toString()+"-"+y.toString();break;case "numeric":f.grid=a.toString()}c.setAttributes(f);
return c},checkPolarRegion:function(c){var q=new g({rings:[[[-180,84],[-180,90],[180,90],[180,84],[-180,84]],[[-180,-90],[-180,-80],[180,-80],[180,-90],[-180,-90]]],spatialReference:{wkid:4326}});return t.intersects(c,q)}};return z})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(L,g,t,H,b,h,m,v,B,A){L=L(h,{declaredClass:"esri.geometry.Circle",
_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(z,c){z.center?c=z:(c=c||{},c.center=z);this.center=g.isArray(c.center)?new b(c.center[0],c.center[1]):c.center;this.radius=c.radius||1E3;this.radiusUnit=c.radiusUnit||A.METERS;this.geodesic=!0===c.geodesic?!0:!1;this.numberOfPoints=c.numberOfPoints||60;this._init()},
toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var z=this.radius*this._unitToMeters[this.radiusUnit],c=this._srType(this.center.spatialReference);if(this.geodesic){switch(c){case "webMercator":var q=v.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":q=this.center}z=this._createGeodesicCircle(q,
z,this.numberOfPoints,q.spatialReference);"webMercator"===c&&(z=v.geographicToWebMercator(z))}else{var a;"webMercator"===c||"projected"===c?a=z/this._convert2Meters(1,this.center.spatialReference):"geographic"===c&&(a=z/this._unitToMeters.esriDecimalDegrees);z=this._createPlanarCircle(this.center,a,this.numberOfPoints)}this.spatialReference=z.spatialReference;this.addRing(z.rings[0]);this.verifySR()},_createGeodesicCircle:function(z,c,q,a){for(var r=0,y=Math.PI/180,f=[],d;r<2*Math.PI;)d=m._directGeodeticSolver(z.y*
y,z.x*y,r,c,a),f.push([d.x,d.y]),r+=Math.PI/(q/2);f.push(f[0]);return new h(f)},_createPlanarCircle:function(z,c,q){for(var a=0,r=[],y,f;a<2*Math.PI;)y=z.x+Math.cos(a)*c,f=z.y+Math.sin(a)*c,r.push([y,f]),a+=Math.PI/(q/2);r.push(r[0]);z=new h(z.spatialReference);z.addRing(r);return z},_srType:function(z){return z.isWebMercator()?"webMercator":null!=B[z.wkid]||z.wkt&&0===z.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(z,c){if(null!=B[c.wkid])c=B.values[B[c.wkid]];else{c=c.wkt;
var q=c.lastIndexOf(",")+1,a=c.lastIndexOf("]]");c=parseFloat(c.substring(q,a))}return z*c}});t("extend-esri")&&g.setObject("geometry.Circle",L,H);return L})},"widgets/GriddedReferenceGraphic/js/geometryUtils":function(){define("esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/webMercatorUtils dojo/Deferred dojo/_base/array dojo/_base/lang esri/geometry/geometryEngine esri/SpatialReference esri/geometry/scaleUtils".split(" "),function(L,g,t,H,b,h,m,v,B,A){var z={getProjectedGeometry:function(c,
q,a){var r=new b;if(H.canProject(c,q)){var y=H.project(c,q);r.resolve(y)}else a.project([c],q,function(f){y=f[0];r.resolve(y)});return r.promise},getDestinationPoint:function(c,q,a){var r=c.x*Math.PI/180,y=q*Math.PI/180;q=Math.sin(y);y=Math.cos(y);var f=.9966471893352243*Math.tan(c.y*Math.PI/180);c=1/Math.sqrt(1+f*f);var d=f*c,e=Math.atan2(f,y);f=c*q;var n=1-f*f,p=2.7233160610984375E11*n/4.040829998465916E13,l=1+p/16384*(4096+p*(-768+p*(320-175*p))),w=p/1024*(256+p*(-128+p*(74-47*p))),x=a/(6356752.314245*
l),F=0;do{p=Math.cos(2*e+x);var I=Math.sin(x);var J=Math.cos(x);var P=w*I*(p+w/4*(J*(-1+2*p*p)-w/6*p*(-3+4*I*I)*(-3+4*p*p)));var Q=x;x=a/(6356752.314245*l)+P}while(1E-12<Math.abs(x-Q)&&200>++F);if(200<=F)return null;a=d*I-c*J*y;a=Math.atan2(d*J+c*I*y,.9966471893352243*Math.sqrt(f*f+a*a));n=2.0955066654848088E-4*n*(4+.003352810664775694*(4-3*n));r=(r+(Math.atan2(I*q,c*J-d*I*y)-.003352810664775694*(1-n)*f*(x+n*I*(p+n*J*(-1+2*p*p))))+3*Math.PI)%(2*Math.PI)-Math.PI;a=180*a/Math.PI;r=180*r/Math.PI;return new L(r,
a,new B(4326))},getInverseCalculations:function(c,q){var a=q.x*Math.PI/180-c.x*Math.PI/180,r=.9966471893352243*Math.tan(c.y*Math.PI/180);c=1/Math.sqrt(1+r*r);r*=c;var y=.9966471893352243*Math.tan(q.y*Math.PI/180);q=1/Math.sqrt(1+y*y);y*=q;var f=a,d=0;do{var e=Math.sin(f);var n=Math.cos(f);var p=q*e*q*e+(c*y-r*q*n)*(c*y-r*q*n);p=Math.sqrt(p);if(0==p)return 0;var l=r*y+c*q*n;var w=Math.atan2(p,l);var x=c*q*e/p;var F=1-x*x;var I=l-2*r*y/F;isNaN(I)&&(I=0);var J=2.0955066654848088E-4*F*(4+.003352810664775694*
(4-3*F));var P=f;f=a+.003352810664775694*(1-J)*x*(w+J*p*(I+J*l*(-1+2*I*I)))}while(1E-12<Math.abs(f-P)&&200>++d);if(200<=d)return null;f=2.7233160610984375E11*F/4.040829998465916E13;d=f/1024*(256+f*(-128+f*(74-47*f)));a=Math.atan2(q*e,c*y-r*q*n);c=Math.atan2(c*e,-r*q+c*y*n);a=(a+2*Math.PI)%(2*Math.PI);c=(c+2*Math.PI)%(2*Math.PI);r=Number((6356752.314245*(1+f/16384*(4096+f*(-768+f*(320-175*f))))*(w-d*p*(I+d/4*(l*(-1+2*I*I)-d/6*I*(-3+4*p*p)*(-3+4*I*I))))).toFixed(3));a=180*a/Math.PI;c=180*c/Math.PI;
return{distance:r,initialBearing:a,finalBearing:c}},getLineBetweenPoints:function(c){var q,a=[];h.forEach(c,m.hitch(this,function(r){a.push([r.x,r.y])}));0<a.length&&(q=new g({paths:[a],spatialReference:{wkid:4326}}));return q},getAngleBetweenPoints:function(c,q){c=z.getInverseCalculations(c,q);return null===c?0:c.initialBearing},getDistanceBetweenPoints:function(c,q){c=z.getInverseCalculations(c,q);return null===c?0:c.distance},getLengthOfGeometry:function(c){return(c=v.simplify(c))?v.geodesicLength(c,
9001):0},getAreaOfGeometry:function(c){c=v.simplify(c);var q={};c?(q.acres=v.geodesicArea(c,109402),q.squareMeters=v.geodesicArea(c,109404),q.squareFeet=v.geodesicArea(c,109405),q.squareUsFeet=v.geodesicArea(c,109406)):(q.acres=0,q.squareMeters=0,q.squareFeet=0,q.squareUsFeet=0);return q},getPolyLineFromPaths:function(c){var q;var a=new g(new B({wkid:4326}));for(q=0;q<c.length;q++)a.addPath(c[q]);return a},getPolygonFromPolyLines:function(c,q,a,r){var y,f;var d=[];r=r?new t(new B(r)):new t(new B({wkid:4326}));
for(y=0;y<c.length;y++)for(f=0;f<c[y].length;f++)d.push(c[y][f]);q?d.push(m.clone(d[0])):a&&(d[d.length-1][0]=d[0][0],d[d.length-1][1]=d[0][1]);r.isClockwise(d)||d.reverse();r.addRing(d);return r},getPointsForArc:function(c,q,a,r){var y=[];var f=q-c;q=parseInt(f,10);0>=q&&(q=1);var d=Math.abs(f)/Math.abs(q);if(0<d)for(f=0;f<Math.abs(q)+1;f++){var e=c+d*f;(e=z.getDestinationPoint(a,e,Math.abs(r)))&&y.push(e)}return y},getArcParam:function(c){var q={};0>c.distance?0>c.radius?(q.bearing=c.initBearing+
90,q.centerPoint=z.getDestinationPoint(c.chordMidPoint,q.bearing,c.centerAndChordDistance),q.startAngle=z.getAngleBetweenPoints(q.centerPoint,c.chordEndPoint),q.endAngle=z.getAngleBetweenPoints(q.centerPoint,c.chordStartPoint)):(q.bearing=c.initBearing-90,q.centerPoint=z.getDestinationPoint(c.chordMidPoint,q.bearing,c.centerAndChordDistance),q.startAngle=z.getAngleBetweenPoints(q.centerPoint,c.chordStartPoint),q.endAngle=z.getAngleBetweenPoints(q.centerPoint,c.chordEndPoint)):0<c.radius?(q.bearing=
c.initBearing+90,q.centerPoint=z.getDestinationPoint(c.chordMidPoint,q.bearing,c.centerAndChordDistance),q.startAngle=z.getAngleBetweenPoints(q.centerPoint,c.chordStartPoint),q.endAngle=z.getAngleBetweenPoints(q.centerPoint,c.chordEndPoint)):(q.bearing=c.initBearing-90,q.centerPoint=z.getDestinationPoint(c.chordMidPoint,q.bearing,c.centerAndChordDistance),q.startAngle=z.getAngleBetweenPoints(q.centerPoint,c.chordEndPoint),q.endAngle=z.getAngleBetweenPoints(q.centerPoint,c.chordStartPoint));return q},
removeNegativeExponents:function(c){return 1<c.toString().toLowerCase().split("e-").length?0:c},getChordLengthFromArcLength:function(c,q){c=Math.abs(c);var a=Math.PI*Math.abs(q);q=Math.abs(q)*Math.sin(Math.abs(c)/Math.abs(q)/2);return c<=a?2*q:-2*q},getArcLengthFromChordLength:function(c,q){var a=Math.abs(c);q=Math.abs(q);a=2*Math.asin(a/(2*q))*q;0>c&&(a=2*Math.PI*q-a);return a},chordBearingToTangentBearing:function(c,q,a){var r=180/Math.PI*Math.acos(Math.abs(a)/2/Math.abs(q));q/=Math.abs(q);c=c+
90*q-a/Math.abs(a)*q*r;return z.removeNegativeExponents(0>c?c+360:360<=c?c%360:c)},tangentBearingToChordBearing:function(c,q,a){var r=180/Math.PI*Math.acos(Math.abs(a)/2/Math.abs(q));q/=Math.abs(q);c=c+90*q-a/Math.abs(a)*q*r;return z.removeNegativeExponents(0>c?c+360:360<=c?c%360:c)},getUnitValueForSR:function(c){switch(A.getUnitValueForSR(c)){case 1:return"meters";case 111194.87428468118:return"meters";case .3048:return"feet";case .3048006096:case .3048006096012192:return"uSSurveyFeet"}},getRotationAngleBetweenPoints:function(c,
q){c=H.project(c,new B(102100));q=H.project(q,new B(102100));var a=q.x-c.x;c=q.y-c.y;q=180*Math.atan2(Math.abs(a),Math.abs(c))/Math.PI;var r=180*Math.atan2(Math.abs(c),Math.abs(a))/Math.PI;a=z.removeNegativeExponents(a);c=z.removeNegativeExponents(c);q=z.removeNegativeExponents(q);r=z.removeNegativeExponents(r);if(0===c){if(0===a)return 0;if(0<a)return 90;if(0>a)return 270}else if(0<c){if(0===a)return 0;if(0<a)return q;if(0>a)return 270+r}else if(0>c){if(0===a)return 180;if(0<a)return 90+r;if(0>a)return 180+
q}},getScaleDistanceBetweenPoints:function(c,q){c=H.project(c,new B(102100));q=H.project(q,new B(102100));c=v.distance(c,q,9001);return z.removeNegativeExponents(c)}};return z})},"widgets/GriddedReferenceGraphic/js/geometry-utils":function(){define(["./constants","esri/geometry/webMercatorUtils","esri/geometry/Polyline","esri/geometry/Polygon"],function(L,g,t,H){return{toGeographic:function(b){return b.spatialReference.isWebMercator()?g.webMercatorToGeographic(b):b},toWebMercator:function(b){return b.spatialReference.isWebMercator()?
b:g.geographicToWebMercator(b)},_latitudeToWebMercatorY:function(b){return L.GEOGRAPHIC_360/2*(L.HALF_PI-2*Math.atan(Math.exp(-1*b/L.WGS84_EQUATORIAL_RADIUS)))/Math.PI},_longitudeToWebMercatorX:function(b){var h=L.GEOGRAPHIC_360,m=L.GEOGRAPHIC_360/2,v=L.WGS84_EQUATORIAL_RADIUS;return b/v*m/Math.PI-Math.floor((b/v*m/Math.PI+m)/h)*h},pointToGeographic:function(b){for(var h=b.x,m=b.y,v=(b=b.spatialReference.isWebMercator())?L.WEST_WEBMERCATOR_LIMIT:L.WEST_GEOGRAPHIC_LIMIT,B=b?L.EAST_WEBMERCATOR_LIMIT:
L.EAST_GEOGRAPHIC_LIMIT,A=b?L.WEBMERCATOR_360:L.GEOGRAPHIC_360,z=0;h<=v;)h+=A,--z;for(;h>B;)h-=A,z+=1;b&&(h=this._longitudeToWebMercatorX(h),m=this._latitudeToWebMercatorY(m));return{x:h,y:m,offsetX:z}},extentToPolygon:function(b){return new H({rings:[[[b.xmin,b.ymin],[b.xmax,b.ymin],[b.xmax,b.ymax],[b.xmin,b.ymax],[b.xmin,b.ymin]]],spatialReference:b.spatialReference})},polygonToPolyline:function(b){return new t({paths:b.rings,spatialReference:{wkid:b.spatialReference.wkid}})}}})},"widgets/GriddedReferenceGraphic/js/constants":function(){define([],
function(){return{ZONE_WIDTH_DEGREES:6,ZONE_HEIGHT_DEGREES:8,MIN_MGRS_LATITUDE:-80,MAX_MGRS_LATITUDE:84,POSITIVE_180:179.99999999,NEGATIVE_180:-179.99999999,WEST_GEOGRAPHIC_LIMIT:-180,EAST_GEOGRAPHIC_LIMIT:180,GEOGRAPHIC_360:360,WEST_WEBMERCATOR_LIMIT:-2.0037508342789244E7,EAST_WEBMERCATOR_LIMIT:2.0037508342789244E7,WEBMERCATOR_360:4.007501668557849E7,DEGREES_PER_RADIAN:57.29577951308232,RADIANS_PER_DEGREE:.017453292519943295,WGS84_EQUATORIAL_RADIUS:6378137,WGS84_HALF_EQUATORIAL_RADIUS:3189068.5,
HALF_PI:1.5707963267948966}})},"widgets/GriddedReferenceGraphic/js/mgrs-utils":function(){define("dojo/json ./constants ./geometry-utils ./geometryUtils ./mgrs ./NonPolarGridZone ./VisibleGridZone ./GridPolygon esri/geometry/geometryEngine esri/geometry/Point esri/geometry/Polygon".split(" "),function(L,g,t,H,b,h,m,v,B,A,z){Math.log10||(Math.log10=function(c){return Math.log(c)/Math.LN10});return{_ZonesDictionary:function(){var c,q,a,r="CDEFGHJKLMNPQRSTUVWX".split(""),y={},f=function(e,n){var p=e+
r[n];if("32X"===p||"34X"===p||"36X"===p)return null;if("31V"===p)var l={xmin:0,ymin:56,xmax:3,ymax:64,id:p};else if("32V"===p)l={xmin:3,ymin:56,xmax:12,ymax:64,id:p};else if("31X"===p)l={xmin:0,ymin:72,xmax:9,ymax:84,id:p};else if("33X"===p)l={xmin:9,ymin:72,xmax:21,ymax:84,id:p};else if("35X"===p)l={xmin:21,ymin:72,xmax:33,ymax:84,id:p};else if("37X"===p)l={xmin:33,ymin:72,xmax:42,ymax:84,id:p};else{l=(e-1)*g.ZONE_WIDTH_DEGREES-180;e=e*g.ZONE_WIDTH_DEGREES-180;var w=n*g.ZONE_HEIGHT_DEGREES+g.MIN_MGRS_LATITUDE;
n=(n+1)*g.ZONE_HEIGHT_DEGREES+g.MIN_MGRS_LATITUDE;l=180===l?g.POSITIVE_180:l;l=-180===l?g.NEGATIVE_180:l;e=180===e?g.POSITIVE_180:e;e=-180===e?g.NEGATIVE_180:e;80===n&&(n=g.MAX_MGRS_LATITUDE);l={xmin:l,ymin:w,xmax:e,ymax:n,id:p}}return new h(l)};for(c=1;60>=c;c++)for(q=0;q<r.length;q++)(a=f(c,q))&&(y[a.id]=a);for(c=1;60>=c;c++){var d=[];for(q=0;q<r.length;q++)if(a=f(c,q))a=new z({rings:L.parse(L.stringify(a._rings))}),d.push(a);d=B.union(d);for(q=0;q<r.length;q++)(a=f(c,q))&&(y[a.id.fullZoneGeometry]=
d)}return y}(),zonesFromExtent:function(c,q){var a=c.spatialReference.isWebMercator()?g.WEBMERCATOR_360:g.GEOGRAPHIC_360,r="CDEFGHJKLMNPQRSTUVWX".split(""),y=[];if(c.xmax-c.xmin>a)return y;a=t.extentToPolygon(c);a=t.toWebMercator(a);var f=t.pointToGeographic(new A([c.xmin,c.ymin],c.spatialReference)),d=t.pointToGeographic(new A([c.xmax,c.ymax],c.spatialReference));c=f.y;var e=d.y;var n=f.offsetX;var p=d.offsetX;for(var l=n;l<=p;l++){var w=l>n?g.NEGATIVE_180:f.x;var x=l<p?g.POSITIVE_180:d.x;var F=
Math.min(Math.max(Math.floor((c+80)/g.ZONE_HEIGHT_DEGREES),0),19);var I=Math.min(Math.floor((e+80)/g.ZONE_HEIGHT_DEGREES),19);w=Math.floor((w+180)/g.ZONE_WIDTH_DEGREES);for(x=Math.min(Math.floor((x+180)/g.ZONE_WIDTH_DEGREES)+2,60);w<=x;w++)for(var J=F;J<=I;J++){var P=r[J];P=w+P;if(this._ZonesDictionary[P]){var Q=L.parse(L.stringify(this._ZonesDictionary[P]._rings));for(var T=0;T<Q[0].length;T++)Q[0][T][0]+=l*g.GEOGRAPHIC_360;Q=new z({rings:Q});(Q=B.intersect(t.toWebMercator(Q),a))&&y.push(new m({map:q,
polygon:Q,fullZoneGeometry:this._ZonesDictionary[P].fullZoneGeometry,offset:l,nonPolarGridZone:this._ZonesDictionary[P],utmZone:this._ZonesDictionary[P].utmZone,latitudeBand:this._ZonesDictionary[P].latitudeZone}))}}}return y},processZonePolygons:function(c,q,a){var r=[];a=t.toWebMercator(a);for(var y=0;y<c.length;y++){var f=c[y];if(f){var d=f.nonPolarGridZone.latitudeZone,e=t.toGeographic(f.polygon.getExtent()),n=b.LLtoUTM(e.ymin,e.xmin,f.nonPolarGridZone.utmZone),p=b.LLtoUTM(e.ymin,e.xmax,f.nonPolarGridZone.utmZone),
l=b.LLtoUTM(e.ymax,e.xmax,f.nonPolarGridZone.utmZone);e=b.LLtoUTM(e.ymax,e.xmin,f.nonPolarGridZone.utmZone);f={minE:Math.min(n[0],p[0],l[0],e[0]),maxE:Math.max(n[0],p[0],l[0],e[0]),minN:Math.min(n[1],p[1],l[1],e[1]),maxN:Math.max(n[1],p[1],l[1],e[1]),utmZone:f.nonPolarGridZone.utmZone,latitudeZone:d,polygon:f.polygon,offset:f.offset,fullZoneGeometry:t.extentToPolygon(f.nonPolarGridZone.extent)};r=r.concat(this.handle100kGrids(f,q,a))}}return r},handle100kGrids:function(c,q,a){var r=c.polygon,y=c.offset,
f=c.utmZone,d=c.latitudeZone,e=c.fullZoneGeometry,n=c.minE,p=c.maxE,l=c.maxN,w=[],x,F;for(c=1E5*Math.floor(c.minN/1E5);c<l;c+=1E5)for(x=1E5*Math.floor(n/1E5);x<p;x+=1E5){var I=b.findGridLetters(f,0>c+5E4?1E7+(c+5E4):c+5E4,x+5E4);var J=[];for(F=x;F<=x+1E5;F+=1E4){var P=b.UTMtoLL(c,F,f);J.push([P.lon,P.lat])}for(F=c;F<c+1E5;F+=1E4)P=b.UTMtoLL(F,x+1E5,f),J.push([P.lon,P.lat]);for(F=x+1E5;F>=x;F-=1E4)P=b.UTMtoLL(c+1E5,F,f),J.push([P.lon,P.lat]);for(F=c+1E5;F>=c;F-=1E4)P=b.UTMtoLL(F,x,f),J.push([P.lon,
P.lat]);for(F=0;F<J.length;F++)J[F][0]+=y*g.GEOGRAPHIC_360;F=new z([J]);J=H.getAngleBetweenPoints(F.getPoint(0,F.rings[0].length-1),F.getPoint(0,F.rings[0].length-2));P=B.rotate(t.extentToPolygon(a),-1*J);J=B.intersect(t.toWebMercator(F),t.toWebMercator(r));P=B.intersects(P,t.toWebMercator(F));if(J||P){var Q;P&&(Q=B.intersect(t.toWebMercator(F),t.toWebMercator(e)));I={clippedPolygon:J,unclippedPolygon:F,clippedPolyToUTMZone:Q,map:q,xmin:x,ymin:c,xmax:x+1E5,ymax:c+1E5,x:"",y:"",minMaxType:"utm",utmZone:f,
latitudeZone:d,utmZonePoly:r,fullZoneGeometry:e,GZD:I,text:I};Q&&(I=new v(I),w.push(I))}}return w},handleGridSquares:function(c,q,a,r){var y=[],f=c.utmZonePoly,d=c.latitudeZone,e=c.utmZone,n=c.fullZoneGeometry,p=c.GZD,l=c.xmin,w=c.xmax,x=c.ymin;c=c.ymax;var F,I,J=!0,P=!0;r=t.toWebMercator(r);for(F=Math.floor(x/a)*a;F<c;F+=a)for(I=Math.floor(l/a)*a;I<w;I+=a){var Q=[];var T=b.UTMtoLL(F,I,e);Q.push([T.lon,T.lat]);var Y=b.UTMtoLL(F+a,I,e);Q.push([Y.lon,Y.lat]);var Z=b.UTMtoLL(F+a,I+a,e);Q.push([Z.lon,
Z.lat]);Z=b.UTMtoLL(F,I+a,e);Q.push([Z.lon,Z.lat]);Q.push([T.lon,T.lat]);Q=new z([Q]);Z=B.intersect(t.toWebMercator(t.extentToPolygon(r)),t.toWebMercator(n));if(J&&P){var W=H.getAngleBetweenPoints(new A(T.lon,T.lat),new A(Y.lon,Y.lat));W=B.rotate(Z,-1*W)}T=B.intersect(t.toWebMercator(Q),f);Y=B.intersects(W,t.toWebMercator(Q));var U;if(T||Y){Y&&(U=B.intersect(t.toWebMercator(Q),t.toWebMercator(n)));Y=p+this._padZero(I%1E5/a,5-Math.log10(a)).toString()+this._padZero((0>x?1E7+F:F)%1E5/a,5-Math.log10(a)).toString();
Q={clippedPolygon:T,unclippedPolygon:Q,fullZoneGeometry:n,clippedPolyToUTMZone:U,map:q,xmin:I,ymin:F,xmax:I+a,ymax:F+a,x:this._padZero(I%1E5/a,5-Math.log10(a)).toString(),y:this._padZero((0>x?1E7+F:F)%1E5/a,5-Math.log10(a)).toString(),minMaxType:"utm",utmZone:e,latitudeZone:d,GZD:p,utmZonePoly:f,text:Y};if(!U)continue;J=new v(Q);y.push(J)}P=J=!1}return y},_padZero:function(c,q){for(c=c.toString();c.length<q;)c="0"+c;return c}}})},"widgets/GriddedReferenceGraphic/js/mgrs":function(){define(["esri/geometry/Point"],
function(L){var g=6378137;var t=.00669437999;var H=t/(1-t);var b=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t));return{setSpheroid:function(h){h=h.toUpperCase();switch(h){case "AIRY 1830":g=6377563.396;t=.00667053999998536;break;case "AIRY MODIFIED":g=6377340.189;t=.00667053999998536;break;case "AVERAGE TERRESTRIAL SYSTEM 1977":g=6378135;t=.00669438499958795;break;case "AUSTRALIAN NATIONAL":g=6378160;t=.00669454185458764;break;case "BESSEL 1841":g=6377397.155;t=.00667437223180214;break;case "BESSEL MODIFIED":g=
6377492.018;t=.00667437223180214;break;case "BESSEL NAMIBIA":g=6377483.865;t=.00667437223180214;break;case "CLARKE 1858":g=6378293.639;t=.00678514600473303;break;case "NAD27":case "CLARKE 1866":g=6378206.4;t=.00676865799760964;break;case "CLARKE 1866 MICHIGAN":g=6378450.047;t=.00676865830738507;break;case "CLARKE 1880":g=6378249.138;t=.00680348101883452;break;case "CLARKE 1880 (ARC)":g=6378249.145;t=.00680348101883452;break;case "CLARKE 1880 (BENOIT)":g=6378300.79;t=.00680348271028565;break;case "CLARKE 1880 (IGN)":g=
6378249.2;t=.00680348767623919;break;case "CLARKE 1880 (RGS)":g=6378249.145;t=.00680351128284906;break;case "CLARKE 1880 (SGA)":g=6378249.2;t=.00680348860198551;break;case "EVEREST 1830 (DEFINITION)":g=6377299.36;t=.00663784663019969;break;case "EVEREST 1830 (MODIFIED)":g=6377304.063;t=.00663784663019969;break;case "EVEREST (ADJUSTMENT 1937)":g=6377276.345;t=.00663784663019969;break;case "EVEREST (DEFINITION 1962)":g=6377301.243;t=.00663784606842344;break;case "EVEREST (DEFINITION 1967)":g=6377298.556;
t=.00663784663019969;break;case "EVEREST (DEFINITION 1975)":g=6377299.151;t=.00663784606842344;break;case "NAD83":case "GEM GRAVITY POTENTIAL MODEL":case "GRS 1980":g=6378137;t=.00669438002290079;break;case "GRS 1967 \x3d INTERNATIONAL 1967":g=6378160;t=.00669460532856765;break;case "HELMERT 1906":g=6378200;t=.00669342162296594;break;case "INDONESIAN NATIONAL":g=6378160;t=.0066946090804091;break;case "INTERNATIONAL 1924":g=6378388;t=.00672267002233332;break;case "INTERNATIONAL 1967":g=6378160;t=.00669454185458764;
break;case "KRASOVSKY 1940":g=6378245;t=.00669342162296594;break;case "TRANSIT PRECISE EPHEMERIS":g=6378145;t=.00669454185458764;break;case "OSU 1986 GEOIDAL MODEL":g=6378136.2;t=.00669438006997852;break;case "OSU 1991 GEOIDAL MODEL":g=6378136.3;t=.00669438006997852;break;case "PLESSIS 1817":g=6376523;t=.00646954373789485;break;case "STRUVE 1860":g=6378298.3;t=.00677435980080942;break;case "WAR OFFICE":g=6378300.583;t=.00674534331628926;break;case "NWL-10D \x3d\x3d WGS 1972":g=6378135;t=.00669431777826672;
break;case "WGS 1972":g=6378135;t=.00669431777826672;break;case "WGS84":case "WGS 1984":g=6378137;t=.00669437999014132;break;case "WGS 1966":g=6378145;t=.00669454185458764;break;case "FISCHER 1960":g=6378166;t=.00669342162296594;break;case "FISCHER 1968":g=6378150;t=.00669342162296594;break;case "FISCHER MODIFIED":g=6378155;t=.00669342162296594;break;case "HOUGH 1960":g=6378270;t=.00672267002233332;break;case "EVEREST MODIFIED 1969":g=6377295.664;t=.00663784663019969;break;case "WALBECK":g=6376896;
t=.00659454809414964;break;case "GRS 1967 TRUNCATED":g=6378160,t=.00669454185458764}H=t/(1-t);b=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t))},getSpheroidList:function(){return"AIRY 1830;AIRY MODIFIED;AUSTRALIAN NATIONAL;AVERAGE TERRESTRIAL SYSTEM 1977;BESSEL 1841;BESSEL MODIFIED;BESSEL NAMIBIA;CLARKE 1858;CLARKE 1866 MICHIGAN;CLARKE 1866;CLARKE 1880 (ARC);CLARKE 1880 (BENOIT);CLARKE 1880 (IGN);CLARKE 1880 (RGS);CLARKE 1880 (SGA);CLARKE 1880;EVEREST (ADJUSTMENT 1937);EVEREST (DEFINITION 1962);EVEREST (DEFINITION 1967);EVEREST (DEFINITION 1975);EVEREST 1830 (DEFINITION);EVEREST 1830 (MODIFIED);EVEREST MODIFIED 1969;FISCHER 1960;FISCHER 1968;FISCHER MODIFIED;GEM GRAVITY POTENTIAL MODEL;GRS 1967 \x3d INTERNATIONAL 1967;GRS 1967 TRUNCATED;GRS 1980;HELMERT 1906;HOUGH 1960;INDONESIAN NATIONAL;INTERNATIONAL 1924;INTERNATIONAL 1967;KRASOVSKY 1940;NWL-10D \x3d\x3d WGS 1972;OSU 1986 GEOIDAL MODEL;OSU 1991 GEOIDAL MODEL;PLESSIS 1817;STRUVE 1860;TRANSIT PRECISE EPHEMERIS;WALBECK;WAR OFFICE;WGS 1966;WGS 1972;WGS 1984".split(";")},
getZoneNumber:function(h,m){h=parseFloat(h);m=parseFloat(m);if(360<m||-180>m){for(;-180>m;)m+=360;for(;180<m;)m-=360}m=m+180-360*Math.floor((m+180)/360)-180;var v=Math.floor((m+180)/6)+1;56<=h&&64>h&&3<=m&&12>m&&(v=32);72<=h&&84>h&&(0<=m&&9>m?v=31:9<=m&&21>m?v=33:21<=m&&33>m?v=35:33<=m&&42>m&&(v=37));return v},LLtoUTM:function(h,m,v){h=parseFloat(h);m=parseFloat(m);if(84<h||-80>h)return"undefined, ensure 84N \x3e Lat \x3e 80S";if(360<m||-180>m){for(;-180>m;)m+=360;for(;180<m;)m-=360}var B=m+180-360*
Math.floor((m+180)/360)-180;var A=h*Math.PI/180;B=B*Math.PI/180;m=v?v:this.getZoneNumber(h,m);var z=(6*(m-1)-180+3)*Math.PI/180;h=m+""+this.UTMLetterDesignator(h)+" ";v=g/Math.sqrt(1-t*Math.sin(A)*Math.sin(A));var c=Math.tan(A)*Math.tan(A);var q=H*Math.cos(A)*Math.cos(A);z=Math.cos(A)*(B-z);B=.9996*v*(z+(1-c+q)*z*z*z/6+(5-18*c+c*c+72*q-58*H)*z*z*z*z*z/120)+5E5;A=.9996*(g*((1-t/4-3*t*t/64-5*t*t*t/256)*A-(3*t/8+3*t*t/32+45*t*t*t/1024)*Math.sin(2*A)+(15*t*t/256+45*t*t*t/1024)*Math.sin(4*A)-35*t*t*t/
3072*Math.sin(6*A))+v*Math.tan(A)*(z*z/2+(5-c+9*q+4*q*q)*z*z*z*z/24+(61-58*c+c*c+600*q-330*H)*z*z*z*z*z*z/720));v={};v.z=m;v.s=h;v.x=Math.round(B);v.y=0>A?Math.round(1E7+A):Math.round(A);return[B,A,m,v]},LLtoUSNG:function(h,m,v,B){v=v||5;var A=B?B:this.getZoneNumber(h,m);h=parseFloat(h);m=parseFloat(m);var z=this.LLtoUTM(h,m,A);B=z[0];var c=z[1];0>h&&(c+=1E7);z=this.findGridLetters(A,c,B);A=Math.round(c)%1E5;B=Math.round(B)%1E5;A=Math.floor(A/Math.pow(10,5-v));B=Math.floor(B/Math.pow(10,5-v));h=this.getZoneNumber(h,
m)+this.UTMLetterDesignator(h)+" "+z+" ";for(m=String(B).length;m<v;m++)h+="0";h+=B+" ";for(m=String(A).length;m<v;m++)h+="0";return h+A},UTMLetterDesignator:function(h){h=parseFloat(h);return 84>=h&&72<=h?"X":72>h&&64<=h?"W":64>h&&56<=h?"V":56>h&&48<=h?"U":48>h&&40<=h?"T":40>h&&32<=h?"S":32>h&&24<=h?"R":24>h&&16<=h?"Q":16>h&&8<=h?"P":8>h&&0<=h?"N":0>h&&-8<=h?"M":-8>h&&-16<=h?"L":-16>h&&-24<=h?"K":-24>h&&-32<=h?"J":-32>h&&-40<=h?"H":-40>h&&-48<=h?"G":-48>h&&-56<=h?"F":-56>h&&-64<=h?"E":-64>h&&-72<=
h?"D":-72>h&&-80<=h?"C":"Z"},findSet:function(h){h=parseInt(h,10);switch(h%6){case 0:return 6;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;default:return-1}},findGridLetters:function(h,m,v){h=parseInt(h,10);m=parseFloat(m);v=parseFloat(v);var B=1;for(m=Math.round(m);1E5<=m;)m-=1E5,B++;B%=20;m=0;for(v=Math.round(v);1E5<=v;)v-=1E5,m++;m%=8;return this.lettersHelper(this.findSet(h),B,m)},lettersHelper:function(h,m,v){0===m?m=19:m--;0===v?v=7:v--;switch(h){case 1:return h=
"ABCDEFGHJKLMNPQRSTUV","ABCDEFGH".charAt(v)+h.charAt(m);case 2:return h="FGHJKLMNPQRSTUVABCDE","JKLMNPQR".charAt(v)+h.charAt(m);case 3:return h="ABCDEFGHJKLMNPQRSTUV","STUVWXYZ".charAt(v)+h.charAt(m);case 4:return h="FGHJKLMNPQRSTUVABCDE","ABCDEFGH".charAt(v)+h.charAt(m);case 5:return h="ABCDEFGHJKLMNPQRSTUV","JKLMNPQR".charAt(v)+h.charAt(m);case 6:return h="FGHJKLMNPQRSTUVABCDE","STUVWXYZ".charAt(v)+h.charAt(m)}},UTMtoLL:function(h,m,v){m=parseFloat(m)-5E5;h=parseFloat(h);v=parseInt(v,10);h=h/.9996/
(g*(1-t/4-3*t*t/64-5*t*t*t/256));h=h+(3*b/2-27*b*b*b/32)*Math.sin(2*h)+(21*b*b/16-55*b*b*b*b/32)*Math.sin(4*h)+151*b*b*b/96*Math.sin(6*h);var B=g/Math.sqrt(1-t*Math.sin(h)*Math.sin(h)),A=Math.tan(h)*Math.tan(h),z=H*Math.cos(h)*Math.cos(h),c=m/(.9996*B);m=h-B*Math.tan(h)/(g*(1-t)/Math.pow(1-t*Math.sin(h)*Math.sin(h),1.5))*(c*c/2-(5+3*A+10*z-4*z*z-9*H)*c*c*c*c/24+(61+90*A+298*z+45*A*A-252*H-3*z*z)*c*c*c*c*c*c/720);m=180*m/Math.PI;h=(c-(1+2*A+z)*c*c*c/6+(5-2*z+28*A-3*z*z+8*H+24*A*A)*c*c*c*c*c/120)/Math.cos(h);
h=6*(v-1)-180+3+180*h/Math.PI;v={};v.lat=m;v.lon=h;return v},USNGtoUTM:function(h,m,v,B,A,z){v=1+"ABCDEFGHJKLMNPQRSTUVWXYZ".indexOf(v)%8;var c="CDEFGHJKLMNPQRSTUVWX".indexOf(m);B=h%2?"ABCDEFGHJKLMNPQRSTUV".indexOf(B):"FGHJKLMNPQRSTUVABCDE".indexOf(B);B=Number([0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6][c])+B/10;B<[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9][c]&&(B+=2);c={};c.N=1E6*B+Number(z)*Math.pow(10,5-z.length);c.E=1E5*v+Number(A)*Math.pow(10,5-A.length);c.zone=h;
c.letter=m;return c},USNGtoLL:function(h){h=this.parseUSNG_str(h);var m=this.USNGtoUTM(h.zone,h.ltr,h.sq1,h.sq2,h.east,h.north);"N">h.ltr&&(m.N-=1E7);m=this.UTMtoLL(m.N,m.E,h.zone);return[m.lat,m.lon]},parseUSNG_str:function(h){var m=[];h=h.toUpperCase();m=/%20/g;m=h.replace(m,"");m=/ /g;m=h.replace(m,"");if(7>m.length)return 0;h={};var v=0;h.zone=10*m.charAt(v++)+1*m.charAt(v++);h.ltr=m.charAt(v++);h.sq1=m.charAt(v++);h.sq2=m.charAt(v++);h.precision=(m.length-v)/2;h.east="";h.north="";for(var B=
0;B<h.precision;B++)h.east+=m.charAt(v++);" "===m[v]&&v++;for(B=0;B<h.precision;B++)h.north+=m.charAt(v++);return h},isUSNG:function(h){h=h.toUpperCase();var m=/%20/g;h=h.replace(m,"");m=/ /g;h=h.replace(m,"");if(15<h.length)return 0;m=RegExp("^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX]$");if(h.match(m))return 0;m=RegExp("^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX][ABCDEFGHJKLMNPQRSTUVWXYZ][ABCDEFGHJKLMNPQRSTUV]([0-9][0-9]){0,5}");return!h.match(m)||7>h.length?0:h},LLtoMGRS:function(h,m,v){return this.LLtoUSNG(h,m,v||5).replace(/ /g,
"")},USNGtoPoint:function(h){h=this.USNGtoLL(h);return new L(h[1],h[0])},pointToUSNG:function(h,m){var v=h.getLatitude();h=h.getLongitude();return this.LLtoUSNG(v,h,m)},LLtoUSNG_nad27:function(h,m,v){return this.LLtoUSNG(h,m,v||5)+" (NAD27)"}}})},"widgets/GriddedReferenceGraphic/js/NonPolarGridZone":function(){define(["dojo/_base/declare","dojo/json","./constants","esri/geometry/Polygon","esri/geometry/Extent"],function(L,g,t,H,b){return L(null,{extent:null,id:null,utmZone:null,latitudeZone:null,
_rings:[],constructor:function(h){var m=h.id.match(/(\d+)|([A-Za-z]+)/g);this.id=h.id;this.utmZone=1*m[0];this.latitudeZone=m[1];this.extent=new b({xmin:h.xmin,ymin:h.ymin,xmax:h.xmax,ymax:h.ymax,spatialReference:h.spatialReference||{wkid:4326}});h=[this.extent.xmin,this.extent.ymin];this._rings=[[h,[this.extent.xmax,this.extent.ymin],[this.extent.xmax,this.extent.ymax],[this.extent.xmin,this.extent.ymax],h]]},toPolygon:function(h){var m=g.parse(g.stringify(this._rings));if(h)for(var v=0;v<m[0].length;v++)m[0][v][0]+=
h*t.GEOGRAPHIC_360;return new H({rings:m,spatialReference:this.spatialReference})}})})},"widgets/GriddedReferenceGraphic/js/VisibleGridZone":function(){define(["dojo/_base/declare","./GridPolygon"],function(L,g){return L(null,{polygon:null,offset:null,nonPolarGridZone:null,fullZoneGeometry:null,map:null,constructor:function(t){this.offset=Math.round(t.offset);this.polygon=t.polygon;this.nonPolarGridZone=t.nonPolarGridZone;this.fullZoneGeometry=t.fullZoneGeometry;this.map=t.map;this.utmZone=t.utmZone;
this.latitudeBand=t.latitudeBand;t={clippedPolygon:this.polygon,unclippedPolygon:this.nonPolarGridZone.toPolygon(t.offset),map:this.map,xmin:this.nonPolarGridZone.extent.xmin,ymin:this.nonPolarGridZone.extent.ymin,xmax:this.nonPolarGridZone.extent.xmax,ymax:this.nonPolarGridZone.extent.ymax,minMaxType:"degrees",utmZone:this.utmZone,text:this.nonPolarGridZone.id,latitudeBand:this.latitudeBand};this.gridPolygon=new g(t)}})})},"widgets/GriddedReferenceGraphic/js/GridPolygon":function(){define(["dojo/_base/declare"],
function(L){return L(null,{clippedPolygon:null,unclippedPolygon:null,clippedPolyToUTMZone:null,utmZonePoly:null,fullZoneGeometry:null,map:null,xmin:0,ymin:0,x:"",y:"",xmax:0,ymax:0,minMaxType:"",utmZone:0,latitudeZone:"",GZD:"",text:"",constructor:function(g){this.unclippedPolygon=g.unclippedPolygon;this.clippedPolygon=g.clippedPolygon;this.utmZonePoly=g.utmZonePoly;this.fullZoneGeometry=g.fullZoneGeometry;this.clippedPolyToUTMZone=g.clippedPolyToUTMZone;this.map=g.map;this.xmin=g.xmin;this.ymin=
g.ymin;this.xmax=g.xmax;this.ymax=g.ymax;this.x=g.x;this.y=g.y;this.minMaxType=g.minMaxType;this.utmZone=Math.round(g.utmZone);this.latitudeZone=g.latitudeZone;this.GZD=g.GZD;this.text=g.text}})})},"widgets/GriddedReferenceGraphic/js/util":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","esri/tasks/GeometryService"],function(L,g,t,H){return L(null,{constructor:function(b){this.appConfig=b.appConfig;this.nls=b.nls;(b=this.appConfig.geometryService)||(b="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");
this.geomService=new H(b)},getCleanInput:function(b){b=b.replace(/\n/g,"");b=b.replace(/\s+/g," ").trim();return b.toUpperCase()},getCoordValues:function(b,h,m){var v=new t;b={sr:4326,coordinates:[[b.x,b.y]],conversionType:h.name?h.name:h,numOfDigits:m||6,rounding:!0,addSpaces:!1};switch(h){case "DD":b.numOfDigits=6;break;case "USNG":b.numOfDigits=5;break;case "MGRS":b.conversionMode="mgrsDefault";b.numOfDigits=5;break;case "UTM (H)":b.conversionType="utm";b.conversionMode="utmNorthSouth";b.addSpaces=
!0;break;case "UTM":b.conversionType="utm";b.conversionMode="utmDefault";b.addSpaces=!0;break;case "GARS":b.conversionMode="garsDefault"}this.geomService.toGeoCoordinateString(b).then(function(B){v.resolve(B)},function(){v.resolve(null)});return v.promise},getXYNotation:function(b,h){var m=new t;var v=h.name?h.name:h;h={sr:4326,conversionType:v,strings:[]};switch(v){case "DD":case "DDM":case "DMS":h.numOfDigits=2;b=b.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");h.strings.push(b);break;
case "USNG":h.strings.push(b);h.addSpaces="false";break;case "MGRS":h.conversionMode="mgrsNewStyle";h.strings.push(b);h.addSpaces="false";break;case "UTM (H)":h.conversionType="utm";h.conversionMode="utmNorthSouth";h.strings.push(b);break;case "UTM":h.conversionType="utm";h.conversionMode="utmDefault";h.strings.push(b);break;case "GARS":h.conversionMode="garsCenter";h.strings.push(b);break;case "GEOREF":h.strings.push(b)}this.geomService.fromGeoCoordinateString(h).then(function(B){m.resolve(B)},function(){m.resolve(null)});
return m.promise},getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(b){return b.source}).join("")),notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,
/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(b){return b.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(b){return b.source}).join("")),
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(b){return b.source}).join("")),notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(b){return b.source}).join("")),notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(b){return b.source}).join("")),
notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,
/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(b){return b.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(b){return b.source}).join("")),
notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(b){return b.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM (H)"}]},getCoordinateType:function(b){var h=this.getCleanInput(b);b=new t;var m=this.getNotations();h=g.filter(m,function(v){return v.pattern.test(this.v)},{v:h});0<h.length?b.resolve(h):b.resolve(null);return b.promise},getFormattedDDStr:function(b,
h,m){var v={};v.sourceValue=b;v.sourceFormatString=h;b=b[0].split(/[ ,]+/);v.latdeg=b[0].replace(/[nNsS]/,"");v.londeg=b[1].replace(/[eEwW]/,"");m&&(v.latdeg="N"===b[0].slice(-1)?"+"+v.latdeg:"-"+v.latdeg,v.londeg="W"===b[1].slice(-1)?"-"+v.londeg:"+"+v.londeg);h=h.replace(/X/,v.londeg);h=h.replace(/[eEwW]/,b[1].slice(-1));h=h.replace(/[nNsS]/,b[0].slice(-1));h=h.replace(/Y/,v.latdeg);v.formatResult=h;return v},getFormattedDDMStr:function(b,h,m){var v={};v.sourceValue=b;v.sourceFormatString=h;v.parts=
b[0].split(/[ ,]+/);v.latdeg=v.parts[0];v.latmin=v.parts[1].replace(/[nNsS]/,"");v.londeg=v.parts[2];v.lonmin=v.parts[3].replace(/[eEwW]/,"");m&&(v.latdeg="N"===v.parts[1].slice(-1)?"+"+v.latdeg:"-"+v.latdeg,v.londeg="W"===v.parts[3].slice(-1)?"-"+v.londeg:"+"+v.londeg);b=h.replace(/[EeWw]/,v.parts[3].slice(-1));b=b.replace(/Y/,v.lonmin);b=b.replace(/X/,v.londeg);b=b.replace(/[NnSs]/,v.parts[1].slice(-1));b=b.replace(/B/,v.latmin);b=b.replace(/A/,v.latdeg);v.formatResult=b;return v},getFormattedDMSStr:function(b,
h,m){var v={};v.sourceValue=b;v.sourceFormatString=h;v.parts=b[0].split(/[ ,]+/);v.latdeg=v.parts[0];v.latmin=v.parts[1];v.latsec=v.parts[2].replace(/[NnSs]/,"");v.londeg=v.parts[3];v.lonmin=v.parts[4];v.lonsec=v.parts[5].replace(/[EWew]/,"");m&&(v.latdeg="N"===v.parts[2].slice(-1)?"+"+v.latdeg:"-"+v.latdeg,v.londeg="W"===v.parts[5].slice(-1)?"-"+v.londeg:"+"+v.londeg);b=h.replace(/A/,v.latdeg);b=b.replace(/B/,v.latmin);b=b.replace(/C/,v.latsec);b=b.replace(/X/,v.londeg);b=b.replace(/Y/,v.lonmin);
b=b.replace(/Z/,v.lonsec);b=b.replace(/[NnSs]/,v.parts[2].slice(-1));b=b.replace(/[EeWw]/,v.parts[5].slice(-1));v.formatResult=b;return v},getFormattedUSNGStr:function(b,h){var m={};m.sourceValue=b;m.sourceFormatString=h;b[0].match(/^[ABYZ]/)?m.gzd=b[0].match(/[ABYZ]/)[0].trim():m.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();m.grdsq=b[0].replace(m.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();m.easting=b[0].replace(m.gzd+m.grdsq,"").match(/^\d{1,5}/)[0].trim();m.northing=b[0].replace(m.gzd+m.grdsq,
"").match(/\d{1,5}$/)[0].trim();b=h.replace(/Y/,m.northing);b=b.replace(/X/,m.easting);b=b.replace(/S/,m.grdsq);b=b.replace(/Z/,m.gzd);m.formatResult=b;return m},getFormattedMGRSStr:function(b,h){var m={};m.sourceValue=b;m.sourceFormatString=h;b[0].match(/^[ABYZ]/)?m.gzd=b[0].match(/[ABYZ]/)[0].trim():m.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();m.grdsq=b[0].replace(m.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();m.easting=b[0].replace(m.gzd+m.grdsq,"").match(/^\d{1,5}/)[0].trim();m.northing=b[0].replace(m.gzd+
m.grdsq,"").match(/\d{1,5}$/)[0].trim();b=h.replace(/Y/,m.northing);b=b.replace(/X/,m.easting);b=b.replace(/S/,m.grdsq);b=b.replace(/Z/,m.gzd);m.formatResult=b;return m},getFormattedGARSStr:function(b,h){var m={};m.sourceValue=b;m.sourceFormatString=h;m.lon=b[0].match(/\d{3}/);m.lat=b[0].match(/[a-zA-Z]{2}/);b=b[0].match(/\d*$/);m.quadrant=b[0][0];m.key=b[0][1];h=h.replace(/K/,m.key);h=h.replace(/Q/,m.quadrant);h=h.replace(/Y/,m.lat);h=h.replace(/X/,m.lon);m.formatResult=h;return m},getFormattedGEOREFStr:function(b,
h){var m={};m.sourceValue=b;m.sourceFormatString=h;m.lon=b[0].match(/[a-zA-Z]{1}/)[0].trim();m.lat=b[0].replace(m.lon,"").match(/[a-zA-Z]{1}/)[0].trim();m.quadrant15lon=b[0].replace(m.lon+m.lat,"").match(/[a-zA-Z]{1}/)[0].trim();m.quadrant15lat=b[0].replace(m.lon+m.lat+m.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();b=b[0].replace(m.lon+m.lat+m.quadrant15lon+m.quadrant15lat,"");m.quadrant1lon=b.substr(0,b.length/2);m.quadrant1lat=b.substr(b.length/2,b.length);h=h.replace(/Y/,m.quadrant1lat);h=
h.replace(/X/,m.quadrant1lon);h=h.replace(/D/,m.quadrant15lat);h=h.replace(/C/,m.quadrant15lon);h=h.replace(/B/,m.lat);h=h.replace(/A/,m.lon);m.formatResult=h;return m},getFormattedUTMStr:function(b,h){var m={};m.sourceValue=b;m.sourceFormatString=h;m.parts=b[0].split(/[ ,]+/);m.zone=m.parts[0].replace(/[A-Z]/,"");m.bandLetter=m.parts[0].slice(-1);m.easting=m.parts[1];m.westing=m.parts[2];b=h.replace(/Y/,m.westing);b=b.replace(/X/,m.easting);b=b.replace(/B/,m.bandLetter);b=b.replace(/Z/,m.zone);m.formatResult=
b;return m},getFormattedUTMHStr:function(b,h){var m={};m.sourceValue=b;m.sourceFormatString=h;m.parts=b[0].split(/[ ,]+/);m.zone=m.parts[0].replace(/[A-Z]/,"");m.hemisphere=m.parts[0].slice(-1);m.easting=m.parts[1];m.westing=m.parts[2];b=h.replace(/Y/,m.westing);b=b.replace(/X/,m.easting);b=b.replace(/H/,m.hemisphere);b=b.replace(/Z/,m.zone);m.formatResult=b;return m},convertMetersToUnits:function(b,h){var m=0;switch(h.toLowerCase()){case "meters":m=b;break;case "feet":m=3.28084*b;break;case "kilometers":m=
.001*b;break;case "miles":m=6.21371E-4*b;break;case "nautical-miles":m=5.39957E-4*b;break;case "yards":m=1.09361*b}return m},convertToMeters:function(b,h){var m=b;switch(h){case "meters":m=b;break;case "feet":m=.3048*b;break;case "kilometers":m=1E3*b;break;case "miles":m=1609.34*b;break;case "nautical-miles":m=1852.001376036*b;break;case "yards":m=.9144*b}return m}})})},"esri/geometry/projection":function(){define("require exports dojo/Deferred ./pe ../SpatialReference ./GeographicTransformation".split(" "),
function(L,g,t,H,b,h){function m(c,q,a,r,y){void 0===r&&(r=null);void 0===y&&(y=!1);if(null===r){var f=h.cacheKey(q,a);void 0!==z[f]?r=z[f]:(r=v(q,a,null),null===r&&(r=new h),z[f]=r)}return B._project(c,q,a instanceof b||!1===y?a:new b(a),r,y)}function v(c,q,a){void 0===a&&(a=null);c=B._getTransformation(c,q,a);return null!==c?h.fromGE(c):null}Object.defineProperty(g,"__esModule",{value:!0});var B=null;g.isLoaded=function(){return!!B&&H.isLoaded()};g.isSupported=function(){return H.isSupported()};
var A=null;g.load=function(){if(A)return A.promise;A=new t;var c=H.load();L(["./geometryEngine"],function(q){B=q;c.then(function(){B._enableProjection(H);A.resolve()},function(a){A.reject(a)})});return A.promise};g.project=function(c,q,a){void 0===a&&(a=null);return c instanceof Array?0===c.length?[]:m(c,c[0].spatialReference,q,a):m([c],c.spatialReference,q,a)[0]};var z={};g.projectMany=m;g.getTransformation=v;g.getTransformations=function(c,q,a){void 0===a&&(a=null);c=B._getTransformationBySuitability(c,
q,a);if(null!==c){q=[];for(a=0;a<c.length;a++)q.push(h.fromGE(c[a]));return q}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","dojo/Deferred","../core/sniff"],function(L,g,t,H,b){function h(f){function d(l,w,x){l[w]=x(l[w])}g._pe=f;c.init();q.init();a.init();r.init();y.init();g.PeGCSExtent=function(l){function w(){return null!==l&&l.apply(this,arguments)||this}t(w,l);w.prototype.destroy=function(){g._pe.destroy(this)};return w}(g._pe.PeGCSExtent);
for(var e=0,n=[g._pe.PeDatum,g._pe.PeGeogcs,g._pe.PeGeogtran,g._pe.PeObject,g._pe.PeParameter,g._pe.PePrimem,g._pe.PeProjcs,g._pe.PeSpheroid,g._pe.PeUnit];e<n.length;e++)f=n[e],d(f.prototype,"getName",function(l){return function(){return l.call(this,Array(c.PE_NAME_MAX))}});e=0;for(n=[g._pe.PeGeogtran,g._pe.PeProjcs];e<n.length;e++)f=n[e],d(f.prototype,"getParameters",function(l){return function(){for(var w=Array(c.PE_PARM_MAX),x=l.call(this),F=0;F<w.length;F++){var I=g._pe.getValue(x,"*");w[F]=I?
g._pe.wrapPointer(I,g._pe.PeParameter):null;x+=Int32Array.BYTES_PER_ELEMENT}return w}});d(g._pe.PeHorizon.prototype,"getCoord",function(l){return function(){var w=this.getSize();if(!w)return null;var x=[],F=l.call(this);A(x,w,F);return x}});d(g._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(l){var w=g._pe._pe_getPeGTlistExtendedGTsSize();return function(){var x=null,F=l.call(this);if(!g._pe.compare(F,g._pe.NULL)){x=[F];var I=this.getSteps();if(1<I){F=g._pe.getPointer(F);for(var J=1;J<I;J++)x.push(g._pe.wrapPointer(F+
w*J,g._pe.PeGTlistExtendedGTs))}}return x}});var p=g._pe._pe_getPeHorizonSize();f=function(l){return function(){var w=this._cache;w||(this._cache=w=new Map);if(w.has(l))return w.get(l);var x=null,F=l.call(this);if(!g._pe.compare(F,g._pe.NULL)){x=[F];var I=F.getNump();if(1<I){F=g._pe.getPointer(F);for(var J=1;J<I;J++)x.push(g._pe.wrapPointer(F+p*J,g._pe.PeHorizon))}}w.set(l,x);return x}};d(g._pe.PeProjcs.prototype,"horizonGcsGenerate",f);d(g._pe.PeProjcs.prototype,"horizonPcsGenerate",f);g._pe.PeObject.prototype.toString=
function(l){void 0===l&&(l=c.PE_STR_OPTS_NONE);g._pe.ensureCache.prepare();var w=g._pe.getPointer(this),x=g._pe.ensureInt8(Array(c.PE_BUFFER_MAX));return g._pe.UTF8ToString(g._pe._pe_object_to_string_ext(w,l,x))}}function m(f){if(f){var d=g._pe.getClass(f);d&&(d=g._pe.getCache(d))&&(f=g._pe.getPointer(f))&&delete d[f]}}function v(f,d){var e=[];d=Array(d);for(var n=0;n<f;n++)e.push(g._pe.ensureInt8(d));return e}function B(f){if(Array.isArray(f[0])){var d=[];f.forEach(function(e){d.push(e[0],e[1])})}else d=
f;return d}function A(f,d,e,n){void 0===n&&(n=!1);if(n)for(n=0;n<2*d;n++)f[n]=g._pe.getValue(e+n*Float64Array.BYTES_PER_ELEMENT,"double");else{var p=0===f.length;for(n=0;n<d;n++)p&&(f[n]=Array(2)),f[n][0]=g._pe.getValue(e,"double"),f[n][1]=g._pe.getValue(e+Float64Array.BYTES_PER_ELEMENT,"double"),e+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(g,"__esModule",{value:!0});var z;g._pe=null;g.isLoaded=function(){return!!g._pe};g.isSupported=function(){return!!b("esri-wasm")};g.load=function(){if(z)return z.promise;
z=new H;L(["./support/pe-wasm"],function(f){f({locateFile:function(d){return L.toUrl("./support/"+d)},onAbort:function(d){z.reject(Error(d))}}).then(function(d){h(d);z.resolve()})});return z.promise};(function(f){function d(p,l,w){g._pe.ensureCache.prepare();var x=B(w),F=w===x;x=g._pe.ensureFloat64(x);(p=g._pe._pe_geog_to_proj(g._pe.getPointer(p),l,x))&&A(w,l,x,F);return p}function e(p,l,w){return n(p,l,w,0)}function n(p,l,w,x){g._pe.ensureCache.prepare();var F=B(w),I=w===F;F=g._pe.ensureFloat64(F);
(p=g._pe._pe_proj_to_geog_center(g._pe.getPointer(p),l,F,x))&&A(w,l,F,I);return p}f.geogToProj=d;f.projGeog=function(p,l,w,x){switch(x){case c.PE_TRANSFORM_P_TO_G:return e(p,l,w);case c.PE_TRANSFORM_G_TO_P:return d(p,l,w)}return 0};f.projToGeog=e;f.projToGeogCenter=n})(g.PeCSTransformations||(g.PeCSTransformations={}));var c;(function(f){f.init=function(){f.PE_BUFFER_MAX=g._pe.PeDefs.prototype.PE_BUFFER_MAX;f.PE_NAME_MAX=g._pe.PeDefs.prototype.PE_NAME_MAX;f.PE_MGRS_MAX=g._pe.PeDefs.prototype.PE_MGRS_MAX;
f.PE_USNG_MAX=g._pe.PeDefs.prototype.PE_USNG_MAX;f.PE_DD_MAX=g._pe.PeDefs.prototype.PE_DD_MAX;f.PE_DDM_MAX=g._pe.PeDefs.prototype.PE_DDM_MAX;f.PE_DMS_MAX=g._pe.PeDefs.prototype.PE_DMS_MAX;f.PE_UTM_MAX=g._pe.PeDefs.prototype.PE_UTM_MAX;f.PE_PARM_MAX=g._pe.PeDefs.prototype.PE_PARM_MAX;f.PE_TYPE_NONE=g._pe.PeDefs.prototype.PE_TYPE_NONE;f.PE_TYPE_GEOGCS=g._pe.PeDefs.prototype.PE_TYPE_GEOGCS;f.PE_TYPE_PROJCS=g._pe.PeDefs.prototype.PE_TYPE_PROJCS;f.PE_TYPE_GEOGTRAN=g._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;
f.PE_TYPE_COORDSYS=g._pe.PeDefs.prototype.PE_TYPE_COORDSYS;f.PE_TYPE_UNIT=g._pe.PeDefs.prototype.PE_TYPE_UNIT;f.PE_STR_OPTS_NONE=g._pe.PeDefs.prototype.PE_STR_OPTS_NONE;f.PE_STR_AUTH_NONE=g._pe.PeDefs.prototype.PE_STR_AUTH_NONE;f.PE_STR_AUTH_TOP=g._pe.PeDefs.prototype.PE_STR_AUTH_TOP;f.PE_STR_NAME_CANON=g._pe.PeDefs.prototype.PE_STR_NAME_CANON;f.PE_PARM_X0=g._pe.PeDefs.prototype.PE_PARM_X0;f.PE_PARM_ND=g._pe.PeDefs.prototype.PE_PARM_ND;f.PE_TRANSFORM_1_TO_2=g._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
f.PE_TRANSFORM_2_TO_1=g._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;f.PE_TRANSFORM_P_TO_G=g._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;f.PE_TRANSFORM_G_TO_P=g._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;f.PE_HORIZON_RECT=g._pe.PeDefs.prototype.PE_HORIZON_RECT;f.PE_HORIZON_POLY=g._pe.PeDefs.prototype.PE_HORIZON_POLY;f.PE_HORIZON_LINE=g._pe.PeDefs.prototype.PE_HORIZON_LINE;f.PE_HORIZON_DELTA=g._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c=g.PeDefs||(g.PeDefs={}));(function(f){function d(l,w){var x=null,F=n[l];
F||(F={},n[l]=F);F.hasOwnProperty(String(w))?x=F[w]:(l=g._pe.PeFactory.prototype.factoryByType(l,w),g._pe.compare(l,g._pe.NULL)||(x=l,F[w]=x));return x=e(x)}function e(l){if(l){var w=l.getType();switch(w){case c.PE_TYPE_GEOGCS:l=g._pe.castObject(l,g._pe.PeGeogcs);break;case c.PE_TYPE_PROJCS:l=g._pe.castObject(l,g._pe.PeProjcs);break;case c.PE_TYPE_GEOGTRAN:l=g._pe.castObject(l,g._pe.PeGeogtran);break;default:w&c.PE_TYPE_UNIT&&(l=g._pe.castObject(l,g._pe.PeUnit))}}return l}var n={},p={};f.initialize=
function(){g._pe.PeFactory.prototype.initialize(null)};f.coordsys=function(l){return d(c.PE_TYPE_COORDSYS,l)};f.factoryByType=d;f.fromString=function(l,w){var x=null,F=p[l];F||(F={},p[l]=F);F.hasOwnProperty(w)?x=F[w]:(l=g._pe.PeFactory.prototype.fromString(l,w),g._pe.compare(l,g._pe.NULL)||(x=l,F[w]=x));return x=e(x)};f.geogcs=function(l){return d(c.PE_TYPE_GEOGCS,l)};f.geogtran=function(l){return d(c.PE_TYPE_GEOGTRAN,l)};f.getCode=function(l){return g._pe.PeFactory.prototype.getCode(l)};f.projcs=
function(l){return d(c.PE_TYPE_PROJCS,l)};f.unit=function(l){return d(c.PE_TYPE_UNIT,l)}})(g.PeFactory||(g.PeFactory={}));g.PeGCSExtent=null;var q;(function(f){var d;f.init=function(){f.PE_GTLIST_OPTS_COMMON=g._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;d=g._pe._pe_getPeGTlistExtendedEntrySize()};f.getGTlist=function(e,n,p,l,w,x){var F=null,I=new g._pe.PeInteger(x);try{var J=g._pe.PeGTlistExtended.prototype.getGTlist(e,n,p,l,w,I);if(x=I.val)if(F=[J],1<x){var P=g._pe.getPointer(J);for(e=1;e<
x;e++)F.push(g._pe.wrapPointer(P+d*e,g._pe.PeGTlistExtendedEntry))}}finally{g._pe.destroy(I)}return F}})(q=g.PeGTlistExtended||(g.PeGTlistExtended={}));(function(f){f.destroy=function(d){if(d&&d.length){for(var e=0;e<d.length;e++){var n=d[e];m(n);n.getEntries().forEach(function(p){m(p);p=p.getGeogtran();m(p);p.getParameters().forEach(m);[p.getGeogcs1(),p.getGeogcs2()].forEach(function(l){m(l);var w=l.getDatum();m(w);m(w.getSpheroid());m(l.getPrimem());m(l.getUnit())})})}g._pe.PeGTlistExtendedEntry.prototype.Delete(d[0])}}})(g.PeGTlistExtendedEntry||
(g.PeGTlistExtendedEntry={}));(function(f){f.geogToGeog=function(d,e,n,p,l){g._pe.ensureCache.prepare();var w=B(n),x=n===w;w=g._pe.ensureFloat64(w);var F=0;p&&(F=g._pe.ensureFloat64(p));(d=g._pe._pe_geog_to_geog(g._pe.getPointer(d),e,w,F,l))&&A(n,e,w,x);return d}})(g.PeGTTransformations||(g.PeGTTransformations={}));(function(f){function d(n,p,l,w,x,F){g._pe.ensureCache.prepare();switch(n){case "dd":var I=g._pe._pe_geog_to_dd;var J=c.PE_DD_MAX;break;case "ddm":I=g._pe._pe_geog_to_ddm;J=c.PE_DDM_MAX;
break;case "dms":I=g._pe._pe_geog_to_dms,J=c.PE_DMS_MAX}n=0;p&&(n=g._pe.getPointer(p));p=B(w);p=g._pe.ensureFloat64(p);J=v(l,J);w=g._pe.ensureInt32(J);if(x=I(n,l,p,x,w))for(I=0;I<l;I++)F[I]=g._pe.UTF8ToString(J[I]);return x}function e(n,p,l,w,x){g._pe.ensureCache.prepare();switch(n){case "dd":var F=g._pe._pe_dd_to_geog;break;case "ddm":F=g._pe._pe_ddm_to_geog;break;case "dms":F=g._pe._pe_dms_to_geog}n=0;p&&(n=g._pe.getPointer(p));p=w.map(function(I){return g._pe.ensureString(I)});w=g._pe.ensureInt32(p);
p=g._pe.ensureFloat64(Array(2*l));(F=F(n,l,w,p))&&A(x,l,p);return F}f.geog_to_dms=function(n,p,l,w,x){return d("dms",n,p,l,w,x)};f.dms_to_geog=function(n,p,l,w){return e("dms",n,p,l,w)};f.geog_to_ddm=function(n,p,l,w,x){return d("ddm",n,p,l,w,x)};f.ddm_to_geog=function(n,p,l,w){return e("ddm",n,p,l,w)};f.geog_to_dd=function(n,p,l,w,x){return d("dd",n,p,l,w,x)};f.dd_to_geog=function(n,p,l,w){return e("dd",n,p,l,w)}})(g.PeNotationDms||(g.PeNotationDms={}));var a;(function(f){f.init=function(){f.PE_MGRS_STYLE_NEW=
g._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;f.PE_MGRS_STYLE_OLD=g._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;f.PE_MGRS_STYLE_AUTO=g._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;f.PE_MGRS_180_ZONE_1_PLUS=g._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;f.PE_MGRS_ADD_SPACES=g._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};f.geog_to_mgrs_extended=function(d,e,n,p,l,w,x){g._pe.ensureCache.prepare();var F=0;d&&(F=g._pe.getPointer(d));d=B(n);n=g._pe.ensureFloat64(d);d=v(e,c.PE_MGRS_MAX);
var I=g._pe.ensureInt32(d);if(p=g._pe._pe_geog_to_mgrs_extended(F,e,n,p,l,w,I))for(l=0;l<e;l++)x[l]=g._pe.UTF8ToString(d[l]);return p};f.mgrs_to_geog_extended=function(d,e,n,p,l){g._pe.ensureCache.prepare();var w=0;d&&(w=g._pe.getPointer(d));d=n.map(function(x){return g._pe.ensureString(x)});n=g._pe.ensureInt32(d);d=g._pe.ensureFloat64(Array(2*e));(p=g._pe._pe_mgrs_to_geog_extended(w,e,n,p,d))&&A(l,e,d);return p}})(a=g.PeNotationMgrs||(g.PeNotationMgrs={}));(function(f){f.geog_to_usng=function(d,
e,n,p,l,w,x){g._pe.ensureCache.prepare();var F=0;d&&(F=g._pe.getPointer(d));d=B(n);n=g._pe.ensureFloat64(d);d=v(e,c.PE_MGRS_MAX);var I=g._pe.ensureInt32(d);if(p=g._pe._pe_geog_to_usng(F,e,n,p,l,w,I))for(l=0;l<e;l++)x[l]=g._pe.UTF8ToString(d[l]);return p};f.usng_to_geog=function(d,e,n,p){g._pe.ensureCache.prepare();var l=0;d&&(l=g._pe.getPointer(d));d=n.map(function(w){return g._pe.ensureString(w)});n=g._pe.ensureInt32(d);d=g._pe.ensureFloat64(Array(2*e));(l=g._pe._pe_usng_to_geog(l,e,n,d))&&A(p,e,
d);return l}})(g.PeNotationUsng||(g.PeNotationUsng={}));var r;(function(f){f.init=function(){f.PE_UTM_OPTS_NONE=g._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;f.PE_UTM_OPTS_ADD_SPACES=g._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;f.PE_UTM_OPTS_NS=g._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};f.geog_to_utm=function(d,e,n,p,l){g._pe.ensureCache.prepare();var w=0;d&&(w=g._pe.getPointer(d));d=B(n);n=g._pe.ensureFloat64(d);d=v(e,c.PE_UTM_MAX);var x=g._pe.ensureInt32(d);if(p=g._pe._pe_geog_to_utm(w,
e,n,p,x))for(w=0;w<e;w++)l[w]=g._pe.UTF8ToString(d[w]);return p};f.utm_to_geog=function(d,e,n,p,l){g._pe.ensureCache.prepare();var w=0;d&&(w=g._pe.getPointer(d));d=n.map(function(x){return g._pe.ensureString(x)});n=g._pe.ensureInt32(d);d=g._pe.ensureFloat64(Array(2*e));(p=g._pe._pe_utm_to_geog(w,e,n,p,d))&&A(l,e,d);return p}})(r=g.PeNotationUtm||(g.PeNotationUtm={}));var y;(function(f){var d=new Map;f.init=function(){f.PE_PCSINFO_OPTION_NONE=g._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;f.PE_PCSINFO_OPTION_DOMAIN=
g._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;f.PE_POLE_OUTSIDE_BOUNDARY=g._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;f.PE_POLE_POINT=g._pe.PePCSInfo.prototype.PE_POLE_POINT};f.generate=function(e,n){void 0===n&&(n=f.PE_PCSINFO_OPTION_DOMAIN);var p;if(d.has(e)){var l=d.get(e);l[n]&&(p=l[n])}p||(p=g._pe.PePCSInfo.prototype.generate(e,n),l||(l=[],d.set(e,l)),l[n]=p);return p}})(y=g.PePCSInfo||(g.PePCSInfo={}));(function(f){f.version_string=function(){return g._pe.PeVersion.prototype.version_string()}})(g.PeVersion||
(g.PeVersion={}));g._init=h})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,t){g.__proto__=t}||function(g,t){for(var H in t)t.hasOwnProperty(H)&&(g[H]=t[H])};return function(g,t){function H(){this.constructor=g}L(g,t);g.prototype=null===t?Object.create(t):(H.prototype=t.prototype,new H)}}()})},"esri/geometry/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],
function(L,g,t){return function(){function H(b){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(b&&b.steps){var h=0;for(b=b.steps;h<b.length;h++){var m=b[h];m instanceof t?this.steps.push(m):this.steps.push(new t({wkid:m.wkid,wkt:m.wkt,isInverse:m.isInverse}))}}}H.cacheKey=function(b,h){return[void 0!==b.wkid&&null!==b.wkid?b.wkid.toString():"-1",void 0!==b.wkt&&null!==b.wkt?b.wkt.toString():"",void 0!==h.wkid&&null!==h.wkid?h.wkid.toString():"-1",void 0!==h.wkt&&
null!==h.wkt?h.wkt.toString():""].join()};H.fromGE=function(b){var h=new H,m="",v=0;for(b=b.steps;v<b.length;v++){var B=t.fromGE(b[v]);h.steps.push(B);m+=B.uid.toString()+","}h._cached_projection={};h._gtlistentry=null;h._chain=m;return h};H.prototype.getInverse=function(){var b=new H;b.steps=[];for(var h=this.steps.length-1;0<=h;h--)b.steps.push(this.steps[h].getInverse());return b};H.prototype.getGTListEntry=function(){for(var b="",h=0,m=this.steps;h<m.length;h++)b+=m[h].uid.toString()+",";b!==
this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=b);return this._gtlistentry};H.prototype.assignCachedGe=function(b,h,m){this._cached_projection[H.cacheKey(b,h)]=m};H.prototype.getCachedGeTransformation=function(b,h){for(var m="",v=0,B=this.steps;v<B.length;v++)m+=B[v].uid.toString()+",";m!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=m);b=this._cached_projection[H.cacheKey(b,h)];return void 0===b?null:b};return H}()})},"esri/geometry/GeographicTransformationStep":function(){define(["require",
"exports"],function(L,g){var t=0;return function(){function H(b){void 0===b&&(b=null);this.uid=t++;b?(this._wkt=void 0!==b.wkt?b.wkt:null,this._wkid=void 0!==b.wkid?b.wkid:-1,this._isInverse=void 0!==b.isInverse?!0===b.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}H.fromGE=function(b){var h=new H;h._wkt=b.wkt;h._wkid=b.wkid;h._isInverse=b.isInverse;return h};Object.defineProperty(H.prototype,"wkt",{get:function(){return this._wkt},set:function(b){this._wkt=b;this.uid=t++},enumerable:!0,
configurable:!0});Object.defineProperty(H.prototype,"wkid",{get:function(){return this._wkid},set:function(b){this._wkid=b;this.uid=t++},enumerable:!0,configurable:!0});Object.defineProperty(H.prototype,"isInverse",{get:function(){return this._isInverse},set:function(b){this._isInverse=b;this.uid=t++},enumerable:!0,configurable:!0});H.prototype.getInverse=function(){var b=new H;b._wkt=this.wkt;b._wkid=this._wkid;b._isInverse=!this.isInverse;return b};return H}()})},"widgets/GriddedReferenceGraphic/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/CoordinateControl.html":"\x3cdiv class\x3d'coordinateContainer'\x3e\r\n  \x3cdiv class\x3d'coordLabel' data-dojo-attach-point\x3d'coordNameContainer' data-a11y-label-id\x3d'coordLabel'\x3e\r\n    \x3cspan data-dojo-type\x3d'dijit/InlineEditBox' width\x3d'75px' data-dojo-props\x3d\"editor:'dijit/form/TextBox', autoSave:true\"\r\n      data-dojo-attach-point\x3d'coordName'\x3e${type}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'add-with-icon coordInput'\x3e\r\n    \x3ctextarea data-a11y-label-by\x3d'coordLabel' tabindex\x3d\"0\" aria-multiline\x3d\"true\" role\x3d\"textbox\" id\x3d'${uid}' type\x3d'text' rows\x3d'1' data-dojo-attach-point\x3d'coordtext' spellcheck\x3d'false'\r\n    placeholder\x3d'${nls.coordinateInputLabel}' title\x3d'${nls.coordinateInputLabel}'\x3e\x3c/textarea\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'coordactions'\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" id\x3d'${uid}_cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'cpbtn' class\x3d'cpbtn'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" title\x3d\"${nls.formatOutput}\" class\x3d'settingBtn' data-dojo-attach-point\x3d'formatButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.zoomLabel}' title\x3d'${nls.zoomLabel}' class\x3d'zoomBtn' data-dojo-attach-point\x3d'zoomButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.addPointLabel}' title\x3d'${nls.addPointLabel}' class\x3d'drawPointBtn' data-dojo-attach-point\x3d'drawPointButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.removeCoordinate}' title\x3d'${nls.removeCoordinate}' class\x3d'jimu-icon jimu-icon-close' data-dojo-attach-point\x3d'removeControlBtn'\r\n        data-dojo-attach-event\x3d'onclick: remove'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d\"${nls.expandOutput}\" aria-expanded \x3d \"false\" title\x3d\"${nls.expandOutput}\" class\x3d'expandBtn' data-dojo-attach-point\x3d'expandButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d'coordcontrols' class\x3d'coordarea' style\x3d\"display: none\"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub1' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub1label' data-a11y-label-id\x3d'sub1Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub1Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub1val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub1val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal1CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub2' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub2label' data-a11y-label-id\x3d'sub2Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub2Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub2val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub2val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal2CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub3' class\x3d'coordformat sub3'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub3label' data-a11y-label-id\x3d'sub3Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub3Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub3val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub3val~cpbtn' aria-label\x3d'$${nls.copyToClipboard}' title\x3d'$${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal3CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub4' class\x3d'coordformat sub4'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub4label' data-a11y-label-id\x3d'sub4Label' /\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub4Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub4val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub4val~cpbtn' aria-label\x3d'${nls.copyToClipboard} title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal4CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\"line-separator\"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:widgets/GriddedReferenceGraphic/templates/ColorPickerEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n  \x3cspan class\x3d"trans"\x3e${nls.transparency}\x3c/span\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan class\x3d"percent-display"\x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:widgets/GriddedReferenceGraphic/templates/FontSetting.html":'\x3cdiv class\x3d"style-selector"\x3e\r\n  \x3cdiv class\x3d"setting-items font clearFix" data-dojo-attach-point\x3d"fontSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.font}"\x3e${nls.font}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"fontSelect" data-dojo-props\x3d\'style:{width:"100%"}\' data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.font}"\x3e\x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-size clearFix" data-dojo-attach-point\x3d"textSizeSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textSize}"\x3e${nls.textSize}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3c!--role and aria-label added run time--\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/ComboBox" data-dojo-attach-point\x3d"textSizeSelect"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"textColorSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textColor}"\x3e${nls.textColor}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"textColorBtn"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"font-group font-group-btns jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading bold" data-dojo-attach-point\x3d"bold" tabindex\x3d"0" role\x3d"button" aria-label\x3d"bold" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading italic" data-dojo-attach-point\x3d"italic" tabindex\x3d"0" role\x3d"button" aria-label\x3d"italic" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading underline" data-dojo-attach-point\x3d"underline" tabindex\x3d"0" role\x3d"button" aria-label\x3d"underline" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"transparencySetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.transparency}"\x3e${nls.transparency}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"transparencySlider"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e      \r\n    \x3c/div\x3e\r\n  \x3c/div\x3e  \r\n  \x3cdiv class\x3d"setting-items halo-size clearFix" data-dojo-attach-point\x3d"haloSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.halo}"\x3e${nls.halo}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"haloSizeSelect" aria-label\x3d"${nls.halo}"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"halo-color-btn" data-dojo-attach-point\x3d"haloColorBtn" aria-label\x3d"${nls.halo}"\x3e\x3c/div\x3e        \r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"label" title\x3d"${nls.show}"\x3e${nls.show}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cinput class\x3d"halo-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"showHalo" checked\x3d"true" aria-label\x3d"${nls.show}"/\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/templates/TransparencyEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan class\x3d"percent-display"\x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:widgets/GriddedReferenceGraphic/templates/GridSettings.html":'\x3cdiv\x3e       \r\n    \x3cdiv class\x3d"tabs" data-dojo-attach-point\x3d"tabsContainer"\x3e\r\n      \x3c!-- Grid Settings Tab --\x3e \r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"gridTab"\x3e\r\n        \r\n        \x3c!-- Grid Shape --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridShapeContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellShape}"\x3e\r\n                ${nls.gridSettings.cellShape}\x3c/div\x3e\r\n            \x3cselect class\x3d"GRGcellShapeSelect" data-dojo-attach-point\x3d"cellShape" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.cellShape}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Units --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridUnitsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellUnits}"\x3e\r\n                ${nls.gridSettings.cellUnits}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"cellUnits" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.cellUnits}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Grid Origin --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridOriginContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.gridOrigin}"\x3e\r\n                ${nls.gridSettings.gridOrigin}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"gridOrigin" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.gridOrigin}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridRefSystemContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelLeft" title\x3d"${nls.gridSettings.gridReferenceSystem}"\x3e\r\n                ${nls.gridSettings.gridReferenceSystem}\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelRight" title\x3d"${nls.gridSettings.gridDatum}"\x3e\r\n                ${nls.gridSettings.gridDatum}\x3c/div\x3e\r\n            \x3cselect class\x3d"referenceSystemSelect" data-dojo-attach-point\x3d"referenceSystem" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.gridDatum}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell Outline Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellOutline}"\x3e\r\n                ${nls.gridSettings.cellOutline}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellOutlineColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell fill Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellFill}"\x3e\r\n                ${nls.gridSettings.cellFill}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellFillColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \r\n      \x3c!-- Label Settings Tab --\x3e\r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"labelTab"\x3e  \r\n        \x3c!-- Label Start Position Selector --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStartPositionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelStartPosition}"\x3e\r\n                ${nls.gridSettings.labelStartPosition}\x3c/div\x3e\r\n            \x3cselect class\x3d"GRGlabelStartPositionSelect" data-dojo-attach-point\x3d"labelStartPosition" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n                aria-label\x3d"${nls.gridSettings.labelStartPosition}" role\x3d"listbox"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style without Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelType" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" \r\n                aria-label\x3d"${nls.gridSettings.labelType}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style with Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleWithRefSysContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelTypeWithRefSys" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" \r\n                aria-label\x3d"${nls.gridSettings.labelType}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling direction --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelDirectionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelDirection}"\x3e\r\n                ${nls.gridSettings.labelDirection}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelDirection" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" \r\n                aria-label\x3d"${nls.gridSettings.labelDirection}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Font Settings --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"fontSettingsContainer"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.labelStyle}"\x3e\r\n                ${nls.labelStyle}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"fontSettingNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e        \r\n      \x3c/div\x3e  \r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/Widget.html":'\x3cdiv class\x3d"GRGDrafterMainContainer GRGDrafterFullHeight" data-dojo-attach-point\x3d"mainNode"\x3e\r\n  \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterFullWidth" data-dojo-attach-point\x3d"widgetMainNode"\x3e\r\n    \x3c!---------------\r\n      Main Page Node\r\n    -----------------\x3e\r\n    \x3cdiv class\x3d"esriCTMainPage" data-dojo-attach-point\x3d"mainPageNode"\x3e\r\n      \x3c!-- Create From Area --\x3e\r\n      \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer"\r\n            title\x3d"${nls.newGRGFromAreaButtonLabel}" data-dojo-attach-point\x3d"newGRGAreaButton" tabindex\x3d"0"\r\n            role\x3d"button" aria-label\x3d"${nls.newGRGFromAreaButtonLabel}"\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv\x3e\r\n            \x3ctable\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle"\r\n                    title\x3d"${nls.newGRGFromAreaButtonLabel}"\x3e\r\n                    ${nls.newGRGFromAreaButtonLabel}\r\n                  \x3c/div\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd\x3e\r\n                  \x3clabel\x3e\r\n                    ${nls.defineGridFromAreaDesc}\r\n                  \x3c/label\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Create From Area Options --\x3e\r\n        \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromAreaContainer"\x3e\r\n          \x3c!-- Define by size --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3ctable\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle"\r\n                      title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n                      ${nls.newGRGBySizeButtonLabel}\r\n                    \x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3clabel\x3e\r\n                      ${nls.defineGridFromAreaDimensionDesc}\r\n                    \x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\r\n              class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight GRGDrafterSubButtonIcon"\r\n              title\x3d"${nls.newGRGBySizeButtonLabel}" data-dojo-attach-point\x3d"newAreaGRGBySizeButton" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3ctable\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle"\r\n                      title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n                      ${nls.newGRGFromRefSystemButtonLabel}\r\n                    \x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3clabel\x3e\r\n                      ${nls.defineGridFromaAreaRefSystemDesc}\r\n                    \x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\r\n              class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight GRGDrafterSubButtonIcon"\r\n              title\x3d"${nls.newGRGFromRefSystemButtonLabel}" data-dojo-attach-point\x3d"newAreaGRGFromRefSystemButton"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Create From Point --\x3e\r\n      \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer"\r\n            title\x3d"${nls.newGRGFromPointButtonLabel}" data-dojo-attach-point\x3d"newGRGPointButton" tabindex\x3d"0"\r\n            role\x3d"button" aria-label\x3d"${nls.newGRGFromPointButtonLabel}"\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv\x3e\r\n            \x3ctable\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle"\r\n                    title\x3d"${nls.newGRGFromPointButtonLabel}"\x3e\r\n                    ${nls.newGRGFromPointButtonLabel}\r\n                  \x3c/div\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd\x3e\r\n                  \x3clabel\x3e\r\n                    ${nls.defineGridFromPointDesc}\r\n                  \x3c/label\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Create From Point Options --\x3e\r\n        \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromPointContainer"\x3e\r\n          \x3c!-- Define by dimension --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3ctable\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle"\r\n                      title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n                      ${nls.newGRGBySizeButtonLabel}\r\n                    \x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3clabel\x3e\r\n                      ${nls.defineGridFromPointByDimensionDesc}\r\n                    \x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\r\n              class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight GRGDrafterSubButtonIcon"\r\n              title\x3d"${nls.newGRGBySizeButtonLabel}" data-dojo-attach-point\x3d"newPointGRGBySizeButton" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3ctable\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle"\r\n                      title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n                      ${nls.newGRGFromRefSystemButtonLabel}\r\n                    \x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3clabel\x3e\r\n                      ${nls.defineGridFromPointByRefSystemDesc}\r\n                    \x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\r\n              class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight GRGDrafterSubButtonIcon"\r\n              title\x3d"${nls.newGRGFromRefSystemButtonLabel}" data-dojo-attach-point\x3d"newPointGRGFromRefSystemButton"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from time and speed --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByTimeButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3ctable\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle" title\x3d"${nls.newGRGByTimeLabel}"\x3e\r\n                      ${nls.newGRGByTimeLabel}\x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3clabel\x3e\r\n                      ${nls.defineGridFromPointTimeSpeedDesc}\r\n                    \x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\r\n              class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight GRGDrafterSubButtonIcon"\r\n              title\x3d"${nls.newGRGByTimeLabel}" data-dojo-attach-point\x3d"newPointGRGFromTimeButton" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.newGRGByTimeLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------------\r\n      GRG From Area By Size Node\r\n    -----------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaBySizePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgAreaBySizePanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeTitle}"\x3e\r\n          ${nls.newGRGAreaBySizeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgAreaBySizeSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Area Tool --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20"\r\n            data-dojo-attach-point\x3d"grgAreaBySizeDrawContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth"\x3e\r\n              \x3cdiv\x3e\r\n                \x3cdiv class\x3d"GRGDrafterDoubleButtonLabel GRGDrafterEllipsis"\r\n                  title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaPolygonToolTip}" class\x3d"jimu-icon polygonBtn"\r\n                  data-dojo-attach-point\x3d"grgAreaBySizeDrawPolygonIcon" tabindex\x3d"0" role\x3d"button"\r\n                  aria-label\x3d"${nls.addGRGAreaPolygonToolTip}"\x3e\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn"\r\n                  data-dojo-attach-point\x3d"grgAreaBySizeDrawExtentIcon" tabindex\x3d"0" role\x3d"button"\r\n                  aria-label\x3d"${nls.addGRGAreaExtentToolTip}"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Set number of cells checkbox --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n              data-dojo-attach-point\x3d"setNumberRowsColumns" checked\x3d"false"\r\n              aria-label\x3d"${nls.numberRowsColumnsLabel}" /\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0}\' data-dojo-attach-point\x3d"cellHorizontal" value\x3d"10"\r\n                disabled\x3d\'true\' aria-label\x3d\'${nls.numberOfCellsHorizontal}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0}\' data-dojo-attach-point\x3d"cellVertical" value\x3d"10"\r\n                disabled\x3d\'true\' aria-label\x3d\'${nls.numberOfCellsVertical}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},required: true\'\r\n                data-dojo-attach-point\x3d"grgAreaBySizeCellWidth" value\x3d"1000" disabled\x3d\'true\'\r\n                aria-label\x3d\'${nls.cellWidth}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},required: true\'\r\n                data-dojo-attach-point\x3d"grgAreaBySizeCellHeight" value\x3d"1000" disabled\x3d\'true\'\r\n                aria-label\x3d\'${nls.cellHeight}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rotation --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9},required: true\'\r\n                data-dojo-attach-point\x3d"grgAreaBySizeRotation" value\x3d"0" disabled\x3d\'true\'\r\n                aria-label\x3d\'${nls.rotation}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeCreateGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeClearGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!----------------------------------\r\n      GRG From Area By Reference System\r\n    ------------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaByRefSystemPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgAreaByRefSystemPanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaByRefSystemTitle}"\x3e\r\n          ${nls.newGRGAreaByRefSystemTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgAreaByRefSystemSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Area Tool --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth" data-dojo-attach-point\x3d"grgAreaByRefSystemDrawContainer"\x3e\r\n              \x3cdiv\x3e\r\n                \x3cdiv class\x3d"GRGDrafterButtonLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e\r\n                  ${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn"\r\n                  data-dojo-attach-point\x3d"grgAreaByRefSystemDrawIcon" tabindex\x3d"0" role\x3d"button"\r\n                  aria-label\x3d"${nls.addGRGAreaExtentToolTip}"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Size DropDown --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n            \x3cselect style\x3d"width: 100%" class\x3d"GRGGridSizeSelect" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n              data-dojo-attach-point\x3d"grgAreaByRefSystemGridSize" aria-label\x3d"${nls.gridSize}"\x3e\r\n              \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n              \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n              \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n              \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n              \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n              \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Clip Grid to GRG Area Toggle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv\x3e\r\n              \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.clipGrid}"\x3e${nls.clipGrid}\x3c/div\x3e\r\n              \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                data-dojo-attach-point\x3d"grgAreaByRefSystemClipToggle" checked\x3d"false" aria-label\x3d"${nls.clipGrid}" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Label Format--\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgAreaByRefSystemLabelFormat"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)"\r\n              data-dojo-attach-point\x3d"grgAreaByRefLabelFormat" value\x3d"Z" aria-label\x3d"${nls.labelFormat}"\x3e\x3c/input\x3e\r\n            \x3cdiv class\x3d"jimu-icon helpBtn" data-dojo-attach-point\x3d"helpBtnForArea"\r\n              tabindex\x3d"0" role\x3d"tooltip"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemCreateGRGButton\' tabindex\x3d"0"\r\n                role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemClearGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-------------------------------------\r\n      GRG From Area From Non Standard Grid\r\n    --------------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaFromNonStandardPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgAreaByNonStandardPanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaFromNonStandardTitle}"\x3e\r\n          ${nls.newGRGAreaFromNonStandardTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgAreaByNonStandardSettingsButton"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- GRG Layer Name --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"Area GRG by Reference System"\x3eArea GRG from Non\r\n              Standard Grid To Do\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!----------------------------\r\n      GRG From Point by Size Node\r\n    ------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointBySizePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgPointBySizePanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointBySizeTitle}"\x3e\r\n          ${nls.newGRGPointBySizeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgPointBySizeSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"newGRGPointBySizeOriginCoordsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0}\' data-dojo-attach-point\x3d"grgPointBySizeCellHorizontal"\r\n                value\x3d"5" aria-label\x3d"${nls.numberOfCellsHorizontal}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0}\' data-dojo-attach-point\x3d"grgPointBySizeCellVertical"\r\n                value\x3d"5" aria-label\x3d"${nls.numberOfCellsVertical}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0},required: true\' data-dojo-attach-point\x3d"grgPointBySizeCellWidth"\r\n                value\x3d"1000" aria-label\x3d"${nls.cellWidth}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0},required: true,\' data-dojo-attach-point\x3d"grgPointBySizeCellHeight"\r\n                value\x3d"1000" aria-label\x3d"${nls.cellHeight}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Angle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridAngle}"\x3e${nls.gridAngle}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n              data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1}, required: true\'\r\n              data-dojo-attach-point\x3d"gridAnglePoint" value\x3d"0" aria-label\x3d"${nls.gridAngle}"\x3e\x3c/input\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'grgPointBySizeCreateGRGButton\'\r\n                tabindex\x3d"-1" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointBySizeClearGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-----------------------------------\r\n      GRG From Point By Reference System\r\n    -------------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByRefSystemPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgPointByRefSystemPanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByRefSystemTitle}"\x3e\r\n          ${nls.newGRGPointByRefSystemTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgPointByRefSystemSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"newGRGPointByRefSystemOriginCoordsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Size DropDown --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n            \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n              data-dojo-attach-point\x3d"grgPointByRefSystemGridSize" aria-label\x3d"${nls.gridSize}"\x3e\r\n              \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n              \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n              \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n              \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n              \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n              \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0}\' data-dojo-attach-point\x3d"grgPointByRefCellHorizontal"\r\n                value\x3d"5" aria-label\x3d"${nls.numberOfCellsHorizontal}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0}\' data-dojo-attach-point\x3d"grgPointByRefCellVertical"\r\n                value\x3d"5" aria-label\x3d"${nls.numberOfCellsVertical}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Label Format--\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgPointByRefSystemLabelFormat"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)"\r\n              data-dojo-attach-point\x3d"grgPointByRefLabelFormat" value\x3d"Z" aria-label\x3d"${nls.labelFormat}"\x3e\x3c/input\x3e\r\n            \x3cdiv class\x3d"jimu-icon helpBtn" data-dojo-attach-point\x3d"helpBtnForPt"\r\n              tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'grgPointByRefSystemCreateGRGButton\'\r\n                tabindex\x3d"-1" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByRefSystemClearGRGButton\' tabindex\x3d"0"\r\n                role\x3d"button" aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!---------------------------------\r\n      GRG From Point By Time and Speed\r\n    -----------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByTimePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgPointByTimeBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByTimeTitle}"\x3e\r\n          ${nls.newGRGPointByTimeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgPointByTimeSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"newGRGPointByTimeOriginCoordsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Time --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"timeContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.time}"\x3e${nls.time}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:2}\' data-dojo-attach-point\x3d"grgPointByTimeTime" value\x3d"1"\r\n                disabled\x3d\'false\' aria-label\x3d"${nls.time}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n              \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n                data-dojo-attach-point\x3d"grgPointByTimeTimeUnits"\x3e\r\n                \x3coption value\x3d"3600" selected\x3d"selected"\x3e${nls.hours}\x3c/option\x3e\r\n                \x3coption value\x3d"60"\x3e${nls.minutes}\x3c/option\x3e\r\n                \x3coption value\x3d"1"\x3e${nls.seconds}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rate --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"rateContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rate}"\x3e${nls.rate}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:2}\' data-dojo-attach-point\x3d"grgPointByTimeRate" value\x3d"10" disabled\x3d\'false\'\r\n                aria-label\x3d"${nls.rate}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n              \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n                data-dojo-attach-point\x3d"grgPointByTimeRateUnits"\x3e\r\n                \x3coption value\x3d"0.3048;1"\x3e${nls.ftPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"0.3048;3600"\x3e${nls.ftPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1000;1"\x3e${nls.kmPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1000;3600" selected\x3d"selected"\x3e${nls.kmPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1;1"\x3e${nls.mPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1;3600"\x3e${nls.mPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1609.344;1"\x3e${nls.miPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1609.344;3600"\x3e${nls.miPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1852;1"\x3e${nls.nMPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1852;3600"\x3e${nls.nMPerHour}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Set number of cells checkbox --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n              data-dojo-attach-point\x3d"setNumberRowsColumnsTime" checked\x3d"true"\r\n              aria-label\x3d"${nls.numberRowsColumnsLabel}" /\x3e\r\n            \x3clabel class\x3d"GRGCellsLabel" data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Number of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0}\' data-dojo-attach-point\x3d"grgPointByTimeCellHorizontal" value\x3d"10" disabled\x3d\'false\'\r\n                aria-label\x3d"${nls.numberOfCellsHorizontal}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0}\' data-dojo-attach-point\x3d"grgPointByTimeCellVertical" value\x3d"10"\r\n                disabled\x3d\'false\' aria-label\x3d"${nls.numberOfCellsVertical}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2}, required: true\' data-dojo-attach-point\x3d"grgPointByTimeCellWidth"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d"${nls.cellWidth}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},required: true\' data-dojo-attach-point\x3d"grgPointByTimeCellHeight"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d"${nls.cellHeight}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rotation --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},required: true\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeRotation" value\x3d"0" disabled\x3d\'false\' aria-label\x3d"${nls.rotation}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'grgPointByTimeCreateGRGButton\'\r\n                tabindex\x3d"-1" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByTimeClearGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!---------\r\n      Settings\r\n    -----------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"settingsPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"gridSettingsPanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.settingsTitle}"\x3e\r\n          ${nls.settingsTitle}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"GRGDrafterSettingsNode" data-dojo-attach-point\x3d"gridSettingsNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--------\r\n      Publish\r\n    ----------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"publishPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"publishPanelBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.publishTitle}"\x3e\r\n          ${nls.publishTitle}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- GRG Layer Name --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.GRGLayerName}"\x3e${nls.GRGLayerName}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput controlGroupHidden" style\x3d"width: 100%;"\r\n              data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addGRGNameArea"\r\n              data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_ -]*\'" required\x3d"true" aria-label\x3d"${nls.GRGLayerName}"\r\n              trim\x3d"true"\x3e\x3c/input\x3e\r\n            \x3cselect class\x3d"SelectStyle" aria-label\x3d"${nls.GRGLayerName}" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n              tabindex\x3d"0" data-dojo-attach-point\x3d"featureLayerList"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish to new layer --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"checkBoxParentContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.publishToNewLayer}"\x3e\r\n              ${nls.publishToNewLayer}\x3c/div\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"publishNewLayer"\r\n              aria-label\x3d"${nls.publishToNewLayer}" /\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Show Labels Toggle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv\x3e\r\n              \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.showLabels}"\x3e\r\n                ${nls.gridSettings.showLabels}\x3c/div\x3e\r\n              \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                data-dojo-attach-point\x3d"settingsShowLabelsToggle" checked\x3d"true"\r\n                aria-label\x3d"${nls.gridSettings.showLabels}" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish GRG Button --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterBtnContainer"\x3e\r\n            \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizePublishGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.publishGRGBtn}"\x3e${nls.publishGRGBtn}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publishing Message --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterPublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/css/style.css":'.GRGDrafterMainContainer {min-width: 222px;}.jimu-widget-GRGDrafter .GRGDrafterFullHeight {height: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidth {width: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidthAndPadding {width: 100%; padding-top: 12px; padding-bottom: 8px;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthLeft {width: 50%;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-left: 10px; width: 50%;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-left: 0px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-right: 2px;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthContainer {display: flex;}.jimu-widget-GRGDrafter .GRGDrafterEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-GRGDrafter .GRGDrafterPointer {cursor: pointer;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowBlock {display: block;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRow {margin: 10px 10px 10px 10px; display: inline-flex;}.jimu-widget-GRGDrafter .GRGDrafterMainButtonIcon {margin-top: 6px; height: 16px; width: 16px;}.jimu-widget-GRGDrafter .GRGDrafterSubButtonIcon {margin-top: 8px;}.jimu-widget-GRGDrafter .GRGDrafterButtonIcon {height: 24px; width: 24px; float: left; margin-top: 5px;}.jimu-widget-GRGDrafter .GRGFloatRight {float: right;}.jimu-rtl .jimu-widget-GRGDrafter .GRGFloatRight {float: left;}.jimu-widget-GRGDrafter .GRGPadRight {padding-right: 10px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGPadRight {padding-left: 10px;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowItem {width: calc(100% - 40px); margin: 5px 25px 5px 25px; display: grid; grid-template-columns: 1fr 10fr 1fr;}.jimu-widget-GRGDrafter .GRGDrafterButtonLabel {float: left; width: calc(100% - 30px); padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .SelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: \'Avenir Medium\'; margin: 0 0 8px 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterButtonLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterDoubleButtonLabel {float: left; width: calc(100% - 65px); padding: 5px 5px 0px 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterDoubleButtonLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterToggleLabel {float: left; width: calc(100% - 35px); padding: 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterToggleLabel {float: right; padding: 1px 0 0 0;}.jimu-widget-GRGDrafter .GRGDrafterInputLabel {padding: 3px 5px 0px 0; font-size: 1.03em;}.jimu-widget-GRGDrafter .GRGNewRightButton {background: url("./images/arrow-right_black.png") no-repeat;}.jimu-rtl .jimu-widget-GRGDrafter .GRGNewRightButton {transform: rotate(180deg); float: left;}.jimu-widget-GRGDrafter .GRGNewRightButton:hover {background: url("./images/arrow-right_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGNewDownButton {background: url("./images/arrow-down_black.png") no-repeat; margin-top: 9px;}.jimu-widget-GRGDrafter .GRGNewDownButton:hover {background: url("./images/arrow-down_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByDimension {background: url("./images/byDimension.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByRefSystemButton {background: url("./images/byReferenceSystem.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByTimeButton {background: url("./images/byTime.png") no-repeat;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterButtonIcon {float: right;}.jimu-widget-GRGDrafter .GRGDrafterPublishMessage {float: left; line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: break-all;}.jimu-widget-GRGDrafter .GRGDrafterPanelRow {margin: 10px 10px 10px 10px; display: block;}.jimu-widget-GRGDrafter .claro .dijitSelect,.claro .dijitSelect .dijitButtonContents,.claro .dijitTextBox {width: calc(100% - 60px); overflow: hidden; text-overflow: ellipsis; margin-bottom: 8px;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon {background-image: url(\'./images/settings_black.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon:Hover {background-image: url(\'./images/settings_black_hover.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .settingsLocked {background-image: url(\'./images/settings_locked.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputInner {height: 20px !important; text-align: left; line-height: 0px !important;}.jimu-rtl .jimu-widget-GRGDrafter .dijitTextBox .dijitInputInner {text-align: right;}.jimu-widget-GRGDrafter .dijitTextBoxFocused .dijitInputContainer {background: transparent;}.jimu-widget-GRGDrafter .GRGDrafterHidden {display: none;}.jimu-rtl .jimu-widget-GRGDrafter .GRGCellsLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterSettingsRow {width: 100%; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsButtonIcon {margin-top: 10px; height: 20px; width: 25px; float: right; background-size: 45px;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsDownButton {background: url("../images/down-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsUpButton {background: url("../images/up-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsNode {width: 100%; height: calc(100% - 30px); display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsContainer {margin: 10px; display: inline-block; width: calc(100% - 20px);}.jimu-widget-GRGDrafter .GRGDrafterSettingRow {padding-bottom: 6px; padding-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterSettingRow {padding-right: 2px;}.jimu-widget-GRGDrafter .GRGDrafterSettingRowPaddingTop20 {padding-top: 20px;}.jimu-widget-GRGDrafter .GRGDrafterDropdownLabel {padding-bottom: 5px;}.jimu-widget-GRGDrafter .GRGDrafterSettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterBackButton {overflow: hidden; width: 15px; float: left;}.jimu-widget-GRGDrafter .GRGDrafterTitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {background-image: url(\'./images/left-arrow_black.png\'); float: left; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow:hover {background-image: url(\'./images/left-arrow_black_hover.png\');}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContentsDartTheme {background-color: inherit;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButtonDartTheme {background-color: rgba(0, 0, 0, 0.5) !important;}.jimu-widget-GRGDrafter .dijitMenuItem {color: #7989a0;}.jimu-widget-GRGDrafter .dijitSelect .dijitInputField {margin-right: 2px;}.jimu-widget-GRGDrafter .switch-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.jimu-widget-GRGDrafter .jimu-tab3 .tab-item-td.jimu-state-active {border-bottom: 3px solid #000; font-family: "Avenir Heavy"; color: #000000;}.jimu-widget-GRGDrafter .jimu-tab3 .tab-item-td {font-size: 12px;}.jimu-widget-GRGDrafter .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 12px; margin: 20px 0 10px 0;}.jimu-widget-GRGDrafter .tabs .unit-item {margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;}.jimu-widget-GRGDrafter .dijitTextBox .dijitPlaceHolder {font-size: 12px;}.jimu-widget-GRGDrafter .dijitTextBoxError {border-color: #d9dde0 !important; box-shadow: inset 0 0 0 2px #d46464;}.jimu-widget-GRGDrafter .GRGlabelStartPositionSelect:focus,.jimu-widget-GRGDrafter .GRGcellShapeSelect:focus,.jimu-widget-GRGDrafter .style-selector .jimu-color-picker:focus,.jimu-widget-GRGDrafter .GRGGridSizeSelect:focus,.jimu-widget-GRGDrafter .GRGDrafterMainButtonIcon:focus,.jimu-widget-GRGDrafter .GRGDrafterBackButton:focus,.jimu-widget-GRGDrafter .referenceSystemSelect:focus {outline: 2px solid #24B5CC !important; outline-offset: -2px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterInputLabel {float: right; padding: 7px 5px 0px 0px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {float: right; margin: 0px 0px 00px 10px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterBackButton {float: right;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterSettingsIcon {float: left;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {transform: rotate(180deg);}.jimu-rtl .jimu-widget-GRGDrafter .dijitSelect .dijitInputField {margin-left: 8px; margin-right: 0;}.SubTitle {font-weight: bold;}.jimu-widget-GRGDrafter .helpBtn {float: right; background: url(./images/help_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .helpBtn {float: left; transform: rotateY(180deg);}.jimu-widget-GRGDrafter .helpBtn:hover {float: right; background: url(./images/help_black_hover.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .helpBtn:hover {float: left;}.jimu-widget-GRGDrafter .polygonBtn {display: inline-block; background: url(./images/polygon_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .polygonBtn:hover {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-polygon-active {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat; border: none;}.jimu-widget-GRGDrafter .extentBtn {display: inline-block; background: url(./images/extent_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .extentBtn:hover {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-extent-active {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat; border: none;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-GRGDrafter .GRGDrafterBtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterBtnContainer {padding-right: 2px;}.jimu-widget-GRGDrafter .controlGroupHidden {display: none;}.jimu-widget-GRGDrafter .controlItem {display: flex;}.jimu-widget-GRGDrafter .jimu-btn {margin-bottom: 6px;}.jimu-widget-GRGDrafter .jimu-coordinate-control .coordLabel {font-size: 12px;}.jimu-widget-GRGDrafter .jimu-coordinate-control textarea {width: 100%;}.jimu-widget-GRGDrafter .jimu-coordinate-control .add-with-icon.coordInput {width: calc(100% - 60px);}.jimu-widget-GRGDrafter .dijitSlider {margin-left: 10px; margin-right: auto; margin-top: 14px; width: calc(100% - 212px); width: -moz-calc(100% - 212px);}.jimu-widget-GRGDrafter .dijitSliderH {display: none !important;}.jimu-rtl .jimu-widget-GRGDrafter .dijitSlider {margin-left: auto; margin-right: 10px;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderImageHandleH {top: -10px; width: 20px; height: 20px;}.jimu-widget-GRGDrafter .colorPickerEditor {display: inline-flex; width: 100%;}.jimu-widget-GRGDrafter .percent-display {padding: 7px 0 0 2px;}.jimu-widget-GRGDrafter .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px;}.jimu-widget-GRGDrafter .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 70px; height: 30px;}.jimu-widget-GRGDrafter .dijitSliderImageHandleH {top: -7px;}.jimu-widget-GRGDrafter .dijitSliderThumbHover {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderProgressBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderLeftBumper {border-color: #000; background-color: #000; background-image: -webkit-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: -o-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px);}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRemainingBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRightBumper {border-color: #d7d7d7; background-color: #d7d7d7;}.jimu-widget-GRGDrafter .colorPickerEditor .trans {font-family: "Avenir Light"; font-size: 12px; padding: 5px 5px 0 15px; letter-spacing: 0.33px;}.jimu-rtl .jimu-widget-GRGDrafter .colorPickerEditor .trans {padding: 5px 15px 0 5px;}.jimu-widget-GRGDrafter .sliderbar {width: 60px;}.jimu-widget-GRGDrafter .style-selector .clearFix {*overflow: hidden; *zoom: 1}.jimu-widget-GRGDrafter .style-selector .clearFix:after {display: table; content: ""; width: 0; clear: both}.jimu-widget-GRGDrafter .style-selector .hide {display: none}.jimu-widget-GRGDrafter .settings-container .title {font-size: 14px; color: #000000; letter-spacing: 0.39px; margin-bottom: 20px;}.jimu-widget-GRGDrafter .settings-container .label {font-size: 12px; color: #282828; letter-spacing: 0.33px; line-height: 30px;}.jimu-widget-GRGDrafter .style-selector .label {margin: 0 0; max-width: 160px; line-height: 30px; font-size: 12px; vertical-align: middle; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitSelect {width: 100%; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .jimu-color-picker {width: 40px !important; height: 30px !important; border: 1px solid #D7D7D7 !important;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButtonContainer {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitDownArrowButton .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitComboBox .dijitDownArrowButton,.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitDownArrowButton {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitInputInner {padding: 1px 0 0 0; font-size: 12px; font-style: normal; height: 28px; line-height: 28px;}.jimu-widget-GRGDrafter .style-selector .dijitSelectLabel {font-size: 12px;}.jimu-widget-GRGDrafter .SelectStyle .dijitSelectLabel {overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 288px; text-align: left;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButton {background-color: #ffffff; border: 0.75px solid #e2e5e9; border-left-style: none;}.jimu-widget-GRGDrafter .style-selector .dijitSelect,.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitButtonNode {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButton {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitInputField {padding: 0px 10px;}.jimu-widget-GRGDrafter .jimu-image-chooser .display-text {width: 100%; font-size: 12px; color: #4A4A4A; letter-spacing: 0.33px; background-color: #FFF; text-align: center;}.jimu-image-chooser:hover .hint .display-text {color: #FFF;}.jimu-widget-GRGDrafter .dijitTextBoxFocused {border: 1px solid #D7D7D7 !important; box-shadow: 0 0 0 0 !important; outline: 2px solid #24B5CC !important; outline-offset: -2px !important;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputField {padding: 0px 8px !important;}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none) {.jimu-widget-GRGDrafter .dijitTextBox .dijitInputField {padding: 0px;}}.jimu-widget-GRGDrafter .dijitSelectFocused .dijitArrowButton .dijitArrowButtonInner {background-position: -35px 53%;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3e.dijitComboBox.dijitValidationTextBox,.jimu-widget-GRGDrafter .text-size .text-size-group\x3e.dijitSelect.dijitValidationTextBox {width: 80px;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3etable {width: 140px;}.jimu-widget-GRGDrafter .halo-size .halo-size-group\x3e.dijitSelect.dijitValidationTextBox {width: 60px;}.jimu-widget-GRGDrafter .style-selector .setting-items {height: 30px; width: 100%; margin: 10px 0; vertical-align: middle; white-space: nowrap;}.jimu-widget-GRGDrafter .style-selector .setting-wapper {width: calc(100% - 107px);}.jimu-widget-GRGDrafter .style-selector .background-btn,.jimu-widget-GRGDrafter .style-selector .text-color-btn {width: 40px; height: 30px; overflow: hidden;}.jimu-widget-GRGDrafter .style-selector .halo-color-btn {width: 50px; height: 30px; overflow: hidden; padding-left: 5px; padding-right: 5px;}.jimu-widget-GRGDrafter .style-selector .align-group {margin-right: 8px; margin-left: -3px;}.jimu-rtl .jimu-widget-GRGDrafter .style-selector .align-group {margin-right: -3px; margin-left: 8px;}.jimu-widget-GRGDrafter .style-selector .font-group-btns {margin-left: 6px; margin-right: 6px;}.jimu-widget-GRGDrafter .style-selector .align-btn,.jimu-widget-GRGDrafter .style-selector .font-btn {height: 30px; margin: 0 3px;}.jimu-widget-GRGDrafter .style-selector .font-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .align-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .image-btn {width: 120px; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .bold {background: url("./images/font_B.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .bold.selected {background: url("./images/font_B_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic {background: url("./images/font_I.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic.selected {background: url("./images/font_I_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline {background: url("./images/font_U.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline.selected {background: url("./images/font_U_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .halo-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .halo-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .halo-toggle-group .halo-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-top: 6px; margin-left: 5px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.DartTheme .jimu-widget-GRGDrafter .dijitSelectDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled .dijitInputContainer,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled {background-color: #4c4c4c;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipContainer {background-color: #4c4c4c; background-image: -webkit-linear-gradient(bottom, rgb(76, 76, 76) 0px, #4c4c4c 10px); border: 1px solid #ffffff; color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .jimu-widget-subtitle {color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipConnector {background-image: url(images/tooltip.png);}.claro .dijitPopup.dijitTooltipDialogPopup .jimu-input {vertical-align: bottom;}.claro .dijitPopup.dijitTooltipDialogPopup .settingsContainer {margin-top: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup .checkbox.jimu-float-leading.jimu-icon.jimu-icon-checkbox {margin-right: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup span.jimu-widget-subtitle {display: inline-block; margin-bottom: 6px;}.jimu-widget-GRGDrafter .jimu-coordinate-control .settingBtn,.jimu-widget-GRGDrafter .jimu-coordinate-control .drawPointBtn {margin-left: 2px;}.jimu-widget-GRGDrafter .colorPickerEditor .dijitTextBox .dijitInputInner {height: 25px !important}.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitInputField {padding: 2px !important;}',
"*now":function(L){L(['dojo/i18n!*preload*widgets/GriddedReferenceGraphic/nls/Widget*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo dojo/_base/declare jimu/BaseWidget dojo/_base/array dojo/_base/lang dojo/_base/kernel dojo/dom-style dojo/dom-class dojo/dom-construct dojo/on dojo/_base/html dojo/query dojo/topic dojo/json dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/popup dijit/Menu dijit/MenuItem jimu/dijit/Message jimu/dijit/LoadingIndicator jimu/LayerInfos/LayerInfos jimu/LayerStructure jimu/utils jimu/dijit/CoordinateControl esri/arcgis/Portal esri/Color esri/dijit/util/busyIndicator esri/graphic esri/geometry/geometryEngine esri/geometry/Extent esri/geometry/Point esri/geometry/Polyline esri/geometry/webMercatorUtils esri/layers/FeatureLayer esri/layers/GraphicsLayer esri/layers/LabelClass esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/toolbars/draw esri/toolbars/edit esri/renderers/SimpleRenderer ./js/GridSettings ./js/drawGRG ./js/geometry-utils ./js/geometryUtils ./js/mgrs-utils ./js/mgrs ./js/util dijit/focus dojo/keys dojo/dom-attr esri/geometry/projection esri/SpatialReference dojo/string dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/NumberSpinner jimu/dijit/formSelect".split(" "),function(L,
g,t,H,b,h,m,v,B,A,z,c,q,a,r,y,f,d,e,n,p,l,w,x,F,I,J,P,Q,T,Y,Z,W,U,ia,pa,aa,ea,k,E,G,C,X,ca,V,fa,da,la,ja,qa,ha,O,ma,ba,ua,xa){return g([t,r,y],{baseClass:"jimu-widget-GRGDrafter",_lastOpenPanel:"mainPage",_currentOpenPanel:"mainPage",_gridSettingsInstance:null,_cellShape:"default",_labelStartPosition:"lowerLeft",_cellUnits:"meters",_labelType:"alphaNumeric",_labelTypeWithRefSys:"gridReferenceSystem",_labelDirection:"horizontal",_gridOrigin:"center",_referenceSystem:"MGRS",_showLabels:!0,_GRGAreaFillSymbol:null,
_cellTextSymbol:null,angle:0,featureLayerInfo:null,centerPoint:[],geodesicGrid:!0,postMixInProperties:function(){this.nls.common={};b.mixin(this.nls.common,window.jimuNls.common)},constructor:function(u){g.safeMixin(this,u)},postCreate:function(){ba.isSupported()?ba.load():new n({message:this.nls.projectionNotSupported});String.prototype.format||(String.prototype.format=function(){var K=arguments;return this.replace(/{(\d+)}/g,function(N,M){return"undefined"!==typeof K[M]?K[M]:N})});var u=xa.substitute(this.nls.helpIconTooltip,
{number:x.localizeNumber(1E5)});ma.set(this.helpBtnForArea,"title",u);ma.set(this.helpBtnForPt,"title",u);ma.set(this.helpBtnForArea,"aria-label",u);ma.set(this.helpBtnForPt,"aria-label",u);window.isRTL&&"he"===h.locale?(m.set(this.helpBtnForArea,"transform","rotateY(0deg)"),m.set(this.helpBtnForPt,"transform","rotateY(0deg)")):(m.set(this.helpBtnForArea,"transform",""),m.set(this.helpBtnForPt,"transform",""));this._setDijitErrorMsg();this.inherited(arguments);this.extentAreaFillSymbol={type:"esriSFS",
style:"esriSFSSolid",color:[155,155,155,0],outline:{color:[0,0,255,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}};this.pointSymbol={color:[255,0,0,255],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}};this.pointSymbol={color:[255,0,0,255],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}};u=new X(new ea(this.pointSymbol));this._coordinatesLayer=new pa;this._coordinatesLayer.spatialReference=
this.map.spatialReference;this._coordinatesLayer.setRenderer(u);this._graphicsLayerGRGExtent=new pa({id:"graphicsLayerGRGExtent"});this._graphicsLayerGRGTimeExtent=new pa({id:"graphicsLayerGRGTimeExtent"});this._extentSym=new k(this.extentAreaFillSymbol);this._ptSym=new ea(this.pointSymbol);this.GRGArea=new ia({layerDefinition:{geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"grid",alias:"grid",type:"esriFieldTypeString"}],
drawingInfo:{renderer:{type:"simple",symbol:this.gridSymbol},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},format:null,fieldInfos:null,useCodedValues:!1,maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:this._cellTextSymbol}]},extent:{xmin:-1.8746028312877923E7,ymin:-6027547.894280539,xmax:1.882429982984192E7,ymax:1.2561937384669386E7,spatialReference:{wkid:102100}}}},{id:"Gridded-Reference-Graphic",
outFields:["*"],showLabels:!0});this.createGraphicDeleteMenu();this.map.addLayers([this._graphicsLayerGRGTimeExtent,this.GRGArea,this._graphicsLayerGRGExtent,this._coordinatesLayer]);if(this.GRGArea.loaded){var D=l.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");D.enablePopup();this._showLabels&&D.showLabels()}else this.GRGArea.on("load",b.hitch(this,function(){D=l.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");D.enablePopup();this._showLabels&&D.showLabels()}));this.grgPointBySizeCoordTool=
new F({parentWidget:this,label:this.nls.coordInputLabel,input:!0,showCopyButton:!1,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.addPointToolTip,graphicsLayer:this._coordinatesLayer});this.grgPointBySizeCoordTool.placeAt(this.newGRGPointBySizeOriginCoordsContainer);this.grgPointBySizeCoordTool.startup();this.own(A(this.grgPointBySizeCoordTool,"coordinates-deleted",b.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.own(A(this.grgPointBySizeCoordTool,"get-coordinate-complete",
b.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.grgPointByRefSystemCoordTool=new F({parentWidget:this,label:this.nls.coordInputLabel,input:!0,showCopyButton:!1,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.addPointToolTip,graphicsLayer:this._coordinatesLayer});this.grgPointByRefSystemCoordTool.placeAt(this.newGRGPointByRefSystemOriginCoordsContainer);this.grgPointByRefSystemCoordTool.startup();this.own(A(this.grgPointByRefSystemCoordTool,"coordinates-deleted",
b.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.own(A(this.grgPointByRefSystemCoordTool,"get-coordinate-complete",b.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.grgPointByTimeCoordTool=new F({parentWidget:this,label:this.nls.coordInputLabel,input:!0,showCopyButton:!1,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.addPointToolTip,graphicsLayer:this._coordinatesLayer});this.grgPointByTimeCoordTool.placeAt(this.newGRGPointByTimeOriginCoordsContainer);
this.grgPointByTimeCoordTool.startup();this.own(A(this.grgPointByTimeCoordTool,"coordinates-deleted",b.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.own(A(this.grgPointByTimeCoordTool,"get-coordinate-complete",b.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.dt_AreaBySize=new G(this.map);this.dt_AreaByRefSystem=new G(this.map);this.editToolbar=new C(this.map,{uniformScaling:!0,allowAddVertices:!0,allowDeleteVertices:!0});this._initLoading();this._handleClickEvents();
this._createGridSettings();this.util=new qa({appConfig:this.appConfig,nls:this.nls});this.restrictedCharlist="'\"\x3c\x3e{}[]#$%^\x26;:/\\";""===this.config.grg.operationalLayer.name&&(v.add(this.publishNewLayer,"controlGroupHidden"),v.add(this.featureLayerList.domNode,"controlGroupHidden"),this.publishNewLayer.setValue(!0),v.remove(this.addGRGNameArea.domNode,"controlGroupHidden"));this._layerList=this._getAllMapLayers();this._populateSelectList(this.featureLayerList,this._layerList,this.config.grg.operationalLayer.name,
!0);0===this.featureLayerList.options.length&&(this.publishNewLayer.setValue(!0),v.add(this.checkBoxParentContainer,"controlGroupHidden"));this._supportAccessibility();x.isAutoFocusFirstNodeWidget(this)&&ha.focus(this.newGRGAreaButton)},startup:function(){this.inherited(arguments);this.busyIndicator=P.create({target:this.domNode.parentNode.parentNode.parentNode,backgroundOpacity:0});this._setTheme();ma.set(this.grgPointByTimeTimeUnits,"aria-label",this.nls.time+""+this.nls.common.unit);ma.set(this.grgPointByTimeRateUnits,
"aria-label",this.nls.rate+""+this.nls.common.unit);"UTM"===this._referenceSystem&&(this.grgAreaByRefLabelFormat.value="ZS")},resize:function(){var u=c(".dijitValidationTextBoxLabel",this.featureLayerList.domNode);0<u.length&&m.set(u[0],"width",this.grgAreaBySizePublishGRGButton.clientWidth-44+"px")},onOpen:function(){},onClose:function(){this.grgPointBySizeCoordinateFormat&&this.grgPointBySizeCoordinateFormat.domNode.offsetParent&&f.close(this.grgPointBySizeCoordinateFormat);this.grgPointByRefSystemCoordinateFormat&&
this.grgPointByRefSystemCoordinateFormat.domNode.offsetParent&&f.close(this.grgPointByRefSystemCoordinateFormat);this.grgPointByTimeCoordinateFormat&&this.grgPointByTimeCoordinateFormat.domNode.offsetParent&&f.close(this.grgPointByTimeCoordinateFormat)},_initLoading:function(){this.loading=new p({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},_newGRGAreaButtonClicked:function(){v.contains(this.newGRGAreaButton,"GRGNewRightButton")?(z.removeClass(this.fromAreaContainer,"controlGroupHidden"),
z.removeClass(this.newGRGAreaButton,"GRGNewRightButton"),z.addClass(this.newGRGAreaButton,"GRGNewDownButton"),z.addClass(this.fromPointContainer,"controlGroupHidden"),z.removeClass(this.newGRGPointButton,"GRGNewDownButton"),z.addClass(this.newGRGPointButton,"GRGNewRightButton"),this._supportAccessibility(),ha.focus(this.newGRGAreaButton)):(z.addClass(this.fromAreaContainer,"controlGroupHidden"),z.addClass(this.newGRGAreaButton,"GRGNewRightButton"),z.removeClass(this.newGRGAreaButton,"GRGNewDownButton"))},
_newGRGPointButtonClicked:function(){v.contains(this.newGRGPointButton,"GRGNewRightButton")?(z.removeClass(this.fromPointContainer,"controlGroupHidden"),z.removeClass(this.newGRGPointButton,"GRGNewRightButton"),z.addClass(this.newGRGPointButton,"GRGNewDownButton"),z.addClass(this.fromAreaContainer,"controlGroupHidden"),z.removeClass(this.newGRGAreaButton,"GRGNewDownButton"),z.addClass(this.newGRGAreaButton,"GRGNewRightButton"),this._updateLastFocusNode()):(z.addClass(this.fromPointContainer,"controlGroupHidden"),
z.addClass(this.newGRGPointButton,"GRGNewRightButton"),z.removeClass(this.newGRGPointButton,"GRGNewDownButton"),this._supportAccessibility())},_publishPanelBackButtonClicked:function(){this.publishMessage.innerHTML="";this.addGRGNameArea.setValue("");this.addGRGNameArea.reset();this._graphicsLayerGRGExtent.show();this._graphicsLayerGRGTimeExtent.clear();this._showPanel(this._lastOpenPanel)},_grgAreaBySizePublishGRGButtonClicked:function(){var u={name:this.publishNewLayer.checked?this.addGRGNameArea.value:
this.featureLayerList.getValue(),url:"",itemId:"",serviceItemId:""};if(this.publishNewLayer.checked)this._isValidGRGLayerName(u.name)?this.publishMessage.innerHTML="":(v.contains(this.addGRGNameArea.domNode,"controlGroupHidden")||ha.focus(this.addGRGNameArea.domNode),this.addGRGNameArea.set("state","Error"),this.addGRGNameArea.displayMessage(this.nls.missingLayerNameMessage),this.publishMessage.innerHTML=this.nls.missingLayerNameMessage);else{var D=this._layerList.filter(function(K){return K.name===
u.name},this);1===D.length&&(u.url=D[0].url,u.itemId=D[0].id,u.serviceItemId=a.parse(D[0]._json).serviceItemId)}this._initSaveToPortal(u)},_settingsShowLabelsToggleClicked:function(){var u=l.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");(this._showLabels=this.settingsShowLabelsToggle.checked)?u.showLabels():u.hideLabels()},_handleClickEvents:function(){this.own(A(this.newGRGAreaButton,"click",b.hitch(this,this._newGRGAreaButtonClicked)));this.own(A(this.newGRGAreaButton,"keydown",
b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._newGRGAreaButtonClicked()})));this.own(A(this.newGRGPointButton,"click",b.hitch(this,this._newGRGPointButtonClicked)));this.own(A(this.newGRGPointButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._newGRGPointButtonClicked()})));this.own(A(this.newAreaGRGBySizeButton,"click",b.hitch(this,function(){this._showPanel("grgAreaBySize")})));this.own(A(this.newAreaGRGBySizeButton,"keydown",b.hitch(this,
function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._showPanel("grgAreaBySize")})));this.own(A(this.newAreaGRGFromRefSystemButton,"click",b.hitch(this,function(){this._showPanel("grgAreaByRefSystem")})));this.own(A(this.newAreaGRGFromRefSystemButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._showPanel("grgAreaByRefSystem")})));this.own(A(this.newPointGRGBySizeButton,"click",b.hitch(this,function(){this._showPanel("grgPointBySize");this._toggleGrgPointCreateGRGButton()})));
this.own(A(this.newPointGRGBySizeButton,"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this._showPanel("grgPointBySize"),this._toggleGrgPointCreateGRGButton()})));this.own(A(this.newPointGRGFromRefSystemButton,"click",b.hitch(this,function(){this._showPanel("grgPointByRefSystem");this._toggleGrgPointCreateGRGButton()})));this.own(A(this.newPointGRGFromRefSystemButton,"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this._showPanel("grgPointByRefSystem"),
this._toggleGrgPointCreateGRGButton()})));this.own(A(this.newPointGRGFromTimeButton,"click",b.hitch(this,function(){this._showPanel("grgPointByTime");this._toggleGrgPointCreateGRGButton()})));this.own(A(this.newPointGRGFromTimeButton,"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this._showPanel("grgPointByTime"),this._toggleGrgPointCreateGRGButton()})));this.own(A(this.grgAreaBySizePanelBackButton,"click",b.hitch(this,function(){this._resetOnBackToMainPage()})));this.own(A(this.grgAreaBySizePanelBackButton,
"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgAreaBySizeSettingsButton.title=this.nls.lockSettings,z.addClass(this.grgAreaBySizeSettingsButton,"settingsLocked"),z.removeClass(this.grgAreaBySizeSettingsButton,"GRGDrafterSettingsIcon")):(this.own(A(this.grgAreaBySizeSettingsButton,"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(A(this.grgAreaBySizeSettingsButton,
"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(A(this.grgAreaBySizeDrawPolygonIcon,"click",b.hitch(this,this._grgAreaBySizeDrawPolygonIconClicked)));this.own(A(this.grgAreaBySizeDrawPolygonIcon,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._grgAreaBySizeDrawPolygonIconClicked()})));this.own(A(this.grgAreaBySizeDrawExtentIcon,"click",b.hitch(this,
this._grgAreaBySizeDrawExtentIconClicked)));this.own(A(this.grgAreaBySizeDrawExtentIcon,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._grgAreaBySizeDrawExtentIconClicked()})));this.own(A(this.dt_AreaBySize,"draw-complete",b.hitch(this,this._dt_AreaBySizeComplete)));this.own(A(this.grgAreaBySizeCreateGRGButton,"click",b.hitch(this,this._grgAreaBySizeCreateGRGButtonClicked)));this.own(A(this.grgAreaBySizeCreateGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==
O.ENTER&&u.keyCode!==O.SPACE||this._grgAreaBySizeCreateGRGButtonClicked()})));this.own(A(this.grgAreaBySizeClearGRGButton,"click",b.hitch(this,function(){this._clearLayers(!0)})));this.own(A(this.grgAreaBySizeClearGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._clearLayers(!0)})));this.own(A(this.setNumberRowsColumns,"click",b.hitch(this,this._setNumberRowsColumnsCheckBoxChanged)));this.own(A(this.setNumberRowsColumns,"keydown",b.hitch(this,function(u){u.keyCode!==
O.ENTER&&u.keyCode!==O.SPACE||this._setNumberRowsColumnsCheckBoxChanged()})));this.own(A(this.cellHorizontal,"blur",b.hitch(this,function(){this.cellHorizontal.isValid()&&this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(fa.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(A(this.cellVertical,"blur",b.hitch(this,function(){this.cellVertical.isValid()&&
this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(fa.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(A(this.grgAreaBySizeRotation,"keyup",b.hitch(this,function(){setTimeout(b.hitch(this,function(){if(this.grgAreaBySizeRotation.isValid()&&!isNaN(this.grgAreaBySizeRotation.value)&&this._graphicsLayerGRGExtent.graphics[0]){var u=
this.grgAreaBySizeRotation.getValue()-this.angle;u=T.rotate(this._graphicsLayerGRGExtent.graphics[0].geometry,-1*u);this._graphicsLayerGRGExtent.clear();u=new Q(u,this._extentSym);this._graphicsLayerGRGExtent.add(u);this.angle=this.grgAreaBySizeRotation.getValue();this.editToolbar.deactivate()}}),1E3)})));this.own(A(this.grgAreaByRefSystemPanelBackButton,"click",b.hitch(this,function(){this._resetOnBackToMainPage()})));this.own(A(this.grgAreaByRefSystemPanelBackButton,"keydown",b.hitch(this,function(u){u.keyCode!==
O.ENTER&&u.keyCode!==O.SPACE||this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgAreaByRefSystemSettingsButton.title=this.nls.lockSettings,z.addClass(this.grgAreaByRefSystemSettingsButton,"settingsLocked"),z.removeClass(this.grgAreaByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):(this.own(A(this.grgAreaByRefSystemSettingsButton,"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(A(this.grgAreaByRefSystemSettingsButton,
"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(A(this.grgAreaByRefSystemDrawIcon,"click",b.hitch(this,this._grgAreaByRefSystemDrawIconClicked)));this.own(A(this.grgAreaByRefSystemDrawIcon,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._grgAreaByRefSystemDrawIconClicked()})));this.own(A(this.grgAreaByRefSystemCreateGRGButton,"click",b.hitch(this,
this._grgAreaByRefSystemCreateGRGButtonClicked)));this.own(A(this.grgAreaByRefSystemCreateGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._grgAreaByRefSystemCreateGRGButtonClicked()})));this.own(A(this.grgAreaByRefSystemClearGRGButton,"click",b.hitch(this,function(){this._clearLayers(!0)})));this.own(A(this.grgAreaByRefSystemClearGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._clearLayers(!0)})));this.own(A(this.dt_AreaByRefSystem,
"draw-complete",b.hitch(this,function(u){this._dt_AreaByRefSystemComplete(u);ha.focus(this.grgAreaByRefSystemGridSize.domNode)})));this.own(A(this.grgAreaByRefSystemGridSize,"change",b.hitch(this,function(){this._updateLabelFormat(this.grgAreaByRefSystemGridSize,this.grgAreaByRefLabelFormat)})));this.own(A(this.grgPointBySizePanelBackButton,"click",b.hitch(this,function(){this.onClose();this._resetOnBackToMainPage()})));this.own(A(this.grgPointBySizePanelBackButton,"keydown",b.hitch(this,function(u){if(u.keyCode===
O.ENTER||u.keyCode===O.SPACE)this.onClose(),this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointBySizeSettingsButton.title=this.nls.lockSettings,z.addClass(this.grgPointBySizeSettingsButton,"settingsLocked"),z.removeClass(this.grgPointBySizeSettingsButton,"GRGDrafterSettingsIcon")):(this.own(A(this.grgPointBySizeSettingsButton,"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(A(this.grgPointBySizeSettingsButton,
"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(A(this.grgPointBySizeCreateGRGButton,"click",b.hitch(this,this._grgPointBySizeCreateGRGButtonClicked)));this.own(A(this.grgPointBySizeCreateGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._grgPointBySizeCreateGRGButtonClicked()})));this.own(A(this.grgPointBySizeClearGRGButton,"click",
b.hitch(this,function(){this._clearLayers(!0)})));this.own(A(this.grgPointBySizeClearGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._clearLayers(!0)})));this.own(A(this.grgPointBySizeCoordTool.dt,"DrawComplete",b.hitch(this,function(){this._dt_Complete();this._onDrawCompleteToggleCreateGRGButton();ha.focus(this.grgPointBySizeCellHorizontal.domNode)})));this.own(A(this.grgPointByRefSystemCoordTool.dt,"DrawComplete",b.hitch(this,function(){this._dt_Complete();
this._onDrawCompleteToggleCreateGRGButton();ha.focus(this.grgPointByRefSystemGridSize.domNode)})));this.own(A(this.grgPointByTimeCoordTool.dt,"DrawComplete",b.hitch(this,function(){this._dt_Complete();this._onDrawCompleteToggleCreateGRGButton();ha.focus(this.grgPointByTimeTime.domNode)})));this.own(A(this.grgPointByRefSystemPanelBackButton,"click",b.hitch(this,function(){this.onClose();this._resetOnBackToMainPage()})));this.own(A(this.grgPointByRefSystemPanelBackButton,"keydown",b.hitch(this,function(u){if(u.keyCode===
O.ENTER||u.keyCode===O.SPACE)this.onClose(),this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointByRefSystemSettingsButton.title=this.nls.lockSettings,z.addClass(this.grgPointByRefSystemSettingsButton,"settingsLocked"),z.removeClass(this.grgPointByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):(this.own(A(this.grgPointByRefSystemSettingsButton,"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(A(this.grgPointByRefSystemSettingsButton,
"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(A(this.grgPointByRefSystemCreateGRGButton,"click",b.hitch(this,this._grgPointByRefSystemCreateGRGButtonClicked)));this.own(A(this.grgPointByRefSystemCreateGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._grgPointByRefSystemCreateGRGButtonClicked()})));this.own(A(this.grgPointByRefSystemClearGRGButton,
"click",b.hitch(this,function(){this._clearLayers(!0)})));this.own(A(this.grgPointByRefSystemClearGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._clearLayers(!0)})));this.own(A(this.grgPointByRefSystemGridSize,"change",b.hitch(this,function(){this._updateLabelFormat(this.grgPointByRefSystemGridSize,this.grgPointByRefLabelFormat);this._toggleGrgPointCreateGRGButton()})));this.own(A(this.grgPointByTimeBackButton,"click",b.hitch(this,function(){this.onClose();
this._resetOnBackToMainPage()})));this.own(A(this.grgPointByTimeBackButton,"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this.onClose(),this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointByTimeSettingsButton.title=this.nls.lockSettings,z.addClass(this.grgPointByTimeSettingsButton,"settingsLocked"),z.removeClass(this.grgPointByTimeSettingsButton,"GRGDrafterSettingsIcon")):(this.own(A(this.grgPointByTimeSettingsButton,"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);
this._showPanel("settingsPage")}))),this.own(A(this.grgPointByTimeSettingsButton,"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(A(this.grgPointByTimeCreateGRGButton,"click",b.hitch(this,this._grgPointByTimeCreateGRGButtonClicked)));this.own(A(this.grgPointByTimeCreateGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._grgPointByTimeCreateGRGButtonClicked()})));
this.own(A(this.grgPointByTimeClearGRGButton,"click",b.hitch(this,function(){this._clearLayers(!0)})));this.own(A(this.grgPointByTimeClearGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._clearLayers(!0)})));this.own(A(this.setNumberRowsColumnsTime,"click",b.hitch(this,this._setNumberRowsColumnsTimeCheckBoxChanged)));this.own(A(this.setNumberRowsColumnsTime,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._setNumberRowsColumnsTimeCheckBoxChanged()})));
this.own(A(this.gridSettingsPanelBackButton,"click",b.hitch(this,function(){this._gridSettingsInstance.validInputs()&&(this._gridSettingsInstance.onClose(),this._showPanel(this._lastOpenPanel))})));this.own(A(this.gridSettingsPanelBackButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||!this._gridSettingsInstance.validInputs()||(this._gridSettingsInstance.onClose(),this._showPanel(this._lastOpenPanel))})));this.own(A(this.publishPanelBackButton,"click",b.hitch(this,
this._publishPanelBackButtonClicked)));this.own(A(this.publishPanelBackButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._publishPanelBackButtonClicked()})));this.own(A(this.grgAreaBySizePublishGRGButton,"click",b.hitch(this,this._grgAreaBySizePublishGRGButtonClicked)));this.own(A(this.grgAreaBySizePublishGRGButton,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._grgAreaBySizePublishGRGButtonClicked()})));this.own(A(this.settingsShowLabelsToggle,
"click",b.hitch(this,this._settingsShowLabelsToggleClicked)));this.own(A(this.settingsShowLabelsToggle,"keydown",b.hitch(this,function(u){u.keyCode!==O.ENTER&&u.keyCode!==O.SPACE||this._settingsShowLabelsToggleClicked()})));this.own(A(this.featureLayerList,"change",b.hitch(this,function(){this.resize()})));this.own(A(this.editToolbar,"graphic-move-stop",b.hitch(this,function(u){this.centerPoint=u.graphic.geometry.getCentroid()})));this.own(A(this.editToolbar,"rotate-stop",b.hitch(this,function(u){this.angle+=
parseFloat(u.info.angle.toFixed(1));this.grgAreaBySizeRotation.setValue(this.angle)})));this.own(A(this.editToolbar,"vertex-move-stop",b.hitch(this,function(u){this.centerPoint=u.graphic.geometry.getCentroid();this._calculateCellWidthAndHeight(fa.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()))})));this.own(A(this.editToolbar,"scale-stop",b.hitch(this,function(u){this.centerPoint=u.graphic.geometry.getCentroid();this._calculateCellWidthAndHeight(u.graphic.geometry)})));
this.own(A(this.publishNewLayer,"change",b.hitch(this,this._onCheckboxClicked)));q.subscribe("moveMap",b.hitch(this,function(){setTimeout(b.hitch(this,function(){this._moveMap()}),1E3)}))},_containsSupportedCapabilities:function(u){var D=!0;["create","delete","query","update","editing"].forEach(function(K){-1===u.toLowerCase().split(",").indexOf(K)&&(D=!1)});return D},_populateSelectList:function(u,D,K,N){var M=[];N&&(M=H.filter(D,function(R){return"esriGeometryPolygon"===R.geometryType},this));D=
0<M.length?M:D;H.forEach(D,b.hitch(this,function(R){R.url&&"Feature Layer"===R.type&&this._containsSupportedCapabilities(R.capabilities)&&u.addOption({value:R.name,label:x.sanitizeHTML(R.name),selected:!1})}),this);""!==K&&u.set("displayedValue",K)},_getAllMapLayers:function(){var u=[];w.getInstance().traversal(function(D){"undefined"!==typeof D._layerInfo.layerObject.type&&-1===D._layerInfo.layerObject.type.indexOf("tile")&&u.push(D._layerInfo.layerObject)});return u},_onCheckboxClicked:function(){this.publishNewLayer.checked?
(v.add(this.featureLayerList.domNode,"controlGroupHidden"),v.remove(this.addGRGNameArea.domNode,"controlGroupHidden"),this.addGRGNameArea.reset(),this.addGRGNameArea.focus()):(v.add(this.addGRGNameArea.domNode,"controlGroupHidden"),v.remove(this.featureLayerList.domNode,"controlGroupHidden"));this._addLayerToMap=this.publishNewLayer.checked},_isValidGRGLayerName:function(u){var D=!1,K=this._findRestrictedChars(u,this.restrictedCharlist);K&&0<K.length?D=!1:this._isLayerNameValid(u)?u&&0<u.length&&
(D=!0):D=!1;return D},_findRestrictedChars:function(u,D){var K="",N;if(u&&D)for(N=0;N<D.length;N++){var M=D.charAt(N);-1!==u.indexOf(M)&&(" "===M&&(M="spaces"),K=0===K.length?M:K+(" "+M))}return K},_isLayerNameValid:function(u){var D=/^\./,K=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i;return/^[^\\/:\*\?"<>\|()]+$/.test(u)&&!D.test(u)&&!K.test(u)},_updateSettingsPage:function(u){z.removeClass(this._gridSettingsInstance.gridShapeContainer,"controlGroupHidden");z.removeClass(this._gridSettingsInstance.gridUnitsContainer,
"controlGroupHidden");z.removeClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden");z.removeClass(this._gridSettingsInstance.labelStartPositionContainer,"controlGroupHidden");z.removeClass(this._gridSettingsInstance.labelDirectionContainer,"controlGroupHidden");z.addClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");z.addClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden");z.addClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,
"controlGroupHidden");switch(u){case "grgPointBySize":z.removeClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");break;case "grgAreaByRefSystem":case "grgPointByRefSystem":z.addClass(this._gridSettingsInstance.gridShapeContainer,"controlGroupHidden"),z.addClass(this._gridSettingsInstance.gridUnitsContainer,"controlGroupHidden"),z.addClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden"),z.addClass(this._gridSettingsInstance.labelDirectionContainer,"controlGroupHidden"),
z.removeClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden"),z.removeClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,"controlGroupHidden")}},_getNodeByName:function(u){switch(u){case "mainPage":var D=this.mainPageNode;break;case "grgAreaBySize":D=this.grgAreaBySizePageNode;break;case "grgAreaByRefSystem":D=this.grgAreaByRefSystemPageNode;break;case "grgAreaFromNonStandard":D=this.grgAreaFromNonStandardPageNode;break;case "grgPointBySize":D=this.grgPointBySizePageNode;
break;case "grgPointByRefSystem":D=this.grgPointByRefSystemPageNode;break;case "grgPointByTime":D=this.grgPointByTimePageNode;this._gridSettingsInstance.gridOrigin.set("value","center");this._gridOrigin="center";break;case "settingsPage":D=this.settingsPageNode;break;case "publishPage":D=this.publishPageNode}return D},_resetOnBackToMainPage:function(){this._showPanel("mainPage");this._reset();ha.focus(this.newGRGAreaButton)},_reset:function(){this._clearLayers(!0);this.dt_AreaBySize.deactivate();
this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation();L.removeClass(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active");L.removeClass(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active");z.addClass(this.fromAreaContainer,"controlGroupHidden");z.addClass(this.newGRGAreaButton,"GRGNewRightButton");z.removeClass(this.newGRGAreaButton,"GRGNewDownButton");z.addClass(this.fromPointContainer,"controlGroupHidden");z.addClass(this.newGRGPointButton,"GRGNewRightButton");z.removeClass(this.newGRGPointButton,
"GRGNewDownButton")},_clearLayers:function(u){this.GRGArea.clear();this.GRGArea.refresh();this.editToolbar.deactivate();this.grgPointBySizeCoordTool.clear();this.grgPointByRefSystemCoordTool.clear();this.grgPointByTimeCoordTool.clear();this._toggleGrgPointCreateGRGButton();u&&(this._graphicsLayerGRGExtent.clear(),this.angle=0,this.grgAreaBySizeRotation.setValue(this.angle),this.grgAreaBySizeRotation.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.grgAreaBySizeCellWidth.set("disabled",
!0))},_createGridSettings:function(){this._gridSettingsInstance=new ca({nls:this.nls,config:this.config,appConfig:this.appConfig},B.create("div",{},this.gridSettingsNode));this.own(this._gridSettingsInstance.on("gridSettingsChanged",b.hitch(this,function(u){this._cellShape=u.cellShape;this._labelStartPosition=u.labelStartPosition;this._cellUnits=u.cellUnits;this._labelType=u.labelType;this._labelTypeWithRefSys=u.labelTypeWithRefSys;this._labelDirection=u.labelDirection;this._gridOrigin=u.gridOrigin;
this._referenceSystem=u.referenceSystem;"default"===this._cellShape?(this.grgAreaBySizeCellHeight.setValue(this.grgAreaBySizeCellWidth.value),this.grgPointBySizeCellHeight.set("disabled",!1),this.grgPointBySizeCellHeight.setValue(this.grgPointBySizeCellWidth.value)):(this.grgAreaBySizeCellHeight.set("disabled",!0),this.grgAreaBySizeCellHeight.setValue(0),this.grgPointBySizeCellHeight.set("disabled",!0),this.grgPointBySizeCellHeight.setValue(0));"gridReferenceSystem"!==this._labelTypeWithRefSys?(z.addClass(this.grgAreaByRefSystemLabelFormat,
"controlGroupHidden"),z.addClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden")):(z.removeClass(this.grgAreaByRefSystemLabelFormat,"controlGroupHidden"),z.removeClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden"));var D=new J(u.gridFillColor);D.a=1-u.gridFillTransparency;var K=new J(u.gridOutlineColor);K.a=1-u.gridOutlineTransparency;this._GRGAreaFillSymbol={type:"esriSFS",style:"esriSFSSolid",color:D,outline:{color:K,width:2,type:"esriSLS",style:"esriSLSSolid"}};D=new k(this._GRGAreaFillSymbol);
D=new X(D);this.GRGArea.setRenderer(D);D=new J(u.fontSettings.textColor);K=255*(1-u.fontSettings.labelTransparency);var N=0;u.fontSettings.haloOn&&(N=parseInt(u.fontSettings.haloSize,10));var M=new J(u.fontSettings.haloColor);this._cellTextSymbol={type:"esriTS",color:[D.r,D.g,D.b,K],haloSize:N,haloColor:[M.r,M.g,M.b,K],horizontalAlignment:"center",font:{size:parseInt(u.fontSettings.fontSize,10),style:u.fontSettings.font.italic?"italic":"normal",weight:u.fontSettings.font.bold?"bold":"normal",family:u.fontSettings.font.fontFamily,
decoration:u.fontSettings.font.underline?"underline":"none"}};u=new aa({labelExpressionInfo:{value:"{grid}"}});u.symbol=new E(this._cellTextSymbol);this.GRGArea.setLabelingInfo([u]);this.GRGArea.refresh();this._updateLabelFormat(this.grgAreaByRefSystemGridSize,this.grgAreaByRefLabelFormat);this._updateLabelFormat(this.grgPointByRefSystemGridSize,this.grgPointByRefLabelFormat)})));this._gridSettingsInstance.startup();this.own(A(this._gridSettingsInstance.tab,"tabChanged",b.hitch(this,function(){setTimeout(b.hitch(this,
function(){this._updateLastFocusNode()}),200)})))},_showPanel:function(u){if(this._currentOpenPanel){var D=this._getNodeByName(this._currentOpenPanel);v.add(D,"GRGDrafterHidden")}D=this._getNodeByName(u);v.remove(D,"GRGDrafterHidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=u;this._supportAccessibility();"publishPage"!==u||this.isOnScreen||this.resize()},_grgAreaBySizeDrawPolygonIconClicked:function(){this._clearLayers(!0);v.contains(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")&&
(this.dt_AreaBySize.deactivate(),v.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active"));v.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("polygon"),this.own(A(this._graphicsLayerGRGExtent,"click",b.hitch(this,function(u){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(C.MOVE|C.EDIT_VERTICES,u.graphic)}))),this.own(A(this._graphicsLayerGRGExtent,
"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this.editToolbar._defaultOptions.uniformScaling=!0,this.editToolbar.activate(C.MOVE|C.EDIT_VERTICES,u.graphic)}))));v.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")},_grgAreaBySizeDrawExtentIconClicked:function(){this._clearLayers(!0);v.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")&&(this.dt_AreaBySize.deactivate(),v.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active"));v.contains(this.grgAreaBySizeDrawExtentIcon,
"jimu-extent-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("extent"),this.own(A(this._graphicsLayerGRGExtent,"click",b.hitch(this,function(u){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(C.MOVE|C.ROTATE|C.SCALE,u.graphic)}))),this.own(A(this._graphicsLayerGRGExtent,"keydown",b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this.editToolbar._defaultOptions.uniformScaling=
!0,this.editToolbar.activate(C.MOVE|C.ROTATE|C.SCALE,u.graphic)}))));v.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")},_grgPointBySizeDrawButtonClicked:function(){v.contains(this.grgPointBySizeAddPointBtn,"jimu-edit-active")?this.map.enableMapNavigation():(this._clearLayers(!0),this.grgPointBySizeCoordTool.manualInput=!1,this.map.disableMapNavigation());v.toggle(this.grgPointBySizeAddPointBtn,"jimu-edit-active")},_grgAreaByRefSystemDrawIconClicked:function(){v.contains(this.grgAreaByRefSystemDrawIcon,
"jimu-extent-active")?(this.dt_AreaByRefSystem.deactivate(),this.map.enableMapNavigation()):(this._graphicsLayerGRGExtent.clear(),this.grgPointBySizeCoordTool.manualInput=!1,this.map.disableMapNavigation(),this.dt_AreaByRefSystem.activate("extent"),this.editToolbar.deactivate(),this.own(A(this._graphicsLayerGRGExtent,"click",b.hitch(this,function(u){this.editToolbar._defaultOptions.uniformScaling=!1;this.editToolbar.activate(C.MOVE|C.SCALE,u.graphic)}))),this.own(A(this._graphicsLayerGRGExtent,"keydown",
b.hitch(this,function(u){if(u.keyCode===O.ENTER||u.keyCode===O.SPACE)this.editToolbar._defaultOptions.uniformScaling=!1,this.editToolbar.activate(C.MOVE|C.SCALE,u.graphic)}))));v.toggle(this.grgAreaByRefSystemDrawIcon,"jimu-extent-active")},_dt_AreaBySizeComplete:function(u){this.map.enableMapNavigation();this.dt_AreaBySize.deactivate();if("extent"===u.geometry.type){u.geometry=fa.extentToPolygon(u.geometry);var D=new Q(u.geometry,this._extentSym);this.grgAreaBySizeRotation.set("disabled",!1);v.toggle(this.grgAreaBySizeDrawExtentIcon,
"jimu-extent-active")}else D=new Q(u.geometry,this._extentSym),u.geometry=fa.extentToPolygon(u.geometry.getExtent()),v.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active");"default"===this._cellShape&&this.grgAreaBySizeCellHeight.set("disabled",!1);this.grgAreaBySizeCellWidth.set("disabled",!1);ha.focus(this.grgAreaBySizeCellWidth.domNode);this._graphicsLayerGRGExtent.add(D);this.centerPoint=u.geometry.getCentroid();this._calculateCellWidthAndHeight(u.geometry)},_calculateCellWidthAndHeight:function(u){4326===
u.spatialReference.wkid&&(u=U.geographicToWebMercator(u));var D=T.geodesicLength(new W({paths:[[[u.getPoint(0,0).x,u.getPoint(0,0).y],[u.getPoint(0,1).x,u.getPoint(0,1).y]]],spatialReference:u.spatialReference}),this._cellUnits)/this.cellHorizontal.value,K=T.geodesicLength(new W({paths:[[[u.getPoint(0,0).x,u.getPoint(0,0).y],[u.getPoint(0,3).x,u.getPoint(0,3).y]]],spatialReference:u.spatialReference}),this._cellUnits)/this.cellVertical.value,N=this.util.convertToMeters(D,this._cellUnits),M=this.util.convertToMeters(K,
this._cellUnits);2E4>N&&(2E4>M&&"hexagon"!==this._cellShape||"hexagon"===this._cellShape)?(this.geodesicGrid=!0,this.grgAreaBySizeCellWidth.setValue(D),"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(K):this.grgAreaBySizeCellHeight.setValue(0)):(this.geodesicGrid=!1,this.grgAreaBySizeCellWidth.setValue(T.distance(u.getPoint(0,0),u.getPoint(0,1),this._cellUnits)/this.cellHorizontal.value),"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(T.distance(u.getPoint(0,0),
u.getPoint(0,3),this._cellUnits)/this.cellVertical.value):this.grgAreaBySizeCellHeight.setValue(0))},_dt_Complete:function(){this.grgPointBySizeCoordTool.deactivateDrawTool();this.grgPointByRefSystemCoordTool.deactivateDrawTool();this.grgPointByTimeCoordTool.deactivateDrawTool();this.map.enableMapNavigation()},_dt_AreaByRefSystemComplete:function(u){v.remove(this.grgAreaByRefSystemDrawIcon,"jimu-extent-active");u=new Q(fa.extentToPolygon(u.geometry),this._extentSym);this._graphicsLayerGRGExtent.add(u);
this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation()},_grgPointBySizeCoordFormatPopupApplyButtonClicked:function(){var u=this.grgPointBySizeCoordinateFormat.content.formats[this.grgPointBySizeCoordinateFormat.content.ct],D=u.defaultFormat,K=this.grgPointBySizeCoordinateFormat.content.frmtSelect.get("value");u.useCustom&&(D=u.customFormat);this.grgPointBySizeCoordTool.inputCoordinate.set("formatPrefix",this.grgPointBySizeCoordinateFormat.content.addSignChkBox.checked);this.grgPointBySizeCoordTool.inputCoordinate.set("formatString",
D);this.grgPointBySizeCoordTool.inputCoordinate.set("formatType",K);this._grgPointBySizeSetCoordLabel(K);f.close(this.grgPointBySizeCoordinateFormat)},_setNumberRowsColumnsCheckBoxChanged:function(){this.setNumberRowsColumns.checked?(this.grgAreaBySizeCellWidth.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.cellHorizontal.set("disabled",!1),this.cellVertical.set("disabled",!1)):(this.cellHorizontal.set("disabled",!0),this.cellVertical.set("disabled",!0));this._clearLayers(!0)},
_setNumberRowsColumnsTimeCheckBoxChanged:function(){this.setNumberRowsColumnsTime.checked?(this.grgPointByTimeCellWidth.set("disabled",!0),this.grgPointByTimeCellHeight.set("disabled",!0),this.grgPointByTimeCellHorizontal.set("disabled",!1),this.grgPointByTimeCellVertical.set("disabled",!1)):(this.grgPointByTimeCellHorizontal.set("disabled",!0),this.grgPointByTimeCellVertical.set("disabled",!0),this.grgPointByTimeCellWidth.set("disabled",!1),this.grgPointByTimeCellHeight.set("disabled",!1));this._clearLayers(!0)},
_grgAreaBySizeCreateGRGButtonClicked:function(){var u=new ua(4326);if(this._graphicsLayerGRGExtent.graphics[0]&&this.grgAreaBySizeCellWidth.isValid()&&this.grgAreaBySizeCellHeight.isValid()&&this.grgAreaBySizeRotation.isValid()){this._clearLayers(!1);u=ba.isLoaded()?ba.project(this._graphicsLayerGRGExtent.graphics[0].geometry,u):this._graphicsLayerGRGExtent.graphics[0].geometry;var D=0===this.angle?fa.extentToPolygon(u.getExtent()):u;4326===D.spatialReference.wkid&&(D=U.geographicToWebMercator(D));
if(this.geodesicGrid){var K=T.geodesicLength(new W({paths:[[[D.getPoint(0,0).x,D.getPoint(0,0).y],[D.getPoint(0,1).x,D.getPoint(0,1).y]]],spatialReference:D.spatialReference}),"meters");var N=T.geodesicLength(new W({paths:[[[D.getPoint(0,0).x,D.getPoint(0,0).y],[D.getPoint(0,3).x,D.getPoint(0,3).y]]],spatialReference:D.spatialReference}),"meters")}else K=T.distance(D.getPoint(0,0),D.getPoint(0,1),"meters"),N=T.distance(D.getPoint(0,0),D.getPoint(0,3),"meters");u=this.util.convertToMeters(this.grgAreaBySizeCellWidth.value,
this._cellUnits);var M=this.util.convertToMeters(this.grgAreaBySizeCellHeight.value,this._cellUnits);K=Math.round(K/u);N="default"===this._cellShape?Math.round(N/M):Math.round(N/u/Math.cos(30*Math.PI/180))+1;V.checkGridSize(K,N)?(D=D.getCentroid(),u=V.createGRG(K,N,D,u,M,this.angle,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,"center",this.geodesicGrid,this.map,ba),this.GRGArea.applyEdits(u,null,null),this.map.setExtent(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().expand(2),
!1),this._graphicsLayerGRGExtent.clear(),this._showPanel("publishPage")):new n({message:this.nls.tooManyCellsErrorMessage})}},_grgPointBySizeCreateGRGButtonClicked:function(){if(!v.contains(this.grgPointBySizeCreateGRGButton,"jimu-state-disabled"))if(this.grgPointBySizeCellWidth.isValid()&&this.grgPointBySizeCellHeight.isValid()&&this.gridAnglePoint.isValid()){var u=U.geographicToWebMercator(this.grgPointBySizeCoordTool.getMapCoordinateDD()),D=this.util.convertToMeters(this.grgPointBySizeCellWidth.value,
this._cellUnits),K=this.util.convertToMeters(this.grgPointBySizeCellHeight.value,this._cellUnits);this.geodesicGrid=2E4>D&&(2E4>K&&"hexagon"!==this._cellShape||"hexagon"===this._cellShape)?!0:!1;if(V.checkGridSize(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value)){u=V.createGRG(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value,u,D,K,this.gridAnglePoint.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,this._gridOrigin,
this.geodesicGrid,this.map,ba);this.GRGArea.applyEdits(u,null,null);D=[];for(K=0;K<u.length;K++)D.push(u[K].geometry);u=T.union(D);this.map.setExtent(u.getExtent().expand(2),!1);this._showPanel("publishPage")}else new n({message:this.nls.tooManyCellsErrorMessage})}else new n({message:this.nls.missingParametersMessage})},_grgPointByTimeCreateGRGButtonClicked:function(){if(!v.contains(this.grgPointByTimeCreateGRGButton,"jimu-state-disabled"))if(this.grgPointByTimeTime.isValid()&&this.grgPointByTimeRate.isValid()&&
this.grgPointByTimeRotation.isValid()){var u=this.grgPointByTimeTime.get("value")*this.grgPointByTimeTimeUnits.get("value");var D=this.grgPointByTimeRate.get("value")*this.grgPointByTimeRateUnits.value.split(";")[0]/this.grgPointByTimeRateUnits.value.split(";")[1];D*=u;u=U.geographicToWebMercator(this.grgPointByTimeCoordTool.getMapCoordinateDD());if(2E5>D){this.geodesicGrid=!0;var K=T.geodesicBuffer(u,D,9001);D=fa.extentToPolygon(K.getExtent());D=T.geodesicLength(new W({paths:[[[D.getPoint(0,0).x,
D.getPoint(0,0).y],[D.getPoint(0,1).x,D.getPoint(0,1).y]]],spatialReference:D.spatialReference}),"meters")}else this.geodesicGrid=!1,K=T.buffer(u,D,9001),D=fa.extentToPolygon(K.getExtent()),D=T.distance(D.getPoint(0,0),D.getPoint(0,1),"meters");K=new Q(K,this._extentSym);this._graphicsLayerGRGTimeExtent.add(K);if(this.setNumberRowsColumnsTime.checked)if(this.grgPointByTimeCellHorizontal.isValid()&&this.grgPointByTimeCellVertical.isValid()){K=D/this.grgPointByTimeCellHorizontal.value;var N=D/this.grgPointByTimeCellVertical.value}else{new n({message:this.nls.invalidHorizontalVerticalParametersMessage});
return}else if(this.grgPointByTimeCellWidth.isValid()&&this.grgPointByTimeCellHeight.isValid())K=this.util.convertToMeters(this.grgPointByTimeCellWidth.value,this._cellUnits),N=this.util.convertToMeters(this.grgPointByTimeCellHeight.value,this._cellUnits);else{new n({message:this.nls.invalidWidthHeightParametersMessage});return}var M=Math.round(D/K);D="default"===this._cellShape?Math.round(D/N):Math.round(D/K/Math.cos(30*Math.PI/180))+1;1>M&&(M=1);1>D&&(D=1);if(V.checkGridSize(M,D)){u=V.createGRG(M,
D,u,K,N,this.grgPointByTimeRotation.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,this._gridOrigin,this.geodesicGrid,this.map,ba);this.GRGArea.applyEdits(u,null,null);D=[];for(K=0;K<u.length;K++)D.push(u[K].geometry);u=T.union(D);this.map.setExtent(u.getExtent().expand(2),!1);this._showPanel("publishPage")}else new n({message:this.nls.tooManyCellsErrorMessage})}else new n({message:this.nls.missingOriginParametersMessage})},_grgPointByRefSystemCreateGRGButtonClicked:function(){if(!v.contains(this.grgPointByRefSystemCreateGRGButton,
"jimu-state-disabled")){var u=[];var D=this.grgPointByRefSystemCoordTool.getMapCoordinateDD();this._clearLayers(!1);if(V.checkGridSize(this.grgPointByRefCellHorizontal.getValue(),this.grgPointByRefCellVertical.getValue())){if(this.grgPointByRefCellHorizontal.isValid()&&this.grgPointByRefCellVertical.isValid()){switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":var K=0>D.x?D.x-D.x%6-6:D.x-D.x%6;var N=0>D.y?D.y-D.y%8-8:D.y-D.y%8;break;case "100000":var M=ja.LLtoMGRS(D.y,D.x,5);M=M.substring(0,
M.length-10);M+="0000000000";break;case "10000":M=ja.LLtoMGRS(D.y,D.x,1);break;case "1000":M=ja.LLtoMGRS(D.y,D.x,2);break;case "100":M=ja.LLtoMGRS(D.y,D.x,3);break;case "10":M=ja.LLtoMGRS(D.y,D.x,4)}if("UTM"===this.grgPointByRefSystemGridSize.getValue())M=new Z(K,N),K=6*this.grgPointByRefCellHorizontal.getValue(),D=8*this.grgPointByRefCellVertical.getValue(),N=new Y({xmin:M.x,ymin:M.y,xmax:M.x+K,ymax:M.y+D,spatialReference:{wkid:4326}});else{M=ja.USNGtoPoint(M);if(isNaN(M.x)||isNaN(M.y)){new n({message:this.nls.grgPolarOriginError});
return}K=this.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellHorizontal.getValue();D=this.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellVertical.getValue();K=da.getDestinationPoint(M,90,K);K=da.getDestinationPoint(K,0,D);D=this.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)/5;M=da.getDestinationPoint(M,45,D);K=da.getDestinationPoint(K,225,D);N=new Y({xmin:M.x,
ymin:M.y,xmax:K.x,ymax:K.y,spatialReference:{wkid:4326}})}V.checkPolarRegion(N)&&new n({message:this.nls.grgPolarRegionError});N=U.geographicToWebMercator(N);K=la.zonesFromExtent(N,this.map);M=[];switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":for(D=0;D<K.length;D++){N=ba.isLoaded()?new Q(ba.project(K[D].gridPolygon.unclippedPolygon,this.map.spatialReference)):4326!==this.map.spatialReference.wkid?new Q(U.geographicToWebMercator(K[D].gridPolygon.unclippedPolygon)):new Q(K[D].gridPolygon.unclippedPolygon);
var R=this.grgPointByRefLabelFormat.value;if("UTM"===this._referenceSystem){var S=ja.LLtoUTM(K[D].nonPolarGridZone.extent.ymin,K[D].nonPolarGridZone.extent.xmin,K[D].utmZone)[3];S.s=S.s.trim();R=R.replace(/S/,S.s[S.s.length-1]);R=R.replace(/Z/,S.z)}else R=R.replace(/Z/,K[D].gridPolygon.text);N.setAttributes({grid:R});M.push(N);u.push(N.geometry)}break;default:K=la.processZonePolygons(K,this.map,N);for(R=1E4;R>=this.grgPointByRefSystemGridSize.getValue();){S=[];for(D=0;D<K.length;D++)S=S.concat(la.handleGridSquares(K[D],
this.map,R,N));K=[];K=S;R/=10}for(D=0;D<K.length;D++)N=ba.isLoaded()?new Q(ba.project(K[D].clippedPolyToUTMZone,this.map.spatialReference)):this.grgAreaByRefSystemClipToggle.checked?4326!==this.map.spatialReference.wkid?new Q(K[D].clippedPolygon):new Q(U.webMercatorToGeographic(K[D].clippedPolygon)):4326!==this.map.spatialReference.wkid?new Q(K[D].clippedPolyToUTMZone):new Q(U.webMercatorToGeographic(K[D].clippedPolyToUTMZone)),"gridReferenceSystem"===this._labelTypeWithRefSys&&(R=this.grgPointByRefLabelFormat.value,
"UTM"===this._referenceSystem?(S=ba.project(N.geometry.getExtent(),new ua(4326)),S=ja.LLtoUTM(S.ymin,S.xmin,K[D].utmZone)[3],S.s=S.s.trim(),R=R.replace(/Y/,S.y),R=R.replace(/X/,S.x),R=R.replace(/S/,S.s[S.s.length-1]),R=R.replace(/Z/,S.z)):(R=R.replace(/Y/,K[D].y),R=R.replace(/X/,K[D].x),R=R.replace(/S/,K[D].GZD),R=R.replace(/Z/,K[D].utmZone+K[D].latitudeZone)),N.setAttributes({grid:R}),M.push(N)),u.push(N.geometry)}M=this._trimProcessZonesPolygons(M,this.grgPointByRefCellHorizontal.getValue(),this.grgPointByRefCellVertical.getValue());
0<u.length&&(D=T.union(u),this.map.setExtent(D.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&(M=V.labelReferenceGrid(u,this._labelTypeWithRefSys,this._labelStartPosition,this.grgPointByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(M,null,null);this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}}else new n({message:this.nls.tooManyCellsErrorMessage})}},_trimProcessZonesPolygons:function(u,D,K){function N(oa,sa){for(var ta=null,ka=0;ka<u.length;ka++)if(!T.equals(oa.geometry,
u[ka].geometry)&&T.intersects(oa.geometry,u[ka].geometry)){var ra=da.getRotationAngleBetweenPoints(oa.geometry.getCentroid(),u[ka].geometry.getCentroid());if(sa){if(80<=ra&&100>=ra){ta=u[ka];break}}else if(350<=ra||10>=ra){ta=u[ka];break}}return ta}for(var M=u[0],R=N(M,!0),S=1,na=[];R;)S===D&&na.push(R),R=N(R,!0),S++;S=1;H.forEach(na,function(oa){for(R=N(oa,!1);R;)na.push(R),R=N(R,!1),S++},this);R=N(M,!1);S=1;for(D=na.length;R;)S===K&&na.push(R),R=N(R,!1),S++;na.length>D&&H.forEach(na.slice(D,na.length),
function(oa){for(R=N(oa,!0);R;)na.push(R),R=N(R,!0)},this);K=[];for(D=u.length-1;0<=D;D--)for(M=0;M<na.length;M++)u[D]&&u[D].hasOwnProperty("geometry")&&na[M]&&na[M].hasOwnProperty("geometry")&&T.equals(u[D].geometry,na[M].geometry)&&K.push(D);K.forEach(function(oa){u.splice(oa,1)});return u},_grgAreaByRefSystemCreateGRGButtonClicked:function(){if(this._graphicsLayerGRGExtent.graphics[0]){var u=ba.isLoaded()?ba.project(this._graphicsLayerGRGExtent.graphics[0].geometry,new ua(4326)):this._graphicsLayerGRGExtent.graphics[0].geometry;
var D=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getWidth(),10)/this.grgAreaByRefSystemGridSize.getValue(),K=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getHeight(),10)/this.grgAreaByRefSystemGridSize.getValue();if(V.checkGridSize(D,K)||"UTM"===this.grgAreaByRefSystemGridSize.getValue()){4326!==this.map.spatialReference.wkid?V.checkPolarRegion(U.webMercatorToGeographic(this._graphicsLayerGRGExtent.graphics[0].geometry))&&new n({message:this.nls.grgPolarRegionError}):
V.checkPolarRegion(this._graphicsLayerGRGExtent.graphics[0].geometry)&&new n({message:this.nls.grgPolarRegionError});D=[];this._clearLayers(!1);var N=la.zonesFromExtent(u.getExtent(),this.map);K=[];switch(this.grgAreaByRefSystemGridSize.getValue()){case "UTM":for(S=0;S<N.length;S++){u=this.grgAreaByRefSystemClipToggle.checked?new Q(ba.isLoaded()?ba.project(N[S].gridPolygon.clippedPolygon,this.map.spatialReference):N[S].gridPolygon.clippedPolygon):new Q(ba.isLoaded()?ba.project(N[S].gridPolygon.unclippedPolygon,
this.map.spatialReference):N[S].gridPolygon.unclippedPolygon);D.push(u.geometry);var M=this.grgAreaByRefLabelFormat.value;if("UTM"===this._referenceSystem){var R=ja.LLtoUTM(N[S].nonPolarGridZone.extent.ymin,N[S].nonPolarGridZone.extent.xmin,N[S].utmZone)[3];R.s=R.s.trim();M=M.replace(/S/,R.s[R.s.length-1]);M=M.replace(/Z/,R.z)}else M=M.replace(/Z/,N[S].gridPolygon.text);u.setAttributes({grid:M});K.push(u)}break;default:N=la.processZonePolygons(N,this.map,u.getExtent());for(M=1E4;M>=this.grgAreaByRefSystemGridSize.getValue();){R=
[];for(S=0;S<N.length;S++)R=R.concat(la.handleGridSquares(N[S],this.map,M,u.getExtent()));N=[];N=R;M/=10}for(var S=0;S<N.length;S++)u=this.grgAreaByRefSystemClipToggle.checked?ba.isLoaded()?new Q(ba.project(N[S].clippedPolygon,this.map.spatialReference)):new Q(4326!==this.map.spatialReference.wkid?N[S].clippedPolygon:U.webMercatorToGeographic(N[S].clippedPolygon)):ba.isLoaded()?new Q(ba.project(N[S].clippedPolyToUTMZone,this.map.spatialReference)):new Q(4326!==this.map.spatialReference.wkid?N[S].clippedPolyToUTMZone:
U.webMercatorToGeographic(N[S].clippedPolyToUTMZone)),D.push(u.geometry),"gridReferenceSystem"===this._labelTypeWithRefSys&&(M=this.grgAreaByRefLabelFormat.value,"UTM"===this._referenceSystem?(R=ba.project(u.geometry.getExtent(),new ua(4326)),R=ja.LLtoUTM(R.ymin,R.xmin,N[S].utmZone)[3],R.s=R.s.trim(),M=M.replace(/Y/,R.y),M=M.replace(/X/,R.x),M=M.replace(/S/,R.s[R.s.length-1]),M=M.replace(/Z/,R.z)):(M=M.replace(/Y/,N[S].y),M=M.replace(/X/,N[S].x),M=M.replace(/S/,N[S].GZD),M=M.replace(/Z/,N[S].utmZone+
N[S].latitudeZone)),u.setAttributes({grid:M}),K.push(u))}0<D.length&&(S=T.union(D),this.map.setExtent(S.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&(K=V.labelReferenceGrid(D,this._labelTypeWithRefSys,this._labelStartPosition,this.grgAreaByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(K,null,null);this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}else new n({message:this.nls.tooManyCellsErrorMessage})}},createGraphicDeleteMenu:function(){var u,
D=new d({});D.addChild(new e({label:this.nls.deleteBtn,onClick:b.hitch(this,function(){this.GRGArea.remove(u);this.GRGArea.refresh()})}));D.startup();this.own(this.GRGArea.on("mouse-over",function(K){u=K.graphic;D.bindDomNode(K.graphic.getDojoShape().getNode())}));this.own(this.GRGArea.on("mouse-out",function(K){D.unBindDomNode(K.graphic.getDojoShape().getNode())}))},_removeStyleFile:function(u,D){var K=null;K="js"===D?"src":"css"===D?"href":"none";D=document.getElementsByTagName("js"===D?"script":
"css"===D?"link":"none");for(var N=D.length;0<=N;N--)D[N]&&null!==D[N].getAttribute(K)&&-1!==D[N].getAttribute(K).indexOf(u)&&D[N].parentNode.removeChild(D[N])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?x.loadStyleLink("darkOverrideCSS",this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===this.appConfig.theme.styles[0]?x.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+
"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css")},destroy:function(){this.inherited(arguments);this.map.removeLayer(this._graphicsLayerGRGExtent);this.map.removeLayer(this.GRGArea)},_initSaveToPortal:function(u){var D=u.name;(new I.Portal(this.appConfig.portalUrl)).signIn().then(b.hitch(this,function(K){var N=K.credential.token,M=K.orgId,R=K.username;if("org_user"===K.role)this.publishMessage.innerHTML=x.sanitizeHTML(this.nls.createService.format(this.nls.userRole)),
this._updateLastFocusNode();else if(u.url){K=new ia(u.url+"?token\x3d"+N,{id:u.name,outFields:["*"]});K._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:u.itemId}};var S=[];H.forEach(this.GRGArea.graphics,function(oa){S.push(new Q(oa.geometry,null,{grid:oa.attributes.grid}))},this);K.applyEdits(S,null,null).then(b.hitch(this,function(){this._reset()})).otherwise(b.hitch(this,function(){this._reset()}));q.publish("moveMap",!1);this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+
this.nls.successfullyPublished+'" href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+u.serviceItemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._updateLastFocusNode()}else{var na=this.appConfig.portalUrl+"sharing/content/users/"+R+"/createService";V.isNameAvailable(this.appConfig.portalUrl+"sharing/rest/portals/"+M+"/isServiceNameAvailable",N,D).then(b.hitch(this,function(oa){oa.available?(this.busyIndicator.show(),V.createFeatureService(na,N,V.getFeatureServiceParams(D,this.map)).then(b.hitch(this,
function(sa){if(sa.success){var ta=sa.serviceurl.replace(RegExp("rest","g"),"rest/admin")+"/addToDefinition";V.addDefinitionToService(ta,N,V.getLayerParams(D,this.map,this._cellTextSymbol,this._GRGAreaFillSymbol)).then(b.hitch(this,function(ka){if(ka.success){ka=new ia(sa.serviceurl+"/0?token\x3d"+N,{id:D,outFields:["*"]});ka._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:sa.itemId}};this.map.addLayer(ka);if(ka.loaded){var ra=l.getInstanceSync().getLayerInfoById(D);ra.enablePopup();
this._showLabels&&ra.showLabels()}else ka.on("load",b.hitch(this,function(){ra=l.getInstanceSync().getLayerInfoById(D);ra.enablePopup();this._showLabels&&ra.showLabels()}));var va=[];H.forEach(this.GRGArea.graphics,function(wa){va.push(new Q(wa.geometry,null,{grid:wa.attributes.grid}))},this);ka.applyEdits(va,null,null).then(b.hitch(this,function(){this._reset()})).otherwise(b.hitch(this,function(){this._reset()}));this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+
this.nls.successfullyPublished+'" href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+sa.itemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._updateLastFocusNode()}}),b.hitch(this,function(ka){this.busyIndicator.hide();this.publishMessage.innerHTML=x.sanitizeHTML(this.nls.addToDefinition.format(ka.message));this._updateLastFocusNode()}))}else this.busyIndicator.hide(),this.publishMessage.innerHTML=x.sanitizeHTML(this.nls.unableToCreate.format(D)),this._updateLastFocusNode()}),b.hitch(this,
function(sa){this.busyIndicator.hide();this.publishMessage.innerHTML=x.sanitizeHTML(this.nls.createService.format(sa.message));this._updateLastFocusNode()}))):(this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.layerNameExists);this._updateLastFocusNode()}))}}),b.hitch(this,function(K){this.publishMessage.innerHTML="ERROR: Error in opening workspace"===K.message?this.nls.publishWorskpaceError:K.message;this._updateLastFocusNode()}))},_supportAccessibility:function(){"mainPage"===this._currentOpenPanel?
(x.initFirstFocusNode(this.domNode,this.newGRGAreaButton),x.initLastFocusNode(this.domNode,this.newGRGPointButton)):"grgAreaBySize"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgAreaBySizePanelBackButton,this.grgAreaBySizeClearGRGButton):"grgAreaByRefSystem"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgAreaByRefSystemPanelBackButton,this.grgAreaByRefSystemClearGRGButton):"grgPointBySize"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgPointBySizePanelBackButton,
this.grgPointBySizeClearGRGButton):"grgPointByRefSystem"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgPointByRefSystemPanelBackButton,this.grgPointByRefSystemClearGRGButton):"grgPointByTime"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgPointByTimeBackButton,this.grgPointByTimeClearGRGButton):"publishPage"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.publishPanelBackButton,this.grgAreaBySizePublishGRGButton):"settingsPage"===this._currentOpenPanel&&
(x.initFirstFocusNode(this.domNode,this.gridSettingsPanelBackButton),this._checkGridSettingTabSelected(),this._updateLastFocusNode())},_updateLastFocusNode:function(){if("publishPage"===this._currentOpenPanel){x.initLastFocusNode(this.domNode,this.grgAreaBySizePublishGRGButton);var u=c("a",this.publishMessage)[0];""!==this.publishMessage.innerHTML&&u&&(x.initLastFocusNode(this.domNode,this.publishMessage),ha.focus(u))}else"settingsPage"===this._currentOpenPanel?this._checkGridSettingTabSelected()?
("grgPointByRefSystem"===this._lastOpenPanel||"grgAreaByRefSystem"===this._lastOpenPanel?ha.focus(this._gridSettingsInstance.referenceSystem.domNode):ha.focus(this._gridSettingsInstance.cellShape.domNode),x.initLastFocusNode(this.domNode,this._gridSettingsInstance.gridFillColorPicker.spinner.domNode)):(ha.focus(this._gridSettingsInstance.labelStartPosition.domNode),x.initLastFocusNode(this.domNode,this._gridSettingsInstance.fontSetting.showHalo.domNode)):"mainPage"===this._currentOpenPanel&&x.initLastFocusNode(this.domNode,
this.newPointGRGFromTimeButton)},_checkGridSettingTabSelected:function(){return"none"===m.get(this._gridSettingsInstance.gridTab,"display")?!1:!0},_moveMap:function(){var u=this.map.spatialReference,D=new Y;D.xmin=this.map.extent.xmin+1E-4;D.ymin=this.map.extent.ymin;D.xmax=this.map.extent.xmax;D.ymax=this.map.extent.ymax;D.spatialReference=u;this.map.setExtent(D)},_setFirstAndLastFocusNode:function(u,D){x.initFirstFocusNode(this.domNode,u);ha.focus(u);x.initLastFocusNode(this.domNode,D)},_toggleGrgPointCreateGRGButton:function(){"grgPointBySize"===
this._currentOpenPanel&&(this.grgPointBySizeCoordTool.getMapCoordinateDD()?(v.remove(this.grgPointBySizeCreateGRGButton,"jimu-state-disabled"),ma.set(this.grgPointBySizeCreateGRGButton,"tabindex",0)):(v.add(this.grgPointBySizeCreateGRGButton,"jimu-state-disabled"),ma.set(this.grgPointBySizeCreateGRGButton,"tabindex",-1)));"grgPointByRefSystem"===this._currentOpenPanel&&(this.grgPointByRefSystemCoordTool.getMapCoordinateDD()?(v.remove(this.grgPointByRefSystemCreateGRGButton,"jimu-state-disabled"),
ma.set(this.grgPointByRefSystemCreateGRGButton,"tabindex",0)):(v.add(this.grgPointByRefSystemCreateGRGButton,"jimu-state-disabled"),ma.set(this.grgPointByRefSystemCreateGRGButton,"tabindex",-1)));"grgPointByTime"===this._currentOpenPanel&&(this.grgPointByTimeCoordTool.getMapCoordinateDD()?(v.remove(this.grgPointByTimeCreateGRGButton,"jimu-state-disabled"),ma.set(this.grgPointByTimeCreateGRGButton,"tabindex",0)):(v.add(this.grgPointByTimeCreateGRGButton,"jimu-state-disabled"),ma.set(this.grgPointByTimeCreateGRGButton,
"tabindex",-1)))},_onDrawCompleteToggleCreateGRGButton:function(){setTimeout(b.hitch(this,function(){this._toggleGrgPointCreateGRGButton()}),500)},_updateLabelFormat:function(u,D){switch(u.getValue()){case "UTM":D.value="UTM"===this._referenceSystem?"ZS":"Z";break;case "100000":D.value="UTM"===this._referenceSystem?"ZSXY":"ZS";break;default:D.value="ZSXY"}},_setDijitErrorMsg:function(){this.grgAreaBySizeRotation.invalidMessage=this.nls.invalidNumberMessage;this.grgAreaBySizeRotation.rangeMessage=
this.nls.gridAngleInvalidRangeMessage;this.gridAnglePoint.invalidMessage=this.nls.invalidNumberMessage;this.gridAnglePoint.rangeMessage=this.nls.gridAngleInvalidRangeMessage;this.grgPointByTimeRotation.invalidMessage=this.nls.invalidNumberMessage;this.grgPointByTimeRotation.rangeMessage=this.nls.gridAngleInvalidRangeMessage;this.grgPointByTimeRotation.invalidMessage=this.nls.invalidNumberMessage;this.grgPointByTimeRotation.rangeMessage=this.nls.gridAngleInvalidRangeMessage;this.addGRGNameArea.missingMessage=
this.nls.missingLayerNameMessage;H.forEach([this.cellHorizontal,this.cellVertical,this.grgAreaBySizeCellWidth,this.grgAreaBySizeCellHeight,this.grgPointBySizeCellHorizontal,this.grgPointBySizeCellVertical,this.grgPointBySizeCellWidth,this.grgPointBySizeCellHeight,this.grgPointByRefCellHorizontal,this.grgPointByRefCellVertical,this.grgPointByTimeTime,this.grgPointByTimeRate,this.grgPointByTimeCellHorizontal,this.grgPointByTimeCellVertical,this.grgPointByTimeCellWidth,this.grgPointByTimeCellHeight],
b.hitch(this,function(u){u.invalidMessage=this.nls.invalidNumberMessage;u.rangeMessage=this.nls.invalidRangeMessage}))}})});
// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/DistanceAndDirection/views/TabLine":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/has dojo/touch dojo/dom-class dojo/string dojo/mouse dojo/number dojo/keys dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos jimu/utils esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/tasks/FeatureSet esri/geometry/geometryEngine esri/geometry/Polyline esri/geometry/Circle esri/symbols/SimpleMarkerSymbol esri/symbols/TextSymbol esri/graphic ../models/LineFeedback ../models/ShapeModel ../views/CoordinateInput ../views/EditOutputCoordinate ../models/DirectionalLineSymbol dojo/text!../templates/TabLine.html dijit/focus dojo/_base/event dojo/aspect esri/symbols/jsonUtils dojo/dom-construct jimu/symbolUtils ../SymbolChooserPopup ../setting/js/ColorPickerEditor dojo/_base/Color esri/symbols/SimpleLineSymbol dijit/form/NumberSpinner dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox dijit/TitlePane".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d,a,m,t,l,u,k,G,H,z,L,S,M,U,W,Q,q,n,x,J,K,r,p,E,F,V,Z,aa,ia,da,D,R,Y,A,P,ba){return O([m,t,l],{templateString:V,baseClass:"jimu-widget-TabLine",_restrictFocusOnAddStartPointBtn:!1,_restrictFocusOnEndStartPointBtn:!1,_startPointInputKeyPressed:!1,_endPointInputKeyPressed:!1,_gl:null,_tsGL:null,constructor:function(w){O.safeMixin(this,w);this._tsGL=this._gl=null},destroy:function(){this.dtStart&&this.dtStart.clearPoints(!0);this.dtEnd&&this.dtEnd.clearPoints(!0);this._gl&&
this.map.removeLayer(this._gl);this._tsGL&&this.map.removeLayer(this._tsGL);this.tabSwitched()},postCreate:function(){this._endPointInputKeyPressed=this._startPointInputKeyPressed=this._restrictFocusOnEndStartPointBtn=this._restrictFocusOnAddStartPointBtn=!1;this.currentLengthUnit=this.lengthUnitDD.get("value");this.currentAngleUnit=this.angleUnitDD.get("value");this._lineSym=new ba(this.lineSymbol);this._ptSym=new n(this.pointSymbol);this._labelSym=new x(this.labelSymbol);this._tsGL=new L;this.map.addLayer(this._tsGL);
this.map.addLayer(this.getLayer());if(this._gl.loaded){var w=H.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Line Graphics");w.showLabels();w.enablePopup()}else this._gl.on("load",f.hitch(this,function(){var N=H.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Line Graphics");N.showLabels();N.enablePopup()}));this.coordToolStart=new p({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.startPointLabel},this.startPointCoordsLine);this.coordToolStart.inputCoordinate.formatType=
"DD";this.coordToolEnd=new p({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.endPointLabel},this.endPointCoordsLine);this.coordToolEnd.inputCoordinate.formatTyp="DD";this.coordinateFormatStart=new u({content:new E({nls:this.nls}),style:"width: 400px"});ia.after(this.coordinateFormatStart,"onClose",f.hitch(this,function(){Z.focus(this.coordinateFormatButtonStart);if(this._restrictFocusOnAddStartPointBtn){var N=this.coordToolStart.getValue();if(""===N||null===N||void 0===N)this._restrictFocusOnAddStartPointBtn=
!1}}));"DartTheme"===this.appConfig.theme.name&&b.add(this.coordinateFormatStart.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.coordinateFormatEnd=new u({content:new E({nls:this.nls}),style:"width: 400px"});ia.after(this.coordinateFormatEnd,"onClose",f.hitch(this,function(){Z.focus(this.coordinateFormatButtonEnd);if(this._restrictFocusOnEndStartPointBtn){var N=this.coordToolEnd.getValue();if(""===N||null===N||void 0===N)this._restrictFocusOnEndStartPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&
b.add(this.coordinateFormatEnd.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dtStart=new K({appConfig:this.appConfig,map:this.map,coordTool:this.coordToolStart.inputCoordinate.util,nls:this.nls});this.dtEnd=new K({appConfig:this.appConfig,map:this.map,coordTool:this.coordToolStart.inputCoordinate.util,nls:this.nls});this.dtStart.setLineSymbol(this._lineSym);this._createSymbolPicker(this.lineSymbolNode,"lineSymbol","esriGeometryPolyline",this.nls.lineSymbologyPopupTittle);this.labelColorPicker=
this._createColorPicker(this.labelColorPickerNode);this._setColorPicker(this.labelSymbol.color);this.labelTextSizeSpinner.set("value",this.labelSymbol.font.size);this.lineTypeDDDidChange();this.syncEvents();this.lengthInput.invalidMessage=this.nls.numericInvalidMessage;this.lengthInput.rangeMessage=this.nls.lineLengthErrorMessage;this.angleInput.invalidMessage=this.nls.numericInvalidMessage;this.angleInput.rangeMessage=this.nls.orientationErrorMessage},getLayer:function(){if(!this._gl){var w={labelExpressionInfo:{value:this.nls.lengthLabel+
": {GeoLength}"}};w=new M(w);w.labelPlacement="above-along";w.where="GeoLength \x3e 0";w.symbol=this._labelSym.setOffset(0,10);w={labelExpressionInfo:{value:this.nls.angleLabel+": {LineAngle}"}};w=new M(w);w.labelPlacement="below-along";w.where="LineAngle \x3e 0";w.symbol=f.clone(this._labelSym).setOffset(0,-10);w={layerDefinition:{geometryType:"esriGeometryPolyline",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"GeoLength",type:"esriFieldTypeString",
alias:"Length"},{name:"LineAngle",type:"esriFieldTypeString",alias:"Angle"}]},featureSet:new U};this._gl=new S(w,{id:"Distance \x26 Direction - Line Graphics",outFields:["*"],showLabels:!0});this.own(g(this._gl,"visibility-change",f.hitch(this,function(N){this._tsGL.setVisibility(N.visible)})));return this._gl}},syncEvents:function(){y.subscribe("TAB_SWITCHED",f.hitch(this,this.tabSwitched));y.subscribe("DD-WIDGET-CLOSED",f.hitch(this,this._closeDijit));y.subscribe(K.drawnLineLengthDidChange,f.hitch(this,
this.lineLengthDidChange));y.subscribe(K.drawnLineAngleDidChange,f.hitch(this,this.lineAngleDidChange));this.dtStart.watch("startPoint",f.hitch(this,function(w,N,X){this.dtStart.addStartGraphic(X,this._ptSym)}));this.dtStart.watch("startPointDD",f.hitch(this,function(w,N,X){this.coordToolStart.inputCoordinate.set("coordinateEsriGeometry",X);this.coordToolStart.inputCoordinate.set("inputType",this.coordToolStart.inputCoordinate.formatType)}));this.dtStart.watch("endPointDD",f.hitch(this,function(w,
N,X){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",X);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType)}));this.dtStart.on("draw-complete",f.hitch(this,this.feedbackDidCompleteStart));this.coordToolStart.inputCoordinate.watch("outputString",f.hitch(this,function(w,N,X){this.coordToolStart.manualInput||(this.currentLine=null,this.coordToolStart.set("value",X),this._restrictFocusOnAddStartPointBtn?this._restrictFocusOnAddStartPointBtn=!1:
this._startPointInputKeyPressed?this._startPointInputKeyPressed=!1:Z.focus(this.addPointBtnStart))}));this.coordToolStart.on("keydown",f.hitch(this,this.coordToolStartKeyWasPressed));this.dtEnd.watch("startPoint",f.hitch(this,function(w,N,X){this.dtEnd.addStartGraphic(X,this._ptSym)}));this.dtEnd.watch("endPoint",f.hitch(this,function(w,N,X){this.dtEnd.addStartGraphic(X,this._ptSym)}));this.dtEnd.watch("startPointDD",f.hitch(this,function(w,N,X){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",
X);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType)}));this.dtEnd.watch("endPointDD",f.hitch(this,function(w,N,X){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",X);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType)}));this.dtEnd.on("draw-complete",f.hitch(this,this.feedbackDidCompleteEnd));this.coordToolEnd.inputCoordinate.watch("outputString",f.hitch(this,function(w,N,X){this.coordToolEnd.manualInput||
(this.coordToolEnd.set("value",X),this.currentLine&&this.currentLine.graphic&&this.currentLine.graphic.attributes&&""===this.currentLine.graphic.attributes.EndPoint&&(this.currentLine.graphic.attributes.EndPoint=this.coordToolEnd.getValue()),this._restrictFocusOnEndStartPointBtn?this._restrictFocusOnEndStartPointBtn=!1:this._endPointInputKeyPressed?this._endPointInputKeyPressed=!1:Z.focus(this.addPointBtnEnd))}));this.coordToolEnd.on("keydown",f.hitch(this,this.coordToolEndKeyWasPressed));this.lengthUnitDD.on("change",
f.hitch(this,this.lengthUnitDDDidChange));this.angleUnitDD.on("change",f.hitch(this,this.angleUnitDDDidChange));this.lineTypeDD.on("change",f.hitch(this,this.lineTypeDDDidChange));this.own(g(this.coordinateFormatButtonStart,"click",f.hitch(this,this.coordinateFormatButtonStartClicked)),g(this.coordinateFormatButtonStart,"keydown",f.hitch(this,function(w){if(w.keyCode===d.ENTER||w.keyCode===d.SPACE)aa.stop(w),this.coordinateFormatButtonStartClicked()})),g(this.coordinateFormatStart.content.applyButton,
"click",f.hitch(this,function(){this._restrictFocusOnAddStartPointBtn=!0;var w=this.coordinateFormatStart.content.formats[this.coordinateFormatStart.content.ct],N=w.defaultFormat,X=this.coordinateFormatStart.content.frmtSelect.get("value");w.useCustom&&(N=w.customFormat);this.coordToolStart.inputCoordinate.set("formatPrefix",this.coordinateFormatStart.content.addSignChkBox.checked);this.coordToolStart.inputCoordinate.set("formatString",N);this.coordToolStart.inputCoordinate.set("formatType",X);this.setCoordLabelStart(X);
k.close(this.coordinateFormatStart);Z.focus(this.coordinateFormatButtonStart)})),g(this.coordinateFormatStart.content.applyButton,"keydown",f.hitch(this,function(w){if(w.keyCode===d.ENTER||w.keyCode===d.SPACE){aa.stop(w);this._restrictFocusOnAddStartPointBtn=!0;var N=this.coordinateFormatStart.content.formats[this.coordinateFormatStart.content.ct],X=N.defaultFormat,ha=this.coordinateFormatStart.content.frmtSelect.get("value");N.useCustom&&(X=N.customFormat);this.coordToolStart.inputCoordinate.set("formatPrefix",
this.coordinateFormatStart.content.addSignChkBox.checked);this.coordToolStart.inputCoordinate.set("formatString",X);this.coordToolStart.inputCoordinate.set("formatType",ha);this.setCoordLabelStart(ha);k.close(this.coordinateFormatStart);Z.focus(this.coordinateFormatButtonStart)}w.keyCode===d.ESCAPE&&(aa.stop(w),k.close(this.coordinateFormatStart),Z.focus(this.coordinateFormatButtonStart))})),g(this.coordinateFormatStart.content.cancelButton,"click",f.hitch(this,function(){k.close(this.coordinateFormatStart)})),
g(this.coordinateFormatStart.content.cancelButton,"keydown",f.hitch(this,function(w){if(w.keyCode===d.ENTER||w.keyCode===d.SPACE)aa.stop(w),k.close(this.coordinateFormatStart),Z.focus(this.coordinateFormatButtonStart);w.keyCode===d.ESCAPE&&(aa.stop(w),k.close(this.coordinateFormatStart),Z.focus(this.coordinateFormatButtonStart))})),g(this.coordinateFormatButtonEnd,"click",f.hitch(this,this.coordinateFormatButtonEndClicked)),g(this.coordinateFormatButtonEnd,"keydown",f.hitch(this,function(w){if(w.keyCode===
d.ENTER||w.keyCode===d.SPACE)aa.stop(w),this.coordinateFormatButtonEndClicked()})),g(this.coordinateFormatEnd.content.applyButton,"click",f.hitch(this,function(){this._restrictFocusOnEndStartPointBtn=!0;var w=this.coordinateFormatEnd.content.formats[this.coordinateFormatEnd.content.ct],N=w.defaultFormat,X=this.coordinateFormatEnd.content.frmtSelect.get("value");w.useCustom&&(N=w.customFormat);this.coordToolEnd.inputCoordinate.set("formatPrefix",this.coordinateFormatEnd.content.addSignChkBox.checked);
this.coordToolEnd.inputCoordinate.set("formatString",N);this.coordToolEnd.inputCoordinate.set("formatType",X);this.setCoordLabelEnd(X);k.close(this.coordinateFormatEnd);Z.focus(this.coordinateFormatButtonEnd)})),g(this.coordinateFormatEnd.content.applyButton,"keydown",f.hitch(this,function(w){if(w.keyCode===d.ENTER||w.keyCode===d.SPACE){aa.stop(w);this._restrictFocusOnEndStartPointBtn=!0;var N=this.coordinateFormatEnd.content.formats[this.coordinateFormatEnd.content.ct],X=N.defaultFormat,ha=this.coordinateFormatEnd.content.frmtSelect.get("value");
N.useCustom&&(X=N.customFormat);this.coordToolEnd.inputCoordinate.set("formatPrefix",this.coordinateFormatEnd.content.addSignChkBox.checked);this.coordToolEnd.inputCoordinate.set("formatString",X);this.coordToolEnd.inputCoordinate.set("formatType",ha);this.setCoordLabelEnd(ha);k.close(this.coordinateFormatEnd);Z.focus(this.coordinateFormatButtonEnd)}w.keyCode===d.ESCAPE&&(aa.stop(w),k.close(this.coordinateFormatEnd),Z.focus(this.coordinateFormatButtonEnd))})),g(this.coordinateFormatEnd.content.cancelButton,
"click",f.hitch(this,function(){k.close(this.coordinateFormatEnd)})),g(this.coordinateFormatEnd.content.cancelButton,"keydown",f.hitch(this,function(w){if(w.keyCode===d.ENTER||w.keyCode===d.SPACE)aa.stop(w),k.close(this.coordinateFormatEnd),Z.focus(this.coordinateFormatButtonEnd);w.keyCode===d.ESCAPE&&(aa.stop(w),k.close(this.coordinateFormatEnd),Z.focus(this.coordinateFormatButtonEnd))})),g(this.addPointBtnStart,"keydown",f.hitch(this,function(w){if(w.keyCode===d.ENTER||w.keyCode===d.SPACE)aa.stop(w),
this.addStartPointButtonClicked()})),g(this.addPointBtnEnd,"click",f.hitch(this,this.addEndPointButtonClicked)),g(this.addPointBtnEnd,"keydown",f.hitch(this,function(w){if(w.keyCode===d.ENTER||w.keyCode===d.SPACE)aa.stop(w),this.addEndPointButtonClicked()})),g(this.interactiveLine,"change",f.hitch(this,this.interactiveCheckBoxChanged)),g(this.interactiveLine,"keydown",f.hitch(this,function(w){w.keyCode===d.ENTER&&(this.interactiveLine.checked=this.interactiveLine.checked?!1:!0,this.interactiveCheckBoxChanged())})),
g(this.okButton,"keydown",f.hitch(this,function(w){if(w.keyCode===d.ENTER||w.keyCode===d.SPACE)aa.stop(w),this.okButtonClicked()})),g(this.clearGraphicsButton,"keydown",f.hitch(this,function(w){if(w.keyCode===d.ENTER||w.keyCode===d.SPACE)aa.stop(w),this.clearGraphics()})),g(this.coordinateFormatStart.content.frmtSelect,"keydown",f.hitch(this,function(w){w.keyCode===d.ESCAPE&&(aa.stop(w),k.close(this.coordinateFormatStart),Z.focus(this.coordinateFormatButtonStart))})),g(this.coordinateFormatStart.content.frmtVal,
"keydown",f.hitch(this,function(w){w.keyCode===d.ESCAPE&&(aa.stop(w),k.close(this.coordinateFormatStart),Z.focus(this.coordinateFormatButtonStart))})),g(this.coordinateFormatStart.content.addSignChkBox,"keydown",f.hitch(this,function(w){w.keyCode===d.ESCAPE&&(aa.stop(w),k.close(this.coordinateFormatStart),Z.focus(this.coordinateFormatButtonStart));w.keyCode===d.ENTER&&(aa.stop(w),this.coordinateFormatStart.content.addSignChkBox.checked=this.coordinateFormatStart.content.addSignChkBox.checked?!1:!0)})),
g(this.coordinateFormatEnd.content.frmtSelect,"keydown",f.hitch(this,function(w){w.keyCode===d.ESCAPE&&(aa.stop(w),k.close(this.coordinateFormatEnd),Z.focus(this.coordinateFormatButtonEnd))})),g(this.coordinateFormatEnd.content.frmtVal,"keydown",f.hitch(this,function(w){w.keyCode===d.ESCAPE&&(aa.stop(w),k.close(this.coordinateFormatEnd),Z.focus(this.coordinateFormatButtonEnd))})),g(this.coordinateFormatEnd.content.addSignChkBox,"keydown",f.hitch(this,function(w){w.keyCode===d.ESCAPE&&(aa.stop(w),
k.close(this.coordinateFormatEnd),Z.focus(this.coordinateFormatButtonEnd));w.keyCode===d.ENTER&&(aa.stop(w),this.coordinateFormatEnd.content.addSignChkBox.checked=this.coordinateFormatEnd.content.addSignChkBox.checked?!1:!0)})),g(this.lengthInputDiv,e.leave,f.hitch(this,this.checkValidInputs)),g(this.angleInputDiv,e.leave,f.hitch(this,this.checkValidInputs)));B("esri-touch")?this.own(g(this.addPointBtnStart,I.press,f.hitch(this,this.addStartPointButtonClicked))):this.own(g(this.addPointBtnStart,"click",
f.hitch(this,this.addStartPointButtonClicked)));this.own(g(this.labelColorPicker,"colorChanged",f.hitch(this,function(w){"line"===w&&(this._labelSym.color=this._getColorPicker())})));this.own(g(this.labelTextSizeSpinner,"change",f.hitch(this,function(){this._labelSym.font.size=this.labelTextSizeSpinner.getValue()})));this.own(g(this.labelColorPickerNode,"keydown",f.hitch(this,function(w){w.keyCode!==d.ENTER&&w.keyCode!==d.SPACE||this.labelColorPicker.colorPicker.domNode.click()})));this.own(g(this.labelTextSizeSpinner,
"blur",f.hitch(this,function(){this.labelTextSizeSpinner.isValid()||this.labelTextSizeSpinner.set("value",this.labelSymbol.font.size)})))},lineLengthDidChange:function(w){w=h.format(w,{places:2,locale:C.locale});this.lengthInput.set("value",w)},lineAngleDidChange:function(w){w=h.format(w,{places:2,locale:C.locale});this.angleInput.set("value",w)},interactiveCheckBoxChanged:function(){this.tabSwitched();this.coordToolEnd.set("disabled",this.interactiveLine.checked);this.interactiveLine.checked?(b.add(this.addPointBtnEndDiv,
"controlGroupHidden"),this.addPointBtnStart.title=this.nls.drawLineLabel,this.addPointBtnEnd.hidden=!0):(this.coordToolEnd.clear(),this.addPointBtnStart.title=this.nls.addPointLabel,b.remove(this.addPointBtnEndDiv,"controlGroupHidden"),this.addPointBtnEnd.hidden=!1);this.checkValidInputs()},lineTypeDDDidChange:function(){"Points"===this.lineTypeDD.get("value")?(this.addPointBtnStart.title=this.nls.addPointLabel,this.coordToolEnd.set("disabled",!1),this.angleInput.set("disabled",!0),this.lengthInput.set("disabled",
!0),this.interactiveLine.disabled=!1,b.remove(this.addPointBtnEndDiv,"controlGroupHidden"),b.remove(this.interactiveLabel,"disabledLabel"),this.addPointBtnEnd.hidden=!1):(this.addPointBtnStart.title=this.nls.addPointLabel,this.interactiveLine.disabled=!0,this.interactiveLine.checked&&(this.interactiveLine.checked=!1),this.coordToolEnd.set("value",""),this.coordToolEnd.set("disabled",!0),this.angleInput.set("disabled",!1),this.lengthInput.set("disabled",!1),b.add(this.addPointBtnEndDiv,"controlGroupHidden"),
b.add(this.interactiveLabel,"disabledLabel"),this.addPointBtnEnd.hidden=!0);this.checkValidInputs()},coordinateFormatButtonStartClicked:function(){this.coordinateFormatStart.content.set("ct",this.coordToolStart.inputCoordinate.formatType);k.open({popup:this.coordinateFormatStart,around:this.coordinateFormatButtonStart});Z.focus(this.coordinateFormatStart.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormatStart&&this.coordinateFormatStart.domNode.offsetParent&&k.close(this.coordinateFormatStart);
this.coordinateFormatEnd&&this.coordinateFormatEnd.domNode.offsetParent&&k.close(this.coordinateFormatEnd)},coordinateFormatButtonEndClicked:function(){this.coordinateFormatEnd.content.set("ct",this.coordToolEnd.inputCoordinate.formatType);k.open({popup:this.coordinateFormatEnd,around:this.coordinateFormatButtonEnd});Z.focus(this.coordinateFormatEnd.content.frmtSelect.focusNode)},coordToolStartKeyWasPressed:function(w){this.dtStart.removeStartGraphic();w.keyCode===d.ENTER&&(this._startPointInputKeyPressed=
this._restrictFocusOnAddStartPointBtn=!0,this.currentLine=null,this.coordToolStart.inputCoordinate.getInputType().then(f.hitch(this,function(N){"UNKNOWN"===N.inputType?(new G({message:this.nls.invalidCoordinateTypeMessage}),this.coordToolStart.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):this.dtStart.getProjectedGeometry(N.coordinateEsriGeometry,this.map.spatialReference).then(f.hitch(this,f.hitch(this,function(X){this.dtStart.onLineStartManualInputHandler(X);this.setCoordLabelStart(N.inputType);
this.coordToolStart.inputCoordinate.set("formatString",this.coordinateFormatStart.content.formats[N.inputType].defaultFormat);this.coordToolStart.inputCoordinate.set("formatType",N.inputType);this.dtStart.addStartGraphic(X,this._ptSym);this.checkValidInputs()})))})))},coordToolEndKeyWasPressed:function(w){this.dtEnd.removeStartGraphic();w.keyCode===d.ENTER&&(this._endPointInputKeyPressed=this._restrictFocusOnEndStartPointBtn=!0,this.currentLine=null,this.coordToolEnd.inputCoordinate.getInputType().then(f.hitch(this,
function(N){"UNKNOWN"===N.inputType?(new G({message:this.nls.invalidCoordinateTypeMessage}),this.coordToolEnd.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):this.dtEnd.getProjectedGeometry(N.coordinateEsriGeometry,this.map.spatialReference).then(f.hitch(this,f.hitch(this,function(X){this.dtEnd.onLineStartManualInputHandler(X);this.setCoordLabelEnd(N.inputType);this.coordToolEnd.inputCoordinate.set("formatString",this.coordinateFormatEnd.content.formats[N.inputType].defaultFormat);
this.coordToolEnd.inputCoordinate.set("formatType",N.inputType);this.dtEnd.addStartGraphic(X,this._ptSym);this.checkValidInputs()})))})))},setCoordLabelStart:function(w){w=z.sanitizeHTML(c.substitute(this.nls.startPointLabel+" (${crdType})",{crdType:w}));this.lineStartPointLabel.innerHTML=w;a.set(this.coordToolStart.textbox,"aria-label",w)},setCoordLabelEnd:function(w){w=z.sanitizeHTML(c.substitute(this.nls.endPointLabel+" (${crdType})",{crdType:w}));this.lineEndPointLabel.innerHTML=w;a.set(this.coordToolEnd.textbox,
"aria-label",w)},checkValidInputs:function(){b.add(this.okButton,"jimu-state-disabled");a.set(this.okButton,"tabindex",-1);"DistAndBearing"===this.lineTypeDD.get("value")?null!==this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&this.lengthInput.isValid()&&this.angleInput.isValid()&&(b.remove(this.okButton,"jimu-state-disabled"),a.set(this.okButton,"tabindex",0)):null!==this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&null!==this.coordToolEnd.inputCoordinate.coordinateEsriGeometry&&
(b.remove(this.okButton,"jimu-state-disabled"),a.set(this.okButton,"tabindex",0));this.okButton.innerHTML=this.interactiveLine.checked?this.nls.publishDDBtn:this.nls.common.ok},addStartPointButtonClicked:function(){b.contains(this.addPointBtnStart,"drawPointBtn-active")?(this.dtStart.deactivate(),this._setMapNavigation(!0)):(this.tabSwitched(),this.coordToolStart.manualInput=!1,this.coordToolEnd.manualInput=!1,this._setMapNavigation(!1),"Points"===this.lineTypeDD.get("value")&&this.interactiveLine.checked?
this.dtStart.activate("polyline"):this.dtStart.activate("point"));b.toggle(this.addPointBtnStart,"drawPointBtn-active")},addEndPointButtonClicked:function(){b.contains(this.addPointBtnEnd,"drawPointBtn-active")?(this.dtEnd.deactivate(),this._setMapNavigation(!0)):(this.tabSwitched(),this.coordToolStart.manualInput=!1,this.coordToolEnd.manualInput=!1,this._setMapNavigation(!1),this.dtEnd.activate("point"));b.toggle(this.addPointBtnEnd,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=
this.lengthUnitDD.get("value");this.dtStart.set("lengthUnit",this.currentLengthUnit)},angleUnitDDDidChange:function(){this.currentAngleUnit=this.angleUnitDD.get("value");this.dtStart.set("angleUnit",this.currentAngleUnit);"degrees"===this.currentAngleUnit?(this.angleInput.constraints.max=360,this.angleInput.rangeMessage=this.nls.degreesRangeMessage):(this.angleInput.constraints.max=6400,this.angleInput.rangeMessage=this.nls.millsRangeMessage)},feedbackDidCompleteStart:function(w){if("polyline"===
w.geometry.type){if(this.interactiveLine.checked&&(w=w.geometry.result),void 0!==this.lengthInput.get("value")||void 0!==this.angleInput.get("value")){this.currentLine=new r(w);var N=null;N=new Q({paths:4326===this.map.spatialReference.wkid?this.currentLine.geographicGeometry.paths:this.currentLine.geometry.paths,spatialReference:this.map.spatialReference});if(4326===this.map.spatialReference.wkid||102100===this.map.spatialReference.wkid)N=W.geodesicDensify(N,1E4);this.currentLine.graphic=new J(N,
this._lineSym,{ObjectID:this._gl.graphics.length+1,GeoLength:this.lengthInput.get("displayedValue").toString()+" "+this.lengthUnitDD.get("displayedValue"),LineAngle:this.angleInput.get("displayedValue").toString()+" "+this.angleUnitDD.get("displayedValue"),Distance:parseFloat(this.lengthInput.get("value")),Unit:this.currentLengthUnit,Angle:parseFloat(this.angleInput.get("value")),StartPoint:this.coordToolStart.getValue(),EndPoint:this.coordToolEnd.getValue(),AngleUnit:this.angleUnitDD.get("value")});
var X=w.geometry.getExtent().getCenter();w=W.nearestCoordinate(w.geometry,X);X={lengthLabel:this.nls.lengthLabel,spacerLabel:" ",lengthInputValue:this.lengthInput.get("displayedValue").toString(),abbrevLengthLabel:this._getLengthAbbrevation(this.lengthUnitDD.get("value")),angleLabel:this.nls.angleLabel,angleValue:this.angleInput.get("displayedValue").toString(),abbrevAngleLabel:this._getDegreeAbbreviation(this.angleUnitDD.get("value"))};var ha=c.substitute(window.isRTL?"${spacerLabel}${lengthInputValue}${spacerLabel}${abbrevLengthLabel}${spacerLabel}${lengthLabel}":
"${lengthLabel}${spacerLabel}${lengthInputValue}${spacerLabel}${abbrevLengthLabel}",X);this._tsGL.add(new J(w.coordinate,f.clone(this._labelSym).setOffset(0,30).setText(ha)));ha=c.substitute(window.isRTL?"${spacerLabel}${angleValue}${spacerLabel}${abbrevAngleLabel}${spacerLabel}${angleLabel}":"${angleLabel}${spacerLabel}${angleValue}${spacerLabel}${abbrevAngleLabel}",X);this._tsGL.add(new J(w.coordinate,f.clone(this._labelSym).setText(ha)));this._gl.add(this.currentLine.graphic);this._gl.refresh();
this.dtStart.removeStartGraphic();this.dtEnd.removeStartGraphic();N=N.getExtent().expand(3);this.map.setExtent(N);this.interactiveLine.checked&&b.toggle(this.addPointBtnStart,"drawPointBtn-active")}}else b.toggle(this.addPointBtnStart,"drawPointBtn-active");this.checkValidInputs();this._setMapNavigation(!0);this.dtStart.deactivate()},feedbackDidCompleteEnd:function(w){this.checkValidInputs();this._setMapNavigation(!0);this.dtEnd.deactivate();b.toggle(this.addPointBtnEnd,"drawPointBtn-active");"Points"===
this.lineTypeDD.get("value")&&!this.interactiveLine.checked&&this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&this.coordToolEnd.inputCoordinate.coordinateEsriGeometry&&this.createManualGraphic()},createManualGraphic:function(w){var N=this.coordToolStart.inputCoordinate.coordinateEsriGeometry,X=this.coordToolEnd.inputCoordinate.coordinateEsriGeometry,ha=new Q(this.coordToolStart.inputCoordinate.coordinateEsriGeometry.spatialReference);ha.addPath([N,X]);var v=W.geodesicLength(ha,9001);this.dtStart.getProjectedGeometry(ha,
this.map.spatialReference).then(f.hitch(this,function(T){this.lengthInput.set("value",this.dtStart.coordTool.convertMetersToUnits(v,this.lengthUnitDD.get("value")));this.lineAngleDidChange(this.dtStart.getAngle(this.dtStart.startPoint,this.dtEnd.startPoint));this.map.setExtent(T.getExtent().expand(3));this.feedbackDidCompleteStart({geometry:T,geographicGeometry:ha});this.dtStart.clearPoints();this.dtEnd.clearPoints();w&&this.emit("show-publish",this._gl)}))},okButtonClicked:function(w){if(!b.contains(this.okButton,
"jimu-state-disabled"))if(this._restrictFocusOnAddStartPointBtn=!0,this.currentLine)this.emit("show-publish",this._gl);else if("Points"===this.lineTypeDD.get("value"))this.createManualGraphic(!0);else{w=this.coordToolStart.inputCoordinate.coordinateEsriGeometry;var N=this.coordToolStart.inputCoordinate.util.convertToMeters(this.lengthInput.get("value"),this.lengthUnitDD.get("value"));N=new q(w,{geodesic:!0,radius:N,numberOfPoints:64E3});var X=this.angleInput.get("value");X="degrees"===this.currentAngleUnit?
parseInt(177.77777778*X,10):parseInt(10*X,10);N=N.getPoint(0,X);var ha=new Q;ha.addPath([w,N]);this.dtStart.getProjectedGeometry(ha,this.map.spatialReference).then(f.hitch(this,function(v){this.feedbackDidCompleteStart({geometry:v,geographicGeometry:ha});this.emit("show-publish",this._gl)}));this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",N)}},clearGraphics:function(){this._gl&&(this._gl.clear(),this._tsGL.clear(),this.dtStart.removeStartGraphic(),this.dtEnd.removeStartGraphic(),this.coordToolStart.clear(),
this.coordToolEnd.clear(),this.tabSwitched());this.currentLine=null;this.checkValidInputs();for(var w=0;w<this.map.graphicsLayerIds.length;w++)this.map.getLayer(this.map.graphicsLayerIds[w]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},tabSwitched:function(){this.dtStart&&this.dtStart.deactivate();this.dtEnd&&this.dtEnd.deactivate();this._setMapNavigation(!0);this.addPointBtnStart&&b.remove(this.addPointBtnStart,"drawPointBtn-active");
this.addPointBtnEnd&&b.remove(this.addPointBtnEnd,"drawPointBtn-active");this.coordinateFormat&&k.close(this.coordinateFormat)},_setMapNavigation:function(w){w?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(w){var N=null;if(w)switch(w){case "feet":N=this.nls.abbrevFeetLabel;break;case "kilometers":N=this.nls.abbrevKmLabel;break;case "miles":N=this.nls.abbrevMilesLabel;break;case "meters":N=this.nls.abbrevMetersLabel;
break;case "nautical-miles":N=this.nls.abbrevNauticalMilesLabel;break;case "yards":N=this.nls.abbrevYardsLabel;break;default:N=w}return N},_getDegreeAbbreviation:function(w){var N=null;if(w)switch(w){case "degrees":N=this.nls.abbrevDegreesLabel;break;case "mils":N=this.nls.abbrevMilsLabel;break;default:N=w}return N},setFirstFocusNode:function(){z.initFirstFocusNode(this.domNodeObj,this.lineTypeDD.focusNode)},focusFirstNodeOfSelectedTab:function(){Z.focus(this.lineTypeDD.focusNode)},setLastFocusNode:function(){z.initLastFocusNode(this.domNodeObj,
this.clearGraphicsButton)},_createSymbolPicker:function(w,N,X,ha){if(X){var v={};v.type=z.getSymbolTypeByGeometryType(X);this.hasOwnProperty("lineSymbol")&&(v.symbol=da.fromJson(this.lineSymbol));var T={symbolChooserTitle:ha,symbolParams:v,nls:this.nls,symbolType:N};this._showSelectedSymbol(w,v.symbol,N);this.own(g(w,"click",f.hitch(this,function(){v.symbol=da.fromJson(this.lineSymbol);this._initSymbolChooserPopup(T,w);Z.focus(this.lineSymbolNode)})));this.own(g(w,"keydown",f.hitch(this,function(ca){if(ca.keyCode===
d.ENTER||ca.keyCode===d.SPACE)v.symbol=da.fromJson(this.lineSymbol),this._initSymbolChooserPopup(T,w),Z.focus(this.lineSymbolNode)})))}},_initSymbolChooserPopup:function(w,N){var X=new Y(w);X.onOkClick=f.hitch(this,function(){var ha=X.symbolChooser.getSymbol();this._showSelectedSymbol(N,ha,w.symbolType);X.popup.close()})},_showSelectedSymbol:function(w,N,X){D.empty(w);N&&((X=R.createSymbolNode(N))||(X=D.create("div")),D.place(X,w),this.lineSymbol=N.toJson(),this._lineSym=new ba(this.lineSymbol),this.dtStart.setLineSymbol(this._lineSym))},
_createColorPicker:function(w){var N=new A({nls:this.nls,tab:"line"});N.placeAt(w);N.startup();return N},_getColorPicker:function(){return this.labelColorPicker.getValues()},_setColorPicker:function(w){this.labelColorPicker.setValues({color:new P(w)})}})})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(O,f,C,g,y,B,I,b,c,e){O=O(B,{declaredClass:"esri.geometry.Circle",
_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(h,d){h.center?d=h:(d=d||{},d.center=h);this.center=f.isArray(d.center)?new y(d.center[0],d.center[1]):d.center;this.radius=d.radius||1E3;this.radiusUnit=d.radiusUnit||e.METERS;this.geodesic=!0===d.geodesic?!0:!1;this.numberOfPoints=d.numberOfPoints||60;this._init()},
toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var h=this.radius*this._unitToMeters[this.radiusUnit],d=this._srType(this.center.spatialReference);if(this.geodesic){switch(d){case "webMercator":var a=b.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":a=this.center}h=this._createGeodesicCircle(a,
h,this.numberOfPoints,a.spatialReference);"webMercator"===d&&(h=b.geographicToWebMercator(h))}else{var m;"webMercator"===d||"projected"===d?m=h/this._convert2Meters(1,this.center.spatialReference):"geographic"===d&&(m=h/this._unitToMeters.esriDecimalDegrees);h=this._createPlanarCircle(this.center,m,this.numberOfPoints)}this.spatialReference=h.spatialReference;this.addRing(h.rings[0]);this.verifySR()},_createGeodesicCircle:function(h,d,a,m){for(var t=0,l=Math.PI/180,u=[],k;t<2*Math.PI;)k=I._directGeodeticSolver(h.y*
l,h.x*l,t,d,m),u.push([k.x,k.y]),t+=Math.PI/(a/2);u.push(u[0]);return new B(u)},_createPlanarCircle:function(h,d,a){for(var m=0,t=[],l,u;m<2*Math.PI;)l=h.x+Math.cos(m)*d,u=h.y+Math.sin(m)*d,t.push([l,u]),m+=Math.PI/(a/2);t.push(t[0]);h=new B(h.spatialReference);h.addRing(t);return h},_srType:function(h){return h.isWebMercator()?"webMercator":null!=c[h.wkid]||h.wkt&&0===h.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(h,d){if(null!=c[d.wkid])d=c.values[c[d.wkid]];else{d=d.wkt;
var a=d.lastIndexOf(",")+1,m=d.lastIndexOf("]]");d=parseFloat(d.substring(a,m))}return h*d}});C("extend-esri")&&f.setObject("geometry.Circle",O,g);return O})},"widgets/DistanceAndDirection/models/LineFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/has dojo/topic esri/toolbars/draw esri/graphic esri/geometry/Polyline esri/geometry/geometryEngine jimu/utils ./Feedback".split(" "),function(O,f,C,g,y,B,I,b,c,e,h){h=O([h],{constructor:function(d){O.safeMixin(this,
d);this.syncEvents();this.initGeometryService()},syncEvents:function(){y.subscribe("manual-startpoint-input",f.hitch(this,this.onLineStartManualInputHandler));y.subscribe("manual-line-end-point-input",f.hitch(this,this.onLineEndManualInputHandler));y.subscribe("clear-points",f.hitch(this,this.clearPoints))},clearPoints:function(d){d&&(this._points=[],this.map.graphics.clear())},onLineStartManualInputHandler:function(d){this._points=[];this._points.push(d.offset(0,0));this.set("startPoint",this._points[0]);
this.map.centerAt(d)},onLineEndManualInputHandler:function(d){this._points.push(d.offset(0,0));this.set("endPoint",this._points[1])},getAngle:function(d,a){var m=null;m=(180*Math.atan2(a.x-d.x,a.y-d.y)/Math.PI+360)%360;"mils"===this.angleUnit&&(m*=17.777777778);return m.toFixed(2)},_onClickHandler:function(d){if(this.map.snappingManager)var a=this.map.snappingManager._snappingPoint;var m=a||d.mapPoint,t=this.map,l,u;this._processAfterMapClick(m).then(f.hitch(this,function(k){this._points.push(m);
switch(this._geometryType){case B.POINT:this.set("startPointDD",k);this.set("startPoint",this._points[0]);this._drawEnd(m);this._setTooltipMessage(0);break;case B.POLYLINE:if(2===this._points.length){this.set("endPoint",this._points[1]);this.set("endPointDD",k);this._onDblClickHandler();return}1===this._points.length?(this.set("startPoint",this._points[0]),this.set("startPointDD",k),k=new b(t.spatialReference),k.addPath(this._points),this._graphic=t.graphics.add(new I(k,this.lineSymbol),!0),t.snappingManager&&
t.snappingManager._setGraphic(this._graphic),this.canProjectLocally&&(this._onMouseMoveHandler_connect=C.connect(t,"onMouseMove",this._onMouseMoveHandler)),this._tGraphic=t.graphics.add(new I(new b({paths:[[[m.x,m.y],[m.x,m.y]]],spatialReference:t.spatialReference}),this.lineSymbol),!0)):(this.set("endPoint",this._points[1]),this.set("endPointDD",k),this._graphic.geometry._insertPoints([m],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),l=this._tGraphic,u=l.geometry,
u.setPoint(0,0,m),u.setPoint(0,1,m),l.setGeometry(u))}this._setTooltipMessage(this._points.length);1===this._points.length&&"polyline"===this._geometryType&&(k=this._tooltip)&&(k.innerHTML=e.sanitizeHTML(this.nls.clickToFinishLineMessage))}))},_onDblClickHandler:function(d){var a=this._points;var m=this.map.spatialReference;g("esri-touch")&&d&&a.push(d.mapPoint);d=new b({paths:[[[a[0].x,a[0].y],[a[1].x,a[1].y]]],spatialReference:m});a=new b({paths:[[[this.startPointDD.x,this.startPointDD.y],[this.endPointDD.x,
this.endPointDD.y]]],spatialReference:this.startPointDD.spatialReference});a.geodesicLength=c.geodesicLength(a,9001);this._onMouseMoveHandler_connect&&C.disconnect(this._onMouseMoveHandler_connect);m=this.coordTool.convertMetersToUnits(a.geodesicLength,this.lengthUnit);var t=this.getAngle(this.startPoint,this.endPoint);y.publish("DD_LINE_LENGTH_DID_CHANGE",m);y.publish("DD_LINE_ANGLE_DID_CHANGE",t);this._clear();this._setTooltipMessage(0);a={geometry:d,geographicGeometry:a};d=new b(d.toJson());d.result=
a;this._drawEnd(d)},_onMouseMoveHandler:function(d){if(this.map.snappingManager)var a=this.map.snappingManager._snappingPoint;var m=this._geometryType===B.POLYLINE?this._points[0]:this._points[this._points.length-1];d=a||d.mapPoint;var t=this._tGraphic.geometry;t.setPoint(0,0,{x:m.x,y:m.y});t.setPoint(0,1,{x:d.x,y:d.y});a=c.geodesicDensify(t,10001);t=c.geodesicLength(t,9001);this._graphic.setGeometry(a);a=this.coordTool.convertMetersToUnits(t,this.lengthUnit);m=this.getAngle(m,d);y.publish("DD_LINE_LENGTH_DID_CHANGE",
a);y.publish("DD_LINE_ANGLE_DID_CHANGE",m)}});h.drawnLineLengthDidChange="DD_LINE_LENGTH_DID_CHANGE";h.drawnLineAngleDidChange="DD_LINE_ANGLE_DID_CHANGE";return h})},"widgets/DistanceAndDirection/models/Feedback":function(){define("dojo/_base/declare dojo/Stateful dojo/_base/lang dojo/Deferred esri/toolbars/draw esri/geometry/Point esri/graphic esri/geometry/geometryEngineAsync esri/units esri/tasks/GeometryService esri/SpatialReference esri/request esri/tasks/ProjectParameters esri/geometry/webMercatorUtils jimu/portalUtils".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d,a,m,t){return O([y,f],{startPoint:null,_setStartPoint:function(l){this._set("startPoint",l)},endPoint:null,_setEndPoint:function(l){this._set("endPoint",l)},lengthUnit:"meters",_setLengthUnit:function(l){this._set("lengthUnit",l)},angleUnit:"degrees",_setAngle:function(l){this._set("angleUnit",l)},isDiameter:!0,canProjectLocally:!1,constructor:function(){b.isSimple(new B({x:-122.65,y:45.53,spatialReference:{wkid:4326}}))},initGeometryService:function(){var l=this.appConfig.geometryService;
l||(l="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this._fetchPortalGeomSrvcUrl().then(C.hitch(this,function(k){""===C.trim(k)&&(k=l);this.geomService=new e(k)}));var u=new B({x:0,y:0,spatialReference:this.map.spatialReference});m.canProject(u,new h(3857))&&(this.canProjectLocally=!0)},getRadiusUnitType:function(){var l=c.METERS;switch(this.lengthUnit){case "meters":l=c.METERS;break;case "feet":l=c.FEET;break;case "kilometers":l=c.KILOMETERS;break;case "miles":l=c.MILES;
break;case "nautical-miles":l=c.NAUTICAL_MILES;break;case "yards":l=c.YARDS}return l},addStartGraphic:function(l,u){this.removeStartGraphic();this.startGraphic=new I(l,u);this.map.graphics.add(this.startGraphic)},removeStartGraphic:function(){this.startGraphic&&this.map.graphics.remove(this.startGraphic);this.startGraphic=null},_processAfterMapClick:function(l){var u=new g;4326!==l.spatialReference.wkid?this.getDDPoint(l).then(C.hitch(this,function(k){u.resolve(k)}),function(k){u.reject(k)}):u.resolve(l);
return u},getDDPoint:function(l){var u=new g,k=new h(3857);m.canProject(l,k)?u.resolve(m.webMercatorToGeographic(m.project(l,k))):(new d({url:this.geomService.url+"/findTransformations",content:{f:"json",inSR:l.spatialReference.wkid,outSR:4326},handleAs:"json",callbackParamName:"callback"},{usePost:!1})).then(C.hitch(this,function(G){G=G&&G.transformations?G.transformations:void 0;this.projectPointForDD(u,l,4326,G&&0<G.length?G[0].wkid:void 0)}),C.hitch(this,function(){this.projectPointForDD(u,l,
4326,null)}));return u},projectPointForDD:function(l,u,k,G){var H=new a;H.outSR=new h(k);H.geometries=[u];G&&(H.transformForward=!0,H.transformation=G);this.geomService.project(H,C.hitch(this,function(z){l.resolve(z[0])}),function(z){l.reject(z)})},getProjectedGeometry:function(l,u){var k=new g;if(m.canProject(l,u)){var G=m.project(l,u);k.resolve(G)}else this.geomService.project([l],u,function(H){G=H[0];k.resolve(G)});return k.promise},_fetchPortalGeomSrvcUrl:function(){var l=new g;this.appConfig.portalUrl&&
""!==C.trim(this.appConfig.portalUrl)?t.getPortalSelfInfo(this.appConfig.portalUrl).then(C.hitch(this,function(u){u=u&&u.helperServices;var k="";u&&u.geometry&&u.geometry.url&&""!==u.geometry.url&&(k=u.geometry.url);l.resolve(k)}),C.hitch(this,function(){l.resolve("")})):l.resolve("");return l.promise}})})},"esri/geometry/geometryEngineAsync":function(){define("require exports esri/kernel module esri/geometry/Geometry esri/geometry/Polygon esri/geometry/Polyline esri/geometry/Point esri/geometry/Extent esri/geometry/Multipoint esri/workers/WorkerClient esri/arcade/polyfill/promiseUtils".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d){function a(q){if(void 0===b.fromJson){if(void 0!==q.x&&void 0!==q.y)return new b(q);if(void 0!==q.paths)return new I(q);if(void 0!==q.rings)return new B(q);if(void 0!==q.points)return new e(q);if(void 0!==q.xmin&&void 0!==q.ymin&&void 0!==q.xmax&&void 0!==q.ymax)return new c(q)}else{if(void 0!==q.x&&void 0!==q.y)return b.fromJson(q);if(void 0!==q.paths)return I.fromJson(q);if(void 0!==q.rings)return B.fromJson(q);if(void 0!==q.points)return e.fromJson(q);if(void 0!==
q.xmin&&void 0!==q.ymin&&void 0!==q.xmax&&void 0!==q.ymax)return c.fromJson(q)}}function m(q,n){if(null==q||void 0===q||"number"===typeof q)return q;var x=q.toString();if(""===x)return null;if(2==n){var J=M[x];if(void 0!==J)return J}else if(0==n){J=S[x];if(void 0!==J)return J;J=U[q];if(void 0!==J)return J}else if(3==n&&(J=S[x],void 0!==J))return J;if(1==n&&(J=U[q],void 0!==J))return J;if(!0===/^\d+$/.test(x))return parseInt(x);throw Error("Unrecognised Unit Type");}function t(q){if(void 0!==q&&null!==
q)switch(q){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function l(q){if(null===q||void 0===q)return null;if(z)switch(q.type){case "point":return{x:q.x,y:q.y,z:q.z,m:q.m};case "multipoint":return{points:q.points,hasZ:q.hasZ,hasM:q.hasM};case "polyline":return{paths:q.paths,hasZ:q.hasZ,hasM:q.hasM};case "polygon":return{rings:q.rings,hasZ:q.hasZ,hasM:q.hasM};case "extent":return{xmin:q.xmin,ymin:q.ymin,xmax:q.xmax,
ymax:q.ymax,zmin:q.zmin,zmax:q.zmax,mmin:q.mmin,mmax:q.mmax}}else switch(q.type){case "point":return{x:q.x,y:q.y};case "multipoint":return{points:q.points};case "polyline":return{paths:q.paths};case "polygon":return{rings:q.rings};case "extent":return{xmin:q.xmin,ymin:q.ymin,xmax:q.xmax,ymax:q.ymax}}return null}function u(q,n){if(null===q)return null;q=a(q);z?q.set("spatialReference",n):q.setSpatialReference(n);return q}function k(q){return null==q||void 0===q?null:-1!=q.wkid&&null!==q.wkid&&void 0!==
q.wkid?{wkid:q.wkid}:""!==q.wkt&&void 0!==q.wkt&&null!==q.wkt?{wkt:q.wkt}:null}function G(q,n,x){return d.create(function(J,K){var r=n.spatialReference;Q.g({action:q,geoma:l(n),geomb:l(x),spatialReference:k(n.spatialReference)}).then(function(p){0===p.status?K(Error(p.error.message)):J(u(p.result,r))},function(p){K(p)})})}function H(q,n,x){return d.create(function(J,K){Q.g({action:q,geoma:l(n),geomb:l(x),spatialReference:k(n.spatialReference)}).then(function(r){0===r.status?K(Error(r.error.message)):
J(r.result)},function(r){K(r)})})}var z=0==C.version.indexOf("4."),L;(function(q){q[q.Linear=0]="Linear";q[q.Angular=1]="Angular";q[q.Area=2]="Area";q[q.LinearOrAngular=3]="LinearOrAngular"})(L||(L={}));var S={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},M={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},U={degrees:9102,radians:9101},W=function(){function q(){this.i=
!0;this.s=null}q.prototype.G=function(n){var x=this;this.s=new h;this.s.setWorker(this.B(),function(){x.i=!1;n()})};q.prototype.B=function(){return O.H?O.H("./geometryenginewebworker"):g.id.replace(/\/[^\/]*$/ig,"/")+"./geometryenginewebworker"};return q}(),Q=function(){function q(){}q.g=function(n){return d.create(function(x,J){q.o.push({task:n,d:{resolve:x,reject:J}});q.j()})};q.j=function(){if(0<q.o.length){for(var n=null,x=0;x<q.h.length;x++)if(!1===q.h[x].i){n=q.h[x];break}null===n&&q.h.length<
q.l&&(x=new W,q.h.push(x),x.G(function(){q.j()}));if(null!==n){var J=this.o.shift();n.i=!0;n.s.postMessage(J.task).then(function(K){n.i=!1;try{J.d.resolve(K)}catch(r){}q.j()},function(K){n.i=!1;try{J.d.reject(K)}catch(r){}q.j()})}}};q.h=[];q.o=[];q.l=4;return q}();return function(){function q(){}q._removeAllWorkers=function(){Q.h=[]};q._setMaxWorkers=function(n){q._removeAllWorkers();Q.l=n};q._getMaxWorkers=function(){return Q.l};q._getNumWorkers=function(){return Q.h.length};q.extendedSpatialReferenceInfo=
function(n){return d.create(function(x,J){Q.g({action:"extendedspatialreferenceinfo",spatialReference:k(n)}).then(function(K){0===K.status?J(Error(K.error.message)):x(K.result)},function(K){J(K)})})};q.equals=function(n,x){return null===n&&null!==x||null===x&&null!==n?!1:H("equals",n,x)};q.intersects=function(n,x){if(null===n||null===x)throw Error("Illegal Argument Exception");return H("intersects",n,x)};q.touches=function(n,x){if(null===n||null===x)throw Error("Illegal Argument Exception");return H("touches",
n,x)};q.within=function(n,x){if(null===n||null===x)throw Error("Illegal Argument Exception");return H("within",n,x)};q.disjoint=function(n,x){if(null===n||null===x)throw Error("Illegal Argument Exception");return H("disjoint",n,x)};q.overlaps=function(n,x){if(null===n||null===x)throw Error("Illegal Argument Exception");return H("overlaps",n,x)};q.crosses=function(n,x){if(null===n||null===x)throw Error("Illegal Argument Exception");return H("crosses",n,x)};q.contains=function(n,x){if(null===n||null===
x)throw Error("Illegal Argument Exception");return H("contains",n,x)};q.isSimple=function(n){return H("issimple",n,null)};q.clip=function(n,x){return G("clip",n,x)};q.simplify=function(n){return d.create(function(x,J){var K=n.spatialReference;Q.g({action:"simplify",geoma:l(n),spatialReference:k(n.spatialReference)}).then(function(r){0===r.status?J(Error(r.error.message)):x(u(r.result,K))},function(r){J(r)})})};q.rotate=function(n,x,J){return d.create(function(K,r){var p=n.spatialReference;if(void 0===
J||null===J)switch(n.type){case "point":J=n;break;case "extent":J=z?n.get("center"):n.getCenter();break;default:J=z?n.get("extent").get("center"):n.getExtent().getCenter()}Q.g({action:"rotate",geoma:l(n),spatialReference:k(n.spatialReference),angle:x,rotpt:l(J)}).then(function(E){0===E.status?r(Error(E.error.message)):K(u(E.result,p))},function(E){r(E)})})};q.flipHorizontal=function(n,x){return d.create(function(J,K){var r=n.spatialReference;if(void 0===x||null===x)switch(n.type){case "point":x=n;
break;case "extent":x=z?n.get("center"):n.getCenter();break;default:x=z?n.get("extent").get("center"):n.getExtent().getCenter()}Q.g({action:"fliph",geoma:l(n),spatialReference:k(n.spatialReference),flippt:l(x)}).then(function(p){0===p.status?K(Error(p.error.message)):J(u(p.result,r))},function(p){K(p)})})};q.flipVertical=function(n,x){return d.create(function(J,K){var r=n.spatialReference;if(void 0===x||null===x)switch(n.type){case "point":x=n;break;case "extent":x=z?n.get("center"):n.getCenter();
break;default:x=z?n.get("extent").get("center"):n.getExtent().getCenter()}Q.g({action:"flipv",geoma:l(n),spatialReference:k(n.spatialReference),flippt:l(x)}).then(function(p){0===p.status?K(Error(p.error.message)):J(u(p.result,r))},function(p){K(p)})})};q.distance=function(n,x,J){return d.create(function(K,r){Q.g({action:"distance",geoma:l(n),geomb:l(x),spatialReference:k(n.spatialReference),distanceunits:m(J,3)}).then(function(p){0===p.status?r(Error(p.error.message)):K(p.result)},function(p){r(p)})})};
q.relate=function(n,x,J){return d.create(function(K,r){Q.g({action:"relate",geoma:l(n),geomb:l(x),relation:J,spatialReference:k(n.spatialReference)}).then(function(p){0===p.status?r(Error(p.error.message)):K(p.result)},function(p){r(p)})})};q.nearestCoordinate=function(n,x,J){return d.create(function(K,r){var p=n.spatialReference;Q.g({action:"nearestcoord",geoma:l(n),geomb:l(x),spatialReference:k(n.spatialReference),testinterior:void 0===J?!0:J}).then(function(E){0===E.status?r(Error(E.error.message)):
(E.result.coordinate=u(E.result.coordinate,p),K(E.result))},function(E){r(E)})})};q.nearestVertex=function(n,x){return d.create(function(J,K){var r=n.spatialReference;Q.g({action:"nearestvertex",geoma:l(n),geomb:l(x),spatialReference:k(n.spatialReference)}).then(function(p){0===p.status?K(Error(p.error.message)):(p.result.coordinate=u(p.result.coordinate,r),J(p.result))},function(p){K(p)})})};q.nearestVertices=function(n,x,J,K){return d.create(function(r,p){var E=n.spatialReference;Q.g({action:"nearestvertices",
geoma:l(n),geomb:l(x),spatialReference:k(n.spatialReference),searchradius:J,maxreturn:K}).then(function(F){if(0===F.status)p(Error(F.error.message));else{for(var V=0;V<F.result.length;V++)F.result[V].coordinate=u(F.result[V].coordinate,E);r(F.result)}},function(F){p(F)})})};q.cut=function(n,x){return d.create(function(J,K){var r=n.spatialReference;Q.g({action:"cut",geoma:l(n),geomb:l(x),spatialReference:k(n.spatialReference)}).then(function(p){if(0===p.status)K(Error(p.error.message));else{for(var E=
0;E<p.result.length;E++)p.result[E]=u(p.result[E],r);J(p.result)}},function(p){K(p)})})};q.generalize=function(n,x,J,K){return d.create(function(r,p){var E=n.spatialReference;Q.g({action:"generalize",geoma:l(n),maxdeviation:x,removedegenerateparts:J,maxdeviationunit:m(K,3),spatialReference:k(n.spatialReference)}).then(function(F){0===F.status?p(Error(F.error.message)):r(u(F.result,E))},function(F){p(F)})})};q.densify=function(n,x,J){return d.create(function(K,r){var p=n.spatialReference;Q.g({action:"densify",
geoma:l(n),maxsegmentlength:x,maxsegmentlengthunit:m(J,3),spatialReference:k(n.spatialReference)}).then(function(E){0===E.status?r(Error(E.error.message)):K(u(E.result,p))},function(E){r(E)})})};q.geodesicDensify=function(n,x,J,K){void 0===K&&(K=0);return d.create(function(r,p){var E=n.spatialReference;Q.g({action:"geodensify",geoma:l(n),maxsegmentlength:x,maxsegmentlengthunit:m(J,3),spatialReference:k(n.spatialReference),curveType:K}).then(function(F){0===F.status?p(Error(F.error.message)):r(u(F.result,
E))},function(F){p(F)})})};q.intersect=function(n,x){return n instanceof y?G("intersect",n,x):q.C(n,x)};q.C=function(n,x){return d.create(function(J,K){for(var r=[],p=0;p<n.length;p++)r.push(l(n[p]));var E=x.spatialReference;Q.g({action:"intersectmany",geom:l(x),geometries:r,spatialReference:k(x.spatialReference)}).then(function(F){if(0===F.status)K(Error(F.error.message));else{for(var V=0;V<F.result.length;V++)F.result[V]=u(F.result[V],E);J(F.result)}},function(F){K(F)})})};q.difference=function(n,
x){return n instanceof y?G("difference",n,x):q.A(n,x)};q.A=function(n,x){return d.create(function(J,K){for(var r=[],p=0;p<n.length;p++)r.push(l(n[p]));var E=x.spatialReference;Q.g({action:"differencemany",geom:l(x),geometries:r,spatialReference:k(x.spatialReference)}).then(function(F){if(0===F.status)K(Error(F.error.message));else{for(var V=0;V<F.result.length;V++)F.result[V]=u(F.result[V],E);J(F.result)}},function(F){K(F)})})};q.symmetricDifference=function(n,x){return n instanceof y?G("symdifference",
n,x):q.F(n,x)};q.F=function(n,x){return d.create(function(J,K){for(var r=[],p=0;p<n.length;p++)r.push(l(n[p]));var E=x.spatialReference;Q.g({action:"symdifferencemany",geom:l(x),geometries:r,spatialReference:k(x.spatialReference)}).then(function(F){if(0===F.status)K(Error(F.error.message));else{for(var V=0;V<F.result.length;V++)F.result[V]=u(F.result[V],E);J(F.result)}},function(F){K(F)})})};q.union=function(n,x){void 0===x&&(x=null);return d.create(function(J,K){var r=[];if(null===n)J(null);else if(n instanceof
y&&(n=[n],null!==x&&n.push(x)),0===n.length)J(null);else{for(var p=0;p<n.length;p++)r.push(l(n[p]));var E=n[0].spatialReference;Q.g({action:"unionmany",geometries:r,spatialReference:k(E)}).then(function(F){0===F.status?K(Error(F.error.message)):J(u(F.result,E))},function(F){K(F)})}})};q.buffer=function(n,x,J,K){void 0===K&&(K=!1);if(n instanceof y)return d.create(function(F,V){var Z=n.spatialReference;Q.g({action:"buffer",geoma:l(n),spatialReference:k(n.spatialReference),distance:x,unit:m(J,3),geodesic:!1,
geodesicmaxdeviation:NaN,geodesiccurvetype:0}).then(function(aa){0===aa.status?V(Error(aa.error.message)):F(u(aa.result,Z))},function(aa){V(aa)})});if("[object Array]"!==Object.prototype.toString.call(x)){for(var r=[],p=0;p<n.length;p++)r.push(x);x=r}if(x.length!=n.length){if(0==x.length)throw Error("Illegal Argument Exception");r=[];var E=0;for(p=0;p<n.length;p++)void 0===x[p]?r.push(E):(r.push(x[p]),E=x[p]);x=r}return q.u(n,x,J,!1,K,"geodesic",NaN)};q.geodesicBuffer=function(n,x,J,K,r,p){if(n instanceof
y)return d.create(function(Z,aa){void 0===r&&(r=NaN);var ia=n.spatialReference;Q.g({action:"buffer",geoma:l(n),spatialReference:k(n.spatialReference),distance:x,unit:m(J,0),geodesic:!0,geodesicmaxdeviation:r,geodesiccurvetype:t(K)}).then(function(da){0===da.status?aa(Error(da.error.message)):Z(u(da.result,ia))},function(da){aa(da)})});if("[object Array]"!==Object.prototype.toString.call(x)){for(var E=[],F=0;F<n.length;F++)E.push(x);x=E}if(x.length!=n.length){if(0==x.length)throw Error("Illegal Argument Exception");
E=[];var V=0;for(F=0;F<n.length;F++)void 0===x[F]?E.push(V):(E.push(x[F]),V=x[F]);x=E}return q.u(n,x,J,!0,K,r,p)};q.u=function(n,x,J,K,r,p,E){return d.create(function(F,V){var Z=[];void 0===E&&(E=NaN);if(null===n)F(null);else if(0===n.length)F(null);else{for(var aa=0;aa<n.length;aa++)Z.push(l(n[aa]));J=K?m(J,0):m(J,3);var ia=n[0].spatialReference;Q.g({action:"buffermany",geometries:Z,spatialReference:k(ia),distances:x,tounionresults:r,unit:J,geodesic:K,geodesicmaxdeviation:E,geodesiccurvetype:t(p)}).then(function(da){if(0===
da.status)V(Error(da.error.message));else{for(var D=0;D<da.result.length;D++)da.result[D]=u(da.result[D],ia);F(da.result)}},function(da){V(da)})}})};q.convexHull=function(n,x){void 0===x&&(x=!1);return n instanceof y?d.create(function(J,K){var r=n.spatialReference;Q.g({action:"convexhull",geoma:l(n),spatialReference:k(n.spatialReference)}).then(function(p){0===p.status?K(Error(p.error.message)):J(u(p.result,r))},function(p){K(p)})}):q.v(n,x)};q.v=function(n,x){return d.create(function(J,K){for(var r=
[],p=0;p<n.length;p++)r.push(l(n[p]));var E=0<n.length?n[0].spatialReference:null;Q.g({action:"convexhullmany",geometries:r,merge:x}).then(function(F){if(0===F.status)K(Error(F.error.message));else{for(var V=0;V<F.result.length;V++)F.result[V]=u(F.result[V],E);J(F.result)}},function(F){K(F)})})};q.offset=function(n,x,J,K,r,p){var E=0;if(null!=K&&void 0!=K)switch(K){case "round":E=0;break;case "bevel":E=1;break;case "miter":E=2;break;case "square":E=3}return n instanceof y?d.create(function(F,V){var Z=
n.spatialReference;Q.g({action:"offset",geoma:l(n),spatialReference:k(n.spatialReference),distance:x,joins:E,bevelratio:r,flattenerror:p,offsetunit:m(J,3)}).then(function(aa){0===aa.status?V(Error(aa.error.message)):F(u(aa.result,Z))},function(aa){V(aa)})}):q.D(n,x,J,E,r,p)};q.D=function(n,x,J,K,r,p){return d.create(function(E,F){for(var V=[],Z=0;Z<n.length;Z++)V.push(l(n[Z]));var aa=0<n.length?n[0].spatialReference:null;Q.g({action:"offsetmany",geometries:V,spatialReference:k(aa),distance:x,joins:K,
bevelratio:r,offsetunit:m(J,3),flattenerror:p}).then(function(ia){if(0===ia.status)F(Error(ia.error.message));else{for(var da=0;da<ia.result.length;da++)ia.result[da]=u(ia.result[da],aa);E(ia.result)}},function(ia){F(ia)})})};q.planarArea=function(n,x){return d.create(function(J,K){Q.g({action:"area",geoma:l(n),unit:m(x,2),spatialReference:k(n.spatialReference)}).then(function(r){0===r.status?K(Error(r.error.message)):J(r.result)},function(r){K(r)})})};q.planarLength=function(n,x){return d.create(function(J,
K){Q.g({action:"length",geoma:l(n),unit:m(x,3),spatialReference:k(n.spatialReference)}).then(function(r){0===r.status?K(Error(r.error.message)):J(r.result)},function(r){K(r)})})};q.geodesicArea=function(n,x,J){return d.create(function(K,r){Q.g({action:"geodesicarea",geoma:l(n),unit:m(x,2),geodesiccurvetype:t(J),spatialReference:k(n.spatialReference)}).then(function(p){0===p.status?r(Error(p.error.message)):K(p.result)},function(p){r(p)})})};q.geodesicLength=function(n,x,J){return d.create(function(K,
r){Q.g({action:"geodesiclength",geoma:l(n),unit:m(x,0),geodesiccurvetype:t(J),spatialReference:k(n.spatialReference)}).then(function(p){0===p.status?r(Error(p.error.message)):K(p.result)},function(p){r(p)})})};return q}()})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(O,f,C,g,y,B,I,b,c){var e=window.Blob||window.webkitBlob||window.mozBlob,h=window.URL||window.webkitURL||
window.mozURL;O=f([O],{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(d,a,m){this._isIE=B("ie");this.returnDeferreds=!!m;this._queue={};this._acceptMessage=g.hitch(this,this._acceptMessage);this._errorMessage=g.hitch(this,this._errorMessage);d&&this.setWorker(d,g.hitch(this,function(t){this.worker=t;a(t)}))},setWorker:function(d,a){if(d instanceof Array){var m=d;d=m.shift()}var t=this._getUrl(d);t=b.normalize(t);d=!b.hasSameOrigin(t,location.href);
if(!1===t)return console.log("Can not resolve worker path"),!1;if(this.worker){var l=this.worker;l.removeEventListener("message",this._acceptMessage,!1);l.removeEventListener("error",this._errorMessage,!1);l.terminate();l=null}if(d){d=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(d,g.hitch(this,function(u){u=h.createObjectURL(new e([u],{type:"text/javascript"}));a(this._createWorker(u,t))}))}catch(u){try{d=b.getProxyUrl(d).path+"?"+encodeURI(d),this._useProxy=!0,a(this._createWorker(d,
m))}catch(k){return console.log("Can not create worker"),!1}}}else setTimeout(g.hitch(this,function(){a(this._createWorker(t,m))}),0)},_createWorker:function(d,a){d=new Worker(d);d.addEventListener("message",this._acceptMessage,!1);d.addEventListener("error",this._errorMessage,!1);this.worker=d;a&&this.importScripts(a);return d},postMessage:function(d,a){if(d instanceof Array||"object"!=typeof d)d={data:d};var m=Math.floor(64E9*Math.random()).toString(36);d.msgId=m;m=this._queue[m]=new C;this.worker?
(a?this.worker.postMessage(d,a):this.worker.postMessage(d),this.emit("start-message",{target:this,message:d})):m.reject({message:"No worker was set."});return this.returnDeferreds?m:m.promise||m},terminate:function(){var d=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var a=d.length-1;0<=a;a--)this._queue[d[a]].cancel("terminated"),delete this._queue[d[a]]},addWorkerCallback:function(d,a){var m=this._getUrl(d,!0);!1===m?(a=new C,a.reject({message:"Could not load text from "+d})):
(a=this.postMessage({action:"add-callback",url:m,cbName:a||"main"}),a.then(g.hitch(this,function(t){t.target=this;this.emit("callback-added",t)})));return a},importScripts:function(d){Array.isArray(d)||(d=[d]);d=d.map(function(a){a=this._getUrl(a,!0);this._useProxy&&!b.hasSameOrigin(a,location.href)&&(a=b.getProxyUrl(a).path+"?"+encodeURI(a));return a},this);d=this.postMessage({action:"import-script",url:d});d.then(g.hitch(this,function(a){a.target=this;this.emit("scripts-imported",a)}));return d},
_acceptMessage:function(d){var a=d.data,m=a.msgId;if(a.status&&"debug"==a.status)console[a.showAs||"debug"](a);else if(m&&m in this._queue){var t=this._queue[m];"progress"==a.status?t.progress(d.data):("error"==a.status?t.reject(d.data):t.resolve(d.data),delete this._queue[m])}this.emit("message",{message:d.data,event:d,target:this})},_errorMessage:function(d){this.onerror||this.onError?this.onerror?this.onerror(d):this.onError(d):console.log("Worker Error: "+d.message+"\nIn "+d.filename+" on "+d.lineno)},
_getUrl:function(d,a){if(!d)return console.error("can not resolve empty path"),!1;d.match(/\.js$/)||(d+=".js");d=c.toUrl(d);return a?b.getAbsoluteUrl(d):d},_getRemoteText:function(d,a){(d=this._getUrl(d))&&y.get(d,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(m){a(m)})},_startBlobWorker:function(){var d=this._xdSource;d||(d=this._getUrl("./mutableWorker"),d=new e(["if(!self._mutable){importScripts('"+d+"');}"],{type:"text/javascript"}),d=this._xdSource=
h.createObjectURL(d));try{return new Worker(d)}catch(a){return console.log(a.message),!1}}});B("extend-esri")&&g.setObject("workers.WorkerClient",O,I);return O})},"widgets/DistanceAndDirection/models/ShapeModel":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/string dojo/number esri/geometry/geometryEngine esri/geometry/webMercatorUtils esri/geometry/Polyline".split(" "),function(O,f,C,g,y,B,I,b){return O(null,{Units:"meters feet kilometers miles nautical-miles yards".split(" "),
getAngle:function(c){var e=null;e=void 0===this.angle?(180*Math.atan2(this.endPoint.x-this.startPoint.x,this.endPoint.y-this.startPoint.y)/Math.PI+360)%360:Number(this.angle);"mils"===c&&(e*=17.777777778);return e.toFixed(2)},getLength:function(c){var e=this.Units[0];-1<this.Units.indexOf(c.toLowerCase())&&(e=c.toLowerCase());return B.geodesicLength(this.geographicGeometry,e)},getFormattedLength:function(c){return y.format(this.getLength(c),{places:4})},formatLength:function(c){return y.format(c,
{places:4})},constructor:function(c){O.safeMixin(this,c);if("polygon"===this.geometry.type)if(this.geometry.hasOwnProperty("drawType")){if("ellipse"===this.geometry.drawType){var e=new b;f.forEach(this.geometry.geometry.rings,C.hitch(this,function(h){e.paths.push(h)}));e.spatialReference=this.geometry.spatialReference;this.geographicGeometry=e=I.webMercatorToGeographic(e);this.geodesicGeometry=B.geodesicDensify(this.geometry.geometry,1E4);this.wmGeometry=this.geometry.geometry;this.angle=this.geometry.angle;
this.startPoint=I.webMercatorToGeographic(this.geometry.center);this.formattedStartPoint=g.substitute("${xStr}, ${yStr}",{xStr:y.format(this.startPoint.y,{places:4}),yStr:y.format(this.startPoint.x,{places:4})})}}else c=new b({paths:[[this.geometry.paths[0][0],this.geometry.paths[0][1]]],spatialReference:{wkid:this.geometry.spatialReference.wkid}}),this.geographicGeometry=c=I.webMercatorToGeographic(c),this.geodesicGeometry=B.geodesicDensify(c,1E4),this.wmGeometry=this.geometry,this.startPoint=this.geodesicGeometry.getPoint(0,
0),this.endPoint=this.geodesicGeometry.getPoint(0,this.geodesicGeometry.paths[0].length-1),this.formattedStartPoint=g.substitute("${xStr}, ${yStr}",{xStr:y.format(this.startPoint.y,{places:4}),yStr:y.format(this.startPoint.x,{places:4})}),this.formattedEndPoint=g.substitute("${xStr}, ${yStr}",{xStr:y.format(this.endPoint.y,{places:4}),yStr:y.format(this.endPoint.x,{places:4})});else"point"===this.geometry.type?(this.geodesicGeometry=B.geodesicBuffer(this.geometry,this.calculatedDistance,"meters"),
this.geographicGeometry=null!==this.lineGeometry?this.lineGeometry:this.geometry,102100!==this.geodesicGeometry.spatialReference.wkid&&3857!==this.geodesicGeometry.spatialReference.wkid?(this.wgsGeometry=this.geodesicGeometry,this.wmGeometry=I.geographicToWebMercator(this.geodesicGeometry)):(this.wgsGeometry=I.webMercatorToGeographic(this.geodesicGeometry),this.wmGeometry=this.geodesicGeometry),this.formattedStartPoint=g.substitute("${xStr}, ${yStr}",{xStr:y.format(this.wgsGeometry.getCentroid().y,
{places:4}),yStr:y.format(this.wgsGeometry.getCentroid().x,{places:4})})):(this.geodesicGeometry=4326===this.geographicGeometry.spatialReference.wkid||3857===this.geographicGeometry.spatialReference.wkid?B.geodesicDensify(this.geographicGeometry,1E4):this.geographicGeometry,this.startPoint=this.geodesicGeometry.getPoint(0,0),this.endPoint=this.geodesicGeometry.getPoint(0,this.geodesicGeometry.paths[0].length-1),this.formattedStartPoint=g.substitute("${xStr}, ${yStr}",{xStr:y.format(this.startPoint.y,
{places:4}),yStr:y.format(this.startPoint.x,{places:4})}),this.formattedEndPoint=g.substitute("${xStr}, ${yStr}",{xStr:y.format(this.endPoint.y,{places:4}),yStr:y.format(this.endPoint.x,{places:4})}))}})})},"widgets/DistanceAndDirection/views/CoordinateInput":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","../models/Coordinate"],function(O,f,C){return O("test",f,{required:!0,inputCoordinate:null,invalidMessage:"",validateOnInput:!0,_validateOnInputSetter:function(g){this.validateOnInput=
"true"===g},clear:function(){this.set("validateOnInput",!0);this.set("value","");this.inputCoordinate.coordinateEsriGeometry=null},constructor:function(g){O.safeMixin(this,g);this.inherited(arguments);this.inputCoordinate=new C({appConfig:arguments[0].appConfig,nls:this.nls})},validator:function(g){if(!this.validateOnInput)return!0;this.inputCoordinate.set("inputString",g);this.set("invalidMessage",this.inputCoordinate.message);this.set("promptMessage",this.inputCoordinate.message);return!0}})})},
"widgets/DistanceAndDirection/models/Coordinate":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/Stateful dojo/Deferred esri/geometry/Point esri/SpatialReference jimu/dijit/Message ./util ./dialogConfirm ./ConfirmNotation".split(" "),function(O,f,C,g,y,B,I,b,c,e,h,d){return O([y],{formatPrefix:!1,_formatPrefixSetter:function(a){this.formatPrefix=a},inputString:null,_inputStringSetter:function(a){this.inputString=a},formatString:"YN XE",_formatStringSetter:function(a){this.formatString=
a},inputType:"UNKNOWN",formatType:"DD",_formatTypeSetter:function(a){this.formatType=a;this.getFormattedValue()},outputString:"",coordinateEsriGeometry:null,_coordinateEsriGeometrySetter:function(a){null!==a&&(this.coordinateEsriGeometry=a,this.getFormattedValue())},constructor:function(a){O.safeMixin(this,a);this.util=new e({appConfig:this.appConfig,nls:this.nls})},getInputType:function(){this.inputTypeDef=new B;var a=this.util.getCleanInput(this.inputString);this.util.getCoordinateType(a).then(C.hitch(this,
function(m){if(m)if(1===m.length){var t=this.processCoordTextInput(a,m[0],!1);this.util.getXYNotation(t,m[0].conversionType).then(C.hitch(this,function(u){0>=u.length||!u[0][0]&&0!==u[0][0]?(this.hasError=!0,this.valid=!1,this.message=this.nls.invalidCoordinateMessage):(this.valid=this.isManual=!0,this.formatType=m[0].conversionType,this.inputType=m[0].conversionType,this.coordinateEsriGeometry=new I(u[0][0],u[0][1],new b({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));C.hitch(this,
function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message=this.nls.invalidCoordinateMessage;this.inputTypeDef.resolve(this)})}else{var l=new h({title:this.nls.confirmInputNotationMessage,nls:this.nls,content:new d({nls:this.nls},m),style:"width: 400px",hasSkipCheckBox:!1});"DartTheme"===this.appConfig.theme.name&&g.add(l.domNode,"dartThemeClaroDijitTooltipContainerOverride");l.show().then(C.hitch(this,function(){var u=f.filter(m,function(G){return G.name===l.content.comboOptions.get("value")}),
k=this.processCoordTextInput(a,u[0],!1);this.util.getXYNotation(k,u[0].conversionType).then(C.hitch(this,function(G){0>=G.length||!G[0][0]&&0!==G[0][0]?(this.hasError=!0,this.valid=!1,this.message=this.nls.invalidCoordinateMessage):(this.valid=this.isManual=!0,this.inputType=m[0].conversionType,this.formatType=m[0].conversionType,this.coordinateEsriGeometry=new I(G[0][0],G[0][1],new b({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));C.hitch(this,function(){this.hasError=!0;this.valid=
!1;this.inputType="UNKNOWN";this.message=this.nls.invalidCoordinateMessage;this.inputTypeDef.resolve(this)})},function(){this.inputTypeDef.reject()}))}else this.hasError=!0,this.valid=!1,this.inputType="UNKNOWN",this.message=this.nls.invalidCoordinateMessage,this.inputTypeDef.resolve(this)}));return this.inputTypeDef},processCoordTextInput:function(a,m,t){var l=m.pattern.exec(a),u=!1,k=m.name;switch(m.name){case "DD":var G=l[2];var H=l[7];var z=l[10];var L=l[16];var S=l[3].replace(/[,:]/,".");var M=
l[11].replace(/[,:]/,".");k="DD";break;case "DDrev":G=l[11];H=l[16];z=l[2];L=l[8];S=l[12].replace(/[,:]/,".");M=l[3].replace(/[,:]/,".");k="DD";break;case "DDM":G=l[2];H=l[7];z=l[10];L=l[15];S=l[3];var U=l[4].replace(/[,:]/,".");M=l[11];var W=l[12].replace(/[,:]/,".");k="DDM";break;case "DDMrev":G=l[10];H=l[15];z=l[2];L=l[7];S=l[11];U=l[12].replace(/[,:]/,".");M=l[3];W=l[4].replace(/[,:]/,".");k="DDM";break;case "DMS":G=l[2];H=l[8];z=l[11];L=l[17];S=l[3];U=l[4];var Q=l[5].replace(/[,:]/,".");M=l[12];
W=l[13];var q=l[14].replace(/[,:]/,".");k="DMS";break;case "DMSrev":G=l[11],H=l[17],z=l[2],L=l[8],S=l[12],U=l[13],Q=l[14].replace(/[,:]/,"."),M=l[3],W=l[4],q=l[5].replace(/[,:]/,"."),k="DMS"}G&&H?(u=!0,G=(new RegExp(/[Ss-]/)).test(G)?"-":"+"):G=G&&(new RegExp(/[Ss-]/)).test(G)?"-":H&&(new RegExp(/[Ss-]/)).test(H)?"-":"+";z&&L?(u=!0,z=(new RegExp(/[Ww-]/)).test(z)?"-":"+"):z=z&&(new RegExp(/[Ww-]/)).test(z)?"-":L&&(new RegExp(/[Ww-]/)).test(L)?"-":"+";u&&(t||new c({message:this.nls.prefixSuffixMessage}));
switch(k){case "DD":a=G+S+","+z+M;break;case "DDM":a=G+S+" "+U+","+z+M+" "+W;break;case "DMS":a=G+S+" "+U+" "+Q+","+z+M+" "+W+" "+q}return a},getInputTypeSync:function(){return null!==this.util.getCoordinateType(this.inputString)},getFormattedValue:function(){this.coordinateEsriGeometry&&this.util.getCoordValues({x:this.coordinateEsriGeometry.x,y:this.coordinateEsriGeometry.y},this.formatType,6).then(C.hitch(this,function(a){this.set("outputString",this.getCoordUI(a))}))},getCoordUI:function(a){var m=
this.get("formatPrefix");switch(this.formatType){case "DD":a=this.util.getFormattedDDStr(a,this.formatString,m);var t=a.formatResult;break;case "DDM":a=this.util.getFormattedDDMStr(a,this.formatString,m);t=a.formatResult;break;case "DMS":a=this.util.getFormattedDMSStr(a,this.formatString,m);t=a.formatResult;break;case "USNG":a=this.util.getFormattedUSNGStr(a,this.formatString,m);t=a.formatResult;break;case "MGRS":a=this.util.getFormattedMGRSStr(a,this.formatString,m);t=a.formatResult;break;case "GARS":a=
this.util.getFormattedGARSStr(a,this.formatString,m);t=a.formatResult;break;case "GEOREF":a=this.util.getFormattedGEOREFStr(a,this.formatString,m);t=a.formatResult;break;case "UTM":a=this.util.getFormattedUTMStr(a,this.formatString,m);t=a.formatResult;break;case "UTM (H)":a=this.util.getFormattedUTMHStr(a,this.formatString,m),t=a.formatResult}return t}})})},"widgets/DistanceAndDirection/models/util":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred esri/tasks/GeometryService jimu/utils dojo/_base/lang jimu/portalUtils".split(" "),
function(O,f,C,g,y,B,I){return O(null,{constructor:function(b){this.appConfig=b.appConfig;this.nls=b.nls;var c=this.appConfig.geometryService;c||(c="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this._fetchPortalGeomSrvcUrl().then(B.hitch(this,function(e){""===B.trim(e)&&(e=c);this.geomService=new g(e)}))},getCleanInput:function(b){b=b.replace(/\n/g,"");b=b.replace(/\s+/g," ").trim();return b.toUpperCase()},getCoordValues:function(b,c,e){var h=new C;b={sr:4326,coordinates:[[b.x,
b.y]],conversionType:c.name?c.name:c,numOfDigits:e||6,rounding:!0,addSpaces:!1};switch(c){case "DD":b.numOfDigits=6;break;case "USNG":b.numOfDigits=5;break;case "MGRS":b.conversionMode="mgrsDefault";b.numOfDigits=5;break;case "UTM (H)":b.conversionType="utm";b.conversionMode="utmNorthSouth";b.addSpaces=!0;break;case "UTM":b.conversionType="utm";b.conversionMode="utmDefault";b.addSpaces=!0;break;case "GARS":b.conversionMode="garsDefault"}this.geomService.toGeoCoordinateString(b).then(function(d){h.resolve(d)},
function(){h.resolve(null)});return h.promise},getXYNotation:function(b,c){var e=new C;var h=c.name?c.name:c;c={sr:4326,conversionType:h,strings:[]};switch(h){case "DD":case "DDM":case "DMS":c.numOfDigits=2;b=b.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");c.strings.push(b);break;case "USNG":c.strings.push(b);c.addSpaces="false";break;case "MGRS":c.conversionMode="mgrsNewStyle";c.strings.push(b);c.addSpaces="false";break;case "UTM (H)":c.conversionType="utm";c.conversionMode="utmNorthSouth";
c.strings.push(b);break;case "UTM":c.conversionType="utm";c.conversionMode="utmDefault";c.strings.push(b);break;case "GARS":c.conversionMode="garsCenter";c.strings.push(b);break;case "GEOREF":c.strings.push(b)}this.geomService.fromGeoCoordinateString(c).then(function(d){e.resolve(d)},function(){e.resolve(null)});return e.promise},getNotations:function(){return[{name:"DD",pattern:/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/,
notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/,notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)[\s]*$/,
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/,notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/,
notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/,notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,
notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/,
notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/,notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/,notationType:this.nls.UTMHemNotation,conversionType:"UTM (H)"}]},getCoordinateType:function(b){var c=this.getCleanInput(b);b=new C;var e=this.getNotations();c=f.filter(e,
function(h){return h.pattern.test(this.v)},{v:c});0<c.length?b.resolve(c):b.resolve(null);return b.promise},getFormattedDDStr:function(b,c,e){var h={};h.sourceValue=b;h.sourceFormatString=c;b=b[0].split(/[ ,]+/);h.latdeg=b[0].replace(/[nNsS]/,"");h.londeg=b[1].replace(/[eEwW]/,"");h.latdeg=y.localizeNumber(parseFloat(h.latdeg));h.londeg=y.localizeNumber(parseFloat(h.londeg));e&&(h.latdeg="N"===b[0].slice(-1)?"+"+h.latdeg:"-"+h.latdeg,h.londeg="W"===b[1].slice(-1)?"-"+h.londeg:"+"+h.londeg);c=c.replace(/X/,
h.londeg);c=c.replace(/[eEwW]/,b[1].slice(-1));c=c.replace(/[nNsS]/,b[0].slice(-1));c=c.replace(/Y/,h.latdeg);h.formatResult=c;return h},getFormattedDDMStr:function(b,c,e){var h={};h.sourceValue=b;h.sourceFormatString=c;h.parts=b[0].split(/[ ,]+/);h.latdeg=h.parts[0];h.latmin=h.parts[1].replace(/[nNsS]/,"");h.londeg=h.parts[2];h.lonmin=h.parts[3].replace(/[eEwW]/,"");h.latmin=y.localizeNumber(parseFloat(h.latmin));h.lonmin=y.localizeNumber(parseFloat(h.lonmin));e&&(h.latdeg="N"===h.parts[1].slice(-1)?
"+"+h.latdeg:"-"+h.latdeg,h.londeg="W"===h.parts[3].slice(-1)?"-"+h.londeg:"+"+h.londeg);b=c.replace(/[EeWw]/,h.parts[3].slice(-1));b=b.replace(/Y/,h.lonmin);b=b.replace(/X/,h.londeg);b=b.replace(/[NnSs]/,h.parts[1].slice(-1));b=b.replace(/B/,h.latmin);b=b.replace(/A/,h.latdeg);h.formatResult=b;return h},getFormattedDMSStr:function(b,c,e){var h={};h.sourceValue=b;h.sourceFormatString=c;h.parts=b[0].split(/[ ,]+/);h.latdeg=h.parts[0];h.latmin=h.parts[1];h.latsec=h.parts[2].replace(/[NnSs]/,"");h.londeg=
h.parts[3];h.lonmin=h.parts[4];h.lonsec=h.parts[5].replace(/[EWew]/,"");h.latsec=y.localizeNumber(parseFloat(h.latsec));h.lonsec=y.localizeNumber(parseFloat(h.lonsec));e&&(h.latdeg="N"===h.parts[2].slice(-1)?"+"+h.latdeg:"-"+h.latdeg,h.londeg="W"===h.parts[5].slice(-1)?"-"+h.londeg:"+"+h.londeg);b=c.replace(/A/,h.latdeg);b=b.replace(/B/,h.latmin);b=b.replace(/C/,h.latsec);b=b.replace(/X/,h.londeg);b=b.replace(/Y/,h.lonmin);b=b.replace(/Z/,h.lonsec);b=b.replace(/[NnSs]/,h.parts[2].slice(-1));b=b.replace(/[EeWw]/,
h.parts[5].slice(-1));h.formatResult=b;return h},getFormattedUSNGStr:function(b,c){var e={};e.sourceValue=b;e.sourceFormatString=c;b[0].match(/^[ABYZ]/)?e.gzd=b[0].match(/[ABYZ]/)[0].trim():e.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();e.grdsq=b[0].replace(e.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();e.easting=b[0].replace(e.gzd+e.grdsq,"").match(/^\d{1,5}/)[0].trim();e.northing=b[0].replace(e.gzd+e.grdsq,"").match(/\d{1,5}$/)[0].trim();b=c.replace(/Y/,e.northing);b=b.replace(/X/,e.easting);
b=b.replace(/S/,e.grdsq);b=b.replace(/Z/,e.gzd);e.formatResult=b;return e},getFormattedMGRSStr:function(b,c){var e={};e.sourceValue=b;e.sourceFormatString=c;b[0].match(/^[ABYZ]/)?e.gzd=b[0].match(/[ABYZ]/)[0].trim():e.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();e.grdsq=b[0].replace(e.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();e.easting=b[0].replace(e.gzd+e.grdsq,"").match(/^\d{1,5}/)[0].trim();e.northing=b[0].replace(e.gzd+e.grdsq,"").match(/\d{1,5}$/)[0].trim();b=c.replace(/Y/,e.northing);b=
b.replace(/X/,e.easting);b=b.replace(/S/,e.grdsq);b=b.replace(/Z/,e.gzd);e.formatResult=b;return e},getFormattedGARSStr:function(b,c){var e={};e.sourceValue=b;e.sourceFormatString=c;e.lon=b[0].match(/\d{3}/);e.lat=b[0].match(/[a-zA-Z]{2}/);b=b[0].match(/\d*$/);e.quadrant=b[0][0];e.key=b[0][1];c=c.replace(/K/,e.key);c=c.replace(/Q/,e.quadrant);c=c.replace(/Y/,e.lat);c=c.replace(/X/,e.lon);e.formatResult=c;return e},getFormattedGEOREFStr:function(b,c){var e={};e.sourceValue=b;e.sourceFormatString=c;
e.lon=b[0].match(/[a-zA-Z]{1}/)[0].trim();e.lat=b[0].replace(e.lon,"").match(/[a-zA-Z]{1}/)[0].trim();e.quadrant15lon=b[0].replace(e.lon+e.lat,"").match(/[a-zA-Z]{1}/)[0].trim();e.quadrant15lat=b[0].replace(e.lon+e.lat+e.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();b=b[0].replace(e.lon+e.lat+e.quadrant15lon+e.quadrant15lat,"");e.quadrant1lon=b.substr(0,b.length/2);e.quadrant1lat=b.substr(b.length/2,b.length);c=c.replace(/Y/,e.quadrant1lat);c=c.replace(/X/,e.quadrant1lon);c=c.replace(/D/,e.quadrant15lat);
c=c.replace(/C/,e.quadrant15lon);c=c.replace(/B/,e.lat);c=c.replace(/A/,e.lon);e.formatResult=c;return e},getFormattedUTMStr:function(b,c){var e={};e.sourceValue=b;e.sourceFormatString=c;e.parts=b[0].split(/[ ,]+/);e.zone=e.parts[0].replace(/[A-Z]/,"");e.bandLetter=e.parts[0].slice(-1);e.easting=e.parts[1];e.westing=e.parts[2];b=c.replace(/Y/,e.westing);b=b.replace(/X/,e.easting);b=b.replace(/B/,e.bandLetter);b=b.replace(/Z/,e.zone);e.formatResult=b;return e},getFormattedUTMHStr:function(b,c){var e=
{};e.sourceValue=b;e.sourceFormatString=c;e.parts=b[0].split(/[ ,]+/);e.zone=e.parts[0].replace(/[A-Z]/,"");e.hemisphere=e.parts[0].slice(-1);e.easting=e.parts[1];e.westing=e.parts[2];b=c.replace(/Y/,e.westing);b=b.replace(/X/,e.easting);b=b.replace(/H/,e.hemisphere);b=b.replace(/Z/,e.zone);e.formatResult=b;return e},convertMetersToUnits:function(b,c){var e=0;switch(c.toLowerCase()){case "meters":e=b;break;case "feet":e=3.28084*b;break;case "kilometers":e=.001*b;break;case "miles":e=6.21371E-4*b;
break;case "nautical-miles":e=5.39957E-4*b;break;case "yards":e=1.09361*b}return e},convertToMeters:function(b,c){var e=b;switch(c){case "meters":e=b;break;case "feet":e=.3048*b;break;case "kilometers":e=1E3*b;break;case "miles":e=1609.34*b;break;case "nautical-miles":e=1852.001376036*b;break;case "yards":e=.9144*b}return e},_fetchPortalGeomSrvcUrl:function(){var b=new C;this.appConfig.portalUrl&&""!==B.trim(this.appConfig.portalUrl)?I.getPortalSelfInfo(this.appConfig.portalUrl).then(B.hitch(this,
function(c){c=c&&c.helperServices;var e="";c&&c.geometry&&c.geometry.url&&""!==c.geometry.url&&(e=c.geometry.url);b.resolve(e)}),B.hitch(this,function(){b.resolve("")})):b.resolve("");return b.promise}})})},"widgets/DistanceAndDirection/models/dialogConfirm":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Deferred dojo/dom-construct dijit/Dialog dijit/form/Button dijit/form/CheckBox jimu/utils".split(" "),function(O,f,C,g,y,B,I,b){return f(y,{okButton:null,cancelButton:null,skipCheckBox:null,
hasOkButton:!0,hasCancelButton:!0,hasSkipCheckBox:!0,hasUnderlay:!0,dfd:null,buttonNode:null,constructor:function(c){O.mixin(this,c)},postCreate:function(){this.inherited("postCreate",arguments);var c=!1;var e=g.create("div",{className:"dijitDialogPaneContent dialogConfirm"},this.domNode,"last");this.hasSkipCheckBox&&(this.skipCheckBox=new I({checked:!1},g.create("div")),e.appendChild(this.skipCheckBox.domNode),g.create("label",{"for":this.skipCheckBox.id,innerHTML:b.sanitizeHTML(this.nls.rememberDecisionMessage)},
e));this.hasOkButton&&(this.okButton=new B({label:this.nls.common.ok,onClick:O.hitch(this,function(){c=this.hasSkipCheckBox?this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.resolve(c)})},g.create("div")),e.appendChild(this.okButton.domNode));this.hasCancelButton&&(this.cancelButton=new B({label:this.nls.common.cancel,onClick:O.hitch(this,function(){c=this.hasSkipCheckBox?this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.cancel(c)})},g.create("div")),e.appendChild(this.cancelButton.domNode));
this.buttonNode=e},show:function(){this.inherited("show",arguments);this.hasUnderlay||g.destroy(this.id+"_underlay");return this.dfd=new C}})})},"widgets/DistanceAndDirection/models/ConfirmNotation":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ConfirmNotation.html jimu/utils".split(" "),function(O,f,C,g,y,B){return O([f,C,g],{templateString:y,numberOfInputs:0,selectOptions:{},constructor:function(I,b){this.numberOfInputs=b.length;
this.selectOptions=b},postCreate:function(){this.label1.innerHTML=B.sanitizeHTML(this.numberOfInputs+this.nls.multipleNotationsMessage);for(var I=0;I<this.selectOptions.length;I++)this.comboOptions.addOption({value:this.selectOptions[I].name,label:this.selectOptions[I].notationType})}})})},"widgets/DistanceAndDirection/views/EditOutputCoordinate":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/EditOutputCoordinate.html jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(O,f,C,g,y,B,I,b,c){return O([B,I,b],{templateString:c,formats:{},ct:"DD",_setCtAttr:function(e){this.frmtSelect.set("value",e)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,
useCustom:!1},MGRS:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},"UTM (H)":{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};y.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(this.frmtSelect.on("change",f.hitch(this,this.frmtSelectValueDidChange)));this.own(g(this.frmtVal,"change",f.hitch(this,this.formatValDidChange)));this.displayPrefixContainer()},
formatValDidChange:function(){var e=y.get(this.frmtVal,"value"),h=this.frmtSelect.get("value");this.formats[h].customFormat=e;this.formats[h].useCustom=!0;this.currentformat=e},frmtSelectValueDidChange:function(){var e=this.frmtSelect.get("value"),h=this.formats[e].useCustom?this.formats[e].customFormat:this.formats[e].defaultFormat;this.ct=e;y.set(this.frmtVal,"value",h);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.frmtSelect.get("value")){case "DD":case "DDM":case "DMS":C.set(this.prefixContainer,
{display:""});break;default:C.set(this.prefixContainer,{display:"none"})}}})})},"widgets/DistanceAndDirection/models/DirectionalLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/Stateful esri/geometry/screenUtils esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol esri/graphic esri/geometry/ScreenPoint esri/geometry/geometryEngine dojo/_base/fx dojo/fx dojo/on".split(" "),function(O,f,C,g,y,B,I,b,c,e,h,d){return O([y,C],{constructor:function(a){this.inherited(arguments);
this.setStyle(a.style);this.setColor(a.color);this.setWidth(a.width);this.directionSymbols={arrow1:"m0.5,50.5c0,0 99.5,-41 99.5,-41c0,0 0.5,81.5 0.5,81.5c0,0 -100,-40.5 -100,-40.5z",arrow2:"M1,50l99.5,-50c0,0 -40,49.5 -40,49.5c0,0 39.5,50 39.5,50c0,0 -99,-49.5 -99,-49.5z",arrow3:"m0.5,50.5l90,-50l9,9.5l-79.5,40.5l80,39.5l-10,10.5l-89.5,-50z",arrow4:"m55.4605,51.5754l43.0685,-48.2908l-43.3797,48.2908l43.8197,44.8899l-43.5085,-44.8899zm-6.0505,42.3899l-0.44,-88.1807l-43.37967,45.7908l43.81967,42.3899z"};
this.directionColor=a.directionColor||this.color;this.directionSize=a.directionSize||12;this.directionPixelBuffer=a.directionPixelBuffer||40;this.animationRepeat=a.animationRepeat;this.animationDuration=a.animationDuration||350;this.directionSymbol=a.directionSymbol||"arrow1";this.showDirectionalSymbols=a.showDirectionalSymbols||!0;this.showStartSymbol=a.showStartSymbol||!1;this.startSymbol=a.startSymbol||new B({color:[128,128,128,64],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,
0,0,255],width:2,type:"esriSLS",style:"esriSLSSolid"}});this.showEndSymbol=a.showEndSymbol||!1;this.endSymbol=a.startSymbol||new B({color:[128,128,128,64],size:8,type:"esriSMS",style:"esriSMSX",outline:{color:[0,0,0,255],width:2,type:"esriSLS",style:"esriSLSSolid"}});this.graphics=[];this.map=null;this.drawGraphicDirection=this._drawDirection;this.type="DirectionalLineSymbol"},getStroke:function(){var a=0<arguments.callee.caller.arguments.length?arguments.callee.caller.arguments[4]:arguments.callee.caller.caller.arguments[4];
if(!a||a.dlsSymbolGroup)return this.inherited(arguments);this.graphics.push(a);var m=a.getLayer(),t=this.map=m.getMap();a.dlsSymbolGroup=m._div.createGroup();this._drawDirection(a,m,t);m.dlsGraphicRemove||(m.dlsGraphicRemove=m.on("graphic-remove",function(k){k.graphic.dlsSymbolGroup&&(dojo.query(".dls-symbol",k.graphic.dlsSymbolGroup.rawNode).forEach(dojo.destroy),dojo.destroy(k.graphic.dlsSymbolGroup.rawNode),k.graphic.dlsSymbolGroup=null)}));var l=null,u=null;t.graphics.dlsGraphicDraw||(t.graphics.dlsGraphicDraw=
t.graphics.on("graphic-draw",function(k){k.graphic.dlsSymbolGroup&&(l=k.graphic,(u="DirectionalLineSymbol"===l.symbol.type?l.symbol:l.symbol.outline&&"DirectionalLineSymbol"===l.symbol.outline.type?l.symbol.outline:null)&&u.drawGraphicDirection(l,this,this.getMap()))}));t.dlsExtChanged||(t.dlsExtChanged=t.on("extent-change",function(){for(var k=0,G=this.graphics.graphics.length;k<G;k++)if(l=this.graphics.graphics[k],l.symbol)if(l.attributes&&l.attributes.isDirectionalGraphic)this.graphics.remove(l),
k--,G--;else{var H="DirectionalLineSymbol"===l.symbol.type?l.symbol:l.symbol.outline&&"DirectionalLineSymbol"===l.symbol.outline.type?l.symbol.outline:null;H&&H.drawGraphicDirection(l,m,this)}for(k=0;k<this.graphicsLayerIds.length;k++)if(m=this.getLayer(this.graphicsLayerIds[k]),m.dlsGraphicRemove)for(G=0,H=m.graphics.length;G<H;G++)l=m.graphics[G],l.symbol&&(l.attributes&&l.attributes.isDirectionalGraphic?(m.remove(l),G--,H--):l.symbol.drawGraphicDirection(l,m,this))}));return this.inherited(arguments)},
_drawDirection:function(a,m,t){if(a.dlsSymbolGroup){var l=a.dlsSymbolGroup,u=a.geometry;u.spatialReference.wkid!==t.spatialReference.wkid&&(esri.geometry.canProject(u,t)?u=esri.geometry.project(u,t):console.error("Can't project geometry wkid - "+u.spatialReference.wkid+" to map wkid "+t.spatialReference.wkid));a.directions=[];dojo.query(".dls-symbol",a.dlsSymbolGroup.rawNode).forEach(dojo.destroy);var k=g.toScreenGeometry(t.extent,t.width,t.height,u);t=g.toScreenGeometry(t.extent,t.width,t.height,
t.extent);if(k="polyline"===u.type?k.paths:k.rings){if(this.showStartSymbol&&(u=this._getFirstItem(k),u=this._createGraphic(u,this.startSymbol),u.geometry)){m.add(u);var G=u.getShape();G?(l.add(G),u.attr("class","dls-symbol"),a.directions.push(u),a.visible||u.hide(),u.origJson=u.toJson(),u.toJson=this.directionGraphicToJson):m.remove(u)}if(this.showDirectionalSymbols)for(u=0,G=k.length;u<G;u++)for(var H=k[u],z=0,L=H.length-1;z<L;z++)if(z!==H.length){var S=H[z],M=H[z+1],U=this._getAngle(S,M);S=this._getDirectionPoints(S,
M,t);M=0;for(var W=S.length;M<W;M++){var Q=this._createGraphic(S[M],this._createSymbol(this.directionSymbol,U));m.add(Q);var q=Q.getShape();l.add(q);Q.attr("class","dls-symbol");a.directions.push(Q);a.visible||Q.hide();Q.origJson=Q.toJson();Q.toJson=this.directionGraphicToJson}}this.showEndSymbol&&(u=this._getSecondToLastItem(k))&&(t=this._getLastItem(k))&&!this._isEqual(u,t)&&(k=this._getAngle(u,t),k=this._createSymbol(this.endSymbol,k),t=this._createGraphic(t,k),t.geometry&&(m.add(t),(k=t.getShape())?
(l.add(k),t.attr("class","dls-symbol"),a.directions.push(t),a.visible||t.hide(),t.origJson=t.toJson(),t.toJson=this.directionGraphicToJson):m.remove(t)));a.dlsAnimationRepeat&&(1<a.dlsAnimationRepeat||Infinity===a.dlsAnimationRepeat)&&this._animateGraphic(a,a.dlsAnimationRepeat)}else console.error("Can't apply DirectionalLineSymbol to geometry "+u.type)}},_getLastItem:function(a){return a[a.length-1][a[a.length-1].length-1]},_getSecondToLastItem:function(a){return a[a.length-1][a[a.length-1].length-
2]},_getFirstItem:function(a){return a[0][0]},_getAngle:function(a,m){return 180/Math.PI*Math.atan2(m[1]-a[1],m[0]-a[0])-180},_isEqual:function(a,m){var t=Object.getOwnPropertyNames(a),l=Object.getOwnPropertyNames(m);if(t.length!==l.length)return!1;for(l=0;l<t.length;l++){var u=t[l];if(a[u]!==m[u])return!1}return!0},_createSymbol:function(a,m){if("simplemarkersymbol"===a.type||"picturemarkersymbol"===a.type)var t=f.clone(a);else"string"===typeof a?(t=new B,t.setSize(this.directionSize).setPath(this.directionSymbols[a]?
this.directionSymbols[a]:a).setOutline(null).setColor(this.directionColor)):console.error("Symbol must be set to one of the pre-defined strings {'arrow1', 'arrow2', 'arrow3', 'arrow4'}, or a SimpleMarkerSymbol or PictureMarkerSymbol.");t.setAngle(m);return t},_createGraphic:function(a,m){var t=new I;t.setSymbol(m);t.attributes={isDirectionalGraphic:!0};a=new b(a[0],a[1]);a=this.map.toMap(a);t.geometry=c.within(a,this.map.extent)?a:null;return t},_getDirectionPoints:function(a,m,t){var l=[],u=a[0]<
m[0]?a[0]:m[0],k=a[0]>m[0]?a[0]:m[0],G=a[1]<m[1]?a[1]:m[1],H=a[1]>m[1]?a[1]:m[1],z=t.xmin<t.xmax?t.xmin:t.xmax,L=t.xmin>t.xmax?t.xmin:t.xmax,S=t.ymin<t.ymax?t.ymin:t.ymax;t=t.ymin>t.ymax?t.ymin:t.ymax;m=[m[0]-a[0],m[1]-a[1]];var M=Math.sqrt(m[0]*m[0]+m[1]*m[1]);if(M<this.directionPixelBuffer)return l;m[0]=m[0]/M*this.directionPixelBuffer;m[1]=m[1]/M*this.directionPixelBuffer;for(a=[a[0]+m[0],a[1]+m[1]];a[0]>=u&&a[0]<=k&&a[1]>=G&&a[1]<=H;)a[0]>=z&&a[0]<=L&&a[1]>=S&&a[1]<=t&&l.push([a[0],a[1]]),a=[a[0]+
m[0],a[1]+m[1]];return l},get:function(a){return this[a]?this[a]:null},_setDirectionSymbolAttr:function(a){this._set("directionSymbol",a);this._drawDirection()},_setStartSymbolAttr:function(a){this._set("startSymbol",a);this._drawDirection()},_setEndSymbolAttr:function(a){this._set("endSymbol",a);this._drawDirection()},_setShowStartSymbolAttr:function(a){this._set("showStartSymbol",a);this._drawDirection()},_setShowEndSymbolAttr:function(a){this._set("showEndSymbol",a);this._drawDirection()},animateDirection:function(a,
m){a&&(a=parseInt(a,10),isNaN(a)&&(a=Infinity),this.animationRepeat=a);if(!this.animationRepeat||1>this.animationRepeat)this.stopAnimation();else for(m&&(this.animationDuration=m),this.animationChain=null,this.animationEnd&&this.animationEnd.remove(),m=0,a=this.graphics.length;m<a;m++){var t=this.graphics[m];t.dlsSymbolGroup&&this._animateGraphic(t,this.animationRepeat)}},_animateGraphic:function(a,m){var t=[],l=this.animationDuration;a.dlsAnimationChain&&a.dlsAnimationChain.stop();dojo.query(".dls-symbol",
a.dlsSymbolGroup.rawNode).forEach(function(u){e.fadeOut({node:u,duration:10}).play();u=e.fadeIn({node:u,duration:l});t.push(u)});a.dlsAnimationRepeat=m;a.dlsAnimationChain=h.chain(t);a.dlsAnimationEnd=d(a.dlsAnimationChain,"End",f.hitch(this,function(){!isNaN(m)&&1<m?(m--,this._animateGraphic(a,m)):Infinity===m&&this._animateGraphic(a,m)}));try{a.dlsAnimationChain.play()}catch(u){}},stopAnimation:function(){for(var a=0,m=this.graphics.length;a<m;a++){var t=this.graphics[a];t.dlsSymbolGroup&&(dojo.query(".dls-symbol",
t.dlsSymbolGroup.rawNode).forEach(function(l){e.fadeIn({node:l,duration:10}).play()}),t.dlsAnimationRepeat=0,t.dlsAnimationChain&&t.dlsAnimationChain.stop(),t.dlsAnimationEnd&&t.dlsAnimationEnd.remove())}},toJson:function(){return y.prototype.toJson.call(this)},directionGraphicToJson:function(){if(this.jsonUpdated||!this.origJson.symbol||!this.origJson.symbol.angle)return this.origJson;this.origJson.symbol.angle*=-1;this.jsonUpdated=!0;return this.origJson}})})},"widgets/DistanceAndDirection/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dijit/focus dojo/keys dojo/dom-style dojo/domReady!".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d,a){return O([f,C],{templateString:b,baseClass:"jimu-widget-DistanceAndDirection-symbolChooserPopup",postCreate:function(){this.own(I(this.okButton,"click",g.hitch(this,this._onOKButtonClicked)));this.own(I(this.okButton,"keydown",g.hitch(this,function(m){m.keyCode!==d.ENTER&&m.keyCode!==d.SPACE||this._onOKButtonClicked()})));this._initSymbolChooser();this._createSymbolChooserPopup();this._isAndroid()&&(this.popup.width=355,a.set(this.symbolChooser.domNode,"width",
"280px"))},_initSymbolChooser:function(){this.symbolChooser=new c(this.symbolParams,B.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new e({titleLabel:this.symbolChooserTitle,width:420,height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!y.contains(this.okButton,"jimu-state-disabled"))if(this._validatePointSymbolSize())if(this._validatePointOutlineWidth())if(this._validateLineWidth())if(this._validatePolygonOutlineWidth())this.onOkClick();
else h.focus(this.symbolChooser.fillOutlineWidth.focusNode);else h.focus(this.symbolChooser.lineWidth.focusNode);else h.focus(this.symbolChooser.pointOutlineWidth.focusNode);else h.focus(this.symbolChooser.pointSize.focusNode)},onOkClick:function(m){return m},_validatePointSymbolSize:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("pointSize")?this.symbolChooser.pointSize.isValid():!0},_validatePolygonOutlineWidth:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("fillOutlineWidth")?
this.symbolChooser.fillOutlineWidth.isValid():!0},_validatePointOutlineWidth:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("pointOutlineWidth")?this.symbolChooser.pointOutlineWidth.isValid():!0},_validateLineWidth:function(){if(this.symbolChooser&&this.symbolChooser.hasOwnProperty("lineWidth"))if(this.symbolChooser.lineWidth.isValid()){var m=this.symbolChooser.lineWidth.getValue();if(""===m||null===m||void 0===m||isNaN(m))return this.symbolChooser.lineWidth.setValue("0"),
!1}else return!1;return!0},_isAndroid:function(){return-1<navigator.userAgent.toLowerCase().indexOf("android")}})})},"widgets/DistanceAndDirection/setting/js/ColorPickerEditor":function(){define("dojo/_base/declare dojo/_base/Color dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!../templates/ColorPickerEditor.html jimu/dijit/ColorPickerPopup dojo/on dojo/_base/lang dijit/form/NumberSpinner".split(" "),function(O,f,C,g,y,B,I,b,c,e){return O([C,g,y,B],{_defaultColor:"#485566",
templateString:I,nls:null,postCreate:function(){this.colorPicker=new b({color:this._defaultColor,width:this._defaultWidth},this.colorPicker);this.colorPicker.startup();this.inherited(arguments);this.own(c(this.colorPicker,"change",e.hitch(this,function(){this.emit("colorChanged",this.tab)})))},startup:function(){this.inherited(arguments)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var h=null,d=this.colorPicker.getColor();d&&(h=d);return h},
setValues:function(h){if("object"===typeof h||"string"===typeof h)h=this._rgbToHex(h.color),this.colorPicker.setColor(new f(h))},_hexToRgb:function(h){return(h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h))?{r:parseInt(h[1],16),g:parseInt(h[2],16),b:parseInt(h[3],16)}:null},_componentToHex:function(h){h=h.toString(16);return 1===h.length?"0"+h:h},_rgbToHex:function(h){return"#"+this._componentToHex(h.r)+this._componentToHex(h.g)+this._componentToHex(h.b)}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h){return O([f,C],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){c.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;y.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;y.addClass(this.domNode,"disable")},isPartOfPopup:function(d){var a=this.tooltipDialog.domNode;return d===a||y.isDescendant(d,a)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},isOpen:function(){return this._isTooltipDialogOpened},_showTooltipDialog:function(){c.open({parent:this.getParent(),
popup:this.tooltipDialog,around:this.around?this.around:this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){c.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var d=y.create("div");this.tooltipDialog=new b({content:d});y.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var a=new e({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,
closeDialogWhenChange:!0},recordUID:this.recordUID,onChange:g.hitch(this,function(m){m&&(m=new I(m),this.setColor(m),this.onChange(m))})});a.placeAt(d);a.startup();this.own(B(a,"close",g.hitch(this,function(){this._hideTooltipDialog()})));this.own(B(a,"change-style",g.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(B(this.domNode,"click",g.hitch(this,function(m){m.stopPropagation();m.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==
this._ENABLE&&this._showTooltipDialog()})));this.own(B(document,"click",g.hitch(this,function(m){this.isPartOfPopup(m.srcElement||m.target)||this._hideTooltipDialog()})));this.picker=a},setColor:function(d){if(d instanceof I){null===this.color&&!0===this.showLabel&&this._changeLabel(d);var a=d.toHex();this.color=d;y.setStyle(this.domNode,"backgroundColor",a);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(a,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},
_changeLabel:function(d){y.empty(this.domNode);y.create("span",{innerHTML:d.toHex(),className:"color-label",style:{color:h.invertColor(d.toHex())}},this.domNode)},onChange:function(d){d&&this.showLabel&&this._changeLabel(d)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(d){this.domNode.title=d},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"dijit/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d,a,m,t){f=f("dijit.TitlePane",[a,d,h],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:t.defaultDuration,baseClass:"dijitTitlePane",templateString:m,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);C.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,
this.baseClass+"Title");var l=this.hideNode,u=this.wipeNode;this._wipeIn=I.wipeIn({node:u,duration:this.duration,beforeBegin:function(){l.style.display=""}});this._wipeOut=I.wipeOut({node:u,duration:this.duration,onEnd:function(){l.style.display="none"}})},_setOpenAttr:function(l,u){O.forEach([this._wipeIn,this._wipeOut],function(k){k&&"playing"==k.status()&&k.stop()});u?this[l?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=l?"":"none";if(this._started)if(l)this._onShow();
else this.onHide();this.containerNode.setAttribute("aria-hidden",l?"false":"true");this.focusNode.setAttribute("aria-pressed",l?"true":"false");this._set("open",l);this._setCss()},_setToggleableAttr:function(l){this.focusNode.setAttribute("role",l?"button":"heading");l?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(g.remove(this.focusNode,"aria-controls"),g.remove(this.focusNode,
"tabIndex"),g.remove(this.focusNode,"aria-pressed"));this._set("toggleable",l);this._setCss()},_setContentAttr:function(l){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),B.setMarginBox(this.wipeNode,{h:B.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var l=
this.titleBarNode||this.focusNode,u=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");y.replace(l,this._titleBarClass,u||"");y.replace(l,this._titleBarClass.replace("TitlePaneTitle",""),(u||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(l){l.keyCode==e.DOWN_ARROW&&this.open&&(this.containerNode.focus(),l.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},
setTitle:function(l){c.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",l)}});b("dojo-bidi")&&f.extend({_setTitleAttr:function(l){this._set("title",l);this.titleNode.innerHTML=l;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(l){this._set("tooltip",l);this.textDir&&(l=this.enforceTextDirWithUcc(null,l));g.set(this.focusNode,"title",l)},_setTextDirAttr:function(l){this._created&&this.textDir!=l&&(this._set("textDir",l),this.set("title",
this.title),this.set("tooltip",this.tooltip))}});return f})},"widgets/DistanceAndDirection/views/TabCircle":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/has dojo/touch dojo/dom-attr dojo/dom-class dojo/string dojo/mouse dojo/number dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos esri/layers/FeatureLayer esri/symbols/SimpleFillSymbol esri/symbols/SimpleMarkerSymbol esri/symbols/TextSymbol esri/graphic esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Point esri/geometry/Circle esri/tasks/FeatureSet ../models/CircleFeedback ../views/CoordinateInput ../views/EditOutputCoordinate dojo/text!../templates/TabCircle.html jimu/utils dijit/focus dojo/_base/event dojo/aspect dojo/dom-construct jimu/symbolUtils ../SymbolChooserPopup ../setting/js/ColorPickerEditor dojo/_base/Color esri/layers/GraphicsLayer dijit/form/NumberSpinner dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox dijit/TitlePane".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d,a,m,t,l,u,k,G,H,z,L,S,M,U,W,Q,q,n,x,J,K,r,p,E,F,V,Z,aa,ia,da,D,R,Y){return O([m,t,l],{templateString:p,baseClass:"jimu-widget-TabCircle",_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,_gl:null,constructor:function(A){O.safeMixin(this,A);this._textGL=this._gl=null},destroy:function(){this._gl&&this.map.removeLayer(this._gl);this._textGL&&this.map.removeLayer(this._textGL);this.tabSwitched()},postCreate:function(){this._centerPointInputKeyPressed=
this._restrictFocusOnAddCenterPointBtn=this.useCalculatedDistance=!1;this.currentLengthUnit=this.lengthUnitDD.get("value");this._circleSym=new L(this.circleSymbol);this._ptSym=new S(this.pointSymbol);this._labelSym=new M(this.labelSymbol);this._textGL=new Y;this.map.addLayer(this.getLayer());this.map.addLayer(this._textGL);this.own(g(this._gl,"visibility-change",f.hitch(this,function(P){this._textGL&&this._textGL.setVisibility(P.visible)})));if(this._gl.loaded){var A=H.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");
A.showLabels();A.enablePopup()}else this._gl.on("load",f.hitch(this,function(){var P=H.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");P.showLabels();P.enablePopup()}));this.coordTool=new K({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.startPointCoords);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new u({content:new r({nls:this.nls}),style:"width: 400px"});Z.after(this.coordinateFormat,"onClose",f.hitch(this,
function(){F.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var P=this.coordTool.getValue();if(""===P||null===P||void 0===P)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&c.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt=new J({appConfig:this.appConfig,map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls});this.dt.setFillSymbol(this._circleSym);this._createSymbolPicker(this.circleSymbolNode,
"circleSymbol","esriGeometryPolygon",this.nls.circleSymbologyPopupTittle);this.labelColorPicker=this._createColorPicker(this.labelColorPickerNode);this._setColorPicker(this.labelSymbol.color);this.labelTextSizeSpinner.set("value",this.labelSymbol.font.size);this.syncEvents();this.checkValidInputs();this.radiusInput.invalidMessage=this.nls.numericInvalidMessage;this.radiusInput.rangeMessage=this.nls.rangeErrorMessage;this.timeInput.invalidMessage=this.nls.numericInvalidMessage;this.timeInput.rangeMessage=
this.nls.invalidTimeMessage;this.distanceInput.invalidMessage=this.nls.numericInvalidMessage;this.distanceInput.rangeMessage=this.nls.invalidDistanceMessage;this.distCalcControl.set("title",this.nls.distanceCalculatorLabel)},getLayer:function(){if(!this._gl){var A={layerDefinition:{id:"circleLayer",geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"Label",type:"esriFieldTypeString",alias:"Label"}]},featureSet:new x};
return this._gl=new z(A,{id:"Distance \x26 Direction - Circle Graphics",showLabels:!0,outFields:["*"]})}},syncEvents:function(){y.subscribe("TAB_SWITCHED",f.hitch(this,this.tabSwitched));y.subscribe("DD-WIDGET-CLOSED",f.hitch(this,this._closeDijit));this.distCalcControl.watch("open",f.hitch(this,this.distCalcDidExpand));this.dt.watch("length",f.hitch(this,function(A,P,ba){this.circleLengthDidChange(ba)}));this.dt.watch("startPoint",f.hitch(this,function(A,P,ba){this.dt.addStartGraphic(ba,this._ptSym)}));
this.dt.watch("startPointDD",f.hitch(this,function(A,P,ba){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",ba);this.coordTool.inputCoordinate.set("inputType",this.coordTool.inputCoordinate.formatType)}));this.dt.watch("endPoint",f.hitch(this,function(A,P,ba){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",ba)}));this.coordTool.inputCoordinate.watch("outputString",f.hitch(this,function(A,P,ba){this.coordTool.manualInput||(this.coordTool.set("value",ba),this.currentCircle=null,
this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:F.focus(this.addPointBtn))}));this.dt.on("draw-complete",f.hitch(this,this.feedbackDidComplete));this.own(g(this.coordTool,"keydown",f.hitch(this,this.coordToolKeyWasPressed)),this.lengthUnitDD.on("change",f.hitch(this,this.lengthUnitDDDidChange)),this.creationType.on("change",f.hitch(this,this.creationTypeDidChange)),this.distanceUnitDD.on("change",
f.hitch(this,this.distanceInputDidChange)),this.timeUnitDD.on("change",f.hitch(this,this.timeInputDidChange)),g(this.radiusInput,"change",f.hitch(this,function(){this.currentCircle=null})),g(this.coordinateFormatButton,"click",f.hitch(this,this.coordinateFormatButtonWasClicked)),g(this.coordinateFormatButton,"keydown",f.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE)V.stop(A),this.coordinateFormatButtonWasClicked()})),g(this.addPointBtn,"keydown",f.hitch(this,function(A){if(A.keyCode===
a.ENTER||A.keyCode===a.SPACE)V.stop(A),this.pointButtonWasClicked()})),g(this.timeInput,"change",f.hitch(this,this.timeInputDidChange)),g(this.distanceInput,"change",f.hitch(this,this.distanceInputDidChange)),g(this.distanceInput,"keyup",f.hitch(this,this.distanceInputKeyWasPressed)),g(this.clearGraphicsButton,"click",f.hitch(this,this.clearGraphics)),g(this.clearGraphicsButton,"keydown",f.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE)V.stop(A),this.clearGraphics()})),g(this.interactiveCircle,
"change",f.hitch(this,this.interactiveCheckBoxChanged)),g(this.interactiveCircle,"keydown",f.hitch(this,function(A){A.keyCode===a.ENTER&&(this.interactiveCircle.checked=this.interactiveCircle.checked?!1:!0,this.interactiveCheckBoxChanged())})),g(this.coordinateFormat.content.applyButton,"click",f.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var A=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],P=A.defaultFormat,ba=this.coordinateFormat.content.frmtSelect.get("value");
A.useCustom&&(P=A.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",P);this.coordTool.inputCoordinate.set("formatType",ba);this.setCoordLabel(ba);k.close(this.coordinateFormat);F.focus(this.coordinateFormatButton)})),g(this.coordinateFormat.content.applyButton,"keydown",f.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE){V.stop(A);this._restrictFocusOnAddCenterPointBtn=
!0;var P=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],ba=P.defaultFormat,w=this.coordinateFormat.content.frmtSelect.get("value");P.useCustom&&(ba=P.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",ba);this.coordTool.inputCoordinate.set("formatType",w);this.setCoordLabel(w);k.close(this.coordinateFormat);F.focus(this.coordinateFormatButton)}A.keyCode===a.ESCAPE&&
(V.stop(A),k.close(this.coordinateFormat),F.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.cancelButton,"click",f.hitch(this,function(){k.close(this.coordinateFormat)})),g(this.coordinateFormat.content.cancelButton,"keydown",f.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE)V.stop(A),k.close(this.coordinateFormat),F.focus(this.coordinateFormatButton);A.keyCode===a.ESCAPE&&(V.stop(A),k.close(this.coordinateFormat),F.focus(this.coordinateFormatButton))})),
g(this.coordinateFormat.content.frmtSelect,"keydown",f.hitch(this,function(A){A.keyCode===a.ESCAPE&&(V.stop(A),k.close(this.coordinateFormat),F.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.frmtVal,"keydown",f.hitch(this,function(A){A.keyCode===a.ESCAPE&&(V.stop(A),k.close(this.coordinateFormat),F.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.addSignChkBox,"keydown",f.hitch(this,function(A){A.keyCode===a.ESCAPE&&(V.stop(A),k.close(this.coordinateFormat),
F.focus(this.coordinateFormatButton));A.keyCode===a.ENTER&&(V.stop(A),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),g(this.radiusInputDiv,h.leave,f.hitch(this,this.checkValidInputs)),g(this.okButton,"keydown",f.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE)V.stop(A),this.okButtonClicked()})));B("esri-touch")?this.own(g(this.addPointBtn,I.press,f.hitch(this,this.pointButtonWasClicked))):this.own(g(this.addPointBtn,
"click",f.hitch(this,this.pointButtonWasClicked)));this.own(g(this.labelColorPicker,"colorChanged",f.hitch(this,function(A){"circle"===A&&(this._labelSym.color=this._getColorPicker())})));this.own(g(this.labelTextSizeSpinner,"change",f.hitch(this,function(){this._labelSym.font.size=this.labelTextSizeSpinner.getValue()})));this.own(g(this.labelColorPickerNode,"keydown",f.hitch(this,function(A){A.keyCode!==a.ENTER&&A.keyCode!==a.SPACE||this.labelColorPicker.colorPicker.domNode.click()})));this.own(g(this.labelTextSizeSpinner,
"blur",f.hitch(this,function(){this.labelTextSizeSpinner.isValid()||this.labelTextSizeSpinner.set("value",this.labelSymbol.font.size)})))},circleLengthDidChange:function(A){var P=d.format(A,{places:2,locale:C.locale});this.radiusInput.set("displayedValue",P);this.radiusInput.set("value",A)},interactiveCheckBoxChanged:function(){this.tabSwitched();this.interactiveCircle.checked?(this.radiusInput.set("disabled",!0),this.distCalcControl.set("open",!1),this.distCalcControl.set("open",!1),this.distCalcControl.set("toggleable",
!1)):(this.radiusInput.set("disabled",!1),this.distCalcControl.set("disabled",!1),this.distCalcControl.set("toggleable",!0));this.checkValidInputs()},coordToolKeyWasPressed:function(A){this.dt.removeStartGraphic();A.keyCode===a.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(f.hitch(this,function(P){"UNKNOWN"===P.inputType?(new G({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=
null,this.checkValidInputs()):this.dt.getProjectedGeometry(P.coordinateEsriGeometry,this.map.spatialReference).then(f.hitch(this,f.hitch(this,function(ba){y.publish("manual-circle-center-point-input",ba);this.setCoordLabel(P.inputType);this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[P.inputType].defaultFormat);this.coordTool.inputCoordinate.set("formatType",P.inputType);this.dt.addStartGraphic(ba,this._ptSym);this.checkValidInputs()})))})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",
this.coordTool.inputCoordinate.formatType);k.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});F.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&k.close(this.coordinateFormat)},distCalcDidExpand:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this.coordTool.inputCoordinate.isManual=!0;this.distCalcControl.get("open")?this.radiusInput.set("disabled",
!0):(this.radiusInput.set("disabled",!1),this.timeInput.set("value",1),this.distanceInput.set("value",1))},timeInputDidChange:function(){this.currentTimeInSeconds=this.timeInput.get("value")*this.timeUnitDD.get("value");this.getCalculatedDistance();this.currentCircle=null},distanceInputKeyWasPressed:function(A){this.distanceInputDidChange();A.keyCode===a.ENTER&&(this.coordTool.inputCoordinate.outputString&&""!==this.coordTool.inputCoordinate.inputString?(this.removeManualGraphic(),this.setGraphic(!0),
this.dt._onDoubleClickHandler()):new G({message:this.nls.noCenterPointSetMessage}))},okButtonClicked:function(){c.contains(this.okButton,"jimu-state-disabled")||(this._restrictFocusOnAddCenterPointBtn=!0,this.removeManualGraphic(),this.currentCircle||this.setGraphic(!0),this.emit("show-publish",this._gl))},distanceInputDidChange:function(){this.currentDistanceInMeters=this.distanceInput.get("value")*this.distanceUnitDD.value.split(";")[0]/this.distanceUnitDD.value.split(";")[1];this.getCalculatedDistance();
this.currentCircle=null},getCalculatedDistance:function(){if(this.currentTimeInSeconds&&0<this.currentTimeInSeconds&&this.currentDistanceInMeters&&0<this.currentDistanceInMeters){this.calculatedRadiusInMeters=this.currentTimeInSeconds*this.currentDistanceInMeters;this.useCalculatedDistance=!0;var A=0;switch(this.currentLengthUnit){case "feet":A=3.2808399*this.calculatedRadiusInMeters;break;case "meters":A=this.calculatedRadiusInMeters;break;case "yards":A=1.0936133*this.calculatedRadiusInMeters;break;
case "kilometers":A=.001*this.calculatedRadiusInMeters;break;case "miles":A=6.21371192E-4*this.calculatedRadiusInMeters;break;case "nautical-miles":A=5.39957E-4*this.calculatedRadiusInMeters}A="Diameter"===this.creationType.get("value")?2*A:A;A=d.format(A,{places:"4"});this.radiusInput.set("value",A)}else this.calculatedRadiusInMeters=null,this.useCalculatedDistance=!0},pointButtonWasClicked:function(){c.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):
(this.coordTool.manualInput=!1,y.publish("clear-points"),this._setMapNavigation(!1),this.dt.set("isDiameter","Diameter"===this.creationType.get("value")),this.distCalcControl.get("open")?this.dt.activate("point"):this.interactiveCircle.checked?this.dt.activate("polyline"):this.dt.activate("point"));c.toggle(this.addPointBtn,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dt.set("lengthUnit",this.currentLengthUnit);this.distCalcControl.get("open")&&
this.distanceInputDidChange();this.currentCircle=null},creationTypeDidChange:function(){var A="Diameter"===this.creationType.get("value")?this.nls.diameterLabel:this.nls.radiusLabel;this.radiusDiameterLabel.innerHTML=E.sanitizeHTML(A);b.set(this.radiusInput,"aria-label",A);b.set(this.lengthUnitDD,"aria-label",A);this.currentCircle=null},feedbackDidComplete:function(A){if(A.geometry.center){var P=A.geometry.center,ba=new q(A.geometry.rings[0][0][0],A.geometry.rings[0][0][1],A.geometry.center.spatialReference);
A=new W(A.geometry.center.spatialReference);A.addPath([P,ba]);this.setGraphic(!1,A);F.focus(this.addPointBtn)}else c.toggle(this.addPointBtn,"drawPointBtn-active"),this._setMapNavigation(!0),this.dt.deactivate(),this.checkValidInputs()},setCoordLabel:function(A){A=E.sanitizeHTML(e.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:A}));this.coordInputLabel.innerHTML=A;b.set(this.coordTool.textbox,"aria-label",A)},removeManualGraphic:function(){null!==this.tempGraphic&&this._gl.remove(this.tempGraphic);
this.dt.removeStartGraphic()},setGraphic:function(A,P){A||c.toggle(this.addPointBtn,"drawPointBtn-active");this._setMapNavigation(!0);this.dt.deactivate();this.dt.removeStartGraphic();P="Diameter"===this.creationType.get("value")?this.radiusInput.get("value")/2:this.radiusInput.get("value");P=this.coordTool.inputCoordinate.util.convertToMeters(P,this.lengthUnitDD.get("value"));A=this.coordTool.inputCoordinate.coordinateEsriGeometry;P=new n({center:A,radius:P,geodesic:!0,numberOfPoints:360});A=new Q(A.spatialReference);
A.addRing(P.rings[0]);this.dt.getProjectedGeometry(A,this.map.spatialReference).then(f.hitch(this,function(ba){var w="Diameter"===this.creationType.get("value")?parseFloat(this.radiusInput.get("value"))/2:parseFloat(this.radiusInput.get("value"));var N=window.isRTL?this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.radiusInput.get("displayedValue")+" "+this.creationType.get("displayedValue"):this.creationType.get("displayedValue")+" "+this.radiusInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"));
w=new U(ba,this._circleSym,{ObjectID:this._gl.graphics.length+1,Label:N,CenterPoint:this.coordTool.get("value"),RadiusDistance:w,RadiusUnit:this.currentLengthUnit});this._textGL.add(new U(ba,f.clone(this._labelSym).setText(N)));this.checkValidInputs();this.map.setExtent(ba.getExtent().expand(3));this.currentCircle=w;this._gl.add(w);this._gl.refresh();this.dt.set("startPoint",null)}))},clearGraphics:function(){this._gl&&(this._gl.clear(),this._gl.refresh(),this._textGL.clear(),this.clearUI(!1));this.tabSwitched();
this.checkValidInputs();this.currentCircle=null;for(var A=0;A<this.map.graphicsLayerIds.length;A++)this.map.getLayer(this.map.graphicsLayerIds[A]).refresh()},clearUI:function(A){A||this.coordTool.clear();this.dt.set("startPoint",null);this.useCalculatedDistance=!1;c.remove(this.addPointBtn,"drawPointBtn-active");b.set(this.startPointCoords,"value","");this.radiusInput.set("value",1E3);this.timeInput.set("value",1);this.distanceInput.set("value",1)},setGraphicsHidden:function(){this._gl&&this._gl.hide()},
setGraphicsShown:function(){this._gl&&this._gl.show()},checkValidInputs:function(){c.add(this.okButton,"jimu-state-disabled");b.set(this.okButton,"tabindex",-1);null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.radiusInput.isValid()&&(c.remove(this.okButton,"jimu-state-disabled"),b.set(this.okButton,"tabindex",0));this.okButton.innerHTML=this.interactiveCircle.checked?this.nls.publishDDBtn:this.nls.common.ok},tabSwitched:function(){this.dt&&(this.dt.deactivate(),this.dt.cleanup(),
this.dt.disconnectOnMouseMoveHandler(),this.dt.set("startPoint",null));this._setMapNavigation(!0);this.dt&&this.dt.removeStartGraphic();this.addPointBtn&&c.remove(this.addPointBtn,"drawPointBtn-active");this.coordinateFormat&&k.close(this.coordinateFormat)},_setMapNavigation:function(A){A?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(A){var P=null;if(A)switch(A){case "feet":P=this.nls.abbrevFeetLabel;break;case "kilometers":P=
this.nls.abbrevKmLabel;break;case "miles":P=this.nls.abbrevMilesLabel;break;case "meters":P=this.nls.abbrevMetersLabel;break;case "nautical-miles":P=this.nls.abbrevNauticalMilesLabel;break;case "yards":P=this.nls.abbrevYardsLabel;break;default:P=A}return P},_getDegreeAbbreviation:function(A){var P=null;if(A)switch(A){case "degrees":P=this.nls.abbrevDegreesLabel;break;case "mils":P=this.nls.abbrevMilsLabel;break;default:P=A}return P},_getTimeAbbreviation:function(A){var P=null;if(A)switch(A){case "3600":P=
this.nls.abbrevHoursLabel;break;case "60":P=this.nls.abbrevMinutesLabel;break;case "1":P=this.nls.abbrevSecondsLabel;break;default:P=A}return P},_getRateAbbreviation:function(A){var P=null;if(A)switch(A){case "0.3048;1":P=this.nls.abbrevFeetSecondsLabel;break;case "0.3048;3600":P=this.nls.abbrevFeetHourLabel;break;case "1000;1":P=this.nls.abbrevKmSecondLabel;break;case "1000;3600":P=this.nls.abbrevKmHourLabel;break;case "1;1":P=this.nls.abbrevMetersSecondLabel;break;case "1;3600":P=this.nls.abbrevMetersHourLabel;
break;case "1609.344;1":P=this.nls.abbrevMilesSecondLabel;break;case "1609.344;3600":P=this.nls.abbrevMilesHourLabel;break;case "1852;1":P=this.nls.abbrevNauticalMilesSecondLabel;break;case "1852;3600":P=this.nls.abbrevNauticalMilesHourLabel;break;default:P=A}return P},setFirstFocusNode:function(){E.initFirstFocusNode(this.domNodeObj,this.creationType.domNode)},focusFirstNodeOfSelectedTab:function(){F.focus(this.creationType.focusNode)},setLastFocusNode:function(){E.initLastFocusNode(this.domNodeObj,
this.clearGraphicsButton)},_createSymbolPicker:function(A,P,ba,w){if(ba){var N={};N.type=E.getSymbolTypeByGeometryType(ba);this.hasOwnProperty("_circleSym")&&(N.symbol=this._circleSym);var X={symbolChooserTitle:w,symbolParams:N,nls:this.nls,symbolType:P};this._showSelectedSymbol(A,N.symbol);this.own(g(A,"click",f.hitch(this,function(){N.symbol=this._circleSym;this._initSymbolChooserPopup(X,A)})));this.own(g(A,"keydown",f.hitch(this,function(ha){if(ha.keyCode===a.ENTER||ha.keyCode===a.SPACE)N.symbol=
this._circleSym,this._initSymbolChooserPopup(X,A)})))}},_initSymbolChooserPopup:function(A,P){var ba=new da(A);ba.onOkClick=f.hitch(this,function(){var w=ba.symbolChooser.getSymbol();this._showSelectedSymbol(P,w);ba.popup.close();F.focus(this.circleSymbolNode)})},_showSelectedSymbol:function(A,P){aa.empty(A);if(P){var ba=ia.createSymbolNode(P);ba||(ba=aa.create("div"));aa.place(ba,A);this._circleSym=new L(P.toJson());this.dt.setFillSymbol(this._circleSym)}},_createColorPicker:function(A){var P=new D({nls:this.nls,
tab:"circle"});P.placeAt(A);P.startup();return P},_getColorPicker:function(){return this.labelColorPicker.getValues()},_setColorPicker:function(A){this.labelColorPicker.setValues({color:new R(A)})}})})},"widgets/DistanceAndDirection/models/CircleFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Circle esri/geometry/Polyline esri/geometry/geometryEngine ./Feedback".split(" "),function(O,f,C,g,y,B,I,b,c,e){e=O([e],
{constructor:function(h){O.safeMixin(this,h);this.syncEvents();this.initGeometryService()},clearGraphics:function(){this.map.graphics.clear()},syncEvents:function(){g.subscribe("MANUAL_CIRCLE_RADIUS_INPUT",f.hitch(this,this.manualRadiusUpdate));g.subscribe("manual-circle-center-point-input",f.hitch(this,this.onCenterPointManualInputHandler));g.subscribe("clear-points",f.hitch(this,this.clearPoints))},clearPoints:function(h){h&&(this._points=[],this.map.graphics.clear())},onCenterPointManualInputHandler:function(h){this._points=
[];this._points.push(h.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(h)},manualRadiusUpdate:function(){this.circleGraphic&&this.map.graphics.remove(this.circleGraphic)},_onClickHandler:function(h){if(this.map.snappingManager)var d=this.map.snappingManager._snappingPoint;var a=d||h.mapPoint;this._processAfterMapClick(a).then(f.hitch(this,function(m){this._points.push(a);switch(this._geometryType){case B.POINT:this.set("startPoint",a);this.set("startPointDD",m);this._drawEnd(a.offset(0,
0));this._setTooltipMessage(0);break;case B.POLYLINE:switch(this._points.length){case 1:this.set("startPoint",a);this.set("startPointDD",m);this.startPoint=m;this.canProjectLocally&&(this.startPoint=a,this._onMouseMoveHandlerConnect=C.connect(this.map,"onMouseMove",this._onMouseMoveHandler));break;case 2:this.endPoint=m,this._onDoubleClickHandler()}this._setTooltipMessage(this._points.length)}}))},_onMouseMoveHandler:function(h){if(this.map.snappingManager)var d=this.map.snappingManager._snappingPoint;
h=this.setCircleGeometry(this.startPoint,d||h.mapPoint);this.cleanup();this.circleGraphic=new y(h,this.fillSymbol);this.map.graphics.add(this.circleGraphic)},_onDoubleClickHandler:function(){this.disconnectOnMouseMoveHandler();this.cleanup();this._clear();this._setTooltipMessage(0);if(this.circleGraphic)this._drawEnd(this.circleGraphic.geometry);else{var h=this.setCircleGeometry(this.startPoint,this.endPoint);this._drawEnd(h)}},disconnectOnMouseMoveHandler:function(){C.disconnect(this._onMouseMoveHandlerConnect)},
cleanup:function(){this.circleGraphic&&this.map.graphics.remove(this.circleGraphic)},setCircleGeometry:function(h,d){var a=new b(h.spatialReference);a.addPath([h,d]);d=c.geodesicLength(a,9001);a=this.coordTool.convertMetersToUnits(d,this.lengthUnit);this.isDiameter&&(a*=2);this.set("length",a);return new I(h,{radius:d,geodesic:!0,numberOfPoints:360})}});e.DD_CIRCLE_LENGTH_DID_CHANGE="DD_CIRCLE_LENGTH_DID_CHANGE";return e})},"widgets/DistanceAndDirection/views/TabEllipse":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/has dojo/touch dojo/dom-attr dojo/dom-class dojo/string dojo/number dojo/mouse dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/TooltipDialog dijit/_WidgetsInTemplateMixin dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos jimu/utils esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/graphic esri/tasks/FeatureSet ../models/EllipseFeedback ../views/CoordinateInput ../views/EditOutputCoordinate dojo/text!../templates/TabEllipse.html dijit/focus dojo/_base/event dojo/aspect dojo/dom-construct jimu/symbolUtils ../SymbolChooserPopup ../setting/js/ColorPickerEditor dojo/_base/Color dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox dijit/TitlePane".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d,a,m,t,l,u,k,G,H,z,L,S,M,U,W,Q,q,n,x,J,K,r,p,E,F,V,Z,aa,ia,da){return O([m,t,u],{templateString:r,baseClass:"jimu-widget-TabEllipse",centerPointGraphic:null,_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,_gl:null,_textGL:null,constructor:function(D){O.safeMixin(this,D);this._textGL=this._gl=null},destroy:function(){this._gl&&this.map.removeLayer(this._gl);this._textGL&&this.map.removeLayer(this._textGL);this.tabSwitched()},postCreate:function(){this._centerPointInputKeyPressed=
this._restrictFocusOnAddCenterPointBtn=!1;this.currentAngleUnit=this.angleUnitDD.get("value");this.currentLengthUnit=this.lengthUnitDD.get("value");this._labelSym=new Q(this.labelSymbol);this._ptSym=new U(this.pointSymbol);this._ellipseSym=new W(this.ellipseSymbol);this._textGL=new L;this.map.addLayer(this._textGL);this.map.addLayer(this.getLayer());if(this._gl.loaded){var D=H.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Ellipse Graphics");D.showLabels();D.enablePopup()}else this._gl.on("load",
f.hitch(this,function(){var R=H.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Ellipse Graphics");R.showLabels();R.enablePopup()}));this.coordTool=new J({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.startPointCoords);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new l({content:new K({nls:this.nls}),style:"width: 400px"});F.after(this.coordinateFormat,"onClose",f.hitch(this,function(){p.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var R=
this.coordTool.getValue();if(""===R||null===R||void 0===R)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&c.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt=new x({appConfig:this.appConfig,map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls,parentWidget:this});this.dt.setLineSymbol(this._ellipseSym);this.dt.set("lengthUnit","kilometers");this.dt.set("angle",0);this.dt.set("ellipseType","semi");this._createSymbolPicker(this.ellipseSymbolNode,
"ellipseSymbol","esriGeometryPolygon",this.nls.ellipseSymbologyPopupTittle);this.labelColorPicker=this._createColorPicker(this.labelColorPickerNode);this._setColorPicker(this.labelSymbol.color);this.labelTextSizeSpinner.set("value",this.labelSymbol.font.size);this.syncEvents();this.checkValidInputs();this.majorAxisInput.invalidMessage=this.nls.numericInvalidMessage;this.majorAxisInput.rangeMessage=this.nls.axisErrorMessage;this.minorAxisInput.invalidMessage=this.nls.numericInvalidMessage;this.minorAxisInput.rangeMessage=
this.nls.axisErrorMessage;this.angleInput.invalidMessage=this.nls.numericInvalidMessage;this.angleInput.rangeMessage=this.nls.orientationErrorMessage},getLayer:function(){if(!this._gl){var D=[],R={labelExpressionInfo:{value:this.nls.ellipseMajorAxis+" {MAJOR}"}};R=new M(R);R.labelPlacement="above-along";R.symbol=f.clone(this._labelSym).setOffset(0,20);D.push(R);R={labelExpressionInfo:{value:this.nls.ellipseMinorAxis+" {MINOR}"}};R=new M(R);R.labelPlacement="center-along";R.symbol=this._labelSym;D.push(R);
R={labelExpressionInfo:{value:this.nls.angleLabel+": {ORIENTATION_ANGLE}"}};R=new M(R);R.labelPlacement="below-along";R.symbol=f.clone(this._labelSym).setOffset(0,-20);D.push(R);D={layerDefinition:{extent:{xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:{wkid:102100,latestWkid:102100}},geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"MAJOR",type:"esriFieldTypeText",alias:"Major Axis"},{name:"MINOR",type:"esriFieldTypeText",
alias:"Minor Axis"},{name:"ORIENTATION_ANGLE",type:"esriFieldTypeText",alias:"Orientation Angle"}]},featureSet:new n};this._gl=new S(D,{id:"Distance \x26 Direction - Ellipse Graphics",showLabels:!0});this.own(g(this._gl,"visibility-change",f.hitch(this,function(Y){this._textGL.setVisibility(Y.visible)})));return this._gl}},syncEvents:function(){y.subscribe("TAB_SWITCHED",f.hitch(this,this.tabSwitched));y.subscribe("DD-WIDGET-CLOSED",f.hitch(this,this._closeDijit));y.subscribe(x.DD_ELLIPSE_MINOR_LENGTH_CHANGE,
f.hitch(this,this.minorLengthDidChange));y.subscribe(x.DD_ELLIPSE_MAJOR_LENGTH_CHANGE,f.hitch(this,this.majorLengthDidChange));y.subscribe(x.DD_ELLIPSE_ANGLE_CHANGE,f.hitch(this,this.angleDidChange));this.dt.watch("startPoint",f.hitch(this,function(D,R,Y){this.dt.addStartGraphic(Y,this._ptSym)}));this.dt.watch("startPointDD",f.hitch(this,function(D,R,Y){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",Y)}));this.coordTool.inputCoordinate.watch("outputString",f.hitch(this,function(D,R,Y){this.coordTool.manualInput||
(this.coordTool.set("value",Y),this.currentEllipse=null,this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:p.focus(this.addPointBtn))}));this.own(this.dt.on("draw-complete",f.hitch(this,this.feedbackDidComplete)),this.ellipseType.on("change",f.hitch(this,this.ellipseTypeDDDidChange)),this.angleUnitDD.on("change",f.hitch(this,this.angleUnitDDDidChange)),this.lengthUnitDD.on("change",f.hitch(this,this.lengthUnitDDDidChange)),
g(this.coordinateFormatButton,"click",f.hitch(this,this.coordinateFormatButtonWasClicked)),g(this.coordinateFormatButton,"keydown",f.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE)E.stop(D),this.coordinateFormatButtonWasClicked()})),g(this.coordinateFormat.content.applyButton,"click",f.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var D=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],R=D.defaultFormat,Y=this.coordinateFormat.content.frmtSelect.get("value");
D.useCustom&&(R=D.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",R);this.coordTool.inputCoordinate.set("formatType",Y);this.setCoordLabel(Y);k.close(this.coordinateFormat);p.focus(this.coordinateFormatButton)})),g(this.coordinateFormat.content.applyButton,"keydown",f.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE){E.stop(D);this._restrictFocusOnAddCenterPointBtn=
!0;var R=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],Y=R.defaultFormat,A=this.coordinateFormat.content.frmtSelect.get("value");R.useCustom&&(Y=R.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",Y);this.coordTool.inputCoordinate.set("formatType",A);this.setCoordLabel(A);k.close(this.coordinateFormat);p.focus(this.coordinateFormatButton)}D.keyCode===a.ESCAPE&&
(E.stop(D),k.close(this.coordinateFormat),p.focus(this.coordinateFormatButton))})),g(this.addPointBtn,"keydown",f.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE)E.stop(D),this.pointButtonWasClicked()})),g(this.interactiveEllipse,"change",f.hitch(this,this.interactiveCheckBoxChanged)),g(this.interactiveEllipse,"keydown",f.hitch(this,function(D){D.keyCode===a.ENTER&&(this.interactiveEllipse.checked=this.interactiveEllipse.checked?!1:!0,this.interactiveCheckBoxChanged())})),g(this.coordTool,
"keydown",f.hitch(this,this.coordToolKeyWasPressed)),g(this.majorAxisInput,"change",f.hitch(this,function(){this.currentEllipse=null})),g(this.minorAxisInput,"change",f.hitch(this,function(){this.currentEllipse=null})),g(this.angleInput,"change",f.hitch(this,this.angleDidChange)),g(this.coordinateFormat.content.cancelButton,"click",f.hitch(this,function(){k.close(this.coordinateFormat)})),g(this.coordinateFormat.content.cancelButton,"keydown",f.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===
a.SPACE)E.stop(D),k.close(this.coordinateFormat),p.focus(this.coordinateFormatButton);D.keyCode===a.ESCAPE&&(E.stop(D),k.close(this.coordinateFormat),p.focus(this.coordinateFormatButton))})),g(this.clearGraphicsButton,"click",f.hitch(this,this.clearGraphics)),g(this.clearGraphicsButton,"keydown",f.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE)E.stop(D),this.clearGraphics()})),g(this.majorAxisInputDiv,d.leave,f.hitch(this,this.checkValidInputs)),g(this.minorAxisInputDiv,d.leave,
f.hitch(this,this.checkValidInputs)),g(this.coordinateFormat.content.frmtSelect,"keydown",f.hitch(this,function(D){D.keyCode===a.ESCAPE&&(E.stop(D),k.close(this.coordinateFormat),p.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.frmtVal,"keydown",f.hitch(this,function(D){D.keyCode===a.ESCAPE&&(E.stop(D),k.close(this.coordinateFormat),p.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.addSignChkBox,"keydown",f.hitch(this,function(D){D.keyCode===a.ESCAPE&&
(E.stop(D),k.close(this.coordinateFormat),p.focus(this.coordinateFormatButton));D.keyCode===a.ENTER&&(E.stop(D),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),g(this.angleInputDiv,d.leave,f.hitch(this,this.checkValidInputs)),g(this.okButton,"keydown",f.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE)E.stop(D),this.okButtonClicked()})));B("esri-touch")?this.own(g(this.addPointBtn,I.press,f.hitch(this,this.pointButtonWasClicked))):
this.own(g(this.addPointBtn,"click",f.hitch(this,this.pointButtonWasClicked)));this.own(g(this.labelColorPicker,"colorChanged",f.hitch(this,function(D){"ellipse"===D&&(this._labelSym.color=this._getColorPicker())})));this.own(g(this.labelTextSizeSpinner,"change",f.hitch(this,function(D){this._labelSym.font.size=this.labelTextSizeSpinner.getValue()})));this.own(g(this.labelColorPickerNode,"keydown",f.hitch(this,function(D){D.keyCode!==a.ENTER&&D.keyCode!==a.SPACE||this.labelColorPicker.colorPicker.domNode.click()})));
this.own(g(this.labelTextSizeSpinner,"blur",f.hitch(this,function(){this.labelTextSizeSpinner.isValid()||this.labelTextSizeSpinner.set("value",this.labelSymbol.font.size)})))},okButtonClicked:function(){c.contains(this.okButton,"jimu-state-disabled")||(this._restrictFocusOnAddCenterPointBtn=!0,this.currentEllipse||("full"===b.get(this.ellipseType,"value")?y.publish("create-manual-ellipse",this.majorAxisInput.get("value")/2,this.minorAxisInput.get("value")/2,this.angleInput.get("value"),this.coordTool.inputCoordinate.coordinateEsriGeometry):
y.publish("create-manual-ellipse",this.majorAxisInput.get("value"),this.minorAxisInput.get("value"),this.angleInput.get("value"),this.coordTool.inputCoordinate.coordinateEsriGeometry)),this.emit("show-publish",this._gl))},majorLengthDidChange:function(D){"full"===b.get(this.ellipseType,"value")&&(D*=2);var R=h.format(D,{places:2,locale:C.locale});this.majorAxisInput.set("value",D);this.majorAxisInput.set("displayedValue",R)},minorLengthDidChange:function(D){"full"===b.get(this.ellipseType,"value")&&
(D*=2);var R=h.format(D,{places:2,locale:C.locale});this.minorAxisInput.set("value",D);this.minorAxisInput.set("displayedValue",R)},angleDidChange:function(D){var R=h.format(D,{places:2,locale:C.locale});this.angleInput.set("value",D);this.angleInput.set("displayedValue",R);this.dt.set("angle",D);this.currentEllipse=null},interactiveCheckBoxChanged:function(){this.tabSwitched();this.interactiveEllipse.checked?(this.majorAxisInput.set("disabled",!0),this.minorAxisInput.set("disabled",!0),this.angleInput.set("disabled",
!0)):(this.majorAxisInput.set("disabled",!1),this.minorAxisInput.set("disabled",!1),this.angleInput.set("disabled",!1));this.checkValidInputs()},coordToolKeyWasPressed:function(D){this.dt.removeStartGraphic();D.keyCode===a.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.currentEllipse=null,this.coordTool.inputCoordinate.getInputType().then(f.hitch(this,function(R){"UNKNOWN"===R.inputType?(new G({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=
null):this.dt.getProjectedGeometry(R.coordinateEsriGeometry,this.map.spatialReference).then(f.hitch(this,f.hitch(this,function(Y){y.publish("manual-ellipse-center-point-input",Y);this.setCoordLabel(R.inputType);this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[R.inputType].defaultFormat);this.coordTool.inputCoordinate.set("formatType",R.inputType);this.dt.addStartGraphic(Y,this._ptSym)})));this.checkValidInputs()})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",
this.coordTool.inputCoordinate.formatType);k.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});p.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&k.close(this.coordinateFormat)},pointButtonWasClicked:function(){c.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,y.publish("clear-points"),this._setMapNavigation(!1),
this.interactiveEllipse.checked?this.dt.activate("polyline"):this.dt.activate("point"));c.toggle(this.addPointBtn,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dt.set("lengthUnit",this.currentLengthUnit);this.currentEllipse=null},ellipseTypeDDDidChange:function(){var D="full"===b.get(this.ellipseType,"value")?this.nls.majorDiameterLabel:this.nls.majorRadiusLabel;var R="full"===b.get(this.ellipseType,"value")?this.nls.minorDiameterLabel:
this.nls.minorRadiusLabel;this.majorAxisLabel.textContent="full"===b.get(this.ellipseType,"value")?this.nls.majorDiameterLabel:this.nls.majorRadiusLabel;this.minorAxisLabel.textContent="full"===b.get(this.ellipseType,"value")?this.nls.minorDiameterLabel:this.nls.minorRadiusLabel;b.set(this.majorAxisInput,"aria-label",D);b.set(this.minorAxisInput,"aria-label",R)},angleUnitDDDidChange:function(){this.currentAngleUnit=this.angleUnitDD.get("value");this.dt.set("angleUnit",this.currentAngleUnit);"degrees"===
this.currentAngleUnit?(this.angleInput.constraints.max=360,this.angleInput.rangeMessage=this.nls.degreesRangeMessage):(this.angleInput.constraints.max=6400,this.angleInput.rangeMessage=this.nls.millsRangeMessage);this.currentEllipse=null},feedbackDidComplete:function(D){if("polygon"===D.geometry.type){this.currentEllipse=new q(D.geometry.geometry,this._ellipseSym);var R=this.majorAxisLabel.textContent.split(" ")[1];var Y="semi"===this.ellipseType.get("value")?2*parseFloat(this.majorAxisInput.value):
parseFloat(this.majorAxisInput.value);var A="semi"===this.ellipseType.get("value")?2*parseFloat(this.minorAxisInput.value):parseFloat(this.minorAxisInput.value);this.currentEllipse.setAttributes({ObjectID:this._gl.graphics.length+1,MINOR:R+": "+this.minorAxisInput.get("displayedValue")+" "+this.lengthUnitDD.get("displayedValue"),MAJOR:R+": "+this.majorAxisInput.get("displayedValue")+" "+this.lengthUnitDD.get("displayedValue"),ORIENTATION_ANGLE:this.angleInput.get("displayedValue")+" "+this.angleUnitDD.get("displayedValue"),
CenterPoint:this.coordTool.get("value"),MajorAxis:Y,MinorAxis:A,Unit:this.currentLengthUnit,Orientation:parseFloat(this.angleInput.get("value")),OrientationUnit:this.currentAngleUnit});this._gl.add(this.currentEllipse);D=D.geometry.geometry.getCentroid();R=window.isRTL?this.minorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.nls.minorRadiusLabel:this.minorAxisLabel.textContent+" "+this.minorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"));
this._textGL.add(new q(D,f.clone(this._labelSym).setOffset(0,20).setText(R)));R=window.isRTL?this.majorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.nls.majorRadiusLabel:this.majorAxisLabel.textContent+" "+this.majorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"));this._textGL.add(new q(D,f.clone(this._labelSym).setText(R)));R=window.isRTL?this.angleInput.get("displayedValue")+" "+this._getDegreeAbbreviation(this.angleUnitDD.get("value"))+
" "+this.nls.angleLabel:this.nls.angleLabel+" "+this.angleInput.get("displayedValue")+" "+this._getDegreeAbbreviation(this.angleUnitDD.get("value"));this._textGL.add(new q(D,f.clone(this._labelSym).setOffset(0,-20).setText(R)));this._gl.refresh();this.map.setExtent(this.currentEllipse.geometry.getExtent().expand(3))}this.checkValidInputs();this._setMapNavigation(!0);this.dt.deactivate();c.remove(this.addPointBtn,"drawPointBtn-active");this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=
!1:p.focus(this.addPointBtn)},clearGraphics:function(){this._gl&&(this._gl.clear(),this.coordTool.clear(),this._textGL.clear());this.tabSwitched();c.remove(this.addPointBtn,"drawPointBtn-active");this.currentEllipse=null;this.checkValidInputs();for(var D=0;D<this.map.graphicsLayerIds.length;D++)this.map.getLayer(this.map.graphicsLayerIds[D]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},createCenterPointGraphic:function(){null!==
this.centerPointGraphic&&this._gl.remove(this.centerPointGraphic);var D=this.coordTool.inputCoordinate.coordinateEsriGeometry;D&&(this.centerPointGraphic=new q(D,new U),this._gl.add(this.centerPointGraphic))},removeCenterPointGraphic:function(){this.centerPointGraphic&&this._gl.remove(this.centerPointGraphic)},setCoordLabel:function(D){D=z.sanitizeHTML(e.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:D}));this.coordInputLabel.innerHTML=D;b.set(this.coordTool.textbox,"aria-label",D)},
checkValidInputs:function(){c.add(this.okButton,"jimu-state-disabled");b.set(this.okButton,"tabindex",-1);null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.majorAxisInput.isValid()&&this.minorAxisInput.isValid()&&this.angleInput.isValid()&&(c.remove(this.okButton,"jimu-state-disabled"),b.set(this.okButton,"tabindex",0));this.okButton.innerHTML=this.interactiveEllipse.checked?this.nls.publishDDBtn:this.nls.common.ok},tabSwitched:function(){this.dt&&(this.dt.deactivate(),this.dt.cleanup(),
this.dt.disconnectOnMouseMoveHandler());this._setMapNavigation(!0);this.dt&&this.dt.removeStartGraphic();this.addPointBtn&&c.remove(this.addPointBtn,"drawPointBtn-active");this.coordinateFormat&&k.close(this.coordinateFormat)},_setMapNavigation:function(D){D?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(D){var R=null;if(D)switch(D){case "feet":R=this.nls.abbrevFeetLabel;break;case "kilometers":R=this.nls.abbrevKmLabel;
break;case "miles":R=this.nls.abbrevMilesLabel;break;case "meters":R=this.nls.abbrevMetersLabel;break;case "nautical-miles":R=this.nls.abbrevNauticalMilesLabel;break;case "yards":R=this.nls.abbrevYardsLabel;break;default:R=D}return R},_getDegreeAbbreviation:function(D){var R=null;if(D)switch(D){case "degrees":R=this.nls.abbrevDegreesLabel;break;case "mils":R=this.nls.abbrevMilsLabel;break;default:R=D}return R},setFirstFocusNode:function(){z.initFirstFocusNode(this.domNodeObj,this.ellipseType.domNode)},
focusFirstNodeOfSelectedTab:function(){p.focus(this.ellipseType.focusNode)},setLastFocusNode:function(){z.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)},_createSymbolPicker:function(D,R,Y,A){if(Y){var P={};P.type=z.getSymbolTypeByGeometryType(Y);this.hasOwnProperty("_ellipseSym")&&(P.symbol=this._ellipseSym);var ba={symbolChooserTitle:A,symbolParams:P,nls:this.nls,symbolType:R};this._showSelectedSymbol(D,P.symbol,R);this.own(g(D,"click",f.hitch(this,function(){P.symbol=this._ellipseSym;
this._initSymbolChooserPopup(ba,D);p.focus(this.ellipseSymbolNode)})));this.own(g(D,"keydown",f.hitch(this,function(w){if(w.keyCode===a.ENTER||w.keyCode===a.SPACE)P.symbol=this._ellipseSym,this._initSymbolChooserPopup(ba,D),p.focus(this.ellipseSymbolNode)})))}},_initSymbolChooserPopup:function(D,R){var Y=new aa(D);Y.onOkClick=f.hitch(this,function(){var A=Y.symbolChooser.getSymbol();this._showSelectedSymbol(R,A,D.symbolType);Y.popup.close()})},_showSelectedSymbol:function(D,R,Y){V.empty(D);R&&((Y=
Z.createSymbolNode(R))||(Y=V.create("div")),V.place(Y,D),this._ellipseSym=new W(R.toJson()),this.dt.setLineSymbol(this._ellipseSym))},_createColorPicker:function(D){var R=new ia({nls:this.nls,tab:"ellipse"});R.placeAt(D);R.startup();return R},_getColorPicker:function(){return this.labelColorPicker.getValues()},_setColorPicker:function(D){this.labelColorPicker.setValues({color:new da(D)})}})})},"widgets/DistanceAndDirection/models/EllipseFeedback":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Circle esri/geometry/geometryEngine esri/geometry/webMercatorUtils esri/geometry/geodesicUtils esri/SpatialReference esri/units jimu/utils ./Feedback dojo/has dojo/touch dojo/on".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d,a,m,t,l,u,k,G,H){u=O([u],{orientationAngle:0,majorAxisLength:[],minorAxisLength:[],signal:null,constructor:function(z){O.safeMixin(this,z);this.initGeometryService();this.syncEvents();this._majGraphic=new y;this._majGraphicB=new y;this._minGraphic=new y;this._minGraphicB=new y},syncEvents:function(){g.subscribe("create-manual-ellipse",C.hitch(this,this.onCreateManualEllipse));g.subscribe("manual-ellipse-center-point-input",C.hitch(this,this.onCenterPointManualInputHandler));
g.subscribe("clear-points",C.hitch(this,this.clearPoints))},clearPoints:function(){this._points=[];this.map.graphics.clear()},onCreateManualEllipse:function(z,L,S,M){this._points=[];this._points.push(M);this.majorAxisLength=z=this.coordTool.convertToMeters(z,this.lengthUnit);z=this.getEndPoint(M,0,z);this._points.push(z);z=new b({paths:[[[M.x,M.y],[z.x,z.y]]],spatialReference:M.spatialReference});this._majGraphic=new y(z,this.lineSymbol);this._majGraphicB=new y(z,this.lineSymbol);this._majGraphicB.geometry=
h.rotate(z,180,M);this.minorAxisLength=z=this.coordTool.convertToMeters(L,this.lengthUnit);z=this.getEndPoint(M,90,z);this._points.push(z);L=new b({paths:[[[M.x,M.y],[z.x,z.y]]],spatialReference:this.map.spatialReference});this._minGraphic=new y(L,this.lineSymbol);this._minGraphicB=new y(L,this.lineSymbol);this._minGraphicB.geometry=h.rotate(L,180,M);this.orientationAngle=Number(S);this._onDoubleClickHandler()},onCenterPointManualInputHandler:function(z){this._points=[];this._points.push(z.offset(0,
0));this.set("startPoint",this._points[0]);this.map.centerAt(z)},getEndPoint:function(z,L,S){L=L?L:0;S=new e(z,{radius:S,geodesic:!0,numberOfPoints:60});return h.rotate(S,L,z).getPoint(0,0)},_onClickHandler:function(z){if(this.map.snappingManager)var L=this.map.snappingManager._snappingPoint;var S=L||z.mapPoint;this._points.push(S.offset(0,0));this._processAfterMapClick(S).then(C.hitch(this,function(M){switch(this._geometryType){case B.POINT:this.set("startPoint",S.offset(0,0));this.set("startPointDD",
M);this._drawEnd(S.offset(0,0));this._setTooltipMessage(0);break;case B.POLYLINE:switch(this._points.length){case 1:this.set("startPoint",this._points[0]);this.set("startPointDD",M);M=new b({paths:[[[S.x,S.y],[S.x,S.y]]],spatialReference:this.map.spatialReference});var U=new b({paths:[[[S.x,S.y],[S.x,S.y]]],spatialReference:this.map.spatialReference});this._majGraphic=new y(M,this.lineSymbol);this._majGraphicB=new y(M,this.lineSymbol);this._minGraphic=new y(U,this.lineSymbol);this._minGraphicB=new y(U,
this.lineSymbol);this.map.graphics.add(this._majGraphic);this.map.graphics.add(this._majGraphicB);this.map.graphics.add(this._minGraphic);this.map.graphics.add(this._minGraphicB);k("esri-touch")&&this.parentWidget.own(H(this.map.root,G.move,C.hitch(this,this._onMouseMoveHandler)));this._onMouseMoveHandlerConnect=f.connect(this.map,"onMouseMove",this._onMouseMoveHandler);this._onDoubleClickHandler_connect=f.connect(this.map,"onDblClick",C.hitch(this,this._onDoubleClickHandler));if(M=this._tooltip)M.innerHTML=
l.sanitizeHTML(this.nls.majorAxisTooltipMessage);break;case 2:this._setMajorAxisInfo();this._tooltip&&(this._tooltip.innerHTML=l.sanitizeHTML(this.nls.minorAxisTooltipMessage));break;case 3:this._setMinorAxisInfo(),this._onDoubleClickHandler()}}}),function(M){console.log(M)})},_setMajorAxisInfo:function(){this.getProjectedGeometry(this._majGraphic.geometry,new m(4326)).then(C.hitch(this,C.hitch(this,function(L){this.majorAxisLength=h.geodesicLength(L,9001);L=this.coordTool.convertMetersToUnits(this.majorAxisLength,
this.lengthUnit);g.publish("DD_ELLIPSE_MAJOR_LENGTH_CHANGE",L)})));var z=this.getAngle(d.webMercatorToGeographic(this._points[0]),d.webMercatorToGeographic(this._majGraphic.geometry.getPoint(0,1)));"mils"===this.angleUnit&&(z*=17.777777778);g.publish("DD_ELLIPSE_ANGLE_CHANGE",z)},_setMinorAxisInfo:function(){var z=C.clone(this._minGraphic.geometry),L=d.webMercatorToGeographic(this._minGraphic.geometry);this.minorAxisLength=a.geodesicLengths([L],t.METERS);L=this.coordTool.convertMetersToUnits(this.minorAxisLength[0],
this.lengthUnit);this.minorAxisLength[0]>this.majorAxisLength||0===this.minorAxisLength[0]?this._minGraphic.setGeometry(z):g.publish("DD_ELLIPSE_MINOR_LENGTH_CHANGE",L)},_onMouseMoveHandler:function(z){if(this.map.snappingManager)var L=this.map.snappingManager._snappingPoint;z=L||z.mapPoint;1===this._points.length?(this._majGraphic.geometry.setPoint(0,1,z),this._majGraphicB.geometry=h.rotate(this._majGraphic.geometry,180,this._points[0]),this._majGraphic.setGeometry(this._majGraphic.geometry).setSymbol(this.lineSymbol),
this._majGraphicB.setGeometry(this._majGraphicB.geometry).setSymbol(this.lineSymbol),this.canProjectLocally&&this._setMajorAxisInfo()):null!==this._minGraphic&&(z=h.nearestCoordinate(this._majGraphic.geometry,z),z=new I(z.coordinate.x,z.coordinate.y,102100),this._minGraphic.geometry.setPoint(0,1,z),this._minGraphicB.geometry.setPoint(0,1,z),this._minGraphic.geometry=h.rotate(this._minGraphic.geometry,-90,this._points[0]),this._minGraphicB.geometry=h.rotate(this._minGraphicB.geometry,90,this._points[0]),
this._minGraphic.setGeometry(this._minGraphic.geometry).setSymbol(this.lineSymbol),this._minGraphicB.setGeometry(this._minGraphicB.geometry).setSymbol(this.lineSymbol),this.canProjectLocally&&this._setMinorAxisInfo())},getLineLength:function(z,L,S,M){return Math.sqrt((z-=S)*z+(L-=M)*L)},getAngle:function(z,L){return(180*Math.atan2(L.x-z.x,L.y-z.y)/Math.PI+360)%360},convertAngle:function(z){return 0<=z&&90>z||180<=z&&270>z?90-z:90<=z&&180>z||270<=z&&360>z?180-z+270:z},_onDoubleClickHandler:function(){if(3<=
this._points.length){var z=new c(this._points[0].spatialReference),L=[];L.push(this._majGraphic.geometry.getPoint(0,0));L.push(this._majGraphic.geometry.getPoint(0,1));L.push(this._minGraphic.geometry.getPoint(0,1));this.geomService.project(L,this.map.spatialReference,C.hitch(this,function(S){var M=this.map.toScreen(S[0]),U=this.map.toScreen(S[1]),W=this.map.toScreen(S[2]);U=this.getLineLength(M.x,M.y,U.x,U.y);W=this.getLineLength(M.x,M.y,W.x,W.y);M=c.createEllipse({center:M,longAxis:U,shortAxis:W,
numberOfPoints:60,map:this.map});this.orientationAngle=this.angle;"mils"===this.angleUnit&&(this.orientationAngle/=17.777777778);z.geometry=h.rotate(M,this.convertAngle(this.orientationAngle),S[0]);z=C.mixin(z,{majorAxisLength:this.coordTool.convertMetersToUnits(this.majorAxisLength,this.lengthUnit),minorAxisLength:this.coordTool.convertMetersToUnits(this.minorAxisLength,this.lengthUnit),angle:this.angle,drawType:"ellipse",center:this._points[0]});this.disconnectOnMouseMoveHandler();this._setTooltipMessage(0);
this._drawEnd(z);this.cleanup();this.orientationAngle=0}))}},cleanup:function(){this.map.graphics.clear();this._minGraphic=this._majGraphic=null;this.majorAxisLength=[];this.minorAxisLength=[]},disconnectOnMouseMoveHandler:function(){this._onMouseMoveHandlerConnect&&f.disconnect(this._onMouseMoveHandlerConnect)}});u.DD_ELLIPSE_MAJOR_LENGTH_CHANGE="DD_ELLIPSE_MAJOR_LENGTH_CHANGE";u.DD_ELLIPSE_MINOR_LENGTH_CHANGE="DD_ELLIPSE_MINOR_LENGTH_CHANGE";u.DD_ELLIPSE_ANGLE_CHANGE="DD_ELLIPSE_ANGLE_CHANGE";return u})},
"widgets/DistanceAndDirection/views/TabRange":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/dom-construct dojo/on dojo/dom-class dojo/topic dojo/has dojo/touch dojo/string dojo/mouse dojo/keys dojo/number dojo/dom-attr dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/TooltipDialog dijit/popup dijit/form/NumberTextBox jimu/dijit/Message jimu/dijit/SimpleTable jimu/LayerInfos/LayerInfos jimu/utils dijit/_WidgetsInTemplateMixin dojo/text!../templates/TabRange.html esri/geometry/Circle esri/geometry/Polyline esri/geometry/Point esri/geometry/geometryEngine esri/graphic esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/tasks/FeatureSet esri/symbols/TextSymbol esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol ../views/CoordinateInput ../views/EditOutputCoordinate ../models/RangeRingFeedback dijit/focus dojo/_base/event dojo/aspect dojo/DeferredList jimu/symbolUtils ../SymbolChooserPopup ../setting/js/ColorPickerEditor dojo/_base/Color jimu/dijit/formSelect jimu/dijit/CheckBox dijit/TitlePane".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d,a,m,t,l,u,k,G,H,z,L,S,M,U,W,Q,q,n,x,J,K,r,p,E,F,V,Z,aa,ia,da,D,R,Y,A,P,ba,w,N,X,ha){return O([u,k,W],{templateString:Q,baseClass:"jimu-widget-TabRange",startPoint:null,firstDistance:!0,_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,_gl:null,_tsGL:null,_setStartPointAttr:function(){this._set("startPoint")},_getStartPointAttr:function(){return this.startPoint},constructor:function(v){O.safeMixin(this,v);this._tsGL=this._gl=null},destroy:function(){this._gl&&
this.map.removeLayer(this._gl);this._tsGL&&this.map.removeLayer(this._tsGL);this.tabSwitched()},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!1;this._ptSym=new ia(this.pointSymbol);this._circleSym=new Z(this.circleSymbol);this._lineSym=new aa(this.lineSymbol);this._labelSym=new V(this.labelSymbol);this._tsGL=new r;this.map.addLayer(this._tsGL);this.map.addLayer(this.getLayer());this._initDistanceTable();if(this._gl.loaded){var v=M.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Range Graphics");
v.showLabels();v.enablePopup()}else this._gl.on("load",f.hitch(this,function(){var T=M.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Range Graphics");T.showLabels();T.enablePopup()}));this.coordTool=new da({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.rangeCenter);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new G({content:new D({nls:this.nls}),style:"width: 400px"});P.after(this.coordinateFormat,"onClose",f.hitch(this,
function(){Y.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var T=this.coordTool.getValue();if(""===T||null===T||void 0===T)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&I.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt=new R({appConfig:this.appConfig,map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls,parentWidget:this});this.dt.setFillSymbol(this._circleSym);this.dt.set("lengthLayer",
this._lengthLayer);this._createSymbolPicker(this.ringSymbolNode,"rangeRingSymbol","esriGeometryPolyline",this.nls.ringSymbologyPopupTittle);this.labelColorPicker=this._createColorPicker(this.labelColorPickerNode);this._setColorPicker(this.labelSymbol.color);this.labelTextSizeSpinner.set("value",this.labelSymbol.font.size);this.syncEvents();this._distanceTable.addRow({});this.checkValidInputs();this.numRingsInput.invalidMessage=this.nls.ringsErrorMessage;this.numRingsInput.rangeMessage=this.nls.ringsErrorMessage;
this.numRadialsInput.invalidMessage=this.nls.radialsInvalidMessage;this.numRadialsInput.rangeMessage=this.nls.radialsErrorMessage;this.ringIntervalInput.set("invalidMessage",this.nls.ringsDecimalErrorMessage)},_initDistanceTable:function(){var v=[{name:"Value",title:this.nls.valueLabel,type:"extension","class":"label",create:f.hitch(this,this._createValueField),getValue:f.hitch(this,this._getValueFieldValue)},{name:"actions",title:this.nls.actionLabel,width:"65px",type:"actions",actions:["up","down",
"delete"],"class":"label"}];this._distanceTable=new S({fields:v,autoHeight:!0});this._distanceTable.placeAt(this.distanceTable);this._distanceTable.startup()},_createValueField:function(v){var T=new z({style:"height: 24px;",id:l.getUniqueId("ntb"),required:"true",placeHolder:this.nls.valueText,invalidMessage:this.nls.numericInvalidMessage,value:this.firstDistance?"":0,constraints:{places:2},"class":"numberTextBox","aria-label":this.nls.valueLabel});y.place(T.domNode,v);this.own(B(T,"focus",f.hitch(this,
function(){0===T.get("value")&&T.set("value","")})),B(T,"blur",f.hitch(this,function(){var ca=this._distanceTable.getRows();C.forEach(ca,f.hitch(this,function(ea){!this._distanceTable.getRowData(ea).Value.valid&&1<ca.length&&this._distanceTable.deleteRow(ea)}))})));T.focus();this.firstDistance=!1},_getValueFieldValue:function(v){v=l.byNode(v.childNodes[0]);return{value:v.get("value"),valid:v.isValid()}},getLayer:function(){if(!this._gl){var v=new E({labelExpressionInfo:{value:"{Interval}"}});v.labelPlacement=
"center-end";v.symbol=this._labelSym;v={layerDefinition:{geometryType:"esriGeometryPolyline",extent:{xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:{wkid:102100,latestWkid:102100}},objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"Interval",type:"esriFieldTypeString",alias:"Interval"}]},featureSet:new F};this._gl=new p(v,{id:"Distance \x26 Direction - Range Graphics",showLabels:!0});this.own(B(this._gl,"visibility-change",f.hitch(this,function(T){this._tsGL.setVisibility(T.visible)})))}return this._gl},
syncEvents:function(){b.subscribe("TAB_SWITCHED",f.hitch(this,this.tabSwitched));b.subscribe("DD-WIDGET-CLOSED",f.hitch(this,this._closeDijit));this.dt.watch("startPoint",f.hitch(this,function(v,T,ca){this.dt.addStartGraphic(ca,this._ptSym)}));this.dt.watch("startPointDD",f.hitch(this,function(v,T,ca){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",ca)}));this.coordTool.inputCoordinate.watch("outputString",f.hitch(this,function(v,T,ca){this.coordTool.manualInput||(this.coordTool.set("value",
ca),this.currentRing=null,this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:Y.focus(this.addPointBtn))}));this.own(B(this.coordTool,"keydown",f.hitch(this,this.coordToolKeyWasPressed)),this.dt.on("draw-complete",f.hitch(this,this.feedbackDidComplete)),B(this.rangeType,"change",f.hitch(this,this.rangeTypeDropDownChanged)),B(this.ringIntervalUnitsDD,"change",f.hitch(this,this.ringIntervalUnitsDidChange)),
B(this.coordinateFormatButton,"click",f.hitch(this,this.coordinateFormatButtonWasClicked)),B(this.coordinateFormatButton,"keydown",f.hitch(this,function(v){if(v.keyCode===a.ENTER||v.keyCode===a.SPACE)A.stop(v),this.coordinateFormatButtonWasClicked()})),B(this.addPointBtn,"keydown",f.hitch(this,function(v){if(v.keyCode===a.ENTER||v.keyCode===a.SPACE)A.stop(v),this.pointButtonWasClicked()})),B(this.coordinateFormat.content.applyButton,"click",f.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=
!0;var v=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],T=v.defaultFormat,ca=this.coordinateFormat.content.frmtSelect.get("value");v.useCustom&&(T=v.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",T);this.coordTool.inputCoordinate.set("formatType",ca);this.setCoordLabel(ca);H.close(this.coordinateFormat);Y.focus(this.coordinateFormatButton)})),B(this.coordinateFormat.content.applyButton,
"keydown",f.hitch(this,function(v){if(v.keyCode===a.ENTER||v.keyCode===a.SPACE){A.stop(v);this._restrictFocusOnAddCenterPointBtn=!0;var T=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],ca=T.defaultFormat,ea=this.coordinateFormat.content.frmtSelect.get("value");T.useCustom&&(ca=T.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",ca);this.coordTool.inputCoordinate.set("formatType",
ea);this.setCoordLabel(ea);H.close(this.coordinateFormat);Y.focus(this.coordinateFormatButton)}v.keyCode===a.ESCAPE&&(A.stop(v),H.close(this.coordinateFormat),Y.focus(this.coordinateFormatButton))})),B(this.coordinateFormat.content.cancelButton,"click",f.hitch(this,function(){H.close(this.coordinateFormat)})),B(this.coordinateFormat.content.cancelButton,"keydown",f.hitch(this,function(v){if(v.keyCode===a.ENTER||v.keyCode===a.SPACE)A.stop(v),H.close(this.coordinateFormat),Y.focus(this.coordinateFormatButton);
v.keyCode===a.ESCAPE&&(A.stop(v),H.close(this.coordinateFormat),Y.focus(this.coordinateFormatButton))})),B(this.clearGraphicsButton,"click",f.hitch(this,this.clearGraphics)),B(this.clearGraphicsButton,"keydown",f.hitch(this,function(v){if(v.keyCode===a.ENTER||v.keyCode===a.SPACE)A.stop(v),this.clearGraphics()})),B(this.numRingsDiv,d.leave,f.hitch(this,this.checkValidInputs)),B(this.ringIntervalDiv,d.leave,f.hitch(this,this.checkValidInputs)),B(this.numRadialsInputDiv,d.leave,f.hitch(this,this.checkValidInputs)),
B(this.btnAddDistance,"click",f.hitch(this,function(){var v=this._distanceTable.getRows(),T=!1;C.forEach(v,f.hitch(this,function(ca){this._distanceTable.getRowData(ca).Value.valid&&(T=!0)}));(T||0===v.length)&&this._distanceTable.addRow({})})),B(this.btnAddDistance,"keydown",f.hitch(this,function(v){if(v.keyCode===a.ENTER||v.keyCode===a.SPACE){A.stop(v);v=this._distanceTable.getRows();var T=!1;C.forEach(v,f.hitch(this,function(ca){this._distanceTable.getRowData(ca).Value.valid&&(T=!0)}));T&&this._distanceTable.addRow({})}})),
B(this._distanceTable.tbody,"keyup",f.hitch(this,function(v){v.keyCode===a.ENTER&&this._distanceTable.addRow({})})),B(this.coordinateFormat.content.frmtSelect,"keydown",f.hitch(this,function(v){v.keyCode===a.ESCAPE&&(A.stop(v),H.close(this.coordinateFormat),Y.focus(this.coordinateFormatButton))})),B(this.coordinateFormat.content.frmtVal,"keydown",f.hitch(this,function(v){v.keyCode===a.ESCAPE&&(A.stop(v),H.close(this.coordinateFormat),Y.focus(this.coordinateFormatButton))})),B(this.coordinateFormat.content.addSignChkBox,
"keydown",f.hitch(this,function(v){v.keyCode===a.ESCAPE&&(A.stop(v),H.close(this.coordinateFormat),Y.focus(this.coordinateFormatButton));v.keyCode===a.ENTER&&(A.stop(v),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),B(this.okButton,"keydown",f.hitch(this,function(v){if(v.keyCode===a.ENTER||v.keyCode===a.SPACE)A.stop(v),this.okButtonClicked()})));c("esri-touch")?this.own(B(this.addPointBtn,e.press,f.hitch(this,this.pointButtonWasClicked))):
this.own(B(this.addPointBtn,"click",f.hitch(this,this.pointButtonWasClicked)));this.own(B(this.labelColorPicker,"colorChanged",f.hitch(this,function(v){"ring"===v&&(this._labelSym.color=this._getColorPicker())})));this.own(B(this.labelTextSizeSpinner,"change",f.hitch(this,function(){this._labelSym.font.size=this.labelTextSizeSpinner.getValue()})));this.own(B(this.labelColorPickerNode,"keydown",f.hitch(this,function(v){v.keyCode!==a.ENTER&&v.keyCode!==a.SPACE||this.labelColorPicker.colorPicker.domNode.click()})));
this.own(B(this.labelTextSizeSpinner,"blur",f.hitch(this,function(){this.labelTextSizeSpinner.isValid()||this.labelTextSizeSpinner.set("value",this.labelSymbol.font.size)})))},setCoordLabel:function(v){v=U.sanitizeHTML(h.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:v}));this.rangeCenterLabel.innerHTML=v;t.set(this.coordTool.textbox,"aria-label",v)},rangeTypeDropDownChanged:function(){this.tabSwitched();switch(this.rangeType.get("value")){case "Interactive":I.add(this.numRingsContainer,
"controlGroupHidden");I.add(this.distancebetweenRingsContainer,"controlGroupHidden");I.add(this.distanceTableContainer,"controlGroupHidden");I.remove(this.distanceUnitsContainer,"controlGroupHidden");break;case "Fixed":I.remove(this.numRingsContainer,"controlGroupHidden");I.remove(this.distancebetweenRingsContainer,"controlGroupHidden");I.add(this.distanceUnitsContainer,"controlGroupHidden");I.add(this.distanceTableContainer,"controlGroupHidden");break;case "Origin":case "Cumulative":I.add(this.numRingsContainer,
"controlGroupHidden"),I.add(this.distancebetweenRingsContainer,"controlGroupHidden"),I.remove(this.distanceUnitsContainer,"controlGroupHidden"),I.remove(this.distanceTableContainer,"controlGroupHidden")}this.checkValidInputs()},coordToolKeyWasPressed:function(v){this.dt.removeStartGraphic();v.keyCode===a.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(f.hitch(this,function(T){"UNKNOWN"===T.inputType?(new L({message:this.nls.invalidCoordinateTypeMessage}),
this.coordTool.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):this.dt.getProjectedGeometry(T.coordinateEsriGeometry,this.map.spatialReference).then(f.hitch(this,f.hitch(this,function(ca){b.publish("manual-rangering-center-point-input",ca);this.setCoordLabel(T.inputType);this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[T.inputType].defaultFormat);this.coordTool.inputCoordinate.set("formatType",T.inputType);this.dt.addStartGraphic(ca,this._ptSym);
this.checkValidInputs()})))})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",this.coordTool.inputCoordinate.formatType);H.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});Y.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&H.close(this.coordinateFormat)},pointButtonWasClicked:function(){I.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),
this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,b.publish("clear-points"),this._setMapNavigation(!1),"Interactive"===this.rangeType.get("value")?this.dt.activate("polyline"):this.dt.activate("point"));I.toggle(this.addPointBtn,"drawPointBtn-active")},ringIntervalUnitsDidChange:function(){this.ringIntervalUnit=this.ringIntervalUnitsDD.get("value")},okButtonClicked:function(){if(!I.contains(this.okButton,"jimu-state-disabled")){if(!this.currentRing){this._restrictFocusOnAddCenterPointBtn=
!0;switch(this.rangeType.get("value")){case "Fixed":var v=this.ringIntervalInput.get("value");var T=this.numRingsInput.get("value");var ca=this.ringIntervalUnitsDD.get("value");break;case "Origin":case "Cumulative":if(ca=this.distanceUnitsDD.get("value"),this.checkTableValues())if(v=this._distanceTable.getRows(),"Origin"===this.rangeType.get("value"))v=C.map(v,f.hitch(this,function(fa){return this._distanceTable.getRowData(fa).Value.value}));else{var ea=0;v=C.map(v,f.hitch(this,function(fa){fa=this._distanceTable.getRowData(fa);
return ea+=fa.Value.value}))}else{new L({message:this.nls.distanceTableErrorMessage});return}}"Interactive"!==this.rangeType.get("value")&&(T={centerPoint:this.coordTool.inputCoordinate.coordinateEsriGeometry,numRings:T,numRadials:this.numRadialsInput.get("value"),radius:0,circle:null,circles:[],lastCircle:null,r:0,c:0,radials:0,ringInterval:v,ringIntervalUnitsDD:ca,circleSym:this._circleSym},this.createRangeRings(T))}this.emit("show-publish",this._gl)}},checkTableValues:function(){return 0<this._distanceTable.getRows().length},
createRangeRings:function(v){if(v.centerPoint){if(v.ringInterval&&v.ringIntervalUnitsDD)if(v.ringInterval.constructor===Array)for(var T=0;T<v.ringInterval.length;T++)v.ringInterval[T]=this.coordTool.inputCoordinate.util.convertToMeters(parseFloat(v.ringInterval[T]),v.ringIntervalUnitsDD);else v.ringDistance=this.coordTool.inputCoordinate.util.convertToMeters(parseFloat(v.ringInterval),v.ringIntervalUnitsDD);this.dt.removeStartGraphic();if(0===v.circles.length)if(v.ringInterval&&v.ringInterval.constructor===
Array)for(T=0;T<v.ringInterval.length;T++)v.radius+=v.ringDistance,v.circle=new q({center:v.centerPoint,geodesic:!0,radius:v.ringInterval[T],numberOfPoints:360}),v.circles.push(v.circle);else for(v.r=0;v.r<v.numRings;v.r++)v.radius+=v.ringDistance,v.circle=new q({center:v.centerPoint,geodesic:!0,radius:v.radius,numberOfPoints:360}),v.circles.push(v.circle);var ca=[];for(v.c=0;v.c<v.circles.length;v.c++)ca.push(this.dt.getProjectedGeometry(new n({paths:[v.circles[v.c].rings[0]],spatialReference:v.centerPoint.spatialReference}),
this.map.spatialReference));(new ba(ca)).then(f.hitch(this,function(ea){for(var fa=v.ringIntervalUnitsDD,ja=0;ja<ea.length;ja++){var ka=new n(ea[ja][1]),ma=m.format(m.round(this.coordTool.inputCoordinate.util.convertMetersToUnits(v.circles[ja].radius,fa),2),{places:2,locale:g.locale});ma=window.isRTL?this._getLengthAbbrevation(this.distanceUnitsDD.get("value"))+" "+ma:ma+" "+this._getLengthAbbrevation(this.distanceUnitsDD.get("value"));var oa=new K(ka,this._lineSym,{ObjectID:this._gl.graphics.length+
1,Interval:ma,CenterPoint:this.coordTool.get("value"),Rings:parseFloat(v.circles.length),Radials:parseFloat(this.numRadialsInput.get("value")),RadiusDistance:parseFloat(m.round(this.coordTool.inputCoordinate.util.convertMetersToUnits(v.circles[ja].radius,fa),2)),RadiusUnit:"Fixed"===this.rangeType.get("value")?this.ringIntervalUnitsDD.get("value"):this.distanceUnitsDD.get("value")});this._gl.add(oa);this._currentRangeGraphic=oa;ka=new x(ka.paths[0][0][0],ka.paths[0][0][1],this.map.spatialReference);
this._tsGL.add(new K(ka,f.clone(this._labelSym).setText(ma).setOffset(0,10)))}for(ea=v.largestRadius=0;ea<v.circles.length;ea++)v.circles[ea].radius>v.largestRadius&&(v.largestRadius=v.circles[ea].radius);ca=[];if(0!==v.numRadials){ea=new q({center:v.centerPoint,geodesic:!0,radius:v.largestRadius,numberOfPoints:v.numRadials});for(fa=0;fa<ea.rings[0].length-1;fa++)ja=new n(v.centerPoint.spatialReference),ja.addPath([f.clone(v.centerPoint),ea.getPoint(0,fa)]),ja=new n(J.geodesicDensify(ja,1E4),v.centerPoint.spatialReference),
ca.push(this.dt.getProjectedGeometry(ja,this.map.spatialReference));0<ca.length&&(new ba(ca)).then(f.hitch(this,function(la){for(var na=0;na<la.length;na++)this._gl.add(new K(la[na][1],this._lineSym,{ObjectID:this._gl.graphics.length+1,Interval:"",CenterPoint:this.coordTool.get("value")}));this._gl.redraw()}),function(la){console.log(la)});this.currentRing=ea=new q({center:v.centerPoint,geodesic:!0,radius:v.largestRadius,numberOfPoints:60});this.dt.getProjectedGeometry(ea.getExtent(),this.map.spatialReference).then(f.hitch(this,
function(la){this.checkValidInputs();this.map.setExtent(la.expand(3))}))}}))}},feedbackDidComplete:function(v){var T=null;if(v.geometry.hasOwnProperty("circlePoints")){T=v.geometry.circlePoints[0];var ca={centerPoint:T,numRadials:this.numRadialsInput.get("value"),circles:[],circleSym:this._circleSym,r:0,c:0,radials:0,ringIntervalUnitsDD:this.distanceUnitsDD.get("value"),intervalUnits:this.distanceUnitsDD.get("value")};if(v.geometry.circlePoints&&1<v.geometry.circlePoints.length){var ea=v.geometry.circlePoints.length;
var fa=v.geometry.circlePoints;fa[ea-1].x===fa[ea-2].x&&fa[ea-1].y===fa[ea-2].y&&fa.splice(ea-1,1)}for(ea=1;ea<v.geometry.circlePoints.length;ea++)fa=new n(v.geometry.spatialReference),fa.addPath([T,v.geometry.circlePoints[ea]]),fa=J.geodesicLength(fa,9001),fa=new q({center:T,geodesic:!0,radius:fa,numberOfPoints:360}),ca.circles.push(fa);this.createRangeRings(ca)}else T=v.geometry,this.checkValidInputs();I.remove(this.addPointBtn,"drawPointBtn-active");this.dt.deactivate();this._setMapNavigation(!0)},
clearGraphics:function(){this._gl&&(this._tsGL.clear(),this._gl.clear(),this._gl.refresh(),this.dt.removeStartGraphic(),this.coordTool.clear());this.tabSwitched();this.checkValidInputs();for(var v=0;v<this.map.graphicsLayerIds.length;v++)this.map.getLayer(this.map.graphicsLayerIds[v]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},checkValidInputs:function(){I.add(this.okButton,"jimu-state-disabled");t.set(this.okButton,"tabindex",
-1);null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.numRingsInput.isValid()&&this.ringIntervalInput.isValid()&&this.numRadialsInput.isValid()&&(I.remove(this.okButton,"jimu-state-disabled"),t.set(this.okButton,"tabindex",0));this.okButton.innerHTML="Interactive"===this.rangeType.getValue()?this.nls.publishDDBtn:this.nls.common.ok},tabSwitched:function(){this.dt&&(this.dt.deactivate(),this.dt.cleanup(),this.dt.disconnectOnMouseMoveHandlers());this._setMapNavigation(!0);this.dt&&
this.dt.removeStartGraphic();this.addPointBtn&&I.remove(this.addPointBtn,"drawPointBtn-active");this.coordinateFormat&&H.close(this.coordinateFormat)},_setMapNavigation:function(v){v?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(v){var T=null;if(v)switch(v){case "feet":T=this.nls.abbrevFeetLabel;break;case "kilometers":T=this.nls.abbrevKmLabel;break;case "miles":T=this.nls.abbrevMilesLabel;break;case "meters":T=this.nls.abbrevMetersLabel;
break;case "nautical-miles":T=this.nls.abbrevNauticalMilesLabel;break;case "yards":T=this.nls.abbrevYardsLabel;break;default:T=v}return T},_getDegreeAbbreviation:function(v){var T=null;if(v)switch(v){case "degrees":T=this.nls.abbrevDegreesLabel;break;case "mils":T=this.nls.abbrevMilsLabel;break;default:T=v}return T},setFirstFocusNode:function(){U.initFirstFocusNode(this.domNodeObj,this.rangeType.domNode)},focusFirstNodeOfSelectedTab:function(){Y.focus(this.rangeType.focusNode)},setLastFocusNode:function(){U.initLastFocusNode(this.domNodeObj,
this.clearGraphicsButton)},_createSymbolPicker:function(v,T,ca,ea){if(ca){var fa={};fa.type=U.getSymbolTypeByGeometryType(ca);this.hasOwnProperty("_lineSym")&&(fa.symbol=this._lineSym);var ja={symbolChooserTitle:ea,symbolParams:fa,nls:this.nls,symbolType:T};this._showSelectedSymbol(v,fa.symbol);this.own(B(v,"click",f.hitch(this,function(){fa.symbol=this._lineSym;this._initSymbolChooserPopup(ja,v);Y.focus(this.ringSymbolNode)})));this.own(B(v,"keydown",f.hitch(this,function(ka){if(ka.keyCode===a.ENTER||
ka.keyCode===a.SPACE)fa.symbol=this._lineSym,this._initSymbolChooserPopup(ja,v),Y.focus(this.ringSymbolNode)})))}},_initSymbolChooserPopup:function(v,T){var ca=new N(v);ca.onOkClick=f.hitch(this,function(){var ea=ca.symbolChooser.getSymbol();this._showSelectedSymbol(T,ea);ca.popup.close()})},_showSelectedSymbol:function(v,T){y.empty(v);if(T){var ca=w.createSymbolNode(T);ca||(ca=y.create("div"));y.place(ca,v);this._lineSym=new aa(T.toJson())}},_createColorPicker:function(v){var T=new X({nls:this.nls,
tab:"ring"});T.placeAt(v);T.startup();return T},_getColorPicker:function(){return this.labelColorPicker.getValues()},_setColorPicker:function(v){this.labelColorPicker.setValues({color:new ha(v)})}})})},"widgets/DistanceAndDirection/models/RangeRingFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Circle esri/geometry/Polyline esri/geometry/geometryEngine jimu/utils ./Feedback dojo/has dojo/touch dojo/on".split(" "),
function(O,f,C,g,y,B,I,b,c,e,h,d,a,m){return O([h],{constructor:function(t){O.safeMixin(this,t);this.syncEvents();this.initGeometryService();this.circlePoints=[];this.geoDesicCirclePoints=[]},syncEvents:function(){g.subscribe("manual-rangering-center-point-input",f.hitch(this,this.onCenterPointManualInputHandler));g.subscribe("clear-points",f.hitch(this,this.clearPoints))},clearPoints:function(t){t&&(this._points=[],this.circlePoints=[],this.geoDesicCirclePoints=[],this.map.graphics.clear())},clearGraphics:function(){this.map.graphics.clear()},
onCenterPointManualInputHandler:function(t){this._points=[];this.circlePoints=[];this.geoDesicCirclePoints=[];this._points.push(t.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(t)},_onClickHandler:function(t){if(this.map.snappingManager)var l=this.map.snappingManager._snappingPoint;var u=l||t.mapPoint,k=this.map;this._points.push(u.offset(0,0));this._processAfterMapClick(u).then(f.hitch(this,function(G){1===this._points.length?(this.canProjectLocally||(this.geoDesicCirclePoints=
[],this.circlePoints=[]),this.set("startPoint",this._points[0]),this.set("startPointDD",G)):this.set("endPointDD",G);this.circlePoints.push(u.offset(0,0));this.geoDesicCirclePoints.push(G.offset(0,0));switch(this._geometryType){case B.POINT:this._drawEnd(G.offset(0,0));this._setTooltipMessage(0);break;case B.POLYLINE:G=new b({paths:[[[u.x,u.y],[u.x,u.y]]],spatialReference:k.spatialReference}),this.lgraphic=new y(G,this.lineSymbol),k.snappingManager&&k.snappingManager._setGraphic(this._graphic),1<
this._points.length&&this._drawRangeCircle(),0<this._points.length&&(d("esri-touch")&&this.parentWidget.own(m(this.map.root,a.move,f.hitch(this,this._onMouseMoveHandler))),!this._onMouseMoveHandler_connect&&this.canProjectLocally&&(this._onMouseMoveHandler_connect=C.connect(this.map,"onMouseMove",this._onMouseMoveHandler)),this._onDoubleClickHandler_connect||(this._onDoubleClickHandler_connect=C.connect(this.map,"onDblClick",f.hitch(this,this._onDoubleClickHandler))))}this._setTooltipMessage(this._points.length);
1<this._points.length&&(G=this._tooltip)&&(G.innerHTML=e.sanitizeHTML(this.nls.doubleClickEllipseMesage))}))},_drawRangeCircle:function(){if(this.canProjectLocally)this.circleGraphic&&(t=new y(this.circleGraphic.geometry,this.fillSymbol),this.map.graphics.add(t));else{var t=new b({paths:[[[this.startPointDD.x,this.startPointDD.y],[this.endPointDD.x,this.endPointDD.y]]],spatialReference:this.startPointDD.spatialReference});t=c.geodesicLength(t,9001);var l=new I(this.startPointDD,{radius:t,geodesic:!0,
numberOfPoints:360});this.geodsicCircleGeometry=new I(this.startPointDD,{radius:t,geodesic:!0,numberOfPoints:360});this.getProjectedGeometry(l,this.map.spatialReference).then(f.hitch(this,f.hitch(this,function(u){l=f.mixin(u,{distanceDirectionType:"military-tools-range-rings"});this.circleGraphic=new y(l,this.fillSymbol);this.map.graphics.add(this.circleGraphic)})))}},_onMouseMoveHandler:function(t){if(this.map.snappingManager)var l=this.map.snappingManager._snappingPoint;var u=this._points[0];t=
l||t.mapPoint;l=this.lgraphic.geometry;l.setPoint(0,0,{x:u.x,y:u.y});l.setPoint(0,1,{x:t.x,y:t.y});t=c.geodesicLength(l,9001);u=new I(u,{radius:t,geodesic:!0,numberOfPoints:360});this.geodsicCircleGeometry=new I(this.startPointDD,{radius:t,geodesic:!0,numberOfPoints:360});this.circleGraphic&&this.map.graphics.remove(this.circleGraphic);u=f.mixin(u,{distanceDirectionType:"military-tools-range-rings"});this.circleGraphic=new y(u,this.fillSymbol);this.map.graphics.add(this.circleGraphic)},_onDoubleClickHandler:function(){if(this.geoDesicCirclePoints&&
!(2>this.geoDesicCirclePoints.length)){this.disconnectOnMouseMoveHandlers();var t=f.clone(this.geoDesicCirclePoints);this.cleanup();this._clear();this._setTooltipMessage(0);t=f.mixin(this.geodsicCircleGeometry,{circlePoints:t});this._drawEnd(t)}},disconnectOnMouseMoveHandlers:function(){C.disconnect(this._onMouseMoveHandler_connect);C.disconnect(this._onDoubleClickHandler_connect);this._onDoubleClickHandler_connect=null},cleanup:function(){for(var t=this.map.graphics.graphics.length-1;0<=t;t--)this.map.graphics.graphics[t].geometry.hasOwnProperty("distanceDirectionType")&&
this.map.graphics.remove(this.map.graphics.graphics[t]);this.circlePoints=[];this.geoDesicCirclePoints=[]}})})},"widgets/DistanceAndDirection/js/portal-utils":function(){define(["esri/request","dojo/json"],function(O,f){return{getFeatureServiceParams:function(C,g){return{name:C,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"GRG",description:"",copyrightText:"",spatialReference:g.spatialReference.toJson(),
initialExtent:g.extent.toJson(),allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",xssInputRule:"rejectInvalid"}}},getLayerParams:function(C,g,y,B){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:C,type:"Feature Layer",displayField:"",description:"",tags:"DD",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,allowOthersToDelete:!1,allowOthersToUpdate:!1},
relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},
useStandardizedQueries:!1,geometryType:B.type,minScale:0,maxScale:0,extent:g.extent.toJson(),drawingInfo:{renderer:y.toJson(),transparency:0},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:B.fields,indexes:[],types:[],templates:[],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,
capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(C,g,y){return O({url:C,content:{name:y,type:"Feature Service",token:g,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},createFeatureService:function(C,g,y){return O({url:C,content:{f:"json",token:g,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:f.stringify(y),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},
addDefinitionToService:function(C,g,y){return O({url:C,content:{token:g,addToDefinition:f.stringify(y),f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})}}})},"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(O,f,C,g,y,B,I){var b={_defaultStandbyParams:{image:I.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(c){if(c=
this._normalizeParams(c))return c=new B(b._toStandbyParams(c)),y.place(c.domNode,C.doc.body),b._createHandle(c)},_normalizeParams:function(c){if(c){if(c.target)return c;if("string"===typeof c){var e=O.byId(c);c=e?e.domNode:g.byId(c)}else c=c.domNode?c.domNode:g.byId(c);if(c)return{target:c}}},_toStandbyParams:function(c){c.imageUrl&&(c.image=c.imageUrl);c.backgroundColor&&(c.color=c.backgroundColor);c.backgroundOpacity&&(c.opacity=c.backgroundOpacity);c.fadeDuration&&(c.duration=c.fadeDuration);return f.mixin({},
b._defaultStandbyParams,c)},_createHandle:function(c){return{show:function(){c&&c.show()},hide:function(){c&&c.hide()},destroy:function(){c&&(c.destroy(),c=null)}}}};return b})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(O,
f,C,g,y,B,I,b,c,e,h,d,a,m,t,l,u){O.experimental("dojox.widget.Standby");return f("dojox.widget.Standby",[t,l],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(k){if(!this._started){if("string"===typeof this.target){var G=u.byId(this.target);this.target=G?G.domNode:B.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,I.set(this._imageNode,"src",this.image),I.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;e.set(this._underlayNode,
{display:"none",backgroundColor:this.color});e.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=d.body()&&d.body().appendChild(this.domNode);7==y("ie")&&(this._ieFixNode=b.create("div"),e.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),d.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(k){console.error(k)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
e.set(this._centerNode,"display","none");e.set(this._underlayNode,"display","none");7==y("ie")&&this._ieFixNode&&(d.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var k=I.get(d.body(),"dir");k&&(k=k.toLowerCase());var G=this._scrollerWidths(),H=this.target,z=e.get(this._centerNode,"display");e.set(this._centerNode,
"display","block");var L=c.position(H,!0);if(H===d.body()||H===d.doc)L=h.getBox(),L.x=L.l,L.y=L.t;var S=c.getMarginBox(this._centerNode);e.set(this._centerNode,"display",z);if(this._ieFixNode){var M=-this._ieFixNode.offsetTop/1E3;L.x=Math.floor((L.x+.9)/M);L.y=Math.floor((L.y+.9)/M);L.w=Math.floor((L.w+.9)/M);L.h=Math.floor((L.h+.9)/M)}var U=e.get(H,"zIndex"),W=z=U;if("auto"===this.zIndex)if("auto"!=U)z=parseInt(z,10),W=parseInt(W,10);else{var Q=H;if(Q&&Q!==d.body()&&Q!==d.doc)for(Q=H.parentNode,
M=-1E5;Q&&Q!==d.body();)(U=e.get(Q,"zIndex"))&&"auto"!==U&&(U=parseInt(U,10),M<U&&(M=U,z=U+1,W=U+1)),Q=Q.parentNode}else z=parseInt(this.zIndex,10),W=parseInt(this.zIndex,10);e.set(this._centerNode,"zIndex",W);e.set(this._underlayNode,"zIndex",z);if((z=H.parentNode)&&z!==d.body()&&H!==d.body()&&H!==d.doc){Q=L.h;W=L.w;H=c.position(z,!0);this._ieFixNode&&(M=-this._ieFixNode.offsetTop/1E3,H.x=Math.floor((H.x+.9)/M),H.y=Math.floor((H.y+.9)/M),H.w=Math.floor((H.w+.9)/M),H.h=Math.floor((H.h+.9)/M));H.w-=
z.scrollHeight>z.clientHeight&&0<z.clientHeight?G.v:0;H.h-=z.scrollWidth>z.clientWidth&&0<z.clientWidth?G.h:0;"rtl"===k&&(y("opera")?(L.x+=z.scrollHeight>z.clientHeight&&0<z.clientHeight?G.v:0,H.x+=z.scrollHeight>z.clientHeight&&0<z.clientHeight?G.v:0):y("ie")?H.x+=z.scrollHeight>z.clientHeight&&0<z.clientHeight?G.v:0:y("webkit"));H.w<L.w&&(L.w-=H.w);H.h<L.h&&(L.h-=H.h);var q=H.y,n=H.y+H.h,x=L.y,J=L.y+Q;k=H.x;M=H.x+H.w;U=L.x;var K=L.x+W;if(J>q&&x<q)L.y=H.y,Q-=q-x,L.h=Q<H.h?Q:L.h-2*(z.scrollWidth>
z.clientWidth&&0<z.clientWidth?G.h:0);else if(x<n&&J>n)L.h=n-x;else if(J<=q||x>=n)L.h=0;if(K>k&&U<k)L.x=H.x,W-=k-U,L.w=W<H.w?W:L.w-2*(z.scrollHeight>z.clientHeight&&0<z.clientHeight?G.w:0);else if(U<M&&K>M)L.w=M-U;else if(K<=k||U>=M)L.w=0}0<L.h&&0<L.w?(e.set(this._underlayNode,{display:"block",width:L.w+"px",height:L.h+"px",top:L.y+"px",left:L.x+"px"}),G=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(G),y("ie")||(G=
"MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),this._cloneStyles(G,this)),G=L.h/2-S.h/2,z=L.w/2-S.w/2,L.h>=S.h&&L.w>=S.w?e.set(this._centerNode,{top:G+L.y+"px",left:z+L.x+"px",display:"block"}):e.set(this._centerNode,"display","none")):(e.set(this._underlayNode,"display","none"),e.set(this._centerNode,
"display","none"));if(null===this._resizeCheck){var r=this;this._resizeCheck=setInterval(function(){r._size()},100)}}},_cloneStyles:function(k){C.forEach(k,function(G){e.set(this._underlayNode,G,e.get(this.target,G))},this)},_fadeIn:function(){var k=this,G=a.animateProperty({duration:k.duration,node:k._underlayNode,properties:{opacity:{start:0,end:k.opacity}}}),H=a.animateProperty({duration:k.duration,node:k._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){k.onShow();delete k._anim}});
this._anim=m.combine([G,H]);this._anim.play()},_fadeOut:function(){var k=this,G=a.animateProperty({duration:k.duration,node:k._underlayNode,properties:{opacity:{start:k.opacity,end:0}},onEnd:function(){e.set(this.node,{display:"none",zIndex:"-1000"})}}),H=a.animateProperty({duration:k.duration,node:k._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){e.set(this.node,{display:"none",zIndex:"-1000"});k.onHide();k._enableOverflow();delete k._anim}});this._anim=m.combine([G,H]);this._anim.play()},
_ignore:function(k){k&&g.stop(k)},_scrollerWidths:function(){var k=b.create("div");e.set(k,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var G=b.create("div");e.set(G,{width:"200px",height:"10px"});k.appendChild(G);d.body().appendChild(k);G=c.getContentBox(k);e.set(k,"overflow","scroll");var H=c.getContentBox(k);d.body().removeChild(k);return{v:G.w-H.w,h:G.h-H.h}},_setTextAttr:function(k){this.text=this._textNode.innerHTML=
k},_setColorAttr:function(k){e.set(this._underlayNode,"backgroundColor",k);this.color=k},_setImageTextAttr:function(k){I.set(this._imageNode,"alt",k);this.imageText=k},_setImageAttr:function(k){I.set(this._imageNode,"src",k);this.image=k},_setCenterIndicatorAttr:function(k){this.centerIndicator=k;"image"===k?(this._centerNode=this._imageNode,e.set(this._textNode,"display","none")):(this._centerNode=this._textNode,e.set(this._imageNode,"display","none"))},_setTargetAttr:function(k){if("string"===typeof k){var G=
u.byId(k);this._set("target",G?G.domNode:B.byId(k))}else this._set("target",k)},_disableOverflow:function(){if(this.target===d.body()||this.target===d.doc){this._overflowDisabled=!0;var k=d.body();this._oldOverflow=k.style&&k.style.overflow?e.get(k,"overflow"):"";if(y("ie")&&!y("quirks")){if(k.parentNode&&k.parentNode.style&&k.parentNode.style.overflow)this._oldBodyParentOverflow=k.parentNode.style.overflow;else try{this._oldBodyParentOverflow=e.get(k.parentNode,"overflow")}catch(G){this._oldBodyParentOverflow=
"scroll"}e.set(k.parentNode,"overflow","hidden")}e.set(k,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var k=d.body();y("ie")&&!y("quirks")&&(k.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);e.set(k,"overflow",this._oldOverflow);if(y("webkit")){var G=b.create("div",{style:{height:"2px"}});k.appendChild(G);setTimeout(function(){k.removeChild(G)},0)}delete this._oldOverflow}}})})},"widgets/DistanceAndDirection/js/jquery.easy-autocomplete":function(){define(["jimu/loaderplugins/jquery-loader! ./libs/jquery/jquery-1-11-1.js"],
function(O){var f=function(C){C.Configuration=function(g){function y(b,c){function e(h,d){for(var a in d)void 0===h[a]&&b.log("Property '"+a+"' does not exist in EasyAutocomplete options API."),"object"===typeof h[a]&&-1===O.inArray(a,I)&&e(h[a],d[a])}e(B,c)}var B={data:"list-required",url:"list-required",dataType:"json",listLocation:function(b){return b},xmlElementName:"",getValue:function(b){return b},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,
method:function(b,c){b=B.getValue(b);c=B.getValue(c);return b<c?-1:b>c?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(b,c){return-1<b.search(c)?!0:!1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},
onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(b){return b},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},I=["ajaxSettings","template"];this.get=function(b){return B[b]};this.equals=function(b,c){var e=void 0!==B[b]&&null!==B[b]?!0:!1;return e&&B[b]===c?!0:!1};this.checkDataUrlProperties=function(){return"list-required"===
B.url&&"list-required"===B.data?!1:!0};this.checkRequiredProperties=function(){for(var b in B)if("required"===B[b])return!1;return!0};this.printPropertiesThatDoesntExist=function(b,c){y(b,c)};(function(){"xml"===g.dataType&&(g.getValue||(g.getValue=function(a){return O(a).text()}),g.list||(g.list={}),g.list.sort||(g.list.sort={}),g.list.sort.method=function(a,m){a=g.getValue(a);m=g.getValue(m);return a<m?-1:a>m?1:0},g.list.match||(g.list.match={}),g.list.match.method=function(a,m){return-1<a.search(m)?
!0:!1});if(void 0!==g.categories&&g.categories instanceof Array){for(var b=[],c=0,e=g.categories.length;c<e;c+=1){var h=g.categories[c],d;for(d in B.categories[0])void 0===h[d]&&(h[d]=B.categories[0][d]);b.push(h)}g.categories=b}})();(function(){function b(c,e){var h=c||{},d;for(d in c)void 0!==e[d]&&null!==e[d]&&("object"!==typeof e[d]||e[d]instanceof Array?h[d]=e[d]:b(c[d],e[d]));void 0!==e.data&&null!==e.data&&"object"===typeof e.data&&(h.data=e.data);return h}B=b(B,g)})();!0===B.loggerEnabled&&
y(console,g);B.ajaxSettings=void 0!==g.ajaxSettings&&"object"===typeof g.ajaxSettings?g.ajaxSettings:{};(function(){if("list-required"!==B.url&&"function"!==typeof B.url){var b=B.url;B.url=function(){return b}}void 0!==B.ajaxSettings.url&&"function"!==typeof B.ajaxSettings.url&&(b=B.ajaxSettings.url,B.ajaxSettings.url=function(){return b});if("string"===typeof B.listLocation){var c=B.listLocation;"XML"===B.dataType.toUpperCase()?B.listLocation=function(h){return O(h).find(c)}:B.listLocation=function(h){return h[c]}}if("string"===
typeof B.getValue){var e=B.getValue;B.getValue=function(h){return h[e]}}void 0!==g.categories&&(B.categoriesAssigned=!0)})()};return C}(f||{});f=function(C){C.Logger=function(){this.error=function(){};this.warning=function(){}};return C}(f||{});f=function(C){C.Constans=function(){var g={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(y){return g[y]}};return C}(f||{});f=function(C){C.ListBuilderService=function(g,
y){function B(b,c){function e(){var m={},t;void 0!==b.xmlElementName&&(m.xmlElementName=b.xmlElementName);void 0!==b.listLocation?t=b.listLocation:void 0!==g.get("listLocation")&&(t=g.get("listLocation"));void 0!==t?"string"===typeof t?m.data=O(c).find(t):"function"===typeof t&&(m.data=t(c)):m.data=c;return m}function h(){var m={};void 0!==b.listLocation?"string"===typeof b.listLocation?m.data=c[b.listLocation]:"function"===typeof b.listLocation&&(m.data=b.listLocation(c)):m.data=c;return m}var d=
{};d="XML"===g.get("dataType").toUpperCase()?e():h();void 0!==b.header&&(d.header=b.header);void 0!==b.maxNumberOfElements&&(d.maxNumberOfElements=b.maxNumberOfElements);void 0!==g.get("list").maxNumberOfElements&&(d.maxListSize=g.get("list").maxNumberOfElements);if(void 0!==b.getValue)if("string"===typeof b.getValue){var a=b.getValue;d.getValue=function(m){return m[a]}}else"function"===typeof b.getValue&&(d.getValue=b.getValue);else d.getValue=g.get("getValue");return d}function I(b){var c=[];void 0===
b.xmlElementName&&(b.xmlElementName=g.get("xmlElementName"));O(b.data).find(b.xmlElementName).each(function(){c.push(this)});return c}this.init=function(b){var c=[],e={};e.data=g.get("listLocation")(b);e.getValue=g.get("getValue");e.maxListSize=g.get("list").maxNumberOfElements;c.push(e);return c};this.updateCategories=function(b,c){if(g.get("categoriesAssigned")){b=[];for(var e=0;e<g.get("categories").length;e+=1){var h=B(g.get("categories")[e],c);b.push(h)}}return b};this.convertXml=function(b){if("XML"===
g.get("dataType").toUpperCase())for(var c=0;c<b.length;c+=1)b[c].data=I(b[c]);return b};this.processData=function(b,c){for(var e=0,h=b.length;e<h;e+=1)b[e].data=y(g,b[e],c);return b};this.checkIfDataExists=function(b){for(var c=0,e=b.length;c<e;c+=1)if(void 0!==b[c].data&&b[c].data instanceof Array&&0<b[c].data.length)return!0;return!1}};return C}(f||{});f=function(C){C.proccess=function(g,y,B){function I(c,e){g.get("list").match.caseSensitive||("string"===typeof c&&(c=c.toLowerCase()),e=e.toLowerCase());
return g.get("list").match.method(c,e)?!0:!1}C.proccess.match=I;var b=y.data;b=function(c,e){var h=[],d="";if(g.get("list").match.enabled)for(var a=0,m=c.length;a<m;a+=1)d=g.get("getValue")(c[a]),I(d,e)&&h.push(c[a]);else h=c;return h}(b,B);b=function(c){void 0!==y.maxNumberOfElements&&c.length>y.maxNumberOfElements&&(c=c.slice(0,y.maxNumberOfElements));return c}(b);return b=function(c){g.get("list").sort.enabled&&c.sort(g.get("list").sort.method);return c}(b)};return C}(f||{});f=function(C){C.Template=
function(g){var y={basic:{type:"basic",method:function(I){return I},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(I){return I+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(I){return I},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(I){return I},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(I){return I},cssClass:""},
custom:{type:"custom",method:function(){},cssClass:""}},B=function(I){var b=I.fields;if("description"===I.type){var c=y.description.method;"string"===typeof b.description?c=function(e,h){return e+" - \x3cspan\x3e"+h[b.description]+"\x3c/span\x3e"}:"function"===typeof b.description&&(c=function(e,h){return e+" - \x3cspan\x3e"+b.description(h)+"\x3c/span\x3e"});return c}return"iconRight"===I.type?("string"===typeof b.iconSrc?c=function(e,h){return e+"\x3cimg class\x3d'eac-icon' src\x3d'"+h[b.iconSrc]+
"' /\x3e"}:"function"===typeof b.iconSrc&&(c=function(e,h){return e+"\x3cimg class\x3d'eac-icon' src\x3d'"+b.iconSrc(h)+"' /\x3e"}),c):"iconLeft"===I.type?("string"===typeof b.iconSrc?c=function(e,h){return"\x3cimg class\x3d'eac-icon' src\x3d'"+h[b.iconSrc]+"' /\x3e"+e}:"function"===typeof b.iconSrc&&(c=function(e,h){return"\x3cimg class\x3d'eac-icon' src\x3d'"+b.iconSrc(h)+"' /\x3e"+e}),c):"links"===I.type?("string"===typeof b.link?c=function(e,h){return"\x3ca href\x3d'"+h[b.link]+"' \x3e"+e+"\x3c/a\x3e"}:
"function"===typeof b.link&&(c=function(e,h){return"\x3ca href\x3d'"+b.link(h)+"' \x3e"+e+"\x3c/a\x3e"}),c):"custom"===I.type?I.method:y.basic.method};this.getTemplateClass=function(I){var b=function(){return""};return I&&I.type?I.type&&y[I.type]?function(){var c=y[I.type].cssClass;return function(){return c}}():b:b}(g);g=g&&g.type?g.type&&y[g.type]?B(g):y.basic.method:y.basic.method;this.build=g};return C}(f||{});f=function(C){C.main=function(g,y){function B(){function S(M,U){return a.get("highlightPhrase")&&
""!==U?(U=U.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),(M+"").replace(new RegExp("("+U+")","gi"),"\x3cb\x3e$1\x3c/b\x3e")):M}k.parent().hasClass(d.getValue("WRAPPER_CSS_CLASS"))&&(k.next("."+d.getValue("CONTAINER_CLASS")).remove(),k.unwrap());(function(){var M=O("\x3cdiv\x3e"),U=d.getValue("WRAPPER_CSS_CLASS");a.get("theme")&&""!==a.get("theme")&&(U+=" eac-"+a.get("theme"));a.get("cssClasses")&&""!==a.get("cssClasses")&&(U+=" "+a.get("cssClasses"));""!==t.getTemplateClass()&&(U+=" "+
t.getTemplateClass());M.addClass(U);k.wrap(M);!0===a.get("adjustWidth")&&k.parent().css("width","100%")})();(function(){var M=O("\x3cdiv\x3e").addClass(d.getValue("CONTAINER_CLASS"));M.attr("id",I()).prepend(O("\x3cul\x3e"));(function(){M.on("show.eac",function(){switch(a.get("list").showAnimation.type){case "slide":var U=a.get("list").showAnimation.time;var W=a.get("list").showAnimation.callback;M.find("ul").slideDown(U,W);break;case "fade":U=a.get("list").showAnimation.time;W=a.get("list").showAnimation.callback;
M.find("ul").fadeIn(U,W);break;default:M.find("ul").show()}a.get("list").onShowListEvent()}).on("hide.eac",function(){switch(a.get("list").hideAnimation.type){case "slide":var U=a.get("list").hideAnimation.time;var W=a.get("list").hideAnimation.callback;M.find("ul").slideUp(U,W);break;case "fade":U=a.get("list").hideAnimation.time;W=a.get("list").hideAnimation.callback;M.find("ul").fadeOut(U,W);break;default:M.find("ul").hide()}a.get("list").onHideListEvent()}).on("selectElement.eac",function(){M.find("ul li").removeClass("selected");
M.find("ul li").eq(z).addClass("selected");a.get("list").onSelectItemEvent()}).on("loadElements.eac",function(U,W,Q){var q="";U=M.find("ul");U.empty().detach();H=[];for(var n=0,x=0,J=W.length;x<J;x+=1){var K=W[x].data;if(0!==K.length){void 0!==W[x].header&&0<W[x].header.length&&U.append("\x3cdiv class\x3d'eac-category' \x3e"+W[x].header+"\x3c/div\x3e");for(var r=0,p=K.length;r<p&&n<W[x].maxListSize;r+=1)q=O("\x3cli\x3e\x3cdiv class\x3d'eac-item'\x3e\x3c/div\x3e\x3c/li\x3e"),function(){var E=r,F=n,
V=W[x].getValue(K[E]);q.find(" \x3e div").on("click",function(){k.val(V).trigger("change");z=F;h(F);a.get("list").onClickEvent();a.get("list").onChooseEvent()}).mouseover(function(){z=F;h(F);a.get("list").onMouseOverEvent()}).mouseout(function(){a.get("list").onMouseOutEvent()}).html(t.build(S(V,Q),K[E]))}(),U.append(q),H.push(K[r]),n+=1}}M.append(U);a.get("list").onLoadEvent()})})();k.after(M)})();G=O("#"+I());a.get("placeholder")&&k.attr("placeholder",a.get("placeholder"))}function I(){var S=k.attr("id");
return S=d.getValue("CONTAINER_ID")+S}function b(){u("autocompleteOff",!0)&&k.attr("autocomplete","off");(function(){k.focusout(function(){var S=k.val();a.get("list").match.caseSensitive||(S=S.toLowerCase());for(var M=0,U=H.length;M<U;M+=1){var W=a.get("getValue")(H[M]);a.get("list").match.caseSensitive||(W=W.toLowerCase());if(W===S){z=M;h(z);break}}})})();(function(){k.off("keyup").keyup(function(S){function M(W){if(!(W.length<a.get("minCharNumber"))){if("list-required"!==a.get("data")){var Q=a.get("data"),
q=l.init(Q);q=l.updateCategories(q,Q);q=l.processData(q,W);G.trigger("loadElements.eac",[q,W]);0<k.parent().find("li").length?c():e()}Q=function(){var n={},x=a.get("ajaxSettings")||{},J;for(J in x)n[J]=x[J];return n}();if(void 0===Q.url||""===Q.url)Q.url=a.get("url");if(void 0===Q.dataType||""===Q.dataType)Q.dataType=a.get("dataType");void 0!==Q.url&&"list-required"!==Q.url&&(Q.url=Q.url(W),Q.data=a.get("preparePostData")(Q.data,W),O.ajax(Q).done(function(n){var x=l.init(n);x=l.updateCategories(x,
n);x=l.convertXml(x);if(!1!==a.get("matchResponseProperty")?"string"===typeof a.get("matchResponseProperty")?n[a.get("matchResponseProperty")]===W:"function"===typeof a.get("matchResponseProperty")?a.get("matchResponseProperty")(n)===W:1:1)x=l.processData(x,W),G.trigger("loadElements.eac",[x,W]);l.checkIfDataExists(x)&&0<k.parent().find("li").length?c():e();a.get("ajaxCallback")()}).fail(function(){m.warning("Fail to load response data")}).always(function(){}))}}switch(S.keyCode){case 27:e();k.trigger("blur");
break;case 38:S.preventDefault();0<H.length&&0<z&&(--z,k.val(a.get("getValue")(H[z])),h(z));break;case 40:S.preventDefault();0<H.length&&z<H.length-1&&(z+=1,k.val(a.get("getValue")(H[z])),h(z));break;default:if(40<S.keyCode||8===S.keyCode){var U=k.val();!0!==a.get("list").hideOnEmptyPhrase||8!==S.keyCode||""!==U?0<a.get("requestDelay")?(void 0!==L&&clearTimeout(L),L=setTimeout(function(){M(U)},a.get("requestDelay"))):M(U):e()}}})})();(function(){k.on("keydown",function(S){S=S||window.event;if(38===
S.keyCode)return!1}).keydown(function(S){13===S.keyCode&&-1<z&&(k.val(a.get("getValue")(H[z])),a.get("list").onKeyEnterEvent(),a.get("list").onChooseEvent(),z=-1,e(),S.preventDefault())})})();k.off("keypress");(function(){k.focus(function(){""!==k.val()&&0<H.length&&(z=-1,c())})})();(function(){k.blur(function(){setTimeout(function(){z=-1;e()},250)})})()}function c(){G.trigger("show.eac")}function e(){G.trigger("hide.eac")}function h(S){G.trigger("selectElement.eac",S)}var d=new C.Constans,a=new C.Configuration(y),
m=new C.Logger,t=new C.Template(y.template),l=new C.ListBuilderService(a,C.proccess),u=a.equals,k=g,G="",H=[],z=-1,L;C.consts=d;this.getConstants=function(){return d};this.getConfiguration=function(){return a};this.getContainer=function(){return G};this.getSelectedItemIndex=function(){return z};this.getItems=function(){return H};this.getItemData=function(S){return H.length<S||void 0===H[S]?-1:H[S]};this.getSelectedItemData=function(){return this.getItemData(z)};this.build=function(){B()};this.init=
function(){0===k.length?m.error("Input field doesn't exist."):a.checkDataUrlProperties()?a.checkRequiredProperties()?(B(),b()):m.error("Will not work without mentioned properties."):m.error("One of options variables 'data' or 'url' must be defined.")}};C.eacHandles=[];C.getHandle=function(g){return C.eacHandles[g]};C.inputHasId=function(g){return void 0!==O(g).attr("id")&&0<O(g).attr("id").length?!0:!1};C.assignRandomId=function(g){var y="";do y="eac-"+Math.floor(1E4*Math.random());while(0!==O("#"+
y).length);O(g).attr("id",y)};C.setHandle=function(g,y){C.eacHandles[y]=g};return C}(f||{});(function(C){C.fn.easyAutocomplete=function(g){return this.each(function(){var y=C(this),B=new f.main(y,g);f.inputHasId(y)||f.assignRandomId(y);B.init();f.setHandle(B,y.attr("id"))})};C.fn.getSelectedItemIndex=function(){var g=C(this).attr("id");return void 0!==g?f.getHandle(g).getSelectedItemIndex():-1};C.fn.getItems=function(){var g=C(this).attr("id");return void 0!==g?f.getHandle(g).getItems():-1};C.fn.getItemData=
function(g){var y=C(this).attr("id");return void 0!==y&&-1<g?f.getHandle(y).getItemData(g):-1};C.fn.getSelectedItemData=function(){var g=C(this).attr("id");return void 0!==g?f.getHandle(g).getSelectedItemData():-1}})(jQuery)})},"jimu/loaderplugins/jquery-loader":function(){define(["dojo/Deferred","dojo/when"],function(O,f){var C,g={},y=function(c){var e=new O;if(g.locked)return setTimeout(function(){y(c)},50),e;if(g[c])return g.locked=!0,e.resolve(g[c]),e;g.locked=!0;C([c],function(){g[c]=window.jQuery;
e.resolve(g[c])});return e},B=function(c,e,h){C([c[e]],function(){e===c.length-1?h.resolve():(e++,B(c,e,h))})},I=function(c,e){c=new O;e[0]?B(e,0,c):c.resolve();return c},b=function(c,e){var h=new O;y(c).then(function(d){I(c,e).then(function(){g.locked=!1;h.resolve(d)})});return h};return{load:function(c,e,h){c=c.split(",");var d=[];C=e;0===c.length?h(null):(e=c[0],d=c.slice(1),f(b(e,d),h))}}})},"widgets/DistanceAndDirection/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css",
"dojo/i18n!./nls/strings"],function(){})},"url:widgets/DistanceAndDirection/models/ConfirmNotation.html":'\x3cdiv class\x3d\'coordinateContainer\'\x3e\r\n    \x3cspan class\x3d\'jimu-widget-subtitle\' data-dojo-attach-point\x3d\'label1\'\x3e\x3c/span\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cdiv class\x3d"controlItem" style\x3d"padding-top: 10px;"\x3e\r\n            \x3cselect style\x3d"width: 225px" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"comboOptions"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/templates/EditOutputCoordinate.html":'\x3cdiv\x3e\r\n  \x3cspan class\x3d\'jimu-widget-subtitle\'\x3e${nls.setCoordFormatStringMessage}\x3c/span\x3e\r\n  \x3cdiv class\x3d"controlContainer"\x3e\r\n    \x3cselect class\x3d"selectFormat esriCTDropdownObj" name\x3d"test" data-dojo-type\x3d\'jimu/dijit/formSelect\'\r\n      data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.setCoordFormatStringMessage}"\x3e\r\n      \x3coption value\x3d"DD"\x3e${nls.ddLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"DDM"\x3e${nls.ddmLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"DMS"\x3e${nls.dmsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"GARS"\x3e${nls.garsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"GEOREF"\x3e${nls.georefLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"MGRS"\x3e${nls.mgrsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"USNG"\x3e${nls.usngLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"UTM"\x3e${nls.utmLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"UTM (H)"\x3e${nls.utmhLabel}\x3c/option\x3e\r\n    \x3c/select\x3e\r\n    \x3cinput type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput esriCTInputObj"\r\n      aria-label\x3d"${nls.setCoordFormatStringMessage}"\x3e\x3c/input\x3e\r\n    \x3cdiv class\x3d\'settingsContainer\' data-dojo-attach-point\x3d"prefixContainer"\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"addSignChkBox" type\x3d"checkbox" aria-label\x3d"${nls.prefixMessage}"\r\n        class\x3d"esriCTCheckboxObj"\x3e\r\n      \x3clabel class\x3d"formatText"\x3e${nls.prefixMessage}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"btnContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"applyButton" class\x3d\'jimu-btn esriCTButtonObj\' tabindex\x3d"0"\r\n      aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e\r\n      ${nls.common.ok}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"cancelButton" class\x3d\'jimu-btn esriCTButtonObj\' tabindex\x3d"0"\r\n      aria-label\x3d"${nls.common.cancel}" role\x3d"button"\x3e${nls.common.cancel}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabLine.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"lineContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.fromLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"lineTypeDD" style\x3d"width:100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          aria-label\x3d"${nls.fromLabel}" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"DistAndBearing"\x3e${nls.distanceBearingLabel}\x3c/option\x3e\r\n          \x3coption selected\x3d"selected" value\x3d"Points"\x3e${nls.pointsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"startDiv"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"lineStartPointLabel"\x3e${nls.startPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoordsLine"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft" data-dojo-attach-point\x3d"addPointBtnStartDiv"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButtonStart" tabindex\x3d"0" aria-label\x3d"${nls.formatInputLabel}"\r\n              role\x3d"button"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtnStart"\r\n              tabindex\x3d"0" aria-label\x3d"${nls.addPointLabel}" role\x3d"button"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3cinput aria-label\x3d"${nls.createLineInteractively}" class\x3d"interactive-checkbox esriCTCheckboxObj" type\x3d"checkbox"\r\n        data-dojo-attach-point\x3d"interactiveLine" /\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createLineInteractively}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup endPt"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"lineEndPointLabel"\x3e${nls.endPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"endPointCoordsLine"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft" data-dojo-attach-point\x3d"addPointBtnEndDiv"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButtonEnd" tabindex\x3d"0" aria-label\x3d"${nls.formatInputLabel}"\r\n              role\x3d"button"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtnEnd" tabindex\x3d"0"\r\n              aria-label\x3d"${nls.addPointLabel}" role\x3d"button"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.lengthLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"lengthInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.lengthLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d\'dijit/form/NumberTextBox\' required\x3d"true" value\x3d"1000"\r\n          data-dojo-props\x3d"constraints: {min: 1, max: 40030000}" data-dojo-attach-point\x3d"lengthInput"\r\n          data-dojo-attach-event\x3d"keyup: checkValidInputs"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect style\x3d"width: 100px" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"lengthUnitDD" aria-label\x3d"${nls.lengthLabel}"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.angleLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"angleInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.angleLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n          style\x3d"width: calc(100% - 108px);" required\x3d"true" value\x3d"0" data-dojo-props\x3d"constraints: {min: 0, max: 360}"\r\n          data-dojo-attach-point\x3d"angleInput" data-dojo-attach-event\x3d"onChange: checkValidInputs"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect style\x3d"width: 100px" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"angleUnitDD" tabindex\x3d"0" aria-label\x3d"${nls.angleLabel}"\x3e\r\n          \x3coption value\x3d"degrees"\x3e${nls.degreesLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"mils"\x3e${nls.milsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d\'symbologyControlDiv\'\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'symbolControl\' title\x3d"${nls.symbolAndLabelSettingsLabel}"\r\n        data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false"\x3e\r\n        \x3cdiv class\x3d"controlGroup" style\x3d"margin-top: 0px;"\x3e\r\n    \r\n          \x3cdiv class\x3d"controlItem esriCTPaddingBottom10"\x3e\r\n            \x3cdiv class\x3d"esriCTLabel"\x3e${nls.symbologyPreviewLabel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTSymbolNode" tabindex\x3d"0" data-dojo-attach-point\x3d"lineSymbolNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n    \r\n          \x3cdiv class\x3d"controlItem esriCTPaddingBottom10 esriCTLabelSettings"\x3e\r\n            \x3cdiv class\x3d"esriCTLabel"\x3e${nls.ColorAndSizeLabel}\x3c/div\x3e\r\n            \x3cdiv style\x3d"margin-right:10px;" tabindex\x3d"0" aria-label\x3d"${nls.colorPickerLabel}"\r\n              data-dojo-attach-point\x3d"labelColorPickerNode"\x3e\x3c/div\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"labelTextSizeSpinner" aria-label\x3d"${nls.ColorAndSizeLabel}"\r\n              data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n              data-dojo-props\x3d\'value:12,smallDelta:1,constraints:{min:1, max:36, places: 0}\' type\x3d"text"\r\n              style\x3d"width: calc(100% - 185px)" required\x3d"true" /\x3e\r\n          \x3c/div\x3e\r\n    \r\n          \x3cdiv class\x3d"esriCTHintCheck"\x3e${nls.editSymbologyHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" tabindex\x3d"-1" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e\r\n        ${nls.common.ok}\x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\' data-dojo-attach-event\x3d"onclick: clearGraphics"\x3e\r\n        ${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" tabindex\x3d"0" aria-label\x3d"${nls.common.ok}" role\x3d"button" data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.common.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/setting/templates/ColorPickerEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/templates/TabCircle.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"circleContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.circleTitle}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.circleTitle}" style\x3d"width:100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"creationType" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"Radius" selected\x3d"selected"\x3e${nls.radiusLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Diameter"\x3e${nls.diameterLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"coordInputLabel"\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoords"\r\n          placeholder\x3d"${nls.startPointPlaceHolderLabel}" role\x3d"textbox"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.drawCircleLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.drawCircleLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cinput aria-label\x3d"${nls.createCircleInteractivelyLabel}" class\x3d"interactive-checkbox esriCTCheckboxObj"\r\n          type\x3d"checkbox" data-dojo-attach-point\x3d"interactiveCircle"\r\n          aria-label\x3d"${nls.createCircleInteractivelyLabel}" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createCircleInteractivelyLabel}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"radiusDiameterLabel"\x3e${nls.radiusLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"radiusInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.radiusLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d\'dijit/form/NumberTextBox\' required\x3d"true" value\x3d"1000" data-dojo-props\x3d"constraints: {min: 0.001}"\r\n          data-dojo-attach-point\x3d"radiusInput"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect aria-label\x3d"${nls.radiusLabel}" style\x3d"width: 100px" class\x3d"controlSpace noResize"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"lengthUnitDD"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d\'distCalcControlDiv\'\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'distCalcControl\' data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false"\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.timeLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.timeLabel}" style\x3d\'width: calc(100% - 108px);\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}" data-dojo-attach-point\x3d"timeInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.timeLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"timeUnitDD"\x3e\r\n                  \x3coption value\x3d"3600"\x3e${nls.hoursLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"60" selected\x3d"selected"\x3e${nls.minutesLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1"\x3e${nls.secondsLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.rateLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.rateLabel}" style\x3d\'width: calc(100% - 108px)\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}"\r\n                  data-dojo-attach-point\x3d"distanceInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.rateLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"distanceUnitDD"\x3e\r\n                  \x3coption value\x3d"0.3048;1"\x3e${nls.feetSecondsLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"0.3048;3600"\x3e${nls.feetHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;1"\x3e${nls.kmSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;3600"\x3e${nls.kmHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;1" selected\x3d"selected"\x3e${nls.metersSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;3600"\x3e${nls.metersHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;1"\x3e${nls.milesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;3600"\x3e${nls.milesHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;1"\x3e${nls.nauticalMilesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;3600"\x3e${nls.nauticalMilesHourLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d\'symbologyControlDiv\'\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'symbolControl\' title\x3d"${nls.symbolAndLabelSettingsLabel}"\r\n        data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false"\x3e\r\n        \x3cdiv class\x3d"controlGroup" style\x3d"margin-top: 0px;"\x3e\r\n    \r\n          \x3cdiv class\x3d"controlItem esriCTPaddingBottom10"\x3e\r\n            \x3cdiv class\x3d"esriCTLabel"\x3e${nls.symbologyPreviewLabel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTSymbolNode" tabindex\x3d"0" aria-label\x3d"${nls.symbologyPreviewLabel}" data-dojo-attach-point\x3d"circleSymbolNode"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n    \r\n          \x3cdiv class\x3d"controlItem esriCTPaddingBottom10 esriCTLabelSettings"\x3e\r\n            \x3cdiv class\x3d"esriCTLabel"\x3e${nls.ColorAndSizeLabel}\x3c/div\x3e\r\n            \x3cdiv style\x3d"margin-right:10px;" tabindex\x3d"0" aria-label\x3d"${nls.ColorAndSizeLabel}${nls.colorPickerLabel}"\r\n              data-dojo-attach-point\x3d"labelColorPickerNode"\x3e\x3c/div\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"labelTextSizeSpinner" aria-label\x3d"${nls.ColorAndSizeLabel}"\r\n              data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n              data-dojo-props\x3d\'value:12,smallDelta:1,constraints:{min:1, max:36, places: 0}\' type\x3d"text"\r\n              style\x3d"width: calc(100% - 185px)" required\x3d"true"/\x3e\r\n          \x3c/div\x3e\r\n    \r\n          \x3cdiv class\x3d"esriCTHintCheck"\x3e${nls.editSymbologyHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabEllipse.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"ellipseContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.ellipseTypeLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.ellipseTypeLabel}" style\x3d"width: 100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"ellipseType" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"semi"\x3e${nls.ellipseSemiLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"full"\x3e${nls.ellipseFullLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"coordInputLabel"\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoords"\r\n          placeholder\x3d"${nls.startPointPlaceHolderLabel}"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.drawEllipseLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.drawEllipseLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cinput aria-label\x3d"${nls.createEllipseInteractively}" class\x3d"interactive-checkbox esriCTCheckboxObj"\r\n          type\x3d"checkbox" data-dojo-attach-point\x3d"interactiveEllipse" aria-label\x3d"${nls.createEllipseInteractively}" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createEllipseInteractively}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cfieldset\x3e\r\n      \x3clegend\x3e${nls.axisLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"majorAxisInputDiv"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"majorAxisLabel"\x3e${nls.majorRadiusLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cinput aria-label\x3d"${nls.majorRadiusLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d\'true\' ,\r\n            value\x3d\'100\' , data-dojo-props\x3d"constraints:{min:0.1}" data-dojo-attach-point\x3d"majorAxisInput"\r\n            style\x3d"width: 100%;" /\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"minorAxisInputDiv"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"minorAxisLabel"\x3e${nls.minorRadiusLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cinput aria-label\x3d"${nls.minorRadiusLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d\'true\' ,\r\n            value\x3d\'50\' , data-dojo-props\x3d"constraints:{min:0.1}" data-dojo-attach-point\x3d"minorAxisInput"\r\n            style\x3d"width: 100%;" /\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3clabel\x3e${nls.unitLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cselect aria-label\x3d"${nls.unitLabel}" style\x3d"width: 100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n            data-dojo-attach-point\x3d"lengthUnitDD"\x3e\r\n            \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n            \x3coption value\x3d"kilometers" selected\x3d"selected"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n            \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n            \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n            \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n            \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.orientationLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"angleInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.orientationLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n          style\x3d"width: calc(100% - 108px);" required\x3d\'true\' , value\x3d\'0\' ,\r\n          data-dojo-props\x3d"constraints:{min:0, max:360}" data-dojo-attach-point\x3d"angleInput" /\x3e\r\n        \x3cselect aria-label\x3d"${nls.orientationLabel}" style\x3d"width: 100px" class\x3d"controlSpace noResize"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"angleUnitDD"\x3e\r\n          \x3coption value\x3d"degrees"\x3e${nls.degreesLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"mils"\x3e${nls.milsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d\'symbologyControlDiv\'\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'symbolControl\' title\x3d"${nls.symbolAndLabelSettingsLabel}"\r\n        data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false"\x3e\r\n        \x3cdiv class\x3d"controlGroup" style\x3d"margin-top: 0px;"\x3e\r\n    \r\n          \x3cdiv class\x3d"controlItem esriCTPaddingBottom10"\x3e\r\n            \x3cdiv class\x3d"esriCTLabel"\x3e${nls.symbologyPreviewLabel}\x3c/div\x3e\r\n            \x3cdiv tabindex\x3d"0" data-dojo-attach-point\x3d"ellipseSymbolNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n    \r\n          \x3cdiv class\x3d"controlItem esriCTPaddingBottom10 esriCTLabelSettings"\x3e\r\n            \x3cdiv class\x3d"esriCTLabel"\x3e${nls.ColorAndSizeLabel}\x3c/div\x3e\r\n            \x3cdiv style\x3d"margin-right:10px;" tabindex\x3d"0" aria-label\x3d"${nls.colorPickerLabel}"\r\n              data-dojo-attach-point\x3d"labelColorPickerNode"\x3e\x3c/div\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"labelTextSizeSpinner" aria-label\x3d"${nls.ColorAndSizeLabel}"\r\n              data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n              data-dojo-props\x3d\'value:12,smallDelta:1,constraints:{min:1, max:36, places: 0}\' type\x3d"text"\r\n              style\x3d"width: calc(100% - 185px)" required\x3d"true" /\x3e\r\n          \x3c/div\x3e\r\n    \r\n          \x3cdiv class\x3d"esriCTHintCheck"\x3e${nls.editSymbologyHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel class\x3d"warning"\x3e${nls.warningMessage}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabRange.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"rangeContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.lineTypeLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.lineTypeLabel}" data-dojo-attach-point\x3d"rangeType" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption selected\x3d"selected" value\x3d"Interactive"\x3e${nls.interactiveLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Fixed"\x3e${nls.fixedLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Origin"\x3e${nls.originLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Cumulative"\x3e${nls.cumulativeLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d\'rangeCenterLabel\'\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" placeholder\x3d"${nls.startPointPlaceHolderLabel}"\r\n          data-dojo-attach-point\x3d"rangeCenter"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.addPointLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"numRingsContainer"\x3e\r\n      \x3clabel\x3e${nls.numberOfRingsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"numRingsDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.numberOfRingsLabel}" data-dojo-attach-point\x3d"numRingsInput" type\x3d"text"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" name\x3d"numRings" required\x3d"true" , value\x3d"5"\r\n          data-dojo-props\x3d"constraints:{min:1, max: 100, places: 0}" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"distancebetweenRingsContainer"\x3e\r\n      \x3clabel\x3e${nls.distanceBetweenRingsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"ringIntervalDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.distanceBetweenRingsLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"true" value\x3d"1000" data-dojo-props\x3d"constraints:{places: 2}"\r\n          data-dojo-attach-point\x3d"ringIntervalInput" /\x3e\r\n        \x3cselect aria-label\x3d"${nls.distanceBetweenRingsLabel}" data-dojo-attach-point\x3d"ringIntervalUnitsDD"\r\n          style\x3d"width: 100px;" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"distanceUnitsContainer"\x3e\r\n      \x3clabel\x3e${nls.distanceUnitsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.distanceUnitsLabel}" data-dojo-attach-point\x3d"distanceUnitsDD" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"distanceTableContainer"\x3e\r\n      \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"btnAddDistance" tabindex\x3d"0" role\x3d"button"\r\n        aria-label\x3d"${nls.distancesLabel}"\x3e\r\n        \x3cspan class\x3d"jimu-icon jimu-icon-add" data-dojo-attach-point\x3d"btnAirframeIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"add-label"\x3e${nls.distancesLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"distanceTable" style\x3d"width: 100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"numRadialsContainer"\x3e\r\n      \x3clabel\x3e${nls.numberOfRadialsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"numRadialsInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.numberOfRadialsLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"false"\r\n          value\x3d"3" data-dojo-props\x3d"constraints:{min: 0, max: 360, places: 0}" style\x3d"width: 100%;"\r\n          data-dojo-attach-point\x3d"numRadialsInput" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d\'symbologyControlDiv\'\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'symbolControl\' title\x3d"${nls.symbolAndLabelSettingsLabel}"\r\n        data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false"\x3e\r\n        \x3cdiv class\x3d"controlGroup" style\x3d"margin-top: 0px;"\x3e\r\n    \r\n          \x3cdiv class\x3d"controlItem esriCTPaddingBottom10"\x3e\r\n            \x3cdiv class\x3d"esriCTLabel"\x3e${nls.symbologyPreviewLabel}\x3c/div\x3e\r\n            \x3cdiv tabindex\x3d"0" class\x3d"esriCTSymbolNode" data-dojo-attach-point\x3d"ringSymbolNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n    \r\n          \x3cdiv class\x3d"controlItem esriCTPaddingBottom10 esriCTLabelSettings"\x3e\r\n            \x3cdiv class\x3d"esriCTLabel"\x3e${nls.ColorAndSizeLabel}\x3c/div\x3e\r\n            \x3cdiv style\x3d"margin-right:10px;" tabindex\x3d"0" aria-label\x3d"${nls.colorPickerLabel}"\r\n              data-dojo-attach-point\x3d"labelColorPickerNode"\x3e\x3c/div\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"labelTextSizeSpinner" aria-label\x3d"${nls.ColorAndSizeLabel}"\r\n              data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n              data-dojo-props\x3d\'value:12,smallDelta:1,constraints:{min:1, max:36, places: 0}\' type\x3d"text"\r\n              style\x3d"width: calc(100% - 185px)" required\x3d"true" /\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHintCheck"\x3e${nls.editSymbologyHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"buttonContainer" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"mainPageNode"\x3e\r\n\r\n    \x3cdiv id\x3d"DDTabContainer" class\x3d"tabsContainer" data-dojo-attach-point\x3d"DDTabContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"lineTabNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"circleTabNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"ellipseTabNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rangeTabNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--------\r\n    Publish\r\n  ----------\x3e\r\n  \x3cdiv class\x3d"DDHidden DDFullHeight" data-dojo-attach-point\x3d"publishPageNode"\x3e\r\n    \x3cdiv class\x3d"DDFullWidth DDSettingHeader"\x3e\r\n      \x3cdiv class\x3d"DDBackButton DDPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"publishPanelBackButton"\r\n        tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n        \x3cdiv class\x3d"DDItemLeftArrow"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"DDTitleDiv DDEllipsis" title\x3d"${nls.publishTitle}"\x3e\r\n        ${nls.publishTitle}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"DDPanelRow"\x3e\r\n        \x3c!-- DD Layer Name --\x3e\r\n        \x3cdiv class\x3d"DDFullWidth DDSettingRow"\x3e\r\n          \x3cdiv class\x3d"DDInputLabel DDEllipsis" title\x3d"${nls.ddLayerName}"\x3e${nls.ddLayerName}\x3c/div\x3e\r\n          \x3cinput class\x3d"jimu-input textInput DDHidden" style\x3d"width: 100%;"\r\n            data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addDDNameArea"\r\n            data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_ -]*\'" required\x3d"true" aria-label\x3d"${nls.ddLayerName}"\r\n            trim\x3d"true"\x3e\x3c/input\x3e\r\n          \x3cselect class\x3d"SelectStyle" aria-label\x3d"${nls.ddLayerName}" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n            tabindex\x3d"0" data-dojo-attach-point\x3d"featureLayerList"\x3e\x3c/select\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Publish to new layer --\x3e\r\n        \x3cdiv class\x3d"DDFullWidth DDSettingRow"\x3e\r\n          \x3cdiv class\x3d"DDCheckBoxNode" data-dojo-attach-point\x3d"checkBoxParentContainer"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Publish DD Button --\x3e\r\n        \x3cdiv class\x3d"ddBtnContainer"\x3e\r\n          \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'ddPublishButton\' tabindex\x3d"0" role\x3d"button"\r\n            aria-label\x3d"${nls.publishDDBtn}"\x3e${nls.publishDDBtn}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Publishing Message --\x3e\r\n        \x3cdiv class\x3d"ddPublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/css/style.css":'.jimu-widget-DistanceAndDirection .jimu-state-active {background-color: #c0c0c0 !important;}.jimu-widget-DistanceAndDirection .tabsContainer {border: 1px solid #838383;}.jimu-widget-DistanceAndDirection .selectInput {width: 119px;}.jimu-widget-DistanceAndDirection .coordInput {width: 225px; height: 32px;}.jimu-widget-DistanceAndDirection .dijitTitlePaneContentOuter {background-color: transparent;}.jimu-widget-DistanceAndDirection .dijitTextBox .dijitInputInner {text-align: left; height: 20px; line-height: 0px !important;}.jimu-widget-DistanceAndDirection .dijitTextBox {width: 100%;}.jimu-widget-DistanceAndDirection .tabPanel fieldset {border: 1px solid #ccc; padding: 6px; margin-top: 10px;}.jimu-widget-DistanceAndDirection .tabPanel fieldset\x3ediv {margin: 3px;}.jimu-widget-DistanceAndDirection .tabPanel fieldset\x3ediv\x3elabel {width: 50px; display: inline-block;}.jimu-widget-DistanceAndDirection .controls {display: inline-block; width: 100%; padding: 0 5px;}.jimu-widget-DistanceAndDirection .ddBtnContainer {width: 100%; text-align: center; padding: 10px 0px 10px 0px;}.jimu-widget-DistanceAndDirection .controlItem {display: flex;}.jimu-widget-DistanceAndDirection .controlGroup {margin-top: 13px; margin-bottom: 13px;}.jimu-widget-DistanceAndDirection .DDHidden {display: none;}.jimu-widget-DistanceAndDirection .controlGroup .warning {color: #f00; font-weight: bold; width: 100%; display: inline-block;}.jimu-widget-DistanceAndDirection .controlGroup .controlGroupChild {margin-top: 6px;}.jimu-widget-DistanceAndDirection .controlGroup .splitRight {position: absolute; right: 25px;}.jimu-widget-DistanceAndDirection .controlGroup\x3elabel {width: 100px;}.jimu-widget-DistanceAndDirection .controlSpace {margin-left: 6px;}.jimu-rtl .jimu-widget-DistanceAndDirection .controlSpace {margin-right: 6px; margin-left: 0px;}.jimu-widget-DistanceAndDirection .noResize .dijitSelectLabel,.jimu-widget-DistanceAndDirection .noResize .dijitTextBox .dijitInputInner,.jimu-widget-DistanceAndDirection .noResize.dijitValidationTextBox .dijitValidationContainer {text-overflow: ellipsis; overflow: hidden; width: 58px; text-align: left; margin-top: 5px;}.jimu-widget-DistanceAndDirection .dijitSelectLabel {overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 215px; text-align: left; margin-top: 5px;}.jimu-rtl .jimu-widget-DistanceAndDirection .dijitSelectLabel {text-align: right;}.jimu-widget-DistanceAndDirection .label {font-size: 12px !important; margin: auto 5px; cursor: default;}.jimu-widget-DistanceAndDirection .DDCheckBoxNode .jimu-checkbox .label {width: calc(100% - 45px);}.jimu-widget-DistanceAndDirection .DDCheckBoxNode .jimu-checkbox {width: 100%;}.jimu-widget-DistanceAndDirection .numberTextBox {width: 98%; height: 25px; margin-bottom: 2px; border: none;}.jimu-widget-DistanceAndDirection .add-with-icon {display: inline-block; height: 32px; color: #838383; padding-right: 5px;}.jimu-widget-DistanceAndDirection .drawPointBtn {background: url(./images/draw_black.png); background-repeat: no-repeat; background-color: transparent; width: 12px; height: 16px; margin-top: 2px; margin-left: 2px;}.jimu-widget-DistanceAndDirection .drawPointBtn:hover {background: url(./images/draw_black_hover.png); background-repeat: no-repeat; background-color: transparent;}.jimu-widget-DistanceAndDirection .drawPointBtn-active {background: url(./images/draw_black_hover.png); background-repeat: no-repeat; background-color: transparent;}.jimu-widget-DistanceAndDirection .settingBtn {background: url(./images/settings_black.png); background-repeat: no-repeat; background-color: transparent; width: 15px; height: 15px; margin-left: 2px; margin-top: 2px;}.jimu-widget-DistanceAndDirection .InputLabel {float: left; line-height: 28px; padding: 5px 0px 0px 0px; width: 100%;}.jimu-widget-DistanceAndDirection .DDCheckBoxNode {padding-top: 10px; width: 100%;}@media screen and (min-color-index: 0) and (-webkit-min-device-pixel-ratio: 0) {@media {.jimu-widget-DistanceAndDirection .settingBtn .safariOnly {margin-bottom: 15px;}}}@media not all and (min-resolution: 0.001dpcm) {@supports (-webkit-appearance: none) and (stroke-color: transparent) {.jimu-widget-DistanceAndDirection .settingBtn .safariOnly {margin-bottom: 15px;}}}.jimu-widget-DistanceAndDirection .settingBtn:hover {background: url("./images/settings_black_hover.png");}.jimu-widget-DistanceAndDirection .add-with-icon .draw .hidden {display: none;}.jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td {border-bottom: 0px; width: 24%;}.jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td.jimu-state-active {border: 1px solid #24b5cc; background-color: transparent !important;}.jimu-widget-DistanceAndDirection .controlItem .paddedLeft {padding: 5px 0px 0px 7px;}.jimu-widget-DistanceAndDirection .disabledLabel {color: #c0c0c0 !important;}.jimu-widget-DistanceAndDirection .jimu-simple-table .head-section {background-color: rgba(255, 255, 255, 0.1); border: 1px solid #eef2f5;}.jimu-widget-DistanceAndDirection .jimu-simple-table .simple-table-title {color: #000;}.DartTheme .jimu-widget-DistanceAndDirection .dijitSelectDisabled,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled .dijitInputContainer,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled {background-color: #4c4c4c;}.DartTheme .jimu-widget-DistanceAndDirection .jimu-state-active {background-color: #3c2d2d !important;}.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitleOpen,.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitleFixedOpen {background-color: #272727;}.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitle {background-color: #272727; background-image: linear-gradient(rgb(103, 103, 103) 0%, rgba(255, 255, 255, 0) 100%);}.DartTheme .jimu-widget-DistanceAndDirection .controlGroup .warning {font-weight: normal;}.DartTheme .jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td.jimu-state-active {font-weight: normal;}.DartTheme .jimu-widget-DistanceAndDirection .disabledLabel {color: #c0c0c0 !important;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipContainer {background-color: #4c4c4c; background-image: -webkit-linear-gradient(bottom, rgb(76, 76, 76) 0px, #4c4c4c 10px); border: 1px solid #ffffff; color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .jimu-widget-subtitle {color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipConnector {background-image: url("./images/tooltip.png");}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitDialogPaneContent {background-color: #222; border: 0px solid #9a9a9a; color: #fff;}.btnContainer {text-align: right; margin-top: 6px;}.jimu-rtl .btnContainer {text-align: left;}.settingsContainer {margin-top: 6px;}.controlContainer {margin-top: 6px;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn {background: url("./images/draw_white.png"); background-repeat: no-repeat; background-color: transparent; width: 12px; height: 16px;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn:hover {background: url("./images/draw_white_hover.png"); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn-active {background: url("./images/draw_white_hover.png"); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .settingBtn {background: url(./images/settings_white.png); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .settingBtn:hover {background: url("./images/settings_white_hover.png");}.DartTheme .jimu-widget-DistanceAndDirection .disabledLabel {color: #7b7b7b !important;}.DartTheme .jimu-simple-table .simple-table-row .editable-div,.jimu-simple-table .simple-table-row .normal-text-div {color: #ffffff !important;}.DartTheme .jimu-simple-table .simple-table-row .editable-input {color: #000000 !important; background-color: rgba(255, 255, 255, 0.1);}.jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 1px solid #ccc !important; border-right: 0px solid #fff !important; border-left: 0px solid #fff !important; border-top: 0px solid #fff !important; background-color: transparent !important; font-size: 12px;}.formatInput {width: 200px; height: 40px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}.selectFormat {width: 160px; height: 40px !important; opacity: 0.99; background: #ffffff !important; border: 1px solid #999999 !important; color: #000000; padding: 0 4px 0 4px; margin: 0px 2px 3px 2px;}.selectFormat .dijitSelectLabel {text-overflow: ellipsis; overflow: hidden; width: 100px; text-align: left; padding-top: 8px;}.formatText {font-size: 12px; letter-spacing: 0.39px; line-height: 19px; color: #000000; padding: 0 3px 0 3px;}.jimu-widget-DistanceAndDirection .drawPointBtn:focus {outline: 2px solid #24b5cc !important;}.esriCTDropdownObj:focus {outline: 2px solid #24b5cc !important;}.esriCTCheckboxObj:focus {outline: 2px solid #24b5cc !important;}.esriCTButtonObj:focus {outline: 2px solid #24b5cc !important;}.esriCTInputObj:focus {outline: 2px solid #24b5cc !important;}.jimu-widget-DistanceAndDirection .settingBtn:focus {outline: 2px solid #24b5cc !important;}.jimu-widget-DistanceAndDirection .DDFullHeight {height: 100%;}.jimu-widget-DistanceAndDirection .DDFullWidth {width: 100%;}.jimu-widget-DistanceAndDirection .DDSettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-DistanceAndDirection .DDBackButton {overflow: hidden; width: 15px; float: left;}.jimu-widget-DistanceAndDirection .DDTitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-widget-DistanceAndDirection .DDItemLeftArrow {background-image: url(\'./images/left-arrow_black.png\'); float: left; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-widget-DistanceAndDirection .DDItemLeftArrow:hover {background-image: url(\'./images/left-arrow_black_hover.png\');}.jimu-widget-DistanceAndDirection .DDEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-DistanceAndDirection .DDPublishMessage {float: left; line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: break-all;}.jimu-widget-DistanceAndDirection .DDPointer {cursor: pointer;}.jimu-widget-DistanceAndDirection .DDPanelRow {margin: 10px 10px 10px 10px; display: block;}.jimu-widget-DistanceAndDirection .DDSettingRow {padding-bottom: 6px; padding-top: 6px;}.jimu-widget-DistanceAndDirection .DDInputLabel {float: left; padding: 5px 5px 5px 0px;}.jimu-widget-DistanceAndDirection .SelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: \'Avenir Medium\'; margin: 0 0 8px 0;}.jimu-widget-DistanceAndDirection .DDToggleLabel {float: left; width: calc(100% - 35px); padding: 5px 5px 0px 0;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-DistanceAndDirection .DDBtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-widget-DistanceAndDirection .jimu-btn {margin-bottom: 6px; width: 100%;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDInputLabel {float: right; padding: 7px 5px 0px 0px;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDSettingRow {padding-right: 2px;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDToggleLabel {float: right; padding: 1px 0 0 0;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDBtnContainer {padding-right: 2px;}.jimu-rtl .jimu-widget-DistanceAndDirection .dijitTextBox .dijitInputInner {text-align: right;}@-moz-document url-prefix() {.formatInput {width: 200px; height: 41.5px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}}@supports (-ms-ime-align:auto) {.formatInput {width: 200px; height: 41.5px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}}_:-ms-fullscreen,:root .formatInput {width: 200px; height: 41.5px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}.jimu-widget-TabCircle .esriCTHintCheck,.jimu-widget-TabLine .esriCTHintCheck,.jimu-widget-TabEllipse .esriCTHintCheck,.jimu-widget-TabRange .esriCTHintCheck {color: #a0acbf; font-style: oblique; line-height: 20px; width: 100%;}.jimu-widget-TabCircle .esriCTLabel,.jimu-widget-TabLine .esriCTLabel,.jimu-widget-TabEllipse .esriCTLabel,.jimu-widget-TabRange .esriCTLabel {padding-top: 5px; margin-right: 10px;}.jimu-widget-TabCircle .esriCTPaddingBottom10,.jimu-widget-TabLine .esriCTPaddingBottom10,.jimu-widget-TabEllipse .esriCTPaddingBottom10,.jimu-widget-TabRange .esriCTPaddingBottom10 {padding-bottom: 10px;}.jimu-widget-DistanceAndDirection-symbolChooserPopup .esriCTSymbolChooserContainer {height: calc(100% - 50px); overflow: auto;}.jimu-widget-DistanceAndDirection .jimu-color-picker {height: 30px; width: 30px;}.jimu-rtl .jimu-widget-DistanceAndDirection .jimu-color-picker {margin-left: 10px;}.jimu-widget-TabLine svg,.jimu-widget-TabRange svg {width: 140px;}.jimu-rtl .jimu-widget-TabLine .esriCTSymbolNode,.jimu-rtl .jimu-widget-TabRange .esriCTSymbolNode {margin-right: 10px;}.jimu-rtl .jimu-widget-TabCircle .esriCTLabel,.jimu-rtl .jimu-widget-TabLine .esriCTLabel,.jimu-rtl .jimu-widget-TabEllipse .esriCTLabel,.jimu-rtl .jimu-widget-TabRange .esriCTLabel {margin-left: 10px; margin-right: 0px;}',
"*now":function(O){O(['dojo/i18n!*preload*widgets/DistanceAndDirection/nls/Widget*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/array dojo/aspect dojo/query dojo/topic dojo/dom-attr dojo/json dijit/_WidgetsInTemplateMixin dijit/registry jimu/BaseWidget jimu/dijit/TabContainer3 jimu/utils ./views/TabLine ./views/TabCircle ./views/TabEllipse ./views/TabRange dojo/_base/lang dojo/on dojo/dom-class dojo/dom-style dojo/keys jimu/dijit/CheckBox dojo/dom-construct jimu/LayerStructure esri/arcgis/Portal ./js/portal-utils jimu/LayerInfos/LayerInfos esri/dijit/util/busyIndicator esri/graphic esri/layers/FeatureLayer dijit/focus esri/renderers/UniqueValueRenderer ./js/jquery.easy-autocomplete".split(" "),function(O,
f,C,g,y,B,I,b,c,e,h,d,a,m,t,l,u,k,G,H,z,L,S,M,U,W,Q,q,n,x,J,K){return O([e,b],{baseClass:"jimu-widget-DistanceAndDirection",_lastOpenPanel:"mainPage",_currentOpenPanel:"mainPage",_lineLayerList:[],_polygonLayerList:[],_renderer:null,_addLayerToMap:!0,_typeOfInput:null,_graphicsAdded:[],_curretfieldTypeObj:{},postMixInProperties:function(){this.nls.common={};u.mixin(this.nls.common,window.jimuNls.common)},_reset:function(){this.config.feedback.lineSymbol.showTab&&this.lineTab.clearGraphics();this.config.feedback.circleSymbol.showTab&&
this.circleTab.clearGraphics();this.config.feedback.ellipseSymbol.showTab&&this.ellipseTab.clearGraphics();this.config.feedback.rangeRingSymbol.showTab&&this.rangeTab.clearGraphics();this.map.enableMapNavigation();this._graphicsAdded=[];this._curretfieldTypeObj={}},postCreate:function(){this.openAtStartAysn=!0;this.config.hasOwnProperty("operationalLineLayer")||(this.config.operationalLineLayer={name:""});this.config.hasOwnProperty("operationalPolygonLayer")||(this.config.operationalPolygonLayer=
{name:""});String.prototype.format||(String.prototype.format=function(){var p=arguments;return this.replace(/{(\d+)}/g,function(E,F){return"undefined"!==typeof p[F]?p[F]:E})});O.safeMixin(this.nls,window.jimuNls);this.config.feedback||(this.config.feedback={});this.config.feedback.lineSymbol.showTab&&(this.lineTab=new a({"attr-name":"line",map:this.map,appConfig:this.appConfig,lineSymbol:this.config.feedback.lineSymbol||{type:"esriSLS",style:"esriSLSSolid",color:[255,50,50,255],width:1.25},pointSymbol:this.config.feedback.pointSymbol||
{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.lineTabNode));this.config.feedback.circleSymbol.showTab&&(this.circleTab=
new m({"attr-name":"circle",map:this.map,appConfig:this.appConfig,circleSymbol:this.config.feedback.circleSymbol||{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,0],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}},pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,
0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.circleTabNode));this.config.feedback.ellipseSymbol.showTab&&(this.ellipseTab=new t({"attr-name":"ellipse",map:this.map,appConfig:this.appConfig,ellipseSymbol:this.config.feedback.ellipseSymbol||{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,125],outline:{color:[255,50,50,255],width:1.25,
type:"esriSLS",style:"esriSLSSolid"}},pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},
this.ellipseTabNode));this.config.feedback.rangeRingSymbol.showTab&&(this.rangeTab=new l({"attr-name":"range",map:this.map,appConfig:this.appConfig,pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},circleSymbol:{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,0],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}},lineSymbol:this.config.feedback.rangeRingSymbol||
{type:"esriSLS",style:"esriSLSSolid",color:[255,50,50,255],width:1.25},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,255,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:6,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.RangeTabContainer));var r=[];this.config.feedback.lineSymbol.showTab&&r.push({title:this.nls.tabLineTitle,content:this.lineTab});this.config.feedback.circleSymbol.showTab&&
r.push({title:this.nls.tabCircleTitle,content:this.circleTab});this.config.feedback.ellipseSymbol.showTab&&r.push({title:this.nls.tabEllipseTitle,content:this.ellipseTab});this.config.feedback.rangeRingSymbol.showTab&&r.push({title:this.nls.tabRingsTitle,content:this.rangeTab});this.tab=new h({tabs:r},this.DDTabContainer);r=c.byId("DDTabContainer");C.after(r,"selectTab",u.hitch(this,function(){y.publish("TAB_SWITCHED");y.publish("DD-WIDGET-CLOSED");this._setAccessibility()}));this._lineLayerList=
this._getAllMapLayers("esriGeometryPolyline");this._polygonLayerList=this._getAllMapLayers("esriGeometryPolygon");this._layerList=this._lineLayerList.concat(this._polygonLayerList);this.setTabTitle(r.domNode);this.config.feedback.lineSymbol.showTab&&this.own(this.lineTab.on("show-publish",u.hitch(this,function(p){this._graphicsAdded=p._graphicsVal;this._typeOfInput="line";this._curretfieldTypeObj={Distance:"esriFieldTypeDouble",Unit:"esriFieldTypeString",Angle:"esriFieldTypeDouble",StartPoint:"esriFieldTypeString",
EndPoint:"esriFieldTypeString",AngleUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,this._lineLayerList,this.config.operationalLineLayer.name);this._showPanel("publishPage")})));this.config.feedback.circleSymbol.showTab&&this.own(this.circleTab.on("show-publish",u.hitch(this,function(p){this._graphicsAdded=p._graphicsVal;this._typeOfInput="circle";this._curretfieldTypeObj={CenterPoint:"esriFieldTypeString",RadiusDistance:"esriFieldTypeDouble",RadiusUnit:"esriFieldTypeString"};
this._populateSelectList(this.featureLayerList,this._polygonLayerList,this.config.operationalPolygonLayer.name);this._showPanel("publishPage")})));this.config.feedback.ellipseSymbol.showTab&&this.own(this.ellipseTab.on("show-publish",u.hitch(this,function(p){this._graphicsAdded=p._graphicsVal;this._typeOfInput="ellipse";this._curretfieldTypeObj={CenterPoint:"esriFieldTypeString",MajorAxis:"esriFieldTypeDouble",MinorAxis:"esriFieldTypeDouble",Unit:"esriFieldTypeString",Orientation:"esriFieldTypeDouble",
OrientationUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,this._polygonLayerList,this.config.operationalPolygonLayer.name);this._showPanel("publishPage")})));this.config.feedback.rangeRingSymbol.showTab&&this.own(this.rangeTab.on("show-publish",u.hitch(this,function(p){this._graphicsAdded=p._graphicsVal;this._typeOfInput="ring";this._curretfieldTypeObj={CenterPoint:"esriFieldTypeString",Rings:"esriFieldTypeDouble",Radials:"esriFieldTypeDouble",RadiusDistance:"esriFieldTypeDouble",
RadiusUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,this._lineLayerList,this.config.operationalLineLayer.name);this._showPanel("publishPage")})));this.publishNewLayer=new L({checked:!1,label:this.nls.publishToNewLayer},S.create("div",{},this.checkBoxParentContainer));this.addDDNameArea.invalidMessage=this.nls.invalidLayerName;this.addDDNameArea.missingMessage=this.nls.missingLayerNameMessage;this.own(k(this.featureLayerList,"change",u.hitch(this,function(){this.resize()})))},
startup:function(){this.busyIndicator=q.create({target:this.domNode.parentNode.parentNode.parentNode,backgroundOpacity:0});this._setTheme();this._handleClickEvents();setTimeout(u.hitch(this,function(){this.getParent().domNode.scrollTop=0;this._setAccessibility()}),100)},setTabTitle:function(r){r=g(".tab-item-div",r);f.forEach(r,function(p){B.set(p,"title",p.innerHTML)})},resize:function(){var r=g(".dijitValidationTextBoxLabel",this.featureLayerList.domNode);0<r.length&&H.set(r[0],"width",this.ddPublishButton.clientWidth-
44+"px")},onClose:function(){y.publish("DD-WIDGET-CLOSED")},_removeStyleFile:function(r,p){var E=null;E="js"===p?"src":"css"===p?"href":"none";p=document.getElementsByTagName("js"===p?"script":"css"===p?"link":"none");for(var F=p.length;0<=F;F--)p[F]&&null!==p[F].getAttribute(E)&&-1!==p[F].getAttribute(E).indexOf(r)&&p[F].parentNode.removeChild(p[F])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?d.loadStyleLink("dartOverrideCSS",this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+
"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===this.appConfig.theme.styles[0]?d.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css");"LaunchpadTheme"===this.appConfig.theme.name?d.loadStyleLink("launchpadOverrideCSS",this.folderUrl+"css/launchpadTheme.css",null):this._removeStyleFile(this.folderUrl+"css/launchpadTheme.css","css")},_setAccessibility:function(){this._setFocus()},
_setFocus:function(){this._setFirstFocusNode();this._setLastFocusNode();this._focusFirstNodeOfWidgetOrTab();"publishPage"===this._currentOpenPanel&&this._publishPageAccessible()},_publishPageAccessible:function(){d.initFirstFocusNode(this.domNode,this.publishPanelBackButton);J.focus(this.publishPanelBackButton);""===this.publishMessage.innerHTML?d.initLastFocusNode(this.domNode,this.ddPublishButton):d.initLastFocusNode(this.domNode,this.publishMessage)},_setFirstFocusNode:function(){var r=this.tab.getSelectedTitle();
switch(r){case this.nls.tabLineTitle:this._setSelectedTabAsFirstFocusNode(r);break;case this.nls.tabCircleTitle:this._setSelectedTabAsFirstFocusNode(r);break;case this.nls.tabEllipseTitle:this._setSelectedTabAsFirstFocusNode(r);break;case this.nls.tabRingsTitle:this._setSelectedTabAsFirstFocusNode(r)}},_setLastFocusNode:function(){switch(this.tab.getSelectedTitle()){case this.nls.tabLineTitle:this.lineTab.setLastFocusNode();break;case this.nls.tabCircleTitle:this.circleTab.setLastFocusNode();break;
case this.nls.tabEllipseTitle:this.ellipseTab.setLastFocusNode();break;case this.nls.tabRingsTitle:this.rangeTab.setLastFocusNode()}},_focusFirstNodeOfWidgetOrTab:function(){switch(this.tab.getSelectedTitle()){case this.nls.tabLineTitle:d.isAutoFocusFirstNodeWidget(this)&&this.lineTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabCircleTitle:d.isAutoFocusFirstNodeWidget(this)&&this.circleTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabEllipseTitle:d.isAutoFocusFirstNodeWidget(this)&&
this.ellipseTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabRingsTitle:d.isAutoFocusFirstNodeWidget(this)&&this.rangeTab.focusFirstNodeOfSelectedTab()}},_setSelectedTabAsFirstFocusNode:function(r){if(this.tab&&this.tab.controlNode){var p=g(".tab-item-td",this.tab.controlNode);f.forEach(p,u.hitch(this,function(E){E&&E.children&&E.children[0]&&E.children[0].innerHTML===r&&d.initFirstFocusNode(this.domNode,E)}))}},_handleClickEvents:function(){this.own(k(this.publishPanelBackButton,"click",
u.hitch(this,this._publishPanelBackButtonClicked)));this.own(k(this.publishPanelBackButton,"keydown",u.hitch(this,function(r){r.keyCode!==z.ENTER&&r.keyCode!==z.SPACE||this._publishPanelBackButtonClicked()})));this.own(k(this.ddPublishButton,"click",u.hitch(this,this._ddPublishButtonClicked)));this.own(k(this.ddPublishButton,"keydown",u.hitch(this,function(r){r.keyCode!==z.ENTER&&r.keyCode!==z.SPACE||this._ddPublishButtonClicked()})));this.own(k(this.publishNewLayer,"click",u.hitch(this,this._onCheckboxClicked)));
this.own(k(this.publishNewLayer,"change",u.hitch(this,this._onCheckboxClicked)));this.own(k(this.publishNewLayer,"keydown",u.hitch(this,function(r){r.keyCode!==z.ENTER&&r.keyCode!==z.SPACE||this._onCheckboxClicked()})))},_onCheckboxClicked:function(){this.publishNewLayer.checked?(G.add(this.featureLayerList.domNode,"DDHidden"),G.remove(this.addDDNameArea.domNode,"DDHidden"),this.addDDNameArea.reset(),this.addDDNameArea.focus()):(G.add(this.addDDNameArea.domNode,"DDHidden"),G.remove(this.featureLayerList.domNode,
"DDHidden"));this._addLayerToMap=this.publishNewLayer.checked},_ddPublishButtonClicked:function(){if(this.publishNewLayer.checked&&!this.addDDNameArea.isValid())this.publishMessage.innerHTML=this.nls.missingLayerNameMessage;else{this.publishMessage.innerHTML="";var r={layerName:this.publishNewLayer.checked?this.addDDNameArea.value:this.featureLayerList.getValue(),url:"",itemId:"",serviceItemId:""};if(!this.publishNewLayer.checked){var p=this._layerList.filter(function(E){return E.name===r.layerName},
this);1===p.length&&(r.url=p[0].url,r.itemId=p[0].id,r.serviceItemId=I.parse(p[0]._json).serviceItemId)}this._initSaveToPortal(r)}},_isValidDDLayerName:function(r){var p=!1,E=this._findRestrictedChars(r,this.restrictedCharlist+" ");E&&0<E.length?p=!1:this._isLayerNameValid(r)?r&&0<r.length&&(p=!0):p=!1;return p},_findRestrictedChars:function(r,p){var E="",F;if(r&&p)for(F=0;F<p.length;F++){var V=p.charAt(F);-1!==r.indexOf(V)&&(" "===V&&(V="spaces"),E=0===E.length?V:E+(" "+V))}return E},_isLayerNameValid:function(r){var p=
/^\./,E=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i;return/^[^\\/:\*\?"<>\|()]+$/.test(r)&&!p.test(r)&&!E.test(r)},getAttributesToSave:function(r){var p={},E=Object.keys(this._curretfieldTypeObj);f.forEach(E,u.hitch(this,function(F){p[F]=r[F]}));return p},_initSaveToPortal:function(r){var p=r.layerName;(new U.Portal(this.appConfig.portalUrl)).signIn().then(u.hitch(this,function(E){var F=E.credential.token,V=E.orgId,Z=E.username;if("org_user"===E.role)this.publishMessage.innerHTML=d.sanitizeHTML(this.nls.createService.format(this.nls.userRole)),
this._setFocus();else if(r.url){E=new x(r.url+"?token\x3d"+F,{id:r.layerName,outFields:["*"]});E._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:r.itemId}};this.busyIndicator.show();var aa=[];this._graphicsAdded.forEach(function(da){if(void 0!==da.attributes&&!da.attributes.hasOwnProperty("isDirectionalGraphic")){var D=this.getAttributesToSave(da.attributes);aa.push(new n(da.geometry,null,D))}},this);E.applyEdits(aa,null,null).then(u.hitch(this,function(){y.publish("moveMap",
!1);this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+r.serviceItemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._setFocus();this._reset();this.busyIndicator.hide()})).otherwise(u.hitch(this,function(da){this.publishMessage.innerHTML=da.message;this._setFocus();this.busyIndicator.hide();this._reset()}));this._setFocus()}else{var ia=this.appConfig.portalUrl+"sharing/content/users/"+Z+"/createService";
W.isNameAvailable(this.appConfig.portalUrl+"sharing/rest/portals/"+V+"/isServiceNameAvailable",F,p).then(u.hitch(this,function(da){da.available?(this.busyIndicator.show(),W.createFeatureService(ia,F,W.getFeatureServiceParams(p,this.map)).then(u.hitch(this,function(D){if(D.success){var R=D.serviceurl.replace(RegExp("rest","g"),"rest/admin")+"/addToDefinition";W.addDefinitionToService(R,F,W.getLayerParams(p,this.map,this.getRenderer(),this.getGeometryTypeAndFields())).then(u.hitch(this,function(Y){if(Y.success){Y=
new x(D.serviceurl+"/0?token\x3d"+F,{id:p,outFields:["*"]});Y._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:D.itemId}};this.map.addLayer(Y);if(Y.loaded){var A=Q.getInstanceSync().getLayerInfoById(p);A.enablePopup()}else Y.on("load",u.hitch(this,function(){A=Q.getInstanceSync().getLayerInfoById(p);A.enablePopup()}));var P=[];f.forEach(this._graphicsAdded,function(ba){if(void 0!==ba.attributes&&!ba.attributes.hasOwnProperty("isDirectionalGraphic")){var w=this.getAttributesToSave(ba.attributes);
P.push(new n(ba.geometry,null,w))}},this);Y.applyEdits(P,null,null).then(u.hitch(this,function(){this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d0 aria-label\x3d"'+this.nls.successfullyPublished+'" href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+D.itemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._setFocus();this._reset()})).otherwise(u.hitch(this,function(ba){this.publishMessage.innerHTML=ba.message;
this._setFocus();this.busyIndicator.hide();this._reset()}))}}),u.hitch(this,function(Y){this.busyIndicator.hide();this.publishMessage.innerHTML=d.sanitizeHTML(this.nls.addToDefinition.format(Y.message));this._setFocus()}))}else this.busyIndicator.hide(),this.publishMessage.innerHTML=d.sanitizeHTML(this.nls.unableToCreate.format(p)),this._setFocus()}),u.hitch(this,function(D){this.busyIndicator.hide();this.publishMessage.innerHTML=d.sanitizeHTML(this.nls.createService.format(D.message));this._setFocus()}))):
(this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.layerNameExists);this._setFocus()}))}}),u.hitch(this,function(E){this.busyIndicator.hide();this.publishMessage.innerHTML=E.message;this._setFocus()}))},getRenderer:function(){switch(this._typeOfInput){case "line":var r=this._createRendererForLineLayer();break;case "circle":r=this._createRendererForPolygonLayer();break;case "ellipse":r=this._createRendererForPolygonLayer();break;case "ring":r=this._createRendererForLineLayer()}return new K(r)},
_createRendererForPolygonLayer:function(){var r=[],p;f.forEach(this._graphicsAdded,u.hitch(this,function(E){p={value:E.attributes.ObjectID,symbol:E.symbol.toJson()};r.push(p)}));return{type:"uniqueValue",field1:"OBJECTID",uniqueValueInfos:r,defaultSymbol:{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,0],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}}}},_createRendererForLineLayer:function(){var r=[],p;f.forEach(this._graphicsAdded,u.hitch(this,function(E){void 0===
E.attributes||E.attributes.hasOwnProperty("isDirectionalGraphic")||(p={value:E.attributes.ObjectID,symbol:E.symbol.toJson()},r.push(p))}));return{type:"uniqueValue",field1:"OBJECTID",uniqueValueInfos:r,defaultSymbol:{type:"esriSLS",style:"esriSLSSolid",color:[255,50,50,255],width:1.25}}},getGeometryTypeAndFields:function(){var r={};switch(this._typeOfInput){case "line":return r.type="esriGeometryPolyline",r.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",
nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"StartPoint",alias:this.nls.startPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"EndPoint",alias:this.nls.endPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Distance",alias:this.nls.distanceLabel,type:"esriFieldTypeDouble",
nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"Unit",alias:this.nls.unitLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Angle",alias:this.nls.angleLabel,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"AngleUnit",alias:this.nls.angleUnitLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",
sqlType:"sqlTypeNVarchar"}],r;case "circle":return r.type="esriGeometryPolygon",r.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"CenterPoint",alias:this.nls.centerPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"RadiusDistance",alias:this.nls.radiusDistance,type:"esriFieldTypeDouble",
nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"RadiusUnit",alias:this.nls.radiusUnit,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],r;case "ellipse":return r.type="esriGeometryPolygon",r.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"CenterPoint",alias:this.nls.centerPointLabel,
type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"MajorAxis",alias:this.nls.ellipseMajorAxis,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"MinorAxis",alias:this.nls.ellipseMinorAxis,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"Unit",alias:this.nls.unitLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,
defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Orientation",alias:this.nls.orientationLabel,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"OrientationUnit",alias:this.nls.orientationUnit,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],r;case "ring":return r.type="esriGeometryPolyline",r.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",
actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"CenterPoint",alias:this.nls.centerPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Rings",alias:this.nls.rings,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"Radials",alias:this.nls.radials,type:"esriFieldTypeDouble",nullable:!0,editable:!0,
domain:null,defaultValue:null},{name:"RadiusDistance",alias:this.nls.radiusDistance,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"RadiusUnit",alias:"RadiusUnit",type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],r}},_publishPanelBackButtonClicked:function(){this.publishMessage.innerHTML="";this.addDDNameArea.setValue("");this.addDDNameArea.reset();this._showPanel(this._lastOpenPanel)},
_showPanel:function(r){if(this._currentOpenPanel){var p=this._getNodeByName(this._currentOpenPanel);G.add(p,"DDHidden")}p=this._getNodeByName(r);G.remove(p,"DDHidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=r;this._setAccessibility();"publishPage"!==r||this.isOnScreen||this.resize()},_getNodeByName:function(r){switch(r){case "mainPage":var p=this.mainPageNode;break;case "publishPage":p=this.publishPageNode}return p},_getAllMapLayers:function(r){var p=[];M.getInstance().traversal(function(E){"undefined"!==
typeof E._layerInfo.layerObject.type&&-1===E._layerInfo.layerObject.type.indexOf("tile")&&E._layerInfo.layerObject.geometryType===r&&p.push(E._layerInfo.layerObject)});return p},_matchLayerFields:function(r,p){var E={},F=Object.keys(this._curretfieldTypeObj);f.forEach(p,u.hitch(this,function(V){f.forEach(F,u.hitch(this,function(Z){V.name.toLowerCase()!==Z.toLowerCase()||V.type!==this._curretfieldTypeObj[Z]&&"esriFieldTypeString"!==V.type||(Z=r[Z],void 0!==Z&&null!==Z&&"esriFieldTypeString"===V.type&&
50>=V.length&&(Z=Z.toString().substr(0,V.length)),E[V.name]=Z)}))}));return E},_containsSupportedCapabilities:function(r){var p=!0;["create","delete","query","update","editing"].forEach(function(E){-1===r.toLowerCase().split(",").indexOf(E)&&(p=!1)});return p},_populateSelectList:function(r,p,E){r.options=[];f.forEach(p,u.hitch(this,function(F){F.url&&"Feature Layer"===F.type&&this._containsSupportedCapabilities(F.capabilities)&&r.addOption({value:F.name,id:F.id,label:d.sanitizeHTML(F.name),selected:!1})}));
""!==E&&r.set("displayedValue",E);p=this.tab.getSelectedTitle();this.publishNewLayer.setValue(!1);0===r.options.length?(this.publishNewLayer.setValue(!0),G.add(this.checkBoxParentContainer,"DDHidden")):G.remove(this.checkBoxParentContainer,"DDHidden");p!==this.nls.tabLineTitle&&p!==this.nls.tabRingsTitle||""!==this.config.operationalLineLayer.name||this.publishNewLayer.setValue(!0);p!==this.nls.tabCircleTitle&&p!==this.nls.tabEllipseTitle||""!==this.config.operationalPolygonLayer.name||this.publishNewLayer.setValue(!0)}})});
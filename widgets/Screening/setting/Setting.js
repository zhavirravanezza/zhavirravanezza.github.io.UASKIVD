// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Screening/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dojo/domReady!".split(" "),function(x,E,K,I,v,a,c,d,e,l){return x([E,K],{templateString:d,baseClass:"jimu-widget-screening-setting",postCreate:function(){this.own(c(this.okButton,"click",I.hitch(this,this._onOKButtonClicked)));
this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new e(this.symbolParams,a.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new l({titleLabel:this.symbolChooserTitle,width:420,height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!v.contains(this.okButton,"jimu-state-disabled"))this.onOkClick()},onOkClick:function(q){return q}})})},"widgets/Screening/setting/DownloadSettings":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dojo/text!./DownloadSettings.html dojo/dom-class dojo/_base/lang dojo/on dojo/query dojo/dom-attr dojo/_base/html dojo/dom-construct dojo/string dojo/_base/Color jimu/BaseWidgetSetting jimu/dijit/CheckBox jimu/dijit/SimpleTable jimu/dijit/GpSource jimu/dijit/Popup jimu/dijit/Message jimu/dijit/ImageChooser jimu/portalUtils jimu/dijit/ColorPicker esri/request dojo/query dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array jimu/dijit/PageUtils jimu/utils dojo/DeferredList dijit/Editor dojo/sniff dijit/form/RadioButton dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dijit/ToolbarSeparator dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H,n,f,z,D,N,P,L,y,C,Q,S,k){return x([u,E],{templateString:K,baseClass:"jimu-widget-screening-download-settings",map:null,loadingIndicator:null,downloadOptions:null,_layerIndex:0,_layers:[],_extractDataTaskDownloadOptions:[],_extractDataTaskURL:"",_printTaskURL:"",_logo:"",_tableHeaderColor:null,_defaultOptions:{"A3 Portrait":{Orientation:"Portrait",SizeName:"A3"},"A3 Landscape":{Orientation:"Landscape",SizeName:"A3"},"A4 Portrait":{Orientation:"Portrait",
SizeName:"A4"},"A4 Landscape":{Orientation:"Landscape",SizeName:"A4"},"Letter ANSI A Portrait":{Orientation:"Portrait",SizeName:"Letter_ANSI_A"},"Letter ANSI A Landscape":{Orientation:"Landscape",SizeName:"Letter_ANSI_A"},"Tabloid ANSI B Portrait":{Orientation:"Portrait",SizeName:"Tabloid_ANSI_B"},"Tabloid ANSI B Landscape":{Orientation:"Landscape",SizeName:"Tabloid_ANSI_B"}},_pageSize:[],_customLayoutTable:null,_buddyTaskChoiceList:{},_customDropdownOption:[],_defaultPrintTemplateDropdownOption:[],
_printServiceChoiceList:[],_defaultPrintTemplateDropdownOptionObj:null,_clonedConfigurationCustomOptions:null,_buddyTaskEndPoint:["Get Layout Templates Info","Get Layout Templates Info Task"],_lastSelectedCustomDropdownRow:null,_isCustomOptionNoDefault:!1,_footNoteEditorObj:null,constructor:function(g){this.downloadOptions=this.loadingIndicator=this.map=null;this._layerIndex=0;this._layers=[];this._extractDataTaskDownloadOptions=[];this._logo=this._printTaskURL=this._extractDataTaskURL="";this._customLayoutTable=
this._tableHeaderColor=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._defaultPrintTemplateDropdownOption=[];this._printServiceChoiceList=[];this._lastSelectedCustomDropdownRow=this._clonedConfigurationCustomOptions=this._defaultPrintTemplateDropdownOptionObj=null;v.mixin(this,g)},postCreate:function(){this._initEditor();this._pageSize=[{value:null,label:null},{value:"MILLIMETER",label:this.nls.downloadTab.pageSizeUnits.millimeters},{value:"INCH",label:this.nls.units.inches},
{value:"POINT",label:this.nls.downloadTab.pageSizeUnits.points},{value:"CENTIMETER",label:this.nls.units.centimeters}];var g,A,h,r;this._initSyncEnableOptionTable();this._syncEnableOptionTable&&(this._layers=[],this._syncEnableOptionTable.clear());if(this.downloadOptions&&this.downloadOptions.layers){this._layers=this.downloadOptions.layers;var J=[];L.forEach(this.downloadOptions.layers,v.hitch(this,function(O){O=z({url:O.url+"?f\x3dpjson"});J.push(O)}));(new Q(J)).then(v.hitch(this,function(O){L.forEach(O,
v.hitch(this,function(w,G){w[0]?(w={version:w[1].currentVersion,capabilities:w[1].capabilities},this.downloadOptions.layers[G]&&this._setFileOptionDataInTable(this.downloadOptions.layers[G],w)):w[1].name&&"Error"===w[1].name||(w={version:this.layerInfosObj.getLayerInfoById(this.downloadOptions.layers[G].id).layerObject.version,capabilities:""},this._setFileOptionDataInTable(this.downloadOptions.layers[G],w))}))}))}this.downloadOptions&&this.downloadOptions.type?this._chooseDownloadOption(this.downloadOptions.type,
!0):this.syncEnableRadioButton.set("checked",!0);this._attachDownloadOptionEvent();this.reportSettings&&this.reportSettings.printTaskURL&&""!==this.reportSettings.printTaskURL?(this.printGPServiceTextBox.set("value",this.reportSettings.printTaskURL),this._printTaskURL=this.reportSettings.printTaskURL):(r=n.getPortal(this.appConfig.portalUrl).helperServices)&&r.printTask.url&&(this.printGPServiceTextBox.set("value",r.printTask.url),this._printTaskURL=r.printTask.url);this.reportSettings&&this.reportSettings.footnote&&
""!==this.reportSettings.footnote&&this._footNoteEditorObj.set("value",this.reportSettings.footnote);var M={portalUrl:this.appConfig.portalUrl};this.own(a(this.extractDataTaskSetButton,"click",v.hitch(this,function(){g=new b(M);h=this._onSetButtonClick(g);this._attachExtractDataTaskGPSourceEvents(g,h)})));this.own(a(this.printGPServiceSetButton,"click",v.hitch(this,function(){A=new b(M);h=this._onSetButtonClick(A);this._attachPrintReportGPSourceEvents(A,h)})));this._initImageChooser();this._tableHeaderColor=
this._createColorPicker(this.reportSettings.columnTitleColor,this.columnTitleColorPickerNode);this.reportSettings.hasOwnProperty("noDataConfiguredText")&&this.noDataTextRepresentationTextBox.set("value",this.reportSettings.noDataConfiguredText);this.reportSettings.hasOwnProperty("naTextConfiguredValue")&&this.naTextRepresentationTextBox.set("value",this.reportSettings.naTextConfiguredValue);this.reportSettings.hasOwnProperty("displaySummaryInReport")&&this.displaySummaryInReportCheckBox.setValue(this.reportSettings.displaySummaryInReport);
this.reportSettings.hasOwnProperty("hideZeroValueRow")&&this.hideAllZeroRowCheckBox.setValue(this.reportSettings.hideZeroValueRow);this.reportSettings.hasOwnProperty("hideNullValueRow")&&this.hideNullRowCheckBox.setValue(this.reportSettings.hideNullValueRow);this.reportTitleTextBox.set("value",this.reportSettings.reportTitle);this.own(a(this.addCustomOptionButton,"click",v.hitch(this,function(){I.contains(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable")||(this._isCustomOptionNoDefault&&
this._emptyDefaultDropDown(),this._addCustomOptionsInTable())})));this._clonedConfigurationCustomOptions=v.clone(this.reportSettings);this._destroyLayouts();this.loadingIndicator.show();this._fetchChoiceList()},_attachExtractDataTaskGPSourceEvents:function(g,A){this.own(a(g,"ok",v.hitch(this,function(h){h&&0<h.length&&h[0].url&&this._requestExtractDataTaskURLInfo(h[0].url,A)})));this.own(a(g,"cancel",v.hitch(this,function(){A.close()})))},getExtractDataTaskURL:function(){return this._extractDataTaskURL?
this._extractDataTaskURL:""},_attachPrintReportGPSourceEvents:function(g,A){this.own(a(g,"ok",v.hitch(this,function(h){h&&0<h.length&&h[0].url?(this.printGPServiceTextBox.set("value",h[0].url),this._printTaskURL=h[0].url,this._clonedConfigurationCustomOptions=null,this._destroyLayouts(),this.loadingIndicator.show(),this._fetchChoiceList()):(this.printGPServiceTextBox.set("value",""),this._printTaskURL="");A.close()})));this.own(a(g,"cancel",v.hitch(this,function(){A.close()})))},_destroyLayouts:function(){l.empty(this.defaultLayoutTable);
l.empty(this.customLayoutTable);l.empty(this.defaultPrintTemplateDropdown);this._customLayoutTable=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._printServiceChoiceList=[];this._defaultPrintTemplateDropdownOption=[];this._customLayoutTable&&l.destroy(this._customLayoutTable);this._defaultPrintTemplateDropdownOptionObj&&l.destroy(this._defaultPrintTemplateDropdownOptionObj.domNode);this._isCustomOptionNoDefault=!1},_initSyncEnableOptionTable:function(){this._syncEnableOptionTable=
new F({fields:[{name:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,type:"empty",width:"40%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,
"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,type:"empty","class":"esriCTTableHeader",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"}],selectable:!1});this._syncEnableOptionTable.placeAt(this.downloadOptionTable);
this._syncEnableOptionTable.startup()},_setFileOptionDataInTable:function(g,A){var h=this._syncEnableOptionTable.addRow({});h.success&&h.tr&&this.checkLayerForDownloadOptions({url:g.url,id:g.id,layerName:g.layerName,allowDownload:g.allowDownload,layerVersion:A.version,capabilities:A.capabilities},h.tr.rowIndex)},checkLayerForDownloadOptions:function(g,A){var h=this._getTableRow(A);if(h.success&&h.tr){var r={url:g.url,layerName:g.layerName,id:g.id,allowDownload:g.hasOwnProperty("allowDownload")?g.allowDownload:
!0};this._addLayerTitle(h.tr,g.layerName);this._addFileOption(h.tr,1);r.downloadingFileOption=[];r.downloadingFileOption.push("csv");1<g.capabilities.split("Sync").length&&10.4<=g.layerVersion&&(this._addFileOption(h.tr,2),r.downloadingFileOption.push("filegdb"),C.isHostedService(g.url)&&(this._addFileOption(h.tr,3),r.downloadingFileOption.push("shapefile")));this._addAllowDownloadCheckbox(h.tr,r);this._setLayerDownloadInfo(r,A);this.loadingIndicator.hide()}},_getTableRow:function(g){-1<g&&this._syncEnableOptionTable.tbody.rows[g]?
(g={tr:this._syncEnableOptionTable.tbody.rows[g],success:!0},this._removeFileOptions(g.tr)):g=this._syncEnableOptionTable.addRow({});return g},_setLayerDownloadInfo:function(g,A){-1<A?this._layers.splice(A,1,g):this._layers.push(g)},_addLayerTitle:function(g,A){if(g=c(".simple-table-cell",g)[0])g.innerHTML=A},_removeFileOptions:function(g){var A;g=c(".simple-table-cell",g);for(A=1;4>A;A++)I.remove(g[A],"esriCTAvailableDownloadOption")},_addFileOption:function(g,A){(g=c(".simple-table-cell",g)[A])&&
I.add(g,"esriCTAvailableDownloadOption")},_addAllowDownloadCheckbox:function(g,A){if(g=c(".simple-table-cell",g)[4]){l.empty(g);var h=new B({checked:A.allowDownload,"class":"esriCTAllowDownloadCheckbox"});h.placeAt(g);this.own(a(h,"change",v.hitch(this,function(){A.allowDownload=d.get(h,"checked")})))}},_attachDownloadOptionEvent:function(){var g=c("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;var A=c("input",this.downloadOptionForm);L.forEach(A,v.hitch(this,function(h){this.own(a(h,
"click",v.hitch(this,function(r){h.value!==g&&(this._chooseDownloadOption(r.currentTarget.value,!1),g=r.currentTarget.value)})))}))},_chooseDownloadOption:function(g,A){switch(g){case "syncEnable":this.syncEnableRadioButton.set("checked",!0);I.remove(this.downloadOptionTable,"esriCTHidden");I.add(this.extractDataTaskInputContainer,"esriCTHidden");A&&this._resetExtractDataTaskOption(!0);break;case "extractDataTask":this.gpServiceRadioButton.set("checked",!0);I.add(this.downloadOptionTable,"esriCTHidden");
I.remove(this.extractDataTaskInputContainer,"esriCTHidden");A&&this.downloadOptions&&this.downloadOptions.extractDataTaskURL&&this._resetExtractDataTaskOption(!1);break;case "cannotDownload":this.cannotDownloadRadioButton.set("checked",!0),I.add(this.downloadOptionTable,"esriCTHidden"),I.add(this.extractDataTaskInputContainer,"esriCTHidden"),A&&this._resetExtractDataTaskOption(!0)}},getLayers:function(){return this._layers},deleteRow:function(g){this._syncEnableOptionTable.deleteRow(this._syncEnableOptionTable.tbody.rows[g]);
this._layers.splice(g,1)},rowUp:function(g){if(-1<g&&this._syncEnableOptionTable.tbody.rows[g+1]){e.place(this._syncEnableOptionTable.tbody.rows[g],this._syncEnableOptionTable.tbody.rows[g+1],"after");this._syncEnableOptionTable.updateUI();var A=this._layers[g];var h=this._layers[g+1];this._layers.splice(g,2,h,A)}},rowDown:function(g){if(g<this._syncEnableOptionTable.tbody.rows.length&&this._syncEnableOptionTable.tbody.rows[g-1]){e.place(this._syncEnableOptionTable.tbody.rows[g],this._syncEnableOptionTable.tbody.rows[g-
1],"before");this._syncEnableOptionTable.updateUI();var A=this._layers[g];var h=this._layers[g-1];this._layers.splice(g-1,2,A,h)}},_onSetButtonClick:function(g){return new m({titleLabel:this.nls.downloadTab.setGPTaskTitle,width:830,height:560,content:g})},_requestExtractDataTaskURLInfo:function(g,A){var h=!1;this.loadingIndicator.show();z({url:g+"?f\x3dpjson"}).then(v.hitch(this,function(r){(h=this._validateExtractDataTask(r))?(this.extractDataTaskTextBox.set("value",g),this._extractDataTaskURL=g):
(this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL),this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="");A.close();this.loadingIndicator.hide()}),v.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL);this.extractDataTaskTextBox.set("value","");this._extractDataTaskURL="";this.loadingIndicator.hide();A.close()}))},_validateExtractDataTask:function(g){var A,h;var r=A=h=!1;return g&&"esriExecutionTypeAsynchronous"===g.executionType&&
(L.forEach(g.parameters,v.hitch(this,function(J){switch(J.name){case "Area_of_Interest":r=this._checkAOIParam(J);break;case "Feature_Format":A=this._checkFeatureFormatParam(J);break;case "Output_Zip_File":h=this._checkOutputParam(J)}})),r&&A&&h)?!0:!1},_checkAOIParam:function(g){return"GPFeatureRecordSetLayer"===g.dataType?g.defaultValue&&"esriGeometryPolygon"!==g.defaultValue.geometryType?!1:!0:!1},_checkFeatureFormatParam:function(g){var A=!1;this._extractDataTaskDownloadOptions=[];return"GPString"===
g.dataType&&g.choiceList&&0<g.choiceList.length?(this._extractDataTaskDownloadOptions.push("csv"),-1<g.choiceList.indexOf("File Geodatabase - GDB - .gdb")&&(this._extractDataTaskDownloadOptions.push("filegdb"),A=!0),-1<g.choiceList.indexOf("Shapefile - SHP - .shp")&&(this._extractDataTaskDownloadOptions.push("shapefile"),A=!0),A):!1},_checkOutputParam:function(g){return"GPDataFile"===g.dataType?!0:!1},_showMessage:function(g){(new t({message:g})).message=g},getDownloadingFileOptions:function(){var g=
[];var A=c("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;"syncEnable"===A?g=this._getSyncEnableDownloadingOptions(this._layers):"extractDataTask"===A&&(g=this._extractDataTaskDownloadOptions);return g},_getSyncEnableDownloadingOptions:function(g){var A=[];L.some(g,v.hitch(this,function(h){h.allowDownload&&L.some(h.downloadingFileOption,v.hitch(this,function(r){-1===A.indexOf(r)&&A.push(r)}))}));return A},getPrintReportGPServiceURL:function(){return this._printTaskURL?this._printTaskURL:
""},getReportTitle:function(){return this.reportTitleTextBox.value},getNoDataText:function(){return this.noDataTextRepresentationTextBox.value},getNaTextValue:function(){return this.naTextRepresentationTextBox.value},getTableHeaderColor:function(){var g=this._tableHeaderColor.color.toHex();return g?g:""},getFootnoteForReport:function(){return this._footNoteEditorObj.focusNode.innerHTML?this._footNoteEditorObj.focusNode.innerHTML:""},_initImageChooser:function(){this.logoChooser=new H({cropImage:!1,
showSelfImg:!1,goldenWidth:50,goldenHeight:50,displayImg:this.imageChooserPreview,format:[H.GIF,H.PNG,H.JPEG]});this.logoChooser.placeAt(this.logoChooserNode);this._createLogoPreview();I.add(this.logoChooser.domNode,"esriCTImageChooserContent")},_createLogoPreview:function(){var g=this.folderUrl+"/images/default-logo.png";if(this.reportSettings&&this.reportSettings.logo){var A=this.reportSettings.logo;-1<A.indexOf("${appPath}")?(g=this.folderUrl.slice(0,this.folderUrl.lastIndexOf("widgets")),g=q.substitute(A,
{appPath:g})):g=A}d.set(this.imageChooserPreview,"src",g)},getLogo:function(){return this.logoChooser&&this.logoChooser.imageData?this.logoChooser.getImageData():this.reportSettings&&this.reportSettings.logo?this.reportSettings.logo:"${appPath}/widgets/Screening/images/default-logo.png"},_resetExtractDataTaskOption:function(g){g?(this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="",this._extractDataTaskDownloadOptions=[]):(this.extractDataTaskTextBox.set("value",this.downloadOptions.extractDataTaskURL),
this._extractDataTaskURL=this.downloadOptions.extractDataTaskURL,this._extractDataTaskDownloadOptions=this.downloadOptions.downloadingFileOptions)},_createColorPicker:function(g,A){A=l.create("table",{cellspacing:"0",cellpadding:"0"},A);A=l.create("tr",{style:"height:30px"},A);l.create("td",{},A);A=l.create("td",{},A);A=l.create("div",{"class":"esriCTColorChooserNode"},A);A=new f(null,l.create("div",{},A));A.setColor(new p(g));return A},_addFieldsRow:function(g,A){var h=this._customLayoutTable.addRow({});
if(h.success&&h.tr){h=h.tr;var r=D(".simple-table-cell",h);var J=r[0];var M=r[1];var O=r[2];var w=r[3];r=g.Width;var G=g.Height;var R=null!==r&&""!==r&&void 0!==r||null!==G&&""!==G&&void 0!==G?g.PageUnits?g.PageUnits:null:null;this._displayLayout(J,h,g.SizeName);this._displayWidth(M,h,r,A);this._displayHeight(O,h,G,A);this._displayPageUnits(w,R,h)}},_emptyDefaultDropDown:function(){for(var g in this._defaultOptions)this._defaultOptions.hasOwnProperty(g)&&y.PageSizes[this._defaultOptions[g].SizeName]&&
this._defaultPrintTemplateDropdownOptionObj.removeOption({label:g,value:g})},_addOptionsInDefaultDropdown:function(){for(var g in this._defaultOptions)this._defaultOptions.hasOwnProperty(g)&&y.PageSizes[this._defaultOptions[g].SizeName]&&this._defaultPrintTemplateDropdownOptionObj.addOption({label:g,value:g});this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_removeCustomOptionFromDefaultDropdown:function(){L.forEach(this._customDropdownOption,v.hitch(this,function(g){this._defaultPrintTemplateDropdownOptionObj.removeOption({label:g.value,
value:g.value})}));this._defaultPrintTemplateDropdownOption=[];L.forEach(this._defaultPrintTemplateDropdownOptionObj.options,v.hitch(this,function(g){this._defaultPrintTemplateDropdownOption.push({label:g.value,value:g.value})}))},_addConfiguredCustomOptionInDefaultDropdown:function(){if(this._customLayoutTable){var g=this._customLayoutTable.getRows();L.forEach(g,v.hitch(this,function(A){var h=!1;C.has("ie")||C.has("edge")?L.forEach(this._defaultPrintTemplateDropdownOptionObj.options,v.hitch(this,
function(r){r.value===A.customOptionLayoutDropdownObj.value&&(h=!0)})):h=this._defaultPrintTemplateDropdownOptionObj.options.find(function(r){return r.value===A.customOptionLayoutDropdownObj.value});h||this._defaultPrintTemplateDropdownOptionObj.addOption({label:A.customOptionLayoutDropdownObj.value,value:A.customOptionLayoutDropdownObj.value})}))}},_displayLayout:function(g,A,h){h=new N({"class":"esriCTFieldChooserDropdown",options:v.clone(this._customDropdownOption),value:h});h.placeAt(g);this.own(a(h,
"MouseEnter",v.hitch(this,function(r){this._lastSelectedCustomDropdownRow=r.currentTarget.parentNode.parentNode})));this.own(a(h,"click",v.hitch(this,function(r){this._lastSelectedCustomDropdownRow=r.currentTarget.parentNode.parentNode})));this.own(a(h,"change",v.hitch(this,function(r){this._buddyTaskChoiceList[r]?this._lastSelectedCustomDropdownRow&&(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",this._buddyTaskChoiceList[r].pageSize[1]),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",
this._buddyTaskChoiceList[r].pageSize[0]),this._buddyTaskChoiceList[r].pageUnits?this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",this._buddyTaskChoiceList[r].pageUnits):this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value","")):(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",
""));this._removeCustomOptionFromDefaultDropdown();this._addConfiguredCustomOptionInDefaultDropdown()})));h.startup();A.customOptionLayoutDropdownObj=h},_displayWidth:function(g,A,h,r){r||isNaN(parseFloat(h))||(h=parseFloat(h));h=new P({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidWidth,value:h,required:!0});h.placeAt(g);h.startup();A.customOptionWidthTextbox=h},_displayHeight:function(g,A,h,r){r||isNaN(parseFloat(h))||(h=
parseFloat(h));h=new P({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidHeight,value:h,required:!0});h.placeAt(g);h.startup();A.customOptionHeightTextbox=h},_displayPageUnits:function(g,A,h){A=new N({"class":"esriCTFieldChooserDropdown",options:v.clone(this._pageSize),required:!0,value:A});A.placeAt(g);A.startup();h.customOptionPageUnitsDropdownObj=A},_getDistinctFieldsOptionsObj:function(g){var A=[];L.forEach(g,v.hitch(this,
function(h){A.push({label:this._entireFieldObj[h].alias||this._entireFieldObj[h].name,value:h})}));return A},_addDefaultPrintTemplateOptions:function(){this._defaultPrintTemplateDropdownOptionObj=new N({"class":"esriCTFieldChooserDropdown",options:this._defaultPrintTemplateDropdownOption});this._defaultPrintTemplateDropdownOptionObj.placeAt(this.defaultPrintTemplateDropdown);this._defaultPrintTemplateDropdownOptionObj.startup();this._clonedConfigurationCustomOptions&&""!==this._clonedConfigurationCustomOptions.defaultPrintOption&&
null!==this._clonedConfigurationCustomOptions.defaultPrintOption&&void 0!==this._clonedConfigurationCustomOptions.defaultPrintOption?this._defaultPrintTemplateDropdownOptionObj.set("value",this._clonedConfigurationCustomOptions.defaultPrintOption):this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_disableAddCustomLayoutButton:function(){I.add(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");I.add(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},
_enableAddCustomLayoutButton:function(){I.remove(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");I.remove(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},_fetchChoiceList:function(){this.loadingIndicator.show();z({url:this._printTaskURL,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(v.hitch(this,function(g){this._extractChoiceList(g);this._createCustomOptionDropdownList();0<this._customDropdownOption.length?this._checkBuddyTask(g):(this._disableAddCustomLayoutButton(),
this._addDefaultPrintTemplateOptions(),this.loadingIndicator.hide())}),v.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchChoiceList);this.loadingIndicator.hide()}))},_extractChoiceList:function(g){L.forEach(g.parameters,v.hitch(this,function(A){"Layout_Template"===A.name&&"Layout Template"===A.displayName&&(this._printServiceChoiceList=A.choiceList)}))},_checkBuddyTask:function(){z({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/")),content:{f:"json"},
handleAs:"json",callbackParamName:"callback"}).then(v.hitch(this,function(g){if(1<g.tasks.length){for(var A,h=0;h<g.tasks.length;h++)if(-1!==this._buddyTaskEndPoint.indexOf(g.tasks[h])){A=g.tasks[h];break}A?this._executeBuddyTaskSync(A):(0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):this._disableAddCustomLayoutButton(),this.loadingIndicator.hide())}else 0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):
(this._disableAddCustomLayoutButton(),this._addDefaultPrintTemplateOptions()),this.loadingIndicator.hide()}),v.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskName);this.loadingIndicator.hide()}))},_executeBuddyTaskSync:function(g){z({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/"))+"/"+g+"/execute",content:{f:"json",outSR:102100},handleAs:"json",callbackParamName:"callback"}).then(v.hitch(this,function(A){0<A.results[0].value.length?
(this._enableAddCustomLayoutButton(),L.forEach(A.results[0].value,v.hitch(this,function(h){this._buddyTaskChoiceList[h.layoutTemplate]=h})),this._displayChoiceList()):this._disableAddCustomLayoutButton();this.loadingIndicator.hide()}),v.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskDimension);this.loadingIndicator.hide()}))},_displayChoiceList:function(){this._createCustomLayoutTable();this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&
0<this._clonedConfigurationCustomOptions.customOptions.length&&this._addConfiguredCustomOptionsInTable();this._addDefaultPrintTemplateOptions()},_createCustomLayoutTable:function(){this._customLayoutTable=new F({fields:[{name:"field",title:"Layout",type:"empty",editable:"false",width:"40%"},{name:"field",title:"Width",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Height",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Page Units",type:"empty",editable:"false",width:"20%"},
{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"10%"}]});this._customLayoutTable.placeAt(this.customLayoutTable);e.setStyle(this._customLayoutTable.domNode,{height:"100%"});this._customLayoutTable.startup();this.own(a(this._customLayoutTable,"row-delete",v.hitch(this,function(){this._removeCustomOptionFromDefaultDropdown();0===this._customLayoutTable.getRows().length&&this._isCustomOptionNoDefault&&this._addOptionsInDefaultDropdown();
this._addConfiguredCustomOptionInDefaultDropdown()})))},_addConfiguredCustomOptionsInTable:function(){L.forEach(this._clonedConfigurationCustomOptions.customOptions,v.hitch(this,function(g){this._addFieldsRow(g,!0)}))},_addCustomOptionsInTable:function(){var g=this._customDropdownOption[0].value,A,h;var r=h=null;var J=this._pageSize[0].value;this._buddyTaskChoiceList[g]&&(h=this._buddyTaskChoiceList[g].pageSize[1],r=this._buddyTaskChoiceList[g].pageSize[0],this._buddyTaskChoiceList[g]&&this._buddyTaskChoiceList[g].pageUnits&&
(J=this._buddyTaskChoiceList[g].pageUnits));var M={};M[g]={Height:h,Width:r,SizeName:g,MapLayout:g,PageUnits:J};this._addFieldsRow(M[g],!1);C.has("ie")||C.has("edge")?L.forEach(this._defaultPrintTemplateDropdownOptionObj.options,v.hitch(this,function(O){O.value===g&&(A=O)})):A=this._defaultPrintTemplateDropdownOptionObj.options.find(function(O){return O.value===g});A||this._defaultPrintTemplateDropdownOptionObj.addOption({label:g,value:g,selected:!1})},_createCustomOptionDropdownList:function(){var g=
!1;L.forEach(this._printServiceChoiceList,v.hitch(this,function(h){var r=v.clone(h);if("MAP_ONLY"!==r){if(this._defaultOptions[r]){g=!0;var J=this._defaultOptions[r];this._defaultPrintTemplateDropdownOption.push({label:y.PageSizes[J.SizeName].SizeName+" "+y.Orientation[J.Orientation].Text,value:h})}this._defaultOptions[r]||this._customDropdownOption.push({value:r,label:r})}}));this._clonedConfigurationCustomOptions&&L.forEach(this._clonedConfigurationCustomOptions.customOptions,v.hitch(this,function(h){this._defaultPrintTemplateDropdownOption.push({label:h.SizeName,
value:h.SizeName})}));if(!(g||(0<this._customDropdownOption.length&&(this._isCustomOptionNoDefault=!0),this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&0<this._clonedConfigurationCustomOptions.customOptions.length)))for(var A in this._defaultOptions)this._defaultOptions.hasOwnProperty(A)&&y.PageSizes[this._defaultOptions[A].SizeName]&&this._defaultPrintTemplateDropdownOption.push({label:A,value:A})},getCustomOptions:function(){var g=[];if(this._customLayoutTable){var A=
this._customLayoutTable.getRows();L.forEach(A,v.hitch(this,function(h){g.push({SizeName:h.customOptionLayoutDropdownObj.value,Width:h.customOptionWidthTextbox.getValue(),Height:h.customOptionHeightTextbox.getValue(),MapLayout:h.customOptionLayoutDropdownObj.value,PageUnits:h.customOptionPageUnitsDropdownObj.value})}))}return g},validateCustomOptions:function(){var g=[];if(this._customLayoutTable){var A=this._customLayoutTable.getRows();L.forEach(A,v.hitch(this,function(h){h.customOptionWidthTextbox.isValid()||
g.push(q.substitute(this.nls.downloadTab.errorMessages.invalidLayoutWidth,{customLayoutOptionValue:h.customOptionLayoutDropdownObj.value}));h.customOptionHeightTextbox.isValid()||g.push(q.substitute(this.nls.downloadTab.errorMessages.invalidLayoutHeight,{customLayoutOptionValue:h.customOptionLayoutDropdownObj.value}));h.customOptionPageUnitsDropdownObj.isValid()||g.push(q.substitute(this.nls.downloadTab.errorMessages.invalidLayoutPageUnits,{customLayoutOptionValue:h.customOptionLayoutDropdownObj.value}))}))}if(0<
g.length)return g;L.forEach(A,v.hitch(this,function(h){g.push({SizeName:h.customOptionLayoutDropdownObj.value})}));(A=this._getDuplicateValue(g))&&0<A.length?(g=[],g.push(q.substitute(this.nls.downloadTab.errorMessages.duplicateCustomOption,{duplicateValueSizeName:A[0].SizeName}))):g=[];return g},_getDuplicateValue:function(g){var A=0,h=g.length;for(A;A<h;A++){var r=g[A];var J=C.has("ie")||C.has("edge")?Object.create(g):Object.assign([],g);J.splice(A,1);r=this._filterArray(J,r);if(0<r.length)break}return r},
_filterArray:function(g,A){return g.filter(function(h){return Object.keys(A).every(function(r){return h[r]===A[r]})})},getDefaultPrintOption:function(){return this._defaultPrintTemplateDropdownOptionObj.value},closeDownloadTabDropdowns:function(){this._defaultPrintTemplateDropdownOptionObj&&this._defaultPrintTemplateDropdownOptionObj.closeDropDown();if(this._customLayoutTable){var g=this._customLayoutTable.getRows();L.forEach(g,v.hitch(this,function(A){A.customOptionLayoutDropdownObj.closeDropDown();
A.customOptionPageUnitsDropdownObj.closeDropDown()}))}},_initEditor:function(){this._initEditorPluginsCSS();this._footNoteEditorObj=new S({plugins:"undo redo | cut copy paste selectAll | bold italic underline | foreColor | insertHorizontalRule removeFormat delete |".split(" "),extraPlugins:["createLink","unlink",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},"fontSize"],style:"font-family:Verdana;"},
this.footNoteEditor);e.setStyle(this._footNoteEditorObj.domNode,{width:"100%",height:"100%"});this._footNoteEditorObj.startup();8!==k("ie")&&this._footNoteEditorObj.resize({w:"100%",h:"100%"})},_initEditorPluginsCSS:function(){var g=document.getElementsByTagName("head")[0],A=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";D('link[href\x3d"'+A+'"]',g)[0]||C.loadStyleLink("editor_plugins_resources_TextColor",A);A=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";D('link[href\x3d"'+
A+'"]',g)[0]||C.loadStyleLink("editor_plugins_resources_editorPlugins",A);A=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";D('link[href\x3d"'+A+'"]',g)[0]||C.loadStyleLink("editor_plugins_resources_PasteFromWord",A)},getDisplaySummaryCheckBoxStatus:function(){return this.displaySummaryInReportCheckBox.get("checked")},getRowshavingAllZeroValueCheckBoxStatus:function(){return this.hideAllZeroRowCheckBox.get("checked")},getRowshavingAllNullValueCheckBoxStatus:function(){return this.hideNullRowCheckBox.get("checked")}})})},
"jimu/dijit/GpSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/GpChooserFromPortal jimu/dijit/_GpServiceChooserContent jimu/portalUrlUtils dijit/form/RadioButton".split(" "),function(x,E,K,I,v,a,c,d,e,l,q,p){var u=0;return x([E,K,I,e],{templateString:v,baseClass:"jimu-gp-source",declaredClass:"jimu.dijit.GpSource",nls:null,multiple:!1,
portalUrl:null,uniqueID:null,mode:null,constructor:function(){this.inherited(arguments);this.uniqueID=++u},postMixInProperties:function(){this.nls=window.jimuNls.gpSource;this.portalUrl=p.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){var B=[];this.portalRadio.checked?B=this.gpcPortal.getSelectedItems():this.urlRadio.checked&&(B=this.gpcUrl.getSelectedItems());return B},startup:function(){this._started||(this.inherited(arguments),
this.gpcPortal.startup(),this.gpcUrl.startup());this._started=!0},_initSelf:function(){this._initRadios();this._createGpChooserFromPortal();this._createGpServiceChooserContent();this._onRadioClicked("url");this.own(d(this.urlRadio,"click",a.hitch(this,function(){this._onRadioClicked("url")})));this.own(d(this.portalRadio,"click",a.hitch(this,function(){this._onRadioClicked("portal")})))},_createGpChooserFromPortal:function(){this.gpcPortal=new l({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",
height:"100%"}});this.gpcPortal.operationTip=this.nls.chooseItem;this.gpcPortal.placeAt(this.hflcContainer);this.own(d(this.gpcPortal,"next",a.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseTask;this._updateOperationTip()})));this.own(d(this.gpcPortal,"back",a.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(d(this.gpcPortal,"ok",a.hitch(this,function(B){B&&0<B.length&&this.emit("ok",B)})));
this.own(d(this.gpcPortal,"cancel",a.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createGpServiceChooserContent:function(){this.gpcUrl=new q({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.gpcUrl.operationTip=this.nls.setServiceUrl;this.gpcUrl.placeAt(this.flscContainer);this.own(d(this.gpcUrl,"ok",a.hitch(this,
function(B){B&&0<B.length&&this.emit("ok",B)})));this.own(d(this.gpcUrl,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var B="gpSourceRadios_"+this._getRandomString();this.portalRadio.name=B;c.setAttr(this.portalRadio,"id","portalRadio_"+this._getRandomString());c.setAttr(this.portalLabel,"for",this.portalRadio.id);this.urlRadio.name=B;c.setAttr(this.urlRadio,"id","urlRadio_"+this._getRandomString());c.setAttr(this.urlLabel,"for",this.urlRadio.id)},_getRandomString:function(){var B=
Math.random().toString();return B=B.slice(2,B.length)},_onRadioClicked:function(B){this.mode!==B&&(this.mode=B,"portal"===B?(this.portalRadio.set("checked",!0),this.urlRadio.set("checked",!1),c.setStyle(this.hflcContainer,"display","block"),c.setStyle(this.flscContainer,"display","none"),this.operationTip.innerHTML=this.nls.chooseItem):"url"===B&&(this.portalRadio.set("checked",!1),this.urlRadio.set("checked",!0),c.setStyle(this.hflcContainer,"display","none"),c.setStyle(this.flscContainer,"display",
"block"),this.operationTip.innerHTML=this.nls.setServiceUrl,setTimeout(a.hitch(this,function(){this.gpcUrl.focusInput()}),50)),this._updateOperationTip())},_updateOperationTip:function(){if(this.portalRadio.checked){this.operationTip.innerHTML=this.gpcPortal.operationTip;var B=this.gpcPortal.browserContainer;B.style.top=0;var F=this.operationTip.clientHeight;19<=F&&(B.style.top=F-19+"px")}else this.urlRadio.checked&&(this.operationTip.innerHTML=this.gpcUrl.operationTip)}})})},"jimu/dijit/GpChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/GpServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m){return x([E,K,I,p],{templateString:v,declaredClass:"jimu.dijit.GpChooserFromPortal",baseClass:"jimu-gp-chooser-from-portal",_serviceDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=a.mixin({},window.jimuNls.common);this.portalUrl=b.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.gpServiceBrowser.getSelectedItems()},_initSelf:function(){this.selector=
new B({portalUrl:this.portalUrl,itemTypes:["Geoprocessing Service"],onlyShowOnlineFeaturedItems:!1});this.own(e(this.selector,"item-selected",a.hitch(this,this._onItemSelected)));this.own(e(this.selector,"none-item-selected",a.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);this.selector.startup();this.gpServiceBrowser._onTreeClick=a.hitch(this,this._onBrowserClicked)},_onItemSelected:function(){c.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){c.addClass(this.btnNext,
"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceDef&&!this._serviceDef.isFulfilled()&&this._serviceDef.cancel();c.setStyle(this.btnOk,"display","none");c.setStyle(this.btnNext,"display","block");c.setStyle(this.btnBack,"display","none");c.addClass(this.btnOk,"jimu-state-disabled");c.setStyle(this.selectorContainer,"display","block");c.setStyle(this.browserContainer,"display","none");this._reset();this.emit("back")},_onBtnOkClicked:function(){var t=this.getSelectedItems();0<t.length&&
this.emit("ok",t)},_onBtnNextClicked:function(){var t=this.selector.getSelectedItem();t&&(this._reset(),c.setStyle(this.btnNext,"display","none"),c.setStyle(this.btnBack,"display","block"),c.setStyle(this.btnOk,"display","block"),c.addClass(this.btnOk,"jimu-state-disabled"),c.setStyle(this.selectorContainer,"display","none"),c.setStyle(this.browserContainer,"display","block"),this.gpServiceBrowser.setUrl(t.url||t.item).then(a.hitch(this,function(){0<this.getSelectedItems().length&&c.removeClass(this.btnOk,
"jimu-state-disabled")})),this.emit("next"))},_reset:function(){this.gpServiceBrowser.reset()},_onBrowserClicked:function(){0<this.gpServiceBrowser.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):c.addClass(this.btnOk,"jimu-state-disabled")},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H,n,f,z,D,N,P){return x([K,I,v,P,c],{templateString:a,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=n.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";l.forEach(this.itemTypes,d.hitch(this,function(L,y){this._itemTypes+=
'"'+L+'"';y!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";l.forEach(this.typeKeywords,d.hitch(this,function(L,y){this._typeKeywords+='"'+L+'"';y!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var L=this._getPortalUrl();
this.portal=t.getPortal(L);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=m.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=m.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var L={title:this.nls.myContent,content:this.mycontentTabNode},y={title:this.nls.myOrganization,content:this.organizationTabNode},
C={title:this.nls.myGroup,content:this.groupTabNode},Q={title:this.nls.publicMap,content:this.publicTabNode};b.set(this.mycontentTabNode,"display","none");b.set(this.organizationTabNode,"display","none");b.set(this.groupTabNode,"display","none");b.set(this.publicTabNode,"display","none");var S=[];this.showMyContent&&(S.push(L),b.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(S.push(y),b.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(S.push(C),b.set(this.groupTabNode,
"display","block"));this.showPublic&&(S.push(Q),b.set(this.publicTabNode,"display","block"));this.tab=new D({tabs:S},this.tabNode);this.own(F(this.tab,"tabChanged",d.hitch(this,function(k){q.setStyle(this.signinSection,"display","none");k!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){q.setStyle(this.signinSection,"display","none");var L=B(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);H.userHaveSignInPortal(this._getPortalUrl())?L.style("display","block"):(L.style("display","none"),this._isPublicTabShow||q.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var L=this._getPortalUrl();L=n.getServerByUrl(L);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var y=!1;n.isArcGIScom(L)?(y=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
L,y=this.showOnlineItems?!1:!0);y&&(this.onlinePublicRaido.set("disabled",!0),q.setStyle(this.onlinePublicRaido,"display","none"),q.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var L="esri_"+(e.locale&&e.locale.slice(0,2)||"en").toLowerCase(),y=l.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
d.hitch(this,function(Q){return Q!==L})),C="";l.forEach(y,d.hitch(this,function(Q){C+=" -owner:"+Q+" "}));y=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(y=" orgid:"+this.portal.user.orgId+" ");y=y+this._itemTypeQueryString+" AND access:public "+C+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:y});this._filterPublicPortalQuery=this._getQuery({q:y,basicQ:y});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(L){return d.mixin({start:1,num:16,f:"json"},L||{})},_getPortalUrl:function(){return n.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(F(this.publicPortalItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));this.own(F(this.publicOnlineItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));this.own(F(this.organizationItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));this.own(F(this.groupItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));
this.own(F(this.mycontentItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));this.own(F(this.publicPortalItemTable,"update",d.hitch(this,this._onItemTableUpdate)));this.own(F(this.publicOnlineItemTable,"update",d.hitch(this,this._onItemTableUpdate)));this.own(F(this.organizationItemTable,"update",d.hitch(this,this._onItemTableUpdate)));this.own(F(this.groupItemTable,"update",d.hitch(this,this._onItemTableUpdate)));this.own(F(this.mycontentItemTable,"update",d.hitch(this,this._onItemTableUpdate)));
var L=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",L),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(F(this.portalPublicRaido,"click",d.hitch(this,this._onPublicRaidoClicked)));this.own(F(this.onlinePublicRaido,"click",d.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(L){(L=L&&d.trim(L))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=L+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=L+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(F(this.groupsSelect,"change",d.hitch(this,this._onGroupsSelectChange)));var L=n.getServerByUrl(this._getPortalUrl());n.isArcGIScom(L)&&(L="ArcGIS.com");H.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(L){if(L=L&&d.trim(L)){if(this._allOrganizationQuery){var y=this._allOrganizationQuery.q;y&&(this._filterOrganizationQuery.q=L+" "+y,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(L){if(L=L&&d.trim(L)){if(this._allMyContentQuery){var y=this._allMyContentQuery.q;y&&(this._filterMyContentQuery.q=L+" "+
y,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(L){if(L=L&&d.trim(L)){if(this._allGroupQuery){var y=this._allGroupQuery.q;y&&(this._filterGroupQuery.q=L+" "+y,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var L=this._getPortalUrl();t.getPortal(L).getUser().then(d.hitch(this,function(y){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(y),this._searchMyContent(y),this._searchGroups(y))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(L){this.organizationItemTable.clear();L=" orgid:"+L.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var y=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:L});this._filterOrganizationQuery=this._getQuery({q:L});this.organizationItemTable.set("portalUrl",y);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(L){this.mycontentItemTable.clear();var y=this._getPortalUrl();L="owner:"+L.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:L});this._filterMyContentQuery=this._getQuery({q:L});this.mycontentItemTable.set("portalUrl",y);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(L){this._resetGroupsSection();q.setStyle(this.groupsSection,"display","flex");L=L.getGroups();if(0<L.length){q.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();q.empty(this.groupsSelect);for(var y=0;y<L.length;y++){var C=L[y];q.create("option",
{value:C.id,innerHTML:C.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(L.length)},_resetGroupsSection:function(){q.setStyle(this.groupsSection,"display","none");q.empty(this.groupsSelect);q.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();q.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(L){0===L?q.setStyle(this.groupsSection,
"top","15px"):q.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var L=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===L)q.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{q.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var y=this._getPortalUrl();L="group:"+L+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:L});this._filterGroupQuery=this._getQuery({q:L});
this.groupItemTable.set("portalUrl",y);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(L){var y=q.hasClass(L,"jimu-state-active");B(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");y&&q.addClass(L,"jimu-state-active");(L=this.getSelectedItem())?this.emit("item-selected",L):this.emit("none-item-selected")},getSelectedItem:function(){var L=null,y=B(".item.jimu-state-active",this.domNode);
0<y.length&&(L=d.mixin({},y[0].item));return L}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b){return x([E,K,I,a],{templateString:v,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=F.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){e.setStyle(this.domNode,"display","block")},hide:function(){e.setStyle(this.domNode,"display","none")},searchAllItems:function(m){this.showAllItemsSection();m&&(this.query=c.mixin({},m),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),B.getPortal(this.portalUrl).queryItems(this.query).then(c.hitch(this,function(t){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=t.nextStart,this._createItems(t,this.allItemTbody))}),c.hitch(this,function(t){console.error(t);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(m){this.showFilterItemsSection();m&&(this.filteredQuery=c.clone(m),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),B.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(c.hitch(this,function(t){this.domNode&&
(this.showFilterItemsSection(),m&&this.clearFilteredItemsSection(),this.filteredQuery.start=t.nextStart,this._createItems(t,this.filteredItemsTbody),this._filterItemCallback())}),c.hitch(this,function(t){console.error(t);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(e.setStyle(this.filteredItemsTableDiv,"display","block"),e.setStyle(this.searchNoneTipSection,"display","none")):(e.setStyle(this.filteredItemsTableDiv,
"display","none"),e.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){e.empty(this.allItemTbody)},clearFilteredItemsSection:function(){e.empty(this.filteredItemsTbody)},showAllItemsSection:function(){e.setStyle(this.allItemsSection,"display","block");e.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){e.setStyle(this.allItemsSection,"display","none");
e.setStyle(this.filteredItemsSection,"display","block");e.setStyle(this.filteredItemsTableDiv,"display","block");e.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(m){return u.isScrollToBottom(m)},_createItems:function(m,t){m=m.results;var H=
d.map(this.types,c.hitch(this,function(L){return L.toLowerCase()}));m=d.filter(m,c.hitch(this,function(L){L=L.type&&L.type.toLowerCase()||"";return 0<=d.indexOf(H,L)}));if(0!==m.length){var n=q("td.empty",t),f;if(0<n.length){var z=Math.min(m.length,n.length),D=m.splice(0,z);for(f=0;f<z;f++){var N=n[f];var P=this._createItem(D[f]);e.place(P,N);e.removeClass(N,"empty")}}if(0!==m.length){n=Math.ceil(m.length/2);for(f=0;f<n;f++)for(P=e.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
e.place(P,t),z=q("td",P),D=0;D<z.length;D++)N=z[D],(P=m[2*f+D])?(P=this._createItem(P),e.place(P,N)):e.addClass(N,"empty");this.emit("update")}}},_getItemCount:function(m){return q(".item",m).length},_createItem:function(m){var t=e.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
t.item=m;var H=q(".item-thumbnail",t)[0],n=q(".item-name",t)[0],f=q(".item-type-owner",t)[0],z=q(".item-date",t)[0],D=q(".item-details",t)[0],N=q(".none-thumbnail-tip",t)[0];if(!m.thumbnailUrl){var P=this._defaultThumbnail[m.type];P&&(m.thumbnailUrl=require.toUrl("jimu")+"/images/"+P)}m.thumbnailUrl?e.setStyle(H,"backgroundImage","url("+m.thumbnailUrl+")"):N.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(z=q(".item-info",t)[0],this.onCreateItemContent(m,z)):(n.innerHTML=
m.title,n.title=n.innerHTML,f.innerHTML=m.type+" by "+m.owner,f.title=f.innerHTML,H=new Date,H.setTime(m.modified),z.innerHTML=H.toLocaleString(),z.title=z.innerHTML,D.innerHTML=this.nls.moreDetails,D.href=m.detailsPageUrl||"#");return t},_onItemsTableClicked:function(m){var t=m.target||m.srcElement;m=null;e.hasClass(t,"item-thumbnail")?m=t.parentNode:e.hasClass(t,"none-thumbnail-tip")&&(m=t.parentNode.parentNode);m&&(t=e.hasClass(m,"jimu-state-active"),q(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
t?e.removeClass(m,"jimu-state-active"):e.addClass(m,"jimu-state-active"),this.emit("item-dom-clicked",m))},getSelectedItem:function(){var m=null,t=q(".item.jimu-state-active",this.domNode);0<t.length&&(m=c.mixin({},t[0].item));return m}})})},"jimu/dijit/GpServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(x,E,K,I,v){return x([E],{baseClass:"jimu-gp-service-browser",declaredClass:"jimu.dijit.GpServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=v.getGpServiceBrowserRule()},getSelectedItems:function(){var a=this.inherited(arguments);return a=I.map(a,K.hitch(this,function(c){return{name:c.name,url:c.url}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F){return x([E,K,I,v],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(b){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new e;b&&"string"===typeof b&&b.replace(/\/*$/g,"")||this._def.reject();b=b.replace(/\/*$/g,"");b=a.trim(b);var m=b.match(/^http(s?):\/\//gi);m&&0<m.length||
(b="http://"+b);if(!(0>=b.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=b))return b=this._getRootItem(),b=B.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,b):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,b):this._searchFolderServiceUrl(this._currentUrl,b),this.shelter.show(),b.then(a.hitch(this,function(t){this.domNode&&this.shelter.hide();var H=this.tree.getAllLeafTreeNodeWidgets();1===H.length&&
H[0].select();this._def.resolve(t)}),a.hitch(this,function(t){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(t)})),this._def;this._def.reject()},_getItem:function(b){return this.rule.getItem(b)},_getSubItemUrls:function(b){return this.rule.getSubItemUrls(b)},_getSubItems:function(b){var m=new e;this._getSubItemUrls(b).then(a.hitch(this,function(t){t=d.map(t,a.hitch(this,function(H){return this._getItem(H)}));l(t).then(a.hitch(this,function(H){H=d.filter(H,a.hitch(this,
function(n){return n&&"object"===typeof n}));m.resolve(H)}),a.hitch(this,function(H){m.reject(H)}))}),a.hitch(this,function(t){m.reject(t)}));return m},_selectFirstLeafTreeNodeWidget:function(){var b=this.tree.getAllLeafTreeNodeWidgets();1===b.length&&b[0].select()},isLeafItem:function(b){return 0<=this.rule.leafTypes.indexOf(b.type)},isServiceTypeSupported:function(b){return this.rule.isServiceTypeSupported(b)},_getStringEndWith:function(b,m){var t="",H=b.indexOf(m);0<=H&&(t=b.slice(0,H+m.length));
return t},_isUrlContainsServiceType:function(b){return this.rule.isUrlContainsServiceType(b)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(b){var m="";b=b.split("/");return m=b[b.length-1]},_searchBaseServiceUrl:function(b,m){var t=new e;this._getRestInfo(b).then(a.hitch(this,function(H){if(this.domNode){var n=[];d.map(H.folders,a.hitch(this,function(f){var z={name:f,type:"folder",url:b+"/"+f,parent:m.id};this._addItem(z);
var D=new e;this._doSearchFolderServiceUrl(z.url,z.id).then(a.hitch(this,function(N){0<N.length?d.forEach(N,a.hitch(this,function(P){P.parent=z.id;this._addItem(P)})):this._removeItem(z.id);D.resolve()}),a.hitch(this,function(N){D.reject(N)}));n.push(D);return D}));d.forEach(H.services,a.hitch(this,function(f){if(this.isServiceTypeSupported(f.type)){f=b+"/"+f.name+"/"+f.type;var z=new e;this.rule.getItem(f).then(a.hitch(this,function(D){D&&(D.parent=m.id,this._addItem(D));z.resolve()}),a.hitch(this,
function(D){console.error(D);z.reject(D)}));n.push(z)}}));l(n).then(a.hitch(this,function(){this.domNode&&t.resolve()}),a.hitch(this,function(f){console.error(f);this.domNode&&t.reject(f)}))}}),a.hitch(this,function(H){console.error(H);this.domNode&&t.reject({errorCode:"NETWORK_ERROR",error:H})}));return t},_searchFolderServiceUrl:function(b,m){var t=new e;this._doSearchFolderServiceUrl(b,m).then(a.hitch(this,function(H){this.domNode&&(d.forEach(H,a.hitch(this,function(n){n.parent=m.id;this._addItem(n)})),
t.resolve())}),a.hitch(this,function(H){console.error(H);this.domNode&&t.reject({errorCode:"NETWORK_ERROR",error:H})}));return t},_doSearchFolderServiceUrl:function(b){var m=new e,t=this._getBaseServiceUrl();this._getRestInfo(b).then(a.hitch(this,function(H){H=H.services;var n=[];H&&0<H.length&&d.forEach(H,a.hitch(this,function(f){this.isServiceTypeSupported(f.type)&&(f=this.rule.getItem(t+"/"+f.name+"/"+f.type),n.push(f))}));l(n).then(a.hitch(this,function(f){f=d.filter(f,a.hitch(this,function(z){return z}));
m.resolve(f)}),a.hitch(this,function(f){console.error(f);m.reject(f)}))}),a.hitch(this,function(H){console.error(H);m.reject(H)}));return m},_searchServiceUrl:function(b,m){var t=new e;this._getSubItems(b).then(a.hitch(this,function(H){H&&0<H.length?(d.forEach(H,a.hitch(this,function(n){n.parent=m.id;this._addItem(n)})),t.resolve()):this._getItem(b).then(a.hitch(this,function(n){n&&(n.parent=m.id,this._addItem(n));t.resolve()}),a.hitch(this,function(n){t.reject(n)}))}),a.hitch(this,function(H){t.reject(H)}));
return t},_getRestInfo:function(b){var m=new e;this.rule.getRestInfo(b).then(a.hitch(this,function(t){this.domNode&&m.resolve(t)}),a.hitch(this,function(t){this.domNode&&m.reject(t)}));return m},_clear:function(){var b=this._store.query({parent:"root"});d.forEach(b,a.hitch(this,function(m){m&&"root"!==m.id&&this._store.remove(m.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(b){this._id++;b.id=this._id.toString();this._store.add(b);return b},_removeItem:function(b){this._store.remove(b)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var b=this._getRootItem();b=new q({data:[b],getChildren:function(m){return this.query({parent:m.id})}});this._store=new p(b);b=new u({store:this._store,query:{id:"root"},mayHaveChildren:a.hitch(this,this._mayHaveChildren)});this.tree=new F({multiple:this.multiple,model:b,showRoot:!1,style:{width:"100%"},isLeafItem:a.hitch(this,this.isLeafItem),onOpen:a.hitch(this,function(m,t){this._onTreeOpen(m,t);
this.emit("tree-open",m,t)}),onClick:a.hitch(this,function(m,t,H){this._onTreeClick(m,t,H);this.emit("tree-click",m,t,H)}),getIconStyle:a.hitch(this,function(m,t){var H=null;if(!m)return null;var n={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},f=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),z=this._getIconImageName(m,t);z||("folder"===m.type?z=t?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(m.type)&&
(z=t?"folder_open_default.png":"folder_close_default.png"));z&&(n.backgroundImage="url("+f+"/css/images/"+z+")",H=n);return H})});c.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(b,m){var t="";"function"===typeof this.rule.getIconImageName&&(t=this.rule.getIconImageName(b,m));return t},_mayHaveChildren:function(b){return"root"===b.type?!0:!this.isLeafItem(b)},_onTreeOpen:function(b,m){"root"===b.id||0<this._store.query({parent:b.id}).length||
b.checking||b.checked||(b.checking=!0,this._getSubItems(b.url).then(a.hitch(this,function(t){d.forEach(t,a.hitch(this,function(H){H.parent=b.id;this._addItem(H)}));b.checking=!1;b.checked=!0}),a.hitch(this,function(t){console.error(t);b.checking=!1;b.checked=!0})))},_onTreeClick:function(b,m,t){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),
function(x,E,K,I,v,a,c){return K("dijit.tree.ObjectStoreModel",c,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(d){v.mixin(this,d);this.childrenCache={}},getRoot:function(d,e){if(this.root)d(this.root);else{var l=this.store.query(this.query);l.then&&this.own(l);a(l,v.hitch(this,function(q){if(1!=q.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+q.length+" items, but must return exactly one");this.root=q[0];d(this.root);l.observe&&l.observe(v.hitch(this,
function(p){this.onChange(p)}),!0)}),e)}},mayHaveChildren:function(){return!0},getChildren:function(d,e,l){var q=this.store.getIdentity(d);if(this.childrenCache[q])a(this.childrenCache[q],e,l);else{var p=this.childrenCache[q]=this.store.getChildren(d);p.then&&this.own(p);p.observe&&this.own(p.observe(v.hitch(this,function(u,B,F){this.onChange(u);B!=F&&a(p,v.hitch(this,"onChildrenChange",d))}),!0));a(p,e,l)}},isItem:function(){return!0},getIdentity:function(d){return this.store.getIdentity(d)},getLabel:function(d){return d[this.labelAttr]},
newItem:function(d,e,l,q){return this.store.put(d,{parent:e,before:q})},pasteItem:function(d,e,l,q,p,u){var B=new I;if(e===l&&!q&&!u)return B.resolve(!0),B;e&&!q?this.getChildren(e,v.hitch(this,function(F){F=[].concat(F);var b=x.indexOf(F,d);F.splice(b,1);this.onChildrenChange(e,F);B.resolve(this.store.put(d,{overwrite:!0,parent:l,oldParent:e,before:u,isCopy:!1}))})):B.resolve(this.store.put(d,{overwrite:!0,parent:l,oldParent:e,before:u,isCopy:!0}));return B},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b){var m=x([F._TreeNode,u],{templateString:I,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);
a.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=a.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=a.toDom('\x3cinput type\x3d"checkbox" /\x3e');a.addClass(this.checkNode,"jimu-tree-check-node");a.place(this.checkNode,this.contentNode,"first");this.own(q(this.checkNode,"click",v.hitch(this,this._onClick)));this.own(q(this.rowNode,"keydown",v.hitch(this,function(t,H){H.target=t;H.keyCode!==p.ENTER&&H.keyCode!==
p.SPACE||this._onClick(H)},this.checkNode)));this.isLeaf?this.groupId?a.setStyle(this.checkNode,"display","none"):a.setStyle(this.checkNode,"display","inline"):a.setStyle(this.checkNode,"display","none");this.isLeaf?a.addClass(this.domNode,"jimu-tree-leaf-node"):a.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,a.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,a.removeClass(this.domNode,
"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(t){(t.target||t.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,t):this.tree._onClick(this,t)},_onChange:function(){this.isLeaf&&setTimeout(v.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return x([F,
u],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+b.getRandomString()},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree");this.own(l.before(this,"onClick",v.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&a.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;a.setAttr(this.domNode,"tabindex",0)},removeItem:function(t){this.model.store.remove(t)},
getAllItems:function(){var t=this.getAllTreeNodeWidgets();return c.map(t,v.hitch(this,function(H){var n=H.item;n.selected=H.checkNode.checked;return n}))},getSelectedItems:function(){var t=this.getAllTreeNodeWidgets();t=c.filter(t,v.hitch(this,function(H){return H.checkNode.checked}));return c.map(t,v.hitch(this,function(H){return H.item}))},getFilteredItems:function(t){var H=this.getAllTreeNodeWidgets();H=c.map(H,v.hitch(this,function(n){var f=n.item;f.selected=n.checkNode.checked;return f}));return c.filter(H,
v.hitch(this,function(n){return t(n)}))},getTreeNodeByItemId:function(t){for(var H=this._getAllTreeNodeDoms(),n=0;n<H.length;n++){var f=B.byNode(H[n]);if(f.item.id.toString()===t.toString())return f}return null},selectItem:function(t){(t=this.getTreeNodeByItemId(t))&&t.isLeaf&&this.selectNodeWidget(t)},unselectItem:function(t){(t=this.getTreeNodeByItemId(t))&&t.isLeaf&&t.unselect()},getAllLeafTreeNodeWidgets:function(){var t=this.getAllTreeNodeWidgets();return c.filter(t,v.hitch(this,function(H){return H.isLeaf}))},
getAllTreeNodeWidgets:function(){var t=this._getAllTreeNodeDoms();return c.map(t,v.hitch(this,function(H){return B.byNode(H)}))},isLeafItem:function(t){return t&&t.isLeaf},_getAllTreeNodeDoms:function(){return e(".dijitTreeNode",this.domNode)},_createTreeNode:function(t){t.isLeaf=this.isLeafItem(t.item);this.multiple||(t.groupId=this.uniqueId);return new m(t)},_onTreeNodeSelect:function(t){this.emit("item-select",{item:t.item,treeNode:t})},_onTreeNodeUnselect:function(t){this.emit("item-unselect",
{item:t.item,treeNode:t})},selectNodeWidget:function(t){this.multiple||this.unselectAllLeafNodeWidgets();t.select()},_jimuBeforeClick:function(t,H,n){H.isLeaf&&(a.hasClass(n.target||n.srcElement,"jimu-tree-check-node")||(this.multiple?H.toggleSelect():this.selectNodeWidget(H)));return arguments},_onCheckNodeClick:function(t,H,n){!this.multiple&&H&&this.unselectAllLeafNodeWidgets();d.stop(n);this.focusNode(t);setTimeout(v.hitch(this,function(){H?this.selectNodeWidget(t):t.unselect();this.onClick(t.item,
t,n)}),0)},unselectAllLeafNodeWidgets:function(){var t=this.getAllLeafTreeNodeWidgets();c.forEach(t,v.hitch(this,function(H){H.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H,n,f,z,D,N,P,L,y,C,Q,S,k,g,A,h,r){function J(w){return b.delegate(w.promise||w,{addCallback:function(G){this.then(G)},addErrback:function(G){this.otherwise(G)}})}var M=I("dijit._TreeNode",[P,L,y,C,Q],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(w){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=w;this._set("label",w);u("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:k,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(w){var G=Math.max(w,0)*this.tree._nodePixelIndent+"px";l.set(this.domNode,
"backgroundPosition",G+" 0px");l.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",G);x.forEach(this.getChildren(),function(R){R.set("indent",w+1)});this._set("indent",w)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(w){var G=this.tree,R=G.model;G._v10Compat&&w===R.root&&(w=null);this._applyClassAndStyle(w,"icon","Icon");this._applyClassAndStyle(w,"label","Label");this._applyClassAndStyle(w,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(w,G,R){var T="_"+G+"Class";G+="Node";var U=this[T];this[T]=this.tree["get"+R+"Class"](w,this.isExpanded);d.replace(this[G],this[T]||"",U||"");l.set(this[G],this.tree["get"+R+"Style"](w,this.isExpanded)||{})},_updateLayout:function(){var w=this.getParent();w=!w||!w.rowNode||"none"==w.rowNode.style.display;d.toggle(this.domNode,"dijitTreeIsRoot",w);d.toggle(this.domNode,"dijitTreeIsLast",!w&&!this.getNextSibling())},_setExpando:function(w){var G=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];w=w?0:this.isExpandable?this.isExpanded?1:2:3;d.replace(this.expandoNode,G[w],G);this.expandoNodeText.innerHTML=["*","-","+","*"][w]},expand:function(){if(this._expandDeferred)return J(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");d.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var w=p.wipeIn({node:this.containerNode,duration:N.defaultDuration}),G=this._expandDeferred=new v(function(){w.stop()});E.after(w,"onEnd",function(){G.resolve(!0)},!0);w.play();return J(G)},collapse:function(){if(this._collapseDeferred)return J(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");d.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var w=p.wipeOut({node:this.containerNode,duration:N.defaultDuration}),G=this._collapseDeferred=new v(function(){w.stop()});E.after(w,"onEnd",
function(){G.resolve(!0)},!0);w.play();return J(G)},indent:0,setChildItems:function(w){var G=this.tree,R=G.model,T=[],U=G.focusedChild,Y=this.getChildren();x.forEach(Y,function(V){y.prototype.removeChild.call(this,V)},this);this.defer(function(){x.forEach(Y,function(V){if(!V._destroyed&&!V.getParent()){G.dndController.removeTreeNode(V);(function da(W){var aa=R.getIdentity(W.item),ca=G._itemNodesMap[aa];1==ca.length?delete G._itemNodesMap[aa]:(aa=x.indexOf(ca,W),-1!=aa&&ca.splice(aa,1));x.forEach(W.getChildren(),
da)})(V);if(G.persist){var Z=x.map(V.getTreePath(),function(W){return G.model.getIdentity(W)}).join("/"),X;for(X in G._openedNodes)X.substr(0,Z.length)==Z&&delete G._openedNodes[X];G._saveExpandedNodes()}G.lastFocusedChild&&!c.isDescendant(G.lastFocusedChild.domNode,G.domNode)&&delete G.lastFocusedChild;U&&!c.isDescendant(U.domNode,G.domNode)&&G.focus();V.destroyRecursive()}})});this.state="Loaded";w&&0<w.length?(this.isExpandable=!0,x.forEach(w,function(V){var Z=R.getIdentity(V),X=G._itemNodesMap[Z];
if(X)for(var ba=0;ba<X.length;ba++)if(X[ba]&&!X[ba].getParent()){var W=X[ba];W.set("indent",this.indent+1);break}W||(W=this.tree._createTreeNode({item:V,tree:G,isExpandable:R.mayHaveChildren(V),label:G.getLabel(V),labelType:G.model&&G.model.labelType||"text",tooltip:G.getTooltip(V),ownerDocument:G.ownerDocument,dir:G.dir,lang:G.lang,textDir:G.textDir,indent:this.indent+1}),X?X.push(W):G._itemNodesMap[Z]=[W]);this.addChild(W);(this.tree.autoExpand||this.tree._state(W))&&T.push(G._expandNode(W))},this),
x.forEach(this.getChildren(),function(V){V._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);w=a(T);this.tree._startPaint(w);return J(w)},getTreePath:function(){for(var w=this,G=[];w&&w!==this.tree.rootNode;)G.unshift(w.item),w=w.getParent();G.unshift(this.tree.rootNode.item);return G},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(w){this.inherited(arguments);var G=this.getChildren();0==G.length&&
(this.isExpandable=!1,this.collapse());x.forEach(G,function(R){R._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(w){this.labelNode.setAttribute("aria-selected",w?"true":"false");d.toggle(this.rowNode,"dijitTreeRowSelected",w)},focus:function(){z.focus(this.focusNode)}});u("dojo-bidi")&&M.extend({_setTextDirAttr:function(w){!w||this.textDir==w&&this._created||(this._set("textDir",w),this.applyTextDir(this.labelNode),x.forEach(this.getChildren(),
function(G){G.set("textDir",w)},this))}});var O=I("dijit.Tree",[P,S,L,Q],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:g,persist:!1,autoExpand:!1,dndController:r,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(w,G){t.publish(this.id,b.mixin({tree:this,event:w},G||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new v;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var w=
this;this.own(m(this.containerNode,m.selector(".dijitTreeNode",H.enter),function(T){w._onNodeMouseEnter(D.byNode(this),T)}),m(this.containerNode,m.selector(".dijitTreeNode",H.leave),function(T){w._onNodeMouseLeave(D.byNode(this),T)}),m(this.containerNode,m.selector(".dijitTreeRow",f.press),function(T){w._onNodePress(D.getEnclosingWidget(this),T)}),m(this.containerNode,m.selector(".dijitTreeRow",f),function(T){w._onClick(D.getEnclosingWidget(this),T)}),m(this.containerNode,m.selector(".dijitTreeRow",
"dblclick"),function(T){w._onDblClick(D.getEnclosingWidget(this),T)}));this.model||this._store2model();this.own(E.after(this.model,"onChange",b.hitch(this,"_onItemChange"),!0),E.after(this.model,"onChildrenChange",b.hitch(this,"_onItemChildrenChange"),!0),E.after(this.model,"onDelete",b.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){b.isString(this.dndController)&&(this.dndController=b.getObject(this.dndController));for(var G={},R=0;R<this.dndParams.length;R++)this[this.dndParams[R]]&&
(G[this.dndParams[R]]=this[this.dndParams[R]]);this.dndController=new this.dndController(this,G)}this._load();this.onLoadDeferred=J(this.pendingCommandsPromise);this.onLoadDeferred.then(b.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;B.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var w={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(w.mayHaveChildren=
b.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(w.getChildren=b.hitch(this,function(G,R,T){this.getItemChildren(this._v10Compat&&G===this.model.root?null:G,R,T)}));this.model=new h(w);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(b.hitch(this,function(w){var G=this.rootNode=this.tree._createTreeNode({item:w,tree:this,isExpandable:!0,label:this.label||this.getLabel(w),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(G.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(G.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(G.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),G.labelNode.setAttribute("role","presentation"),G.labelNode.removeAttribute("aria-selected"),G.containerNode.setAttribute("role","tree"),G.containerNode.setAttribute("aria-expanded","true"),G.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(G.domNode);w=this.model.getIdentity(w);this._itemNodesMap[w]?this._itemNodesMap[w].push(G):this._itemNodesMap[w]=[G];G._updateLayout();
this._expandNode(G).then(b.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),b.hitch(this,function(w){console.error(this,": error loading root: ",w)}))},getNodesByItem:function(w){if(!w)return[];w=b.isString(w)?w:this.model.getIdentity(w);return[].concat(this._itemNodesMap[w])},_setSelectedItemAttr:function(w){this.set("selectedItems",[w])},_setSelectedItemsAttr:function(w){var G=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(b.hitch(this,function(){var R=x.map(w,function(U){return!U||b.isString(U)?U:G.model.getIdentity(U)}),T=[];x.forEach(R,function(U){T=T.concat(G._itemNodesMap[U]||[])});this.set("selectedNodes",T)}))},_setPathAttr:function(w){return w.length?J(this.set("paths",[w]).then(function(G){return G[0]})):J(this.set("paths",[]).then(function(G){return G[0]}))},_setPathsAttr:function(w){function G(T,U){var Y=T.shift(),V=x.filter(U,function(Z){return Z.getIdentity()==Y})[0];
if(V)return T.length?R._expandNode(V).then(function(){return G(T,V.getChildren())}):V;throw new O.PathError("Could not expand path at "+Y);}var R=this;return J(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return a(x.map(w,function(T){T=x.map(T,function(U){return U&&b.isObject(U)?R.model.getIdentity(U):U});if(T.length)return G(T,[R.rootNode]);throw new O.PathError("Empty path");}))}).then(function(T){R.set("selectedNodes",T);return R.paths}))},_setSelectedNodeAttr:function(w){this.set("selectedNodes",
[w])},_setSelectedNodesAttr:function(w){this.dndController.setSelection(w)},expandAll:function(){function w(R){return G._expandNode(R).then(function(){var T=x.filter(R.getChildren()||[],function(U){return U.isExpandable});return a(x.map(T,w))})}var G=this;return J(w(this.rootNode))},collapseAll:function(){function w(R){var T=x.filter(R.getChildren()||[],function(U){return U.isExpandable});T=a(x.map(T,w));return!R.isExpanded||R==G.rootNode&&!G.showRoot?T:T.then(function(){return G._collapseNode(R)})}
var G=this;return J(w(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(w){return this.model.getLabel(w)},getIconClass:function(w,G){return!w||this.model.mayHaveChildren(w)?G?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(w,G){(w=this._getNext(G))&&w.isTreeNode&&this.focusNode(w)},
_onUpArrow:function(w,G){if(w=G.getPreviousSibling())for(G=w;G.isExpandable&&G.isExpanded&&G.hasChildren();)G=G.getChildren(),G=G[G.length-1];else if(w=G.getParent(),this.showRoot||w!==this.rootNode)G=w;G&&G.isTreeNode&&this.focusNode(G)},_onRightArrow:function(w,G){G.isExpandable&&!G.isExpanded?this._expandNode(G):G.hasChildren()&&(G=G.getChildren()[0])&&G.isTreeNode&&this.focusNode(G)},_onLeftArrow:function(w,G){G.isExpandable&&G.isExpanded?this._collapseNode(G):(w=G.getParent())&&w.isTreeNode&&
(this.showRoot||w!==this.rootNode)&&this.focusNode(w)},focusLastChild:function(){var w=this._getLast();w&&w.isTreeNode&&this.focusNode(w)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var w=this.rootNode;w.isExpanded;){var G=w.getChildren();if(!G.length)break;w=G[G.length-1]}return w},_getNext:function(w){if(w.isExpandable&&w.isExpanded&&w.hasChildren())return w.getChildren()[0];for(;w&&w.isTreeNode;){var G=w.getNextSibling();if(G)return G;
w=w.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(w,G){return c.isDescendant(w,G.expandoNode)||c.isDescendant(w,G.expandoNodeText)},_onNodePress:function(w,G){this.focusNode(w)},__click:function(w,G,R,T){var U=this.isExpandoNode(G.target,w);w.isExpandable&&(R||U)?this._onExpandoClick({node:w}):(this._publish("execute",{item:w.item,node:w,evt:G}),this[T](w.item,w,G),this.focusNode(w));G.stopPropagation();G.preventDefault()},_onClick:function(w,G){this.__click(w,G,this.openOnClick,
"onClick")},_onDblClick:function(w,G){this.__click(w,G,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(w){w=w.node;this.focusNode(w);w.isExpanded?this._collapseNode(w):this._expandNode(w)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(w){B.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(w)},_getRootOrFirstNode:function(){B.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(w){w._expandNodeDeferred&&delete w._expandNodeDeferred;if("Loading"!=w.state&&w.isExpanded){var G=w.collapse();this.onClose(w.item,w);this._state(w,!1);this._startPaint(G);return G}},_expandNode:function(w){if(w._expandNodeDeferred)return w._expandNodeDeferred;var G=this.model,R=w.item,T=this;w._loadDeferred||(w.markProcessing(),w._loadDeferred=new v,G.getChildren(R,function(U){w.unmarkProcessing();
w.setChildItems(U).then(function(){w._loadDeferred.resolve(U)})},function(U){console.error(T,": error loading "+w.label+" children: ",U);w._loadDeferred.reject(U)}));G=w._loadDeferred.then(b.hitch(this,function(){var U=w.expand();this.onOpen(w.item,w);this._state(w,!0);return U}));this._startPaint(G);return G},focusNode:function(w){for(var G=[],R=this.domNode;R&&R.tagName&&"IFRAME"!==R.tagName.toUpperCase();R=R.parentNode)G.push({domNode:R.contentWindow||R,scrollLeft:R.scrollLeft||0,scrollTop:R.scrollTop||
0});this.focusChild(w);this.defer(function(){for(var T=0,U=G.length;T<U;T++)G[T].domNode.scrollLeft=G[T].scrollLeft,G[T].domNode.scrollTop=G[T].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(w){var G=this.model.getIdentity(w);if(G=this._itemNodesMap[G]){var R=this.getLabel(w),T=this.getTooltip(w);x.forEach(G,function(U){U.set({item:w,label:R,tooltip:T});U._updateItemClasses(w)})}},_onItemChildrenChange:function(w,G){w=this.model.getIdentity(w);
(w=this._itemNodesMap[w])&&x.forEach(w,function(R){R.setChildItems(G)})},_onItemDelete:function(w){w=this.model.getIdentity(w);var G=this._itemNodesMap[w];G&&(x.forEach(G,function(R){this.dndController.removeTreeNode(R);var T=R.getParent();T&&T.removeChild(R);this.lastFocusedChild&&!c.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!c.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();R.destroyRecursive()},this),delete this._itemNodesMap[w])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var w=K(this.cookieName);w&&x.forEach(w.split(","),function(G){this._openedNodes[G]=!0},this)}},_state:function(w,G){if(!this.persist)return!1;var R=x.map(w.getTreePath(),function(T){return this.model.getIdentity(T)},this).join("/");if(1===arguments.length)return this._openedNodes[R];G?this._openedNodes[R]=!0:delete this._openedNodes[R];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var w=
[],G;for(G in this._openedNodes)w.push(G);K(this.cookieName,w.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!b.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(w){w&&e.setMarginBox(this.domNode,w);this._nodePixelIndent=e.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(b.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(w){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var G=b.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
n(w,G,G)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(w){return new M(w)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});u("dojo-bidi")&&O.extend({_setTextDirAttr:function(w){w&&this.textDir!=w&&(this._set("textDir",
w),this.rootNode.set("textDir",w))}});O.PathError=q("TreePathError");O._TreeNode=M;return O})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(x,E,K,I){return K("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(v){I.mixin(this,v);this.connects=[];v=this.store;if(!v.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
v.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([E.after(v,"onNew",I.hitch(this,"onNewItem"),!0),E.after(v,"onDelete",I.hitch(this,"onDeleteItem"),!0),E.after(v,"onSet",I.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var v;v=this.connects.pop();)v.remove()},getRoot:function(v,a){this.root?v(this.root):this.store.fetch({query:this.query,onComplete:I.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+c.length+
" items, but must return exactly one");this.root=c[0];v(this.root)}),onError:a})},mayHaveChildren:function(v){return x.some(this.childrenAttrs,function(a){return this.store.hasAttribute(v,a)},this)},getChildren:function(v,a,c){var d=this.store;if(d.isItemLoaded(v)){for(var e=[],l=0;l<this.childrenAttrs.length;l++){var q=d.getValues(v,this.childrenAttrs[l]);e=e.concat(q)}var p=0;this.deferItemLoadingUntilExpand||x.forEach(e,function(B){d.isItemLoaded(B)||p++});0==p?a(e):x.forEach(e,function(B,F){d.isItemLoaded(B)||
d.loadItem({item:B,onItem:function(b){e[F]=b;0==--p&&a(e)},onError:c})})}else{var u=I.hitch(this,arguments.callee);d.loadItem({item:v,onItem:function(B){u(B,a,c)},onError:c})}},isItem:function(v){return this.store.isItem(v)},fetchItemByIdentity:function(v){this.store.fetchItemByIdentity(v)},getIdentity:function(v){return this.store.getIdentity(v)},getLabel:function(v){return this.labelAttr?this.store.getValue(v,this.labelAttr):this.store.getLabel(v)},newItem:function(v,a,c){var d={parent:a,attribute:this.childrenAttrs[0]},
e;this.newItemIdAttr&&v[this.newItemIdAttr]?this.fetchItemByIdentity({identity:v[this.newItemIdAttr],scope:this,onItem:function(l){l?this.pasteItem(l,null,a,!0,c):(e=this.store.newItem(v,d))&&void 0!=c&&this.pasteItem(e,a,a,!1,c)}}):(e=this.store.newItem(v,d))&&void 0!=c&&this.pasteItem(e,a,a,!1,c)},pasteItem:function(v,a,c,d,e){var l=this.store,q=this.childrenAttrs[0];a&&x.forEach(this.childrenAttrs,function(u){if(l.containsValue(a,u,v)){if(!d){var B=x.filter(l.getValues(a,u),function(F){return F!=
v});l.setValues(a,u,B)}q=u}});if(c)if("number"==typeof e){var p=l.getValues(c,q).slice();p.splice(e,0,v);l.setValues(c,q,p)}else l.setValues(c,q,l.getValues(c,q).concat(v))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(v,a){a&&this.getChildren(a.item,I.hitch(this,function(c){this.onChildrenChange(a.item,c)}))},onDeleteItem:function(v){this.onDelete(v)},onSetItem:function(v,a){if(-1!=x.indexOf(this.childrenAttrs,a))this.getChildren(v,I.hitch(this,function(c){this.onChildrenChange(v,
c)}));else this.onChange(v)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(x,E,K,I,v){return E("dijit.tree.ForestStoreModel",v,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,c,d){a===
this.root?this.root.children?c(this.root.children):this.store.fetch({query:this.query,onComplete:I.hitch(this,function(e){this.root.children=e;c(e)}),onError:d}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var c=a.scope||K.global;a.onItem&&a.onItem.call(c,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===
this.root?this.root.label:this.inherited(arguments)},newItem:function(a,c,d){return c===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,c,d,e,l){if(c===this.root&&!e)this.onLeaveRoot(a);this.inherited(arguments,[a,c===this.root?null:c,d===this.root?null:d,e,l]);if(d===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,": item ",
a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:I.hitch(this,function(c){this.root.children=c;if(a.length!=c.length||x.some(a,function(d,e){return c[e]!=d}))this.onChildrenChange(this.root,c)})})},onNewItem:function(a,c){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){-1!=x.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,c,d,e){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(x,E,K,I,v,a,c,d,e,l,q){return E("dijit.tree._dndSelector",q,{constructor:function(){this.selection={};this.anchor=null;this.events.push(d(this.tree.domNode,e.press,I.hitch(this,"onMouseDown")),d(this.tree.domNode,e.release,I.hitch(this,"onMouseUp")),d(this.tree.domNode,e.move,I.hitch(this,
"onMouseMove")),d(this.tree.domNode,l.press,I.hitch(this,"onClickPress")),d(this.tree.domNode,l.release,I.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var p=[],u=this.selection,B;for(B in u)p.push(u[B]);return p},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(p,u){this.setSelection(this.getSelectedTreeNodes().concat([p]));u&&(this.anchor=p);return p},removeTreeNode:function(p){var u=
x.filter(this.getSelectedTreeNodes(),function(B){return!a.isDescendant(B.domNode,p.domNode)});this.setSelection(u);return p},isTreeNodeSelected:function(p){return p.id&&!!this.selection[p.id]},setSelection:function(p){var u=this.getSelectedTreeNodes();x.forEach(this._setDifference(u,p),I.hitch(this,function(B){B.setSelected(!1);this.anchor==B&&delete this.anchor;delete this.selection[B.id]}));x.forEach(this._setDifference(p,u),I.hitch(this,function(B){B.setSelected(!0);this.selection[B.id]=B}));this._updateSelectionProperties()},
_setDifference:function(p,u){x.forEach(u,function(B){B.__exclude__=!0});p=x.filter(p,function(B){return!B.__exclude__});x.forEach(u,function(B){delete B.__exclude__});return p},_updateSelectionProperties:function(){var p=this.getSelectedTreeNodes(),u=[],B=[];x.forEach(p,function(F){var b=F.getTreePath();B.push(F);u.push(b)},this);p=x.map(B,function(F){return F.item});this.tree._set("paths",u);this.tree._set("path",u[0]||[]);this.tree._set("selectedNodes",B);this.tree._set("selectedNode",B[0]||null);
this.tree._set("selectedItems",p);this.tree._set("selectedItem",p[0]||null)},onClickPress:function(p){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(p.target,this.current))){"mousedown"==p.type&&c.isLeft(p)&&p.preventDefault();var u="keydown"==p.type?this.tree.focusedChild:this.current;if(u){var B=v.getCopyKeyState(p),F=u.id;this.singular||p.shiftKey||!this.selection[F]?(this._doDeselect=!1,this.userSelect(u,B,p.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(p){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==p.type?this.tree.focusedChild:this.current,v.getCopyKeyState(p),p.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(p,u){if(p===u)return 0;if("sourceIndex"in document.documentElement)return p.sourceIndex-u.sourceIndex;if("compareDocumentPosition"in document.documentElement)return p.compareDocumentPosition(u)&2?1:-1;if(document.createRange){var B=doc.createRange();B.setStartBefore(p);
p=doc.createRange();p.setStartBefore(u);return B.compareBoundaryPoints(B.END_TO_END,p)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(p,u,B){if(this.singular)this.anchor==p&&u?this.selectNone():(this.setSelection([p]),this.anchor=p);else if(B&&this.anchor){u=this._compareNodes(this.anchor.rowNode,p.rowNode);B=this.anchor;0>u?u=B:(u=p,p=B);for(B=[];u!=p;)B.push(u),u=this.tree._getNext(u);B.push(p);this.setSelection(B)}else this.selection[p.id]&&
u?this.removeTreeNode(p):u?this.addTreeNode(p,!0):(this.setSelection([p]),this.anchor=p)},getItem:function(p){return{data:this.selection[p],type:["treeNode"]}},forInSelectedItems:function(p,u){u=u||K.global;for(var B in this.selection)p.call(u,this.getItem(B),B,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(x,E,K,I,v,a){return E("dijit.tree._dndContainer",null,{constructor:function(c,d){this.tree=
c;this.node=c.domNode;I.mixin(this,d);this.containerState="";K.add(this.node,"dojoDndContainer");this.events=[v(this.node,a.enter,I.hitch(this,"onOverEvent")),v(this.node,a.leave,I.hitch(this,"onOutEvent")),x.after(this.tree,"_onNodeMouseEnter",I.hitch(this,"onMouseOver"),!0),x.after(this.tree,"_onNodeMouseLeave",I.hitch(this,"onMouseOut"),!0),v(this.node,"dragstart, selectstart",function(e){e.preventDefault()})]},destroy:function(){for(var c;c=this.events.pop();)c.remove();this.node=this.parent=
null},onMouseOver:function(c){this.current=c},onMouseOut:function(){this.current=null},_changeState:function(c,d){var e="dojoDnd"+c;c=c.toLowerCase()+"State";K.replace(this.node,e+d,e+this[c]);this[c]=d},_addItemClass:function(c,d){K.add(c,"dojoDndItem"+d)},_removeItemClass:function(c,d){K.remove(c,"dojoDndItem"+d)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/Deferred","jimu/utils","jimu/ServiceBrowserRule"],function(x,E,K,I,v){var a={combineRules:function(c){var d=new v;E.forEach(c,function(e){E.forEach(e.leafTypes,function(l){0>d.leafTypes.indexOf(l)&&d.leafTypes.push(l)});E.forEach(e.serviceTypes,function(l){0>d.serviceTypes.indexOf(l)&&d.serviceTypes.push(l)})});d.getMatchedRule=function(e){var l=null;E.some(c,function(q){return q.isUrlContainsServiceType(e)?(l=q,!0):!1});return l};d.getItem=function(e){var l=null;return l=
(l=d.getMatchedRule(e))?l.getItem(e):d.defaultGetItem(e)};d.getSubItemUrls=function(e){var l=null;return l=(l=d.getMatchedRule(e))?l.getSubItemUrls(e):d.defaultGetSubItemUrls(e)};d.getIconImageName=function(e,l){var q="";if(e.url){var p=d.getMatchedRule(e.url);p&&"function"===typeof p.getIconImageName&&(q=p.getIconImageName(e,l))}return q};return d},getFeaturelayerServiceBrowserRule:function(c,d,e){c=x.clone(c);var l=["point","polyline","polygon"];x.isArrayLike(c)&&0<c.length?(c=E.filter(c,function(q){return 0<=
l.indexOf(q)}),0===c.length&&(c=l)):c=l;return a._getFeaturelayerServiceBrowserRule(c,d,e)},_getFeaturelayerServiceBrowserRule:function(c,d,e){return new v({types:c,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(l){var q=new K;this.isUrlEndWithServiceType(l,this.serviceTypes)?q=this.defaultGetItem(l):this.getRestInfo(l).then(x.hitch(this,function(p){p=this._getItemByLayerDefinition(l,
p);q.resolve(p)}),x.hitch(this,function(p){q.reject(p)}));return q},getSubItemUrls:function(l){var q=new K;return q=this.isUrlEndWithServiceType(l)?this._getSubUrlsByServiceUrl(l):this._getSubUrlsByGroupUrl(l)},getIconImageName:function(l,q){var p="";"MapServer"===l.type||"FeatureServer"===l.type?p=q?"mapserver_open.png":"mapserver_close.png":l.type===this._groupLayerType?p=q?"group_layer2.png":"group_layer1.png":l.type===this._featureLayerType?(l=I.getTypeByGeometryType(l.definition&&l.definition.geometryType),
"point"===l?p="point_layer1.png":"polyline"===l?p="line_layer1.png":"polygon"===l&&(p="polygon_layer1.png")):l.type===this._tableType?p="table.png":"root"===l.type&&this._currentUrl&&E.some(this.serviceTypes,x.hitch(this,function(u){return I.isStringEndWith(this._currentUrl,"/"+u)}))&&(p=q?"mapserver_open.png":"mapserver_close.png");return p},_getSubUrlsByServiceUrl:function(l){var q=new K;this.getRestInfo(l).then(x.hitch(this,function(p){var u=[];E.forEach(p.layers,x.hitch(this,function(B){0<=B.parentLayerId||
u.push(l+"/"+B.id)}));e&&E.forEach(p.tables,x.hitch(this,function(B){0<=B.parentLayerId||u.push(l+"/"+B.id)}));q.resolve(u)}),x.hitch(this,function(p){q.reject(p)}));return q},_getSubUrlsByGroupUrl:function(l){var q=new K;this.getRestInfo(l).then(x.hitch(this,function(p){var u=[];if(p.type===this._groupLayerType){var B=this._getServiceUrlByLayerUrl(l);u=E.map(p.subLayers||[],x.hitch(this,function(F){return B+"/"+F.id}))}q.resolve(u)}),x.hitch(this,function(p){q.reject(p)}));return q},_getItemByLayerDefinition:function(l,
q){var p=null,u=q.type;if(u===this._groupLayerType)p={name:q.name,type:u,url:l,definition:q};else if(u===this._featureLayerType||u===this._tableType){var B=!1;u===this._featureLayerType?B=this._validateEsriGeometryType(q.geometryType):u===this._tableType&&(B=!0);B&&(B=!1,(B=d?I.isFeaturelayerUrlSupportQuery(l,q.capabilities):!0)&&(p={name:q.name,type:u,url:l,definition:q}))}return p},_validateEsriGeometryType:function(l){l=I.getTypeByGeometryType(l);return 0<=this.types.indexOf(l)},_getServiceUrlByLayerUrl:function(l){for(var q=
"",p=0;p<this.serviceTypes.length;p++){var u=this.serviceTypes[p].toLowerCase(),B=l.toLowerCase().lastIndexOf("/"+u+"/");if(0<=B){q=l.slice(0,B+u.length+1);break}}return q}})},getGeocodeServiceBrowserRule:function(){return new v({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new v({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(c){var d=new K;this.isUrlEndWithServiceType(c)?d=this.defaultGetItem(c):this.getRestInfo(c).then(x.hitch(this,
function(e){d.resolve({name:e.displayName||e.name,type:"GPTask",url:c,definition:e})}),x.hitch(this,function(e){d.reject(e)}));return d},getSubItemUrls:function(c){var d=new K;this.isUrlEndWithServiceType(c)?this.getRestInfo(c).then(x.hitch(this,function(e){e=E.map(e.tasks||[],x.hitch(this,function(l){return c+"/"+l}));d.resolve(e)}),x.hitch(this,function(e){d.reject(e)})):d.resolve([]);return d},getIconImageName:function(c,d){d="";"GPServer"===c.type?d="toolbox.png":"GPTask"===c.type&&(d="tool.png");
return d}})},getImageServiceBrowserRule:function(c){return new v({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(d){var e=new K;this.isUrlEndWithServiceType(d)?this.defaultGetItem(d).then(x.hitch(this,function(l){c?I.isImageServiceSupportQuery(l.definition.capabilities)?e.resolve(l):e.resolve(null):e.resolve(l)}),x.hitch(this,function(l){e.reject(l)})):e.resolve(null);return e},getIconImageName:function(d,e){e="";"ImageServer"===d.type&&(e="image_layer.png");return e}})},
getQueryableServiceBrowserRule:function(){var c=a.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),d=a.getImageServiceBrowserRule(!0);return a.combineRules([c,d])}};return a})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(x,E,K,I,v,a,c){return x([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(d){E.mixin(this,d);E.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);E.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(d){return this.defaultGetItem(d)},getSubItemUrls:function(d){return this.defaultGetSubItemUrls(d)},getIconImageName:function(d,e){return""},defaultGetItem:function(d){var e=new I;d=d.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(d)){var l=d.split("/"),q=l[l.length-1],p=l[l.length-2];this.getRestInfo(d).then(E.hitch(this,function(u){e.resolve({name:p,type:q,url:d,definition:u})}),E.hitch(this,function(u){console.error(u);
e.reject({errorCode:"NETWORK_ERROR",error:u})}))}else e.resolve(null);return e},defaultGetSubItemUrls:function(d){d=new I;d.resolve([]);return d},getRestInfo:function(d){var e=new I;d=d.replace(/\/*$/g,"");var l=this._restInfoCache[d];if(l)e.resolve(l);else{l={url:d,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4};var q=c.findCredential(d);q&&q.token&&(l.content.token=q.token);a(l).then(E.hitch(this,function(p){this._restInfoCache[d]=p;e.resolve(p)}),function(p){e.reject(p)})}return e},
isServiceTypeSupported:function(d){d=d.toLowerCase();return K.some(this.serviceTypes,E.hitch(this,function(e){return e.toLowerCase()===d}))},isUrlEndWithServiceType:function(d){return K.some(this.serviceTypes,E.hitch(this,function(e){return v.isStringEndWith(d,"/"+e)}))},isUrlContainsServiceType:function(d){d=d.toLowerCase();return K.some(this.serviceTypes,E.hitch(this,function(e){e=e.toLowerCase();return 0<=d.indexOf("/"+e)}))}})})},"jimu/dijit/_GpServiceChooserContent":function(){define(["dojo/_base/declare",
"./_BasicServiceChooserContent","./GpServiceBrowser"],function(x,E,K){return x([E],{baseClass:"jimu-gp-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/myservice/GpServer","http://sampleserver6.arcgisonline.com/arcgis/rest/services/Elevation/ESRI_Elevation_World/GPServer/Viewshed"],_createServiceBrowser:function(I){return new K(I)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F){return x([E,K,I,a],{templateString:v,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=l.mixin({},window.jimuNls.common);this.nls=l.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
d.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(b){var m=new c;(this.url=b)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),m=this._onBtnValidateClick()):m.reject();return m},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?e.forEach(this._examples,l.hitch(this,function(m){d.create("div",{innerHTML:m,
"class":"example-url"},this.exampleTd)})):d.setStyle(this.exampleTr,"display","none");var b={multiple:this.multiple,_onTreeClick:l.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(b);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(p.after(this.urlInput,"validator",l.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(q(this.serviceBrowser,"error",l.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(b){},_validateUrl:function(b){b=b.replace(/\/*$/g,"");if((b=b.match(/\/rest\/services\/*(.*)/gi))&&0<b.length)if(b=b[0].replace(/\/rest\/services\/*/,"")){var m=b.split("/");if(1===m.length)return!0;if(2===m.length)return this.serviceBrowser.isServiceTypeSupported(m[1]);if(3<=m.length)return b=this.serviceBrowser.isServiceTypeSupported(m[1]),m=this.serviceBrowser.isServiceTypeSupported(m[2]),b||m}else return!0;else return!1},_afterUrlValidate:function(b){b&&
(b=this.urlInput.get("value"),b=this._validateUrl(b));b?d.removeClass(this.btnValidate,"jimu-state-disabled"):d.addClass(this.btnValidate,"jimu-state-disabled");return b},_onServiceBrowserError:function(b){this._showErrorMessage(b)},_showErrorMessage:function(b){b&&"string"===typeof b?(this.errorNode.innerHTML=b,d.addClass(this.errorSection,"visible")):d.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";d.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var b=new c;if(this.urlInput.validate()){var m=this.urlInput.get("value");this.serviceBrowser.setUrl(m).then(l.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.resolve()}),l.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.reject()}));this.emit("validate-click")}else b.reject();return b},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?d.removeClass(this.btnOk,"jimu-state-disabled"):
d.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var b=this.getSelectedItems();0<b.length&&this.emit("ok",b)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/PageUtils":function(){define([],function(){var x={};x.Orientation={Landscape:{Type:"Landscape",Text:window.jimuNls.report.landscape},Portrait:{Type:"Portrait",Text:window.jimuNls.report.portrait}};x.PageSizes={A0:{Height:46.8,Width:33.1,SizeName:window.jimuNls.report.a0,
MapLayout:"MAP_ONLY"},A1:{Height:33.1,Width:23.4,SizeName:window.jimuNls.report.a1,MapLayout:"MAP_ONLY"},A2:{Height:23.4,Width:16.5,SizeName:window.jimuNls.report.a2,MapLayout:"MAP_ONLY"},A3:{Height:16.5,Width:11.7,SizeName:window.jimuNls.report.a3,MapLayout:"A3"},A4:{Height:11.7,Width:8.3,SizeName:window.jimuNls.report.a4,MapLayout:"A4"},A5:{Height:8.3,Width:5.8,SizeName:window.jimuNls.report.a5,MapLayout:"MAP_ONLY"},Letter_ANSI_A:{Height:11,Width:8.5,SizeName:window.jimuNls.report.letter+" "+window.jimuNls.report.ansi_a,
MapLayout:"Letter ANSI A"},Tabloid_ANSI_B:{Height:17,Width:11,SizeName:window.jimuNls.report.tabloid+" "+window.jimuNls.report.ansi_b,MapLayout:"Tabloid ANSI B"},ANSI_C:{Height:22,Width:17,SizeName:window.jimuNls.report.ansi_c,MapLayout:"MAP_ONLY"},ANSI_D:{Height:34,Width:22,SizeName:window.jimuNls.report.ansi_d,MapLayout:"MAP_ONLY"},ANSI_E:{Height:44,Width:34,SizeName:window.jimuNls.report.ansi_e,MapLayout:"MAP_ONLY"},Legal:{Height:14,Width:8.5,SizeName:window.jimuNls.report.legal,MapLayout:"MAP_ONLY"},
Custom:window.jimuNls.common.custom};x.getPageSizeInPixels=function(E,K){return{Height:E.Height*K,Width:E.Width*K}};return x})},"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H,n,f,z,D,N,P){function L(C){return new n({command:C.name})}function y(C){return new n({buttonClass:H,command:C.name})}K=K("dijit.Editor",N,{plugins:null,extraPlugins:null,constructor:function(){q.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",f]);this._plugins=
[];this._editInterval=1E3*this.editActionInterval;if(p("ie")||p("trident")||p("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new I;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);q.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=v.getLocalization("dijit._editor",
"commands",this.lang);p("webkit")&&e.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new b({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));E.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);c.add(this.iframe.parentNode,"dijitEditorIFrameContainer");c.add(this.iframe,"dijitEditorIFrame");a.set(this.iframe,"allowTransparency",
!0);this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){E.forEach(this._plugins,function(C){C&&C.destroy&&C.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(C,Q){var S=q.isString(C)?{name:C}:q.isFunction(C)?{ctor:C}:C;if(!S.setEditor){var k={args:S,plugin:null,editor:this};S.name&&(n.registry[S.name]?k.plugin=n.registry[S.name](S):B.publish(P._scopeName+".Editor.getPlugin",k));if(!k.plugin)try{var g=
S.ctor||q.getObject(S.name)||x(S.name);g&&(k.plugin=new g(S))}catch(A){throw Error(this.id+": cannot find plugin ["+S.name+"]");}if(!k.plugin)throw Error(this.id+": cannot find plugin ["+S.name+"]");C=k.plugin}1<arguments.length?this._plugins[Q]=C:this._plugins.push(C);C.setEditor(this);q.isFunction(C.setToolbar)&&C.setToolbar(this.toolbar)},resize:function(C){C&&t.prototype.resize.apply(this,arguments)},layout:function(){var C=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+d.getPadBorderExtents(this.iframe.parentNode).h+
d.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=C+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(C){var Q,S=this.document.body,k=S.clientWidth,g=S.clientHeight,A=S.clientLeft,h=S.offsetWidth,r=S.offsetHeight,J=S.offsetLeft;/^rtl$/i.test(S.dir||"")?k<h&&C.x>k&&C.x<h&&(Q=!0):C.x<A&&C.x>J&&(Q=!0);Q||g<r&&C.y>g&&C.y<r&&(Q=!0);Q||(delete this._cursorToStart,delete this._savedSelection,"BODY"==C.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(C){this.customUndo&&this.endEditing(!0);"BODY"!=C.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(C){this._inEditing||(this._inEditing=!0,this._beginEditing(C));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(C){if(!this.customUndo||
"undo"!=C&&"redo"!=C){this.customUndo&&(this.endEditing(),this._beginEditing());var Q=this.inherited(arguments);this.customUndo&&this._endEditing();return Q}return this[C]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(C){try{var Q=this.document.execCommand(C,!1,null);if(p("webkit")&&!Q)throw{};}catch(S){Q=u.substitute,alert(Q(this.commands.systemShortcut,
[this.commands[C],Q(this.commands[p("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[C]])])),Q=!1}return Q},queryCommandEnabled:function(C){return!this.customUndo||"undo"!=C&&"redo"!=C?this.inherited(arguments):"undo"==C?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(C){var Q=C.mark,S=C.mark;C=C.isCollapsed;var k;if(S)if(9>p("ie")||9===p("ie")&&p("quirks"))if(q.isArray(S))Q=[],E.forEach(S,function(h){Q.push(D.getNode(h,this.editNode))},this),this.selection.moveToBookmark({mark:Q,
isCollapsed:C});else{if(S.startContainer&&S.endContainer&&(k=D.getSelection(this.window))&&k.removeAllRanges){k.removeAllRanges();C=D.create(this.window);var g=D.getNode(S.startContainer,this.editNode);var A=D.getNode(S.endContainer,this.editNode);g&&A&&(C.setStart(g,S.startOffset),C.setEnd(A,S.endOffset),k.addRange(C))}}else(k=D.getSelection(this.window))&&k.removeAllRanges&&(k.removeAllRanges(),C=D.create(this.window),g=D.getNode(S.startContainer,this.editNode),A=D.getNode(S.endContainer,this.editNode),
g&&A&&(C.setStart(g,S.startOffset),C.setEnd(A,S.endOffset),k.addRange(C)))},_changeToStep:function(C,Q){this.setValue(Q.text);(C=Q.bookmark)&&this._moveToBookmark(C)},undo:function(){var C=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var Q=this._steps.pop();Q&&0<this._steps.length&&(this.focus(),this._changeToStep(Q,this._steps[this._steps.length-1]),this._undoedSteps.push(Q),this.onDisplayChanged(),delete this._undoRedoActive,C=!0);delete this._undoRedoActive}return C},
redo:function(){var C=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var Q=this._undoedSteps.pop();Q&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],Q),this._steps.push(Q),this.onDisplayChanged(),C=!0);delete this._undoRedoActive}return C},endEditing:function(C){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(C),this._inEditing=!1)},_getBookmark:function(){var C=this.selection.getBookmark(),
Q=[];if(C&&C.mark){var S=C.mark;if(9>p("ie")||9===p("ie")&&p("quirks")){var k=D.getSelection(this.window);if(q.isArray(S))E.forEach(C.mark,function(A){Q.push(D.getIndex(A,this.editNode).o)},this),C.mark=Q;else if(k){var g;k.rangeCount&&(g=k.getRangeAt(0));C.mark=g?g.cloneRange():this.selection.getBookmark()}}try{C.mark&&C.mark.startContainer&&(Q=D.getIndex(C.mark.startContainer,this.editNode).o,C.mark={startContainer:Q,startOffset:C.mark.startOffset,endContainer:C.mark.endContainer===C.mark.startContainer?
Q:D.getIndex(C.mark.endContainer,this.editNode).o,endOffset:C.mark.endOffset})}catch(A){C.mark=null}}return C},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:z.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var C=z.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:C,bookmark:this._getBookmark()})},onKeyDown:function(C){p("ie")||this.iframe||C.keyCode!=l.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var Q=
C.keyCode;if(C.ctrlKey&&!C.shiftKey&&!C.altKey){if(90==Q||122==Q){C.stopPropagation();C.preventDefault();this.undo();return}if(89==Q||121==Q){C.stopPropagation();C.preventDefault();this.redo();return}}this.inherited(arguments);switch(Q){case l.ENTER:case l.BACKSPACE:case l.DELETE:this.beginEditing();break;case 88:case 86:if(C.ctrlKey&&!C.altKey&&!C.metaKey){this.endEditing();88==C.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!C.ctrlKey&&!C.altKey&&
!C.metaKey&&(C.keyCode<l.F1||C.keyCode>l.F15)){this.beginEditing();break}case l.ALT:this.endEditing();break;case l.UP_ARROW:case l.DOWN_ARROW:case l.LEFT_ARROW:case l.RIGHT_ARROW:case l.HOME:case l.END:case l.PAGE_UP:case l.PAGE_DOWN:this.endEditing(!0);case l.CTRL:case l.SHIFT:case l.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(C){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(C){this.customUndo?this.isClosed?this.setValue(C):(this.beginEditing(),C||(C="\x26#160;"),this.setValue(C),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(C){this.setValueDeferred.then(q.hitch(this,function(){!this.disabled&&C||!this._buttonEnabledPlugins&&C?
E.forEach(this._plugins,function(Q){Q.set("disabled",!0)}):this.disabled&&!C&&E.forEach(this._plugins,function(Q){Q.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&(e.set(this.document.body,"color",e.get(this.iframe,"color")),e.set(this.document.body,"background-color",e.get(this.iframe,"background-color")))}catch(C){}}});q.mixin(n.registry,{undo:L,redo:L,cut:L,copy:L,paste:L,insertOrderedList:L,insertUnorderedList:L,
indent:L,outdent:L,justifyCenter:L,justifyFull:L,justifyLeft:L,justifyRight:L,"delete":L,selectAll:L,removeFormat:L,unlink:L,insertHorizontalRule:L,bold:y,italic:y,underline:y,strikethrough:y,subscript:y,superscript:y,"|":function(){return new n({setEditor:function(C){this.editor=C;this.button=new m({ownerDocument:C.ownerDocument})}})}});return K})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(x,E,K,I,v,a,c,d){K("dijit-legacy-requires")&&v(0,function(){x(["dijit/ToolbarSeparator"])});return E("dijit.Toolbar",[a,d,c],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(x,E,K,I){return x("dijit.ToolbarSeparator",[K,I],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);E.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(x,E,K,I,v){E=E("dijit._editor._Plugin",I,{constructor:function(a){this.params=
a||{};K.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:v,disabled:!1,getLabel:function(a){return this.editor.commands[a]},_initButton:function(){if(this.command.length){var a=this.getLabel(this.command),c=this.editor,d=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(a=K.mixin({label:a,ownerDocument:c.ownerDocument,dir:c.dir,
lang:c.lang,showLabel:!1,iconClass:d,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete a.name,this.button=new this.buttonClass(a))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(a,c,d){this.own(x.connect(a,c,this,d))},updateState:function(){var a=this.editor,c=this.command;if(a&&a.isLoaded&&c.length){var d=this.get("disabled");if(this.button)try{var e=
a._implCommand(c);var l=!d&&(this[e]?this[e](c):a.queryCommandEnabled(c));this.enabled!==l&&(this.enabled=l,this.button.set("disabled",!l));if(l&&"boolean"==typeof this.button.checked){var q=a.queryCommandState(c);this.checked!==q&&(this.checked=q,this.button.set("checked",a.queryCommandState(c)))}}catch(p){console.log(p)}}},setEditor:function(a){this.editor=a;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",K.hitch(this.editor,
"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",K.hitch(this,"updateState")))},setToolbar:function(a){this.button&&a.addChild(this.button)},set:function(a,c){if("object"===typeof a){for(var d in a)this.set(d,a[d]);return this}d=this._getAttrNames(a);if(this[d.s])var e=this[d.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(a,c);return e||this},get:function(a){var c=this._getAttrNames(a);
return this[c.g]?this[c.g]():this[a]},_setDisabledAttr:function(a){this._set("disabled",a);this.updateState()},_getAttrNames:function(a){var c=this._attrPairNames;if(c[a])return c[a];var d=a.charAt(0).toUpperCase()+a.substr(1);return c[a]={s:"_set"+d+"Attr",g:"_get"+d+"Attr"}},_set:function(a,c){this[a]=c}});E.registry={};return E})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q){return x("dijit._editor.plugins.EnterKeyHandling",e,{blockNodeForEnter:"BR",constructor:function(p){p&&("blockNodeForEnter"in p&&(p.blockNodeForEnter=p.blockNodeForEnter.toUpperCase()),I.mixin(this,p))},setEditor:function(p){if(this.editor!==p)if(this.editor=p,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,p.onLoadDeferred.then(I.hitch(this,function(B){this.own(v(p.document,"keydown",I.hitch(this,function(F){if(F.keyCode==K.ENTER){var b=I.mixin({},F);b.shiftKey=
!0;this.handleEnterKey(b)||(F.stopPropagation(),F.preventDefault())}})));9<=a("ie")&&10>=a("ie")&&this.own(v(p.document,"paste",I.hitch(this,function(F){setTimeout(I.hitch(this,function(){var b=this.editor.document.selection.createRange();b.move("character",-1);b.select();b.move("character",1);b.select()}),0)})));return B}));else if(this.blockNodeForEnter){var u=I.hitch(this,"handleEnterKey");p.addKeyHandler(13,0,0,u);p.addKeyHandler(13,0,1,u);this.own(this.editor.on("KeyPressed",I.hitch(this,"onKeyPressed")))}},
onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var p=this.editor.selection.getAncestorElement("LI");if(p){a("mozilla")&&"LI"==p.parentNode.parentNode.nodeName&&(p=p.parentNode.parentNode);var u=p.firstChild;!u||1!=u.nodeType||"UL"!=u.nodeName&&"OL"!=u.nodeName||(p.insertBefore(u.ownerDocument.createTextNode("\u00a0"),u),u=q.create(this.editor.window),u.setStart(p.firstChild,0),p=q.getSelection(this.editor.window,!0),p.removeAllRanges(),p.addRange(u))}else l.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter),(p=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(p.innerHTML=this.bogusHtmlContent,9>=a("ie")&&(p=this.editor.document.selection.createRange(),p.move("character",-1),p.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",
blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(p){var u,B=this.editor.document,F;if(p.shiftKey){p=this.editor.selection.getParentElement();if(u=q.getAncestor(p,this.blockNodes)){if("LI"==u.tagName)return!0;p=q.getSelection(this.editor.window);var b=p.getRangeAt(0);b.collapsed||(b.deleteContents(),p=q.getSelection(this.editor.window),b=p.getRangeAt(0));if(q.atBeginningOfContainer(u,b.startContainer,b.startOffset)){var m=B.createElement("br");b=q.create(this.editor.window);u.insertBefore(m,
u.firstChild);b.setStartAfter(m);p.removeAllRanges();p.addRange(b)}else if(q.atEndOfContainer(u,b.startContainer,b.startOffset))b=q.create(this.editor.window),m=B.createElement("br"),u.appendChild(m),u.appendChild(B.createTextNode("\u00a0")),b.setStart(u.lastChild,0),p.removeAllRanges(),p.addRange(b);else{if((F=b.startContainer)&&3==F.nodeType){var t=F.nodeValue;var H=B.createTextNode(t.substring(0,b.startOffset));var n=B.createTextNode(t.substring(b.startOffset));u=B.createElement("br");""==n.nodeValue&&
a("webkit")&&(n=B.createTextNode("\u00a0"));E.place(H,F,"after");E.place(u,H,"after");E.place(n,u,"after");E.destroy(F);b=q.create(this.editor.window);b.setStart(n,0);p.removeAllRanges();p.addRange(b);return!1}return!0}}else p=q.getSelection(this.editor.window),p.rangeCount?(b=p.getRangeAt(0))&&b.startContainer&&(b.collapsed||(b.deleteContents(),p=q.getSelection(this.editor.window),b=p.getRangeAt(0)),(F=b.startContainer)&&3==F.nodeType?(u=b.startOffset,F.length<u&&(n=this._adjustNodeAndOffset(F,u),
F=n.node,u=n.offset),t=F.nodeValue,H=B.createTextNode(t.substring(0,u)),n=B.createTextNode(t.substring(u)),u=B.createElement("br"),n.length||(n=B.createTextNode("\u00a0")),H.length?E.place(H,F,"after"):H=F,E.place(u,H,"after"),E.place(n,u,"after"),E.destroy(F)):(0<=b.startOffset&&(m=F.childNodes[b.startOffset]),u=B.createElement("br"),n=B.createTextNode("\u00a0"),m?(E.place(u,m,"before"),E.place(n,u,"after")):(F.appendChild(u),F.appendChild(n))),b=q.create(this.editor.window),b.setStart(n,0),b.setEnd(n,
n.length),p.removeAllRanges(),p.addRange(b),this.editor.selection.collapse(!0)):l.prototype.execCommand.call(this.editor,"inserthtml","\x3cbr\x3e");return!1}var f=!0;p=q.getSelection(this.editor.window);b=p.getRangeAt(0);b.collapsed||(b.deleteContents(),p=q.getSelection(this.editor.window),b=p.getRangeAt(0));m=q.getBlockAncestor(b.endContainer,null,this.editor.editNode);var z=m.blockNode;if(this._checkListLater=z&&("LI"==z.nodeName||"LI"==z.parentNode.nodeName))return a("mozilla")&&(this._pressedEnterInBlock=
z),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(z.innerHTML)&&(z.innerHTML="",a("webkit")&&(b=q.create(this.editor.window),b.setStart(z,0),p.removeAllRanges(),p.addRange(b)),this._checkListLater=!1),!0;if(!m.blockNode||m.blockNode===this.editor.editNode){try{l.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(D){}m={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),
blockContainer:this.editor.editNode};if(m.blockNode){if(m.blockNode!=this.editor.editNode&&!(m.blockNode.textContent||m.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(m.blockNode),!1}else m.blockNode=this.editor.editNode;p=q.getSelection(this.editor.window);b=p.getRangeAt(0)}z=B.createElement(this.blockNodeForEnter);z.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(m.blockNode);n=b.endOffset;f=b.endContainer;f.length<n&&(n=this._adjustNodeAndOffset(f,n),f=
n.node,n=n.offset);if(q.atEndOfContainer(m.blockNode,f,n))m.blockNode===m.blockContainer?m.blockNode.appendChild(z):E.place(z,m.blockNode,"after"),f=!1,b=q.create(this.editor.window),b.setStart(z,0),p.removeAllRanges(),p.addRange(b),this.editor.height&&d.scrollIntoView(z);else if(q.atBeginningOfContainer(m.blockNode,b.startContainer,b.startOffset))E.place(z,m.blockNode,m.blockNode===m.blockContainer?"first":"before"),z.nextSibling&&this.editor.height&&(b=q.create(this.editor.window),b.setStart(z.nextSibling,
0),p.removeAllRanges(),p.addRange(b),d.scrollIntoView(z.nextSibling)),f=!1;else{m.blockNode===m.blockContainer?m.blockNode.appendChild(z):E.place(z,m.blockNode,"after");f=!1;m.blockNode.style&&z.style&&m.blockNode.style.cssText&&(z.style.cssText=m.blockNode.style.cssText);if((F=b.startContainer)&&3==F.nodeType){n=b.endOffset;F.length<n&&(n=this._adjustNodeAndOffset(F,n),F=n.node,n=n.offset);t=F.nodeValue;H=B.createTextNode(t.substring(0,n));n=B.createTextNode(t.substring(n,t.length));E.place(H,F,
"before");E.place(n,F,"after");E.destroy(F);for(b=H.parentNode;b!==m.blockNode;){t=B.createElement(b.tagName);b.style&&t.style&&b.style.cssText&&(t.style.cssText=b.style.cssText);"FONT"===b.tagName&&(b.color&&(t.color=b.color),b.face&&(t.face=b.face),b.size&&(t.size=b.size));for(;n;)F=n.nextSibling,t.appendChild(n),n=F;E.place(t,b,"after");H=b;n=t;b=b.parentNode}if(1==n.nodeType||3==n.nodeType&&n.nodeValue)z.innerHTML="";for(H=n;n;)F=n.nextSibling,z.appendChild(n),n=F}b=q.create(this.editor.window);
B=H;if("BR"!==this.blockNodeForEnter){for(;B;)u=B,B=F=B.firstChild;u&&u.parentNode?(z=u.parentNode,b.setStart(z,0),p.removeAllRanges(),p.addRange(b),this.editor.height&&d.scrollIntoView(z),a("mozilla")&&(this._pressedEnterInBlock=m.blockNode)):f=!0}else b.setStart(z,0),p.removeAllRanges(),p.addRange(b),this.editor.height&&d.scrollIntoView(z),a("mozilla")&&(this._pressedEnterInBlock=m.blockNode)}return f},_adjustNodeAndOffset:function(p,u){for(;p.length<u&&p.nextSibling&&3==p.nextSibling.nodeType;)u-=
p.length,p=p.nextSibling;return{node:p,offset:u}},removeTrailingBr:function(p){if(p=/P|DIV|LI/i.test(p.tagName)?p:this.editor.selection.getParentOfType(p,["P","DIV","LI"]))p.lastChild&&(1<p.childNodes.length&&3==p.lastChild.nodeType&&/^[\s\xAD]*$/.test(p.lastChild.nodeValue)||"BR"==p.lastChild.tagName)&&E.destroy(p.lastChild),p.childNodes.length||(p.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H,n,f,z,D,N,P,L,y,C,Q){var S=K("dijit._editor.RichText",[D,N],{constructor:function(k){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};k&&u.isString(k.value)&&(this.value=k.value);this.onLoadDeferred=new I},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[u.trim,u.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);m("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));m("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(m("ie")||m("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[u.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[u.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);H.publish(Q._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var k=u.hitch(this,function(h,r){return function(){return!this.execCommand(h,r)}}),g={b:k("bold"),i:k("italic"),u:k("underline"),a:k("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:k("formatblock",
"h1"),2:k("formatblock","h2"),3:k("formatblock","h3"),4:k("formatblock","h4"),"\\":k("insertunorderedlist")};m("ie")||(g.Z=k("redo"));for(var A in g)this.addKeyHandler(A,!0,!1,g[A])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(S._editorCommandsLocalized)this._local2NativeFormatNames=S._local2NativeFormatNames,this._native2LocalFormatNames=S._native2LocalFormatNames;else{S._editorCommandsLocalized=!0;S._local2NativeFormatNames={};
S._native2LocalFormatNames={};this._local2NativeFormatNames=S._local2NativeFormatNames;this._native2LocalFormatNames=S._native2LocalFormatNames;for(var k="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),g="",A,h=0;A=k[h++];)g="l"!==A.charAt(1)?g+("\x3c"+A+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+A+"\x3e\x3cbr/\x3e"):g+("\x3c"+A+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+A+"\x3e\x3cbr/\x3e");var r=d.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:g});this.ownerDocumentBody.appendChild(r);
k=u.hitch(this,function(){for(var J=r.firstChild;J;)try{this.selection.selectElement(J.firstChild);var M=J.tagName.toLowerCase();this._local2NativeFormatNames[M]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[M]]=M;J=J.nextSibling.nextSibling}catch(O){}d.destroy(r)});this.defer(k)}},open:function(k){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new I;this.isClosed||this.close();H.publish(Q._scopeName+"._editor.RichText::open",
this);1===arguments.length&&k.nodeName&&(this.domNode=k);var g=this.domNode;if(u.isString(this.value)){var A=this.value;g.innerHTML=""}else if(g.nodeName&&"textarea"==g.nodeName.toLowerCase()){var h=this.textarea=g;this.name=h.name;A=h.value;g=this.domNode=this.ownerDocument.createElement("div");g.setAttribute("widgetId",this.id);h.removeAttribute("widgetId");g.cssText=h.cssText;g.className+=" "+h.className;d.place(g,h,"before");var r=u.hitch(this,function(){l.set(h,{display:"block",position:"absolute",
top:"-1000px"});if(m("ie")){var w=h.style;this.__overflow=w.overflow;w.overflow="hidden"}});m("ie")?this.defer(r,10):r();if(h.form){var J=h.value;this.reset=function(){this.getValue()!==J&&this.replaceValue(J)};B(h.form,"submit",u.hitch(this,function(){a.set(h,"disabled",this.disabled);h.value=this.getValue()}))}}else A=y.getChildrenHtml(g),g.innerHTML="";this.value=A;g.nodeName&&"LI"===g.nodeName&&(g.innerHTML=" \x3cbr\x3e");this.header=g.ownerDocument.createElement("div");g.appendChild(this.header);
this.editingArea=g.ownerDocument.createElement("div");g.appendChild(this.editingArea);this.footer=g.ownerDocument.createElement("div");g.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!E.useXDomain||E.allowXdRichTextSave)){if((A=v.byId(Q._scopeName+"._editor.RichText.value"))&&""!==A.value){r=A.value.split(this._SEPARATOR);for(var M=0,O;O=r[M++];)if(O=O.split(this._NAME_CONTENT_SEP),O[0]===this.name){this.value=O[1];r=r.splice(M,1);A.value=r.join(this._SEPARATOR);
break}}S._globalSaveHandler||(S._globalSaveHandler={},n.addOnUnload(function(){for(var w in S._globalSaveHandler){var G=S._globalSaveHandler[w];u.isFunction(G)&&G()}}));S._globalSaveHandler[this.id]=u.hitch(this,"_saveContent")}this.isClosed=!1;A=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");A.id=this.id+"_iframe";A.style.border="none";A.style.width="100%";this._layoutMode?A.style.height="100%":7<=m("ie")?(this.height&&(A.style.height=this.height),this.minHeight&&(A.style.minHeight=
this.minHeight)):A.style.height=this.height?this.height:this.minHeight;A.frameBorder=0;A._loadFunc=u.hitch(this,function(w){this.window=w;this.document=w.document;this.selection=new P.SelectionManager(w);m("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});r=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");r=11>m("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+r+"');document.close()":"javascript: '"+
r+"'";this.editingArea.appendChild(A);A.src=r;"LI"===g.nodeName&&(g.lastChild.style.marginTop="-1.2em");c.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var k=l.getComputedStyle(this.domNode);if(this["aria-label"])var g=this["aria-label"];else{var A=F('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||v.byId(this["aria-labelledby"],this.ownerDocument);A&&(g=A.textContent||A.innerHTML||"")}A="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(g?" aria-label\x3d'"+t.escape(g)+"'":"")+"\x3e\x3c/div\x3e";var h=[k.fontWeight,k.fontSize,k.fontFamily].join(" "),r=k.lineHeight;r=0<=r.indexOf("px")?parseFloat(r)/parseFloat(k.fontSize):0<=r.indexOf("em")?parseFloat(r):"normal";var J="",M=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(O){O=O.replace(/^;/ig,"")+";";var w=O.split(":")[0];if(w){w=u.trim(w);w=w.toLowerCase();var G,R="";for(G=0;G<w.length;G++){var T=w.charAt(G);switch(T){case "-":G++,T=w.charAt(G).toUpperCase();default:R+=
T}}l.set(M.domNode,R,"")}J+=O+";"});this.iframe.setAttribute("title",g);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||q.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",g?"\x3ctitle\x3e"+t.escape(g)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",h,";\n",this.height||m("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",r,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",m("ie")||m("trident")||m("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",g?" aria-label\x3d'"+t.escape(g)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+J+"'\x3e",A,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var k=[];this.styleSheets&&(k=this.styleSheets.split(";"),this.styleSheets=
"");k=k.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var g="",A=0,h,r=z.get(this.ownerDocument);h=k[A++];)h=(new f(r.location,h)).toString(),this.editingAreaStyleSheets.push(h),g+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+h+'"/\x3e';return g},addStyleSheet:function(k){var g=k.toString(),A=z.get(this.ownerDocument);if("."===g.charAt(0)||"/"!==g.charAt(0)&&!k.host)g=(new f(A.location,g)).toString();-1<x.indexOf(this.editingAreaStyleSheets,g)||(this.editingAreaStyleSheets.push(g),
this.onLoadDeferred.then(u.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(g);else{var h=this.document.getElementsByTagName("head")[0],r=this.document.createElement("link");r.rel="stylesheet";r.type="text/css";r.href=g;h.appendChild(r)}})))},removeStyleSheet:function(k){var g=k.toString(),A=z.get(this.ownerDocument);if("."===g.charAt(0)||"/"!==g.charAt(0)&&!k.host)g=(new f(A.location,g)).toString();k=x.indexOf(this.editingAreaStyleSheets,g);-1!==k&&(delete this.editingAreaStyleSheets[k],
F('link[href\x3d"'+g+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(k){k=!!k;this._set("disabled",k);if(this.isLoaded){var g=m("ie")&&(this.isLoaded||!this.focusOnLoad);g&&(this.editNode.unselectable="on");this.editNode.contentEditable=!k;this.editNode.tabIndex=k?"-1":this.tabIndex;g&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(m("mozilla")&&!k&&this._mozSettingProps){k=this._mozSettingProps;for(var A in k)if(k.hasOwnProperty(A))try{this.document.execCommand(A,
!1,k[A])}catch(h){}}this._disabledOK=!0}},onLoad:function(k){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=C.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var g=this;this.beforeIframeNode=d.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=d.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){g.editNode.focus()};this.focusNode=
this.editNode;var A=this.events.concat(this.captureEvents),h=this.iframe?this.document:this.editNode;this.own.apply(this,x.map(A,function(r){var J=r.toLowerCase().replace(/^on/,"");return B(h,J,u.hitch(this,r))},this));this.own(B(h,"mouseup",u.hitch(this,"onClick")));m("ie")&&(this.own(B(this.document,"mousedown",u.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);m("webkit")&&(this._webkitListener=this.own(B(this.document,"mouseup",u.hitch(this,"onDisplayChanged")))[0],this.own(B(this.document,
"mousedown",u.hitch(this,function(r){r=r.target;!r||r!==this.document.body&&r!==this.document||this.defer("placeCursorAtEnd")}))));if(m("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(r){}this.isLoaded=!0;this.set("disabled",this.disabled);A=u.hitch(this,function(){this.setValue(k);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&b(u.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(A):A()},onKeyDown:function(k){if(k.keyCode===p.SHIFT||k.keyCode===p.ALT||k.keyCode===p.META||k.keyCode===p.CTRL)return!0;k.keyCode===p.TAB&&this.isTabIndent&&(k.stopPropagation(),k.preventDefault(),this.queryCommandEnabled(k.shiftKey?"outdent":"indent")&&this.execCommand(k.shiftKey?"outdent":"indent"));if(k.keyCode==p.TAB&&!this.isTabIndent&&!k.ctrlKey&&!k.altKey)return k.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>m("ie")&&k.keyCode===p.BACKSPACE&&"Control"===this.document.selection.type&&(k.stopPropagation(),k.preventDefault(),this.execCommand("delete"));m("ff")&&(k.keyCode===p.PAGE_UP||k.keyCode===p.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&k.preventDefault();var g=this._keyHandlers[k.keyCode],A=arguments;g&&!k.altKey&&x.some(g,function(h){if(!(h.shift^k.shiftKey||h.ctrl^(k.ctrlKey||k.metaKey)))return h.handler.apply(this,A)||k.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(k){q.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",k)},_setValueAttr:function(k){this.setValue(k)},_setDisableSpellCheckAttr:function(k){this.document?a.set(this.document.body,"spellcheck",!k):this.onLoadDeferred.then(u.hitch(this,function(){a.set(this.document.body,"spellcheck",!k)}));this._set("disableSpellCheck",k)},addKeyHandler:function(k,g,A,h){"string"==
typeof k&&(k=k.toUpperCase().charCodeAt(0));u.isArray(this._keyHandlers[k])||(this._keyHandlers[k]=[]);this._keyHandlers[k].push({shift:A||!1,ctrl:g||!1,handler:h})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(k){this.onDisplayChanged(k)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(k){(m("ie")||m("trident"))&&this.defer(function(){C.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var g=this.getValue(!0);if(g!==this.value)this.onChange(g);
this._set("value",g)},_onFocus:function(k){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!m("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>m("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(k,g){k=k.toLowerCase();"formatblock"===k?m("safari")&&void 0===g&&(k="heading"):"hilitecolor"!==k||m("mozilla")||(k="backcolor");return k},_implCommand:function(k){return"_"+this._normalizeCommand(k)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(k){var g=this._qcaCache[k];return void 0!==g?g:this._qcaCache[k]=this._queryCommandAvailable(k)},_queryCommandAvailable:function(k){switch(k.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return m("ie")||m("trident")||m("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!m("webkit");default:return!1}},execCommand:function(k,g){this.focused&&this.focus();k=this._normalizeCommand(k,g);if(void 0!==g){if("heading"===k)throw Error("unimplemented");"formatblock"===
k&&(m("ie")||m("trident"))&&(g="\x3c"+g+"\x3e")}var A="_"+k+"Impl";if(this[A])var h=this[A](g);else if((g=1<arguments.length?g:null)||"createlink"!==k)h=this.document.execCommand(k,!1,g);this.onDisplayChanged();return h},queryCommandEnabled:function(k){if(this.disabled||!this._disabledOK)return!1;k=this._normalizeCommand(k);var g=this._implCommand(k);return this[g]?this[g](k):this._browserQueryCommandEnabled(k)},queryCommandState:function(k){if(this.disabled||!this._disabledOK)return!1;k=this._normalizeCommand(k);
try{return this.document.queryCommandState(k)}catch(g){return!1}},queryCommandValue:function(k){if(this.disabled||!this._disabledOK)return!1;k=this._normalizeCommand(k);if(m("ie")&&"formatblock"===k)k=this._native2LocalFormatNames[this.document.queryCommandValue(k)];else if(m("mozilla")&&"hilitecolor"===k){try{var g=this.document.queryCommandValue("styleWithCSS")}catch(A){g=!1}this.document.execCommand("styleWithCSS",!1,!0);k=this.document.queryCommandValue(k);this.document.execCommand("styleWithCSS",
!1,g)}else k=this.document.queryCommandValue(k);return k},_sCall:function(k,g){return this.selection[k].apply(this.selection,g)},placeCursorAtStart:function(){this.focus();var k=!1;if(m("mozilla"))for(var g=this.editNode.firstChild;g;){if(3===g.nodeType){if(0<g.nodeValue.replace(/^\s+|\s+$/g,"").length){k=!0;this.selection.selectElement(g);break}}else if(1===g.nodeType){k=!0;var A=g.tagName?g.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(A)?this.selection.selectElement(g):
this.selection.selectElementChildren(g);break}g=g.nextSibling}else k=!0,this.selection.selectElementChildren(this.editNode);k&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var k=!1;if(m("mozilla"))for(var g=this.editNode.lastChild;g;){if(3===g.nodeType){if(0<g.nodeValue.replace(/^\s+|\s+$/g,"").length){k=!0;this.selection.selectElement(g);break}}else if(1===g.nodeType){k=!0;this.selection.selectElement(g.lastChild||g);break}g=g.previousSibling}else k=!0,this.selection.selectElementChildren(this.editNode);
k&&this.selection.collapse(!1)},getValue:function(k){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,k):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(k){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){k=this._preFilterContent(k);var g=this.isClosed?this.domNode:this.editNode;g.innerHTML=k;this._preDomFilterContent(g)}else this.textarea.value=k;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(u.hitch(this,function(){this.setValue(k)}))},replaceValue:function(k){this.isClosed?this.setValue(k):this.window&&this.window.getSelection&&!m("mozilla")?this.setValue(k):this.window&&this.window.getSelection?(k=this._preFilterContent(k),this.execCommand("selectall"),this.execCommand("inserthtml",k),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(k);this._set("value",this.getValue(!0))},_preFilterContent:function(k){var g=
k;x.forEach(this.contentPreFilters,function(A){A&&(g=A(g))});return g},_preDomFilterContent:function(k){k=k||this.editNode;x.forEach(this.contentDomPreFilters,function(g){g&&u.isFunction(g)&&g(k)},this)},_postFilterContent:function(k,g){if(u.isString(k))var A=k;else k=k||this.editNode,this.contentDomPostFilters.length&&(g&&(k=u.clone(k)),x.forEach(this.contentDomPostFilters,function(h){k=h(k)})),A=y.getChildrenHtml(k);u.trim(A.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(A="");x.forEach(this.contentPostFilters,
function(h){A=h(A)});return A},_saveContent:function(){var k=v.byId(Q._scopeName+"._editor.RichText.value");k&&(k.value&&(k.value+=this._SEPARATOR),k.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(k,g){k=k.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");g||(k=k.replace(/'/gm,"\x26#39;"));return k},getNodeHtml:function(k){q.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return y.getNodeHtml(k)},getNodeChildrenHtml:function(k){q.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return y.getChildrenHtml(k)},close:function(k){if(!this.isClosed){arguments.length||(k=!0);k&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);m("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var g=this.textarea.style;g.position="";g.left=g.top="";m("ie")&&(g.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;d.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;c.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);S._globalSaveHandler&&delete S._globalSaveHandler[this.id]},_removeMozBogus:function(k){return k.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(k){k=k.replace(/\sclass="webkit-block-placeholder"/gi,"");k=k.replace(/\sclass="apple-style-span"/gi,
"");return k=k.replace(/<meta charset="utf-8" \/>/gi,"")},_normalizeFontStyle:function(k){return k.replace(/<(\/)?strong([ >])/gi,"\x3c$1b$2").replace(/<(\/)?em([ >])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(k){return k.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(k){if(!k)return!1;
var g=9>m("ie")?this.document.selection.createRange():this.document;try{return g.queryCommandEnabled(k)}catch(A){return!1}},_createlinkEnabledImpl:function(){var k=!0;return k=m("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var k=!0;return k=m("mozilla")||m("webkit")?this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var k=
!0;return k=m("mozilla")||m("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var k=!0;m("webkit")?((k=this.window.getSelection())&&(k=k.toString()),k=!!k):k=this._browserQueryCommandEnabled("cut");return k},_copyEnabledImpl:function(){var k=!0;m("webkit")?((k=this.window.getSelection())&&(k=k.toString()),k=!!k):k=this._browserQueryCommandEnabled("copy");return k},_pasteEnabledImpl:function(){var k=!0;return m("webkit")?!0:k=this._browserQueryCommandEnabled("paste")},
_inserthorizontalruleImpl:function(k){return m("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,k)},_unlinkImpl:function(k){return this.queryCommandEnabled("unlink")&&(m("mozilla")||m("webkit"))?(k=this.selection.getAncestorElement("a"),this.selection.selectElement(k),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",!1,k)},_hilitecolorImpl:function(k){if(!this._handleTextColorOrProperties("hilitecolor",k))if(m("mozilla")){this.document.execCommand("styleWithCSS",
!1,!0);console.log("Executing color command.");var g=this.document.execCommand("hilitecolor",!1,k);this.document.execCommand("styleWithCSS",!1,!1)}else g=this.document.execCommand("hilitecolor",!1,k);return g},_backcolorImpl:function(k){m("ie")&&(k=k?k:null);var g=this._handleTextColorOrProperties("backcolor",k);g||(g=this.document.execCommand("backcolor",!1,k));return g},_forecolorImpl:function(k){m("ie")&&(k=k?k:null);var g=!1;(g=this._handleTextColorOrProperties("forecolor",k))||(g=this.document.execCommand("forecolor",
!1,k));return g},_inserthtmlImpl:function(k){k=this._preFilterContent(k);var g=!0;if(9>m("ie")){var A=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var h=A.item(0);A.length;)A.remove(A.item(0));h.outerHTML=k}else A.pasteHTML(k);A.select()}else if(8>m("trident")){var r=L.getSelection(this.window);if(r&&r.rangeCount&&r.getRangeAt){A=r.getRangeAt(0);A.deleteContents();var J=d.create("div");J.innerHTML=k;for(h=this.document.createDocumentFragment();k=
J.firstChild;)var M=h.appendChild(k);A.insertNode(h);M&&(A=A.cloneRange(),A.setStartAfter(M),A.collapse(!1),r.removeAllRanges(),r.addRange(A))}}else m("mozilla")&&!k.length?this.selection.remove():g=this.document.execCommand("inserthtml",!1,k);return g},_boldImpl:function(k){var g=!1;if(m("ie")||m("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("bold");g||(g=this.document.execCommand("bold",!1,k));return g},_italicImpl:function(k){var g=!1;if(m("ie")||m("trident"))this._adaptIESelection(),
g=this._adaptIEFormatAreaAndExec("italic");g||(g=this.document.execCommand("italic",!1,k));return g},_underlineImpl:function(k){var g=!1;if(m("ie")||m("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("underline");g||(g=this.document.execCommand("underline",!1,k));return g},_strikethroughImpl:function(k){var g=!1;if(m("ie")||m("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("strikethrough");g||(g=this.document.execCommand("strikethrough",!1,k));return g},_superscriptImpl:function(k){var g=
!1;if(m("ie")||m("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("superscript");g||(g=this.document.execCommand("superscript",!1,k));return g},_subscriptImpl:function(k){var g=!1;if(m("ie")||m("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("subscript");g||(g=this.document.execCommand("subscript",!1,k));return g},_fontnameImpl:function(k){if(m("ie")||m("trident"))var g=this._handleTextColorOrProperties("fontname",k);g||(g=this.document.execCommand("fontname",
!1,k));return g},_fontsizeImpl:function(k){if(m("ie")||m("trident"))var g=this._handleTextColorOrProperties("fontsize",k);g||(g=this.document.execCommand("fontsize",!1,k));return g},_insertorderedlistImpl:function(k){var g=!1;if(m("ie")||m("trident")||m("edge"))g=this._adaptIEList("insertorderedlist",k);g||(g=this.document.execCommand("insertorderedlist",!1,k));return g},_insertunorderedlistImpl:function(k){var g=!1;if(m("ie")||m("trident")||m("edge"))g=this._adaptIEList("insertunorderedlist",k);
g||(g=this.document.execCommand("insertunorderedlist",!1,k));return g},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(k){var g=0;if(k&&k.childNodes){var A;for(A=0;A<k.childNodes.length;A++){var h=e.position(k.childNodes[A]);g+=h.h}}return g},_isNodeEmpty:function(k,g){return 1===k.nodeType?0<k.childNodes.length?this._isNodeEmpty(k.childNodes[0],g):!0:3===k.nodeType?
""===k.nodeValue.substring(g):!1},_removeStartingRangeFromRange:function(k,g){if(k.nextSibling)g.setStart(k.nextSibling,0);else{for(k=k.parentNode;k&&null==k.nextSibling;)k=k.parentNode;k&&g.setStart(k.nextSibling,0)}return g},_adaptIESelection:function(){var k=L.getSelection(this.window);if(k&&k.rangeCount&&!k.isCollapsed){for(var g=k.getRangeAt(0),A=g.startContainer,h=g.startOffset;3===A.nodeType&&h>=A.length&&A.nextSibling;)h-=A.length,A=A.nextSibling;for(var r=null;this._isNodeEmpty(A,h)&&A!==
r;)r=A,g=this._removeStartingRangeFromRange(A,g),A=g.startContainer,h=0;k.removeAllRanges();k.addRange(g)}},_adaptIEFormatAreaAndExec:function(k){var g=L.getSelection(this.window),A=this.document,h;if(k&&g&&g.isCollapsed){if(this.queryCommandValue(k)){k=this._tagNamesForCommand(k);var r=g.getRangeAt(0);var J=r.startContainer;if(3===J.nodeType){var M=r.endOffset;J.length<M&&(M=this._adjustNodeAndOffset(O,M),J=M.node,M=M.offset)}for(;J&&J!==this.editNode;){var O=J.tagName?J.tagName.toLowerCase():"";
if(-1<x.indexOf(k,O)){var w=J;break}J=J.parentNode}if(w&&(O=r.startContainer,k=A.createElement(w.tagName),d.place(k,w,"after"),O&&3===O.nodeType)){M=r.endOffset;O.length<M&&(M=this._adjustNodeAndOffset(O,M),O=M.node,M=M.offset);J=O.nodeValue;r=A.createTextNode(J.substring(0,M));var G=J.substring(M,J.length);G&&(h=A.createTextNode(G));d.place(r,O,"before");if(h){var R=A.createElement("span");R.className="ieFormatBreakerSpan";d.place(R,O,"after");d.place(h,R,"after");h=R}d.destroy(O);M=r.parentNode;
for(O=[];M!==w;){J=M.tagName;r={tagName:J};O.push(r);J=A.createElement(J);M.style&&J.style&&M.style.cssText&&(J.style.cssText=M.style.cssText,r.cssText=M.style.cssText);"FONT"===M.tagName&&(M.color&&(J.color=M.color,r.color=M.color),M.face&&(J.face=M.face,r.face=M.face),M.size&&(J.size=M.size,r.size=M.size));M.className&&(J.className=M.className,r.className=M.className);if(h)for(;h;)r=h.nextSibling,J.appendChild(h),h=r;J.tagName==M.tagName?(R=A.createElement("span"),R.className="ieFormatBreakerSpan",
d.place(R,M,"after"),d.place(J,R,"after")):d.place(J,M,"after");r=M;h=J;M=M.parentNode}if(h){if(1===h.nodeType||3===h.nodeType&&h.nodeValue)k.innerHTML="";for(;h;)r=h.nextSibling,k.appendChild(h),h=r}if(O.length){r=O.pop();h=A.createElement(r.tagName);r.cssText&&h.style&&(h.style.cssText=r.cssText);r.className&&(h.className=r.className);"FONT"===r.tagName&&(r.color&&(h.color=r.color),r.face&&(h.face=r.face),r.size&&(h.size=r.size));for(d.place(h,k,"before");O.length;)r=O.pop(),w=A.createElement(r.tagName),
r.cssText&&w.style&&(w.style.cssText=r.cssText),r.className&&(w.className=r.className),"FONT"===r.tagName&&(r.color&&(w.color=r.color),r.face&&(w.face=r.face),r.size&&(w.size=r.size)),h.appendChild(w),h=w;w=A.createTextNode(".");R.appendChild(w);h.appendChild(w)}else R=A.createElement("span"),R.className="ieFormatBreakerSpan",w=A.createTextNode("."),R.appendChild(w),d.place(R,k,"before");h=L.create(this.window);h.setStart(w,0);h.setEnd(w,w.length);g.removeAllRanges();g.addRange(h);this.selection.collapse(!1);
w.parentNode.innerHTML="";k.firstChild||d.destroy(k);return!0}return!1}r=g.getRangeAt(0);if((O=r.startContainer)&&3===O.nodeType)return M=r.startOffset,O.length<M&&(M=this._adjustNodeAndOffset(O,M),O=M.node,M=M.offset),J=O.nodeValue,r=A.createTextNode(J.substring(0,M)),G=J.substring(M),""!==G&&(h=A.createTextNode(J.substring(M))),R=A.createElement("span"),w=A.createTextNode("."),R.appendChild(w),r.length?d.place(r,O,"after"):r=O,d.place(R,r,"after"),h&&d.place(h,R,"after"),d.destroy(O),h=L.create(this.window),
h.setStart(w,0),h.setEnd(w,w.length),g.removeAllRanges(),g.addRange(h),A.execCommand(k),d.place(R.firstChild,R,"before"),d.destroy(R),h.setStart(w,0),h.setEnd(w,w.length),g.removeAllRanges(),g.addRange(h),this.selection.collapse(!1),w.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(k){var g=L.getSelection(this.window);if(g.isCollapsed&&g.rangeCount&&!this.queryCommandValue(k)){var A=g.getRangeAt(0),h=A.startContainer;if(h&&3==h.nodeType&&!A.startOffset)return A="ul","insertorderedlist"===
k&&(A="ol"),k=this.document.createElement(A),A=d.create("li",null,k),d.place(k,h,"before"),A.appendChild(h),d.create("br",null,k,"after"),k=L.create(this.window),k.setStart(h,0),k.setEnd(h,h.length),g.removeAllRanges(),g.addRange(k),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(k,g){var A=L.getSelection(this.window),h=this.document,r,J;g=g||null;if(k&&A&&A.isCollapsed&&A.rangeCount){var M=A.getRangeAt(0);if((r=M.startContainer)&&3===r.nodeType){var O=M.startOffset;
r.length<O&&(M=this._adjustNodeAndOffset(r,O),r=M.node,O=M.offset);var w=r.nodeValue;M=h.createTextNode(w.substring(0,O));""!==w.substring(O)&&(J=h.createTextNode(w.substring(O)));w=h.createElement("span");O=h.createTextNode(".");w.appendChild(O);h=h.createElement("span");w.appendChild(h);M.length?d.place(M,r,"after"):M=r;d.place(w,M,"after");J&&d.place(J,w,"after");d.destroy(r);r=L.create(this.window);r.setStart(O,0);r.setEnd(O,O.length);A.removeAllRanges();A.addRange(r);if(m("webkit")){A="color";
if("hilitecolor"===k||"backcolor"===k)A="backgroundColor";l.set(w,A,g);this.selection.remove();d.destroy(h);w.innerHTML="\x26#160;";this.selection.selectElement(w);this.focus()}else this.execCommand(k,g),d.place(w.firstChild,w,"before"),d.destroy(w),r.setStart(O,0),r.setEnd(O,O.length),A.removeAllRanges(),A.addRange(r),this.selection.collapse(!1),O.parentNode.removeChild(O);return!0}}return!1},_adjustNodeAndOffset:function(k,g){for(;k.length<g&&k.nextSibling&&3===k.nextSibling.nodeType;)g-=k.length,
k=k.nextSibling;return{node:k,offset:g}},_tagNamesForCommand:function(k){return"bold"===k?["b","strong"]:"italic"===k?["i","em"]:"strikethrough"===k?["s","strike"]:"superscript"===k?["sup"]:"subscript"===k?["sub"]:"underline"===k?["u"]:[]},_stripBreakerNodes:function(k){if(this.isLoaded)return F(".ieFormatBreakerSpan",k).forEach(function(g){for(;g.firstChild;)d.place(g.firstChild,g,"before");d.destroy(g)}),k},_stripTrailingEmptyNodes:function(k){function g(A){return/^(p|div|br)$/i.test(A.nodeName)&&
0==A.children.length&&/^[\s\xA0]*$/.test(A.textContent||A.innerText||"")||3===A.nodeType&&/^[\s\xA0]*$/.test(A.nodeValue)}for(;k.lastChild&&g(k.lastChild);)d.destroy(k.lastChild);return k},_setTextDirAttr:function(k){this._set("textDir",k);this.onLoadDeferred.then(u.hitch(this,function(){this.editNode.dir=k}))}});return S})},"dijit/_editor/range":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(x,E,K){var I={getIndex:function(c,d){for(var e=[],l=[],q=c,p,u;c!=
d;){var B=0;for(p=c.parentNode;u=p.childNodes[B++];)if(u===c){--B;break}e.unshift(B);l.unshift(B-p.childNodes.length);c=p}if(0<e.length&&3==q.nodeType){for(u=q.previousSibling;u&&3==u.nodeType;)e[e.length-1]--,u=u.previousSibling;for(u=q.nextSibling;u&&3==u.nodeType;)l[l.length-1]++,u=u.nextSibling}return{o:e,r:l}},getNode:function(c,d){if(!K.isArray(c)||0==c.length)return d;var e=d;x.every(c,function(l){if(0<=l&&l<e.childNodes.length)e=e.childNodes[l];else return e=null,!1;return!0});return e},getCommonAncestor:function(c,
d,e){e=e||c.ownerDocument.body;var l=function(u){for(var B=[];u;)if(B.unshift(u),u!==e)u=u.parentNode;else break;return B};c=l(c);d=l(d);l=Math.min(c.length,d.length);for(var q=c[0],p=1;p<l;p++)if(c[p]===d[p])q=c[p];else break;return q},getAncestor:function(c,d,e){for(e=e||c.ownerDocument.body;c&&c!==e;){var l=c.nodeName.toUpperCase();if(d.test(l))return c;c=c.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(c,d,e){e=e||c.ownerDocument.body;
d=d||I.BlockTagNames;for(var l=null,q;c&&c!==e;){var p=c.nodeName.toUpperCase();!l&&d.test(p)&&(l=c);!q&&/^(?:BODY|TD|TH|CAPTION)$/.test(p)&&(q=c);c=c.parentNode}return{blockNode:l,blockContainer:q||c.ownerDocument.body}},atBeginningOfContainer:function(c,d,e){var l=!1,q=0==e;q||3!=d.nodeType||/^[\s\xA0]+$/.test(d.nodeValue.substr(0,e))&&(q=!0);if(q)for(l=!0;d&&d!==c;){if(d.previousSibling){l=!1;break}d=d.parentNode}return l},atEndOfContainer:function(c,d,e){var l=!1,q=e==(d.length||d.childNodes.length);
q||3!=d.nodeType||/^[\s\xA0]+$/.test(d.nodeValue.substr(e))&&(q=!0);if(q)for(l=!0;d&&d!==c;){if(d.nextSibling){l=!1;break}d=d.parentNode}return l},adjacentNoneTextNode:function(c,d){var e=c;c=0-c.length||0;for(d=d?"nextSibling":"previousSibling";e&&3==e.nodeType;)c+=e.length,e=e[d];return[e,c]},create:function(c){c=c||window;return c.getSelection?c.document.createRange():new a},getSelection:function(c,d){if(c.getSelection)return c.getSelection();c=new v.selection(c);d||c._getCurrentSelection();return c}};
if(!window.getSelection)var v=I.ie={cachedSelection:{},selection:function(c){this._ranges=[];this.addRange=function(d,e){this._ranges.push(d);e||d._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(d){return this._ranges[d]};this._getCurrentSelection=function(){this.removeAllRanges();var d=c.document.selection.createRange();d="CONTROL"==c.document.selection.type.toUpperCase()?new a(v.decomposeControlRange(d)):
new a(v.decomposeTextRange(d));this.addRange(d,!0),this.isCollapsed=d.collapsed}},decomposeControlRange:function(c){var d=c.item(0),e=c.item(c.length-1);c=d.parentNode;var l=e.parentNode;d=I.getIndex(d,c).o[0];e=I.getIndex(e,l).o[0]+1;return[c,d,l,e]},getEndPoint:function(c,d){var e=c.duplicate();e.collapse(!d);var l="EndTo"+(d?"End":"Start"),q=e.parentElement(),p;if(0<q.childNodes.length)x.every(q.childNodes,function(F,b){if(3!=F.nodeType)if(e.moveToElementText(F),0<e.compareEndPoints(l,c))if(p&&
3==p.nodeType){u=p;var m=!0}else return u=q,B=b,!1;else{if(b==q.childNodes.length-1)return u=q,B=q.childNodes.length,!1}else b==q.childNodes.length-1&&(u=F,m=!0);if(m&&u)return u=(F=I.adjacentNoneTextNode(u)[0])?F.nextSibling:q.firstChild,b=I.adjacentNoneTextNode(u),F=b[0],b=b[1],F?(e.moveToElementText(F),e.collapse(!1)):e.moveToElementText(q),e.setEndPoint(l,c),B=e.text.length-b,!1;p=F;return!0});else{var u=q;var B=0}d||1!=u.nodeType||B!=u.childNodes.length||(d=u.nextSibling)&&3==d.nodeType&&(u=
d,B=0);return[u,B]},setEndPoint:function(c,d,e){c=c.duplicate();var l;if(3!=d.nodeType)if(0<e){if(l=d.childNodes[e-1])if(3==l.nodeType)d=l,e=l.length;else if(l.nextSibling&&3==l.nextSibling.nodeType)d=l.nextSibling,e=0;else{c.moveToElementText(l.nextSibling?l:d);var q=l.parentNode;l=q.insertBefore(l.ownerDocument.createTextNode(" "),l.nextSibling);c.collapse(!1);q.removeChild(l)}}else c.moveToElementText(d),c.collapse(!0);3==d.nodeType&&(l=I.adjacentNoneTextNode(d),q=l[0],l=l[1],q?(c.moveToElementText(q),
c.collapse(!1),"inherit"!=q.contentEditable&&l++):(c.moveToElementText(d.parentNode),c.collapse(!0),c.move("character",1),c.move("character",-1)),e+=l,0<e&&c.move("character",e)!=e&&console.error("Error when moving!"));return c},decomposeTextRange:function(c){var d=v.getEndPoint(c),e=d[0],l=d[1],q=d[0];d=d[1];c.htmlText.length&&(c.htmlText==c.text?d=l+c.text.length:(d=v.getEndPoint(c,!0),q=d[0],d=d[1]));return[e,l,q,d]},setRange:function(c,d,e,l,q,p){d=v.setEndPoint(c,d,e);c.setEndPoint("StartToStart",
d);if(!p)var u=v.setEndPoint(c,l,q);c.setEndPoint("EndToEnd",u||d);return c}},a=I.W3CRange=E(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=this.startContainer!==this.endContainer?I.getCommonAncestor(this.startContainer,
this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(c,d){d=parseInt(d);if(this.startContainer!==c||this.startOffset!=d)delete this._cachedBookmark,this.startContainer=c,this.startOffset=d,this.endContainer?this._updateInternal():this.setEnd(c,d)},setEnd:function(c,d){d=parseInt(d);if(this.endContainer!==c||this.endOffset!=d)delete this._cachedBookmark,this.endContainer=c,this.endOffset=d,this.startContainer?
this._updateInternal():this.setStart(c,d)},setStartAfter:function(c,d){this._setPoint("setStart",c,d,1)},setStartBefore:function(c,d){this._setPoint("setStart",c,d,0)},setEndAfter:function(c,d){this._setPoint("setEnd",c,d,1)},setEndBefore:function(c,d){this._setPoint("setEnd",c,d,0)},_setPoint:function(c,d,e,l){e=I.getIndex(d,d.parentNode).o;this[c](d.parentNode,e.pop()+l)},_getIERange:function(){var c=(this._body||this.endContainer.ownerDocument.body).createTextRange();v.setRange(c,this.startContainer,
this.startOffset,this.endContainer,this.endOffset,this.collapsed);return c},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var c=this.startContainer,d=this._getIERange();3!==c.nodeType||this.startOffset||this.setStartBefore(c);d.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var c=new a([this.startContainer,this.startOffset,
this.endContainer,this.endOffset]);c._body=this._body;return c},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});K.setObject("dijit.range",I);return I})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(x,E,K){var I={};E.setObject("dijit._editor.html",I);var v=I.escapeXml=function(a,c){a=a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,
"\x26gt;").replace(/"/gm,"\x26quot;");c||(a=a.replace(/'/gm,"\x26#39;"));return a};I.getNodeHtml=function(a){var c=[];I.getNodeHtmlHelper(a,c);return c.join("")};I.getNodeHtmlHelper=function(a,c){switch(a.nodeType){case 1:var d=a.nodeName.toLowerCase();if(!d||"/"==d.charAt(0))return"";c.push("\x3c",d);var e=[],l={},q;if(K("dom-attributes-explicit")||K("dom-attributes-specified-flag"))for(var p=0;q=a.attributes[p++];){var u=q.name;"_dj"===u.substr(0,3)||K("dom-attributes-specified-flag")&&!q.specified||
u in l||(q=q.value,("src"==u||"href"==u)&&a.getAttribute("_djrealurl")&&(q=a.getAttribute("_djrealurl")),8===K("ie")&&"style"===u&&(q=q.replace("HEIGHT:","height:").replace("WIDTH:","width:")),e.push([u,q]),l[u]=q)}else{var B=(/^input$|^img$/i.test(a.nodeName)?a:a.cloneNode(!1)).outerHTML;l=B.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);B=B.substr(0,B.indexOf("\x3e"));x.forEach(l,function(F){if(F){var b=F.indexOf("\x3d");if(0<b&&(F=F.substring(0,b),"_dj"!=F.substr(0,3)))if("src"!=F&&"href"!=F||!a.getAttribute("_djrealurl")){switch(F){case "style":var m=
a.style.cssText.toLowerCase();break;case "class":m=a.className;break;case "width":if("img"===d){(b=/width=(\S+)/i.exec(B))&&(m=b[1]);break}case "height":if("img"===d){(b=/height=(\S+)/i.exec(B))&&(m=b[1]);break}default:m=a.getAttribute(F)}null!=m&&e.push([F,m.toString()])}else e.push([F,a.getAttribute("_djrealurl")])}},this)}e.sort(function(F,b){return F[0]<b[0]?-1:F[0]==b[0]?0:1});for(l=0;q=e[l++];)c.push(" ",q[0],'\x3d"',"string"===typeof q[1]?v(q[1],!0):q[1],'"');switch(d){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":c.push(" /\x3e");
break;case "script":c.push("\x3e",a.innerHTML,"\x3c/",d,"\x3e");break;default:c.push("\x3e"),a.hasChildNodes()&&I.getChildrenHtmlHelper(a,c),c.push("\x3c/",d,"\x3e")}break;case 4:case 3:c.push(v(a.nodeValue,!0));break;case 8:c.push("\x3c!--",v(a.nodeValue,!0),"--\x3e");break;default:c.push("\x3c!-- Element not recognized - Type: ",a.nodeType," Name: ",a.nodeName,"--\x3e")}};I.getChildrenHtml=function(a){var c=[];I.getChildrenHtmlHelper(a,c);return c.join("")};I.getChildrenHtmlHelper=function(a,c){if(a)for(var d=
a.childNodes||a,e=!K("ie")||d!==a,l,q=0;l=d[q++];)e&&l.parentNode!=a||I.getNodeHtmlHelper(l,c)};return I})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),function(x,E,K,I,v,a,c,d,e,l,q,p,u){var B=K("dijit._editor.plugins.LinkDialog",q,{allowUnsafeHtml:!1,linkFilter:[[/</g,"\x26lt;"]],buttonClass:p,useDefaultCommand:!1,
urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=a.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(b){x("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),a.hitch(this,function(m,t,H){var n=this;this.tag="insertImage"==this.command?"img":"a";m=a.delegate(m.getLocalization("dijit","common",this.lang),m.getLocalization("dijit._editor",
"LinkDialog",this.lang));var f=this.dropDown=this.button.dropDown=new t({title:m[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:a.hitch(this,"setValue"),onOpen:function(){n._onOpenDialog();t.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(a.hitch(n,"_onCloseDialog"),0)}});m.urlRegExp=this.urlRegExp;m.id=H.getUniqueId(this.editor.id);this._uniqueId=m.id;this._setContent(f.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
l.substitute(this.linkDialogTemplate,m));f.startup();this._urlInput=H.byId(this._uniqueId+"_urlInput");this._textInput=H.byId(this._uniqueId+"_textInput");this._setButton=H.byId(this._uniqueId+"_setButton");this.own(H.byId(this._uniqueId+"_cancelButton").on("click",a.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",a.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",a.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=a.hitch(this,function(){var z=this._urlInput.get("value");return this._urlRegExp.test(z)||this._emailRegExp.test(z)});this.own(c(f.domNode,"keydown",a.hitch(this,a.hitch(this,function(z){!z||z.keyCode!=v.ENTER||z.shiftKey||z.metaKey||z.ctrlKey||z.altKey||this._setButton.get("disabled")||(f.onExecute(),f.execute(f.get("value")))}))));b()}))},_checkAndFixInput:function(){var b=this,m=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var t=m,H=!1,n=!1;t&&1<t.length&&(t=a.trim(t),0!==t.indexOf("mailto:")&&(0<t.indexOf("/")?-1===t.indexOf("://")&&"/"!==t.charAt(0)&&t.indexOf("./")&&0!==t.indexOf("../")&&b._hostRxp.test(t)&&(H=!0):b._userAtRxp.test(t)&&(n=!0)));H&&b._urlInput.set("value","http://"+t);n&&b._urlInput.set("value","mailto:"+t);b._setButton.set("disabled",!b._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(a.hitch(this,
function(){this.own(c(this.editor.editNode,"mouseup",a.hitch(this,"_onMouseUp")));this.own(c(this.editor.editNode,"dblclick",a.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(b){this.dropDown.set({parserScope:"dojo",content:b})},_checkValues:function(b){b&&b.urlInput&&(b.urlInput=b.urlInput.replace(/"/g,"\x26quot;"));!this.allowUnsafeHtml&&b&&b.textInput&&("function"===typeof this.linkFilter?b.textInput=this.linkFilter(b.textInput):
E.forEach(this.linkFilter,function(m){b.textInput=b.textInput.replace(m[0],m[1])}));return b},_createlinkEnabledImpl:function(){return!0},setValue:function(b){this._onCloseDialog();if(9>d("ie")){var m=u.getSelection(this.editor.window).getRangeAt(0).endContainer;3===m.nodeType&&(m=m.parentNode);m&&m.nodeName&&m.nodeName.toLowerCase()!==this.tag&&(m=this.editor.selection.getSelectedElement(this.tag));m&&m.nodeName&&m.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(m),
this.editor.execCommand("unlink"))}b=this._checkValues(b);this.editor.execCommand("inserthtml",l.substitute(this.htmlTemplate,b));e("a",this.editor.document).forEach(function(t){t.innerHTML||I.has(t,"name")||t.parentNode.removeChild(t)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(b){if(b&&b.tagName.toLowerCase()===this.tag){var m=b.getAttribute("_djrealurl")||b.getAttribute("href");var t=b.getAttribute("target")||"_self";var H=b.textContent||
b.innerText;this.editor.selection.selectElement(b,!0)}else H=this.editor.selection.getSelectedText();return{urlInput:m||"",textInput:H||"",targetSelect:t||""}},_onOpenDialog:function(){if(d("ie")){var b=u.getSelection(this.editor.window);if(b.rangeCount){var m=b.getRangeAt(0);var t=m.endContainer;3===t.nodeType&&(t=t.parentNode);t&&t.nodeName&&t.nodeName.toLowerCase()!==this.tag&&(t=this.editor.selection.getSelectedElement(this.tag));if(!t||t.nodeName&&t.nodeName.toLowerCase()!==this.tag)(b=this.editor.selection.getAncestorElement(this.tag))&&
b.nodeName&&b.nodeName.toLowerCase()==this.tag?(t=b,this.editor.selection.selectElement(t)):m.startContainer===m.endContainer&&(b=m.startContainer.firstChild)&&b.nodeName&&b.nodeName.toLowerCase()==this.tag&&(t=b,this.editor.selection.selectElement(t))}}else t=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(t))},_onDblClick:function(b){if(b&&b.target&&(b=b.target,(b.tagName?b.tagName.toLowerCase():
"")===this.tag&&I.get(b,"href"))){var m=this.editor;this.editor.selection.selectElement(b);m.onDisplayChanged();m._updateTimer&&(m._updateTimer.remove(),delete m._updateTimer);m.onNormalizedDisplayChanged();var t=this.button;setTimeout(function(){t.set("disabled",!1);t.loadAndOpenDropDown().then(function(){t.dropDown.focus&&t.dropDown.focus()})},10)}},_onMouseUp:function(){if(d("ff")){var b=this.editor.selection.getAncestorElement(this.tag);if(b){var m=u.getSelection(this.editor.window).getRangeAt(0);
if(m.collapsed&&b.childNodes.length){var t=m.cloneRange();t.selectNodeContents(b.childNodes[b.childNodes.length-1]);t.setStart(b.childNodes[0],0);1!==m.compareBoundaryPoints(t.START_TO_START,t)?m.setStartBefore(b):-1!==m.compareBoundaryPoints(t.END_TO_START,t)&&m.setStartAfter(b)}}}}}),F=K("dijit._editor.plugins.ImgLinkDialog",[B],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(b){if(b&&b.tagName.toLowerCase()===this.tag){var m=b.getAttribute("_djrealurl")||b.getAttribute("src");var t=b.getAttribute("alt");this.editor.selection.selectElement(b,!0)}else t=this.editor.selection.getSelectedText();return{urlInput:m||"",textInput:t||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);
this.editor.onLoadDeferred.then(a.hitch(this,function(){this.own(c(this.editor.editNode,"mousedown",a.hitch(this,"_selectTag")))}))},_selectTag:function(b){b&&b.target&&(b=b.target,(b.tagName?b.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(b))},_checkValues:function(b){b&&b.urlInput&&(b.urlInput=b.urlInput.replace(/"/g,"\x26quot;"));b&&b.textInput&&(b.textInput=b.textInput.replace(/"/g,"\x26quot;"));return b},_onDblClick:function(b){if(b&&b.target&&(b=b.target,(b.tagName?
b.tagName.toLowerCase():"")===this.tag&&I.get(b,"src"))){var m=this.editor;this.editor.selection.selectElement(b);m.onDisplayChanged();m._updateTimer&&(m._updateTimer.remove(),delete m._updateTimer);m.onNormalizedDisplayChanged();var t=this.button;setTimeout(function(){t.set("disabled",!1);t.loadAndOpenDropDown().then(function(){t.dropDown.focus&&t.dropDown.focus()})},10)}}});q.registry.createLink=function(b){var m={command:"createLink",allowUnsafeHtml:"allowUnsafeHtml"in b?b.allowUnsafeHtml:!1};
"linkFilter"in b&&(m.linkFilter=b.linkFilter);return new B(m)};q.registry.insertImage=function(){return new F({command:"insertImage"})};B.ImgLinkDialog=F;return B})},"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t){var H=K("dijit._editor.plugins.ViewSource",F,{stripScripts:!0,stripComments:!0,stripIFrames:!0,stripEventHandlers:!0,readOnly:!1,_fsPlugin:null,toggle:function(){p("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var n=d.getLocalization("dijit._editor","commands"),f=this.editor;this.button=new b({label:n.viewSource,ownerDocument:f.ownerDocument,dir:f.dir,lang:f.lang,showLabel:!1,iconClass:this.iconClassPrefix+
" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:l.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(n){this.editor=n;this._initButton();this.removeValueFilterHandles();this._setValueFilterHandle=E.before(this.editor,"setValue",l.hitch(this,function(f){return[this._filter(f)]}));this._getValueFilterHandle=E.after(this.editor,"getValue",l.hitch(this,function(f){return this._filter(f)}));this.editor.addKeyHandler(e.F12,!0,!0,l.hitch(this,function(f){this.button.focus();
this.toggle();f.stopPropagation();f.preventDefault();setTimeout(l.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(n){var f=this.editor,z=f._plugins;this._sourceShown=n;var D=this;try{this.sourceArea||this._createSourceView();if(n)f._sourceQueryCommandEnabled=f.queryCommandEnabled,f.queryCommandEnabled=function(P){return"viewsource"===P.toLowerCase()},this.editor.onDisplayChanged(),x.forEach(z,function(P){!P||P instanceof H||!P.isInstanceOf(F)||P.set("disabled",
!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return D.sourceArea}),this.sourceArea.value=f.get("value"),this.sourceArea.style.height=f.iframe.style.height,this.sourceArea.style.width=f.iframe.style.width,f.iframe.parentNode.style.position="relative",c.set(f.iframe,{position:"absolute",top:0,visibility:"hidden"}),c.set(this.sourceArea,{display:"block"}),this._resizeHandle=q(window,"resize",l.hitch(this,function(){var P=u.getBox(f.ownerDocument);"_prevW"in this&&"_prevH"in this&&
P.w===this._prevW&&P.h===this._prevH||(this._prevW=P.w,this._prevH=P.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(l.hitch(this,function(){delete this._resizer;this._resize()}),10))})),setTimeout(l.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=l.hitch(this,function(){var P=this.sourceArea.value;return P=this._filter(P)}),this._setListener=E.after(this.editor,
"setValue",l.hitch(this,function(P){this.sourceArea.value=P||""}),!0);else{if(!f._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);f.queryCommandEnabled=f._sourceQueryCommandEnabled;if(!this._readOnly){var N=this.sourceArea.value;f.beginEditing();f.set("value",N);f.endEditing()}x.forEach(z,function(P){P&&
P.isInstanceOf(F)&&P.set("disabled",!1)});c.set(this.sourceArea,"display","none");c.set(f.iframe,{position:"relative",visibility:"visible"});delete f._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(l.hitch(this,function(){var P=f.domNode.parentNode;P&&(P=t.getEnclosingWidget(P))&&P.resize&&P.resize();f.resize()}),300)}catch(P){console.log(P)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var n=this.editor,f=n.getHeaderHeight(),z=
n.getFooterHeight(),D=a.position(n.domNode),N=a.getPadBorderExtents(n.iframe.parentNode),P=a.getMarginExtents(n.iframe.parentNode),L=a.getPadBorderExtents(n.domNode),y=D.w-L.w;D=D.h-(f+L.h+z);this._fsPlugin&&this._fsPlugin.isFullscreen&&(n=u.getBox(n.ownerDocument),y=n.w-L.w,D=n.h-(f+L.h+z));a.setMarginBox(this.sourceArea,{w:Math.round(y-(N.w+P.w)),h:Math.round(D-(N.h+P.h))})},_createSourceView:function(){var n=this.editor,f=n._plugins;this.sourceArea=v.create("textarea");this.readOnly&&(I.set(this.sourceArea,
"readOnly",!0),this._readOnly=!0);c.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});I.set(this.sourceArea,"aria-label",this.editor.id);v.place(this.sourceArea,n.iframe,"before");p("ie")&&n.iframe.parentNode.lastChild!==n.iframe&&c.set(n.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});n._viewsource_oldFocus=n.focus;var z=this;n.focus=function(){if(z._sourceShown)z.setSourceAreaCaret();else try{this._vsFocused?
(delete this._vsFocused,B.focus(n.editNode)):n._viewsource_oldFocus()}catch(P){console.log("ViewSource focus code error: "+P)}};var D,N;for(D=0;D<f.length;D++)if((N=f[D])&&("dijit._editor.plugins.FullScreen"===N.declaredClass||N.declaredClass===m._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=N;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return z._sourceShown?z.sourceArea:this._viewsource_getAltViewNode()});
this.own(q(this.sourceArea,"keydown",l.hitch(this,function(P){this._sourceShown&&P.keyCode==e.F12&&P.ctrlKey&&P.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(l.hitch(this,function(){n.focus()}),100),P.stopPropagation(),P.preventDefault())})))},_stripScripts:function(n){n&&(n=n.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,""),n=n.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),n=n.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return n},_stripComments:function(n){n&&
(n=n.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return n},_stripIFrames:function(n){n&&(n=n.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return n},_stripEventHandlers:function(n){if(n){var f=n.match(/<[a-z]+?\b(.*?on.*?(['"]).*?\2.*?)+>/gim);if(f)for(var z=0,D=f.length;z<D;z++){var N=f[z],P=N.replace(/\s+on[a-z]*\s*=\s*(['"])(.*?)\1/igm,"");n=n.replace(N,P)}}return n},_filter:function(n){n&&(this.stripScripts&&(n=this._stripScripts(n)),this.stripComments&&(n=this._stripComments(n)),
this.stripIFrames&&(n=this._stripIFrames(n)),this.stripEventHandlers&&(n=this._stripEventHandlers(n)));return n},removeValueFilterHandles:function(){this._setValueFilterHandle&&(this._setValueFilterHandle.remove(),delete this._setValueFilterHandle);this._getValueFilterHandle&&(this._getValueFilterHandle.remove(),delete this._getValueFilterHandle)},setSourceAreaCaret:function(){var n=this.sourceArea;B.focus(n);this._sourceShown&&!this.readOnly&&(n.setSelectionRange?n.setSelectionRange(0,0):this.sourceArea.createTextRange&&
(n=n.createTextRange(),n.collapse(!0),n.moveStart("character",-99999),n.moveStart("character",0),n.moveEnd("character",0),n.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.removeValueFilterHandles();this.inherited(arguments)}});F.registry.viewSource=F.registry.viewsource=function(n){return new H({readOnly:"readOnly"in
n?n.readOnly:!1,stripComments:"stripComments"in n?n.stripComments:!0,stripScripts:"stripScripts"in n?n.stripScripts:!0,stripIFrames:"stripIFrames"in n?n.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in n?n.stripEventHandlers:!0})};return H})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F){x=K("dijit._editor.plugins._FontDropDown",[l,q,p],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:x,postMixInProperties:function(){this.inherited(arguments);this.strings=v.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=e.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new d({idProperty:"value",data:E.map(this.values,function(n){var f=this.strings[n]||n;return{label:this.getLabel(n,f),name:f,value:n}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(n,f){f=!1!==f;this.select.set("value",0>E.indexOf(this.values,n)?"":n,f);f||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(n){this._set("disabled",n);this.select.set("disabled",n)}});var b=K("dijit._editor.plugins._FontNameDropDown",x,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(n,f){return this.plainText?f:"\x3cdiv style\x3d'font-family: "+n+"'\x3e"+f+"\x3c/div\x3e"},_normalizeFontName:function(n){var f=this.values;if(!n||!f)return n;var z=n.split(",");if(1<z.length)for(var D=0,N=z.length;D<N;D++){var P=c.trim(z[D]);if(-1<E.indexOf(f,P))return P}return n},_setValueAttr:function(n,f){f=!1!==
f;n=this._normalizeFontName(n);this.generic&&(n={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[n]||n);this.inherited(arguments,[n,f])}}),m=K("dijit._editor.plugins._FontSizeDropDown",x,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(n,
f){return this.plainText?f:"\x3cfont size\x3d"+n+"'\x3e"+f+"\x3c/font\x3e"},_setValueAttr:function(n,f){f=!1!==f;n.indexOf&&-1!=n.indexOf("px")&&(n={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(n,10)]||n);this.inherited(arguments,[n,f])}}),t=K("dijit._editor.plugins._FormatBlockDropDown",x,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(n,f){return this.plainText||
"noFormat"==n?f:"\x3c"+n+"\x3e"+f+"\x3c/"+n+"\x3e"},_execCommand:function(n,f,z){if("noFormat"===z){var D;if((f=F.getSelection(n.window))&&0<f.rangeCount&&(z=f.getRangeAt(0),z)){f=z.startContainer;for(D=z.endContainer;f&&f!==n.editNode&&f!==n.document.body&&1!==f.nodeType;)f=f.parentNode;for(;D&&D!==n.editNode&&D!==n.document.body&&1!==D.nodeType;)D=D.parentNode;var N=a.hitch(this,function(C,Q){if(C.childNodes&&C.childNodes.length){var S;for(S=0;S<C.childNodes.length;S++){var k=C.childNodes[S];if(1==
k.nodeType&&n.selection.inSelection(k)){var g=k.tagName?k.tagName.toLowerCase():"";-1!==E.indexOf(this.values,g)&&Q.push(k);N(k,Q)}}}});z=a.hitch(this,function(C){if(C&&C.length){for(n.beginEditing();C.length;)this._removeFormat(n,C.pop());n.endEditing()}});var P=[];if(f==D){for(D=f;D&&D!==n.editNode&&D!==n.document.body;){if(1==D.nodeType){var L=D.tagName?D.tagName.toLowerCase():"";if(-1!==E.indexOf(this.values,L)){var y=D;break}}D=D.parentNode}N(f,P);y&&(P=[y].concat(P))}else for(D=f;n.selection.inSelection(D);)1==
D.nodeType&&(L=D.tagName?D.tagName.toLowerCase():"",-1!==E.indexOf(this.values,L)&&P.push(D),N(D,P)),D=D.nextSibling;z(P);n.onDisplayChanged()}}else n.execCommand(f,z)},_removeFormat:function(n,f){if(n.customUndo){for(;f.firstChild;)I.place(f.firstChild,f,"before");f.parentNode.removeChild(f)}else{n.selection.selectElementChildren(f);var z=n.selection.getSelectedHtml();n.selection.selectElement(f);n.execCommand("inserthtml",z||"")}}}),H=K("dijit._editor.plugins.FontChoice",B,{useDefaultCommand:!1,
_initButton:function(){var n={fontName:b,fontSize:m,formatBlock:t}[this.command],f=this.params;this.params.custom&&(f.values=this.params.custom);var z=this.editor;this.button=new n(a.delegate({dir:z.dir,lang:z.lang},f));this.own(this.button.select.on("change",a.hitch(this,function(D){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=D.indexOf(" ")&&(D="'"+D+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,D):this.editor.execCommand(this.command,
D)})))},updateState:function(){var n=this.editor,f=this.command;if(n&&n.isLoaded&&f.length&&this.button){var z=this.get("disabled");this.button.set("disabled",z);if(!z){try{var D=n.queryCommandValue(f)||""}catch(P){D=""}(z=a.isString(D)&&(D.match(/'([^']*)'/)||D.match(/"([^"]*)"/)))&&(D=z[1]);"fontSize"!==f||D||(D=3);if("formatBlock"===f)if(D&&"p"!=D)0>E.indexOf(this.button.values,D)&&(D="noFormat");else{D=null;if((f=F.getSelection(this.editor.window))&&0<f.rangeCount&&(f=f.getRangeAt(0)))var N=f.endContainer;
for(;N&&N!==n.editNode&&N!==n.document;){if((f=N.tagName?N.tagName.toLowerCase():"")&&-1<E.indexOf(this.button.values,f)){D=f;break}N=N.parentNode}D||(D="noFormat")}D!==this.button.get("value")&&this.button.set("value",D,!1)}}}});E.forEach(["fontName","fontSize","formatBlock"],function(n){B.registry[n]=function(f){return new H({command:n,plainText:f.plainText})}});H._FontDropDown=x;H._FontNameDropDown=b;H._FontSizeDropDown=m;H._FormatBlockDropDown=t;return H})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),
function(x,E,K,I){var v=x.declare("dojox.editor.plugins.Preview",I,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=x.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new E.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:x.hitch(this,"_preview")})},setEditor:function(a){this.editor=a;this._initButton()},
updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var a=this.editor.get("value"),c="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",d;if(this.stylesheets)for(d=0;d<this.stylesheets.length;d++)c+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[d]+"'\x3e\n";this.styles&&(c+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");a="\x3chtml\x3e\n\t\x3chead\x3e\n"+c+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+
a+"\n\t\x3c/body\x3e\n\x3c/html\x3e";var e=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");e.document.open();e.document.write(a);e.document.close()}catch(l){console.warn(l)}}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"preview"!==a.args.name.toLowerCase()||(a.plugin=new v({styles:"styles"in a.args?a.args.styles:"",stylesheets:"stylesheets"in a.args?a.args.stylesheets:null}))});return v})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(x,E,K,I,v,a){var c=K("dijit._editor.plugins.TextColor",v,{buttonClass:a,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var d=this;this.button.loadDropDown=function(e){function l(q){d.button.dropDown=new q({dir:d.editor.dir,ownerDocument:d.editor.ownerDocument,value:d.value,onChange:function(p){d.editor.execCommand(d.command,p)},onExecute:function(){d.editor.execCommand(d.command,this.get("value"))}});e()}"string"==
typeof d.colorPicker?x([d.colorPicker],l):l(d.colorPicker)}},updateState:function(){var d=this.editor,e=this.command;if(d&&d.isLoaded&&e.length){if(this.button){var l=this.get("disabled");this.button.set("disabled",l);if(l)return;try{var q=d.queryCommandValue(e)||""}catch(p){q=""}}""==q&&(q="#000000");"transparent"==q&&(q="#ffffff");"string"==typeof q?-1<q.indexOf("rgb")&&(q=E.fromRgb(q).toHex()):(q=((q&255)<<16|q&65280|(q&16711680)>>>16).toString(16),q="#000000".slice(0,7-q.length)+q);this.value=
q;(d=this.button.dropDown)&&d.get&&q!==d.get("value")&&d.set("value",q,!1)}}});v.registry.foreColor=function(d){return new c(d)};v.registry.hiliteColor=function(d){return new c(d)};return c})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(x,E,K,I,v,a,c){var d=c("dojox.editor.plugins.ToolbarLineBreak",[I,v],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",
postCreate:function(){x.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(e){if(!e.plugin){var l=e.args.name.toLowerCase();if("||"===l||"toolbarlinebreak"===l)e.plugin=new a({button:new d,setEditor:function(q){this.editor=q}})}});return d})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F){x.experimental("dojox.editor.plugins.FindReplace");var b=x.declare("dojox.editor.plugins._FindReplaceCloseBox",[a,c,e],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=E.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),m=x.declare("dojox.editor.plugins._FindReplaceTextBox",[a,c,e],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=E.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");x.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(f){this.value=f;this.textBox.set("value",f)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(f){this.disabled=f;this.textBox.set("disabled",
f)},onChange:function(f){this.value=f},_onKeyPress:function(f){var z=0,D=0;!f.target||f.ctrlKey||f.altKey||f.shiftKey||(f.keyCode==x.keys.LEFT_ARROW?(z=f.target.selectionStart,D=f.target.selectionEnd,z<D&&(E.selectInputText(f.target,z,z),x.stopEvent(f))):f.keyCode==x.keys.RIGHT_ARROW&&(z=f.target.selectionStart,D=f.target.selectionEnd,z<D&&(E.selectInputText(f.target,D,D),x.stopEvent(f))))}}),t=x.declare("dojox.editor.plugins._FindReplaceCheckBox",[a,c,e],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=E.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(f){this.checkBox.set("value",f)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(f){this.disabled=f;this.checkBox.set("disabled",f)}}),H=x.declare("dojox.editor.plugins._FindReplaceToolbar",q,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");x.addClass(this.domNode,"dijitToolbar")},addChild:function(f,z){E._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(f){f.stopPropagation()}}),n=x.declare("dojox.editor.plugins.FindReplace",[F],{buttonClass:E.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=x.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new E.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:x.hitch(this,
"_toggleFindReplace")});x.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",x.hitch(this,function(f,z){"disabled"===f&&this._toggleFindReplace(!z&&this._displayed,!0,!0)}))},setEditor:function(f){this.editor=f;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(f,z,D){var N=x.marginBox(this.editor.domNode);f&&!x.isOpera?(x.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),z||(this._displayed=
!0)):(x.style(this._frToolbar.domNode,"display","none"),z||(this._displayed=!1),D||this.editor.focus());this.editor.resize({h:N.h})},_populateFindField:function(){var f=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(f&&this._findField.textBox.set("value",f),this._findField.textBox.focus(),E.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(f){this.inherited(arguments);if(!x.isOpera){var z=this._frToolbar=new H;x.style(z.domNode,"display",
"none");x.place(z.domNode,f.domNode,"after");z.startup();this._closeBox=new b;z.addChild(this._closeBox);this._findField=new m({label:this._strings.findLabel,tooltip:this._strings.findTooltip});z.addChild(this._findField);this._replaceField=new m({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});z.addChild(this._replaceField);z.addChild(new K.editor.plugins.ToolbarLineBreak);this._findButton=new E.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;z.addChild(this._findButton);this._replaceButton=new E.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;z.addChild(this._replaceButton);this._replaceAllButton=new E.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;z.addChild(this._replaceAllButton);this._caseSensitive=new t({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});z.addChild(this._caseSensitive);this._backwards=new t({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});z.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new E.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(f){f.keyCode==x.keys.ENTER&&(this._find(),x.stopEvent(f))},_onReplaceKeyDown:function(f){f.keyCode==x.keys.ENTER&&(this._replace()||this._replace(),x.stopEvent(f))},_find:function(f){var z=this._findField.get("value")||"";if(z){var D=this._caseSensitive.get("value"),
N=this._backwards.get("value");z=this._findText(z,D,N);!z&&f&&(this._promDialog.set("content",x.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),E.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(x.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;E.popup.close(this._promDialog)}),3E3),setTimeout(x.hitch(this,function(){this.editor.focus()}),0));return z}return!1},_replace:function(f){var z=
!1,D=this.editor;D.focus();var N=this._findField.get("value")||"",P=this._replaceField.get("value")||"";if(N){var L=this._caseSensitive.get("value"),y=this._backwards.get("value"),C=D._sCall("getSelectedText",[null]);x.isMoz&&(N=x.trim(N),C=x.trim(C));N=this._filterRegexp(N,!L);C&&N.test(C)&&(D.execCommand("inserthtml",P),z=!0,y&&(this._findText(P,L,y),D._sCall("collapse",[!0])));!this._find(!1)&&f&&(this._promDialog.set("content",x.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
E.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(x.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;E.popup.close(this._promDialog)}),3E3),setTimeout(x.hitch(this,function(){this.editor.focus()}),0));return z}return null},_replaceAll:function(f){var z=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&z++;var D=x.hitch(this,function(){this._replace(!1)?
(z++,setTimeout(D,10)):f&&(this._promDialog.set("content",x.string.substitute(this._strings.replaceDialogText,{0:""+z})),E.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(x.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;E.popup.close(this._promDialog)}),3E3),setTimeout(x.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});D()},_findText:function(f,z,
D){var N=this.editor,P=N.window,L=!1;if(f)if(P.find)L=P.find(f,z,D,!1,!1,!1,!1);else{var y=N.document;if(y.selection||P.getSelection)if(this.editor.focus(),N=y.body.createTextRange(),L=N.duplicate(),P.getSelection().getRangeAt(0),(y=y.selection?y.selection.createRange():null)?D?N.setEndPoint("EndToStart",y):N.setEndPoint("StartToEnd",y):this._bookmark&&(P=P.getSelection().toString(),N.moveToBookmark(this._bookmark),N.text!=P?(N=L.duplicate(),this._bookmark=null):(D?L.setEndPoint("EndToStart",N):L.setEndPoint("StartToEnd",
N),N=L.duplicate())),z=z?4:0,D&&(z|=1),L=N.findText(f,N.text.length,z))N.select(),this._bookmark=N.getBookmark()}return L},_filterRegexp:function(f,z){for(var D="",N=null,P=0;P<f.length;P++)switch(N=f.charAt(P),N){case "\\":D+=N;P++;D+=f.charAt(P);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":D+="\\";default:D+=N}D="^"+D+"$";return z?new RegExp(D,"mi"):new RegExp(D,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,E.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});n._FindReplaceCloseBox=b;n._FindReplaceTextBox=m;n._FindReplaceCheckBox=t;n._FindReplaceToolbar=H;x.subscribe(E._scopeName+".Editor.getPlugin",null,function(f){f.plugin||"findreplace"!==
f.args.name.toLowerCase()||(f.plugin=new n({}))});return n})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(x,E,K,I){var v=x.declare("dojox.editor.plugins.PasteFromWord",
I,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var a=x.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");x.mixin(a,x.i18n.getLocalization("dijit","common"));x.mixin(a,x.i18n.getLocalization("dijit._editor","commands"));this.button=new E.form.Button({label:a.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:x.hitch(this,"_openDialog")});this._uId=E.getUniqueId(this.editor.id);a.uId=this._uId;a.width=this.width||"400px";a.height=this.height||"300px";this._dialog=(new E.Dialog({title:a.pasteFromWord})).placeAt(x.body());this._dialog.set("content",x.string.substitute(this._template,a));x.style(x.byId(this._uId+"_rte"),"opacity",.001);this.connect(E.byId(this._uId+"_paste"),"onClick","_paste");this.connect(E.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(x.hitch(this,function(){this._rte=new E._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(x.hitch(this,function(){x.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var a=K.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var c;for(c=0;c<this._filters.length;c++){var d=this._filters[c];a=a.replace(d.regexp,d.handler)}a=K.html.format.prettyPrint(a);this.editor.focus();this.editor.execCommand("inserthtml",a)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"pastefromword"!==a.args.name.toLowerCase()||(a.plugin=new v({width:"width"in a.args?a.args.width:"400px",height:"height"in a.args?a.args.width:"300px"}))});return v})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(x,E,K,I,v){var a=x.getObject("dojox.html.format",!0);a.prettyPrint=
function(c,d,e,l,q){var p=[],u=0,B=[],F="\t",b="",m=[],t,H=/[=]([^"']+?)(\s|>)/g,n=/style=("[^"]*"|'[^']*'|\S*)/gi,f=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(d&&0<d&&10>d)for(F="",t=0;t<d;t++)F+=" ";d=I.doc.createElement("div");d.innerHTML=c;var z=E.encode,D=E.decode,N=d.ownerDocument.createElement("div"),P=function(k){k=k.cloneNode(!1);N.appendChild(k);k=N.innerHTML;N.innerHTML="";return k},L=function(){var k;for(k=0;k<u;k++)p.push(F)},y=function(){p.push("\n")},C=function(k){var g;k=k.split("\n");for(g=
0;g<k.length;g++)k[g]=x.trim(k[g]);k=k.join(" ");k=x.trim(k);if(""!==k){var A=[];if(e&&0<e){var h="";for(g=0;g<u;g++)h+=F;g=h.length;h=e;for(e>g&&(h-=g);k;)if(k.length>e){for(g=h;0<g&&" "!==k.charAt(g);g--);if(!g)for(g=h;g<k.length&&" "!==k.charAt(g);g++);var r=k.substring(0,g);r=x.trim(r);k=x.trim(k.substring(g==k.length?k.length:g+1,k.length));if(r){var J="";for(g=0;g<u;g++)J+=F;r=J+r+"\n"}A.push(r)}else{J="";for(g=0;g<u;g++)J+=F;k=J+k+"\n";A.push(k);k=null}return A.join("")}J="";for(g=0;g<u;g++)J+=
F;return k=J+k+"\n"}return""},Q=function(k){var g=k.nodeName.toLowerCase(),A=x.trim(P(k));k=A.substring(0,A.indexOf("\x3e")+1);k=k.replace(H,'\x3d"$1"$2');k=k.replace(n,function(r){var J=r.substring(0,6);r=r.substring(6,r.length);var M=r.charAt(0);r=x.trim(r.substring(1,r.length-1));r=r.split(";");var O=[];K.forEach(r,function(G){if(G=x.trim(G))G=G.substring(0,G.indexOf(":")).toLowerCase()+G.substring(G.indexOf(":"),G.length),O.push(G)});O=O.sort();r=O.join("; ");var w=x.trim(r);return w&&";"!==w?
J+M+(r+";")+M:""});var h=[];k=k.replace(f,function(r){h.push(x.trim(r));return""});h=h.sort();k="\x3c"+g;h.length&&(k+=" "+h.join(" "));-1!=A.indexOf("\x3c/")?(B.push(g),k+="\x3e"):(k=q?k+" /\x3e":k+"\x3e",B.push(!1));a:switch(g){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":g=!0;break a;default:g=!1}m.push(g);b&&!g&&(p.push(C(b)),b="");g?b+=k:(L(),p.push(k),y(),u++)},S=
function(k){var g=k.childNodes;if(g){var A;for(A=0;A<g.length;A++){var h=g[A];if(1===h.nodeType){var r=x.trim(h.tagName.toLowerCase());if(!v("ie")||h.parentNode==k)if(!r||"/"!==r.charAt(0)){Q(h);if("script"===r){r=p;var J=r.push,M=void 0,O=M=void 0,w=void 0;if(w=h.innerHTML){w&&(w=w.replace(/&quot;/gi,'"'),w=w.replace(/&gt;/gi,"\x3e"),w=w.replace(/&lt;/gi,"\x3c"),w=w.replace(/&amp;/gi,"\x26"));h=0;var G=w.split("\n"),R=[];for(w=0;w<G.length;w++){var T=G[w],U=-1<T.indexOf("\n");if(T=x.trim(T)){U=h;
for(M=0;M<T.length;M++)O=T.charAt(M),"{"===O?h++:"}"===O&&(h--,U=h);M="";for(O=0;O<u+U;O++)M+=F;R.push(M+T+"\n")}else U&&0===w&&R.push("\n")}w=R.join("")}J.call(r,w)}else"pre"===r?(r=h.innerHTML,v("mozilla")&&(r=r.replace("\x3cbr\x3e","\n"),r=r.replace("\x3cpre\x3e",""),r=r.replace("\x3c/pre\x3e","")),"\n"!==r.charAt(r.length-1)&&(r+="\n"),p.push(r)):S(h);r=m.pop();b&&!r&&(p.push(C(b)),b="");(J=B.pop())?(J="\x3c/"+J+"\x3e",r?b+=J:(u--,L(),p.push(J),y())):u--}}else 3===h.nodeType||4===h.nodeType?b+=
z(h.nodeValue,l):8===h.nodeType&&(r=D(h.nodeValue,l),L(),p.push("\x3c!--"),y(),u++,p.push(C(r)),u--,L(),p.push("--\x3e"),y())}}};S(d);b&&(p.push(C(b)),b="");return p.join("")};return a})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(x,E,K,I){var v=x.declare("dojox.editor.plugins.InsertAnchor",I,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var a=this,c=x.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),d=this.dropDown=new E.TooltipDialog({title:c.title,execute:x.hitch(this,"setValue"),onOpen:function(){a._onOpenDialog();E.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(x.hitch(a,"_onCloseDialog"),0)}});this.button=new E.form.DropDownButton({label:c.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});c.id=E.getUniqueId(this.editor.id);this._uniqueId=c.id;this.dropDown.set("content",d.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+x.string.substitute(this._template,c));d.startup();this._anchorInput=E.byId(this._uniqueId+"_anchorInput");this._textInput=E.byId(this._uniqueId+"_textInput");this._setButton=E.byId(this._uniqueId+"_setButton");this.connect(E.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(x.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(x.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_checkInput:function(){var a=!0;this._anchorInput.isValid()&&
(a=!1);this._setButton.set("disabled",a)},_setup:function(){this.editor.onLoadDeferred.addCallback(x.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(x.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var a=x.moduleUrl(K._scopeName,"editor/plugins/resources").toString();if(!a.match(/^https?:\/\//i)&&!a.match(/^file:\/\//i)){var c="/"===a.charAt(0)?x.doc.location.protocol+"//"+x.doc.location.host:this._calcBaseUrl(x.global.location.href);
"/"!==c[c.length-1]&&"/"!==a.charAt(0)&&(c+="/");a=c+a}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,a)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var a=this.editor.document,c=this.getAnchorStyle();if(x.isIE)a.createStyleSheet("").cssText=
c;else{var d=a.createElement("style");d.appendChild(a.createTextNode(c));a.getElementsByTagName("head")[0].appendChild(d)}}catch(e){}},_calcBaseUrl:function(a){var c=null;null!==a&&(c=a.indexOf("?"),-1!=c&&(a=a.substring(0,c)),c=a.lastIndexOf("/"),c=0<c&&c<a.length?a.substring(0,c):a);return c},_checkValues:function(a){a&&(a.anchorInput&&(a.anchorInput=a.anchorInput.replace(/"/g,"\x26quot;")),a.textInput||(a.textInput="\x26nbsp;"));return a},setValue:function(a){this._onCloseDialog();if(!this.editor.window.getSelection){var c=
E.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===c.nodeType&&(c=c.parentNode);c&&c.nodeName&&"a"!==c.nodeName.toLowerCase()&&(c=this.editor._sCall("getSelectedElement",["a"]));c&&c.nodeName&&"a"===c.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[c]),this.editor.execCommand("unlink"))}a=this._checkValues(a);this.editor.execCommand("inserthtml",x.string.substitute(this.htmlTemplate,a))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(a){if(a&&"a"===a.tagName.toLowerCase()&&x.attr(a,"name")){var c=x.attr(a,"name");var d=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,!0])}else d=this.editor._sCall("getSelectedText");return{anchorInput:c||"",textInput:d||""}},_onOpenDialog:function(){if(this.editor.window.getSelection)var a=this.editor._sCall("getAncestorElement",["a"]);else a=E.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===a.nodeType&&(a=a.parentNode),a&&a.nodeName&&
"a"!==a.nodeName.toLowerCase()&&(a=this.editor._sCall("getSelectedElement",["a"]));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(a))},_onDblClick:function(a){a&&a.target&&(a=a.target,"a"===(a.tagName?a.tagName.toLowerCase():"")&&x.attr(a,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[a]),setTimeout(x.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(a){x.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(a){a&&x.query("a[name]:not([href])",a).removeClass("dijitEditorPluginInsertAnchorStyle");return a}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var c=a.args.name;c&&(c=c.toLowerCase());"insertanchor"===c&&(a.plugin=new v)}});return v})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(x,E,K,I){var v=x.declare("dojox.editor.plugins.Blockquote",I,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=x.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new E.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:x.hitch(this,"_toggleQuote")})},setEditor:function(a){this.editor=a;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");a.customUndo=!0},_toggleQuote:function(a){try{var c=this.editor;c.focus();var d=this.button.get("checked"),e=E.range.getSelection(c.window),l,q,p,u;e&&0<e.rangeCount&&(l=e.getRangeAt(0));if(l){c.beginEditing();if(d)if(l.startContainer===l.endContainer){if(this._isRootInline(l.startContainer)){for(p=l.startContainer;p&&p.parentNode!==c.editNode;)p=p.parentNode;for(;p&&p.previousSibling&&(this._isTextElement(p)||1===p.nodeType&&this._isInlineFormat(this._getTagName(p)));)p=
p.previousSibling;p&&1===p.nodeType&&!this._isInlineFormat(this._getTagName(p))&&(p=p.nextSibling);if(p){var B=c.document.createElement("blockquote");x.place(B,p,"after");B.appendChild(p);for(u=B.nextSibling;u&&(this._isTextElement(u)||1===u.nodeType&&this._isInlineFormat(this._getTagName(u)));)B.appendChild(u),u=B.nextSibling}}else{for(var F=l.startContainer;(this._isTextElement(F)||this._isInlineFormat(this._getTagName(F))||"li"===this._getTagName(F))&&F!==c.editNode&&F!==c.document.body;)F=F.parentNode;
F!==c.editNode&&F!==F.ownerDocument.documentElement&&(B=c.document.createElement("blockquote"),x.place(B,F,"after"),B.appendChild(F))}B&&(c._sCall("selectElementChildren",[B]),c._sCall("collapse",[!0]))}else{var b;p=l.startContainer;for(u=l.endContainer;p&&this._isTextElement(p)&&p.parentNode!==c.editNode;)p=p.parentNode;for(b=p;b.nextSibling&&c._sCall("inSelection",[b]);)b=b.nextSibling;u=b;if(u===c.editNode||u===c.document.body){B=c.document.createElement("blockquote");x.place(B,p,"after");var m=
this._getTagName(p);if(this._isTextElement(p)||this._isInlineFormat(m))for(c=p;c&&(this._isTextElement(c)||1===c.nodeType&&this._isInlineFormat(this._getTagName(c)));)B.appendChild(c),c=B.nextSibling;else B.appendChild(p);return}u=u.nextSibling;for(b=p;b&&b!==u;){if(1===b.nodeType){if(m=this._getTagName(b),"br"!==m){if(!window.getSelection&&"p"===m&&this._isEmpty(b)){b=b.nextSibling;continue}this._isInlineFormat(m)?B||(B=c.document.createElement("blockquote"),x.place(B,b,"after")):(B&&this._isEmpty(B)&&
B.parentNode.removeChild(B),B=c.document.createElement("blockquote"),x.place(B,b,"after"));B.appendChild(b);b=B}}else this._isTextElement(b)&&(B||(B=c.document.createElement("blockquote"),x.place(B,b,"after")),B.appendChild(b),b=B);b=b.nextSibling}B&&(this._isEmpty(B)?B.parentNode.removeChild(B):(c._sCall("selectElementChildren",[B]),c._sCall("collapse",[!0])),B=null)}else if(B=!1,l.startContainer===l.endContainer){for(q=l.endContainer;q&&q!==c.editNode&&q!==c.document.body;){if("blockquote"===(q.tagName?
q.tagName.toLowerCase():"")){B=!0;break}q=q.parentNode}if(B){for(var t;q.firstChild;)t=q.firstChild,x.place(t,q,"before");q.parentNode.removeChild(q);t&&(c._sCall("selectElementChildren",[t]),c._sCall("collapse",[!0]))}}else{p=l.startContainer;for(u=l.endContainer;p&&this._isTextElement(p)&&p.parentNode!==c.editNode;)p=p.parentNode;for(l=[];p&&p.nextSibling&&c._sCall("inSelection",[p]);)p.parentNode&&"blockquote"===this._getTagName(p.parentNode)&&(p=p.parentNode),l.push(p),p=p.nextSibling;for(var H=
this._findBlockQuotes(l);H.length;){var n=H.pop();if(n.parentNode){for(;n.firstChild;)x.place(n.firstChild,n,"before");n.parentNode.removeChild(n)}}}c.endEditing()}c.onNormalizedDisplayChanged()}catch(f){}},updateState:function(){var a=this.editor,c=this.get("disabled");if(a&&a.isLoaded&&this.button&&(this.button.set("disabled",c),!c)){c=!1;var d=E.range.getSelection(a.window);if(d&&0<d.rangeCount&&(d=d.getRangeAt(0)))var e=d.endContainer;for(;e&&e!==a.editNode&&e!==a.document;){if("blockquote"===
(e.tagName?e.tagName.toLowerCase():"")){c=!0;break}e=e.parentNode}this.button.set("checked",c)}},_findBlockQuotes:function(a){var c=[];if(a){var d;for(d=0;d<a.length;d++){var e=a[d];1===e.nodeType&&("blockquote"===this._getTagName(e)&&c.push(e),e.childNodes&&0<e.childNodes.length&&(c=c.concat(this._findBlockQuotes(e.childNodes))))}}return c},_getTagName:function(a){var c="";a&&1===a.nodeType&&(c=a.tagName?a.tagName.toLowerCase():"");return c},_isRootInline:function(a){var c=this.editor;if(this._isTextElement(a)&&
a.parentNode===c.editNode||1===a.nodeType&&this._isInlineFormat(a)&&a.parentNode===c.editNode)return!0;if(this._isTextElement(a)&&this._isInlineFormat(this._getTagName(a.parentNode))){for(a=a.parentNode;a&&a!==c.editNode&&this._isInlineFormat(this._getTagName(a));)a=a.parentNode;if(a===c.editNode)return!0}return!1},_isTextElement:function(a){return a&&3===a.nodeType||4===a.nodeType?!0:!1},_isEmpty:function(a){if(a.childNodes){var c=!0,d;for(d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(1===
e.nodeType){if("p"!==this._getTagName(e)||x.trim(e.innerHTML)){c=!1;break}}else if(this._isTextElement(e)){if((e=x.trim(e.nodeValue))&&"\x26nbsp;"!==e&&"\u00a0"!==e){c=!1;break}}else{c=!1;break}}return c}return!0},_isInlineFormat:function(a){switch(a){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});x.subscribe(E._scopeName+".Editor.getPlugin",
null,function(a){a.plugin||"blockquote"!==a.args.name.toLowerCase()||(a.plugin=new v({}))});return v})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(x,E,K,I){x.experimental("dojox.editor.plugins.UploadImage");var v=x.declare("dojox.editor.plugins.UploadImage",I,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,
label:"Upload",setToolbar:function(a){this.button.destroy();this.createFileInput();a.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var a=x.create("span",{innerHTML:"."},document.body);x.style(a,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=
new K.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},a);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(a,c,d){a=a[0];c=x.byId(this.currentImageId,this.editor.document);d=this.downloadPath?this.downloadPath+a.name:a.file;
c.src=d;x.attr(c,"_djrealurl",d);a.width&&(c.width=a.width,c.height=a.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "uploadImage":a.plugin=new v({url:a.args.url})}});return v})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H,n,f,z,D,N,P,L){x.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return E("dojox.form.FileUploader",[f,z,D],{swfPath:b.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(N.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();if("flash"==this.uploaderType)var y="createFlashUploader";else this.uploaderType="html",y="createHtmlUploader";this[y]();this.fileListId&&this.connect(e.byId(this.fileListId),"click",function(C){C=C.target.parentNode.parentNode.parentNode;C.id&&-1<C.id.indexOf("file_")&&
this.removeFile(C.id.split("file_")[1])});n.addOnUnload(this,this.destroy)},getHiddenNode:function(y){if(!y)return null;var C=null;for(y=y.parentNode;y&&"body"!=y.tagName.toLowerCase();){if("none"==l.get(y,"display")){C=y;break}y=y.parentNode}return C},getButtonStyle:function(){var y=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(y))&&l.set(this._hiddenNode,"display","block");if(!y&&this.button&&this.button.domNode){var C=!0;y=this.button.domNode.className+" dijitButtonNode";var Q=this.getText(d(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=y=B.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+y+'"\x3e'+Q+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(y=this.button);p.get(y,"class")&&(this.baseClass+=" "+p.get(y,"class"));p.set(y,"class",this.baseClass);this.norm=this.getStyle(y);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(y,this.baseClass+" "+this.hoverClass,C),this.down=this.getTempNodeStyle(y,this.baseClass+" "+this.activeClass,C),this.dsbl=this.getTempNodeStyle(y,this.baseClass+" "+this.disabledClass,C),this.fhtml={cn:this.getText(y),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(y),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){l.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&l.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
l.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),l.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):B.destroy(this.progNode);
l.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});u.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&u.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(C){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);a.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var y=v.connect(this,"onReady",this,function(){v.disconnect(y);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&l.set(this._hiddenNode,"display","none")},onChange:function(y){},onProgress:function(y){},onComplete:function(y){},onCancel:function(){},onError:function(y){},onReady:function(y){},onLoad:function(y){},submit:function(y){y=y?F.toObject(y):null;this.upload(y);return!1},upload:function(y){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var C=m.byId(this.progressWidgetId).domNode;"none"==l.get(C,"display")&&(this.restoreProgDisplay="none",l.set(C,"display","block"));"hidden"==l.get(C,"visibility")&&(this.restoreProgDisplay="hidden",l.set(C,"visibility","visible"))}y&&!y.target&&(this.postData=y);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(y=0;y<this.fileList.length;y++)C=
this.fileList[y],C.bytesLoaded=0,C.bytesTotal=C.size||1E5,C.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(y,C){var Q;for(Q=0;Q<this.fileList.length;Q++)if(this.fileList[Q].name==y){C||this.fileList.splice(Q,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(y):C||(B.destroy(this.fileInputs[Q]),this.fileInputs.splice(Q,1),this._renumberInputs());this.fileListId&&B.destroy("file_"+y)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(I.forEach(this._subs,v.unsubscribe,dojo),I.forEach(this._cons,v.disconnect,dojo),this.scrollConnect&&v.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(B.destroy(this._fileInput),B.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(v.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(y){!0===y?("flash"==this.uploaderType?l.set(this.insideNode,"top","-2500px"):l.set(this.insideNode,"display",
"none"),l.set(this.progNode,"display","")):!1===y?(l.set(this.insideNode,{display:"",top:"0"}),l.set(this.progNode,"display","none")):l.set(this.progNode,"width",y*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var y=!1,C=v.connect(this,"_complete",function(){v.disconnect(C);y=!0}),Q=0,S=setInterval(K.hitch(this,function(){Q+=5;Q>this.fhtml.nr.w&&(Q=0,y=!0);this._displayProgress(Q/this.fhtml.nr.w);y&&(clearInterval(S),setTimeout(K.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(y){"string"==typeof y&&(y=Error(y));this.onError(y)},_addToFileList:function(){if(this.fileListId){var y="";I.forEach(this.fileList,function(C){y+='\x3ctable id\x3d"file_'+C.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+C.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(C.size?Math.ceil(.001*C.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);e.byId(this.fileListId).innerHTML=
y}},_change:function(y){c("ie")&&I.forEach(y,function(C){C.name=C.name.split("\\")[C.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(y):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=y);this._addToFileList();this.onChange(y);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(y){y=
K.isArray(y)?y:[y];I.forEach(y,function(C){C.ERROR&&this._error(C.ERROR)},this);I.forEach(this.fileList,function(C){C.bytesLoaded=1;C.bytesTotal=1;C.percent=100;this._progress(C)},this);I.forEach(this.fileList,function(C){this.removeFile(C.name,!0)},this);this.onComplete(y);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(K.hitch(this,function(){l.set(m.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(y){for(var C=0,Q=0,S=0;S<this.fileList.length;S++){var k=this.fileList[S];k.name==y.name&&(k.bytesLoaded=y.bytesLoaded,k.bytesTotal=y.bytesTotal,k.percent=Math.ceil(k.bytesLoaded/k.bytesTotal*100),this.log(k.name,"percent:",k.percent));Q+=Math.ceil(.001*k.bytesLoaded);C+=Math.ceil(.001*k.bytesTotal)}y=Math.ceil(Q/C*100);this.progressWidgetId&&m.byId(this.progressWidgetId).update({progress:y+"%"});this.showProgress&&this._displayProgress(.01*y);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(y){if(this._disabled!=y){if("flash"==this.uploaderType){if(!this.flashReady){var C=v.connect(this,"onLoad",this,function(){v.disconnect(C);this._setDisabledAttr(y)});return}this._disabled=y;this.flashMovie.doDisable(y)}else this._disabled=y,l.set(this._fileInput,"display",this._disabled?"none":"");u.toggle(this.domNode,this.disabledClass,y)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var y=
d("[tabIndex]"),C=0;C<y.length;C++)if(y[C].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=y[C];break}this.nextFocusObject.focus()},_disconnect:function(){I.forEach(this._cons,v.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&B.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();t.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:K.hitch(this,function(y){this._error("HTML Upload Error:"+y.message)}),load:K.hitch(this,
function(y,C,Q){this._complete(y)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();l.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(v.connect(this._fileInput,"mouseover",this,function(y){u.add(this.domNode,this.hoverClass);this.onMouseOver(y)}));this._cons.push(v.connect(this._fileInput,"mouseout",this,function(y){setTimeout(K.hitch(this,
function(){u.remove(this.domNode,this.activeClass);u.remove(this.domNode,this.hoverClass);this.onMouseOut(y);this._checkHtmlCancel("off")}),0)}));this._cons.push(v.connect(this._fileInput,"mousedown",this,function(y){u.add(this.domNode,this.activeClass);u.remove(this.domNode,this.hoverClass);this.onMouseDown(y)}));this._cons.push(v.connect(this._fileInput,"mouseup",this,function(y){u.remove(this.domNode,this.activeClass);this.onMouseUp(y);this.onClick(y);this._checkHtmlCancel("up")}));this._cons.push(v.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var y=this._fileInput.value;y?this._change([{name:y,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&p.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(y){"change"==y&&(this.dialogIsOpen=!1);"up"==y&&(this.dialogIsOpen=!0);if("off"==y){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var y=this.fhtml.nr;l.set(this.insideNode,{width:y.w+"px",height:"middle"==y.va?y.h+"px":"auto",
textAlign:y.ta,paddingTop:y.p[0]+"px",paddingRight:y.p[1]+"px",paddingBottom:y.p[2]+"px",paddingLeft:y.p[3]+"px"});try{l.set(this.insideNode,"lineHeight","inherit")}catch(C){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],d("*",this._formNode).forEach(function(y){B.destroy(y)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>c("ie")||c("ie")&&c("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=m.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=B.create("form",{enctype:"multipart/form-data",method:"post",id:m.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,l.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var y=
this.htmlFieldName;this.selectMultipleFiles&&(y+=this.fileCount,this.fileCount++);p.set(this._fileInput,{id:this.id,name:y,type:"file"});u.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);y=q.getMarginBox(this._fileInput);l.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-y.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var y;this.fileCount=0;I.forEach(this.fileInputs,function(C){y=this.htmlFieldName+this.fileCount;this.fileCount++;
p.set(C,"name",y)},this)}},_setFormStyle:function(){L.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");l.set(this.domNode,{overflow:"hidden",position:"relative"});l.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var y in this.postData)B.create("input",{type:"hidden",name:y,value:this.postData[y]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var y=v.connect(this,"_complete",this,function(){v.disconnect(y);this._displayProgress(!1)})}var C={},Q;for(Q in this.postData)C[Q]=this.postData[Q];this.flashMovie.doUpload(C)}catch(S){this._error("FileUploader - Sorry, the SWF failed to initialize."+S)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var y=window.location.href.split("/");y.pop();y=y.join("/")+"/";this.uploadUrl=y+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",y," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");y={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:P.serialize("fh",this.fhtml),fileMask:P.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new N(y,this.insideNode);this.flashObject.onError=K.hitch(function(C){this._error("Flash Error: "+C)});this.flashObject.onReady=K.hitch(this,function(){l.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=K.hitch(this,function(C){this.flashMovie=C;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&p.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(y,C){this._subs.push(v.subscribe(this.id+y,this,C))},urlencode:function(y){return y&&"none"!=y?y.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(y){y=y.tagName.toLowerCase();
return"button"==y||"input"==y},getTextStyle:function(y){var C={};C.ff=l.get(y,"fontFamily");if(C.ff){C.ff=C.ff.replace(", ",",");C.ff=C.ff.replace(/"|'/g,"");C.ff="sans-serif"==C.ff?"Arial":C.ff;C.fw=l.get(y,"fontWeight");C.fi=l.get(y,"fontStyle");C.fs=parseInt(l.get(y,"fontSize"),10);if(-1<l.get(y,"fontSize").indexOf("%"))for(var Q=y;Q.tagName;){if(-1==l.get(Q,"fontSize").indexOf("%")){C.fs=parseInt(l.get(Q,"fontSize"),10);break}"body"==Q.tagName.toLowerCase()&&(C.fs=.16*parseInt(l.get(Q,"fontSize"),
10));Q=Q.parentNode}C.fc=(new H(l.get(y,"color"))).toHex();C.fc=parseInt(C.fc.substring(1,Infinity),16)}C.lh=l.get(y,"lineHeight");C.ta=l.get(y,"textAlign");C.ta="start"!=C.ta&&C.ta?C.ta:"left";C.va=this.isButton(y)?"middle":C.lh==C.h?"middle":l.get(y,"verticalAlign");return C},getText:function(y){y=K.trim(y.innerHTML);-1<y.indexOf("\x3c")&&(y=escape(y));return y},getStyle:function(y){var C={},Q=q.getContentBox(y),S=q.getPadExtents(y);C.p=[S.t,S.w-S.l,S.h-S.t,S.l];C.w=Q.w+S.w;C.h=Q.h+S.h;C.d=l.get(y,
"display");Q=new H(l.get(y,"backgroundColor"));C.bc=0==Q.a?"#ffffff":Q.toHex();C.bc=parseInt(C.bc.substring(1,Infinity),16);if(Q=this.urlencode(l.get(y,"backgroundImage")))C.bi={url:Q,rp:l.get(y,"backgroundRepeat"),pos:escape(l.get(y,"backgroundPosition"))},C.bi.pos||(Q=l.get(y,"backgroundPositionX"),S=l.get(y,"backgroundPositionY"),C.bi.pos=escape(("left"==Q?"0%":"right"==Q?"100%":Q)+" "+("top"==S?"0%":"bottom"==S?"100%":S)));return K.mixin(C,this.getTextStyle(y))},getTempNodeStyle:function(y,C,
Q){if(Q){Q=B.place("\x3c"+y.tagName+"\x3e\x3cspan\x3e"+y.innerHTML+"\x3c/span\x3e\x3c/"+y.tagName+"\x3e",y.parentNode);var S=Q.firstChild;u.add(S,y.className);u.add(Q,C);y=this.getStyle(S)}else Q=B.place("\x3c"+y.tagName+"\x3e"+y.innerHTML+"\x3c/"+y.tagName+"\x3e",y.parentNode),u.add(Q,y.className),u.add(Q,C),Q.id=y.id,y=this.getStyle(Q);B.destroy(Q);return y}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u){K.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");a=u._iframeName;a=a.substring(0,a.lastIndexOf("_"));var B=I.delegate(u,{create:function(){return B._frame=u.create.apply(u,arguments)},get:null,post:null,send:function(F){var b=v._ioSetArgs(F,function(z){f&&f.cancel()},function(z){var D=null;z=z.ioArgs;try{var N=z.handleAs;"xml"===N||"html"===N?D=f.response.data:(D=f.response.text,"json"===N?D=E.fromJson(D):"javascript"===N&&(D=K.eval(D)))}catch(P){D=
P}return D},function(z,D){D.ioArgs._hasError=!0;return z}),m=b.ioArgs,t="GET",H=d.byId(F.form);F.method&&"POST"===F.method.toUpperCase()&&H&&(t="POST");F={method:t,handleAs:"json"===F.handleAs||"javascript"===F.handleAs?"text":F.handleAs,form:F.form,query:H?null:F.content,data:H?F.content:null,timeout:F.timeout,ioArgs:m};F.method&&(F.method=F.method.toUpperCase());if(x.ioPublish&&K.publish&&!1!==m.args.ioPublish)var n=p.after(u,"_notifyStart",function(z){z.options.ioArgs===m&&(n.remove(),v._ioNotifyStart(b))},
!0);var f=u(m.url,F,!0);m._callNext=f._callNext;f.then(function(){b.resolve(b)}).otherwise(function(z){b.ioArgs.error=z;b.reject(z)});return b},_iframeOnload:c.global[a+"_onload"]});I.setObject("dojo.io.iframe",B);return B})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(x,E,K,I,v,a,c,d,e){function l(b){b=x.delegate(p,b);if(!("path"in b))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in b||(b.id="dojox-embed-flash-"+q++);return b}var q=0,p={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(v("ie")){var u=function(b){b=l(b);if(!b)return null;var m,t=b.path;if(b.vars){var H=[];for(m in b.vars)H.push(encodeURIComponent(m)+"\x3d"+encodeURIComponent(b.vars[m]));b.params.FlashVars=H.join("\x26");delete b.vars}t='\x3cobject id\x3d"'+e.escape(String(b.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
e.escape(String(b.width))+'" height\x3d"'+e.escape(String(b.height))+'"'+(b.style?' style\x3d"'+e.escape(String(b.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+e.escape(String(t))+'" /\x3e';if(b.params)for(m in b.params)t+='\x3cparam name\x3d"'+e.escape(m)+'" value\x3d"'+e.escape(String(b.params[m]))+'" /\x3e';return{id:b.id,markup:t+"\x3c/object\x3e"}};var B=function(){for(var b=10,m=null;!m&&7<b;)try{m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+b--)}catch(t){}return m?(b=m.GetVariable("$version").split(" ")[1].split(","),
{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}();E.addOnWindowUnload(function(){console.warn("***************UNLOAD");var b=function(){};I("object").reverse().style("display","none").forEach(function(m){for(var t in m)if("FlashVars"!=t&&"function"==typeof m[t])try{m[t]=b}catch(H){}})})}else u=function(b){b=l(b);if(!b)return null;var m,t=b.path;if(b.vars){var H=[];for(m in b.vars)H.push(encodeURIComponent(m)+"\x3d"+encodeURIComponent(b.vars[m]));
b.params.flashVars=H.join("\x26");delete b.vars}t='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+e.escape(String(t))+'" id\x3d"'+e.escape(String(b.id))+'" width\x3d"'+e.escape(String(b.width))+'" height\x3d"'+e.escape(String(b.height))+'"'+(b.style?' style\x3d"'+e.escape(String(b.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(b.params)for(m in b.params)t+=" "+e.escape(m)+'\x3d"'+e.escape(String(b.params[m]))+'"';return{id:b.id,markup:t+
" /\x3e"}},B=function(){var b=navigator.plugins["Shockwave Flash"];return b&&b.description?(b=b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}();var F=function(b,m){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=B.major;this.minimumVersion=b.minimumVersion||9;this.domNode=this.movie=this.id=null;m&&(m=a.byId(m));setTimeout(x.hitch(this,function(){if(b.expressInstall||this.available&&this.available>=this.minimumVersion)if(b&&m)this.init(b,m);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};x.extend(F,{onReady:function(b){},onLoad:function(b){},onError:function(b){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(b,m){this.destroy();m=a.byId(m||this.domNode);if(!m)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var t=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;F.initialized&&(this.id=F.place(b,m),this.domNode=m,setTimeout(x.hitch(this,
function(){this.movie=this.byId(this.id,b.doc);this.onReady(this.movie);this._poller=setInterval(x.hitch(this,function(){try{t=this.movie.PercentLoaded()}catch(H){console.warn("this.movie.PercentLoaded() failed",H,this.movie)}if(100==t)this._onload();else if(0==t&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(b){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var b=
x.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),m;for(m in this)b[m]||delete this[m];this._poller?c(this,"Load",this,"_destroy"):this._destroy()}},byId:function(b,m){m=m||document;return m.embeds[b]?m.embeds[b]:m[b]?m[b]:window[b]?window[b]:document[b]?document[b]:null}});x.mixin(F,{minSupported:8,available:B.major,supported:B.major>=B.required,minimumRequired:B.required,version:B,initialized:!1,onInitialize:function(){F.initialized=!0},__ie_markup__:function(b){return u(b)},proxy:function(b,
m){K.forEach(m instanceof Array?m:[m],function(t){this[t]=x.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+t+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+K.map(arguments,function(H){return __flash__toXML(H)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},b)}});F.place=function(b,m){b=u(b);m=a.byId(m);m||(m=d.doc.createElement("div"),m.id=b.id+"-container",d.body().appendChild(m));return b?(m.innerHTML=b.markup,
b.id):null};F.onInitialize();x.setObject("dojox.embed.Flash",F);return F})},"dojox/embed/flashVars":function(){define(["dojo"],function(x){x.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var E={serialize:function(K,I){var v=function(e){"string"==typeof e&&(e=e.replace(/;/g,"_sc_"),e=e.replace(/\./g,"_pr_"),e=e.replace(/:/g,"_cl_"));return e},a=dojox.embed.flashVars.serialize,c="";if(x.isArray(I)){for(var d=0;d<I.length;d++)c+=a(K+"."+d,v(I[d]))+";";return c.replace(/;{2,}/g,";")}if(x.isObject(I)){for(d in I)c+=
a(K+"."+d,v(I[d]))+";";return c.replace(/;{2,}/g,";")}return K+":"+I}};x.setObject("dojox.embed.flashVars",E);return E})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(x,E,K,I){var v=x.getObject("dojox.html",!0),a={},c={},d=[];v.insertCssRule=function(e,l,q){q=v.getDynamicStyleSheet(q);var p=e+" {"+l+"}";console.log("insertRule:",p);I("ie")?(q.cssText+=p,console.log("ss.cssText:",q.cssText)):q.sheet?q.sheet.insertRule(p,
q._indicies.length):q.appendChild(K.doc.createTextNode(p));q._indicies.push(e+" "+l);return e};v.removeCssRule=function(e,l,q){var p=-1,u,B;for(u in a)if(!q||q===u){var F=a[u];for(B=0;B<F._indicies.length;B++)if(e+" "+l===F._indicies[B]){p=B;break}if(-1<p)break}if(!F)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===p)return console.warn("The css rule was not found and could not be removed."),!1;F._indicies.splice(p,1);I("ie")?F.removeRule(p):F.sheet&&
F.sheet.deleteRule(p);return!0};v.modifyCssRule=function(e,l,q){};v.getStyleSheet=function(e){if(a[e||"default"])return a[e||"default"];if(!e)return!1;var l=v.getStyleSheets();if(l[e])return v.getStyleSheets()[e];for(var q in l)if(l[q].href&&-1<l[q].href.indexOf(e))return l[q];return!1};v.getDynamicStyleSheet=function(e){e||(e="default");a[e]||(K.doc.createStyleSheet?(a[e]=K.doc.createStyleSheet(),9>I("ie")&&(a[e].title=e)):(a[e]=K.doc.createElement("style"),a[e].setAttribute("type","text/css"),K.doc.getElementsByTagName("head")[0].appendChild(a[e]),
console.log(e," ss created: ",a[e].sheet)),a[e]._indicies=[]);return a[e]};v.enableStyleSheet=function(e){if(e=v.getStyleSheet(e))e.sheet?e.sheet.disabled=!1:e.disabled=!1};v.disableStyleSheet=function(e){if(e=v.getStyleSheet(e))e.sheet?e.sheet.disabled=!0:e.disabled=!0};v.activeStyleSheet=function(e){var l=v.getToggledStyleSheets(),q;if(1===arguments.length)E.forEach(l,function(p){p.disabled=p.title===e?!1:!0});else for(q=0;q<l.length;q++)if(!1===l[q].disabled)return l[q];return!0};v.getPreferredStyleSheet=
function(){};v.getToggledStyleSheets=function(){var e;if(!d.length){var l=v.getStyleSheets();for(e in l)l[e].title&&d.push(l[e])}return d};v.getStyleSheets=function(){if(c.collected)return c;E.forEach(K.doc.styleSheets,function(e){var l=e.sheet?e.sheet:e;e=l.title||l.href;if(I("ie"))-1===l.cssText.indexOf("#default#VML")&&(l.href?c[e]=l:l.imports.length?E.forEach(l.imports,function(q){c[q.title||q.href]=q}):c[e]=l);else{c[e]=l;c[e].id=l.ownerNode.id;e=[];try{e=l[l.cssRules?"cssRules":"rules"]}catch(q){console.warn("Reading css rules from stylesheet "+
l.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",l)}E.forEach(e,function(q){q.href&&(c[q.href]=q.styleSheet,c[q.href].id=l.ownerNode.id)})}});c.collected=!0;return c};return v})},"jimu/dijit/EditorChooseImage":function(){define("dojo dijit dijit/_editor/_Plugin jimu/dijit/ImageChooser dojo/_base/html dojo/_base/lang dojo/i18n dojo/_base/connect dojo/_base/declare".split(" "),function(x,E,K,I,v,a,c){x.experimental("dojox.editor.plugins.ChooseImage");
var d=x.declare("dojox.editor.plugins.ChooseImage",K,{iconClassPrefix:"editorIcon",useDefaultCommand:!1,_initButton:function(){this.createFileInput();this.command="chooseImage";var e=c.getLocalization("dijit._editor","commands");this.button=new E.form.Button({label:e.insertImage,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"UploadImage",tabIndex:"-1",onClick:a.hitch(this,this._chooseImage)});this.button.set("readOnly",!1);this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",
arguments);delete this.command},updateState:function(){var e=this.get("disabled");this.button.set("disabled",this.get("disabled"));!0===e?(v.addClass(this.button,"dijitButtonDisabled"),this.imageChooser.disableChooseImage()):(v.removeClass(this.button,"dijitButtonDisabled"),this.imageChooser.enableChooseImage())},createFileInput:function(){var e=x.create("span",{innerHTML:"."},document.body);this.imageChooser=new I({showSelfImg:!1,cropImage:!1,format:[I.GIF,I.JPEG,I.PNG]},e);this.connect(this.imageChooser,
"onImageChange","insertTempImage")},_chooseImage:function(){v.setStyle(this.imageChooser.domNode,"display","none");this.imageChooser.triggerImgUpload()},onComplete:function(e){e=e[0];var l=x.byId(this.currentImageId,this.editor.document);var q=this.downloadPath?this.downloadPath+e.name:e.file;l.src=q;x.attr(l,"_djrealurl",q);e.width&&(l.width=e.width,l.height=e.height)},insertTempImage:function(e,l){l=l&&l.fileName?'alt\x3d"'+l.fileName+'"':"";this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",
'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+e+'" '+l+"/\x3e")},destroy:function(){this.imageChooser&&this.imageChooser.destroy();this.inherited(arguments)}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(e){if(!e.plugin)switch(e.args.name){case "chooseImage":e.plugin=new d({url:e.args.url})}});K.registry.chooseImage=function(e){return new d(e)};return d})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),
function(x,E,K,I,v,a){E.experimental("dijit.editor.plugins.EditorTextColor");var c=I("dijit.editor.plugins.EditorTextColor",v,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var d="",e=!1;this.params.custom&&(this.params.custom.recordUID&&(d=this.params.custom.recordUID),this.params.custom.forceAttr&&(e=this.params.custom.forceAttr));var l=this;this.button.set("iconClass",
this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(q){function p(u){l.button.dropDown=new u({dir:l.editor.dir,ownerDocument:l.editor.ownerDocument,value:l.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:d,onChange:function(B){l.editor.execCommand("useCSS",e);l.editor.execCommand("styleWithCSS",!e);l.editor.execCommand(l.hackCommand,
B)},onClose:function(){l.button.closeDropDown()}});q()}"string"===typeof l.colorPicker?x([l.colorPicker],p):p(l.colorPicker)}},updateState:function(){var d=this.editor,e=this.hackCommand;if(d&&d.isLoaded&&e.length){if(this.button){var l=this.get("disabled");this.button.set("disabled",l);if(l)return;try{var q=d.queryCommandValue(e)||""}catch(p){q=""}}""===q?q="#000000":"transparent"===q&&(q="rgba(0, 0, 0, 0)");this.value=q;(d=this.button.dropDown)&&d.getColor&&q!==d.getColor()&&(d.refreshRecords(),
d.setColor(q))}}});E.subscribe(K._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin)switch(d.args.name){case "editorTextColor":d.plugin=new c}});return c})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(x,E,K,I,v,a){E.experimental("dijit.editor.plugins.EditorBackgroundColor");var c=I("dijit.editor.plugins.EditorBackgroundColor",v,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",
useDefaultCommand:!1,_initButton:function(){this.command="editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);var d="";this.params.custom&&this.params.custom.recordUID&&(d=this.params.custom.recordUID);var e=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(l){function q(p){e.button.dropDown=new p({dir:e.editor.dir,ownerDocument:e.editor.ownerDocument,
value:e.value,appearance:{showTransparent:!0,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:d,onChange:function(u){e.editor.execCommand("useCSS",!1);e.editor.execCommand("styleWithCSS",!0);e.editor.execCommand(e.hackCommand,u)},onExecute:function(){e.editor.execCommand(e.hackCommand,this.get("value"))},onClose:function(){e.button.closeDropDown()}});l()}"string"===typeof e.colorPicker?x([e.colorPicker],q):q(e.colorPicker)}},updateState:function(){var d=
this.editor,e=this.hackCommand;if(d&&d.isLoaded&&e.length){if(this.button){var l=this.get("disabled");this.button.set("disabled",l);if(l)return;try{var q=d.queryCommandValue(e)||""}catch(p){q=""}}""===q?q="#000000":"transparent"===q&&(q="rgba(0, 0, 0, 0)");this.value=q;(d=this.button.dropDown)&&d.getColor&&q!==d.getColor()&&(d.refreshRecords(),d.setColor(q))}}});E.subscribe(K._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin)switch(d.args.name){case "editorBackgroundColor":d.plugin=new c}});
return c})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t){var H=K([I,v,a,E],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',
_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);u.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new t({hidden:!0});this.shelter.placeAt(this.domNode);
this.shelter.startup();this._createTree();this.basicFilter=p.hitch(this,this.basicFilter);this.filter=H.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(n){var f=new d;this.onlyShowVisible?f.resolve(n.isShowInMap()):f.resolve(!0);return f},filter:function(n){n=new d;n.resolve(!0);return n},getSelectedItems:function(){var n=this.tree.getSelectedItems();return B.map(n,p.hitch(this,function(f){return this.getHandledItem(f)}))},
getAllItems:function(){var n=this.tree.getAllItems(),f=[];B.forEach(n,p.hitch(this,function(z){"root"!==z.id&&(z=this.getHandledItem(z),f.push(z))}));return f},getHandledItem:function(n){return{name:n.name,layerInfo:n.layerInfo}},_isLeafItem:function(n){return n.isLeaf},setCreateMapResponse:function(n){this.createMapResponse=n;m.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(p.hitch(this,function(f){this.layerInfosObj=f;this.own(x(this.layerInfosObj,"layerInfosChanged",
p.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(x(this.layerInfosObj,"layerInfosIsShowInMapChanged",p.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(n,f){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(n){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(n){this._clear();u.setStyle(this.errorTipSection,
"display","block");var f=[];this.onlyShowWebMapLayers?(f=n.getLayerInfoArrayOfWebmap(),f=f.concat(n.getTableInfoArrayOfWebmap())):(f=n.getLayerInfoArray(),f=f.concat(n.getTableInfoArray()));0!==f.length&&(u.setStyle(this.errorTipSection,"display","none"),B.forEach(f,p.hitch(this,function(z){this._addDirectLayerInfo(z)})))},_addDirectLayerInfo:function(n){n&&n.getLayerObject().then(p.hitch(this,function(){this._addItem("root",n)}),p.hitch(this,function(f){console.error(f)}))},_clear:function(){var n=
this._store.query({parent:"root"});B.forEach(n,p.hitch(this,function(f){f&&"root"!==f.id&&this._store.remove(f.id)}))},_addItem:function(n,f){var z=null,D=f.getLayerType(),N=this.filter(f);q({layerType:D,valid:N}).then(p.hitch(this,function(P){if(P.valid){var L=p.hitch(this,function(S,k){this._id++;z={name:f.title||"",parent:n,layerInfo:f,type:P.layerType,layerClass:f.layerObject.declaredClass,id:this._id.toString(),isLeaf:S,hasChildren:k};this._store.add(z)}),y=f.getSubLayers(),C=0===y.length,Q=
!0;this.onlyFilterCurrentLayerWhenAddItem?(C&&(Q=!1),L(C,Q)):C?L(C,!1):(y=B.map(y,p.hitch(this,function(S){return this.filter(S)})),q(y).then(p.hitch(this,function(S){(S=B.some(S,function(k){return k}))&&L(C,S)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var n=this._getRootItem();n=new c({data:[n],getChildren:function(f){return this.query({parent:f.id})}});this._store=new e(n);n=new l({store:this._store,query:{id:"root"},
mayHaveChildren:p.hitch(this,this._mayHaveChildren)});this.tree=new b({multiple:this.multiple,model:n,showRoot:!1,isLeafItem:p.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:p.hitch(this,function(f,z){"root"!==f.id&&this._onTreeOpen(f,z)}),onClick:p.hitch(this,function(f,z,D){this._onTreeClick(f,z,D);this.emit("tree-click",f,z,D)}),getIconStyle:p.hitch(this,function(f,z){var D=null;if(!f||"root"===f.id)return null;var N={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",
backgroundImage:""},P=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(f=this._getIconInfo(f,z).imageName)N.backgroundImage="url("+P+"/css/images/"+f+")",D=N;return D}),getIconClass:p.hitch(this,function(f,z){return this._getIconInfo(f,z).className}),getTooltip:p.hitch(this,function(f){return this.displayTooltipForTreeNode?f.layerInfo.title:""})});u.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(n){return n.hasChildren},
_getIconInfo:function(n,f){var z="",D="";"ArcGISDynamicMapServiceLayer"===n.type||"ArcGISTiledMapServiceLayer"===n.type?f?(z="mapserver_open.png",D="mapservice-layer-icon open"):(z="mapserver_close.png",D="mapservice-layer-icon close"):"GroupLayer"===n.type?f?(z="group_layer2.png",D="group-layer-icon open"):(z="group_layer1.png",D="group-layer-icon close"):"FeatureLayer"===n.type?(n=F.getTypeByGeometryType(n.layerInfo.layerObject.geometryType),"point"===n?(z="point_layer1.png",D="point-layer-icon"):
"polyline"===n?(z="line_layer1.png",D="line-layer-icon"):"polygon"===n&&(z="polygon_layer1.png",D="polygon-layer-icon")):"Table"===n.type?(z="table.png",D="table-icon"):"ArcGISImageServiceLayer"===n.type||"ArcGISImageServiceVectorLayer"===n.type?(z="image_layer.png",D="iamge-layer-icon"):f?(z="mapserver_open.png",D="mapservice-layer-icon open"):(z="mapserver_close.png",D="mapservice-layer-icon close");return{imageName:z,className:D}},_onTreeOpen:function(n,f){if("root"!==n.id){var z=[];f=[];z=n.layerInfo.getSubLayers();
n.checked||(this.shelter.show(),f=B.map(z,p.hitch(this,function(D){return D.getLayerObject()})),q(f).then(p.hitch(this,function(){this.domNode&&(B.forEach(z,p.hitch(this,function(D){this._addItem(n.id,D)})),n.checked=!0,this.shelter.hide())}),p.hitch(this,function(D){console.error(D);this.shelter.hide()})))}},_onTreeClick:function(n,f,z){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});H.createFilterByLayerType=
function(n){p.isArrayLike(n)||(n=[]);return function(f){var z=new d;if(0===n.length)z.resolve(!0);else{var D=[];f.traversal(function(N){D.push(N.getLayerType())});q(D).then(function(N){for(var P=0;P<N.length;P++)for(var L=0;L<n.length;L++)if(N[P]===n[L]){z.resolve(!0);return}z.resolve(!1)},function(N){console.error(N);z.reject(N)})}return z}};H.createFeaturelayerFilter=function(n,f,z,D){var N=["point","polyline","polygon"];n&&0<n.length?(n=B.filter(n,function(P){return 0<=N.indexOf(P)}),0===n.length&&
(n=N)):n=N;return function(P){var L=P.getLayerType();P=P.getLayerObject();return q({layerType:L,layerObject:P}).then(function(y){var C=y.layerType;y=y.layerObject;if("ArcGISDynamicMapServiceLayer"===C||"ArcGISTiledMapServiceLayer"===C||"GroupLayer"===C||"FeatureCollection"===C)return!0;if("FeatureLayer"===C){C=F.getTypeByGeometryType(y.geometryType);C=0<=B.indexOf(n,C);var Q=H._shouldPassStatisticsCheck(D,y);return y.url?(y=F.isFeaturelayerUrlSupportQuery(y.url,y.capabilities),C&&y&&Q):f&&C}return"Table"===
C?(C=F.isFeaturelayerUrlSupportQuery(y.url,y.capabilities),y=H._shouldPassStatisticsCheck(D,y),z&&C&&y):!1})}};H.createImageServiceLayerFilter=function(n,f){return function(z){var D=z.getLayerType();z=z.getLayerObject();return q({layerType:D,layerObject:z}).then(function(N){var P=N.layerType,L=N.layerObject;return"ArcGISImageServiceLayer"===P||"ArcGISImageServiceVectorLayer"===P?n?F.isImageServiceSupportQuery(N.layerObject.capabilities)?f?H._shouldPassStatisticsCheck(f,L):!0:!1:!0:!1})}};H._shouldPassStatisticsCheck=
function(n,f){return n?(n=!1,n=f.advancedQueryCapabilities?!!f.advancedQueryCapabilities.supportsStatistics:!!f.supportsStatistics):!0};H.createQueryableLayerFilter=function(n){var f=H.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,n);n=H.createImageServiceLayerFilter(!0,n);return H.orCombineFilters([f,n])};H.andCombineFilters=function(n){return H._combineFilters(n,!0)};H.orCombineFilters=function(n){return H._combineFilters(n,!1)};H._combineFilters=function(n,f){return function(z){var D=
new d,N=B.map(n,function(P){return P(z)});q(N).then(function(P){var L=!1;L=f?B.every(P,function(y){return y}):B.some(P,function(y){return y});D.resolve(L)},function(P){console.error(P);D.reject(P)});return D}};return H})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p){return x([e,l,a],{templateString:q,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource;this.nls.customSelectLayer=this.label?this.label:this.nls.selectLayer},postCreate:function(){this.inherited(arguments);this.layerInfosObj=
p.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(I(this.layerChooser,"tree-click",E.hitch(this,this._onTreeClick)));this.own(I(this.layerChooser,"update",E.hitch(this,this._onLayerChooserUpdate)));this.own(I(document.body,"click",E.hitch(this,this._onBodyClicked)));this.own(I(document.body,"keydown",E.hitch(this,function(u){u.keyCode===v.ENTER&&this._onBodyClicked(u)})));
this.own(I(this.layerChooser.domNode,"keydown",E.hitch(this,function(u){u.keyCode===v.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(u){var B=new c;if(u){var F=this.layerInfosObj.getLayerOrTableInfoById(u.id);F?this.layerChooser.filter(F).then(E.hitch(this,function(b){b?(this._onSelectNewItem({layerInfo:F,
name:F.title,url:u.url}),B.resolve(!0)):B.resolve(!1)}),E.hitch(this,function(){B.resolve(!1)})):B.resolve(!1)}else this._onSelectNewItem(null),B.resolve(!0);return B},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(u){u=u.target||u.srcElement;u===this.domNode||K.isDescendant(u,this.domNode)||u===this.layerChooser.domNode||K.isDescendant(u,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(u){u.stopPropagation();
u.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(u){u.keyCode===v.ENTER&&this._onDropDownClick(u)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";d.open({parent:this,popup:this.layerChooser,around:this.domNode});var u=this.layerChooser.domNode.parentNode;u&&(K.addClass(u,"jimu-layer-chooser-from-map-withdropbox-popup"),
this.customClass&&K.addClass(u,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){d.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(u){var B=E.getObject("layerInfo.id",
!1,this._selectedItem)||-1,F=E.getObject("layerInfo.id",!1,u)||-1;B=B!==F;this._selectedItem=u;this.hideLayerChooser();u=E.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=u;K.setAttr(this.layerNameNode,"title",u);u=E.getObject("layerInfo.layerObject",!1,this._selectedItem);B&&this.emit("selection-change",[u])},_onTreeClick:function(){var u=this._getSelectedItems();this._onSelectNewItem(0<u.length?u[0]:null)}})})},"widgets/Screening/setting/FieldPicker":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array dojo/_base/lang dojo/_base/html dojo/on jimu/BaseWidget dojo/text!./FieldPicker.html dojo/Evented jimu/dijit/SimpleTable dojo/query dojo/dom-class jimu/utils jimu/dijit/CheckBox jimu/dijit/RadioBtn".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F){return x([e,E,q],{templateString:l,baseClass:"jimu-widget-screening-setting",_fieldsTable:null,_entireFieldsArr:[],_selectedFieldsArr:[],_entireFieldObj:{},_configuredField:null,_configuredLabel:null,selectedSortingField:null,constructor:function(b){this._fieldsTable=null;this._entireFieldsArr=[];this._selectedFieldsArr=[];this._entireFieldObj={};this.selectedSortingField=this._configuredLabel=this._configuredField=null;a.mixin(this,b)},postMixInProperties:function(){this.nls.common=
{};a.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.selectedSortingField=null;this.inherited(arguments);this._init();this.own(d(this.fieldsDropdown,"change",a.hitch(this,function(b){this.selectedSortingField=b;this._setSortFieldDropdownLabel()})))},_init:function(){this._clearData();this._addValidFields();this._createFieldsTable();this._attachEventsToElement();this._displayPreviousConfiguredFields();this._setPreviousGroupByFieldCheckboxStatus();this.currentRow.sortInfo&&
"Desc"===this.currentRow.sortInfo.sortOrder?this.descRadioBtn.set("checked",!0):this.ascRadioBtn.set("checked",!0);this._onFieldsSelectionChange();var b=this.currentRow.sortInfo&&""!==this.currentRow.sortInfo.sortingField?this._getSortFieldValue():this.fieldsDropdown.getOptions(this.fieldsDropdown.options.length-1).value;this.fieldsDropdown.set("value",b);this._setSortFieldDropdownLabel()},_clearData:function(){this._entireFieldsArr=[];this._selectedFieldsArr=[]},_displayPreviousConfiguredFields:function(){var b;
if(this.selectedFields)for(b in this.selectedFields)this._configuredField=b,this._configuredLabel=this.selectedFields[b].label,this.btnAddField.click()},_addValidFields:function(){var b;var m="esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate".split(" ");var t=["string","number","date"];v.forEach(this.featureLayer.fields,a.hitch(this,function(H){this._entireFieldObj[H.name]=H;-1<m.indexOf(H.type)&&(this._entireFieldsArr.push(H.name),
this._entireFieldObj[H.name]=a.clone(H),this.selectedFields&&this.selectedFields[H.name]&&(this._entireFieldObj[H.name].label=this.selectedFields[H.name].label))}));this.layerInfo&&this.layerInfo.originOperLayer&&this.layerInfo.originOperLayer.popupInfo?b=this.layerInfo.originOperLayer.popupInfo:this.layerInfo&&this.layerInfo.getPopupInfo&&this.layerInfo.getPopupInfo()&&(b=this.layerInfo.getPopupInfo());b&&b.expressionInfos&&v.forEach(b.expressionInfos,a.hitch(this,function(H){H=a.clone(H);H.name=
"expression/"+H.name;this._entireFieldObj[H.name]=H;-1<t.indexOf(H.returnType)&&(this._entireFieldsArr.push(H.name),this._entireFieldObj[H.name].alias=H.title+" {"+H.name+"}",this.selectedFields&&this.selectedFields[H.name]&&(this._entireFieldObj[H.name].label=this.selectedFields[H.name].label))}));0===this._entireFieldsArr.length&&this._disableAddFieldButton()},_createFieldsTable:function(){this._fieldsTable=new p({fields:[{name:"layer",title:this.nls.analysisTab.addFieldsNameTitle,"class":"label",
type:"empty",width:"40%"},{name:"field",title:this.nls.common.label,type:"empty",editable:"true",width:"40%"},{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"20%"}]});this._fieldsTable.placeAt(this.fieldTable);c.setStyle(this._fieldsTable.domNode,{height:"100%"});this._fieldsTable.startup()},_attachEventsToElement:function(){this.own(d(this.btnAddField,"click",a.hitch(this,function(){if(!B.contains(this.btnAddField,"esriCTDisabled")){var b=
this._getDistinctFields(this._entireFieldsArr,this._selectedFieldsArr);this._addFieldsRow(b);this._onFieldsSelectionChange()}})));this.own(d(this._fieldsTable,"row-delete",a.hitch(this,function(b){this._deleteFieldRow(b);this._setSortFieldDropdownLabel()})))},_addFieldsRow:function(b){var m=this._fieldsTable.addRow({});if(m.success&&m.tr){m=m.tr;var t=u(".simple-table-cell",m);var H=t[0];t=t[1];this._addFieldDropdown(b,H,m);this._addLabelTextbox(t,m)}},_deleteFieldRow:function(b){B.remove(this.btnAddField,
"esriCTDisabled");var m=this._selectedFieldsArr.indexOf(b.fieldDropdownInstance.value);-1<m&&this._selectedFieldsArr.splice(m,1);this.fieldsDropdown.removeOption(m);this._addSelectedFieldInOtherDropdown(b.fieldDropdownInstance.value,null)},_addFieldDropdown:function(b,m,t){b=this._getDistinctFieldsOptionsObj(b);b=new K({"class":"esriCTFieldChooserDropdown",options:b});b.placeAt(m);b.startup();this._configuredField&&b.set("value",this._configuredField,!1);t.fieldDropdownInstance=b;this.own(d(b,"change",
a.hitch(this,function(H){var n=this._selectedFieldsArr[t.rowIndex];this._selectedFieldsArr[t.rowIndex]=H;this._addSelectedFieldInOtherDropdown(n,H);this._removeSelectedFieldFromOtherDropdown(H);this._setLayerFieldsDropdownLabel();this._onFieldsSelectionChange()})));this._selectedFieldsArr.push(b.value);this._removeSelectedFieldFromOtherDropdown(b.value);this._disableAddFieldButton();this._setLayerFieldsDropdownLabel()},_disableAddFieldButton:function(){this._selectedFieldsArr.length===this._entireFieldsArr.length&&
B.add(this.btnAddField,"esriCTDisabled")},_addLabelTextbox:function(b,m){var t=new I({"class":"esriCTFieldValidationTextBox"});t.placeAt(b);t.startup();this._configuredLabel&&(t.set("value",this._configuredLabel),this._configuredLabel=null);m.fieldLabelInstance=t},_getDistinctFieldsOptionsObj:function(b){var m=[];v.forEach(b,a.hitch(this,function(t){m.push({label:this._entireFieldObj[t].alias||this._entireFieldObj[t].name,value:t})}));return m},_removeSelectedFieldFromOtherDropdown:function(b){var m=
this._fieldsTable.getRows();v.forEach(m,a.hitch(this,function(t){b!==t.fieldDropdownInstance.value&&t.fieldDropdownInstance.removeOption(b)}))},_addSelectedFieldInOtherDropdown:function(b,m){var t=this._fieldsTable.getRows();v.forEach(t,a.hitch(this,function(H){m!==H.fieldDropdownInstance.value&&H.fieldDropdownInstance.addOption({label:this._entireFieldObj[b].alias,value:b})}))},okButtonClicked:function(){var b={};var m={};var t=this._fieldsTable.getRows();0===t.length?this.selectedFields=null:(v.forEach(t,
a.hitch(this,function(H){this._entireFieldObj[H.fieldDropdownInstance.value].label=F.stripHTML(a.trim(H.fieldLabelInstance.value));b[H.fieldDropdownInstance.value]=this._entireFieldObj[H.fieldDropdownInstance.value]})),this.selectedFields=b);m.selectedFields=this.selectedFields;m.groupbyfieldCheckBoxStatus=this.groupByFieldCheckBox.get("checked");m.sortInfo=this._getSortInfo();return m},_getDistinctFields:function(b,m){return b.filter(function(t){return 0>m.indexOf(t)})},_setPreviousGroupByFieldCheckboxStatus:function(){""!==
this.groupbyfieldCheckBoxStatus&&null!==this.groupbyfieldCheckBoxStatus&&void 0!==this.groupbyfieldCheckBoxStatus&&this.groupByFieldCheckBox.setValue(this.groupbyfieldCheckBoxStatus)},_getSortInfo:function(){return{sortOrder:this.ascRadioBtn.checked?"Asc":"Desc",sortingField:this.fieldsDropdown.value}},_onFieldsSelectionChange:function(){this.fieldsDropdown.options=[];v.forEach(this._selectedFieldsArr,a.hitch(this,function(b){this.fieldsDropdown.addOption({label:this._entireFieldObj[b].alias||this._entireFieldObj[b].name,
value:b})}));this._addStatisticsFieldOption();this.fieldsDropdown.set("value",this.selectedSortingField);this._setSortFieldDropdownLabel()},_getFieldText:function(b,m){return b.label?b.label:b.alias?b.alias:m},_addStatisticsFieldOption:function(){"esriGeometryPoint"===this.featureLayer.geometryType&&this.fieldsDropdown.addOption({label:this.nls.analysisTab.statisticsCountLabel,value:"esriCTCountField"});"esriGeometryPolyline"===this.featureLayer.geometryType&&this.fieldsDropdown.addOption({label:this.nls.analysisTab.statisticsTotalLengthLabel,
value:"esriCTTotalLengthField"});"esriGeometryPolygon"===this.featureLayer.geometryType&&this.fieldsDropdown.addOption({label:this.nls.analysisTab.statisticsTotalAreaLabel,value:"esriCTTotalAreaField"})},_getSortFieldValue:function(){var b=this.currentRow.sortInfo.sortingField;if(-1===this.fieldsDropdown.options.map(function(H){return H.value}).indexOf(b))for(var m in this._entireFieldObj){var t=this._entireFieldObj[m];t=this._getFieldText(t,m);t===b&&(b=m)}return b},_setSortFieldDropdownLabel:function(){this.fieldsDropdown.set("title",
this.fieldsDropdown.getOptions(this.fieldsDropdown.value).label)},_setLayerFieldsDropdownLabel:function(){var b;var m=this._fieldsTable.getRows();v.forEach(m,a.hitch(this,function(t){(b=t.fieldDropdownInstance.value)&&t.fieldDropdownInstance.set("title",t.fieldDropdownInstance.getOptions(b).label)}))}})})},"widgets/Screening/setting/SearchSourceSettings":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./SearchSourceSettings.html dojo/_base/html jimu/dijit/SimpleTable ./QuerySourceSetting ./LocatorSourceSetting jimu/LayerInfos/LayerInfos ../searchSourceUtils jimu/utils dojo/when esri/lang dojo/_base/lang dojo/_base/array dojo/query dojo/on dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H,n){return x([E,K,I],{baseClass:"jimu-widget-screening-search-source-settings",templateString:v,startup:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(t(this.menuItemClickNode,"click",F.hitch(this,this._onMenuItemClick)));this._createSourceListTable();this.showInfoWindowOnSelect=new n({checked:!1,label:this.nls.searchSourceSetting.generalSettingCheckboxLabel},this.showInfoWindowOnSelectNode);this.config&&
this.config.sources||(this.config.sources=[]);l.getInstance(this.map,this.map.itemInfo).then(F.hitch(this,function(f){this.layerInfosObj=f;q.setMap(this.map);q.setLayerInfosObj(this.layerInfosObj);q.setAppConfig(this.appConfig);u(q.getConfigInfo(this.config)).then(F.hitch(this,this._loadConfig))}))},_loadConfig:function(f){this.domNode&&this.setConfig(f)},setConfig:function(f){this.config=f;f=f.sources;this.allPlaceholder.set("value",p.stripHTML(this.config.allPlaceholder));this.showInfoWindowOnSelect.setValue(B.isDefined(this.config.showInfoWindowOnSelect)?
!!this.config.showInfoWindowOnSelect:!0);b.forEach(f,F.hitch(this,function(z,D){var N=this.sourceList.addRow({name:z.name||""});N&&N.success?(this._setRelatedConfig(N.tr,z),0===D&&setTimeout(F.hitch(this,function(){this.sourceList.selectRow(N.tr)}),100)):console.error("add row failed ",N)}))},getConfig:function(){if(this._currentSourceSetting)if(this._currentSourceSetting.isValidConfig())this._closeSourceSetting();else return null;var f={allPlaceholder:p.stripHTML(this.allPlaceholder.get("value")),
showInfoWindowOnSelect:this.showInfoWindowOnSelect.checked},z=this.sourceList.getRows(),D=[];b.forEach(z,F.hitch(this,function(N){var P=this._getRelatedConfig(N);delete P._definition;this._removeRelatedConfig(N);D.push(P)}));f.sources=D;return f},destroy:function(){q.setMap(null);q.setLayerInfosObj(null);q.setAppConfig(null);this.inherited(arguments)},_onAllPlaceholderBlur:function(){this.allPlaceholder.set("value",p.stripHTML(this.allPlaceholder.get("value")))},_createSourceListTable:function(){this.sourceList=
new c({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.common.name,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.sourceList);a.setStyle(this.sourceList.domNode,"height","100%");this.sourceList.startup();this.own(t(this.sourceList,"row-select",F.hitch(this,this._onSourceItemSelected)));this.own(t(this.sourceList,"row-delete",F.hitch(this,this._onSourceItemRemoved)))},_onSourceItemRemoved:function(f){this._currentSourceSetting&&
this._currentSourceSetting.getRelatedTr()===f&&(this._currentSourceSetting.destroy(),this._currentSourceSetting=null)},_onSourceItemSelected:function(f){var z=this._getRelatedConfig(f),D=this._currentSourceSetting&&this._currentSourceSetting.tr;z&&f!==D&&(this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?(this._currentSourceSetting.showValidationTip(),this.sourceList.selectRow(D)):(H.remove(this.searchSources,"esriCTSourcesExtraHeight"),"query"===z.type?this._createNewQuerySourceSettingFromSourceList(z,
z._definition||{},f):"locator"===z.type&&this._createNewLocatorSourceSettingFromSourceList(z,z._definition||{},f)))},_setRelatedConfig:function(f,z){m(f).data("config",F.clone(z))},_getRelatedConfig:function(f){return m(f).data("config")[0]},_removeRelatedConfig:function(f){return m(f).removeData("config")},_onMenuItemClick:function(f){f=f&&f.target&&a.getAttr(f.target,"type");this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?this.emit("invalid-source-setting"):(H.remove(this.searchSources,
"esriCTSourcesExtraHeight"),"locator"===f?this._addNewLocator():"query"===f&&this._addNewQuerySource())},_addNewLocator:function(){this._createNewLocatorSourceSettingFromMenuItem({},{})},_addNewQuerySource:function(){this._createNewQuerySourceSettingFromMenuItem({},{})},_createNewLocatorSourceSettingFromMenuItem:function(f,z){var D=new e({nls:F.mixin(this.nls.searchSourceSetting,window.jimuNls.units),map:this.map});D.setDefinition(z);D.setConfig({url:f.url||"",name:f.name||"",singleLineFieldName:f.singleLineFieldName||
"",placeholder:f.placeholder||"",countryCode:f.countryCode||"",maxSuggestions:f.maxSuggestions||6,maxResults:f.maxResults||6,searchInCurrentMapExtent:!!f.searchInCurrentMapExtent,type:"locator"});D._openLocatorChooser();D.own(t(D,"select-locator-url-ok",F.hitch(this,function(N){(N=this.sourceList.addRow({name:N.name||"New Geocoder"},this.sourceList.getRows().length))&&N.success&&(this._currentSourceSetting&&this._closeSourceSetting(),D.setRelatedTr(N.tr),D.placeAt(this.sourceSettingNode),this.sourceList.selectRow(N.tr),
this._currentSourceSetting=D)})));D.own(t(D,"reselect-locator-url-ok",F.hitch(this,function(N){var P=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(P,{name:N.name})})));D.own(t(D,"select-locator-url-cancel",F.hitch(this,function(){this._currentSourceSetting!==D&&(D.destroy(),D=null)})))},_createNewLocatorSourceSettingFromSourceList:function(f,z,D){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new e({nls:F.mixin(this.nls.searchSourceSetting,window.jimuNls.units),
map:this.map});this._currentSourceSetting.own(t(this._currentSourceSetting,"enable-local-search",F.hitch(this,function(){H.add(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.own(t(this._currentSourceSetting,"disable-local-search",F.hitch(this,function(){H.remove(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.setDefinition(z);this._currentSourceSetting.setConfig({url:f.url||"",name:f.name||"",singleLineFieldName:f.singleLineFieldName||"",
placeholder:f.placeholder||"",countryCode:f.countryCode||"",maxSuggestions:f.maxSuggestions||6,maxResults:f.maxResults||6,searchInCurrentMapExtent:!!f.searchInCurrentMapExtent,enableLocalSearch:!!f.enableLocalSearch,localSearchMinScale:f.localSearchMinScale,localSearchDistance:f.localSearchDistance,type:"locator"});this._currentSourceSetting.setRelatedTr(D);this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.own(t(this._currentSourceSetting,"reselect-locator-url-ok",
F.hitch(this,function(N){var P=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(P,{name:N.name})})))},_closeSourceSetting:function(){var f=this._currentSourceSetting.getRelatedTr(),z=this._currentSourceSetting.getConfig();z._definition=this._currentSourceSetting.getDefinition();this._setRelatedConfig(f,z);this.sourceList.editRow(f,{name:z.name});this._currentSourceSetting.destroy()},_createNewQuerySourceSettingFromMenuItem:function(f,z){var D=new d({nls:this.nls.searchSourceSetting,
map:this.map,appConfig:this.appConfig});D.setDefinition(z);D.setConfig({url:f.url,name:f.name||"",layerId:f.layerId,placeholder:f.placeholder||"",searchFields:f.searchFields||[],displayField:f.displayField||z.displayField||"",exactMatch:!!f.exactMatch,maxSuggestions:f.maxSuggestions||6,maxResults:f.maxResults||6,searchInCurrentMapExtent:!!f.searchInCurrentMapExtent,type:"query"});D._openQuerySourceChooser();D.own(t(D,"select-query-source-ok",F.hitch(this,function(N){(N=this.sourceList.addRow({name:N.name},
0))&&N.success&&(this._currentSourceSetting&&this._closeSourceSetting(),D.setRelatedTr(N.tr),D.placeAt(this.sourceSettingNode),this.sourceList.selectRow(N.tr),this._currentSourceSetting=D)})));D.own(t(D,"reselect-query-source-ok",F.hitch(this,function(N){var P=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(P,{name:N.name})})));D.own(t(D,"select-query-source-cancel",F.hitch(this,function(){this._currentSourceSetting!==D&&(D.destroy(),D=null)})))},_createNewQuerySourceSettingFromSourceList:function(f,
z,D){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new d({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.setDefinition(z);this._currentSourceSetting.setConfig({url:f.url,name:f.name||"",layerId:f.layerId,placeholder:f.placeholder||"",searchFields:f.searchFields||[],displayField:f.displayField||z.displayField||"",exactMatch:!!f.exactMatch,maxSuggestions:f.maxSuggestions||
6,maxResults:f.maxResults||6,searchInCurrentMapExtent:!!f.searchInCurrentMapExtent,type:"query"});this._currentSourceSetting.setRelatedTr(D);this._currentSourceSetting.own(t(this._currentSourceSetting,"reselect-query-source",F.hitch(this,function(N){var P=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(P,{name:N.name})})))}})})},"widgets/Screening/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H){return x([K,I,v,p],{baseClass:"jimu-widget-screening-query-source-setting",templateString:a,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,constructor:function(n){this._layerId=this._fieldsCheckBox=this._layerDefinition=null;this._clickSet=this._suggestible=!1;this.fieldsPopup=this.config=this.tr=this.map=this.appConfig=this.nls=null;c.mixin(this,
n)},postMixInProperties:function(){this.nls.common={};this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.own(e(this.setSourceBtnClickNode,"click",c.hitch(this,this._onSetSourceClick)));this.own(e(this.sourceName,"Blur",c.hitch(this,this._onSourceNameBlur)));this.own(e(this.placeholder,"Blur",c.hitch(this,this._onPlaceholderBlur)));this.own(e(this.fieldsSelectorNode,"click",c.hitch(this,this._onFieldsSelectorClick)));this.exactMatch=new H({checked:!1,label:this.nls.exactMatch},
this.exactMatch);this.searchInCurrentMapExtent=new H({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=[];this._setMessageNodeContent("")},setDefinition:function(n){this._layerDefinition=n||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(n){this.tr=n},getRelatedTr:function(){return this.tr},setConfig:function(n){if("[object Object]"===Object.prototype.toString.call(n)){var f=n.url;f&&(this.config=
n,this.shelter.show(),this._layerDefinition.url!==f?this._getDefinitionFromRemote(f).then(c.hitch(this,function(z){f&&z&&"error"!==z.type?(this._layerDefinition=z,this._layerDefinition.url=f,this._setSourceItems(),this._setMessageNodeContent("")):f&&z&&"error"===z.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(b.substitute({URL:z.url},c.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},
isValidConfig:function(){var n=this.getConfig();return n.url&&n.name&&n.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:m.stripHTML(this.sourceName.get("value")),placeholder:m.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),
searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",m.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",
m.stripHTML(this.placeholder.get("value")))},_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",!0);E.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);E.setStyle(this.fieldsSelectorNode,
"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",m.stripHTML(this.config.name||""));this.placeholder.set("value",m.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",this.config.displayField||
"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?this._hideSuggestibleTips():this._showSuggestibleTips();
this._enableSourceItems()},_getDefinitionFromRemote:function(n){var f=new q,z=F({url:n,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(z);z.then(c.hitch(this,function(D){f.resolve(D)}),c.hitch(this,function(D){console.error(D);f.resolve({type:"error",url:this._getRequestUrl(n)})}));return f.promise},_setMessageNodeContent:function(n,f){E.empty(this.messageNode);n.nodeType||(n=E.toDom(n));E.place(n,this.messageNode);f?E.setStyle(this.messageTr,"display",""):E.setStyle(this.messageTr,
"display","none")},_getRequestUrl:function(n){var f=window.location.protocol;return"http:"===f?B.setHttpProtocol(n):"https:"===f?B.setHttpsProtocol(n):n},_setSearchFields2Node:function(){var n=null,f=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(n=[]);if(f){var z=this._layerDefinition.fields;n=d.filter(this.config.searchFields,function(D){return d.some(z,function(N){return N.name===
D})})}else n=this.config.searchFields;this.searchFields.set("_fields",n)},_setDisplayFieldOptions:function(){var n=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?n=d.map(this._layerDefinition.fields,function(f){return{label:f.alias||f.name||"",value:f.name||""}}):this.config&&this.config.displayField&&(n=[{label:this.config.displayField,value:this.config.displayField}]);this.displayField.set("options",n)},_getSearchFieldsAlias:function(){var n=this._getSearchFields();
if(!(n&&0<n.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var f=this._layerDefinition.fields,z=d.map(f,function(y){return y&&y.name}),D=[],N=0,P=n.length;N<P;N++){var L=z.indexOf(n[N]);-1<L&&(f[L].alias?D.push(f[L].alias):D.push(f[L].name))}return D.join(",")}return n.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},_setSearchFields:function(n){this.searchFields.set("_fields",n)},_onSetSourceClick:function(){this._clickSet=
!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var n=new u({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});e.once(n,"ok",c.hitch(this,function(f){n.close();this.setDefinition(f.definition||{});this.setConfig({layerId:f.layerInfo&&f.layerInfo.id||null,url:f.url,name:f.name||"",placeholder:"",
searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,maxSuggestions:6,maxResults:6,type:"query"});n=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",f):this.emit("select-query-source-ok",f)}));e.once(n,"cancel",c.hitch(this,function(){n.close();n=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var n=E.create("div",{style:{maxHeight:"480px"}}),f=this._layerDefinition.fields;this._fieldsCheckBox=
[];d.forEach(f,c.hitch(this,function(z,D){var N=new H({checked:this._isSearchable(z),label:z.alias||z.name});E.addClass(N.domNode,"esriCTSearchSourceFieldCheckbox");E.addClass(N.labelNode,"jimu-ellipsis");E.setAttr(N.domNode,{title:z.alias||z.name});0===D%3&&(window.isRTL?E.setStyle(N.domNode,"marginRight",0):E.setStyle(N.domNode,"marginLeft",0));N.placeAt(n);l(N.domNode).data("fieldName",z.name);this._fieldsCheckBox.push(N)}));this.fieldsPopup=new t({titleLabel:this.nls.setSearchFields,autoHeight:!0,
content:n,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.common.ok,onClick:c.hitch(this,"_onSearchFieldsOk")},{label:this.nls.common.cancel}],onClose:c.hitch(this,function(){this.fieldsPopup=null})});E.addClass(this.fieldsPopup.domNode,this.baseClass)},_onSearchFieldsOk:function(){var n=[];d.forEach(this._fieldsCheckBox,function(f){if(f.getValue()){var z=l(f.domNode).data("fieldName");n.push(z[0]);l(f.domNode).removeData()}});this._setSearchFields(n);this.searchFields.set("value",
this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(n){var f=this._getSearchFields();return d.some(f,c.hitch(this,function(z){return n.name===z}))},_showSuggestibleTips:function(){E.removeClass(this.tipsNode,"esriCTHidden");E.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){E.addClass(this.tipsNode,"esriCTHidden");E.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(n){if(!n.validate()&&n.domNode&&
n.focusNode){var f=n.get("disabled");f&&n.set("disabled",!1);n.focusNode.focus();setTimeout(c.hitch(this,function(){n.focusNode.blur();f&&n.set("disabled",!0);n=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(x,E,K,I,v,a,c,d,e){return x([a,E],{width:830,height:560,titleLabel:"",dijitArgs:null,
postCreate:function(){this.inherited(arguments);v.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new c(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(K(this.fls,"ok",I.hitch(this,function(l){if(0!==l.length){var q=l[0];if(q.definition)try{q.definition.name=q.name,q.definition.url=q.url,this.emit("ok",q)}catch(p){console.error(p)}else this.loading.show(),
e({url:q.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(I.hitch(this,function(p){if(this.domNode){this.loading.hide();q.definition=p;try{q.definition.name=q.name,q.definition.url=q.url,this.emit("ok",q)}catch(u){console.error(u)}}}),I.hitch(this,function(p){console.error(p);this.domNode&&this.loading.hide()}))}})));this.own(K(this.fls,"cancel",I.hitch(this,function(){try{this.emit("cancel")}catch(l){console.error(l)}})))},_initLoading:function(){this.loading=new d({hidden:!0});
this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),function(x,E,K,I,
v,a,c,d,e,l,q,p,u,B){return x([E,K,I,e],{templateString:v,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,layerChooserFromMap:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=B.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var F=[];this.mapRadio.checked?F=this.flcMap.getSelectedItems():this.portalRadio.checked?F=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(F=this.flcUrl.getSelectedItems());return F},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();
this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new q({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0,layerChooserFromMap:this.layerChooserFromMap});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(d(this.flcMap,"ok",a.hitch(this,function(F){F&&0<F.length&&
this.emit("ok",F)})));this.own(d(this.flcMap,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new p({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(d(this.flcPortal,"next",a.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));
this.own(d(this.flcPortal,"back",a.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(d(this.flcPortal,"ok",a.hitch(this,function(F){F&&0<F.length&&this.emit("ok",F)})));this.own(d(this.flcPortal,"cancel",a.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=
new u({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(d(this.flcUrl,"ok",a.hitch(this,function(F){F&&0<F.length&&this.emit("ok",F)})));this.own(d(this.flcUrl,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var F="featureLayerSourceRadios_"+this._getRandomString(),b=a.hitch(this,this._onRadioClicked);this.mapRadio=new l({group:F,onStateChange:b,checked:!0});
this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new l({group:F,onStateChange:b,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new l({group:F,onStateChange:b,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(d(this.mapLabel,"click",a.hitch(this,function(){this.mapRadio.check()})));this.own(d(this.portalLabel,"click",a.hitch(this,function(){this.portalRadio.check()})));this.own(d(this.urlLabel,"click",a.hitch(this,function(){this.urlRadio.check()})))},
_getRandomString:function(){var F=Math.random().toString();return F=F.slice(2,F.length)},_onRadioClicked:function(){c.setStyle(this.flcContainer,"display","none");c.setStyle(this.hflcContainer,"display","none");c.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(c.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(c.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(c.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(x,E,K,I,v,a,c,d,e){return v([a,c,d,E],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
layerChooserFromMap:null,constructor:function(l){this.options=l},postMixInProperties:function(){this.nls=K.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=this.layerChooserFromMap?this.layerChooserFromMap:new e(this.options);this.layerChooser.placeAt(this.chooserContainer);I.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(x(this.layerChooser,"tree-click",K.hitch(this,function(){0<this.getSelectedItems().length?I.removeClass(this.btnOk,
"jimu-state-disabled"):I.addClass(this.btnOk,"jimu-state-disabled")})));this.own(x(this.btnOk,"click",K.hitch(this,function(){var l=this.getSelectedItems();0<l.length&&this.emit("ok",l)})));this.own(x(this.btnCancel,"click",K.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(x,E,K,I,v){return x([v],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=I.hitch(this,
this.basicFilter);this.filter=v.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=v.andCombineFilters([this.filter,I.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);K.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(a){return a.getLayerType().then(function(c){return!("ArcGISDynamicMapServiceLayer"===c||"ArcGISTiledMapServiceLayer"===
c||"GroupLayer"===c)})},basicFilter:function(a){var c=new E;0<=this.ignoredFeaturelayerIds.indexOf(a.id)?c.resolve(!1):this.onlyShowVisible&&"Table"!==a.getLayerType()?c.resolve(a.isShowInMap()):c.resolve(!0);return c},getHandledItem:function(a){var c=this.inherited(arguments),d=a&&a.layerInfo;d=d&&d.layerObject;c.url=d&&d.url||"";return c}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m){return x([E,K,I,p],{templateString:v,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=a.mixin({},window.jimuNls.common);this.nls=a.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=b.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new B({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(e(this.selector,"item-selected",a.hitch(this,this._onItemSelected)));this.own(e(this.selector,"none-item-selected",a.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new F({multiple:this.multiple});this.own(e(this.serviceBrowser,"tree-click",a.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){c.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){c.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();c.setStyle(this.btnOk,"display","none");c.setStyle(this.btnNext,"display","block");c.setStyle(this.btnBack,"display","none");c.addClass(this.btnOk,"jimu-state-disabled");c.setStyle(this.selectorContainer,"display","block");c.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var t=this.getSelectedItems();0<t.length&&this.emit("ok",t)},_onBtnNextClicked:function(){var t=this.selector.getSelectedItem();
t&&(c.setStyle(this.btnNext,"display","none"),c.setStyle(this.btnBack,"display","block"),c.setStyle(this.btnOk,"display","block"),c.addClass(this.btnOk,"jimu-state-disabled"),c.setStyle(this.selectorContainer,"display","none"),c.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(t.url||t.item),this._serviceBrowserDef.then(a.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),a.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):c.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array",
"jimu/serviceBrowserRuleUtils"],function(x,E,K,I,v){return x([E],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=v.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var a=this.inherited(arguments);return a=I.map(a,K.hitch(this,function(c){return{name:c.name,url:c.url,definition:c.definition}}))}})})},
"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(x,E,K){return x([E],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(I){return new K(I)}})})},
"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(x,E,K,I,v){var a=E.NodeList,c={},d=0,e=function(p){var u=v.get(p,"data-dojo-dataid");u||(u="pid"+d++,v.set(p,"data-dojo-dataid",u));return u},l=x._nodeData=function(p,u,B){var F=e(p),b;c[F]||(c[F]={});if(1==arguments.length)return c[F];"string"==typeof u?2<arguments.length?c[F][u]=B:b=c[F][u]:b=K.mixin(c[F],u);return b},q=x._removeNodeData=function(p,u){p=e(p);c[p]&&(u?delete c[p][u]:
delete c[p])};a._gcNodeData=x._gcNodeData=function(){var p=E("[data-dojo-dataid]").map(e),u;for(u in c)0>I.indexOf(p,u)&&delete c[u]};K.extend(a,{data:a._adaptWithCondition(l,function(p){return 0===p.length||1==p.length&&"string"==typeof p[0]}),removeData:a._adaptAsForEach(q)});return a})},"widgets/Screening/setting/LocatorSourceSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/portalUrlUtils jimu/dijit/Message jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter esri/request esri/lang ../searchSourceUtils jimu/utils dojo/text!./LocatorSourceSetting.html jimu/dijit/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox".split(" "),
function(x,E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H,n){return x([c,d,e,v],{baseClass:"jimu-widget-screening-locator-source-setting",templateString:H,_clickSet:!1,_suggestible:!1,_locatorDefinition:null,_esriLocatorRegExp:/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,tr:null,nls:null,config:null,geocoderPopup:null,singleLineFieldName:null,serviceChooserContent:null,constructor:function(f){this._suggestible=this._clickSet=!1;this._locatorDefinition=null;this._esriLocatorRegExp=
/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g;this.serviceChooserContent=this.singleLineFieldName=this.geocoderPopup=this.config=this.nls=this.tr=null;E.mixin(this,f)},postCreate:function(){this.inherited(arguments);this.exampleHint=this.nls.locatorExample+": http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer";this.own(I(this.setButtonNode,"click",E.hitch(this,this._onSetLocatorUrlClick)));this.own(I(this.locatorName,"Blur",E.hitch(this,
this._onLocatorNameBlur)));this.own(I(this.placeholder,"Blur",E.hitch(this,this._onPlaceholderBlur)));this.own(I(this.countryCode,"Blur",E.hitch(this,this._onCountryCodeBlur)));this.searchInCurrentMapExtent=new n({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this.enableLocalSearch=new n({checked:!1,label:this.nls.enableLocalSearch},this.enableLocalSearch);this._processLocalSearchTable(!1);this.own(I(this.enableLocalSearch,"change",E.hitch(this,function(){this._processLocalSearchTable(this.enableLocalSearch.getValue())})));
K.setStyle(this.enableLocalSearch.domNode,"display","none");this._setMessageNodeContent(this.exampleHint);this.config=this.config?this.config:{};this.setConfig(this.config)},setRelatedTr:function(f){this.tr=f},getRelatedTr:function(){return this.tr},setDefinition:function(f){this._locatorDefinition=f||{}},getDefinition:function(){return this._locatorDefinition},setConfig:function(f){if("[object Object]"===Object.prototype.toString.call(f)){var z=f.url;z&&(this.config=f,this.shelter.show(),this._locatorDefinition.url!==
z?this._getDefinitionFromRemote(z).then(E.hitch(this,function(D){z&&D&&"error"!==D.type?(this._locatorDefinition=D,this._locatorDefinition.url=z,this._setSourceItems(),this._setMessageNodeContent(this.exampleHint)):z&&D&&"error"===D.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(b.substitute({URL:D.url},E.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setSourceItems(),this._setMessageNodeContent(this.exampleHint),this.shelter.hide()))}},isValidConfig:function(){var f=
this.getConfig();return f.url&&f.name&&f.singleLineFieldName?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.locatorUrl);this._showValidationErrorTip(this.locatorName)},getConfig:function(){return{url:this.locatorUrl.get("value"),name:t.stripHTML(this.locatorName.get("value")),singleLineFieldName:this.singleLineFieldName,placeholder:t.stripHTML(this.placeholder.get("value")),countryCode:t.stripHTML(this.countryCode.get("value")),maxSuggestions:this.maxSuggestions.get("value")||
6,maxResults:this.maxResults.get("value")||6,searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,enableLocalSearch:this.enableLocalSearch.getValue(),localSearchMinScale:this.localSearchMinScale.get("value"),localSearchDistance:this.localSearchDistance.get("value"),type:"locator"}},_onLocatorNameBlur:function(){this.locatorName.set("value",t.stripHTML(this.locatorName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",t.stripHTML(this.placeholder.get("value")))},
_onCountryCodeBlur:function(){this.countryCode.set("value",t.stripHTML(this.countryCode.get("value")))},_disableSourceItems:function(){this.locatorName.set("disabled",!0);this.placeholder.set("disabled",!0);this.countryCode.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.locatorName.set("disabled",!1);this.placeholder.set("disabled",!1);this.countryCode.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",
!1)},_setSourceItems:function(){var f=this.config;f.url&&(this.locatorUrl.set("value",f.url),this._processCountryCodeRow(f.url));f.name&&this.locatorName.set("value",t.stripHTML(f.name));f.singleLineFieldName&&(this.singleLineFieldName=f.singleLineFieldName);f.placeholder&&this.placeholder.set("value",t.stripHTML(f.placeholder));f.countryCode&&this.countryCode.set("value",t.stripHTML(f.countryCode));"capabilities"in this._locatorDefinition?(K.setStyle(this.enableLocalSearch.domNode,"display",""),
this._processLocalSearchTable(f.enableLocalSearch),this.enableLocalSearch.setValue(f.enableLocalSearch),f.localSearchMinScale&&f.enableLocalSearch&&this.localSearchMinScale.set("value",f.localSearchMinScale),f.localSearchDistance&&f.enableLocalSearch&&this.localSearchDistance.set("value",f.localSearchDistance)):(this.enableLocalSearch.setValue(!1),K.setStyle(this.enableLocalSearch.domNode,"display","none"));(this._suggestible=this._locatorDefinition&&this._locatorDefinition.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?
this._hideSuggestibleTips():this._showSuggestibleTips();this.searchInCurrentMapExtent.setValue(!!f.searchInCurrentMapExtent);this.maxSuggestions.set("value",f.maxSuggestions||6);this.maxResults.set("value",f.maxResults||6);this._enableSourceItems()},_isEsriLocator:function(f){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(f)},_getDefinitionFromRemote:function(f){var z=new a;if(this._isEsriLocator(f))z.resolve({singleLineAddressField:{name:"SingleLine",type:"esriFieldTypeString",
alias:"Single Line Input",required:!1,length:200,localizedNames:{},recognizedNames:{}},capabilities:"Geocode,ReverseGeocode,Suggest"});else{var D=F({url:f,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(D);D.then(E.hitch(this,function(N){z.resolve(N)}),E.hitch(this,function(N){console.error(N);z.resolve({type:"error",url:this._getRequestUrl(f)})}))}return z.promise},_setMessageNodeContent:function(f,z){K.empty(this.messageNode);f.nodeType||(f=K.toDom(f));K.place(f,this.messageNode);
z?K.addClass(this.messageNode,"esriCTErrorMessage"):K.removeClass(this.messageNode,"esriCTErrorMessage")},_getRequestUrl:function(f){var z=window.location.protocol;return"http:"===z?l.setHttpProtocol(f):"https:"===z?l.setHttpsProtocol(f):f},_onSetLocatorUrlClick:function(){this._clickSet=!0;this._openServiceChooser()},_openLocatorChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){this.serviceChooserContent=new p({url:this.locatorUrl.get("value")||""});
this.shelter=new B({hidden:!0});this.geocoderPopup=new u({titleLabel:this.nls.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,container:window.jimuConfig.layoutId,width:640});this.shelter.placeAt(this.geocoderPopup.domNode);K.setStyle(this.serviceChooserContent.domNode,"width","580px");K.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(I(this.serviceChooserContent,"validate-click",E.hitch(this,function(){K.removeClass(this.serviceChooserContent.domNode,
"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(I(this.serviceChooserContent,"ok",E.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(I(this.serviceChooserContent,"cancel",E.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(f){f&&f[0]&&f[0].url&&this.domNode&&(this.shelter.show(),F({url:f[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(E.hitch(this,function(z){this.shelter.hide();z&&z.singleLineAddressField&&
z.singleLineAddressField.name?(this._enableSourceItems(),this.locatorUrl.set("value",f[0].url),this.locatorName.get("value")||this.locatorName.set("value",m.getGeocoderName(f[0].url)),"capabilities"in z?(K.setStyle(this.enableLocalSearch.domNode,"display",""),this._isEsriLocator(f[0].url)?this.enableLocalSearch.setValue(!0):this.enableLocalSearch.setValue(!1)):(this.enableLocalSearch.setValue(!1),K.setStyle(this.enableLocalSearch.domNode,"display","none")),this.singleLineFieldName=z.singleLineAddressField.name,
this._processCountryCodeRow(f[0].url),this._locatorDefinition=z,this._locatorDefinition.url=f[0].url,(this._suggestible=z.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips(),this._clickSet?this.emit("reselect-locator-url-ok",this.getConfig()):this.emit("select-locator-url-ok",this.getConfig()),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),this._setMessageNodeContent(this.exampleHint)):new q({message:this.nls.locatorWarning})}),
E.hitch(this,function(z){console.error(z);this.shelter.hide();new q({message:b.substitute({URL:this._getRequestUrl(f[0].url)},E.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_processLocalSearchTable:function(f){f?(K.removeClass(this.minScaleNode,"esriCTHidden"),K.removeClass(this.radiusNode,"esriCTHidden"),this.emit("enable-local-search")):(K.addClass(this.minScaleNode,
"esriCTHidden"),K.addClass(this.radiusNode,"esriCTHidden"),this.emit("disable-local-search"))},_processCountryCodeRow:function(f){this._isEsriLocator(f)?(this.countryCode.set("value",""),K.removeClass(this.countryCodeRow,"hide-country-code-row")):K.addClass(this.countryCodeRow,"hide-country-code-row")},_showSuggestibleTips:function(){K.removeClass(this.tipsNode,"esriCTHidden");K.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){K.addClass(this.tipsNode,"esriCTHidden");
K.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(f){if(!f.validate()&&f.domNode&&f.focusNode){var z=f.get("disabled");z&&f.set("disabled",!1);f.focusNode.focus();setTimeout(E.hitch(this,function(){f.focusNode.blur();z&&f.set("disabled",!0);f=null}),100)}}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(x,E,K){return x([E],{baseClass:"jimu-geocode-service-chooser-content",
_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(I){return new K(I)}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(x,E,K,I,v){return x([E],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=v.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var a=this.inherited(arguments);return a=I.map(a,K.hitch(this,function(c){return{name:c.name,url:c.url}}))}})})},"widgets/Screening/searchSourceUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils esri/lang esri/request".split(" "),function(x,E,K,I,v,a,c,d){return{map:null,layerInfosObj:null,
appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,setMap:function(e){this.map=e},setLayerInfosObj:function(e){this.layerInfosObj=e},setAppConfig:function(e){this.appConfig=e},getConfigInfo:function(e){if(e&&e.sources&&0<e.sources.length){var l=null;return this.searchLayer(this.map)&&e.upgradeFromGeocoder?(l=this.map.itemInfo.itemData.applicationProperties.viewing.search,l=E.map(l.layers,x.hitch(this,function(q,p){p.hintText=q;return this._getQueryTypeGeocoder(p)},
l.hintText)),v(l).then(x.hitch(this,function(q){e.sources=[].concat(q).concat(e.sources);return e}))):e}return I(this._getSourcesFromPortalAndWebmap()).then(x.hitch(this,function(q){return{allPlaceholder:"",showInfoWindowOnSelect:!0,sources:q}}))},_getSourcesFromPortalAndWebmap:function(){var e=[],l=null;this.searchLayer(this.map)&&(l=this.map.itemInfo.itemData.applicationProperties.viewing.search,E.forEach(l.layers,x.hitch(this,function(q,p){p.hintText=q;e.push(this._getQueryTypeGeocoder(p))},l.hintText)));
return a.getPortalSelfInfo(this.appConfig.portalUrl).then(x.hitch(this,function(q){if((q=q.helperServices&&q.helperServices.geocode)&&0<q.length)for(var p=0,u=q.length;p<u;p++){var B=q[p];B&&e.push(this._processSingleLine(B))}return v(e).then(x.hitch(this,function(F){for(var b=[],m=0;m<F.length;m++){var t=F[m];t&&(t&&"query"===t.type?b.push(t):(t={name:t.name||this._getGeocodeName(t.url),url:t.url,singleLineFieldName:t.singleLineFieldName,placeholder:t.placeholder||t.name||this._getGeocodeName(t.url),
maxResults:6,searchInCurrentMapExtent:!1,type:"locator"},t.enableLocalSearch=this._isEsriLocator(t.url),t.localSearchMinScale=3E5,t.localSearchDistance=5E4,b.push(t)))}return b}))}))},_getQueryTypeGeocoder:function(e){var l=this.map.getLayer(e.id),q=null,p=null,u=null;u=c.isDefined(e.subLayer)?e.id+"_"+e.subLayer:e.id;q=this.layerInfosObj.traversal(function(B){return B.id===u?(p=B,!0):!1});return l&&q&&p?(q=c.isDefined(e.subLayer)?p.url||l.url+"/"+e.subLayer:p.url||l.url,{name:p.title,layerId:u,url:q,
placeholder:e.hintText,searchFields:[e.field.name],displayField:e.field.name,exactMatch:e.field.exactMatch||!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(e){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(e)},_processSingleLine:function(e){if(e.singleLineFieldName)return e;if(this._isEsriLocator(e.url))return e.singleLineFieldName="SingleLine",e;var l=new K;d({url:e.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(x.hitch(this,
function(q){q.singleLineAddressField&&q.singleLineAddressField.name?(e.singleLineFieldName=q.singleLineAddressField.name,l.resolve(e)):(console.warn(e.url+"has no singleLineFieldName"),l.resolve(null))}),x.hitch(this,function(q){console.error(q);l.resolve(null)}));return l.promise},_getGeocodeName:function(e){if("string"!==typeof e)return"geocoder";e=e.split("/");return e[e.length-2]||"geocoder"},getGeocoderName:function(e){return this._getGeocodeName(e)},hasAppSearchInfo:function(e){return e.itemInfo&&
e.itemInfo.itemData&&e.itemInfo.itemData.applicationProperties&&e.itemInfo.itemData.applicationProperties.viewing&&e.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(e){if(!this.hasAppSearchInfo(e))return!1;e=e.itemInfo.itemData.applicationProperties.viewing.search;return e.enabled&&e.layers&&0!==e.layers.length?!0:!1}}})},"widgets/Screening/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],
function(){})},"url:widgets/Screening/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n    \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n      \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton"\x3e\r\n        ${nls.common.ok}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/DownloadSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Download Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.downloadLegend}\x3c/legend\x3e\r\n    \x3c!--Sync enable download Option--\x3e\r\n    \x3cform data-dojo-attach-point\x3d"downloadOptionForm" class\x3d"esriCTDownloadOptionForm"\x3e\r\n      \x3c!--Sync-enable feature service option--\x3e\r\n      \x3cdiv class\x3d"esriCTSyncEnableOptionDiv"\x3e\r\n        \x3c!--Sync-enable radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"syncEnableOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"syncEnable" data-dojo-attach-point\x3d"syncEnableRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"syncEnableOption"\x3e\r\n          ${nls.downloadTab.syncEnableOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3c!--Sync-enable download option label and hint container--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.syncEnableOptionHint}\r\n            \x3cbr\x3e${nls.downloadTab.syncEnableOptionNote}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Table representation of download file options for each layer--\x3e\r\n      \x3cdiv class\x3d"esriCTLayerDownloadOptionTable" data-dojo-attach-point\x3d"downloadOptionTable"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task geoprocessing service option--\x3e\r\n      \x3cdiv class\x3d"esriCTGPServiceOptionDiv"\x3e\r\n        \x3c!--Extract data task radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"gpServiceOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"extractDataTask" data-dojo-attach-point\x3d"gpServiceRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--Extract data task download option label and hint container--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"gpServiceOption"\x3e\r\n          ${nls.downloadTab.extractDataTaskOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.extractDataTaskOptionHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task INPUT Container--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer esriCTHidden" data-dojo-attach-point\x3d"extractDataTaskInputContainer"\x3e\r\n        \x3c!--Extract data task INPUT TEXTBOX label--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel" title\x3d"${nls.downloadTab.GPTaskLabel}"\x3e\r\n          ${nls.downloadTab.GPTaskLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Extract data task TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"extractDataTaskTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set Button--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"extractDataTaskSetButton"\r\n          title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--User cannot download--\x3e\r\n      \x3cdiv class\x3d"esriCTCannotDownloadOptionDiv"\x3e\r\n        \x3c!--User cannot download radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"cannotDownloadOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"cannotDownload" data-dojo-attach-point\x3d"cannotDownloadRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--User cannot download option label div--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"cannotDownloadOption"\x3e\r\n          ${nls.downloadTab.cannotDownloadOptionLabel}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3c!--Report Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.reportLegend}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTReportSettingsContainer"\x3e\r\n      \x3c!--Print service URL container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer" data-dojo-attach-point\x3d"printGPServiceInputContainer"\x3e\r\n        \x3c!--Print Service url LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.printGPServiceLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Print Service url TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"printGPServiceTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set BUTTON--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"printGPServiceSetButton"\r\n          title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Print service URL container ends--\x3e\r\n      \x3c!-- Print layout container starts --\x3e\r\n      \x3c!-- Defaut layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"defaultLayoutTable" class\x3d"esriCTDefaultLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Default layout ends --\x3e\r\n      \x3c!-- Custom Layout button starts --\x3e\r\n      \x3cdiv class\x3d"esriCTAddCustomLayoutParentContainer esriCTCustomOptionBtnAddSection esriCTCustomOptionButtonDisable"\r\n        data-dojo-attach-point\x3d"addCustomOptionButton"\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddIcon esriCTCustomOptionBtnAddIconDisable" data-dojo-attach-point\x3d"addCustomOptionButtonIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddLabel"\x3e${nls.downloadTab.addCustomLayoutTitle}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTHint esriCTCustomLayoutHintText"\x3e${nls.downloadTab.customLayoutOptionHint}\x3c/div\x3e\r\n      \x3c!-- Custom Layout button ends --\x3e\r\n      \x3c!-- Custom layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"customLayoutTable" class\x3d"esriCTCustomLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Custom layout ends --\x3e\r\n      \x3c!-- Default print layout option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDefaultPrintTemplateContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateText"\x3e${nls.downloadTab.reportDefaultOptionLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateDropdown" data-dojo-attach-point\x3d"defaultPrintTemplateDropdown"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Default print layout option ends --\x3e\r\n      \x3c!-- Print layout container ends --\x3e\r\n      \x3c!--Logo chooser starts--\x3e\r\n      \x3cdiv class\x3d"esriCTLogoChooserMainContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.logoLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLogoChooserDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTImageChooserPreviewContainer"\x3e\r\n            \x3cimg class\x3d"esriCTImageChooserPreview" data-dojo-attach-point\x3d"imageChooserPreview"\x3e\r\n            \x3cdiv class\x3d"esriCTLogoChooser" data-dojo-attach-point\x3d"logoChooserNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.logoChooserHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Logo chooser ends--\x3e\r\n      \x3c!--Report Title container start--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3c!--Report Title  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.reportTitleLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Report Title  TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportTitleTextBox" class\x3d"esriCTDownloadTabReportInputNode" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Report Title container end--\x3e\r\n      \x3c!--No data string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"noDataTextRepresentation"\x3e\r\n        \x3c!--No data String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.noDataTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--No data string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"noDataTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode"\r\n          data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.downloadTab.noDataDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--No data string representation ends--\x3e\r\n      \x3c!--NA string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"naTextRepresentation"\x3e\r\n        \x3c!--NA String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.naTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--NA string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"naTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode"\r\n          data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.downloadTab.notApplicableDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--NA String Representation ends--\x3e\r\n      \x3c!--Column title Color Picker container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.columnTitleColorPickerLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabReportInputNode"\x3e\r\n          \x3cdiv class\x3d"esriCTColorPickerPreviewField" data-dojo-attach-point\x3d"columnTitleColorPickerNode"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Column title Color Picker container ends--\x3e\r\n      \x3c!-- Display summary in report option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"displaySummaryInReportCheckBox" checked\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.displaySummaryLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Display summary in report option ends --\x3e\r\n      \x3c!-- Hide rows having all values zero in report option starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"hideAllZeroRowCheckBox" checked\x3d"false"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.hideZeroValueRowLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Hide rows having all values zero in report option ends--\x3e\r\n      \x3c!-- Hide rows having all values NULL in report option starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"hideNullRowCheckBox" checked\x3d"false"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.hideNullValueRowLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Hide rows having all values NULL in report option ends--\x3e\r\n      \x3c!--Footnote container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTFootnoteContainer"\x3e\r\n        \x3c!--Footnote LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.footnoteLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Footnote TextEditor--\x3e\r\n        \x3cdiv class\x3d"esriCTFootnoteTextArea" data-dojo-attach-point\x3d"footNoteEditor"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Footnote container ends--\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpSource.html":'\x3cdiv\x3e\r\n  \x3cdiv style\x3d"display: flex;"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"margin-left: 20px;"\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"source-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container hflc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container flsc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"layers" data-dojo-attach-point\x3d"browserContainer"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/GpServiceBrowser" data-dojo-attach-point\x3d"gpServiceBrowser"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable role\x3d"listbox" aria-haspopup\x3d"true" data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.customSelectLayer}" aria-label\x3d"${nls.customSelectLayer}"\x3e\r\n    \x3ccaption class\x3d"screen-readers-only-no-position"\x3e${nls.customSelectLayer}\x3c/caption\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Screening/setting/FieldPicker.html":'\x3cdiv style\x3d"padding-right: 20px;"\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.analysisTab.addFieldsPopupTitle}\x3c/legend\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"tableArea" class\x3d"esriCTLayerFieldSelector esriCTReportSettingsContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"btnAddField" class\x3d"esriCTBtnAddSection"\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddLabel" data-dojo-attach-point\x3d"addFieldLabel"\x3e\r\n          ${nls.analysisTab.addFieldsLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTGroupByFieldContainer"\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"groupByFieldCheckBox"\r\n          class\x3d"esriCTGroupByFieldCheckBox" checked\x3d"true"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTGroupByFieldColumnLabel"\x3e\r\n          ${nls.analysisTab.allowGroupingLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.groupingHintDescription}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidFields"\x3e\r\n        ${nls.analysisTab.noValidFieldsForAnalysis}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"fieldTable"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.analysisTab.sortingSettingsLegend}\x3c/legend\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sortFieldSettingsNode"\x3e\r\n      \x3cdiv class\x3d"esriCTRadioBtnContainer esriCTReportSettingsContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTRadioBtn"\x3e\r\n          \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn"\r\n            data-dojo-attach-point\x3d"ascRadioBtn" aria-label\x3d"${nls.analysisTab.ascendingLabel}"\x3e\r\n          \x3clabel class\x3d"esriCTRadioLabel" for\x3d"ascRadio"\x3e\r\n            ${nls.analysisTab.ascendingLabel}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTRadioBtn"\x3e\r\n          \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn"\r\n            data-dojo-attach-point\x3d"descRadioBtn" aria-label\x3d"${nls.analysisTab.descendingLabel}"\x3e\r\n          \x3clabel class\x3d"esriCTRadioLabel" for\x3d"descRadio"\x3e\r\n            ${nls.analysisTab.descendingLabel}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n        \x3cdiv class\x3d"esriCTRadioBtnContainer esriCTReportSettingsContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTSelectLabel esriCTEllipsis" title\x3d"${nls.analysisTab.sortFieldSelectLabel}"\x3e\r\n            ${nls.analysisTab.sortFieldSelectLabel}\r\n          \x3c/div\x3e\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"esriCTDropBox esriCTSortFieldSelectLabelWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"fieldsDropdown"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/SearchSourceSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Search source setting hint text --\x3e\r\n  \x3cdiv class\x3d"esriCTHint" style\x3d"width: 99%"\x3e ${nls.searchSourceSetting.searchSourceSettingTitleHintText}\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTDropdownButton" role\x3d"button"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan\x3e ${nls.searchSourceSetting.addSearchSourceLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cul class\x3d"esriCTDropdownMenu" role\x3d"menu" data-dojo-attach-point\x3d"menuItemClickNode"\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"query"\x3e${nls.searchSourceSetting.featureLayerLabel}\x3c/li\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"locator"\x3e${nls.searchSourceSetting.geocoderLabel}\x3c/li\x3e\r\n    \x3c/ul\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTSources" data-dojo-attach-point\x3d"searchSources"\x3e\r\n    \x3cdiv class\x3d"esriCTSourceList jimu-float-leading"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"sourceList" style\x3d"100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTSourceSetting jimu-float-trailing" data-dojo-attach-point\x3d"sourceSettingNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3c!--General setting: Label--\x3e\r\n    \x3cdiv class\x3d"esriCTlabel esriCTGeneralSettingLabelStyle"\x3e\r\n      ${nls.searchSourceSetting.generalSettingLabel}\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: All Place Holder Label--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.allPlaceholderLabel}"\x3e\r\n        ${nls.searchSourceSetting.allPlaceholderLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerField esriCTSearchSourceFloatRight" style\x3d"width: 72%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"allPlaceholder" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--General setting: All Place Holder Hint--\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e\r\n          ${nls.searchSourceSetting.allPlaceholderHintText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: Checkbox--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont " data-dojo-attach-point\x3d"showInfoWindowOnSelectNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/QuerySourceSetting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3c!--Select geocoder url --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.layerSource}"\x3e\r\n        ${nls.layerSource}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setSourceBtnClickNode"\r\n          title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint esriCTErrorMessage"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection"\x3e\r\n    \x3c!--Details section: Name --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.common.name}"\x3e\r\n        ${nls.common.name}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: searchFields --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.searchFields}"\x3e\r\n        ${nls.searchFields}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTsearchFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: displayField --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.displayField}"\x3e\r\n        ${nls.displayField}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxSuggestions --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.searchLayerTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxResult --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: exactMatch --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section: loading shelter --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/LocatorSourceSetting.html":'\x3cdiv\x3e\r\n  \x3c!--Select Locator URL --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.locatorUrl}"\x3e\r\n        ${nls.locatorUrl}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv title\x3d"${nls.set}" class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setButtonNode"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Locator Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection" ata-dojo-attach-point\x3d"detailsSection"\x3e\r\n    \x3c!--Details section: locatorName --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.locatorName}"\x3e\r\n        ${nls.locatorName}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"locatorName" placeHolder\x3d"${nls.locatorName}"\r\n          required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeholder" placeHolder\x3d"${nls.placeholder}"\r\n          data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: country --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"countryCodeRow"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.countryCode}"\x3e\r\n          ${nls.countryCode}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n          \x3cdiv type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"countryCode" placeHolder\x3d"${nls.countryCodeEg} USA,CHN"\r\n            data-dojo-props\x3d\'style:{width:"97%"}\'\x3e\x3c/div\x3e\r\n          \x3ca class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"\r\n            style\x3d"line-height:30px;"\x3e${nls.questionMark}\x3c/a\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.countryCodeHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max suggestion --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.locatorTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max result --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"enableLocalSearch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - minimum scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"minScaleNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.minScale}"\x3e\r\n        ${nls.minScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"localSearchMinScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:300000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.minScaleHint}"\x3e${nls.minScaleHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - radius --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"radiusNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.radius}"\x3e\r\n        ${nls.radius}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading" data-dojo-attach-point\x3d"localSearchDistance" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'75%\'},value:50000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint esriCTLocalSearchRadiusUnit"\x3e${nls.meters}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"radiusHintNode" title\x3d"${nls.radiusHint}"\x3e${nls.radiusHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: loading shelter --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:widgets/Screening/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTTabDiv" data-dojo-attach-point\x3d"tabContainer"\x3e\r\n      \x3c!--Analysis tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"analysisTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3c!--Add Layers section --\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"selectAnalysisLayerLabel" class\x3d"esriCTSelectAnalysisLayerLabel"\x3e\r\n              ${nls.analysisTab.selectAnalysisLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"btnAddLayer" class\x3d"esriCTBtnAddSection"\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddLabel"\x3e${nls.analysisTab.addLayerLabel}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidLayers"\x3e\r\n              ${nls.analysisTab.noValidLayersForAnalysis}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint esriCTHintAddLayer"\x3e\r\n            ${nls.analysisTab.addLayersHintText}\x3cbr\x3e${nls.analysisTab.queryCapabilityHintText}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"addLayerTableNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Add Layers section end--\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--AOI Tools section--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.analysisTab.aoiToolsLegendLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"aoiToolsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTAnalysisAOIToolsDescriptionLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.aoiToolsDescriptionLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Place Name section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"placeNameCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.placenameLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"placeNameTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Place Name section ends--\x3e\r\n                  \x3c!--Draw Tool section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"drawToolCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.drawToolsLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"drawToolTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Draw Tool section ends--\x3e\r\n                  \x3c!--Upload Shapfile section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"uploadShapefileCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.uploadShapeFileLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"uploadShapeFileTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Upload Shapfile section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Co-ordinates section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"coordinatesCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.coordinatesLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"coordinatesTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Co-ordinates section ends--\x3e\r\n                  \x3c!--Traverses Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                        data-dojo-attach-point\x3d"traverseUnitsNode"\x3e\r\n                        \x3coption value\x3d"uSSurveyFeet" selected\x3d"selected"\x3e${nls.units.uSSurveyFeet}\x3c/option\x3e\r\n                        \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverses Units section ends--\x3e\r\n                  \x3c!--Traverse Direction Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits esriCTTraverseDirectionUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                        data-dojo-attach-point\x3d"traverseDirectionUnitsNode"\x3e\r\n                        \x3coption value\x3d"decimalDegree" selected\x3d"selected"\x3e${nls.units.decimalDegree}\x3c/option\x3e\r\n                        \x3coption value\x3d"degreeMinuteSeconds"\x3e${nls.units.degreeMinuteSeconds}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesBearingDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverse Direction Units section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Tools section ends--\x3e\r\n          \x3c!-- Select draw tools starts --\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet esriCTHidden" data-dojo-attach-point\x3d"selectDrawToolFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.analysisTab.drawToolsSettingsFieldsetLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTSelectDrawToolMainContainer"\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolLabel"\x3e\r\n                ${nls.analysisTab.selectDrawToolsText}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolsParentContainer"\x3e\r\n                \x3c!-- Point tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPointToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPointToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"pointSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPointToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPointLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Point tool ends --\x3e\r\n                \x3c!-- Polyline tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPolylineToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPolylineToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"polylineSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolylineToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPolylineLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Polyline tool ends --\x3e\r\n                \x3c!-- Extent tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectExtentToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTExtentToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"extentSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTExtentToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolExtentLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Extent tool ends --\x3e\r\n                \x3c!-- Polygon tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPolygonToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPolygonToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"polygonSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolygonToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPolygonLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Polygon tool ends --\x3e\r\n                \x3c!-- Circle tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectCircleToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTCircleToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"circleSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTCircleToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolCircleLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Circle tool ends --\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTSelectToolLayersParentContainer"\x3e\r\n              \x3cdiv\x3e${nls.analysisTab.drawToolSelectableLayersLabel}\x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.drawToolSelectableLayersHint}\x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolLayerTableNode" data-dojo-attach-point\x3d"drawToolSelectableLayerContainer"\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!-- Select draw tools ends --\x3e\r\n          \x3c!--Allow Uploading shapefiles section starts--\x3e\r\n          \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"uploadShapefileSection"\x3e\r\n              \x3c!--upload shapefile options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                  data-dojo-attach-point\x3d"allowUploadShapefileCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowShapefilesUploadLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowShapefilesUploadLabelHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--upload shapefile options section ends--\x3e\r\n              \x3c!--layer analysis options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                  data-dojo-attach-point\x3d"allowVisibleLayerAnalysisCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowVisibleLayerAnalysisLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowVisibleLayerAnalysisHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--layer analysis options section ends--\x3e\r\n              \x3c!--Area units options section starts--\x3e\r\n              \x3c!-- \x3cdiv class\x3d"esriCTAreaUnitsMainContainer"\x3e --\x3e\r\n              \x3c!-- Area unit --\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsLabel"\x3e\r\n                  ${nls.analysisTab.areaUnitsLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsDropDownContainer"\x3e\r\n                  \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                    data-dojo-attach-point\x3d"areaUnitsDropDown"\x3e\r\n                    \x3coption selected\x3d"selected" value\x3d"SquareFeet"\x3e${nls.units.areaSquareFeetUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Acres"\x3e${nls.units.areaAcresUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"SquareMeters"\x3e${nls.units.areaSquareMetersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"SquareKilometers"\x3e${nls.units.areaSquareKilometersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Hectares"\x3e${nls.units.areaHectaresUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"SquareMiles"\x3e${nls.units.areaSquareMilesUnit}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!-- Line unit --\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsLabel"\x3e\r\n                  ${nls.analysisTab.lengthUnitsLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsDropDownContainer"\x3e\r\n                  \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                    data-dojo-attach-point\x3d"lengthUnitsDropDown"\x3e\r\n                    \x3coption selected\x3d"selected" value\x3d"Feet"\x3e${nls.units.lengthFeetUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Miles"\x3e${nls.units.lengthMilesUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Meters"\x3e${nls.units.lengthMetersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Kilometers"\x3e${nls.units.lengthKilometersUnit}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!-- \x3c/div\x3e --\x3e\r\n              \x3c!--units options section ends--\x3e\r\n              \x3c!--max feature for analysis starts--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel"\x3e\r\n                  ${nls.analysisTab.maxFeatureForAnalysisLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                      data-dojo-attach-point\x3d"maxFeatureCountTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.maxFeatureForAnalysisHintText}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--max feature for analysis ends--\x3e\r\n              \x3c!--search tolerance--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv" data-dojo-attach-point\x3d"toleranceSection"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel" data-dojo-attach-point\x3d"searchToleranceLabel"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                      data-dojo-attach-point\x3d"searchToleranceTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.searchToleranceHint}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--search tolerance ends--\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!--Allow Uploading shapefiles section ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Analysis tab contents end--\x3e\r\n      \x3c!--Download tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"downloadTabNode" class\x3d"esriCTTabNode"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Download tab contents end--\x3e\r\n      \x3c!--General tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"generalTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--Tab Labels Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.tabLabelsLegend}\x3c/legend\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"tabLabelsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--AOI Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.AOITabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"aoiTabTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--AOI Tab label section ends--\x3e\r\n                  \x3c!--Reports Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.ReportTabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"reportsTabTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Reports Tab label section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Tab Labels Fieldset ends--\x3e\r\n          \x3c!--Buffer Settings Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.bufferSettingsLegend}\x3c/legend\x3e\r\n            \x3c!--Buffer Settings Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"bufferSettingsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3c!--Default Buffer Settings section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Default Buffer Distance section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferDistanceLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                        data-dojo-attach-point\x3d"defaultBufferDistanceTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Default Buffer Distance section ends--\x3e\r\n                  \x3c!--Buffer Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferUnitsLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTGeneralDropDownContainer"\x3e\r\n                        \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                          data-dojo-attach-point\x3d"defaultBufferUnitsNode"\x3e\r\n                          \x3coption value\x3d"UNIT_FOOT"\x3e${nls.units.feet}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_STATUTE_MILE"\x3e${nls.units.miles}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_KILOMETER"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_METER"\x3e${nls.units.meters}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Buffer Units section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Default Buffer Settings section ends--\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions esriCTGeneralBufferSymbologyContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                        \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                          ${nls.generalTab.aoiBufferSymbologyLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"aoiSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTGeneraBufferSymbologylHint"\x3e\r\n                          ${nls.generalTab.generalBufferSymbologyHint}\r\n                        \x3c/div\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Buffer Settings Fieldset ends--\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.generalTab.aoiGraphicsSymbologyLegend}\x3c/legend\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                  ${nls.generalTab.aoiGraphicsSymbologyHint}\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTSymbologyLabel esriCTEllipsis" title\x3d"${nls.generalTab.pointSymbologyLabel}"\x3e\r\n                    ${nls.generalTab.pointSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField esriCTPreviewSymbology" data-dojo-attach-point\x3d"pointSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTSymbologyLabel esriCTEllipsis" title\x3d"${nls.generalTab.lineSymbologyLabel}"\x3e\r\n                    ${nls.generalTab.lineSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField esriCTPreviewSymbology" data-dojo-attach-point\x3d"lineSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTSymbologyLabel esriCTEllipsis" title\x3d" ${nls.generalTab.polygonSymbologyLabel}"\x3e\r\n                    ${nls.generalTab.polygonSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolygonPreview esriCTPreviewSymbology" data-dojo-attach-point\x3d"polygonSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section ends--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section ends--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--General tab contents end--\x3e\r\n      \x3c!-- Search Source Settings tab --\x3e\r\n      \x3cdiv class\x3d"esriCTTabNode" data-dojo-attach-point\x3d"searchSourceTabNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/css/style.css":".jimu-widget-screening-setting .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTFieldError {float: right; line-height: 0;}.jimu-widget-screening-setting .jimu-viewstack {height: calc(100% - 45px); overflow: auto;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTTabNode {padding-right: 20px; margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-screening-setting .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .row {clear: both;}.jimu-widget-screening-setting .esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTHint {margin: 5px 5px 10px 0px; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-screening-setting .esriCTHintAddLayer {margin: 5px 5px 10px 0px;}.jimu-widget-screening-setting::-ms-clear {display: none;}.jimu-widget-screening-setting .esriCTFieldSet {height: auto; width: 100%; border: 1px solid #a0acbf; border-radius: 5px; font-size: 14px; color: #596679; margin-bottom: 10px; min-width: 0px;}.jimu-widget-screening-setting .esriCTFieldSetLegend {margin-left: 20px;}.jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {width: 100%; float: left;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {float: right;}.jimu-widget-screening-setting .esriCTTextBox {width: 90%; margin-top: 10px;}.jimu-widget-screening-setting .esriCTFieldsetMainContainer {clear: both; width: 95%; margin: 0 auto; padding-top: 5px;}.jimu-widget-screening-setting .esriCTFieldsetContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTFieldsLabel {float: left; padding-left: 10px; width: 80%;}.jimu-widget-screening-setting .esriCTCheckBox {float: left; margin-right: 0px;}.jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {padding: 10px 0; width: 100%;}.jimu-widget-screening-setting .esriCTAOIToolsOptions {width: 33%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTTraverseUnits {width: 31%; float: left; padding-right: 10px; padding-top: 36px;}.jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 16px;}.jimu-widget-screening-setting .esriCTDropBox {width: 100%;}.jimu-widget-screening-setting .esriCTDropDownContainer {width: 100%; float: left; padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTFieldChooserDropdown, .jimu-widget-screening-setting .esriCTFieldValidationTextBox {height: 26px; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTAddLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTSelectDrawToolLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTBtnAddSection, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-screening-setting .esriCTLayerFieldSelector .jimu-simple-table {max-height: 350px !important;}.jimu-widget-screening-setting .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/custom-button-enable.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIconDisable {background-image: url(images/custom-button-disable.png) !important;}.jimu-widget-screening-setting .esriCTBtnAddLabel, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddLabel {height: 100%; line-height: 20px; margin-left: 7px; text-decoration: none; display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTDisabled {cursor: default; color: #a0acbf; opacity: 0.6;}.jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-left: 0px; float: left; text-align: center; vertical-align: middle; padding-right: 10px;}.jimu-widget-screening-setting .esriCTNoLayersOrFieldsForAnalysisLabel {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-screening-setting .esriCTTRPreviewText {height: 26px;}.jimu-widget-screening-setting .esriCTLayerLabelTextBox {width: 100%; height: 29px; float: left;}.jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 0;}.jimu-widget-screening-setting .esriCTAllowShapeFileOption {padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {width: 60%; float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {width: 100%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureInputParentContainer {clear: both; width: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTMaxFeatureTextBox {width: 200px; float: left; margin: 0px 5px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: right;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureTextBox {float: right; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriCTDownloadRadioButton {float: left;}.jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: left; width: 97%; margin-left: 27px;}.jimu-widget-screening-setting .esriCTDownloadLabel {float: left; margin-left: 10px;}.jimu-widget-screening-setting .esriCTLayerDownloadOptionTable {margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTTableHeader {text-align: center;}.jimu-widget-screening-setting .esriCTAvailableDownloadOption {background: url(../css/images/check.png) center no-repeat;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTDownloadTabInputContainer {width: 100%; float: left; margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabReportTitleContainer {width: 100%; float: left; margin-bottom: 15px; padding-top: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabLabel {width: 35%; line-height: 30px; float: left; clear: left; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}.jimu-widget-screening-setting .esriCTDownloadTabTextbox {width: 55%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabReportInputNode {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabSetButton {width: 8%; float: left; margin-left: 17px; line-height: 28px;}.jimu-widget-screening-setting .esriCTDownloadTabFieldSet {padding: 15px 0px;}.jimu-widget-screening-setting .esriCTDownloadOptionForm, .jimu-widget-screening-setting .esriCTReportSettingsContainer {margin: 0px auto; width: 96%;}.jimu-widget-screening-setting .esriCTFootnoteTextArea {width: 65% !important; padding: 5px !important; float: right; color: #596679;}.jimu-widget-screening-setting .esriCTLogoChooserDiv {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTImageChooserPreviewContainer {position: relative;}.jimu-widget-screening-setting .esriCTImageChooserPreview {position: absolute; top: 0; bottom: 0; margin: auto; max-height: 100%;}.jimu-widget-screening-setting .esriCTImageChooserContent {height: 50px !important; width: 50px !important;}.jimu-widget-screening-setting .esriCTColorChooserNode {text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: left; margin-bottom: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: right; margin-right: 27px; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadLabel {float: right; margin-right: 10px; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadRadioButton {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabSetButton {float: left; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabTextbox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: right;}.jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {width: 45%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralDropDownContainer {width: 90%; float: left; margin-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {max-width: 50%; width: auto; min-width: 15px; float: left; color: rgb(89, 102, 121); font-size: 14px; line-height: 40px;}.jimu-widget-screening-setting .esriCTGeneralBufferSymbologyContainer {width: 100%;}.jimu-widget-screening-setting .esriCTGeneraBufferSymbologylHint {clear: both;}.jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: left; padding-left: 0px; width: 80%;}.jimu-widget-screening-setting .esriCTSymbolChooserNode {cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTSymbolPreviewText {padding-right: 5px; color: #596679; font-size: 14px; max-width: 130px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-screening-setting .esriCTPreviewField {float: left; margin-bottom: 5px; padding: 5px 0px 0px 45px;}.jimu-widget-screening-setting .esriCTSymbolChooserContainer {height: calc(100% - 50px); overflow: auto;}.jimu-widget-screening-setting .esriCTPolygonPreview {float: left; margin-top: 5px; margin-bottom: 5px; padding: 5px 0px 0px 22px;}.claro .dijitTextBox, .claro .dijitSelect {color: #7989a0; background-color: #fafafc; border: 1px solid #d2dae2;}.dj_webkit .claro .dijitTextBox .dijitInputInner {color: #7989a0;}.claro .dijitSelectDisabled, .claro .dijitTextBoxDisabled, .claro .dijitTextBoxDisabled .dijitInputContainer {background-color: #e3ecf2;}.claro .dijitSelect .dijitInputField {background-color: #fafafc !important; color: #7989a0; font-size: 14px;}.claro .dijitTextBox, .claro .dijitSelect {border-color: #d2dae2;}.claro .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-screening-setting .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.jimu-widget-screening-setting .esriCTURLSetButton {height: 30px; line-height: 30px; margin: 0 0 0 10px; float: right; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTlabel {width: 25%; padding: 5px 10px 5px 0px; word-break: break-all; margin-top: 5px; margin-bottom: 5px; float: left; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; min-width: 250px; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .esriCTDropdownButton {margin: 8px 0; display: inline-block; background-repeat: no-repeat; background-position: left; position: relative; padding-left: 16px; color: #518dca; background-image: url(images/add.png); cursor: pointer;}.jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {position: absolute; display: none; list-style-type: none; top: 18px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {right: 0; left: auto;}.jimu-widget-screening-setting .esriCTDropdownButton:hover .esriCTDropdownMenu {display: inline-block;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem {white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem:hover {background: #edf2f5; color: #15a4fa;}.jimu-widget-screening-setting .esriCTSources {height: 366px;}.jimu-widget-screening-setting .esriCTSourcesExtraHeight {height: 516px !important;}.jimu-widget-screening-setting .esriCTSourceList {width: 270px; height: 100%;}.jimu-widget-screening-setting .esriCTSourceSetting {width: 650px; position: relative;}.jimu-widget-screening-setting .source-table, .jimu-widget-screening-setting .general-setting-table {width: 100%;}.jimu-widget-screening-setting .esriCTSearchSourceLayerField {width: 70%;}.jimu-widget-screening-setting .esriCTSearchSourceLabel {width: 25%; min-width: 182px;}.jimu-widget-screening-setting .esriCTLocalSearchLabel {margin-left: 22px; width: 24%; min-width: 146px;}.jimu-widget-screening-setting .esriCTSearchSourceLabelFont {font-size: 14px; color: #596679;}.jimu-widget-screening-setting .esriCTLayerSource {width: 80% !important;}.jimu-widget-screening-setting .esriCTsearchFieldsSelector {display: inline-block; background-repeat: no-repeat; background-position: center; margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background-image: url(images/selector.png);}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTSearchSourceLayer {width: 84% !important;}.jimu-widget-screening-setting .esriCTURLWidthLabel {width: 105px; min-width: 105px;}.jimu-widget-screening-setting .esriCTSearchDetailsSection {width: 175px;}.jimu-widget-screening-setting .esriCTGeneralSettingLabelStyle {font-weight: bold;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox {width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox .label {width: 140px;}.jimu-widget-screening-setting .jimu-simple-table .simple-table-field, .jimu-simple-table .simple-table-cell {cursor: pointer;}.jimu-widget-screening-setting .esriCTLayerContainer {width: 100%; float: left; margin: 0px;}.jimu-widget-screening-setting .esriCTLayerField {float: left;}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {line-height: 30px; float: right;}.jimu-widget-screening-setting .esriCTErrorMessage {color: #e84b4b;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTTabNode {padding-left: 20px; padding-right: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTHint {float: right; margin: 5px 0px 10px 5px;}.esriRtl .jimu-widget-screening-setting .esriCTHintAddLayer {float: right; margin: 5px 5px 10px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetLegend {margin-right: 20px;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsetContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsLabel {padding-left: 0px; padding-right: 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAOIToolsOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBtnAddLabel {margin-right: 7px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-right: 0px; float: right; padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 8px; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: right; padding-left: 0px; width: 80%;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPreviewField {float: right; padding: 5px 45px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonPreview {padding-right: 0px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTlabel {padding: 5px 0px 5px 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton {padding-right: 16px; background-position: right;}.esriRtl .jimu-widget-screening-setting .esriCTSearchSourceURLField {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseUnits {float: right; width: 30%; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 0px; margin-right: 25px;}.esriRtl .jimu-widget-screening-setting .esriCTURLSetButton {float: left; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriRTLTabContainerNode{overflow: overlay;}.jimu-widget-screening-download-settings .esriCTDefaultLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {clear: both; float: left;}.jimu-widget-screening-download-settings .esriCTAddLayoutText {float: left; padding-left: 10px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutHintText {clear: both}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateContainer {clear: both; width: 100%; padding-bottom: 15px; overflow: auto;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: left; width: 35%;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: left; width: 33%;}.jimu-widget-screening-download-settings .esriCTCustomOptionButtonDisable {color: #808080 !important; cursor: default;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: right;}.jimu-widget-screening-setting .esriCTSelectDrawToolsParentContainer {width: 100%; height: 100%; clear: both; overflow: hidden; padding: 10px;}.jimu-widget-screening-setting .esriCTSelectPointToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectPolylineToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectExtentToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectPolygonToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectCircleToolParentContainer {width: 25%; float: left; padding-top: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPointToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPolylineToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectExtentToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPolygonToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectCircleToolParentContainer {float: right;}.jimu-widget-screening-setting .esriCTPointToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPolylineToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTExtentToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPolygonToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTCircleToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPointToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTPolylineToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTExtentToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTPolygonToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTCircleToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPointToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolylineToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTExtentToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTCircleToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPointToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPolylineToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTExtentToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTCircleToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.jimu-widget-screening-setting .esriCTSelectDrawToolMainContainer {padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectDrawToolMainContainer {padding-left: 0px; padding-right: 10px;}.jimu-widget-screening-setting .esriCTSelectToolLayersParentContainer {padding-left: 10px; padding-right: 10px;}.jimu-widget-screening-setting .esriCTGroupByFieldContainer {width: 100%; overflow: hidden; clear: both; padding-top: 5px; padding-bottom: 5px; font-size: 13px;}.jimu-widget-screening-setting .esriCTGroupByFieldCheckBox {float: left;}.jimu-rtl .jimu-widget-screening-setting .esriCTGroupByFieldCheckBox {float: right;}.jimu-widget-screening-setting .esriCTGroupByFieldColumnLabel {float: left; padding-left: 5px;}.jimu-rtl .jimu-widget-screening-setting .esriCTGroupByFieldColumnLabel {float: right; padding-left: 0px; padding-right: 5px;}.jimu-widget-screening-setting .esriCTDisplaySummaryParentContainer {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTDisplaySummaryParentContainer {float: right;}.jimu-widget-screening-setting .esriCTDisplaySummaryLabel {float: left; padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTDisplaySummaryLabel {float: right; padding-left: 0px; padding-right: 10px;}.jimu-widget-screening-setting .esriCTRadioBtnContainer {margin-left: 20px; display: inline-flex}.jimu-rtl .jimu-widget-screening-setting .esriCTRadioBtnContainer {margin-right: 20px;}.jimu-widget-screening-setting .esriCTRadioLabel {vertical-align: top; padding-right: 70px;}.jimu-rtl .jimu-widget-screening-setting .esriCTRadioLabel {padding-right: 0px; padding-left: 70px;}.jimu-widget-screening-setting .esriCTSelectLabel {padding-right: 40px; line-height: 30px; width: 22%;}.jimu-rtl .jimu-widget-screening-setting .esriCTSelectLabel {padding-left: 40px; padding-right: 0px;}.jimu-widget-screening-setting .esriCTReportSettingsContainer .dijitSelectLabel{overflow: hidden; text-overflow: ellipsis; white-space: nowrap; width: 230px; text-align: left; padding-top: 5px;}.jimu-rtl .jimu-widget-screening-setting .esriCTReportSettingsContainer .dijitSelectLabel{text-align: right;}.jimu-widget-screening-setting .esriCTSortFieldSelectLabelWidth .dijitSelectLabel{width: 150px;}.jimu-widget-screening-setting .esriCTSymbologyLabel {float: left; width: 15%;}.jimu-rtl .jimu-widget-screening-setting .esriCTSymbologyLabel {float: right;}.jimu-widget-screening-setting .esriCTPreviewSymbology {float: right; width: 85%;}.jimu-rtl .jimu-widget-screening-setting .esriCTPreviewSymbology {float: left;}.jimu-rtl .jimu-widget-screening-setting .esriCTPolygonPreview {padding: 5px 22px 0px 0px;}",
"*now":function(x){x(['dojo/i18n!*preload*widgets/Screening/setting/nls/Setting*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/dijit/TabContainer3 jimu/BaseWidgetSetting dojo/_base/lang dojo/on dojo/query dojo/_base/array jimu/utils esri/symbols/jsonUtils dojo/dom-construct jimu/symbolUtils jimu/utils jimu/dijit/LoadingIndicator ./SymbolChooserPopup ./DownloadSettings dojo/query dijit/registry jimu/dijit/Message jimu/dijit/Popup dijit/form/ValidationTextBox jimu/dijit/SimpleTable dojo/dom-class jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox ./FieldPicker ./SearchSourceSettings dojo/string dojo/Deferred dojo/promise/all dojo/dom-style jimu/LayerInfos/LayerInfos esri/request dijit/form/Select".split(" "),function(x,
E,K,I,v,a,c,d,e,l,q,p,u,B,F,b,m,t,H,n,f,z,D,N,P,L,y,C,Q,S,k,g,A){return x([I,E],{baseClass:"jimu-widget-screening-setting",_configurationTabsContainer:null,_symbolParams:{},_addLayerTable:null,_curRow:null,_totalLayers:[],_idsOfSelectedLayers:[],_layerInfosObj:null,_selectLayerTable:null,constructor:function(h){this._configurationTabsContainer=null;this._symbolParams={};this._curRow=this._addLayerTable=null;this._totalLayers=[];this._idsOfSelectedLayers=[];this._selectLayerTable=null;v.mixin(this,
h)},postMixInProperties:function(){this.nls.common={};v.mixin(this.nls.common,window.jimuNls.common);v.mixin(this.nls.units,window.jimuNls.units)},postCreate:function(){g.getInstance(this.map,this.map.itemInfo).then(v.hitch(this,function(h){this._layerInfosObj=h;this._initLoading();this._initConfiguration();this._initLayerSelector();this._initDownloadTab();this._attachComponentEvents()}))},_attachComponentEvents:function(){this.own(a(this.drawToolCheckBox,"change",v.hitch(this,function(h){h?D.remove(this.selectDrawToolFieldSet,
"esriCTHidden"):D.add(this.selectDrawToolFieldSet,"esriCTHidden")})))},getConfig:function(){if(m(".esriCTFieldError",this.addLayerTableNode).length!==m(".esriCTFieldError \x3e .esriCTHidden",this.addLayerTableNode).length)return this._showErrorMsgforInvalidFields(),!1;var h=this._downloadTab.getExtractDataTaskURL();if(this._validateConfigForCheckBoxes()&&this._validateConfigForInputFields(this.aoiToolsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"analysis")&&this._validateConfigForInputFields(this.toleranceSection,
this.nls.errorMsg.invalidSearchToleranceErrorMsg,"analysis")&&this._validateConfigForInputFields(this.tabLabelsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"general")&&this._validateConfigForBufferDistanceFields(this.bufferSettingsSection,this.nls.errorMsg.bufferDistanceFieldsErrorMsg)&&this._validateGPTaskDownloadOption(h)&&this._validateLayers()&&this._validateMaxFeatureCount()&&this._validateCustomOptions()&&this._validateDrawTools()){var r=this._searchSourceSettings.getConfig();if(!r||
0===r.sources.length)return this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle),!1;var J=this.placeNameTextBox.get("value");this.config.placenameButtonText=u.stripHTML(J?J:"");this.config.showPlacenameWidget=this.placeNameCheckBox.checked;this.config.showDrawToolsWidget=this.drawToolCheckBox.checked;this.config.showShapefileWidget=this.uploadShapefileCheckBox.checked;this.config.showCoordinatesWidget=this.coordinatesCheckBox.checked;
this.config.allowShapefilesUpload=this.allowUploadShapefileCheckBox.checked;this.config.allowVisibleLayerAnalysisOnly=this.allowVisibleLayerAnalysisCheckBox.checked;J=this.aoiTabTextBox.get("value");this.config.aoiTabText=u.stripHTML(J?J:"");J=this.reportsTabTextBox.get("value");this.config.reportTabText=u.stripHTML(J?J:"");J=this.drawToolTextBox.get("value");this.config.drawToolsButtonText=u.stripHTML(J?J:"");J=this.uploadShapeFileTextBox.get("value");this.config.shapefileButtonText=u.stripHTML(J?
J:"");J=this.coordinatesTextBox.get("value");this.config.coordinatesButtonText=u.stripHTML(J?J:"");this.config.traverseUnit=this.traverseUnitsNode.get("value");this.config.traverseDirectionUnit=this.traverseDirectionUnitsNode.get("value");this.config.maxFeaturesForAnalysis=this.maxFeatureCountTextBox.get("value");this.config.areaUnits=this.areaUnitsDropDown.get("value");this.config.lengthUnits=this.lengthUnitsDropDown.get("value");this.config.defaultBufferDistance=this.defaultBufferDistanceTextBox.get("value");
this.config.defaultBufferUnit=this.defaultBufferUnitsNode.get("value");this.config.searchTolerance=this.searchToleranceTextBox.get("value");this.config.placenameSymbology=this._symbolParams;this.config.coordinatesSymbology=this._symbolParams;this.config.shapefileSymbology=this._symbolParams;this.config.drawToolSymbology=this._symbolParams;this.config.aoiSymbol=this._symbolParams.aoiSymbol;this.config.layers=this._getSelectedLayers(!1);this.config.searchSourceSettings=r;this.config.downloadSettings=
{type:m("input[type\x3dradio]:checked",this.downloadTabNode)[0].value,layers:this._downloadTab.getLayers(),extractDataTaskURL:h,downloadingFileOptions:this._downloadTab.getDownloadingFileOptions()};this.config.reportSettings={printTaskURL:this._downloadTab.getPrintReportGPServiceURL(),footnote:this._downloadTab.getFootnoteForReport(),logo:this._downloadTab.getLogo(),columnTitleColor:this._downloadTab.getTableHeaderColor(),reportTitle:this._downloadTab.getReportTitle(),noDataConfiguredText:this._downloadTab.getNoDataText(),
naTextConfiguredValue:this._downloadTab.getNaTextValue(),customOptions:this._downloadTab.getCustomOptions(),defaultPrintOption:this._downloadTab.getDefaultPrintOption(),displaySummaryInReport:this._downloadTab.getDisplaySummaryCheckBoxStatus(),hideZeroValueRow:this._downloadTab.getRowshavingAllZeroValueCheckBoxStatus(),hideNullValueRow:this._downloadTab.getRowshavingAllNullValueCheckBoxStatus()};this.config.drawToolSelectableLayers=this._getDrawToolSelectableLayers();this.pointSelectToolCheckBox&&
(this.config.showPointTool=this.pointSelectToolCheckBox.checked);this.polylineSelectToolCheckBox&&(this.config.showPolylineTool=this.polylineSelectToolCheckBox.checked);this.extentSelectToolCheckBox&&(this.config.showExtentTool=this.extentSelectToolCheckBox.checked);this.polygonSelectToolCheckBox&&(this.config.showPolygonTool=this.polygonSelectToolCheckBox.checked);this.circleSelectToolCheckBox&&(this.config.showCircleTool=this.circleSelectToolCheckBox.checked);return this.config}return!1},_getDrawToolSelectableLayers:function(){var h=
[];var r=this._selectLayerTable.getRows();d.forEach(r,v.hitch(this,function(J){J=this._selectLayerTable.getRowData(J);J.selectable&&h.push(J.selectableLayerID)}));return h},_validateLayers:function(){var h=!0;0===this._getSelectedLayers(!1).length&&(h=!1,this._errorMessage(this.nls.errorMsg.noLayerSelected,this.nls.analysisTab.analysisTabLabel));return h},_validateDuplicateLabelsForFields:function(h){var r=!0,J=[],M;for(M in h){J=[];for(var O in h)h[M]===h[O]&&J.push({label:O,item:h[M]});if(1<J.length)break}this._showDuplicateLabelsErrorMessage(J)||
(r=!1);return r},_showDuplicateLabelsErrorMessage:function(h){if(1<h.length){var r="";d.forEach(h,v.hitch(this,function(J,M){r+=J.label;M<h.length-1&&(r+=",")}));this._errorMessage(C.substitute(this.nls.errorMsg.duplicateFieldsLabels,{labelText:h[0].item,itemNames:r}),this.nls.analysisTab.analysisTabLabel);return!1}return!0},_initConfiguration:function(){this._symbolParams={};this.defaultBufferDistanceTextBox.constraints={min:0};this.defaultBufferDistanceTextBox.validator=v.hitch(this,function(){return this._numberValidator(this.defaultBufferDistanceTextBox)});
this.maxFeatureCountTextBox.constraints={min:1,places:0};this.searchToleranceTextBox.constraints={min:0};this.searchToleranceTextBox.intermediateChanges=!0;var h=[{node:this.pointSymbolNode,symbolType:"point",geometryType:"esriGeometryPoint",title:this.nls.generalTab.pointSymbolChooserPopupTitle},{node:this.lineSymbolNode,symbolType:"polyline",geometryType:"esriGeometryLine",title:this.nls.generalTab.lineSymbolChooserPopupTitle},{node:this.polygonSymbolNode,symbolType:"polygon",geometryType:"esriGeometryPolygon",
title:this.nls.generalTab.polygonSymbolChooserPopupTitle},{node:this.aoiSymbolNode,symbolType:"aoiSymbol",geometryType:"esriGeometryPolygon",title:this.nls.generalTab.aoiSymbolChooserPopupTitle}];this._initTabs();this._enableDisableAOIToolsTextBox();d.forEach(h,v.hitch(this,function(r){this._createSymbolPicker(r.node,r.symbolType,r.geometryType,r.title)}));a(this.lengthUnitsDropDown,"change",v.hitch(this,function(r){this._displaySearchTolerance(r)}));this.searchToleranceTextBox.validator=v.hitch(this,
function(){return this._numberValidator(this.searchToleranceTextBox)})},_numberValidator:function(h){h=h.get("value");return isNaN(h)?!1:!0},_initTabs:function(){this._configurationTabsContainer=new K({tabs:[{title:this.nls.analysisTab.analysisTabLabel,content:this.analysisTabNode},{title:this.nls.downloadTab.downloadTabLabel,content:this.downloadTabNode},{title:this.nls.generalTab.generalTabLabel,content:this.generalTabNode},{title:this.nls.searchSourceSetting.searchSourceSettingTabTitle,content:this.searchSourceTabNode}]},
this.tabContainer);this.own(a(this._configurationTabsContainer,"tabChanged",v.hitch(this,function(){this._configurationTabsContainer.containerNode.scrollTop=0})));this.own(a(this._configurationTabsContainer.containerNode,"scroll",v.hitch(this,function(){var h=this._addLayerTable.getRows();d.forEach(h,v.hitch(this,function(r){r.layerSelector&&r.layerSelector.hideLayerChooser()}));this._searchSourceSettings&&this._searchSourceSettings._currentSourceSetting&&this._searchSourceSettings._currentSourceSetting.displayField&&
this._searchSourceSettings._currentSourceSetting.displayField.closeDropDown();this.traverseUnitsNode.closeDropDown();this.traverseDirectionUnitsNode.closeDropDown();this.areaUnitsDropDown.closeDropDown();this.lengthUnitsDropDown.closeDropDown();this.defaultBufferUnitsNode.closeDropDown();this._downloadTab.closeDownloadTabDropdowns()})));this._configurationTabsContainer.startup();u.has("chrome")&&D.add(this._configurationTabsContainer.containerNode,"esriRTLTabContainerNode")},_initLoading:function(){this.loading=
new B({hidden:!0});var h=c(".widget-setting-popup")[0];this.loading.placeAt(h);this.loading.startup()},_createSearchSourceSettings:function(){var h={};this.config&&this.config.hasOwnProperty("searchSourceSettings")&&(h=this.config.searchSourceSettings);this._searchSourceSettings=new y({nls:this.nls,map:this.map,appConfig:this.appConfig,shelter:this.loading,config:h},q.create("div",{},this.searchSourceTabNode));this.own(a(this._searchSourceSettings,"invalid-source-setting",v.hitch(this,function(){this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,
this.nls.searchSourceSetting.searchSourceSettingTabTitle)})))},setConfig:function(){if(this.config){this.config.aoiTabText?this.aoiTabTextBox.set("value",this.config.aoiTabText):this.aoiTabTextBox.set("value",this.nls.generalTab.aoiTabText);this.config.reportTabText?this.reportsTabTextBox.set("value",this.config.reportTabText):this.reportsTabTextBox.set("value",this.nls.generalTab.reportTabText);this.config.placenameButtonText?this.placeNameTextBox.set("value",this.config.placenameButtonText):this.placeNameTextBox.set("value",
this.nls.analysisTab.placenameButtonText);this.config.drawToolsButtonText?this.drawToolTextBox.set("value",this.config.drawToolsButtonText):this.drawToolTextBox.set("value",this.nls.analysisTab.drawToolsButtonText);this.config.shapefileButtonText?this.uploadShapeFileTextBox.set("value",this.config.shapefileButtonText):this.uploadShapeFileTextBox.set("value",this.nls.analysisTab.shapefileButtonText);this.config.coordinatesButtonText?this.coordinatesTextBox.set("value",this.config.coordinatesButtonText):
this.coordinatesTextBox.set("value",this.nls.analysisTab.coordinatesButtonText);(this.config.defaultBufferDistance||0===this.config.defaultBufferDistance)&&this.defaultBufferDistanceTextBox.set("value",this.config.defaultBufferDistance);this.config.traverseUnit&&this._setDropDownSavedOptionSelected(this.traverseUnitsNode,this.config.traverseUnit);this.config.traverseDirectionUnit&&this._setDropDownSavedOptionSelected(this.traverseDirectionUnitsNode,this.config.traverseDirectionUnit);this.config.areaUnits&&
("Standard"===this.config.areaUnits||"Metric"===this.config.areaUnits||"Feet"===this.config.areaUnits||"Miles"===this.config.areaUnits||"Meters"===this.config.areaUnits||"Kilometers"===this.config.areaUnits||"Hectares"===this.config.areaUnits?(this._setBackwardCompatibilityAreaUnit(this.areaUnitsDropDown,this.config.areaUnits),this.config.hasOwnProperty("lengthUnits")||this._setBackwardCompatibilityLengthUnit(this.lengthUnitsDropDown,this.config.areaUnits)):this._setDropDownSavedOptionSelected(this.areaUnitsDropDown,
this.config.areaUnits));this.config.lengthUnits&&this._setDropDownSavedOptionSelected(this.lengthUnitsDropDown,this.config.lengthUnits);this.config.maxFeaturesForAnalysis&&this.maxFeatureCountTextBox.set("value",this.config.maxFeaturesForAnalysis);this.config.defaultBufferUnit&&this._setDropDownSavedOptionSelected(this.defaultBufferUnitsNode,this.config.defaultBufferUnit);(this.config.searchTolerance||0===this.config.searchTolerance)&&this.searchToleranceTextBox.set("value",this.config.searchTolerance);
this.config.hasOwnProperty("lengthUnits")?this._displaySearchTolerance(this.lengthUnitsDropDown.get("value")):this._displaySearchTolerance(this.areaUnitsDropDown.get("value"));this.placeNameCheckBox.setValue(this.config.showPlacenameWidget);this.drawToolCheckBox.setValue(this.config.showDrawToolsWidget);this.drawToolCheckBox.checked?D.remove(this.selectDrawToolFieldSet,"esriCTHidden"):D.add(this.selectDrawToolFieldSet,"esriCTHidden");this.uploadShapefileCheckBox.setValue(this.config.showShapefileWidget);
this.coordinatesCheckBox.setValue(this.config.showCoordinatesWidget);this.allowUploadShapefileCheckBox.setValue(this.config.allowShapefilesUpload);this.allowVisibleLayerAnalysisCheckBox.setValue(this.config.allowVisibleLayerAnalysisOnly);if(this._addLayerTable&&this.config.layers){this._addLayerTable.clear();for(var h=0;h<this.config.layers.length;h++)this._populateLayerTableRow(this.config.layers[h],!1)}this._createSearchSourceSettings();this.config.hasOwnProperty("showPointTool")&&this.pointSelectToolCheckBox.setValue(this.config.showPointTool);
this.config.hasOwnProperty("showPolylineTool")&&this.polylineSelectToolCheckBox.setValue(this.config.showPolylineTool);this.config.hasOwnProperty("showExtentTool")&&this.extentSelectToolCheckBox.setValue(this.config.showExtentTool);this.config.hasOwnProperty("showPolygonTool")&&this.polygonSelectToolCheckBox.setValue(this.config.showPolygonTool);this.config.hasOwnProperty("showCircleTool")?this.circleSelectToolCheckBox.setValue(this.config.showCircleTool):this.circleSelectToolCheckBox.setValue("false")}},
_displaySearchTolerance:function(h){this.searchToleranceLabel.innerHTML="Feet"===h||"Miles"===h?this.nls.analysisTab.searchToleranceLabelText+" ("+this.nls.units.feet+")":"Meters"===h||"Kilometers"===h||"Hectares"===h?this.nls.analysisTab.searchToleranceLabelText+" ("+this.nls.units.meters+")":this.nls.analysisTab.searchToleranceLabelText},_onEditLayerClicked:function(h){var r=h.layerInfo;this._curRow=h;h.layerSelector&&h.layerSelector.hideLayerChooser();r||(r={selectedFields:null},h.layerInfo=r);
r.layerLabel=h.labelText.value;h.layerSelector.getSelectedItem()&&(h.layerSelector.getSelectedItem().name&&(r.layerName=h.layerSelector.getSelectedItem().name),h.layerSelector.getSelectedItem().layerInfo&&(r.layer=h.layerSelector.getSelectedItem().layerInfo));r={nls:this.nls,featureLayer:r.layer.layerObject,selectedFields:h.selectedFields,groupbyfieldCheckBoxStatus:h.groupbyfieldCheckBoxStatus,layerGridInfo:r,layerInfo:this._layerInfosObj.getLayerInfoById(r.layer.layerObject.id),currentRow:h};this._createFieldSelectorPopup(r,
h)},_createFieldSelectorPopup:function(h,r){var J=!0;var M=h.layerGridInfo.selectedFields;var O=new L(h);var w=q.create("button",{title:this.nls.common.ok});w.label=this.nls.common.ok;var G=q.create("button",{title:this.nls.common.cancel});G.label=this.nls.common.cancel;var R=new n({titleLabel:this.nls.analysisTab.addFieldsPopupTitle+": "+r.layerSelector.getSelectedItem().name,content:O,width:830,height:500,autoHeight:!0,buttons:[w,G]});w.onClick=v.hitch(this,function(){var T={};J=!0;this._curRow.sortInfo||
(this._curRow.sortInfo={});var U=O.okButtonClicked();this._curRow.selectedFields=U.selectedFields;this._curRow.groupbyfieldCheckBoxStatus=U.groupbyfieldCheckBoxStatus;this._curRow.sortInfo=U.sortInfo;this._validateFields(this._curRow.selectedFields,this._curRow);for(var Y in this._curRow.selectedFields)""!==this._curRow.selectedFields[Y].label.trim()&&(T[this._curRow.selectedFields[Y].alias]=this._curRow.selectedFields[Y].label.trim());(J=this._validateDuplicateLabelsForFields(T))?(this._curRow=null,
O.destroy(),O=null,R.close()):this._curRow.selectedFields=h.layerGridInfo.selectedFields=M});G.onClick=v.hitch(this,function(){this._curRow=null;O.destroy();O=null;R.close()})},_enableDisableAOIToolsTextBox:function(){this.own(a(this.placeNameCheckBox,"change",v.hitch(this,function(h){h?this.placeNameTextBox.set("disabled",!1):this.placeNameTextBox.set("disabled",!0)})));this.own(a(this.drawToolCheckBox,"change",v.hitch(this,function(h){h?this.drawToolTextBox.set("disabled",!1):this.drawToolTextBox.set("disabled",
!0)})));this.own(a(this.uploadShapefileCheckBox,"change",v.hitch(this,function(h){h?this.uploadShapeFileTextBox.set("disabled",!1):this.uploadShapeFileTextBox.set("disabled",!0)})));this.own(a(this.coordinatesCheckBox,"change",v.hitch(this,function(h){h?(this.coordinatesTextBox.set("disabled",!1),this.traverseUnitsNode.set("disabled",!1),this.traverseDirectionUnitsNode.set("disabled",!1)):(this.coordinatesTextBox.set("disabled",!0),this.traverseUnitsNode.set("disabled",!0),this.traverseDirectionUnitsNode.set("disabled",
!0))})))},_setBackwardCompatibilityAreaUnit:function(h,r){switch(r){case "Standard":r="Acres";h.set("value","Acres");break;case "Metric":r="SquareKilometers";h.set("value","SquareKilometers");break;case "Feet":r="SquareFeet";h.set("value","SquareFeet");break;case "Miles":r="Acres";h.set("value","Acres");break;case "Meters":r="SquareMeters";h.set("value","SquareMeters");break;case "Kilometers":r="SquareKilometers";h.set("value","SquareKilometers");break;case "Hectares":r="Hectares",h.set("value","Hectares")}d.forEach(h.options,
v.hitch(this,function(J){J.selected=J.value===r?"selected":!1}))},_setBackwardCompatibilityLengthUnit:function(h,r){switch(r){case "Standard":r="Miles";h.set("value","Miles");break;case "Metric":r="Kilometers";h.set("value","Kilometers");break;case "Feet":r="Feet";h.set("value","Feet");break;case "Miles":r="Miles";h.set("value","Miles");break;case "Meters":r="Meters";h.set("value","Meters");break;case "Kilometers":r="Kilometers";h.set("value","Kilometers");break;case "Hectares":r="Kilometers",h.set("value",
"Kilometers")}d.forEach(h.options,v.hitch(this,function(J){J.selected=J.value===r?"selected":!1}))},_setDropDownSavedOptionSelected:function(h,r){h.setValue(r);d.forEach(h.options,v.hitch(this,function(J){J.selected=J.value===r?"selected":!1}))},_validateConfigForInputFields:function(h,r,J){var M=!0;d.some(m(".esriCTTextBox",h),v.hitch(this,function(O){if(t.byNode(O)&&!t.byNode(O).disabled&&!t.byNode(O).isValid())return"analysis"===J?this._errorMessage(r,this.nls.analysisTab.analysisTabLabel):this._errorMessage(r,
this.nls.generalTab.generalTabLabel),M=!1,!0}));return M},_validateConfigForBufferDistanceFields:function(h,r){var J=!0;d.some(m(".esriCTTextBox",h),v.hitch(this,function(M){if(t.byNode(M)&&(!t.byNode(M).isValid()||isNaN(t.byNode(M).get("value"))))return this._errorMessage(r,this.nls.generalTab.generalTabLabel),J=!1,!0}));return J},_validateConfigForCheckBoxes:function(){var h=!1;d.some(m(".esriCTCheckBox",this.aoiToolsSection),v.hitch(this,function(r){if(t.byNode(r).checked)return h=!0}));h||this._errorMessage(this.nls.errorMsg.atLeastOneCheckboxCheckedErrorMsg,
this.nls.analysisTab.analysisTabLabel);return h},_errorMessage:function(h,r){(new H({message:h,buttons:[{label:this.nls.common.ok}]})).message=h;this._configurationTabsContainer&&r&&this._configurationTabsContainer.getSelectedTitle()!==r&&this._configurationTabsContainer.selectTab(r)},_createSymbolPicker:function(h,r,J,M){var O={};if(J){O.type=e.getSymbolTypeByGeometryType(J);O.symbol=this.config&&this.config.placenameSymbology[r]?l.fromJson(this.config.placenameSymbology[r]):l.fromJson(this.config.aoiSymbol);
var w=this._createPreviewContainer(h,!1);var G={symbolChooserTitle:M,symbolParams:O,symbolType:r,nls:this.nls};this._showSelectedSymbol(w,O.symbol,r);this.own(a(w,"click",v.hitch(this,function(){O.symbol=l.fromJson(this._symbolParams[r]);this._initSymbolChooserPopup(G,w)})))}return w},_createPreviewContainer:function(h,r){r?(h=q.create("table",{cellspacing:"0",cellpadding:"0"},h),h=q.create("tr",{"class":"esriCTTRPreviewText"},h),r=q.create("td",{},h),q.create("div",{innerHTML:this.nls.generalTab.previewLabel,
"class":"esriCTSymbolPreviewText"},r),h=q.create("td",{},h),h=q.create("div",{"class":"esriCTSymbolChooserNode"},h)):h=q.create("div",{"class":"esriCTSymbolChooserNode"},h);return h},_initSymbolChooserPopup:function(h,r){var J=new F(h);J.onOkClick=v.hitch(this,function(){var M;J.symbolChooser.getValidSymbol?(M=J.symbolChooser.getValidSymbol())?(this._showSelectedSymbol(r,M,h.symbolType),J.popup.close()):this._errorMessage(this.nls.generalTab.invalidSymbolValue):(M=J.symbolChooser.getSymbol(),this._showSelectedSymbol(r,
M,h.symbolType),J.popup.close())})},_showSelectedSymbol:function(h,r,J){q.empty(h);if(r){var M=p.createSymbolNode(r);M||(M=q.create("div"));q.place(M,h);this._symbolParams[J]=r.toJson()}},_initDownloadTab:function(){this._downloadTab=new b({map:this.map,downloadOptions:this.config.downloadSettings,reportSettings:this.config.reportSettings,loadingIndicator:this.loading,nls:this.nls,appConfig:this.appConfig,folderUrl:this.folderUrl,layerInfosObj:this._layerInfosObj});this._downloadTab.placeAt(this.downloadTabNode)},
_setDownloadInfo:function(h){var r;if(this._downloadTab&&(r=this._getLayerInfo(h,!0))){var J=A({url:r.url+"?f\x3dpjson"});J.then(v.hitch(this,function(M){r.capabilities=M.capabilities;this._downloadTab.checkLayerForDownloadOptions(r,h.rowIndex)}))}},_removeDownloadInfo:function(h){this._downloadTab&&this._downloadTab.deleteRow(h)},_validateGPTaskDownloadOption:function(h){return"extractDataTask"===m("input[type\x3dradio]:checked",this.downloadTabNode)[0].value&&""===h?(this._errorMessage(this.nls.downloadTab.errorMessages.noExtractDataTaskURL,
this.nls.downloadTab.downloadTabLabel),!1):!0},_getSelectedLayers:function(h){var r,J=[];var M=this._addLayerTable.getRows();d.forEach(M,v.hitch(this,function(O){O.layerSelector&&(r=this._getLayerInfo(O,h),r.selectedFields=O.selectedFields,r.groupbyfieldCheckBoxStatus=O.groupbyfieldCheckBoxStatus,!O.sortInfo&&(O.sortInfo={sortOrder:"Asc",sortingField:""},r||r.geometryType)&&("esriGeometryPoint"===r.geometryType&&(O.sortInfo.sortingField="esriCTCountField"),"esriGeometryPolyline"===r.geometryType&&
(O.sortInfo.sortingField="esriCTTotalLengthField"),"esriGeometryPolygon"===r.geometryType&&(O.sortInfo.sortingField="esriCTTotalAreaField")),r.sortInfo=O.sortInfo,J.push(r))}));return J},_getLayerInfo:function(h,r){var J;if(J=h.layerSelector.getSelectedItem()){var M={url:J.layerInfo.layerObject.url,geometryType:J.layerInfo.layerObject.geometryType,id:J.layerInfo.id,label:u.stripHTML(h.labelText&&h.labelText.value?h.labelText.value.trim():""),layerName:J.layerInfo.title,layerVersion:J.layerInfo.layerObject.version};
r&&(M.capabilities=J.layerInfo.layerObject.capabilities);h.layerInfo&&h.layerInfo.selectedFields&&(M.selectedFields=h.layerInfo.selectedFields);M.layerId=J.layerId?J.layerId:M.url.substr(M.url.lastIndexOf("/")+1,M.url.length);h=M.url.substr(0,M.url.lastIndexOf("/")+1);M.baseURL=h}return M},_createLayerChooserMapArgs:function(){return{multiple:!1,createMapResponse:this.map.webMapResponse,filter:N.createFeaturelayerFilter([],!1,!1)}},_initLayerSelector:function(){this.loading.show();this._idsOfSelectedLayers=
[];this._totalLayers=[];var h=this._createLayerChooserMapArgs();this._layerChooserFromMap=new N(h);this._layerChooserFromMap.startup();h=this._layerChooserFromMap.layerInfosObj.getLayerInfoArray();var r=[];this._getAllFilteredLayers(h,r);S(r).then(v.hitch(this,function(){this.loading.hide();0<this._totalLayers.length?D.remove(this.btnAddLayer,"esriCTDisabled"):(D.add(this.btnAddLayer,"esriCTDisabled"),D.remove(this.lblNoValidLayers,"esriCTHidden"));this._createAddLayerGrid();this._createSelectLayerGrid();
this.setConfig(this.config);this.own(a(this.btnAddLayer,"click",v.hitch(this,this._addLayerButtonClicked)));this._populateSelectableLayer()}))},_getAllFilteredLayers:function(h,r){d.forEach(h,v.hitch(this,function(J){if(J.isLeaf()){var M=new Q;this._layerChooserFromMap.filter(J).then(v.hitch(this,function(O){O&&this._totalLayers.push(J);M.resolve()}));r.push(M)}else this._getAllFilteredLayers(J.newSubLayers,r)}))},_captureAddLayerTableEvents:function(){var h,r,J;this.own(a(this._addLayerTable,"actions-edit",
v.hitch(this,this._onEditLayerClicked)));this.own(a(this._addLayerTable,"row-up",v.hitch(this,function(M){h=this._idsOfSelectedLayers[M.rowIndex];r=this._idsOfSelectedLayers[M.rowIndex+1];this._idsOfSelectedLayers.splice(M.rowIndex,2,r,h);this._downloadTab&&this._downloadTab.rowUp(M.rowIndex)})));this.own(a(this._addLayerTable,"row-down",v.hitch(this,function(M){J=this._idsOfSelectedLayers[M.rowIndex];r=this._idsOfSelectedLayers[M.rowIndex-1];this._idsOfSelectedLayers.splice(M.rowIndex-1,2,J,r);this._downloadTab&&
this._downloadTab.rowDown(M.rowIndex)})));this._addLayerTable.onBeforeRowDelete=v.hitch(this,this._deleteLayer)},_createAddLayerGrid:function(){this._addLayerTable=new z({fields:[{name:"field",title:this.nls.analysisTab.addLayerNameTitle,type:"empty",editable:"true",width:"200px"},{name:"field",title:this.nls.common.label,type:"empty",editable:"true",width:"200px"},{name:"actions",title:this.nls.common.actions,width:"80px",type:"actions",actions:["up","down","edit","delete"]}],selectable:!1});this._addLayerTable.placeAt(this.addLayerTableNode);
this._captureAddLayerTableEvents();this._addLayerTable.startup()},_createSelectLayerGrid:function(){this._selectLayerTable=new z({fields:[{name:"selectable",title:"",type:"checkbox","class":"isSelectable",width:"5%",editable:!0,hidden:!1},{name:"selectableLayerName",title:this.nls.analysisTab.addLayerNameTitle,type:"text",editable:!1,width:"95%",hidden:!1},{name:"selectableLayerID",title:"",type:"text",editable:!1,width:"0%",hidden:!0}],selectable:!1});this._selectLayerTable.placeAt(this.drawToolSelectableLayerContainer);
this._selectLayerTable.startup()},_populateSelectableLayer:function(){d.forEach(this._totalLayers,v.hitch(this,function(h){var r=!0;this.config&&this.config.hasOwnProperty("drawToolSelectableLayers")&&(r=!1,-1<this.config.drawToolSelectableLayers.indexOf(h.id)&&(r=!0));this._selectLayerTable.addRow({selectable:r,selectableLayerName:h.title,selectableLayerID:h.id})}))},_addLayerLabel:function(h,r){var J=m(".simple-table-cell",h)[1];D.add(J,"esriCTLayerInputCell");var M=new f({"class":"esriCTLayerLabelTextBox"});
M.placeAt(J);M.startup();h.labelText=M;r&&h.labelText.set("value",r)},_populateLayerTableRow:function(h,r){var J;var M=this._addLayerTable.addRow({});if(M.success&&M.tr){M=M.tr;var O=h.selectedFields;h.sortInfo&&(M.sortInfo=h.sortInfo);if(!O){O={};if(J=h.getPopupInfo())var w=J.fieldInfos;var G=h.layerObject.fields;d.forEach(w,v.hitch(this,function(R){R.visible&&R.fieldName.toLowerCase()!==h.layerObject.objectIdField.toLowerCase()&&(d.forEach(G,v.hitch(this,function(T){R.fieldName===T.name&&(R=v.clone(R),
R.label=null,O[R.fieldName]=R)})),!O.hasOwnProperty(R.fieldName)&&J&&J.expressionInfos&&d.forEach(J.expressionInfos,v.hitch(this,function(T){T=v.clone(T);T.name="expression/"+T.name;R.fieldName===T.name&&(O[R.fieldName]=T,O[R.fieldName].alias=T.title+" {"+T.name+"}")})))}));0===Object.keys(O).length&&(O=null)}this._validateFields(O,M);M.layerInfo=h;M.selectedFields=O;M.groupbyfieldCheckBoxStatus=h.groupbyfieldCheckBoxStatus;this._addLayerLabel(M,h.label);this._addLayerDropDown(M,h,r)}},_validateFields:function(h,
r){var J;(J=m(".simple-table-cell",r)[2])&&!h?(r.errorDiv||(r.errorDiv=q.create("div",{"class":"esriCTFieldError"},J),r.errorSpan=q.create("span",{"class":"jimu-icon jimu-icon-error",title:this.nls.errorMsg.noFieldSelected},r.errorDiv)),D.remove(r.errorSpan,"esriCTHidden")):this._enableOk(r)},_enableOk:function(h){h&&h.errorSpan&&(D.add(h.errorSpan,"esriCTHidden"),m(".esriCTFieldError",this.addLayerTableNode).length===m(".esriCTFieldError \x3e .esriCTHidden",this.addLayerTableNode).length&&(h=c(".button-container")[0],
k.set(h.children[2],"display","inline-block"),k.set(h.children[3],"display","none")))},_addLayerButtonClicked:function(){if(!D.contains(this.btnAddLayer,"esriCTDisabled")){this.loading.show();var h=this._pickUnusedLayer();this._populateLayerTableRow(h[0],!0)}},_pickUnusedLayer:function(){return this._idsOfSelectedLayers.length<this._totalLayers.length?d.filter(this._totalLayers,v.hitch(this,function(h){return 0>this._idsOfSelectedLayers.indexOf(h.id)})):this._totalLayers},_addLayerDropDown:function(h,
r,J){h.layerSelector&&h.layerSelector.destroy();var M=this._createLayerChooserMapArgs();var O=new N(M);O.startup();var w=m(".simple-table-cell",h)[0];D.add(w,"esriCTLayerInputCell");O=new P({layerChooser:O});O.placeAt(w);O.startup();h.layerSelector=O;if(r&&(O.setSelectedLayer(r),this._addLayer(h,r,J),M.createMapResponse.errors&&M.createMapResponse.errors[0]&&M.createMapResponse.errors[0].name&&"Error"===M.createMapResponse.errors[0].name&&null===O.getSelectedItem())){for(J=0;J<this.config.downloadSettings.layers.length;J++)if(r.url===
this.config.downloadSettings.layers[J].url){this.config.downloadSettings.layers.splice(J,1);break}this._deleteLayer(h);this._addLayerTable.deleteRow(h)}this.own(a(O,"selection-change",v.hitch(this,function(G){G&&0<G.length&&G[0]&&G[0].hasOwnProperty("id")?h.layerInfo&&G[0].id!==h.layerInfo.id&&(this._updateLayer(h,G),h.layerInfo=G[0]):(this._errorMessage(this.nls.errorMsg.errorInSelectingLayer),this._deleteLayer(h),this._addLayerTable.deleteRow(h))})))},_addLayer:function(h,r,J){r&&r.hasOwnProperty("id")&&
(this._idsOfSelectedLayers.push(r.id),J&&this._setDownloadInfo(h))},_updateLayer:function(h,r){this.loading.show();this._idsOfSelectedLayers[h.rowIndex]=r[0].id;this._setDownloadInfo(h);var J=this._layerInfosObj.getLayerInfoById(r[0].id);var M={};if(r=J.getPopupInfo())var O=r.fieldInfos;var w=J.layerObject.fields;d.forEach(O,v.hitch(this,function(G){G.visible&&G.fieldName.toLowerCase()!==J.layerObject.objectIdField.toLowerCase()&&d.forEach(w,v.hitch(this,function(R){G.fieldName===R.name&&(G=v.clone(G),
G.label=null,M[G.fieldName]=G)}))}));0===Object.keys(M).length&&(M=null);h.selectedFields=M;this._validateFields(h.selectedFields,h);this.loading.hide()},_deleteLayer:function(h){this.loading.show();h.layerSelector&&h.layerSelector.destroy();this._removeDownloadInfo(h.rowIndex);this._idsOfSelectedLayers.splice(h.rowIndex,1);D.remove(this.btnAddLayer,"esriCTDisabled");this._enableOk(h);this.loading.hide();return!0},_validateMaxFeatureCount:function(){if(0<this.maxFeatureCountTextBox.get("value")&&
this.maxFeatureCountTextBox.isValid())return!0;this._errorMessage(this.nls.errorMsg.errorInMaxFeatureCount,this.nls.analysisTab.analysisTabLabel);return!1},_showErrorMsgforInvalidFields:function(){var h=this._addLayerTable.getRows();for(var r in h){var J=h[r];var M=c(".esriCTFieldError",J);var O=c(".esriCTFieldError \x3e .esriCTHidden",J);if(M.length!==O.length){this._errorMessage(this.nls.analysisTab.invalidLayerErrorMsg+" "+J.layerSelector.getSelectedItem().name,this.nls.analysisTab.analysisTabLabel);
break}}},_validateCustomOptions:function(){var h=this._downloadTab.validateCustomOptions();return 0<h.length?(this._errorMessage(h[0],this.nls.downloadTab.downloadTabLabel),!1):!0},_validateDrawTools:function(){return!this.drawToolCheckBox.checked||this.pointSelectToolCheckBox.checked||this.polylineSelectToolCheckBox.checked||this.extentSelectToolCheckBox.checked||this.polygonSelectToolCheckBox.checked||this.circleSelectToolCheckBox.checked||0!==this._getDrawToolSelectableLayers().length?!0:(this._errorMessage(this.nls.analysisTab.selectingDrawToolErrorMessage,
this.nls.analysisTab.analysisTabLabel),!1)}})});
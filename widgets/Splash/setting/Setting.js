// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/ColorTransparencyPicker":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/on dojo/query dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ColorTransparencyPicker.html dijit/form/HorizontalSlider jimu/dijit/ColorPickerPopup dijit/form/NumberSpinner".split(" "),function(u,w,G,A,E,d,e,f,b,h,m,k){return u([e,f,b],{_defaultColor:"#485566",templateString:h,_MINIMUN:0,_MAXIMIUM:100,postMixInProperties:function(){this.nls=
window.jimuNls.transparency},postCreate:function(){this.colorPicker=new k({color:this._defaultColor},this.colorPicker);this.colorPicker.startup();this.slider=new m({name:"slider",value:0,minimum:this._MINIMUN,maximum:this._MAXIMIUM,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;"},this.sliderBar);this.slider.startup();this.inherited(arguments)},startup:function(){this.own(A(this.slider,"change",w.hitch(this,function(q){!1===this._isSameVal()&&this.spinner.setValue(q)})));
this.own(A(this.spinner,"change",w.hitch(this,function(q){isNaN(q)&&this.spinner.setValue(0);!1===this._isSameVal()&&this.spinner.isInRange()&&this.slider.setValue(q)})));this._stylePolyfill();this.inherited(arguments)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},isValid:function(){var q=this.slider.getValue();return q<this._MINIMUN||q>this._MAXIMIUM||!this.spinner.isValid()?!1:!0},getValues:function(){var q=null,z=null;(z=this.colorPicker.getColor())&&z.toHex&&
(q=z.toHex());z=this.spinner.getValue()/100;return{color:q,transparency:z}},setValues:function(q){if("object"===typeof q||"string"===typeof q)this.colorPicker.setColor(new G(q.color)),q.transparency="undefined"===typeof q.transparency?0:100*q.transparency,this.slider.setValue(q.transparency),this.spinner.setValue(q.transparency)},_stylePolyfill:function(){var q=E(".dijitSliderLeftBumper",this.domNode)[0];q&&q.parentNode&&d.setStyle(q.parentNode,"background-color","#24b5cc")}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m){return u([w,G],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){b.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;E.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;E.addClass(this.domNode,"disable")},isPartOfPopup:function(k){var q=this.tooltipDialog.domNode;return k===q||E.isDescendant(k,q)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},isOpen:function(){return this._isTooltipDialogOpened},_showTooltipDialog:function(){b.open({parent:this.getParent(),
popup:this.tooltipDialog,around:this.around?this.around:this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){b.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var k=E.create("div");this.tooltipDialog=new f({content:k});E.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var q=new h({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,
closeDialogWhenChange:!0},recordUID:this.recordUID,onChange:A.hitch(this,function(z){z&&(z=new e(z),this.setColor(z),this.onChange(z))})});q.placeAt(k);q.startup();this.own(d(q,"close",A.hitch(this,function(){this._hideTooltipDialog()})));this.own(d(q,"change-style",A.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(d(this.domNode,"click",A.hitch(this,function(z){z.stopPropagation();z.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==
this._ENABLE&&this._showTooltipDialog()})));this.own(d(document,"click",A.hitch(this,function(z){this.isPartOfPopup(z.srcElement||z.target)||this._hideTooltipDialog()})));this.picker=q},setColor:function(k){if(k instanceof e){null===this.color&&!0===this.showLabel&&this._changeLabel(k);var q=k.toHex();this.color=k;E.setStyle(this.domNode,"backgroundColor",q);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(q,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},
_changeLabel:function(k){E.empty(this.domNode);E.create("span",{innerHTML:k.toHex(),className:"color-label",style:{color:m.invertColor(k.toHex())}},this.domNode)},onChange:function(k){k&&this.showLabel&&this._changeLabel(k)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(k){this.domNode.title=k},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"widgets/Splash/setting/BackgroundSelector":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html jimu/dijit/ColorTransparencyPicker jimu/dijit/ImageChooser dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./BackgroundSelector.html jimu/dijit/RadioBtn".split(" "),
function(u,w,G,A,E,d,e,f,b,h){return u([e,f,b],{templateString:h,nls:null,_defaultColor:"#485566",_defaultTransparency:0,_defaultFillType:"fill",_imageMaxSize:1024,postCreate:function(){this.backgroundColorPicker=new E({},this.backgroundColorPickerEditor);this.backgroundColorPicker.startup();this.imageChooser=new d({cropImage:!1,showSelfImg:!0,format:[d.GIF,d.JPEG,d.PNG],goldenWidth:160,goldenHeight:90,maxSize:this._imageMaxSize,label:this.nls.chooseFile},this.imageChooser);this.inherited(arguments)},
startup:function(){this._initBgEvent();this._selectItem(this._defaultFillType);this.sizeType=this._defaultFillType;this.inherited(arguments)},_initBgEvent:function(){this.own(G(this.colorFillBtn,"click",w.hitch(this,function(){this._clickColorFillBtn()})));this.own(G(this.imageFillBtn,"click",w.hitch(this,function(){this._clickImageFillBtnBtn()})));this.own(G(this.imageChooser,"imageChange",w.hitch(this,function(m,k){this._showFillsType();k&&this._setFileName(k.fileName)})));this.own(G(this.fill,
"click",w.hitch(this,function(){this.sizeType="fill"})));this.own(G(this.fit,"click",w.hitch(this,function(){this.sizeType="fit"})));this.own(G(this.stretch,"click",w.hitch(this,function(){this.sizeType="stretch"})));this.own(G(this.center,"click",w.hitch(this,function(){this.sizeType="center"})));this.own(G(this.tile,"click",w.hitch(this,function(){this.sizeType="tile"})))},isValid:function(){return this.backgroundColorPicker.isValid()},getValues:function(){var m={};m.mode=this.mode;m.image=this.imageChooser.imageData;
m.type=this.sizeType;m.fileName=encodeURIComponent(this.fileName.innerHTML);var k=this.backgroundColorPicker.getValues();m.color=k.color;m.transparency=k.transparency;return m},_setColorPicker:function(m){var k=this._defaultColor,q=this._defaultTransparency;m&&(k=m.color,q=m.transparency);this.backgroundColorPicker.setValues({color:k,transparency:q})},setValues:function(m){"undefined"!==typeof m.splash&&"undefined"!==typeof m.splash.background&&(m=m.splash.background,this._setColorPicker(m),m.image&&
(this.imageChooser.setDefaultSelfSrc(m.image),this._showFillsType()),m.fileName&&(this.fileName.innerHTML=decodeURIComponent(m.fileName)),m.type&&(this._selectItem(m.type),this.sizeType=m.type),"image"===m.mode?(this._selectItem("imageFillBtn"),this._clickImageFillBtnBtn()):(this._selectItem("colorFillBtn"),this._clickColorFillBtn()))},_selectItem:function(m){this[m]&&this[m].setChecked&&this[m].setChecked(!0)},_clickColorFillBtn:function(){A.addClass(this.colorFillOptions,"hide");A.addClass(this.imageFillOptions,
"hide");A.removeClass(this.colorFillOptions,"hide");this.mode="color"},_clickImageFillBtnBtn:function(){A.addClass(this.colorFillOptions,"hide");A.addClass(this.imageFillOptions,"hide");A.removeClass(this.imageFillOptions,"hide");this.mode="image"},_hideFillsType:function(){A.addClass(this.fillsType,"hide")},_showFillsType:function(){A.removeClass(this.fillsType,"hide")},_setFileName:function(m){this.fileName.innerHTML=m}})})},"widgets/Splash/setting/SizeSelector":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SizeSelector.html dijit/form/NumberSpinner jimu/dijit/CheckBox".split(" "),
function(u,w,G,A,E,d,e,f){return u([E,d,e],{templateString:f,nls:null,_size:null,_isCustom:!1,postCreate:function(){this.inherited(arguments);this._initSize()},startup:function(){this.inherited(arguments)},_initSize:function(){this.own(G(this.percent25,"click",w.hitch(this,function(){this._cleanSelected();A.addClass(this.percent25,"selected")})));this.own(G(this.percent50,"click",w.hitch(this,function(){this._cleanSelected();A.addClass(this.percent50,"selected")})));this.own(G(this.percent75,"click",
w.hitch(this,function(){this._cleanSelected();A.addClass(this.percent75,"selected")})));this.own(G(this.percent100,"click",w.hitch(this,function(){this._cleanSelected();A.addClass(this.percent100,"selected")})));this.own(G(this.custom,"click",w.hitch(this,function(){this._cleanSelected();A.addClass(this.custom,"selected");this._setCustomSizeDisplay()})))},_setCustomSizeDisplay:function(){A.hasClass(this.custom,"selected")?A.setStyle(this.wh,"display","block"):A.setStyle(this.wh,"display","none")},
_cleanSelected:function(){A.removeClass(this.percent25,"selected");A.removeClass(this.percent50,"selected");A.removeClass(this.percent75,"selected");A.removeClass(this.percent100,"selected");A.removeClass(this.custom,"selected");this._setCustomSizeDisplay()},getValue:function(){var b={mode:"percent"};A.hasClass(this.percent25,"selected")?b.percent="25%":A.hasClass(this.percent50,"selected")?b.percent="50%":A.hasClass(this.percent75,"selected")?b.percent="75%":A.hasClass(this.percent100,"selected")?
b.percent="100%":A.hasClass(this.custom,"selected")&&(b.mode="wh");b.wh={};b.wh.w=this.width.getValue();b.wh.h=this.height.getValue();return b},setValue:function(b){this._cleanSelected();"object"===typeof b&&("undefined"!==typeof b.wh&&(this.width.setValue(b.wh.w),this.height.setValue(b.wh.h)),"wh"===b.mode&&A.addClass(this.custom,"selected"),"percent"===b.mode&&"undefined"!==typeof b.percent&&("25%"===b.percent?A.addClass(this.percent25,"selected"):"50%"===b.percent?A.addClass(this.percent50,"selected"):
"75%"===b.percent?A.addClass(this.percent75,"selected"):A.addClass(this.percent100,"selected")));this._setCustomSizeDisplay()}})})},"widgets/Splash/setting/AlignSelector":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./AlignSelector.html dijit/form/NumberSpinner jimu/dijit/CheckBox".split(" "),function(u,w,G,A,E,d,e,f){return u([E,d,e],{templateString:f,nls:null,postCreate:function(){this.inherited(arguments);
this._initAlign()},startup:function(){this.inherited(arguments)},_initAlign:function(){this.own(G(this.top,"click",w.hitch(this,function(){this._cleanSelected();A.addClass(this.top,"selected")})));this.own(G(this.middle,"click",w.hitch(this,function(){this._cleanSelected();A.addClass(this.middle,"selected")})))},_cleanSelected:function(){A.removeClass(this.top,"selected");A.removeClass(this.middle,"selected")},getValue:function(){var b;A.hasClass(this.top,"selected")?b="top":A.hasClass(this.middle,
"selected")&&(b="middle");return b},setValue:function(b){this._cleanSelected();"string"===typeof b&&("top"===b?A.addClass(this.top,"selected"):"middle"===b&&A.addClass(this.middle,"selected"))}})})},"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m,k,q,z,D,c,l,F,O,p,t,v,B,L,M){function Q(n){return new p({command:n.name})}function r(n){return new p({buttonClass:O,command:n.name})}G=G("dijit.Editor",L,{plugins:null,extraPlugins:null,constructor:function(){m.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",t]);this._plugins=
[];this._editInterval=1E3*this.editActionInterval;if(k("ie")||k("trident")||k("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new A;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);m.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=E.getLocalization("dijit._editor",
"commands",this.lang);k("webkit")&&b.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new c({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));w.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);e.add(this.iframe.parentNode,"dijitEditorIFrameContainer");e.add(this.iframe,"dijitEditorIFrame");d.set(this.iframe,"allowTransparency",
!0);this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){w.forEach(this._plugins,function(n){n&&n.destroy&&n.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(n,H){var I=m.isString(n)?{name:n}:m.isFunction(n)?{ctor:n}:n;if(!I.setEditor){var a={args:I,plugin:null,editor:this};I.name&&(p.registry[I.name]?a.plugin=p.registry[I.name](I):z.publish(M._scopeName+".Editor.getPlugin",a));if(!a.plugin)try{var g=
I.ctor||m.getObject(I.name)||u(I.name);g&&(a.plugin=new g(I))}catch(y){throw Error(this.id+": cannot find plugin ["+I.name+"]");}if(!a.plugin)throw Error(this.id+": cannot find plugin ["+I.name+"]");n=a.plugin}1<arguments.length?this._plugins[H]=n:this._plugins.push(n);n.setEditor(this);m.isFunction(n.setToolbar)&&n.setToolbar(this.toolbar)},resize:function(n){n&&F.prototype.resize.apply(this,arguments)},layout:function(){var n=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+f.getPadBorderExtents(this.iframe.parentNode).h+
f.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=n+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(n){var H,I=this.document.body,a=I.clientWidth,g=I.clientHeight,y=I.clientLeft,C=I.offsetWidth,x=I.offsetHeight,N=I.offsetLeft;/^rtl$/i.test(I.dir||"")?a<C&&n.x>a&&n.x<C&&(H=!0):n.x<y&&n.x>N&&(H=!0);H||g<x&&n.y>g&&n.y<x&&(H=!0);H||(delete this._cursorToStart,delete this._savedSelection,"BODY"==n.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(n){this.customUndo&&this.endEditing(!0);"BODY"!=n.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(n){this._inEditing||(this._inEditing=!0,this._beginEditing(n));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(n){if(!this.customUndo||
"undo"!=n&&"redo"!=n){this.customUndo&&(this.endEditing(),this._beginEditing());var H=this.inherited(arguments);this.customUndo&&this._endEditing();return H}return this[n]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(n){try{var H=this.document.execCommand(n,!1,null);if(k("webkit")&&!H)throw{};}catch(I){H=q.substitute,alert(H(this.commands.systemShortcut,
[this.commands[n],H(this.commands[k("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[n]])])),H=!1}return H},queryCommandEnabled:function(n){return!this.customUndo||"undo"!=n&&"redo"!=n?this.inherited(arguments):"undo"==n?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(n){var H=n.mark,I=n.mark;n=n.isCollapsed;var a;if(I)if(9>k("ie")||9===k("ie")&&k("quirks"))if(m.isArray(I))H=[],w.forEach(I,function(C){H.push(B.getNode(C,this.editNode))},this),this.selection.moveToBookmark({mark:H,
isCollapsed:n});else{if(I.startContainer&&I.endContainer&&(a=B.getSelection(this.window))&&a.removeAllRanges){a.removeAllRanges();n=B.create(this.window);var g=B.getNode(I.startContainer,this.editNode);var y=B.getNode(I.endContainer,this.editNode);g&&y&&(n.setStart(g,I.startOffset),n.setEnd(y,I.endOffset),a.addRange(n))}}else(a=B.getSelection(this.window))&&a.removeAllRanges&&(a.removeAllRanges(),n=B.create(this.window),g=B.getNode(I.startContainer,this.editNode),y=B.getNode(I.endContainer,this.editNode),
g&&y&&(n.setStart(g,I.startOffset),n.setEnd(y,I.endOffset),a.addRange(n)))},_changeToStep:function(n,H){this.setValue(H.text);(n=H.bookmark)&&this._moveToBookmark(n)},undo:function(){var n=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var H=this._steps.pop();H&&0<this._steps.length&&(this.focus(),this._changeToStep(H,this._steps[this._steps.length-1]),this._undoedSteps.push(H),this.onDisplayChanged(),delete this._undoRedoActive,n=!0);delete this._undoRedoActive}return n},
redo:function(){var n=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var H=this._undoedSteps.pop();H&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],H),this._steps.push(H),this.onDisplayChanged(),n=!0);delete this._undoRedoActive}return n},endEditing:function(n){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(n),this._inEditing=!1)},_getBookmark:function(){var n=this.selection.getBookmark(),
H=[];if(n&&n.mark){var I=n.mark;if(9>k("ie")||9===k("ie")&&k("quirks")){var a=B.getSelection(this.window);if(m.isArray(I))w.forEach(n.mark,function(y){H.push(B.getIndex(y,this.editNode).o)},this),n.mark=H;else if(a){var g;a.rangeCount&&(g=a.getRangeAt(0));n.mark=g?g.cloneRange():this.selection.getBookmark()}}try{n.mark&&n.mark.startContainer&&(H=B.getIndex(n.mark.startContainer,this.editNode).o,n.mark={startContainer:H,startOffset:n.mark.startOffset,endContainer:n.mark.endContainer===n.mark.startContainer?
H:B.getIndex(n.mark.endContainer,this.editNode).o,endOffset:n.mark.endOffset})}catch(y){n.mark=null}}return n},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:v.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var n=v.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:n,bookmark:this._getBookmark()})},onKeyDown:function(n){k("ie")||this.iframe||n.keyCode!=h.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var H=
n.keyCode;if(n.ctrlKey&&!n.shiftKey&&!n.altKey){if(90==H||122==H){n.stopPropagation();n.preventDefault();this.undo();return}if(89==H||121==H){n.stopPropagation();n.preventDefault();this.redo();return}}this.inherited(arguments);switch(H){case h.ENTER:case h.BACKSPACE:case h.DELETE:this.beginEditing();break;case 88:case 86:if(n.ctrlKey&&!n.altKey&&!n.metaKey){this.endEditing();88==n.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!n.ctrlKey&&!n.altKey&&
!n.metaKey&&(n.keyCode<h.F1||n.keyCode>h.F15)){this.beginEditing();break}case h.ALT:this.endEditing();break;case h.UP_ARROW:case h.DOWN_ARROW:case h.LEFT_ARROW:case h.RIGHT_ARROW:case h.HOME:case h.END:case h.PAGE_UP:case h.PAGE_DOWN:this.endEditing(!0);case h.CTRL:case h.SHIFT:case h.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(n){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(n){this.customUndo?this.isClosed?this.setValue(n):(this.beginEditing(),n||(n="\x26#160;"),this.setValue(n),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(n){this.setValueDeferred.then(m.hitch(this,function(){!this.disabled&&n||!this._buttonEnabledPlugins&&n?
w.forEach(this._plugins,function(H){H.set("disabled",!0)}):this.disabled&&!n&&w.forEach(this._plugins,function(H){H.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&(b.set(this.document.body,"color",b.get(this.iframe,"color")),b.set(this.document.body,"background-color",b.get(this.iframe,"background-color")))}catch(n){}}});m.mixin(p.registry,{undo:Q,redo:Q,cut:Q,copy:Q,paste:Q,insertOrderedList:Q,insertUnorderedList:Q,
indent:Q,outdent:Q,justifyCenter:Q,justifyFull:Q,justifyLeft:Q,justifyRight:Q,"delete":Q,selectAll:Q,removeFormat:Q,unlink:Q,insertHorizontalRule:Q,bold:r,italic:r,underline:r,strikethrough:r,subscript:r,superscript:r,"|":function(){return new p({setEditor:function(n){this.editor=n;this.button=new l({ownerDocument:n.ownerDocument})}})}});return G})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(u,w,G,A,E,d,e,f){G("dijit-legacy-requires")&&E(0,function(){u(["dijit/ToolbarSeparator"])});return w("dijit.Toolbar",[d,f,e],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(u,w,G,A){return u("dijit.ToolbarSeparator",[G,A],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);w.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(u,w,G,A,E){w=w("dijit._editor._Plugin",A,{constructor:function(d){this.params=
d||{};G.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:E,disabled:!1,getLabel:function(d){return this.editor.commands[d]},_initButton:function(){if(this.command.length){var d=this.getLabel(this.command),e=this.editor,f=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(d=G.mixin({label:d,ownerDocument:e.ownerDocument,dir:e.dir,
lang:e.lang,showLabel:!1,iconClass:f,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete d.name,this.button=new this.buttonClass(d))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(d,e,f){this.own(u.connect(d,e,this,f))},updateState:function(){var d=this.editor,e=this.command;if(d&&d.isLoaded&&e.length){var f=this.get("disabled");if(this.button)try{var b=
d._implCommand(e);var h=!f&&(this[b]?this[b](e):d.queryCommandEnabled(e));this.enabled!==h&&(this.enabled=h,this.button.set("disabled",!h));if(h&&"boolean"==typeof this.button.checked){var m=d.queryCommandState(e);this.checked!==m&&(this.checked=m,this.button.set("checked",d.queryCommandState(e)))}}catch(k){console.log(k)}}},setEditor:function(d){this.editor=d;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",G.hitch(this.editor,
"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",G.hitch(this,"updateState")))},setToolbar:function(d){this.button&&d.addChild(this.button)},set:function(d,e){if("object"===typeof d){for(var f in d)this.set(f,d[f]);return this}f=this._getAttrNames(d);if(this[f.s])var b=this[f.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(d,e);return b||this},get:function(d){var e=this._getAttrNames(d);
return this[e.g]?this[e.g]():this[d]},_setDisabledAttr:function(d){this._set("disabled",d);this.updateState()},_getAttrNames:function(d){var e=this._attrPairNames;if(e[d])return e[d];var f=d.charAt(0).toUpperCase()+d.substr(1);return e[d]={s:"_set"+f+"Attr",g:"_get"+f+"Attr"}},_set:function(d,e){this[d]=e}});w.registry={};return w})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m){return u("dijit._editor.plugins.EnterKeyHandling",b,{blockNodeForEnter:"BR",constructor:function(k){k&&("blockNodeForEnter"in k&&(k.blockNodeForEnter=k.blockNodeForEnter.toUpperCase()),A.mixin(this,k))},setEditor:function(k){if(this.editor!==k)if(this.editor=k,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,k.onLoadDeferred.then(A.hitch(this,function(z){this.own(E(k.document,"keydown",A.hitch(this,function(D){if(D.keyCode==G.ENTER){var c=A.mixin({},D);c.shiftKey=
!0;this.handleEnterKey(c)||(D.stopPropagation(),D.preventDefault())}})));9<=d("ie")&&10>=d("ie")&&this.own(E(k.document,"paste",A.hitch(this,function(D){setTimeout(A.hitch(this,function(){var c=this.editor.document.selection.createRange();c.move("character",-1);c.select();c.move("character",1);c.select()}),0)})));return z}));else if(this.blockNodeForEnter){var q=A.hitch(this,"handleEnterKey");k.addKeyHandler(13,0,0,q);k.addKeyHandler(13,0,1,q);this.own(this.editor.on("KeyPressed",A.hitch(this,"onKeyPressed")))}},
onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var k=this.editor.selection.getAncestorElement("LI");if(k){d("mozilla")&&"LI"==k.parentNode.parentNode.nodeName&&(k=k.parentNode.parentNode);var q=k.firstChild;!q||1!=q.nodeType||"UL"!=q.nodeName&&"OL"!=q.nodeName||(k.insertBefore(q.ownerDocument.createTextNode("\u00a0"),q),q=m.create(this.editor.window),q.setStart(k.firstChild,0),k=m.getSelection(this.editor.window,!0),k.removeAllRanges(),k.addRange(q))}else h.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter),(k=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(k.innerHTML=this.bogusHtmlContent,9>=d("ie")&&(k=this.editor.document.selection.createRange(),k.move("character",-1),k.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",
blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(k){var q,z=this.editor.document,D;if(k.shiftKey){k=this.editor.selection.getParentElement();if(q=m.getAncestor(k,this.blockNodes)){if("LI"==q.tagName)return!0;k=m.getSelection(this.editor.window);var c=k.getRangeAt(0);c.collapsed||(c.deleteContents(),k=m.getSelection(this.editor.window),c=k.getRangeAt(0));if(m.atBeginningOfContainer(q,c.startContainer,c.startOffset)){var l=z.createElement("br");c=m.create(this.editor.window);q.insertBefore(l,
q.firstChild);c.setStartAfter(l);k.removeAllRanges();k.addRange(c)}else if(m.atEndOfContainer(q,c.startContainer,c.startOffset))c=m.create(this.editor.window),l=z.createElement("br"),q.appendChild(l),q.appendChild(z.createTextNode("\u00a0")),c.setStart(q.lastChild,0),k.removeAllRanges(),k.addRange(c);else{if((D=c.startContainer)&&3==D.nodeType){var F=D.nodeValue;var O=z.createTextNode(F.substring(0,c.startOffset));var p=z.createTextNode(F.substring(c.startOffset));q=z.createElement("br");""==p.nodeValue&&
d("webkit")&&(p=z.createTextNode("\u00a0"));w.place(O,D,"after");w.place(q,O,"after");w.place(p,q,"after");w.destroy(D);c=m.create(this.editor.window);c.setStart(p,0);k.removeAllRanges();k.addRange(c);return!1}return!0}}else k=m.getSelection(this.editor.window),k.rangeCount?(c=k.getRangeAt(0))&&c.startContainer&&(c.collapsed||(c.deleteContents(),k=m.getSelection(this.editor.window),c=k.getRangeAt(0)),(D=c.startContainer)&&3==D.nodeType?(q=c.startOffset,D.length<q&&(p=this._adjustNodeAndOffset(D,q),
D=p.node,q=p.offset),F=D.nodeValue,O=z.createTextNode(F.substring(0,q)),p=z.createTextNode(F.substring(q)),q=z.createElement("br"),p.length||(p=z.createTextNode("\u00a0")),O.length?w.place(O,D,"after"):O=D,w.place(q,O,"after"),w.place(p,q,"after"),w.destroy(D)):(0<=c.startOffset&&(l=D.childNodes[c.startOffset]),q=z.createElement("br"),p=z.createTextNode("\u00a0"),l?(w.place(q,l,"before"),w.place(p,q,"after")):(D.appendChild(q),D.appendChild(p))),c=m.create(this.editor.window),c.setStart(p,0),c.setEnd(p,
p.length),k.removeAllRanges(),k.addRange(c),this.editor.selection.collapse(!0)):h.prototype.execCommand.call(this.editor,"inserthtml","\x3cbr\x3e");return!1}var t=!0;k=m.getSelection(this.editor.window);c=k.getRangeAt(0);c.collapsed||(c.deleteContents(),k=m.getSelection(this.editor.window),c=k.getRangeAt(0));l=m.getBlockAncestor(c.endContainer,null,this.editor.editNode);var v=l.blockNode;if(this._checkListLater=v&&("LI"==v.nodeName||"LI"==v.parentNode.nodeName))return d("mozilla")&&(this._pressedEnterInBlock=
v),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(v.innerHTML)&&(v.innerHTML="",d("webkit")&&(c=m.create(this.editor.window),c.setStart(v,0),k.removeAllRanges(),k.addRange(c)),this._checkListLater=!1),!0;if(!l.blockNode||l.blockNode===this.editor.editNode){try{h.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(B){}l={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),
blockContainer:this.editor.editNode};if(l.blockNode){if(l.blockNode!=this.editor.editNode&&!(l.blockNode.textContent||l.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(l.blockNode),!1}else l.blockNode=this.editor.editNode;k=m.getSelection(this.editor.window);c=k.getRangeAt(0)}v=z.createElement(this.blockNodeForEnter);v.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(l.blockNode);p=c.endOffset;t=c.endContainer;t.length<p&&(p=this._adjustNodeAndOffset(t,p),t=
p.node,p=p.offset);if(m.atEndOfContainer(l.blockNode,t,p))l.blockNode===l.blockContainer?l.blockNode.appendChild(v):w.place(v,l.blockNode,"after"),t=!1,c=m.create(this.editor.window),c.setStart(v,0),k.removeAllRanges(),k.addRange(c),this.editor.height&&f.scrollIntoView(v);else if(m.atBeginningOfContainer(l.blockNode,c.startContainer,c.startOffset))w.place(v,l.blockNode,l.blockNode===l.blockContainer?"first":"before"),v.nextSibling&&this.editor.height&&(c=m.create(this.editor.window),c.setStart(v.nextSibling,
0),k.removeAllRanges(),k.addRange(c),f.scrollIntoView(v.nextSibling)),t=!1;else{l.blockNode===l.blockContainer?l.blockNode.appendChild(v):w.place(v,l.blockNode,"after");t=!1;l.blockNode.style&&v.style&&l.blockNode.style.cssText&&(v.style.cssText=l.blockNode.style.cssText);if((D=c.startContainer)&&3==D.nodeType){p=c.endOffset;D.length<p&&(p=this._adjustNodeAndOffset(D,p),D=p.node,p=p.offset);F=D.nodeValue;O=z.createTextNode(F.substring(0,p));p=z.createTextNode(F.substring(p,F.length));w.place(O,D,
"before");w.place(p,D,"after");w.destroy(D);for(c=O.parentNode;c!==l.blockNode;){F=z.createElement(c.tagName);c.style&&F.style&&c.style.cssText&&(F.style.cssText=c.style.cssText);"FONT"===c.tagName&&(c.color&&(F.color=c.color),c.face&&(F.face=c.face),c.size&&(F.size=c.size));for(;p;)D=p.nextSibling,F.appendChild(p),p=D;w.place(F,c,"after");O=c;p=F;c=c.parentNode}if(1==p.nodeType||3==p.nodeType&&p.nodeValue)v.innerHTML="";for(O=p;p;)D=p.nextSibling,v.appendChild(p),p=D}c=m.create(this.editor.window);
z=O;if("BR"!==this.blockNodeForEnter){for(;z;)q=z,z=D=z.firstChild;q&&q.parentNode?(v=q.parentNode,c.setStart(v,0),k.removeAllRanges(),k.addRange(c),this.editor.height&&f.scrollIntoView(v),d("mozilla")&&(this._pressedEnterInBlock=l.blockNode)):t=!0}else c.setStart(v,0),k.removeAllRanges(),k.addRange(c),this.editor.height&&f.scrollIntoView(v),d("mozilla")&&(this._pressedEnterInBlock=l.blockNode)}return t},_adjustNodeAndOffset:function(k,q){for(;k.length<q&&k.nextSibling&&3==k.nextSibling.nodeType;)q-=
k.length,k=k.nextSibling;return{node:k,offset:q}},removeTrailingBr:function(k){if(k=/P|DIV|LI/i.test(k.tagName)?k:this.editor.selection.getParentOfType(k,["P","DIV","LI"]))k.lastChild&&(1<k.childNodes.length&&3==k.lastChild.nodeType&&/^[\s\xAD]*$/.test(k.lastChild.nodeValue)||"BR"==k.lastChild.tagName)&&w.destroy(k.lastChild),k.childNodes.length||(k.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m,k,q,z,D,c,l,F,O,p,t,v,B,L,M,Q,r,n,H){var I=G("dijit._editor.RichText",[B,L],{constructor:function(a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};a&&q.isString(a.value)&&(this.value=a.value);this.onLoadDeferred=new A},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[q.trim,q.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);l("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));l("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(l("ie")||l("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[q.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[q.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);O.publish(H._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=q.hitch(this,function(C,x){return function(){return!this.execCommand(C,x)}}),g={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:a("formatblock",
"h1"),2:a("formatblock","h2"),3:a("formatblock","h3"),4:a("formatblock","h4"),"\\":a("insertunorderedlist")};l("ie")||(g.Z=a("redo"));for(var y in g)this.addKeyHandler(y,!0,!1,g[y])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(I._editorCommandsLocalized)this._local2NativeFormatNames=I._local2NativeFormatNames,this._native2LocalFormatNames=I._native2LocalFormatNames;else{I._editorCommandsLocalized=!0;I._local2NativeFormatNames={};
I._native2LocalFormatNames={};this._local2NativeFormatNames=I._local2NativeFormatNames;this._native2LocalFormatNames=I._native2LocalFormatNames;for(var a="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),g="",y,C=0;y=a[C++];)g="l"!==y.charAt(1)?g+("\x3c"+y+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+y+"\x3e\x3cbr/\x3e"):g+("\x3c"+y+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+y+"\x3e\x3cbr/\x3e");var x=f.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:g});this.ownerDocumentBody.appendChild(x);
a=q.hitch(this,function(){for(var N=x.firstChild;N;)try{this.selection.selectElement(N.firstChild);var J=N.tagName.toLowerCase();this._local2NativeFormatNames[J]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[J]]=J;N=N.nextSibling.nextSibling}catch(P){}f.destroy(x)});this.defer(a)}},open:function(a){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new A;this.isClosed||this.close();O.publish(H._scopeName+"._editor.RichText::open",
this);1===arguments.length&&a.nodeName&&(this.domNode=a);var g=this.domNode;if(q.isString(this.value)){var y=this.value;g.innerHTML=""}else if(g.nodeName&&"textarea"==g.nodeName.toLowerCase()){var C=this.textarea=g;this.name=C.name;y=C.value;g=this.domNode=this.ownerDocument.createElement("div");g.setAttribute("widgetId",this.id);C.removeAttribute("widgetId");g.cssText=C.cssText;g.className+=" "+C.className;f.place(g,C,"before");var x=q.hitch(this,function(){h.set(C,{display:"block",position:"absolute",
top:"-1000px"});if(l("ie")){var K=C.style;this.__overflow=K.overflow;K.overflow="hidden"}});l("ie")?this.defer(x,10):x();if(C.form){var N=C.value;this.reset=function(){this.getValue()!==N&&this.replaceValue(N)};z(C.form,"submit",q.hitch(this,function(){d.set(C,"disabled",this.disabled);C.value=this.getValue()}))}}else y=r.getChildrenHtml(g),g.innerHTML="";this.value=y;g.nodeName&&"LI"===g.nodeName&&(g.innerHTML=" \x3cbr\x3e");this.header=g.ownerDocument.createElement("div");g.appendChild(this.header);
this.editingArea=g.ownerDocument.createElement("div");g.appendChild(this.editingArea);this.footer=g.ownerDocument.createElement("div");g.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!w.useXDomain||w.allowXdRichTextSave)){if((y=E.byId(H._scopeName+"._editor.RichText.value"))&&""!==y.value){x=y.value.split(this._SEPARATOR);for(var J=0,P;P=x[J++];)if(P=P.split(this._NAME_CONTENT_SEP),P[0]===this.name){this.value=P[1];x=x.splice(J,1);y.value=x.join(this._SEPARATOR);
break}}I._globalSaveHandler||(I._globalSaveHandler={},p.addOnUnload(function(){for(var K in I._globalSaveHandler){var R=I._globalSaveHandler[K];q.isFunction(R)&&R()}}));I._globalSaveHandler[this.id]=q.hitch(this,"_saveContent")}this.isClosed=!1;y=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");y.id=this.id+"_iframe";y.style.border="none";y.style.width="100%";this._layoutMode?y.style.height="100%":7<=l("ie")?(this.height&&(y.style.height=this.height),this.minHeight&&(y.style.minHeight=
this.minHeight)):y.style.height=this.height?this.height:this.minHeight;y.frameBorder=0;y._loadFunc=q.hitch(this,function(K){this.window=K;this.document=K.document;this.selection=new M.SelectionManager(K);l("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});x=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");x=11>l("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+x+"');document.close()":"javascript: '"+
x+"'";this.editingArea.appendChild(y);y.src=x;"LI"===g.nodeName&&(g.lastChild.style.marginTop="-1.2em");e.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var a=h.getComputedStyle(this.domNode);if(this["aria-label"])var g=this["aria-label"];else{var y=D('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||E.byId(this["aria-labelledby"],this.ownerDocument);y&&(g=y.textContent||y.innerHTML||"")}y="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(g?" aria-label\x3d'"+F.escape(g)+"'":"")+"\x3e\x3c/div\x3e";var C=[a.fontWeight,a.fontSize,a.fontFamily].join(" "),x=a.lineHeight;x=0<=x.indexOf("px")?parseFloat(x)/parseFloat(a.fontSize):0<=x.indexOf("em")?parseFloat(x):"normal";var N="",J=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(P){P=P.replace(/^;/ig,"")+";";var K=P.split(":")[0];if(K){K=q.trim(K);K=K.toLowerCase();var R,S="";for(R=0;R<K.length;R++){var T=K.charAt(R);switch(T){case "-":R++,T=K.charAt(R).toUpperCase();default:S+=
T}}h.set(J.domNode,S,"")}N+=P+";"});this.iframe.setAttribute("title",g);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||m.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",g?"\x3ctitle\x3e"+F.escape(g)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",C,";\n",this.height||l("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",x,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",l("ie")||l("trident")||l("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",g?" aria-label\x3d'"+F.escape(g)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+N+"'\x3e",y,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var a=[];this.styleSheets&&(a=this.styleSheets.split(";"),this.styleSheets=
"");a=a.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var g="",y=0,C,x=v.get(this.ownerDocument);C=a[y++];)C=(new t(x.location,C)).toString(),this.editingAreaStyleSheets.push(C),g+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+C+'"/\x3e';return g},addStyleSheet:function(a){var g=a.toString(),y=v.get(this.ownerDocument);if("."===g.charAt(0)||"/"!==g.charAt(0)&&!a.host)g=(new t(y.location,g)).toString();-1<u.indexOf(this.editingAreaStyleSheets,g)||(this.editingAreaStyleSheets.push(g),
this.onLoadDeferred.then(q.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(g);else{var C=this.document.getElementsByTagName("head")[0],x=this.document.createElement("link");x.rel="stylesheet";x.type="text/css";x.href=g;C.appendChild(x)}})))},removeStyleSheet:function(a){var g=a.toString(),y=v.get(this.ownerDocument);if("."===g.charAt(0)||"/"!==g.charAt(0)&&!a.host)g=(new t(y.location,g)).toString();a=u.indexOf(this.editingAreaStyleSheets,g);-1!==a&&(delete this.editingAreaStyleSheets[a],
D('link[href\x3d"'+g+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(a){a=!!a;this._set("disabled",a);if(this.isLoaded){var g=l("ie")&&(this.isLoaded||!this.focusOnLoad);g&&(this.editNode.unselectable="on");this.editNode.contentEditable=!a;this.editNode.tabIndex=a?"-1":this.tabIndex;g&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(l("mozilla")&&!a&&this._mozSettingProps){a=this._mozSettingProps;for(var y in a)if(a.hasOwnProperty(y))try{this.document.execCommand(y,
!1,a[y])}catch(C){}}this._disabledOK=!0}},onLoad:function(a){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=n.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var g=this;this.beforeIframeNode=f.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=f.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){g.editNode.focus()};this.focusNode=
this.editNode;var y=this.events.concat(this.captureEvents),C=this.iframe?this.document:this.editNode;this.own.apply(this,u.map(y,function(x){var N=x.toLowerCase().replace(/^on/,"");return z(C,N,q.hitch(this,x))},this));this.own(z(C,"mouseup",q.hitch(this,"onClick")));l("ie")&&(this.own(z(this.document,"mousedown",q.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);l("webkit")&&(this._webkitListener=this.own(z(this.document,"mouseup",q.hitch(this,"onDisplayChanged")))[0],this.own(z(this.document,
"mousedown",q.hitch(this,function(x){x=x.target;!x||x!==this.document.body&&x!==this.document||this.defer("placeCursorAtEnd")}))));if(l("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(x){}this.isLoaded=!0;this.set("disabled",this.disabled);y=q.hitch(this,function(){this.setValue(a);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&c(q.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(y):y()},onKeyDown:function(a){if(a.keyCode===k.SHIFT||a.keyCode===k.ALT||a.keyCode===k.META||a.keyCode===k.CTRL)return!0;a.keyCode===k.TAB&&this.isTabIndent&&(a.stopPropagation(),a.preventDefault(),this.queryCommandEnabled(a.shiftKey?"outdent":"indent")&&this.execCommand(a.shiftKey?"outdent":"indent"));if(a.keyCode==k.TAB&&!this.isTabIndent&&!a.ctrlKey&&!a.altKey)return a.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>l("ie")&&a.keyCode===k.BACKSPACE&&"Control"===this.document.selection.type&&(a.stopPropagation(),a.preventDefault(),this.execCommand("delete"));l("ff")&&(a.keyCode===k.PAGE_UP||a.keyCode===k.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&a.preventDefault();var g=this._keyHandlers[a.keyCode],y=arguments;g&&!a.altKey&&u.some(g,function(C){if(!(C.shift^a.shiftKey||C.ctrl^(a.ctrlKey||a.metaKey)))return C.handler.apply(this,y)||a.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(a){m.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",a)},_setValueAttr:function(a){this.setValue(a)},_setDisableSpellCheckAttr:function(a){this.document?d.set(this.document.body,"spellcheck",!a):this.onLoadDeferred.then(q.hitch(this,function(){d.set(this.document.body,"spellcheck",!a)}));this._set("disableSpellCheck",a)},addKeyHandler:function(a,g,y,C){"string"==
typeof a&&(a=a.toUpperCase().charCodeAt(0));q.isArray(this._keyHandlers[a])||(this._keyHandlers[a]=[]);this._keyHandlers[a].push({shift:y||!1,ctrl:g||!1,handler:C})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(a){(l("ie")||l("trident"))&&this.defer(function(){n.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var g=this.getValue(!0);if(g!==this.value)this.onChange(g);
this._set("value",g)},_onFocus:function(a){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!l("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>l("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(a,g){a=a.toLowerCase();"formatblock"===a?l("safari")&&void 0===g&&(a="heading"):"hilitecolor"!==a||l("mozilla")||(a="backcolor");return a},_implCommand:function(a){return"_"+this._normalizeCommand(a)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(a){var g=this._qcaCache[a];return void 0!==g?g:this._qcaCache[a]=this._queryCommandAvailable(a)},_queryCommandAvailable:function(a){switch(a.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return l("ie")||l("trident")||l("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!l("webkit");default:return!1}},execCommand:function(a,g){this.focused&&this.focus();a=this._normalizeCommand(a,g);if(void 0!==g){if("heading"===a)throw Error("unimplemented");"formatblock"===
a&&(l("ie")||l("trident"))&&(g="\x3c"+g+"\x3e")}var y="_"+a+"Impl";if(this[y])var C=this[y](g);else if((g=1<arguments.length?g:null)||"createlink"!==a)C=this.document.execCommand(a,!1,g);this.onDisplayChanged();return C},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);var g=this._implCommand(a);return this[g]?this[g](a):this._browserQueryCommandEnabled(a)},queryCommandState:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);
try{return this.document.queryCommandState(a)}catch(g){return!1}},queryCommandValue:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);if(l("ie")&&"formatblock"===a)a=this._native2LocalFormatNames[this.document.queryCommandValue(a)];else if(l("mozilla")&&"hilitecolor"===a){try{var g=this.document.queryCommandValue("styleWithCSS")}catch(y){g=!1}this.document.execCommand("styleWithCSS",!1,!0);a=this.document.queryCommandValue(a);this.document.execCommand("styleWithCSS",
!1,g)}else a=this.document.queryCommandValue(a);return a},_sCall:function(a,g){return this.selection[a].apply(this.selection,g)},placeCursorAtStart:function(){this.focus();var a=!1;if(l("mozilla"))for(var g=this.editNode.firstChild;g;){if(3===g.nodeType){if(0<g.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this.selection.selectElement(g);break}}else if(1===g.nodeType){a=!0;var y=g.tagName?g.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(y)?this.selection.selectElement(g):
this.selection.selectElementChildren(g);break}g=g.nextSibling}else a=!0,this.selection.selectElementChildren(this.editNode);a&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var a=!1;if(l("mozilla"))for(var g=this.editNode.lastChild;g;){if(3===g.nodeType){if(0<g.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this.selection.selectElement(g);break}}else if(1===g.nodeType){a=!0;this.selection.selectElement(g.lastChild||g);break}g=g.previousSibling}else a=!0,this.selection.selectElementChildren(this.editNode);
a&&this.selection.collapse(!1)},getValue:function(a){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,a):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(a){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){a=this._preFilterContent(a);var g=this.isClosed?this.domNode:this.editNode;g.innerHTML=a;this._preDomFilterContent(g)}else this.textarea.value=a;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(q.hitch(this,function(){this.setValue(a)}))},replaceValue:function(a){this.isClosed?this.setValue(a):this.window&&this.window.getSelection&&!l("mozilla")?this.setValue(a):this.window&&this.window.getSelection?(a=this._preFilterContent(a),this.execCommand("selectall"),this.execCommand("inserthtml",a),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(a);this._set("value",this.getValue(!0))},_preFilterContent:function(a){var g=
a;u.forEach(this.contentPreFilters,function(y){y&&(g=y(g))});return g},_preDomFilterContent:function(a){a=a||this.editNode;u.forEach(this.contentDomPreFilters,function(g){g&&q.isFunction(g)&&g(a)},this)},_postFilterContent:function(a,g){if(q.isString(a))var y=a;else a=a||this.editNode,this.contentDomPostFilters.length&&(g&&(a=q.clone(a)),u.forEach(this.contentDomPostFilters,function(C){a=C(a)})),y=r.getChildrenHtml(a);q.trim(y.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(y="");u.forEach(this.contentPostFilters,
function(C){y=C(y)});return y},_saveContent:function(){var a=E.byId(H._scopeName+"._editor.RichText.value");a&&(a.value&&(a.value+=this._SEPARATOR),a.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(a,g){a=a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");g||(a=a.replace(/'/gm,"\x26#39;"));return a},getNodeHtml:function(a){m.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return r.getNodeHtml(a)},getNodeChildrenHtml:function(a){m.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return r.getChildrenHtml(a)},close:function(a){if(!this.isClosed){arguments.length||(a=!0);a&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);l("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var g=this.textarea.style;g.position="";g.left=g.top="";l("ie")&&(g.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;f.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;e.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);I._globalSaveHandler&&delete I._globalSaveHandler[this.id]},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(a){a=a.replace(/\sclass="webkit-block-placeholder"/gi,"");a=a.replace(/\sclass="apple-style-span"/gi,
"");return a=a.replace(/<meta charset="utf-8" \/>/gi,"")},_normalizeFontStyle:function(a){return a.replace(/<(\/)?strong([ >])/gi,"\x3c$1b$2").replace(/<(\/)?em([ >])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(a){if(!a)return!1;
var g=9>l("ie")?this.document.selection.createRange():this.document;try{return g.queryCommandEnabled(a)}catch(y){return!1}},_createlinkEnabledImpl:function(){var a=!0;return a=l("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var a=!0;return a=l("mozilla")||l("webkit")?this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var a=
!0;return a=l("mozilla")||l("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var a=!0;l("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("cut");return a},_copyEnabledImpl:function(){var a=!0;l("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("copy");return a},_pasteEnabledImpl:function(){var a=!0;return l("webkit")?!0:a=this._browserQueryCommandEnabled("paste")},
_inserthorizontalruleImpl:function(a){return l("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,a)},_unlinkImpl:function(a){return this.queryCommandEnabled("unlink")&&(l("mozilla")||l("webkit"))?(a=this.selection.getAncestorElement("a"),this.selection.selectElement(a),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",!1,a)},_hilitecolorImpl:function(a){if(!this._handleTextColorOrProperties("hilitecolor",a))if(l("mozilla")){this.document.execCommand("styleWithCSS",
!1,!0);console.log("Executing color command.");var g=this.document.execCommand("hilitecolor",!1,a);this.document.execCommand("styleWithCSS",!1,!1)}else g=this.document.execCommand("hilitecolor",!1,a);return g},_backcolorImpl:function(a){l("ie")&&(a=a?a:null);var g=this._handleTextColorOrProperties("backcolor",a);g||(g=this.document.execCommand("backcolor",!1,a));return g},_forecolorImpl:function(a){l("ie")&&(a=a?a:null);var g=!1;(g=this._handleTextColorOrProperties("forecolor",a))||(g=this.document.execCommand("forecolor",
!1,a));return g},_inserthtmlImpl:function(a){a=this._preFilterContent(a);var g=!0;if(9>l("ie")){var y=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var C=y.item(0);y.length;)y.remove(y.item(0));C.outerHTML=a}else y.pasteHTML(a);y.select()}else if(8>l("trident")){var x=Q.getSelection(this.window);if(x&&x.rangeCount&&x.getRangeAt){y=x.getRangeAt(0);y.deleteContents();var N=f.create("div");N.innerHTML=a;for(C=this.document.createDocumentFragment();a=
N.firstChild;)var J=C.appendChild(a);y.insertNode(C);J&&(y=y.cloneRange(),y.setStartAfter(J),y.collapse(!1),x.removeAllRanges(),x.addRange(y))}}else l("mozilla")&&!a.length?this.selection.remove():g=this.document.execCommand("inserthtml",!1,a);return g},_boldImpl:function(a){var g=!1;if(l("ie")||l("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("bold");g||(g=this.document.execCommand("bold",!1,a));return g},_italicImpl:function(a){var g=!1;if(l("ie")||l("trident"))this._adaptIESelection(),
g=this._adaptIEFormatAreaAndExec("italic");g||(g=this.document.execCommand("italic",!1,a));return g},_underlineImpl:function(a){var g=!1;if(l("ie")||l("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("underline");g||(g=this.document.execCommand("underline",!1,a));return g},_strikethroughImpl:function(a){var g=!1;if(l("ie")||l("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("strikethrough");g||(g=this.document.execCommand("strikethrough",!1,a));return g},_superscriptImpl:function(a){var g=
!1;if(l("ie")||l("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("superscript");g||(g=this.document.execCommand("superscript",!1,a));return g},_subscriptImpl:function(a){var g=!1;if(l("ie")||l("trident"))this._adaptIESelection(),g=this._adaptIEFormatAreaAndExec("subscript");g||(g=this.document.execCommand("subscript",!1,a));return g},_fontnameImpl:function(a){if(l("ie")||l("trident"))var g=this._handleTextColorOrProperties("fontname",a);g||(g=this.document.execCommand("fontname",
!1,a));return g},_fontsizeImpl:function(a){if(l("ie")||l("trident"))var g=this._handleTextColorOrProperties("fontsize",a);g||(g=this.document.execCommand("fontsize",!1,a));return g},_insertorderedlistImpl:function(a){var g=!1;if(l("ie")||l("trident")||l("edge"))g=this._adaptIEList("insertorderedlist",a);g||(g=this.document.execCommand("insertorderedlist",!1,a));return g},_insertunorderedlistImpl:function(a){var g=!1;if(l("ie")||l("trident")||l("edge"))g=this._adaptIEList("insertunorderedlist",a);
g||(g=this.document.execCommand("insertunorderedlist",!1,a));return g},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(a){var g=0;if(a&&a.childNodes){var y;for(y=0;y<a.childNodes.length;y++){var C=b.position(a.childNodes[y]);g+=C.h}}return g},_isNodeEmpty:function(a,g){return 1===a.nodeType?0<a.childNodes.length?this._isNodeEmpty(a.childNodes[0],g):!0:3===a.nodeType?
""===a.nodeValue.substring(g):!1},_removeStartingRangeFromRange:function(a,g){if(a.nextSibling)g.setStart(a.nextSibling,0);else{for(a=a.parentNode;a&&null==a.nextSibling;)a=a.parentNode;a&&g.setStart(a.nextSibling,0)}return g},_adaptIESelection:function(){var a=Q.getSelection(this.window);if(a&&a.rangeCount&&!a.isCollapsed){for(var g=a.getRangeAt(0),y=g.startContainer,C=g.startOffset;3===y.nodeType&&C>=y.length&&y.nextSibling;)C-=y.length,y=y.nextSibling;for(var x=null;this._isNodeEmpty(y,C)&&y!==
x;)x=y,g=this._removeStartingRangeFromRange(y,g),y=g.startContainer,C=0;a.removeAllRanges();a.addRange(g)}},_adaptIEFormatAreaAndExec:function(a){var g=Q.getSelection(this.window),y=this.document,C;if(a&&g&&g.isCollapsed){if(this.queryCommandValue(a)){a=this._tagNamesForCommand(a);var x=g.getRangeAt(0);var N=x.startContainer;if(3===N.nodeType){var J=x.endOffset;N.length<J&&(J=this._adjustNodeAndOffset(P,J),N=J.node,J=J.offset)}for(;N&&N!==this.editNode;){var P=N.tagName?N.tagName.toLowerCase():"";
if(-1<u.indexOf(a,P)){var K=N;break}N=N.parentNode}if(K&&(P=x.startContainer,a=y.createElement(K.tagName),f.place(a,K,"after"),P&&3===P.nodeType)){J=x.endOffset;P.length<J&&(J=this._adjustNodeAndOffset(P,J),P=J.node,J=J.offset);N=P.nodeValue;x=y.createTextNode(N.substring(0,J));var R=N.substring(J,N.length);R&&(C=y.createTextNode(R));f.place(x,P,"before");if(C){var S=y.createElement("span");S.className="ieFormatBreakerSpan";f.place(S,P,"after");f.place(C,S,"after");C=S}f.destroy(P);J=x.parentNode;
for(P=[];J!==K;){N=J.tagName;x={tagName:N};P.push(x);N=y.createElement(N);J.style&&N.style&&J.style.cssText&&(N.style.cssText=J.style.cssText,x.cssText=J.style.cssText);"FONT"===J.tagName&&(J.color&&(N.color=J.color,x.color=J.color),J.face&&(N.face=J.face,x.face=J.face),J.size&&(N.size=J.size,x.size=J.size));J.className&&(N.className=J.className,x.className=J.className);if(C)for(;C;)x=C.nextSibling,N.appendChild(C),C=x;N.tagName==J.tagName?(S=y.createElement("span"),S.className="ieFormatBreakerSpan",
f.place(S,J,"after"),f.place(N,S,"after")):f.place(N,J,"after");x=J;C=N;J=J.parentNode}if(C){if(1===C.nodeType||3===C.nodeType&&C.nodeValue)a.innerHTML="";for(;C;)x=C.nextSibling,a.appendChild(C),C=x}if(P.length){x=P.pop();C=y.createElement(x.tagName);x.cssText&&C.style&&(C.style.cssText=x.cssText);x.className&&(C.className=x.className);"FONT"===x.tagName&&(x.color&&(C.color=x.color),x.face&&(C.face=x.face),x.size&&(C.size=x.size));for(f.place(C,a,"before");P.length;)x=P.pop(),K=y.createElement(x.tagName),
x.cssText&&K.style&&(K.style.cssText=x.cssText),x.className&&(K.className=x.className),"FONT"===x.tagName&&(x.color&&(K.color=x.color),x.face&&(K.face=x.face),x.size&&(K.size=x.size)),C.appendChild(K),C=K;K=y.createTextNode(".");S.appendChild(K);C.appendChild(K)}else S=y.createElement("span"),S.className="ieFormatBreakerSpan",K=y.createTextNode("."),S.appendChild(K),f.place(S,a,"before");C=Q.create(this.window);C.setStart(K,0);C.setEnd(K,K.length);g.removeAllRanges();g.addRange(C);this.selection.collapse(!1);
K.parentNode.innerHTML="";a.firstChild||f.destroy(a);return!0}return!1}x=g.getRangeAt(0);if((P=x.startContainer)&&3===P.nodeType)return J=x.startOffset,P.length<J&&(J=this._adjustNodeAndOffset(P,J),P=J.node,J=J.offset),N=P.nodeValue,x=y.createTextNode(N.substring(0,J)),R=N.substring(J),""!==R&&(C=y.createTextNode(N.substring(J))),S=y.createElement("span"),K=y.createTextNode("."),S.appendChild(K),x.length?f.place(x,P,"after"):x=P,f.place(S,x,"after"),C&&f.place(C,S,"after"),f.destroy(P),C=Q.create(this.window),
C.setStart(K,0),C.setEnd(K,K.length),g.removeAllRanges(),g.addRange(C),y.execCommand(a),f.place(S.firstChild,S,"before"),f.destroy(S),C.setStart(K,0),C.setEnd(K,K.length),g.removeAllRanges(),g.addRange(C),this.selection.collapse(!1),K.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(a){var g=Q.getSelection(this.window);if(g.isCollapsed&&g.rangeCount&&!this.queryCommandValue(a)){var y=g.getRangeAt(0),C=y.startContainer;if(C&&3==C.nodeType&&!y.startOffset)return y="ul","insertorderedlist"===
a&&(y="ol"),a=this.document.createElement(y),y=f.create("li",null,a),f.place(a,C,"before"),y.appendChild(C),f.create("br",null,a,"after"),a=Q.create(this.window),a.setStart(C,0),a.setEnd(C,C.length),g.removeAllRanges(),g.addRange(a),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(a,g){var y=Q.getSelection(this.window),C=this.document,x,N;g=g||null;if(a&&y&&y.isCollapsed&&y.rangeCount){var J=y.getRangeAt(0);if((x=J.startContainer)&&3===x.nodeType){var P=J.startOffset;
x.length<P&&(J=this._adjustNodeAndOffset(x,P),x=J.node,P=J.offset);var K=x.nodeValue;J=C.createTextNode(K.substring(0,P));""!==K.substring(P)&&(N=C.createTextNode(K.substring(P)));K=C.createElement("span");P=C.createTextNode(".");K.appendChild(P);C=C.createElement("span");K.appendChild(C);J.length?f.place(J,x,"after"):J=x;f.place(K,J,"after");N&&f.place(N,K,"after");f.destroy(x);x=Q.create(this.window);x.setStart(P,0);x.setEnd(P,P.length);y.removeAllRanges();y.addRange(x);if(l("webkit")){y="color";
if("hilitecolor"===a||"backcolor"===a)y="backgroundColor";h.set(K,y,g);this.selection.remove();f.destroy(C);K.innerHTML="\x26#160;";this.selection.selectElement(K);this.focus()}else this.execCommand(a,g),f.place(K.firstChild,K,"before"),f.destroy(K),x.setStart(P,0),x.setEnd(P,P.length),y.removeAllRanges(),y.addRange(x),this.selection.collapse(!1),P.parentNode.removeChild(P);return!0}}return!1},_adjustNodeAndOffset:function(a,g){for(;a.length<g&&a.nextSibling&&3===a.nextSibling.nodeType;)g-=a.length,
a=a.nextSibling;return{node:a,offset:g}},_tagNamesForCommand:function(a){return"bold"===a?["b","strong"]:"italic"===a?["i","em"]:"strikethrough"===a?["s","strike"]:"superscript"===a?["sup"]:"subscript"===a?["sub"]:"underline"===a?["u"]:[]},_stripBreakerNodes:function(a){if(this.isLoaded)return D(".ieFormatBreakerSpan",a).forEach(function(g){for(;g.firstChild;)f.place(g.firstChild,g,"before");f.destroy(g)}),a},_stripTrailingEmptyNodes:function(a){function g(y){return/^(p|div|br)$/i.test(y.nodeName)&&
0==y.children.length&&/^[\s\xA0]*$/.test(y.textContent||y.innerText||"")||3===y.nodeType&&/^[\s\xA0]*$/.test(y.nodeValue)}for(;a.lastChild&&g(a.lastChild);)f.destroy(a.lastChild);return a},_setTextDirAttr:function(a){this._set("textDir",a);this.onLoadDeferred.then(q.hitch(this,function(){this.editNode.dir=a}))}});return I})},"dijit/_editor/range":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(u,w,G){var A={getIndex:function(e,f){for(var b=[],h=[],m=e,k,q;e!=
f;){var z=0;for(k=e.parentNode;q=k.childNodes[z++];)if(q===e){--z;break}b.unshift(z);h.unshift(z-k.childNodes.length);e=k}if(0<b.length&&3==m.nodeType){for(q=m.previousSibling;q&&3==q.nodeType;)b[b.length-1]--,q=q.previousSibling;for(q=m.nextSibling;q&&3==q.nodeType;)h[h.length-1]++,q=q.nextSibling}return{o:b,r:h}},getNode:function(e,f){if(!G.isArray(e)||0==e.length)return f;var b=f;u.every(e,function(h){if(0<=h&&h<b.childNodes.length)b=b.childNodes[h];else return b=null,!1;return!0});return b},getCommonAncestor:function(e,
f,b){b=b||e.ownerDocument.body;var h=function(q){for(var z=[];q;)if(z.unshift(q),q!==b)q=q.parentNode;else break;return z};e=h(e);f=h(f);h=Math.min(e.length,f.length);for(var m=e[0],k=1;k<h;k++)if(e[k]===f[k])m=e[k];else break;return m},getAncestor:function(e,f,b){for(b=b||e.ownerDocument.body;e&&e!==b;){var h=e.nodeName.toUpperCase();if(f.test(h))return e;e=e.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(e,f,b){b=b||e.ownerDocument.body;
f=f||A.BlockTagNames;for(var h=null,m;e&&e!==b;){var k=e.nodeName.toUpperCase();!h&&f.test(k)&&(h=e);!m&&/^(?:BODY|TD|TH|CAPTION)$/.test(k)&&(m=e);e=e.parentNode}return{blockNode:h,blockContainer:m||e.ownerDocument.body}},atBeginningOfContainer:function(e,f,b){var h=!1,m=0==b;m||3!=f.nodeType||/^[\s\xA0]+$/.test(f.nodeValue.substr(0,b))&&(m=!0);if(m)for(h=!0;f&&f!==e;){if(f.previousSibling){h=!1;break}f=f.parentNode}return h},atEndOfContainer:function(e,f,b){var h=!1,m=b==(f.length||f.childNodes.length);
m||3!=f.nodeType||/^[\s\xA0]+$/.test(f.nodeValue.substr(b))&&(m=!0);if(m)for(h=!0;f&&f!==e;){if(f.nextSibling){h=!1;break}f=f.parentNode}return h},adjacentNoneTextNode:function(e,f){var b=e;e=0-e.length||0;for(f=f?"nextSibling":"previousSibling";b&&3==b.nodeType;)e+=b.length,b=b[f];return[b,e]},create:function(e){e=e||window;return e.getSelection?e.document.createRange():new d},getSelection:function(e,f){if(e.getSelection)return e.getSelection();e=new E.selection(e);f||e._getCurrentSelection();return e}};
if(!window.getSelection)var E=A.ie={cachedSelection:{},selection:function(e){this._ranges=[];this.addRange=function(f,b){this._ranges.push(f);b||f._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(f){return this._ranges[f]};this._getCurrentSelection=function(){this.removeAllRanges();var f=e.document.selection.createRange();f="CONTROL"==e.document.selection.type.toUpperCase()?new d(E.decomposeControlRange(f)):
new d(E.decomposeTextRange(f));this.addRange(f,!0),this.isCollapsed=f.collapsed}},decomposeControlRange:function(e){var f=e.item(0),b=e.item(e.length-1);e=f.parentNode;var h=b.parentNode;f=A.getIndex(f,e).o[0];b=A.getIndex(b,h).o[0]+1;return[e,f,h,b]},getEndPoint:function(e,f){var b=e.duplicate();b.collapse(!f);var h="EndTo"+(f?"End":"Start"),m=b.parentElement(),k;if(0<m.childNodes.length)u.every(m.childNodes,function(D,c){if(3!=D.nodeType)if(b.moveToElementText(D),0<b.compareEndPoints(h,e))if(k&&
3==k.nodeType){q=k;var l=!0}else return q=m,z=c,!1;else{if(c==m.childNodes.length-1)return q=m,z=m.childNodes.length,!1}else c==m.childNodes.length-1&&(q=D,l=!0);if(l&&q)return q=(D=A.adjacentNoneTextNode(q)[0])?D.nextSibling:m.firstChild,c=A.adjacentNoneTextNode(q),D=c[0],c=c[1],D?(b.moveToElementText(D),b.collapse(!1)):b.moveToElementText(m),b.setEndPoint(h,e),z=b.text.length-c,!1;k=D;return!0});else{var q=m;var z=0}f||1!=q.nodeType||z!=q.childNodes.length||(f=q.nextSibling)&&3==f.nodeType&&(q=
f,z=0);return[q,z]},setEndPoint:function(e,f,b){e=e.duplicate();var h;if(3!=f.nodeType)if(0<b){if(h=f.childNodes[b-1])if(3==h.nodeType)f=h,b=h.length;else if(h.nextSibling&&3==h.nextSibling.nodeType)f=h.nextSibling,b=0;else{e.moveToElementText(h.nextSibling?h:f);var m=h.parentNode;h=m.insertBefore(h.ownerDocument.createTextNode(" "),h.nextSibling);e.collapse(!1);m.removeChild(h)}}else e.moveToElementText(f),e.collapse(!0);3==f.nodeType&&(h=A.adjacentNoneTextNode(f),m=h[0],h=h[1],m?(e.moveToElementText(m),
e.collapse(!1),"inherit"!=m.contentEditable&&h++):(e.moveToElementText(f.parentNode),e.collapse(!0),e.move("character",1),e.move("character",-1)),b+=h,0<b&&e.move("character",b)!=b&&console.error("Error when moving!"));return e},decomposeTextRange:function(e){var f=E.getEndPoint(e),b=f[0],h=f[1],m=f[0];f=f[1];e.htmlText.length&&(e.htmlText==e.text?f=h+e.text.length:(f=E.getEndPoint(e,!0),m=f[0],f=f[1]));return[b,h,m,f]},setRange:function(e,f,b,h,m,k){f=E.setEndPoint(e,f,b);e.setEndPoint("StartToStart",
f);if(!k)var q=E.setEndPoint(e,h,m);e.setEndPoint("EndToEnd",q||f);return e}},d=A.W3CRange=w(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=this.startContainer!==this.endContainer?A.getCommonAncestor(this.startContainer,
this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(e,f){f=parseInt(f);if(this.startContainer!==e||this.startOffset!=f)delete this._cachedBookmark,this.startContainer=e,this.startOffset=f,this.endContainer?this._updateInternal():this.setEnd(e,f)},setEnd:function(e,f){f=parseInt(f);if(this.endContainer!==e||this.endOffset!=f)delete this._cachedBookmark,this.endContainer=e,this.endOffset=f,this.startContainer?
this._updateInternal():this.setStart(e,f)},setStartAfter:function(e,f){this._setPoint("setStart",e,f,1)},setStartBefore:function(e,f){this._setPoint("setStart",e,f,0)},setEndAfter:function(e,f){this._setPoint("setEnd",e,f,1)},setEndBefore:function(e,f){this._setPoint("setEnd",e,f,0)},_setPoint:function(e,f,b,h){b=A.getIndex(f,f.parentNode).o;this[e](f.parentNode,b.pop()+h)},_getIERange:function(){var e=(this._body||this.endContainer.ownerDocument.body).createTextRange();E.setRange(e,this.startContainer,
this.startOffset,this.endContainer,this.endOffset,this.collapsed);return e},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var e=this.startContainer,f=this._getIERange();3!==e.nodeType||this.startOffset||this.setStartBefore(e);f.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var e=new d([this.startContainer,this.startOffset,
this.endContainer,this.endOffset]);e._body=this._body;return e},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});G.setObject("dijit.range",A);return A})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(u,w,G){var A={};w.setObject("dijit._editor.html",A);var E=A.escapeXml=function(d,e){d=d.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,
"\x26gt;").replace(/"/gm,"\x26quot;");e||(d=d.replace(/'/gm,"\x26#39;"));return d};A.getNodeHtml=function(d){var e=[];A.getNodeHtmlHelper(d,e);return e.join("")};A.getNodeHtmlHelper=function(d,e){switch(d.nodeType){case 1:var f=d.nodeName.toLowerCase();if(!f||"/"==f.charAt(0))return"";e.push("\x3c",f);var b=[],h={},m;if(G("dom-attributes-explicit")||G("dom-attributes-specified-flag"))for(var k=0;m=d.attributes[k++];){var q=m.name;"_dj"===q.substr(0,3)||G("dom-attributes-specified-flag")&&!m.specified||
q in h||(m=m.value,("src"==q||"href"==q)&&d.getAttribute("_djrealurl")&&(m=d.getAttribute("_djrealurl")),8===G("ie")&&"style"===q&&(m=m.replace("HEIGHT:","height:").replace("WIDTH:","width:")),b.push([q,m]),h[q]=m)}else{var z=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML;h=z.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);z=z.substr(0,z.indexOf("\x3e"));u.forEach(h,function(D){if(D){var c=D.indexOf("\x3d");if(0<c&&(D=D.substring(0,c),"_dj"!=D.substr(0,3)))if("src"!=D&&"href"!=D||!d.getAttribute("_djrealurl")){switch(D){case "style":var l=
d.style.cssText.toLowerCase();break;case "class":l=d.className;break;case "width":if("img"===f){(c=/width=(\S+)/i.exec(z))&&(l=c[1]);break}case "height":if("img"===f){(c=/height=(\S+)/i.exec(z))&&(l=c[1]);break}default:l=d.getAttribute(D)}null!=l&&b.push([D,l.toString()])}else b.push([D,d.getAttribute("_djrealurl")])}},this)}b.sort(function(D,c){return D[0]<c[0]?-1:D[0]==c[0]?0:1});for(h=0;m=b[h++];)e.push(" ",m[0],'\x3d"',"string"===typeof m[1]?E(m[1],!0):m[1],'"');switch(f){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":e.push(" /\x3e");
break;case "script":e.push("\x3e",d.innerHTML,"\x3c/",f,"\x3e");break;default:e.push("\x3e"),d.hasChildNodes()&&A.getChildrenHtmlHelper(d,e),e.push("\x3c/",f,"\x3e")}break;case 4:case 3:e.push(E(d.nodeValue,!0));break;case 8:e.push("\x3c!--",E(d.nodeValue,!0),"--\x3e");break;default:e.push("\x3c!-- Element not recognized - Type: ",d.nodeType," Name: ",d.nodeName,"--\x3e")}};A.getChildrenHtml=function(d){var e=[];A.getChildrenHtmlHelper(d,e);return e.join("")};A.getChildrenHtmlHelper=function(d,e){if(d)for(var f=
d.childNodes||d,b=!G("ie")||f!==d,h,m=0;h=f[m++];)b&&h.parentNode!=d||A.getNodeHtmlHelper(h,e)};return A})},"jimu/dijit/EditorXssFilter":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dojo/_base/lang dojo/Evented libs/arcgis-html-sanitizer/arcgis-html-sanitizer".split(" "),function(u,w,G,A,E,d){var e=null,f=u([G,E],{baseClass:"jimu-editor-xss-filter",declaredClass:"jimu.dijit.EditorXssFilter",sanitizer:null,xss:null,whiteList:{},graphicsWhiteList:{},postCreate:function(){this.whiteList=
this._getWhiteList();this.sanitizer=new d({whiteList:this.whiteList,safeAttrValue:A.hitch(this,function(b,h,m,k){return"style"===h?this.xss.friendlyAttrValue(m).replace(/"/g,"'"):"img"===b&&"src"===h?this.xss.escapeAttrValue(m):this.xss.safeAttrValue(b,h,m,k)}),onTag:A.hitch(this,function(b,h,m){if(m.isWhite&&this._isInWhiteList(b,this.graphicsWhiteList))return h}),onIgnoreTagAttr:A.hitch(this,function(b,h,m,k){if("data-"===h.substr(0,5))return h+'\x3d"'+this.xss.escapeAttrValue(m)+'"'}),onIgnoreTag:A.hitch(this,
function(b,h,m){if("o:"===b.substr(0,2)||"!--[if"===b||"!--[endif]--"===b)return h})},!0);this.xss=this.sanitizer.xss},sanitize:function(b){return this.sanitizer.sanitize(b)},_getWhiteList:function(){var b="title height width class style font-family id align text-align".split(" "),h={div:b,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,span:b,p:b,s:b,strong:b,em:b,u:b,ol:b,ul:b,li:b,a:["href","target"].concat(b),img:["src","alt","border"].concat(b),blockquote:b,font:["face","size","color"].concat(b),pre:b,code:b,
b:b,i:b,wbr:b,video:"autoplay controls loop muted poster preload".split(" ").concat(b),audio:["autoplay","controls","loop","muted","preload"].concat(b),source:["media","src","type"].concat(b),table:["cellpadding","cellspacing","border"].concat(b),tbody:[].concat(b),tr:["valign"].concat(b),td:["valign","colspan","rowspan","nowrap"].concat(b),th:["valign","colspan","rowspan","nowrap"].concat(b),hr:b,html:b,title:b,link:["rel","href"],style:["type"].concat(b),body:b};this.graphicsWhiteList={animate:[],
animateMotion:[],animateTransform:[],circle:[],clipPath:[],"color-profile":[],defs:[],desc:[],discard:[],ellipse:[],feBlend:[],feColorMatrix:[],feComponentTransfer:[],feComposite:[],feConvolveMatrix:[],feDiffuseLighting:[],feDisplacementMap:[],feDistantLight:[],feDropShadow:[],feFlood:[],feFuncA:[],feFuncB:[],feFuncG:[],feFuncR:[],feGaussianBlur:[],feImage:[],feMerge:[],feMergeNode:[],feMorphology:[],feOffset:[],fePointLight:[],feSpecularLighting:[],feSpotLight:[],feTile:[],feTurbulence:[],filter:[],
foreignObject:[],g:[],hatch:[],hatchpath:[],line:[],linearGradient:[],marker:[],mask:[],mesh:[],meshgradient:[],meshpatch:[],meshrow:[],metadata:[],mpath:[],path:[],pattern:[],polygon:[],polyline:[],radialGradient:[],rect:[],set:[],solidcolor:[],stop:[],svg:[],switch:[],symbol:[],text:[],textPath:[],title:[],tspan:[],use:[],view:[],object:[],canvas:b};return this._extendObjectOfArrays([h,{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],
audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],
small:[],span:[],sub:[],summary:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")},this.graphicsWhiteList])},_extendObjectOfArrays:function(b){var h={};w.forEach(b,function(m){var k=Object.keys(m);w.forEach(k,
function(q){Array.isArray(m[q])&&Array.isArray(h[q])?h[q]=h[q].concat(m[q]):h[q]=m[q]},this)},this);return h},_isInWhiteList:function(b,h){h=Object.keys(h);var m=!1;w.forEach(h,function(k){b===k&&(m=!0)},this);return m}});f.getInstance=function(){null===e&&(e=new f);return e};return f})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m,k,q){var z=G("dijit._editor.plugins.LinkDialog",m,{allowUnsafeHtml:!1,linkFilter:[[/</g,"\x26lt;"]],buttonClass:k,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=d.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(c){u("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),d.hitch(this,function(l,F,O){var p=this;this.tag="insertImage"==this.command?"img":"a";l=d.delegate(l.getLocalization("dijit","common",this.lang),l.getLocalization("dijit._editor",
"LinkDialog",this.lang));var t=this.dropDown=this.button.dropDown=new F({title:l[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:d.hitch(this,"setValue"),onOpen:function(){p._onOpenDialog();F.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(d.hitch(p,"_onCloseDialog"),0)}});l.urlRegExp=this.urlRegExp;l.id=O.getUniqueId(this.editor.id);this._uniqueId=l.id;this._setContent(t.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
h.substitute(this.linkDialogTemplate,l));t.startup();this._urlInput=O.byId(this._uniqueId+"_urlInput");this._textInput=O.byId(this._uniqueId+"_textInput");this._setButton=O.byId(this._uniqueId+"_setButton");this.own(O.byId(this._uniqueId+"_cancelButton").on("click",d.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",d.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",d.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=d.hitch(this,function(){var v=this._urlInput.get("value");return this._urlRegExp.test(v)||this._emailRegExp.test(v)});this.own(e(t.domNode,"keydown",d.hitch(this,d.hitch(this,function(v){!v||v.keyCode!=E.ENTER||v.shiftKey||v.metaKey||v.ctrlKey||v.altKey||this._setButton.get("disabled")||(t.onExecute(),t.execute(t.get("value")))}))));c()}))},_checkAndFixInput:function(){var c=this,l=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var F=l,O=!1,p=!1;F&&1<F.length&&(F=d.trim(F),0!==F.indexOf("mailto:")&&(0<F.indexOf("/")?-1===F.indexOf("://")&&"/"!==F.charAt(0)&&F.indexOf("./")&&0!==F.indexOf("../")&&c._hostRxp.test(F)&&(O=!0):c._userAtRxp.test(F)&&(p=!0)));O&&c._urlInput.set("value","http://"+F);p&&c._urlInput.set("value","mailto:"+F);c._setButton.set("disabled",!c._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(d.hitch(this,
function(){this.own(e(this.editor.editNode,"mouseup",d.hitch(this,"_onMouseUp")));this.own(e(this.editor.editNode,"dblclick",d.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(c){this.dropDown.set({parserScope:"dojo",content:c})},_checkValues:function(c){c&&c.urlInput&&(c.urlInput=c.urlInput.replace(/"/g,"\x26quot;"));!this.allowUnsafeHtml&&c&&c.textInput&&("function"===typeof this.linkFilter?c.textInput=this.linkFilter(c.textInput):
w.forEach(this.linkFilter,function(l){c.textInput=c.textInput.replace(l[0],l[1])}));return c},_createlinkEnabledImpl:function(){return!0},setValue:function(c){this._onCloseDialog();if(9>f("ie")){var l=q.getSelection(this.editor.window).getRangeAt(0).endContainer;3===l.nodeType&&(l=l.parentNode);l&&l.nodeName&&l.nodeName.toLowerCase()!==this.tag&&(l=this.editor.selection.getSelectedElement(this.tag));l&&l.nodeName&&l.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(l),
this.editor.execCommand("unlink"))}c=this._checkValues(c);this.editor.execCommand("inserthtml",h.substitute(this.htmlTemplate,c));b("a",this.editor.document).forEach(function(F){F.innerHTML||A.has(F,"name")||F.parentNode.removeChild(F)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(c){if(c&&c.tagName.toLowerCase()===this.tag){var l=c.getAttribute("_djrealurl")||c.getAttribute("href");var F=c.getAttribute("target")||"_self";var O=c.textContent||
c.innerText;this.editor.selection.selectElement(c,!0)}else O=this.editor.selection.getSelectedText();return{urlInput:l||"",textInput:O||"",targetSelect:F||""}},_onOpenDialog:function(){if(f("ie")){var c=q.getSelection(this.editor.window);if(c.rangeCount){var l=c.getRangeAt(0);var F=l.endContainer;3===F.nodeType&&(F=F.parentNode);F&&F.nodeName&&F.nodeName.toLowerCase()!==this.tag&&(F=this.editor.selection.getSelectedElement(this.tag));if(!F||F.nodeName&&F.nodeName.toLowerCase()!==this.tag)(c=this.editor.selection.getAncestorElement(this.tag))&&
c.nodeName&&c.nodeName.toLowerCase()==this.tag?(F=c,this.editor.selection.selectElement(F)):l.startContainer===l.endContainer&&(c=l.startContainer.firstChild)&&c.nodeName&&c.nodeName.toLowerCase()==this.tag&&(F=c,this.editor.selection.selectElement(F))}}else F=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(F))},_onDblClick:function(c){if(c&&c.target&&(c=c.target,(c.tagName?c.tagName.toLowerCase():
"")===this.tag&&A.get(c,"href"))){var l=this.editor;this.editor.selection.selectElement(c);l.onDisplayChanged();l._updateTimer&&(l._updateTimer.remove(),delete l._updateTimer);l.onNormalizedDisplayChanged();var F=this.button;setTimeout(function(){F.set("disabled",!1);F.loadAndOpenDropDown().then(function(){F.dropDown.focus&&F.dropDown.focus()})},10)}},_onMouseUp:function(){if(f("ff")){var c=this.editor.selection.getAncestorElement(this.tag);if(c){var l=q.getSelection(this.editor.window).getRangeAt(0);
if(l.collapsed&&c.childNodes.length){var F=l.cloneRange();F.selectNodeContents(c.childNodes[c.childNodes.length-1]);F.setStart(c.childNodes[0],0);1!==l.compareBoundaryPoints(F.START_TO_START,F)?l.setStartBefore(c):-1!==l.compareBoundaryPoints(F.END_TO_START,F)&&l.setStartAfter(c)}}}}}),D=G("dijit._editor.plugins.ImgLinkDialog",[z],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(c){if(c&&c.tagName.toLowerCase()===this.tag){var l=c.getAttribute("_djrealurl")||c.getAttribute("src");var F=c.getAttribute("alt");this.editor.selection.selectElement(c,!0)}else F=this.editor.selection.getSelectedText();return{urlInput:l||"",textInput:F||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);
this.editor.onLoadDeferred.then(d.hitch(this,function(){this.own(e(this.editor.editNode,"mousedown",d.hitch(this,"_selectTag")))}))},_selectTag:function(c){c&&c.target&&(c=c.target,(c.tagName?c.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(c))},_checkValues:function(c){c&&c.urlInput&&(c.urlInput=c.urlInput.replace(/"/g,"\x26quot;"));c&&c.textInput&&(c.textInput=c.textInput.replace(/"/g,"\x26quot;"));return c},_onDblClick:function(c){if(c&&c.target&&(c=c.target,(c.tagName?
c.tagName.toLowerCase():"")===this.tag&&A.get(c,"src"))){var l=this.editor;this.editor.selection.selectElement(c);l.onDisplayChanged();l._updateTimer&&(l._updateTimer.remove(),delete l._updateTimer);l.onNormalizedDisplayChanged();var F=this.button;setTimeout(function(){F.set("disabled",!1);F.loadAndOpenDropDown().then(function(){F.dropDown.focus&&F.dropDown.focus()})},10)}}});m.registry.createLink=function(c){var l={command:"createLink",allowUnsafeHtml:"allowUnsafeHtml"in c?c.allowUnsafeHtml:!1};
"linkFilter"in c&&(l.linkFilter=c.linkFilter);return new z(l)};m.registry.insertImage=function(){return new D({command:"insertImage"})};z.ImgLinkDialog=D;return z})},"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m,k,q,z,D,c,l,F){var O=G("dijit._editor.plugins.ViewSource",D,{stripScripts:!0,stripComments:!0,stripIFrames:!0,stripEventHandlers:!0,readOnly:!1,_fsPlugin:null,toggle:function(){k("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var p=f.getLocalization("dijit._editor","commands"),t=this.editor;this.button=new c({label:p.viewSource,ownerDocument:t.ownerDocument,dir:t.dir,lang:t.lang,showLabel:!1,iconClass:this.iconClassPrefix+
" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:h.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(p){this.editor=p;this._initButton();this.removeValueFilterHandles();this._setValueFilterHandle=w.before(this.editor,"setValue",h.hitch(this,function(t){return[this._filter(t)]}));this._getValueFilterHandle=w.after(this.editor,"getValue",h.hitch(this,function(t){return this._filter(t)}));this.editor.addKeyHandler(b.F12,!0,!0,h.hitch(this,function(t){this.button.focus();
this.toggle();t.stopPropagation();t.preventDefault();setTimeout(h.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(p){var t=this.editor,v=t._plugins;this._sourceShown=p;var B=this;try{this.sourceArea||this._createSourceView();if(p)t._sourceQueryCommandEnabled=t.queryCommandEnabled,t.queryCommandEnabled=function(M){return"viewsource"===M.toLowerCase()},this.editor.onDisplayChanged(),u.forEach(v,function(M){!M||M instanceof O||!M.isInstanceOf(D)||M.set("disabled",
!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return B.sourceArea}),this.sourceArea.value=t.get("value"),this.sourceArea.style.height=t.iframe.style.height,this.sourceArea.style.width=t.iframe.style.width,t.iframe.parentNode.style.position="relative",e.set(t.iframe,{position:"absolute",top:0,visibility:"hidden"}),e.set(this.sourceArea,{display:"block"}),this._resizeHandle=m(window,"resize",h.hitch(this,function(){var M=q.getBox(t.ownerDocument);"_prevW"in this&&"_prevH"in this&&
M.w===this._prevW&&M.h===this._prevH||(this._prevW=M.w,this._prevH=M.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(h.hitch(this,function(){delete this._resizer;this._resize()}),10))})),setTimeout(h.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=h.hitch(this,function(){var M=this.sourceArea.value;return M=this._filter(M)}),this._setListener=w.after(this.editor,
"setValue",h.hitch(this,function(M){this.sourceArea.value=M||""}),!0);else{if(!t._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);t.queryCommandEnabled=t._sourceQueryCommandEnabled;if(!this._readOnly){var L=this.sourceArea.value;t.beginEditing();t.set("value",L);t.endEditing()}u.forEach(v,function(M){M&&
M.isInstanceOf(D)&&M.set("disabled",!1)});e.set(this.sourceArea,"display","none");e.set(t.iframe,{position:"relative",visibility:"visible"});delete t._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(h.hitch(this,function(){var M=t.domNode.parentNode;M&&(M=F.getEnclosingWidget(M))&&M.resize&&M.resize();t.resize()}),300)}catch(M){console.log(M)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var p=this.editor,t=p.getHeaderHeight(),v=
p.getFooterHeight(),B=d.position(p.domNode),L=d.getPadBorderExtents(p.iframe.parentNode),M=d.getMarginExtents(p.iframe.parentNode),Q=d.getPadBorderExtents(p.domNode),r=B.w-Q.w;B=B.h-(t+Q.h+v);this._fsPlugin&&this._fsPlugin.isFullscreen&&(p=q.getBox(p.ownerDocument),r=p.w-Q.w,B=p.h-(t+Q.h+v));d.setMarginBox(this.sourceArea,{w:Math.round(r-(L.w+M.w)),h:Math.round(B-(L.h+M.h))})},_createSourceView:function(){var p=this.editor,t=p._plugins;this.sourceArea=E.create("textarea");this.readOnly&&(A.set(this.sourceArea,
"readOnly",!0),this._readOnly=!0);e.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});A.set(this.sourceArea,"aria-label",this.editor.id);E.place(this.sourceArea,p.iframe,"before");k("ie")&&p.iframe.parentNode.lastChild!==p.iframe&&e.set(p.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});p._viewsource_oldFocus=p.focus;var v=this;p.focus=function(){if(v._sourceShown)v.setSourceAreaCaret();else try{this._vsFocused?
(delete this._vsFocused,z.focus(p.editNode)):p._viewsource_oldFocus()}catch(M){console.log("ViewSource focus code error: "+M)}};var B,L;for(B=0;B<t.length;B++)if((L=t[B])&&("dijit._editor.plugins.FullScreen"===L.declaredClass||L.declaredClass===l._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=L;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return v._sourceShown?v.sourceArea:this._viewsource_getAltViewNode()});
this.own(m(this.sourceArea,"keydown",h.hitch(this,function(M){this._sourceShown&&M.keyCode==b.F12&&M.ctrlKey&&M.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(h.hitch(this,function(){p.focus()}),100),M.stopPropagation(),M.preventDefault())})))},_stripScripts:function(p){p&&(p=p.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,""),p=p.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),p=p.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return p},_stripComments:function(p){p&&
(p=p.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return p},_stripIFrames:function(p){p&&(p=p.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return p},_stripEventHandlers:function(p){if(p){var t=p.match(/<[a-z]+?\b(.*?on.*?(['"]).*?\2.*?)+>/gim);if(t)for(var v=0,B=t.length;v<B;v++){var L=t[v],M=L.replace(/\s+on[a-z]*\s*=\s*(['"])(.*?)\1/igm,"");p=p.replace(L,M)}}return p},_filter:function(p){p&&(this.stripScripts&&(p=this._stripScripts(p)),this.stripComments&&(p=this._stripComments(p)),
this.stripIFrames&&(p=this._stripIFrames(p)),this.stripEventHandlers&&(p=this._stripEventHandlers(p)));return p},removeValueFilterHandles:function(){this._setValueFilterHandle&&(this._setValueFilterHandle.remove(),delete this._setValueFilterHandle);this._getValueFilterHandle&&(this._getValueFilterHandle.remove(),delete this._getValueFilterHandle)},setSourceAreaCaret:function(){var p=this.sourceArea;z.focus(p);this._sourceShown&&!this.readOnly&&(p.setSelectionRange?p.setSelectionRange(0,0):this.sourceArea.createTextRange&&
(p=p.createTextRange(),p.collapse(!0),p.moveStart("character",-99999),p.moveStart("character",0),p.moveEnd("character",0),p.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.removeValueFilterHandles();this.inherited(arguments)}});D.registry.viewSource=D.registry.viewsource=function(p){return new O({readOnly:"readOnly"in
p?p.readOnly:!1,stripComments:"stripComments"in p?p.stripComments:!0,stripScripts:"stripScripts"in p?p.stripScripts:!0,stripIFrames:"stripIFrames"in p?p.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in p?p.stripEventHandlers:!0})};return O})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m,k,q,z,D){u=G("dijit._editor.plugins._FontDropDown",[h,m,k],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:u,postMixInProperties:function(){this.inherited(arguments);this.strings=E.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=b.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new f({idProperty:"value",data:w.map(this.values,function(p){var t=this.strings[p]||p;return{label:this.getLabel(p,t),name:t,value:p}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(p,t){t=!1!==t;this.select.set("value",0>w.indexOf(this.values,p)?"":p,t);t||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(p){this._set("disabled",p);this.select.set("disabled",p)}});var c=G("dijit._editor.plugins._FontNameDropDown",u,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(p,t){return this.plainText?t:"\x3cdiv style\x3d'font-family: "+p+"'\x3e"+t+"\x3c/div\x3e"},_normalizeFontName:function(p){var t=this.values;if(!p||!t)return p;var v=p.split(",");if(1<v.length)for(var B=0,L=v.length;B<L;B++){var M=e.trim(v[B]);if(-1<w.indexOf(t,M))return M}return p},_setValueAttr:function(p,t){t=!1!==
t;p=this._normalizeFontName(p);this.generic&&(p={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[p]||p);this.inherited(arguments,[p,t])}}),l=G("dijit._editor.plugins._FontSizeDropDown",u,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(p,
t){return this.plainText?t:"\x3cfont size\x3d"+p+"'\x3e"+t+"\x3c/font\x3e"},_setValueAttr:function(p,t){t=!1!==t;p.indexOf&&-1!=p.indexOf("px")&&(p={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(p,10)]||p);this.inherited(arguments,[p,t])}}),F=G("dijit._editor.plugins._FormatBlockDropDown",u,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(p,t){return this.plainText||
"noFormat"==p?t:"\x3c"+p+"\x3e"+t+"\x3c/"+p+"\x3e"},_execCommand:function(p,t,v){if("noFormat"===v){var B;if((t=D.getSelection(p.window))&&0<t.rangeCount&&(v=t.getRangeAt(0),v)){t=v.startContainer;for(B=v.endContainer;t&&t!==p.editNode&&t!==p.document.body&&1!==t.nodeType;)t=t.parentNode;for(;B&&B!==p.editNode&&B!==p.document.body&&1!==B.nodeType;)B=B.parentNode;var L=d.hitch(this,function(n,H){if(n.childNodes&&n.childNodes.length){var I;for(I=0;I<n.childNodes.length;I++){var a=n.childNodes[I];if(1==
a.nodeType&&p.selection.inSelection(a)){var g=a.tagName?a.tagName.toLowerCase():"";-1!==w.indexOf(this.values,g)&&H.push(a);L(a,H)}}}});v=d.hitch(this,function(n){if(n&&n.length){for(p.beginEditing();n.length;)this._removeFormat(p,n.pop());p.endEditing()}});var M=[];if(t==B){for(B=t;B&&B!==p.editNode&&B!==p.document.body;){if(1==B.nodeType){var Q=B.tagName?B.tagName.toLowerCase():"";if(-1!==w.indexOf(this.values,Q)){var r=B;break}}B=B.parentNode}L(t,M);r&&(M=[r].concat(M))}else for(B=t;p.selection.inSelection(B);)1==
B.nodeType&&(Q=B.tagName?B.tagName.toLowerCase():"",-1!==w.indexOf(this.values,Q)&&M.push(B),L(B,M)),B=B.nextSibling;v(M);p.onDisplayChanged()}}else p.execCommand(t,v)},_removeFormat:function(p,t){if(p.customUndo){for(;t.firstChild;)A.place(t.firstChild,t,"before");t.parentNode.removeChild(t)}else{p.selection.selectElementChildren(t);var v=p.selection.getSelectedHtml();p.selection.selectElement(t);p.execCommand("inserthtml",v||"")}}}),O=G("dijit._editor.plugins.FontChoice",z,{useDefaultCommand:!1,
_initButton:function(){var p={fontName:c,fontSize:l,formatBlock:F}[this.command],t=this.params;this.params.custom&&(t.values=this.params.custom);var v=this.editor;this.button=new p(d.delegate({dir:v.dir,lang:v.lang},t));this.own(this.button.select.on("change",d.hitch(this,function(B){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=B.indexOf(" ")&&(B="'"+B+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,B):this.editor.execCommand(this.command,
B)})))},updateState:function(){var p=this.editor,t=this.command;if(p&&p.isLoaded&&t.length&&this.button){var v=this.get("disabled");this.button.set("disabled",v);if(!v){try{var B=p.queryCommandValue(t)||""}catch(M){B=""}(v=d.isString(B)&&(B.match(/'([^']*)'/)||B.match(/"([^"]*)"/)))&&(B=v[1]);"fontSize"!==t||B||(B=3);if("formatBlock"===t)if(B&&"p"!=B)0>w.indexOf(this.button.values,B)&&(B="noFormat");else{B=null;if((t=D.getSelection(this.editor.window))&&0<t.rangeCount&&(t=t.getRangeAt(0)))var L=t.endContainer;
for(;L&&L!==p.editNode&&L!==p.document;){if((t=L.tagName?L.tagName.toLowerCase():"")&&-1<w.indexOf(this.button.values,t)){B=t;break}L=L.parentNode}B||(B="noFormat")}B!==this.button.get("value")&&this.button.set("value",B,!1)}}}});w.forEach(["fontName","fontSize","formatBlock"],function(p){z.registry[p]=function(t){return new O({command:p,plainText:t.plainText})}});O._FontDropDown=u;O._FontNameDropDown=c;O._FontSizeDropDown=l;O._FormatBlockDropDown=F;return O})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),
function(u,w,G,A){var E=u.declare("dojox.editor.plugins.Preview",A,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=u.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new w.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:u.hitch(this,"_preview")})},setEditor:function(d){this.editor=d;this._initButton()},
updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var d=this.editor.get("value"),e="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",f;if(this.stylesheets)for(f=0;f<this.stylesheets.length;f++)e+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[f]+"'\x3e\n";this.styles&&(e+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");d="\x3chtml\x3e\n\t\x3chead\x3e\n"+e+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+
d+"\n\t\x3c/body\x3e\n\x3c/html\x3e";var b=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");b.document.open();b.document.write(d);b.document.close()}catch(h){console.warn(h)}}});u.subscribe(w._scopeName+".Editor.getPlugin",null,function(d){d.plugin||"preview"!==d.args.name.toLowerCase()||(d.plugin=new E({styles:"styles"in d.args?d.args.styles:"",stylesheets:"stylesheets"in d.args?d.args.stylesheets:null}))});return E})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(u,w,G,A,E,d){var e=G("dijit._editor.plugins.TextColor",E,{buttonClass:d,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var f=this;this.button.loadDropDown=function(b){function h(m){f.button.dropDown=new m({dir:f.editor.dir,ownerDocument:f.editor.ownerDocument,value:f.value,onChange:function(k){f.editor.execCommand(f.command,k)},onExecute:function(){f.editor.execCommand(f.command,this.get("value"))}});b()}"string"==
typeof f.colorPicker?u([f.colorPicker],h):h(f.colorPicker)}},updateState:function(){var f=this.editor,b=this.command;if(f&&f.isLoaded&&b.length){if(this.button){var h=this.get("disabled");this.button.set("disabled",h);if(h)return;try{var m=f.queryCommandValue(b)||""}catch(k){m=""}}""==m&&(m="#000000");"transparent"==m&&(m="#ffffff");"string"==typeof m?-1<m.indexOf("rgb")&&(m=w.fromRgb(m).toHex()):(m=((m&255)<<16|m&65280|(m&16711680)>>>16).toString(16),m="#000000".slice(0,7-m.length)+m);this.value=
m;(f=this.button.dropDown)&&f.get&&m!==f.get("value")&&f.set("value",m,!1)}}});E.registry.foreColor=function(f){return new e(f)};E.registry.hiliteColor=function(f){return new e(f)};return e})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(u,w,G,A,E,d,e){var f=e("dojox.editor.plugins.ToolbarLineBreak",[A,E],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",
postCreate:function(){u.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}});u.subscribe(w._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin){var h=b.args.name.toLowerCase();if("||"===h||"toolbarlinebreak"===h)b.plugin=new d({button:new f,setEditor:function(m){this.editor=m}})}});return f})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m,k,q,z,D){u.experimental("dojox.editor.plugins.FindReplace");var c=u.declare("dojox.editor.plugins._FindReplaceCloseBox",[d,e,b],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=w.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),l=u.declare("dojox.editor.plugins._FindReplaceTextBox",[d,e,b],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=w.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");u.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(t){this.value=t;this.textBox.set("value",t)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(t){this.disabled=t;this.textBox.set("disabled",
t)},onChange:function(t){this.value=t},_onKeyPress:function(t){var v=0,B=0;!t.target||t.ctrlKey||t.altKey||t.shiftKey||(t.keyCode==u.keys.LEFT_ARROW?(v=t.target.selectionStart,B=t.target.selectionEnd,v<B&&(w.selectInputText(t.target,v,v),u.stopEvent(t))):t.keyCode==u.keys.RIGHT_ARROW&&(v=t.target.selectionStart,B=t.target.selectionEnd,v<B&&(w.selectInputText(t.target,B,B),u.stopEvent(t))))}}),F=u.declare("dojox.editor.plugins._FindReplaceCheckBox",[d,e,b],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=w.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(t){this.checkBox.set("value",t)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(t){this.disabled=t;this.checkBox.set("disabled",t)}}),O=u.declare("dojox.editor.plugins._FindReplaceToolbar",m,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");u.addClass(this.domNode,"dijitToolbar")},addChild:function(t,v){w._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(t){t.stopPropagation()}}),p=u.declare("dojox.editor.plugins.FindReplace",[D],{buttonClass:w.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=u.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new w.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:u.hitch(this,
"_toggleFindReplace")});u.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",u.hitch(this,function(t,v){"disabled"===t&&this._toggleFindReplace(!v&&this._displayed,!0,!0)}))},setEditor:function(t){this.editor=t;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(t,v,B){var L=u.marginBox(this.editor.domNode);t&&!u.isOpera?(u.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),v||(this._displayed=
!0)):(u.style(this._frToolbar.domNode,"display","none"),v||(this._displayed=!1),B||this.editor.focus());this.editor.resize({h:L.h})},_populateFindField:function(){var t=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(t&&this._findField.textBox.set("value",t),this._findField.textBox.focus(),w.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(t){this.inherited(arguments);if(!u.isOpera){var v=this._frToolbar=new O;u.style(v.domNode,"display",
"none");u.place(v.domNode,t.domNode,"after");v.startup();this._closeBox=new c;v.addChild(this._closeBox);this._findField=new l({label:this._strings.findLabel,tooltip:this._strings.findTooltip});v.addChild(this._findField);this._replaceField=new l({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});v.addChild(this._replaceField);v.addChild(new G.editor.plugins.ToolbarLineBreak);this._findButton=new w.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;v.addChild(this._findButton);this._replaceButton=new w.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;v.addChild(this._replaceButton);this._replaceAllButton=new w.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;v.addChild(this._replaceAllButton);this._caseSensitive=new F({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});v.addChild(this._caseSensitive);this._backwards=new F({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});v.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new w.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(t){t.keyCode==u.keys.ENTER&&(this._find(),u.stopEvent(t))},_onReplaceKeyDown:function(t){t.keyCode==u.keys.ENTER&&(this._replace()||this._replace(),u.stopEvent(t))},_find:function(t){var v=this._findField.get("value")||"";if(v){var B=this._caseSensitive.get("value"),
L=this._backwards.get("value");v=this._findText(v,B,L);!v&&t&&(this._promDialog.set("content",u.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),w.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(u.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;w.popup.close(this._promDialog)}),3E3),setTimeout(u.hitch(this,function(){this.editor.focus()}),0));return v}return!1},_replace:function(t){var v=
!1,B=this.editor;B.focus();var L=this._findField.get("value")||"",M=this._replaceField.get("value")||"";if(L){var Q=this._caseSensitive.get("value"),r=this._backwards.get("value"),n=B._sCall("getSelectedText",[null]);u.isMoz&&(L=u.trim(L),n=u.trim(n));L=this._filterRegexp(L,!Q);n&&L.test(n)&&(B.execCommand("inserthtml",M),v=!0,r&&(this._findText(M,Q,r),B._sCall("collapse",[!0])));!this._find(!1)&&t&&(this._promDialog.set("content",u.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
w.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(u.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;w.popup.close(this._promDialog)}),3E3),setTimeout(u.hitch(this,function(){this.editor.focus()}),0));return v}return null},_replaceAll:function(t){var v=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&v++;var B=u.hitch(this,function(){this._replace(!1)?
(v++,setTimeout(B,10)):t&&(this._promDialog.set("content",u.string.substitute(this._strings.replaceDialogText,{0:""+v})),w.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(u.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;w.popup.close(this._promDialog)}),3E3),setTimeout(u.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});B()},_findText:function(t,v,
B){var L=this.editor,M=L.window,Q=!1;if(t)if(M.find)Q=M.find(t,v,B,!1,!1,!1,!1);else{var r=L.document;if(r.selection||M.getSelection)if(this.editor.focus(),L=r.body.createTextRange(),Q=L.duplicate(),M.getSelection().getRangeAt(0),(r=r.selection?r.selection.createRange():null)?B?L.setEndPoint("EndToStart",r):L.setEndPoint("StartToEnd",r):this._bookmark&&(M=M.getSelection().toString(),L.moveToBookmark(this._bookmark),L.text!=M?(L=Q.duplicate(),this._bookmark=null):(B?Q.setEndPoint("EndToStart",L):Q.setEndPoint("StartToEnd",
L),L=Q.duplicate())),v=v?4:0,B&&(v|=1),Q=L.findText(t,L.text.length,v))L.select(),this._bookmark=L.getBookmark()}return Q},_filterRegexp:function(t,v){for(var B="",L=null,M=0;M<t.length;M++)switch(L=t.charAt(M),L){case "\\":B+=L;M++;B+=t.charAt(M);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":B+="\\";default:B+=L}B="^"+B+"$";return v?new RegExp(B,"mi"):new RegExp(B,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,w.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});p._FindReplaceCloseBox=c;p._FindReplaceTextBox=l;p._FindReplaceCheckBox=F;p._FindReplaceToolbar=O;u.subscribe(w._scopeName+".Editor.getPlugin",null,function(t){t.plugin||"findreplace"!==
t.args.name.toLowerCase()||(t.plugin=new p({}))});return p})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(u,w,G,A){var E=u.declare("dojox.editor.plugins.PasteFromWord",
A,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var d=u.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");u.mixin(d,u.i18n.getLocalization("dijit","common"));u.mixin(d,u.i18n.getLocalization("dijit._editor","commands"));this.button=new w.form.Button({label:d.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:u.hitch(this,"_openDialog")});this._uId=w.getUniqueId(this.editor.id);d.uId=this._uId;d.width=this.width||"400px";d.height=this.height||"300px";this._dialog=(new w.Dialog({title:d.pasteFromWord})).placeAt(u.body());this._dialog.set("content",u.string.substitute(this._template,d));u.style(u.byId(this._uId+"_rte"),"opacity",.001);this.connect(w.byId(this._uId+"_paste"),"onClick","_paste");this.connect(w.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(d){this.editor=d;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(u.hitch(this,function(){this._rte=new w._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(u.hitch(this,function(){u.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var d=G.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var e;for(e=0;e<this._filters.length;e++){var f=this._filters[e];d=d.replace(f.regexp,f.handler)}d=G.html.format.prettyPrint(d);this.editor.focus();this.editor.execCommand("inserthtml",d)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});u.subscribe(w._scopeName+".Editor.getPlugin",null,function(d){d.plugin||"pastefromword"!==d.args.name.toLowerCase()||(d.plugin=new E({width:"width"in d.args?d.args.width:"400px",height:"height"in d.args?d.args.width:"300px"}))});return E})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(u,w,G,A,E){var d=u.getObject("dojox.html.format",!0);d.prettyPrint=
function(e,f,b,h,m){var k=[],q=0,z=[],D="\t",c="",l=[],F,O=/[=]([^"']+?)(\s|>)/g,p=/style=("[^"]*"|'[^']*'|\S*)/gi,t=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(f&&0<f&&10>f)for(D="",F=0;F<f;F++)D+=" ";f=A.doc.createElement("div");f.innerHTML=e;var v=w.encode,B=w.decode,L=f.ownerDocument.createElement("div"),M=function(a){a=a.cloneNode(!1);L.appendChild(a);a=L.innerHTML;L.innerHTML="";return a},Q=function(){var a;for(a=0;a<q;a++)k.push(D)},r=function(){k.push("\n")},n=function(a){var g;a=a.split("\n");for(g=
0;g<a.length;g++)a[g]=u.trim(a[g]);a=a.join(" ");a=u.trim(a);if(""!==a){var y=[];if(b&&0<b){var C="";for(g=0;g<q;g++)C+=D;g=C.length;C=b;for(b>g&&(C-=g);a;)if(a.length>b){for(g=C;0<g&&" "!==a.charAt(g);g--);if(!g)for(g=C;g<a.length&&" "!==a.charAt(g);g++);var x=a.substring(0,g);x=u.trim(x);a=u.trim(a.substring(g==a.length?a.length:g+1,a.length));if(x){var N="";for(g=0;g<q;g++)N+=D;x=N+x+"\n"}y.push(x)}else{N="";for(g=0;g<q;g++)N+=D;a=N+a+"\n";y.push(a);a=null}return y.join("")}N="";for(g=0;g<q;g++)N+=
D;return a=N+a+"\n"}return""},H=function(a){var g=a.nodeName.toLowerCase(),y=u.trim(M(a));a=y.substring(0,y.indexOf("\x3e")+1);a=a.replace(O,'\x3d"$1"$2');a=a.replace(p,function(x){var N=x.substring(0,6);x=x.substring(6,x.length);var J=x.charAt(0);x=u.trim(x.substring(1,x.length-1));x=x.split(";");var P=[];G.forEach(x,function(R){if(R=u.trim(R))R=R.substring(0,R.indexOf(":")).toLowerCase()+R.substring(R.indexOf(":"),R.length),P.push(R)});P=P.sort();x=P.join("; ");var K=u.trim(x);return K&&";"!==K?
N+J+(x+";")+J:""});var C=[];a=a.replace(t,function(x){C.push(u.trim(x));return""});C=C.sort();a="\x3c"+g;C.length&&(a+=" "+C.join(" "));-1!=y.indexOf("\x3c/")?(z.push(g),a+="\x3e"):(a=m?a+" /\x3e":a+"\x3e",z.push(!1));a:switch(g){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":g=!0;break a;default:g=!1}l.push(g);c&&!g&&(k.push(n(c)),c="");g?c+=a:(Q(),k.push(a),r(),q++)},I=
function(a){var g=a.childNodes;if(g){var y;for(y=0;y<g.length;y++){var C=g[y];if(1===C.nodeType){var x=u.trim(C.tagName.toLowerCase());if(!E("ie")||C.parentNode==a)if(!x||"/"!==x.charAt(0)){H(C);if("script"===x){x=k;var N=x.push,J=void 0,P=J=void 0,K=void 0;if(K=C.innerHTML){K&&(K=K.replace(/&quot;/gi,'"'),K=K.replace(/&gt;/gi,"\x3e"),K=K.replace(/&lt;/gi,"\x3c"),K=K.replace(/&amp;/gi,"\x26"));C=0;var R=K.split("\n"),S=[];for(K=0;K<R.length;K++){var T=R[K],U=-1<T.indexOf("\n");if(T=u.trim(T)){U=C;
for(J=0;J<T.length;J++)P=T.charAt(J),"{"===P?C++:"}"===P&&(C--,U=C);J="";for(P=0;P<q+U;P++)J+=D;S.push(J+T+"\n")}else U&&0===K&&S.push("\n")}K=S.join("")}N.call(x,K)}else"pre"===x?(x=C.innerHTML,E("mozilla")&&(x=x.replace("\x3cbr\x3e","\n"),x=x.replace("\x3cpre\x3e",""),x=x.replace("\x3c/pre\x3e","")),"\n"!==x.charAt(x.length-1)&&(x+="\n"),k.push(x)):I(C);x=l.pop();c&&!x&&(k.push(n(c)),c="");(N=z.pop())?(N="\x3c/"+N+"\x3e",x?c+=N:(q--,Q(),k.push(N),r())):q--}}else 3===C.nodeType||4===C.nodeType?c+=
v(C.nodeValue,h):8===C.nodeType&&(x=B(C.nodeValue,h),Q(),k.push("\x3c!--"),r(),q++,k.push(n(x)),q--,Q(),k.push("--\x3e"),r())}}};I(f);c&&(k.push(n(c)),c="");return k.join("")};return d})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(u,w,G,A){var E=u.declare("dojox.editor.plugins.InsertAnchor",A,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var d=this,e=u.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),f=this.dropDown=new w.TooltipDialog({title:e.title,execute:u.hitch(this,"setValue"),onOpen:function(){d._onOpenDialog();w.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(u.hitch(d,"_onCloseDialog"),0)}});this.button=new w.form.DropDownButton({label:e.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});e.id=w.getUniqueId(this.editor.id);this._uniqueId=e.id;this.dropDown.set("content",f.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+u.string.substitute(this._template,e));f.startup();this._anchorInput=w.byId(this._uniqueId+"_anchorInput");this._textInput=w.byId(this._uniqueId+"_textInput");this._setButton=w.byId(this._uniqueId+"_setButton");this.connect(w.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(u.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(u.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(d){this.editor=d;this._initButton()},_checkInput:function(){var d=!0;this._anchorInput.isValid()&&
(d=!1);this._setButton.set("disabled",d)},_setup:function(){this.editor.onLoadDeferred.addCallback(u.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(u.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var d=u.moduleUrl(G._scopeName,"editor/plugins/resources").toString();if(!d.match(/^https?:\/\//i)&&!d.match(/^file:\/\//i)){var e="/"===d.charAt(0)?u.doc.location.protocol+"//"+u.doc.location.host:this._calcBaseUrl(u.global.location.href);
"/"!==e[e.length-1]&&"/"!==d.charAt(0)&&(e+="/");d=e+d}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,d)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var d=this.editor.document,e=this.getAnchorStyle();if(u.isIE)d.createStyleSheet("").cssText=
e;else{var f=d.createElement("style");f.appendChild(d.createTextNode(e));d.getElementsByTagName("head")[0].appendChild(f)}}catch(b){}},_calcBaseUrl:function(d){var e=null;null!==d&&(e=d.indexOf("?"),-1!=e&&(d=d.substring(0,e)),e=d.lastIndexOf("/"),e=0<e&&e<d.length?d.substring(0,e):d);return e},_checkValues:function(d){d&&(d.anchorInput&&(d.anchorInput=d.anchorInput.replace(/"/g,"\x26quot;")),d.textInput||(d.textInput="\x26nbsp;"));return d},setValue:function(d){this._onCloseDialog();if(!this.editor.window.getSelection){var e=
w.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===e.nodeType&&(e=e.parentNode);e&&e.nodeName&&"a"!==e.nodeName.toLowerCase()&&(e=this.editor._sCall("getSelectedElement",["a"]));e&&e.nodeName&&"a"===e.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[e]),this.editor.execCommand("unlink"))}d=this._checkValues(d);this.editor.execCommand("inserthtml",u.string.substitute(this.htmlTemplate,d))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(d){if(d&&"a"===d.tagName.toLowerCase()&&u.attr(d,"name")){var e=u.attr(d,"name");var f=d.textContent||d.innerText;this.editor._sCall("selectElement",[d,!0])}else f=this.editor._sCall("getSelectedText");return{anchorInput:e||"",textInput:f||""}},_onOpenDialog:function(){if(this.editor.window.getSelection)var d=this.editor._sCall("getAncestorElement",["a"]);else d=w.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===d.nodeType&&(d=d.parentNode),d&&d.nodeName&&
"a"!==d.nodeName.toLowerCase()&&(d=this.editor._sCall("getSelectedElement",["a"]));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(d))},_onDblClick:function(d){d&&d.target&&(d=d.target,"a"===(d.tagName?d.tagName.toLowerCase():"")&&u.attr(d,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[d]),setTimeout(u.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(d){u.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(d){d&&u.query("a[name]:not([href])",d).removeClass("dijitEditorPluginInsertAnchorStyle");return d}});u.subscribe(w._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin){var e=d.args.name;e&&(e=e.toLowerCase());"insertanchor"===e&&(d.plugin=new E)}});return E})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(u,w,G,A){var E=u.declare("dojox.editor.plugins.Blockquote",A,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=u.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new w.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:u.hitch(this,"_toggleQuote")})},setEditor:function(d){this.editor=d;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");d.customUndo=!0},_toggleQuote:function(d){try{var e=this.editor;e.focus();var f=this.button.get("checked"),b=w.range.getSelection(e.window),h,m,k,q;b&&0<b.rangeCount&&(h=b.getRangeAt(0));if(h){e.beginEditing();if(f)if(h.startContainer===h.endContainer){if(this._isRootInline(h.startContainer)){for(k=h.startContainer;k&&k.parentNode!==e.editNode;)k=k.parentNode;for(;k&&k.previousSibling&&(this._isTextElement(k)||1===k.nodeType&&this._isInlineFormat(this._getTagName(k)));)k=
k.previousSibling;k&&1===k.nodeType&&!this._isInlineFormat(this._getTagName(k))&&(k=k.nextSibling);if(k){var z=e.document.createElement("blockquote");u.place(z,k,"after");z.appendChild(k);for(q=z.nextSibling;q&&(this._isTextElement(q)||1===q.nodeType&&this._isInlineFormat(this._getTagName(q)));)z.appendChild(q),q=z.nextSibling}}else{for(var D=h.startContainer;(this._isTextElement(D)||this._isInlineFormat(this._getTagName(D))||"li"===this._getTagName(D))&&D!==e.editNode&&D!==e.document.body;)D=D.parentNode;
D!==e.editNode&&D!==D.ownerDocument.documentElement&&(z=e.document.createElement("blockquote"),u.place(z,D,"after"),z.appendChild(D))}z&&(e._sCall("selectElementChildren",[z]),e._sCall("collapse",[!0]))}else{var c;k=h.startContainer;for(q=h.endContainer;k&&this._isTextElement(k)&&k.parentNode!==e.editNode;)k=k.parentNode;for(c=k;c.nextSibling&&e._sCall("inSelection",[c]);)c=c.nextSibling;q=c;if(q===e.editNode||q===e.document.body){z=e.document.createElement("blockquote");u.place(z,k,"after");var l=
this._getTagName(k);if(this._isTextElement(k)||this._isInlineFormat(l))for(e=k;e&&(this._isTextElement(e)||1===e.nodeType&&this._isInlineFormat(this._getTagName(e)));)z.appendChild(e),e=z.nextSibling;else z.appendChild(k);return}q=q.nextSibling;for(c=k;c&&c!==q;){if(1===c.nodeType){if(l=this._getTagName(c),"br"!==l){if(!window.getSelection&&"p"===l&&this._isEmpty(c)){c=c.nextSibling;continue}this._isInlineFormat(l)?z||(z=e.document.createElement("blockquote"),u.place(z,c,"after")):(z&&this._isEmpty(z)&&
z.parentNode.removeChild(z),z=e.document.createElement("blockquote"),u.place(z,c,"after"));z.appendChild(c);c=z}}else this._isTextElement(c)&&(z||(z=e.document.createElement("blockquote"),u.place(z,c,"after")),z.appendChild(c),c=z);c=c.nextSibling}z&&(this._isEmpty(z)?z.parentNode.removeChild(z):(e._sCall("selectElementChildren",[z]),e._sCall("collapse",[!0])),z=null)}else if(z=!1,h.startContainer===h.endContainer){for(m=h.endContainer;m&&m!==e.editNode&&m!==e.document.body;){if("blockquote"===(m.tagName?
m.tagName.toLowerCase():"")){z=!0;break}m=m.parentNode}if(z){for(var F;m.firstChild;)F=m.firstChild,u.place(F,m,"before");m.parentNode.removeChild(m);F&&(e._sCall("selectElementChildren",[F]),e._sCall("collapse",[!0]))}}else{k=h.startContainer;for(q=h.endContainer;k&&this._isTextElement(k)&&k.parentNode!==e.editNode;)k=k.parentNode;for(h=[];k&&k.nextSibling&&e._sCall("inSelection",[k]);)k.parentNode&&"blockquote"===this._getTagName(k.parentNode)&&(k=k.parentNode),h.push(k),k=k.nextSibling;for(var O=
this._findBlockQuotes(h);O.length;){var p=O.pop();if(p.parentNode){for(;p.firstChild;)u.place(p.firstChild,p,"before");p.parentNode.removeChild(p)}}}e.endEditing()}e.onNormalizedDisplayChanged()}catch(t){}},updateState:function(){var d=this.editor,e=this.get("disabled");if(d&&d.isLoaded&&this.button&&(this.button.set("disabled",e),!e)){e=!1;var f=w.range.getSelection(d.window);if(f&&0<f.rangeCount&&(f=f.getRangeAt(0)))var b=f.endContainer;for(;b&&b!==d.editNode&&b!==d.document;){if("blockquote"===
(b.tagName?b.tagName.toLowerCase():"")){e=!0;break}b=b.parentNode}this.button.set("checked",e)}},_findBlockQuotes:function(d){var e=[];if(d){var f;for(f=0;f<d.length;f++){var b=d[f];1===b.nodeType&&("blockquote"===this._getTagName(b)&&e.push(b),b.childNodes&&0<b.childNodes.length&&(e=e.concat(this._findBlockQuotes(b.childNodes))))}}return e},_getTagName:function(d){var e="";d&&1===d.nodeType&&(e=d.tagName?d.tagName.toLowerCase():"");return e},_isRootInline:function(d){var e=this.editor;if(this._isTextElement(d)&&
d.parentNode===e.editNode||1===d.nodeType&&this._isInlineFormat(d)&&d.parentNode===e.editNode)return!0;if(this._isTextElement(d)&&this._isInlineFormat(this._getTagName(d.parentNode))){for(d=d.parentNode;d&&d!==e.editNode&&this._isInlineFormat(this._getTagName(d));)d=d.parentNode;if(d===e.editNode)return!0}return!1},_isTextElement:function(d){return d&&3===d.nodeType||4===d.nodeType?!0:!1},_isEmpty:function(d){if(d.childNodes){var e=!0,f;for(f=0;f<d.childNodes.length;f++){var b=d.childNodes[f];if(1===
b.nodeType){if("p"!==this._getTagName(b)||u.trim(b.innerHTML)){e=!1;break}}else if(this._isTextElement(b)){if((b=u.trim(b.nodeValue))&&"\x26nbsp;"!==b&&"\u00a0"!==b){e=!1;break}}else{e=!1;break}}return e}return!0},_isInlineFormat:function(d){switch(d){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});u.subscribe(w._scopeName+".Editor.getPlugin",
null,function(d){d.plugin||"blockquote"!==d.args.name.toLowerCase()||(d.plugin=new E({}))});return E})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(u,w,G,A){u.experimental("dojox.editor.plugins.UploadImage");var E=u.declare("dojox.editor.plugins.UploadImage",A,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,
label:"Upload",setToolbar:function(d){this.button.destroy();this.createFileInput();d.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var d=u.create("span",{innerHTML:"."},document.body);u.style(d,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=
new G.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},d);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(d,e,f){d=d[0];e=u.byId(this.currentImageId,this.editor.document);f=this.downloadPath?this.downloadPath+d.name:d.file;
e.src=f;u.attr(e,"_djrealurl",f);d.width&&(e.width=d.width,e.height=d.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});u.subscribe(w._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin)switch(d.args.name){case "uploadImage":d.plugin=new E({url:d.args.url})}});return E})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m,k,q,z,D,c,l,F,O,p,t,v,B,L,M,Q){u.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return w("dojox.form.FileUploader",[t,v,B],{swfPath:c.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(L.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();if("flash"==this.uploaderType)var r="createFlashUploader";else this.uploaderType="html",r="createHtmlUploader";this[r]();this.fileListId&&this.connect(b.byId(this.fileListId),"click",function(n){n=n.target.parentNode.parentNode.parentNode;n.id&&-1<n.id.indexOf("file_")&&
this.removeFile(n.id.split("file_")[1])});p.addOnUnload(this,this.destroy)},getHiddenNode:function(r){if(!r)return null;var n=null;for(r=r.parentNode;r&&"body"!=r.tagName.toLowerCase();){if("none"==h.get(r,"display")){n=r;break}r=r.parentNode}return n},getButtonStyle:function(){var r=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(r))&&h.set(this._hiddenNode,"display","block");if(!r&&this.button&&this.button.domNode){var n=!0;r=this.button.domNode.className+" dijitButtonNode";var H=this.getText(f(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=r=z.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+r+'"\x3e'+H+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(r=this.button);k.get(r,"class")&&(this.baseClass+=" "+k.get(r,"class"));k.set(r,"class",this.baseClass);this.norm=this.getStyle(r);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(r,this.baseClass+" "+this.hoverClass,n),this.down=this.getTempNodeStyle(r,this.baseClass+" "+this.activeClass,n),this.dsbl=this.getTempNodeStyle(r,this.baseClass+" "+this.disabledClass,n),this.fhtml={cn:this.getText(r),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(r),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){h.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&h.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
h.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),h.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):z.destroy(this.progNode);
h.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});q.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&q.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(n){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);d.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var r=E.connect(this,"onReady",this,function(){E.disconnect(r);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&h.set(this._hiddenNode,"display","none")},onChange:function(r){},onProgress:function(r){},onComplete:function(r){},onCancel:function(){},onError:function(r){},onReady:function(r){},onLoad:function(r){},submit:function(r){r=r?D.toObject(r):null;this.upload(r);return!1},upload:function(r){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var n=l.byId(this.progressWidgetId).domNode;"none"==h.get(n,"display")&&(this.restoreProgDisplay="none",h.set(n,"display","block"));"hidden"==h.get(n,"visibility")&&(this.restoreProgDisplay="hidden",h.set(n,"visibility","visible"))}r&&!r.target&&(this.postData=r);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(r=0;r<this.fileList.length;r++)n=
this.fileList[r],n.bytesLoaded=0,n.bytesTotal=n.size||1E5,n.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(r,n){var H;for(H=0;H<this.fileList.length;H++)if(this.fileList[H].name==r){n||this.fileList.splice(H,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(r):n||(z.destroy(this.fileInputs[H]),this.fileInputs.splice(H,1),this._renumberInputs());this.fileListId&&z.destroy("file_"+r)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(A.forEach(this._subs,E.unsubscribe,dojo),A.forEach(this._cons,E.disconnect,dojo),this.scrollConnect&&E.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(z.destroy(this._fileInput),z.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(E.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(r){!0===r?("flash"==this.uploaderType?h.set(this.insideNode,"top","-2500px"):h.set(this.insideNode,"display",
"none"),h.set(this.progNode,"display","")):!1===r?(h.set(this.insideNode,{display:"",top:"0"}),h.set(this.progNode,"display","none")):h.set(this.progNode,"width",r*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var r=!1,n=E.connect(this,"_complete",function(){E.disconnect(n);r=!0}),H=0,I=setInterval(G.hitch(this,function(){H+=5;H>this.fhtml.nr.w&&(H=0,r=!0);this._displayProgress(H/this.fhtml.nr.w);r&&(clearInterval(I),setTimeout(G.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(r){"string"==typeof r&&(r=Error(r));this.onError(r)},_addToFileList:function(){if(this.fileListId){var r="";A.forEach(this.fileList,function(n){r+='\x3ctable id\x3d"file_'+n.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+n.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(n.size?Math.ceil(.001*n.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);b.byId(this.fileListId).innerHTML=
r}},_change:function(r){e("ie")&&A.forEach(r,function(n){n.name=n.name.split("\\")[n.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(r):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=r);this._addToFileList();this.onChange(r);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(r){r=
G.isArray(r)?r:[r];A.forEach(r,function(n){n.ERROR&&this._error(n.ERROR)},this);A.forEach(this.fileList,function(n){n.bytesLoaded=1;n.bytesTotal=1;n.percent=100;this._progress(n)},this);A.forEach(this.fileList,function(n){this.removeFile(n.name,!0)},this);this.onComplete(r);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(G.hitch(this,function(){h.set(l.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(r){for(var n=0,H=0,I=0;I<this.fileList.length;I++){var a=this.fileList[I];a.name==r.name&&(a.bytesLoaded=r.bytesLoaded,a.bytesTotal=r.bytesTotal,a.percent=Math.ceil(a.bytesLoaded/a.bytesTotal*100),this.log(a.name,"percent:",a.percent));H+=Math.ceil(.001*a.bytesLoaded);n+=Math.ceil(.001*a.bytesTotal)}r=Math.ceil(H/n*100);this.progressWidgetId&&l.byId(this.progressWidgetId).update({progress:r+"%"});this.showProgress&&this._displayProgress(.01*r);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(r){if(this._disabled!=r){if("flash"==this.uploaderType){if(!this.flashReady){var n=E.connect(this,"onLoad",this,function(){E.disconnect(n);this._setDisabledAttr(r)});return}this._disabled=r;this.flashMovie.doDisable(r)}else this._disabled=r,h.set(this._fileInput,"display",this._disabled?"none":"");q.toggle(this.domNode,this.disabledClass,r)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var r=
f("[tabIndex]"),n=0;n<r.length;n++)if(r[n].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=r[n];break}this.nextFocusObject.focus()},_disconnect:function(){A.forEach(this._cons,E.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&z.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();F.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:G.hitch(this,function(r){this._error("HTML Upload Error:"+r.message)}),load:G.hitch(this,
function(r,n,H){this._complete(r)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();h.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(E.connect(this._fileInput,"mouseover",this,function(r){q.add(this.domNode,this.hoverClass);this.onMouseOver(r)}));this._cons.push(E.connect(this._fileInput,"mouseout",this,function(r){setTimeout(G.hitch(this,
function(){q.remove(this.domNode,this.activeClass);q.remove(this.domNode,this.hoverClass);this.onMouseOut(r);this._checkHtmlCancel("off")}),0)}));this._cons.push(E.connect(this._fileInput,"mousedown",this,function(r){q.add(this.domNode,this.activeClass);q.remove(this.domNode,this.hoverClass);this.onMouseDown(r)}));this._cons.push(E.connect(this._fileInput,"mouseup",this,function(r){q.remove(this.domNode,this.activeClass);this.onMouseUp(r);this.onClick(r);this._checkHtmlCancel("up")}));this._cons.push(E.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var r=this._fileInput.value;r?this._change([{name:r,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&k.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(r){"change"==r&&(this.dialogIsOpen=!1);"up"==r&&(this.dialogIsOpen=!0);if("off"==r){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var r=this.fhtml.nr;h.set(this.insideNode,{width:r.w+"px",height:"middle"==r.va?r.h+"px":"auto",
textAlign:r.ta,paddingTop:r.p[0]+"px",paddingRight:r.p[1]+"px",paddingBottom:r.p[2]+"px",paddingLeft:r.p[3]+"px"});try{h.set(this.insideNode,"lineHeight","inherit")}catch(n){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],f("*",this._formNode).forEach(function(r){z.destroy(r)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>e("ie")||e("ie")&&e("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=l.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=z.create("form",{enctype:"multipart/form-data",method:"post",id:l.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,h.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var r=
this.htmlFieldName;this.selectMultipleFiles&&(r+=this.fileCount,this.fileCount++);k.set(this._fileInput,{id:this.id,name:r,type:"file"});q.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);r=m.getMarginBox(this._fileInput);h.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-r.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var r;this.fileCount=0;A.forEach(this.fileInputs,function(n){r=this.htmlFieldName+this.fileCount;this.fileCount++;
k.set(n,"name",r)},this)}},_setFormStyle:function(){Q.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");h.set(this.domNode,{overflow:"hidden",position:"relative"});h.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var r in this.postData)z.create("input",{type:"hidden",name:r,value:this.postData[r]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var r=E.connect(this,"_complete",this,function(){E.disconnect(r);this._displayProgress(!1)})}var n={},H;for(H in this.postData)n[H]=this.postData[H];this.flashMovie.doUpload(n)}catch(I){this._error("FileUploader - Sorry, the SWF failed to initialize."+I)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var r=window.location.href.split("/");r.pop();r=r.join("/")+"/";this.uploadUrl=r+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",r," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");r={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:M.serialize("fh",this.fhtml),fileMask:M.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new L(r,this.insideNode);this.flashObject.onError=G.hitch(function(n){this._error("Flash Error: "+n)});this.flashObject.onReady=G.hitch(this,function(){h.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=G.hitch(this,function(n){this.flashMovie=n;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&k.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(r,n){this._subs.push(E.subscribe(this.id+r,this,n))},urlencode:function(r){return r&&"none"!=r?r.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(r){r=r.tagName.toLowerCase();
return"button"==r||"input"==r},getTextStyle:function(r){var n={};n.ff=h.get(r,"fontFamily");if(n.ff){n.ff=n.ff.replace(", ",",");n.ff=n.ff.replace(/"|'/g,"");n.ff="sans-serif"==n.ff?"Arial":n.ff;n.fw=h.get(r,"fontWeight");n.fi=h.get(r,"fontStyle");n.fs=parseInt(h.get(r,"fontSize"),10);if(-1<h.get(r,"fontSize").indexOf("%"))for(var H=r;H.tagName;){if(-1==h.get(H,"fontSize").indexOf("%")){n.fs=parseInt(h.get(H,"fontSize"),10);break}"body"==H.tagName.toLowerCase()&&(n.fs=.16*parseInt(h.get(H,"fontSize"),
10));H=H.parentNode}n.fc=(new O(h.get(r,"color"))).toHex();n.fc=parseInt(n.fc.substring(1,Infinity),16)}n.lh=h.get(r,"lineHeight");n.ta=h.get(r,"textAlign");n.ta="start"!=n.ta&&n.ta?n.ta:"left";n.va=this.isButton(r)?"middle":n.lh==n.h?"middle":h.get(r,"verticalAlign");return n},getText:function(r){r=G.trim(r.innerHTML);-1<r.indexOf("\x3c")&&(r=escape(r));return r},getStyle:function(r){var n={},H=m.getContentBox(r),I=m.getPadExtents(r);n.p=[I.t,I.w-I.l,I.h-I.t,I.l];n.w=H.w+I.w;n.h=H.h+I.h;n.d=h.get(r,
"display");H=new O(h.get(r,"backgroundColor"));n.bc=0==H.a?"#ffffff":H.toHex();n.bc=parseInt(n.bc.substring(1,Infinity),16);if(H=this.urlencode(h.get(r,"backgroundImage")))n.bi={url:H,rp:h.get(r,"backgroundRepeat"),pos:escape(h.get(r,"backgroundPosition"))},n.bi.pos||(H=h.get(r,"backgroundPositionX"),I=h.get(r,"backgroundPositionY"),n.bi.pos=escape(("left"==H?"0%":"right"==H?"100%":H)+" "+("top"==I?"0%":"bottom"==I?"100%":I)));return G.mixin(n,this.getTextStyle(r))},getTempNodeStyle:function(r,n,
H){if(H){H=z.place("\x3c"+r.tagName+"\x3e\x3cspan\x3e"+r.innerHTML+"\x3c/span\x3e\x3c/"+r.tagName+"\x3e",r.parentNode);var I=H.firstChild;q.add(I,r.className);q.add(H,n);r=this.getStyle(I)}else H=z.place("\x3c"+r.tagName+"\x3e"+r.innerHTML+"\x3c/"+r.tagName+"\x3e",r.parentNode),q.add(H,r.className),q.add(H,n),H.id=r.id,r=this.getStyle(H);z.destroy(H);return r}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(u,w,G,A,E,d,e,f,b,h,m,k,q){G.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");d=q._iframeName;d=d.substring(0,d.lastIndexOf("_"));var z=A.delegate(q,{create:function(){return z._frame=q.create.apply(q,arguments)},get:null,post:null,send:function(D){var c=E._ioSetArgs(D,function(v){t&&t.cancel()},function(v){var B=null;v=v.ioArgs;try{var L=v.handleAs;"xml"===L||"html"===L?B=t.response.data:(B=t.response.text,"json"===L?B=w.fromJson(B):"javascript"===L&&(B=G.eval(B)))}catch(M){B=
M}return B},function(v,B){B.ioArgs._hasError=!0;return v}),l=c.ioArgs,F="GET",O=f.byId(D.form);D.method&&"POST"===D.method.toUpperCase()&&O&&(F="POST");D={method:F,handleAs:"json"===D.handleAs||"javascript"===D.handleAs?"text":D.handleAs,form:D.form,query:O?null:D.content,data:O?D.content:null,timeout:D.timeout,ioArgs:l};D.method&&(D.method=D.method.toUpperCase());if(u.ioPublish&&G.publish&&!1!==l.args.ioPublish)var p=k.after(q,"_notifyStart",function(v){v.options.ioArgs===l&&(p.remove(),E._ioNotifyStart(c))},
!0);var t=q(l.url,D,!0);l._callNext=t._callNext;t.then(function(){c.resolve(c)}).otherwise(function(v){c.ioArgs.error=v;c.reject(v)});return c},_iframeOnload:e.global[d+"_onload"]});A.setObject("dojo.io.iframe",z);return z})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(u,w,G,A,E,d,e,f,b){function h(c){c=u.delegate(k,c);if(!("path"in c))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in c||(c.id="dojox-embed-flash-"+m++);return c}var m=0,k={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(E("ie")){var q=function(c){c=h(c);if(!c)return null;var l,F=c.path;if(c.vars){var O=[];for(l in c.vars)O.push(encodeURIComponent(l)+"\x3d"+encodeURIComponent(c.vars[l]));c.params.FlashVars=O.join("\x26");delete c.vars}F='\x3cobject id\x3d"'+b.escape(String(c.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
b.escape(String(c.width))+'" height\x3d"'+b.escape(String(c.height))+'"'+(c.style?' style\x3d"'+b.escape(String(c.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+b.escape(String(F))+'" /\x3e';if(c.params)for(l in c.params)F+='\x3cparam name\x3d"'+b.escape(l)+'" value\x3d"'+b.escape(String(c.params[l]))+'" /\x3e';return{id:c.id,markup:F+"\x3c/object\x3e"}};var z=function(){for(var c=10,l=null;!l&&7<c;)try{l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+c--)}catch(F){}return l?(c=l.GetVariable("$version").split(" ")[1].split(","),
{major:null!=c[0]?parseInt(c[0]):0,minor:null!=c[1]?parseInt(c[1]):0,rev:null!=c[2]?parseInt(c[2]):0}):{major:0,minor:0,rev:0}}();w.addOnWindowUnload(function(){console.warn("***************UNLOAD");var c=function(){};A("object").reverse().style("display","none").forEach(function(l){for(var F in l)if("FlashVars"!=F&&"function"==typeof l[F])try{l[F]=c}catch(O){}})})}else q=function(c){c=h(c);if(!c)return null;var l,F=c.path;if(c.vars){var O=[];for(l in c.vars)O.push(encodeURIComponent(l)+"\x3d"+encodeURIComponent(c.vars[l]));
c.params.flashVars=O.join("\x26");delete c.vars}F='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+b.escape(String(F))+'" id\x3d"'+b.escape(String(c.id))+'" width\x3d"'+b.escape(String(c.width))+'" height\x3d"'+b.escape(String(c.height))+'"'+(c.style?' style\x3d"'+b.escape(String(c.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(c.params)for(l in c.params)F+=" "+b.escape(l)+'\x3d"'+b.escape(String(c.params[l]))+'"';return{id:c.id,markup:F+
" /\x3e"}},z=function(){var c=navigator.plugins["Shockwave Flash"];return c&&c.description?(c=c.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=c[0]?parseInt(c[0]):0,minor:null!=c[1]?parseInt(c[1]):0,rev:null!=c[2]?parseInt(c[2]):0}):{major:0,minor:0,rev:0}}();var D=function(c,l){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=z.major;this.minimumVersion=c.minimumVersion||9;this.domNode=this.movie=this.id=null;l&&(l=d.byId(l));setTimeout(u.hitch(this,function(){if(c.expressInstall||this.available&&this.available>=this.minimumVersion)if(c&&l)this.init(c,l);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};u.extend(D,{onReady:function(c){},onLoad:function(c){},onError:function(c){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(c,l){this.destroy();l=d.byId(l||this.domNode);if(!l)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var F=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;D.initialized&&(this.id=D.place(c,l),this.domNode=l,setTimeout(u.hitch(this,
function(){this.movie=this.byId(this.id,c.doc);this.onReady(this.movie);this._poller=setInterval(u.hitch(this,function(){try{F=this.movie.PercentLoaded()}catch(O){console.warn("this.movie.PercentLoaded() failed",O,this.movie)}if(100==F)this._onload();else if(0==F&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(c){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var c=
u.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),l;for(l in this)c[l]||delete this[l];this._poller?e(this,"Load",this,"_destroy"):this._destroy()}},byId:function(c,l){l=l||document;return l.embeds[c]?l.embeds[c]:l[c]?l[c]:window[c]?window[c]:document[c]?document[c]:null}});u.mixin(D,{minSupported:8,available:z.major,supported:z.major>=z.required,minimumRequired:z.required,version:z,initialized:!1,onInitialize:function(){D.initialized=!0},__ie_markup__:function(c){return q(c)},proxy:function(c,
l){G.forEach(l instanceof Array?l:[l],function(F){this[F]=u.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+F+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+G.map(arguments,function(O){return __flash__toXML(O)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},c)}});D.place=function(c,l){c=q(c);l=d.byId(l);l||(l=f.doc.createElement("div"),l.id=c.id+"-container",f.body().appendChild(l));return c?(l.innerHTML=c.markup,
c.id):null};D.onInitialize();u.setObject("dojox.embed.Flash",D);return D})},"dojox/embed/flashVars":function(){define(["dojo"],function(u){u.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var w={serialize:function(G,A){var E=function(b){"string"==typeof b&&(b=b.replace(/;/g,"_sc_"),b=b.replace(/\./g,"_pr_"),b=b.replace(/:/g,"_cl_"));return b},d=dojox.embed.flashVars.serialize,e="";if(u.isArray(A)){for(var f=0;f<A.length;f++)e+=d(G+"."+f,E(A[f]))+";";return e.replace(/;{2,}/g,";")}if(u.isObject(A)){for(f in A)e+=
d(G+"."+f,E(A[f]))+";";return e.replace(/;{2,}/g,";")}return G+":"+A}};u.setObject("dojox.embed.flashVars",w);return w})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(u,w,G,A){var E=u.getObject("dojox.html",!0),d={},e={},f=[];E.insertCssRule=function(b,h,m){m=E.getDynamicStyleSheet(m);var k=b+" {"+h+"}";console.log("insertRule:",k);A("ie")?(m.cssText+=k,console.log("ss.cssText:",m.cssText)):m.sheet?m.sheet.insertRule(k,
m._indicies.length):m.appendChild(G.doc.createTextNode(k));m._indicies.push(b+" "+h);return b};E.removeCssRule=function(b,h,m){var k=-1,q,z;for(q in d)if(!m||m===q){var D=d[q];for(z=0;z<D._indicies.length;z++)if(b+" "+h===D._indicies[z]){k=z;break}if(-1<k)break}if(!D)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===k)return console.warn("The css rule was not found and could not be removed."),!1;D._indicies.splice(k,1);A("ie")?D.removeRule(k):D.sheet&&
D.sheet.deleteRule(k);return!0};E.modifyCssRule=function(b,h,m){};E.getStyleSheet=function(b){if(d[b||"default"])return d[b||"default"];if(!b)return!1;var h=E.getStyleSheets();if(h[b])return E.getStyleSheets()[b];for(var m in h)if(h[m].href&&-1<h[m].href.indexOf(b))return h[m];return!1};E.getDynamicStyleSheet=function(b){b||(b="default");d[b]||(G.doc.createStyleSheet?(d[b]=G.doc.createStyleSheet(),9>A("ie")&&(d[b].title=b)):(d[b]=G.doc.createElement("style"),d[b].setAttribute("type","text/css"),G.doc.getElementsByTagName("head")[0].appendChild(d[b]),
console.log(b," ss created: ",d[b].sheet)),d[b]._indicies=[]);return d[b]};E.enableStyleSheet=function(b){if(b=E.getStyleSheet(b))b.sheet?b.sheet.disabled=!1:b.disabled=!1};E.disableStyleSheet=function(b){if(b=E.getStyleSheet(b))b.sheet?b.sheet.disabled=!0:b.disabled=!0};E.activeStyleSheet=function(b){var h=E.getToggledStyleSheets(),m;if(1===arguments.length)w.forEach(h,function(k){k.disabled=k.title===b?!1:!0});else for(m=0;m<h.length;m++)if(!1===h[m].disabled)return h[m];return!0};E.getPreferredStyleSheet=
function(){};E.getToggledStyleSheets=function(){var b;if(!f.length){var h=E.getStyleSheets();for(b in h)h[b].title&&f.push(h[b])}return f};E.getStyleSheets=function(){if(e.collected)return e;w.forEach(G.doc.styleSheets,function(b){var h=b.sheet?b.sheet:b;b=h.title||h.href;if(A("ie"))-1===h.cssText.indexOf("#default#VML")&&(h.href?e[b]=h:h.imports.length?w.forEach(h.imports,function(m){e[m.title||m.href]=m}):e[b]=h);else{e[b]=h;e[b].id=h.ownerNode.id;b=[];try{b=h[h.cssRules?"cssRules":"rules"]}catch(m){console.warn("Reading css rules from stylesheet "+
h.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",h)}w.forEach(b,function(m){m.href&&(e[m.href]=m.styleSheet,e[m.href].id=h.ownerNode.id)})}});e.collected=!0;return e};return E})},"jimu/dijit/EditorChooseImage":function(){define("dojo dijit dijit/_editor/_Plugin jimu/dijit/ImageChooser dojo/_base/html dojo/_base/lang dojo/i18n dojo/_base/connect dojo/_base/declare".split(" "),function(u,w,G,A,E,d,e){u.experimental("dojox.editor.plugins.ChooseImage");
var f=u.declare("dojox.editor.plugins.ChooseImage",G,{iconClassPrefix:"editorIcon",useDefaultCommand:!1,_initButton:function(){this.createFileInput();this.command="chooseImage";var b=e.getLocalization("dijit._editor","commands");this.button=new w.form.Button({label:b.insertImage,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"UploadImage",tabIndex:"-1",onClick:d.hitch(this,this._chooseImage)});this.button.set("readOnly",!1);this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",
arguments);delete this.command},updateState:function(){var b=this.get("disabled");this.button.set("disabled",this.get("disabled"));!0===b?(E.addClass(this.button,"dijitButtonDisabled"),this.imageChooser.disableChooseImage()):(E.removeClass(this.button,"dijitButtonDisabled"),this.imageChooser.enableChooseImage())},createFileInput:function(){var b=u.create("span",{innerHTML:"."},document.body);this.imageChooser=new A({showSelfImg:!1,cropImage:!1,format:[A.GIF,A.JPEG,A.PNG]},b);this.connect(this.imageChooser,
"onImageChange","insertTempImage")},_chooseImage:function(){E.setStyle(this.imageChooser.domNode,"display","none");this.imageChooser.triggerImgUpload()},onComplete:function(b){b=b[0];var h=u.byId(this.currentImageId,this.editor.document);var m=this.downloadPath?this.downloadPath+b.name:b.file;h.src=m;u.attr(h,"_djrealurl",m);b.width&&(h.width=b.width,h.height=b.height)},insertTempImage:function(b,h){h=h&&h.fileName?'alt\x3d"'+h.fileName+'"':"";this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",
'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+b+'" '+h+"/\x3e")},destroy:function(){this.imageChooser&&this.imageChooser.destroy();this.inherited(arguments)}});u.subscribe(w._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin)switch(b.args.name){case "chooseImage":b.plugin=new f({url:b.args.url})}});G.registry.chooseImage=function(b){return new f(b)};return f})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),
function(u,w,G,A,E,d){w.experimental("dijit.editor.plugins.EditorTextColor");var e=A("dijit.editor.plugins.EditorTextColor",E,{buttonClass:d,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var f="",b=!1;this.params.custom&&(this.params.custom.recordUID&&(f=this.params.custom.recordUID),this.params.custom.forceAttr&&(b=this.params.custom.forceAttr));var h=this;this.button.set("iconClass",
this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(m){function k(q){h.button.dropDown=new q({dir:h.editor.dir,ownerDocument:h.editor.ownerDocument,value:h.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:f,onChange:function(z){h.editor.execCommand("useCSS",b);h.editor.execCommand("styleWithCSS",!b);h.editor.execCommand(h.hackCommand,
z)},onClose:function(){h.button.closeDropDown()}});m()}"string"===typeof h.colorPicker?u([h.colorPicker],k):k(h.colorPicker)}},updateState:function(){var f=this.editor,b=this.hackCommand;if(f&&f.isLoaded&&b.length){if(this.button){var h=this.get("disabled");this.button.set("disabled",h);if(h)return;try{var m=f.queryCommandValue(b)||""}catch(k){m=""}}""===m?m="#000000":"transparent"===m&&(m="rgba(0, 0, 0, 0)");this.value=m;(f=this.button.dropDown)&&f.getColor&&m!==f.getColor()&&(f.refreshRecords(),
f.setColor(m))}}});w.subscribe(G._scopeName+".Editor.getPlugin",null,function(f){if(!f.plugin)switch(f.args.name){case "editorTextColor":f.plugin=new e}});return e})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(u,w,G,A,E,d){w.experimental("dijit.editor.plugins.EditorBackgroundColor");var e=A("dijit.editor.plugins.EditorBackgroundColor",E,{buttonClass:d,colorPicker:"jimu/dijit/ColorPalette",
useDefaultCommand:!1,_initButton:function(){this.command="editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);var f="";this.params.custom&&this.params.custom.recordUID&&(f=this.params.custom.recordUID);var b=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(h){function m(k){b.button.dropDown=new k({dir:b.editor.dir,ownerDocument:b.editor.ownerDocument,
value:b.value,appearance:{showTransparent:!0,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:f,onChange:function(q){b.editor.execCommand("useCSS",!1);b.editor.execCommand("styleWithCSS",!0);b.editor.execCommand(b.hackCommand,q)},onExecute:function(){b.editor.execCommand(b.hackCommand,this.get("value"))},onClose:function(){b.button.closeDropDown()}});h()}"string"===typeof b.colorPicker?u([b.colorPicker],m):m(b.colorPicker)}},updateState:function(){var f=
this.editor,b=this.hackCommand;if(f&&f.isLoaded&&b.length){if(this.button){var h=this.get("disabled");this.button.set("disabled",h);if(h)return;try{var m=f.queryCommandValue(b)||""}catch(k){m=""}}""===m?m="#000000":"transparent"===m&&(m="rgba(0, 0, 0, 0)");this.value=m;(f=this.button.dropDown)&&f.getColor&&m!==f.getColor()&&(f.refreshRecords(),f.setColor(m))}}});w.subscribe(G._scopeName+".Editor.getPlugin",null,function(f){if(!f.plugin)switch(f.args.name){case "editorBackgroundColor":f.plugin=new e}});
return e})},"widgets/Splash/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/ColorTransparencyPicker.html":'\x3cdiv class\x3d"jimu-colorTransparencyPicker"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n  \x3cspan class\x3d"trans"\x3e${nls.transparency}\x3c/span\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan \x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:widgets/Splash/setting/BackgroundSelector.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"titles"\x3e${nls.background}\x3c/div\x3e\r\n\r\n  \x3cfieldset id\x3d"bg-type"\x3e\r\n    \x3cdiv class\x3d"unit-item"\x3e\r\n      \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"colorFillBtn" id\x3d"colorFillBtn" name\x3d"bg-type" /\x3e\r\n      \x3clabel for\x3d"colorFillBtn"\x3e${nls.colorFill}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"hide indent" data-dojo-attach-point\x3d"colorFillOptions"\x3e\r\n      \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"backgroundColorPickerEditor"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"unit-item"\x3e\r\n      \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"imageFillBtn" id\x3d"imageFillBtn" name\x3d"bg-type" /\x3e\r\n      \x3clabel for\x3d"imageFillBtn"\x3e${nls.imageFill}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\r\n  \x3cdiv class\x3d"hide indent" data-dojo-attach-point\x3d"imageFillOptions"\x3e\r\n    \x3cdiv class\x3d"clearFix"\x3e\r\n      \x3cdiv class\x3d"jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"image-chooser-base" data-dojo-attach-point\x3d"imageChooser"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"file-name jimu-float-leading" data-dojo-attach-point\x3d"fileName"\x3e${nls.noFileChosen}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"hide clearFix types" data-dojo-attach-point\x3d"fillsType"\x3e\r\n      \x3cfieldset id\x3d"img-type"\x3e\r\n        \x3cdiv class\x3d"unit-item fillstype jimu-float-leading" data-dojo-attach-point\x3d"sizeFill"\x3e\r\n          \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"fill" id\x3d"fill" name\x3d"img-type" /\x3e\r\n          \x3clabel for\x3d"fill"\x3e${nls.sizeFill}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"unit-item fillstype jimu-float-leading hide" data-dojo-attach-point\x3d"sizeFit"\x3e\r\n          \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"fit" id\x3d"fit" name\x3d"img-type" /\x3e\r\n          \x3clabel for\x3d"fit"\x3e${nls.sizeFit}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"unit-item fillstype jimu-float-leading" data-dojo-attach-point\x3d"sizeStretch"\x3e\r\n          \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"stretch" id\x3d"stretch" name\x3d"img-type" /\x3e\r\n          \x3clabel for\x3d"stretch"\x3e${nls.sizeStretch}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"unit-item fillstype jimu-float-leading hide" data-dojo-attach-point\x3d"sizeCenter"\x3e\r\n          \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"center" id\x3d"center" name\x3d"img-type" /\x3e\r\n          \x3clabel for\x3d"center"\x3e${nls.sizeCenter}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"unit-item fillstype jimu-float-leading" data-dojo-attach-point\x3d"sizeTile"\x3e\r\n          \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"tile" id\x3d"tile" name\x3d"img-type" /\x3e\r\n          \x3clabel for\x3d"tile"\x3e${nls.sizeTile}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Splash/setting/SizeSelector.html":'\x3cdiv class\x3d"size-selector clearFix"\x3e\r\n  \x3cdiv class\x3d"titles"\x3e${nls.size}\x3c/div\x3e\r\n  \x3cdiv class\x3d"sizes jimu-float-leading"\x3e\r\n    \x3cdiv class\x3d"size-box-container" title\x3d"25%"\x3e\r\n      \x3cdiv class\x3d"size-box percent25" data-dojo-attach-point\x3d"percent25"\x3e\x3c/div\x3e\r\n      25%\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"size-box-container" title\x3d"50%"\x3e\r\n      \x3cdiv class\x3d"size-box percent50" data-dojo-attach-point\x3d"percent50"\x3e\x3c/div\x3e\r\n      50%\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"size-box-container" title\x3d"75%"\x3e\r\n      \x3cdiv class\x3d"size-box percent75" data-dojo-attach-point\x3d"percent75"\x3e\x3c/div\x3e\r\n      75%\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"size-box-container" title\x3d"100%"\x3e\r\n      \x3cdiv class\x3d"size-box percent100" data-dojo-attach-point\x3d"percent100"\x3e\x3c/div\x3e\r\n      100%\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"size-box-container" title\x3d"${nls.custom}"\x3e\r\n      \x3cdiv class\x3d"size-box custom" data-dojo-attach-point\x3d"custom"\x3e\x3c/div\x3e\r\n      ${nls.custom}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"wh" class\x3d"wh jimu-float-leading hide"\x3e\r\n    \x3cdiv class\x3d"wh-item"\x3e\r\n      \x3cdiv class\x3d"lable"\x3e${nls.width}\x3c/div\x3e\r\n      \x3cdiv class\x3d"inputs"\x3e\r\n        \x3cinput type\x3d"text" class\x3d"text-box" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"width"\x3e\r\n        \x3cspan class\x3d"unit"\x3epx\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"wh-item"\x3e\r\n      \x3cdiv class\x3d"lable"\x3e${nls.height}\x3c/div\x3e\r\n      \x3cdiv class\x3d"inputs"\x3e\r\n        \x3cinput type\x3d"text" class\x3d"text-box" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"height"\x3e\r\n        \x3cspan class\x3d"unit"\x3epx\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:widgets/Splash/setting/AlignSelector.html":'\x3cdiv class\x3d"align-selector clearFix"\x3e\r\n  \x3cdiv class\x3d"titles"\x3e${nls.contentAlign}\x3c/div\x3e\r\n  \x3cdiv class\x3d"aligns jimu-float-leading"\x3e\r\n    \x3cdiv class\x3d"align-box-container" title\x3d"${nls.alignTop}"\x3e\r\n      \x3cdiv class\x3d"align-box top" data-dojo-attach-point\x3d"top"\x3e\x3c/div\x3e${nls.alignTop}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"align-box-container" title\x3d"${nls.alignMiddle}"\x3e\r\n      \x3cdiv class\x3d"align-box middle" data-dojo-attach-point\x3d"middle"\x3e\x3c/div\x3e${nls.alignMiddle}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Splash/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height: 100%;"\x3e\r\n  \x3cdiv class\x3d"instruction" data-dojo-attach-point\x3d"instructionNode"\x3e\r\n    \x3cspan class\x3d"instruction-inner"\x3e${nls.instruction}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- tabs --\x3e\r\n  \x3cdiv class\x3d"tabs" data-dojo-attach-point\x3d"tabsContainer"\x3e\r\n    \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"contentTab"\x3e\r\n      \x3cdiv class\x3d"tab-description"\x3e${nls.contentDescription}\x3c/div\x3e\r\n      \x3cdiv class\x3d"editor-container" data-dojo-attach-point\x3d"editorContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"editor"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"appearance-tab" data-dojo-attach-point\x3d"appearanceTab"\x3e\r\n      \x3cdiv class\x3d"tab-description"\x3e${nls.appearanceDescription}\x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"sizeSelector"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"alignSelector"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"backgroundSelector"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv class\x3d"titles"\x3e${nls.buttonColor}\x3c/div\x3e\r\n        \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"buttonColorPickerEditor"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv class\x3d"titles"\x3e${nls.buttonText}\x3c/div\x3e\r\n        \x3cinput class\x3d"jimu-input buttonText" type\x3d"text" value\x3d"${nls.ok}" data-dojo-attach-point\x3d"buttonText" data-dojo-attach-event\x3d"blur:_onButtonTextBlur"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv class\x3d"titles"\x3e${nls.confirmLabelColor}\x3c/div\x3e\r\n        \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"confirmColorPickerEditor"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"options-tab" data-dojo-attach-point\x3d"optionsTab"\x3e\r\n      \x3cdiv class\x3d"tab-description"\x3e${nls.optionsDescription}\x3c/div\x3e\r\n      \x3cdiv class\x3d"splash-footer" data-dojo-attach-point\x3d"splashFooterNode"\x3e\r\n        \x3cdiv class\x3d"require-list"\x3e\r\n          \x3cfieldset id\x3d"require-type"\x3e\r\n            \x3cdiv class\x3d"require-item" data-dojo-attach-point\x3d"noRequireConfirmSplash"\x3e\r\n              \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"require-type" id\x3d"noRequireRadio" data-dojo-attach-point\x3d"noRequireRadio"/\x3e\r\n              \x3clabel for\x3d"noRequireRadio" class\x3d"jimu-leading-margin025"\x3e${nls.noRequireConfirm}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"showOption"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"require-item" data-dojo-attach-point\x3d"requireConfirmSplash"\x3e\r\n              \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"require-type" id\x3d"requireConfirmRadio" data-dojo-attach-point\x3d"requireConfirmRadio"/\x3e\r\n              \x3clabel for\x3d"requireConfirmRadio" class\x3d"jimu-leading-margin025"\x3e${nls.requireConfirm}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3cdiv class\x3d"confirm-container" data-dojo-attach-point\x3d"confirmContainer"\x3e\r\n            \x3cdiv class\x3d"confirm-text"\x3e\r\n              \x3cspan class\x3d"spinner-label jimu-ellipsis" title\x3d"${nls.confirmLabel}"\x3e${nls.confirmLabel}\x3c/span\x3e\r\n              \x3cinput class\x3d"jimu-input jimu-float-trailing" type\x3d"text" value\x3d"${nls.defaultConfirmText}" data-dojo-attach-point\x3d"confirmText" data-dojo-attach-event\x3d"blur:_onConfirmTextBlur"\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"confirmOption"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Splash/setting/css/style.css":'.jimu-widget-splash-setting{margin:0; padding:0; font-size:14px; position: absolute; overflow-y: hidden; top: 0; bottom: 0; left: 0; right: 0; letter-spacing: 0.38px;}.jimu-widget-splash-setting .instruction {margin-bottom: 10px;}.jimu-widget-splash-setting .tabs {font-family: "Avenir Light"; color: #000000; height: 100%;}.jimu-widget-splash-setting .tabs .tab-description {margin: 10px 0;}.jimu-widget-splash-setting .jimu-tab\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 14px;}.jimu-widget-splash-setting .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 3px solid #24b5cc; font-family: "Avenir Heavy"; color: #000000;}.jimu-widget-splash-setting .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 14px; margin: 20px 0 10px 0;}.jimu-widget-splash-setting .tabs .hide{display: none;}.jimu-widget-splash-setting .tabs .indent{margin-left: 20px; margin-top: 10px;}.jimu-widget-splash-setting .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;}.jimu-widget-splash-setting .tabs .clearFix {*overflow: hidden; *zoom: 1;}.jimu-widget-splash-setting .tabs .clearFix:after {display: table; content: ""; width: 0; clear: both;}.jimu-widget-splash-setting .tabs .view{height: 100%; overflow-y: auto;}.jimu-widget-splash-setting .tabs .jimu-tab\x3e.jimu-viewstack{padding-bottom: 30px;}.jimu-widget-splash-setting .content-tab{}.jimu-widget-splash-setting .content-tab .editor-container{}.jimu-widget-splash-setting .content-tab .editor-container .dijitEditorIFrameContainer textarea {resize: none;}.jimu-widget-splash-setting .appearance-tab{overflow-y: auto; height: 490px;}.jimu-widget-splash-setting .appearance-tab .size-selector .size-box-container{display: inline-block; text-align: center; margin: 0 10px 0 0; width: 80px; -o-text-overflow: ellipsis; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-splash-setting .appearance-tab .size-selector .size-box{width:80px; height:60px; background: no-repeat; margin-bottom: 5px;}.jimu-widget-splash-setting .appearance-tab .size-selector .percent25{background: url("../../images/percent25.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .percent25.selected{background: url("../../images/percent25_selected.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .percent50{background: url("../../images/percent50.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .percent50.selected{background: url("../../images/percent50_selected.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .percent75{background: url("../../images/percent75.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .percent75.selected{background: url("../../images/percent75_selected.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .percent100{background: url("../../images/percent100.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .percent100.selected{background: url("../../images/percent100_selected.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .custom{background: url("../../images/custom.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .custom.selected{background: url("../../images/custom_selected.svg") center center no-repeat;;}.jimu-widget-splash-setting .appearance-tab .size-selector .custom-label{vertical-align: top; line-height: 20px;}.jimu-rtl .jimu-widget-splash-setting .appearance-tab .sizes\x3e:first-child{margin-right: 0;}.jimu-widget-splash-setting .appearance-tab .size-selector .wh{margin: 0 14px;}.jimu-widget-splash-setting .appearance-tab .size-selector .wh .wh-item{display: inline-block; margin-right: 10px;}.jimu-widget-splash-setting .appearance-tab .size-selector .wh .wh-item .lable{font-family: "Avenir Medium"; font-size: 12px; color: #353535; margin:0 0 5px 0; width: 96px; -o-text-overflow: ellipsis; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-splash-setting .appearance-tab .size-selector .wh .inputs{width:96px; border: 1px solid #d9dde0;}.jimu-widget-splash-setting .appearance-tab .size-selector .wh .inputs .text-box{width: 70px; border: none;}.jimu-widget-splash-setting .appearance-tab .size-selector .wh .inputs .unit{color: #898989; letter-spacing: 0;}.jimu-widget-splash-setting .appearance-tab .align-selector .align-box-container{display: inline-block; text-align: center; margin: 0 10px; width:50px; -o-text-overflow: ellipsis; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-splash-setting .appearance-tab .align-selector .align-box{width:40px; height:36px; background: no-repeat; margin: 0 5px 5px 5px;}.jimu-widget-splash-setting .appearance-tab .align-selector .top{background: url("../../images/top.svg") center center no-repeat; border: none;}.jimu-widget-splash-setting .appearance-tab .align-selector .top.selected{background: url("../../images/top_selected.svg") center center no-repeat; border: 1px #24B5CC solid;}.jimu-widget-splash-setting .appearance-tab .align-selector .middle{background: url("../../images/middle.svg") center center no-repeat; border: none;}.jimu-widget-splash-setting .appearance-tab .align-selector .middle.selected{background: url("../../images/middle_selected.svg") center center no-repeat; border: 1px #24B5CC solid;}.jimu-widget-splash-setting .appearance-tab .jimu-image-chooser{height:30px; width:124px; background: #24B5CC; border: 1px solid #24B5CC;}.jimu-widget-splash-setting .appearance-tab .file-name{font-size: 12px; line-height: 33px; height: 33px; color: #000000; margin: 0 20px 0 20px;}.jimu-widget-splash-setting .appearance-tab .types\x3e:first-child{margin-left: 0;}.jimu-rtl .jimu-widget-splash-setting .appearance-tab .types\x3e:first-child{margin-right: 0;}.jimu-widget-splash-setting .appearance-tab .fillstype{margin: 10px 20px 0 20px;}.jimu-widget-splash-setting .appearance-tab .buttonText{width: 290px; margin-bottom: 10px;}.jimu-widget-splash-setting .instruction span{color: #596679;}.jimu-widget-splash-setting .editor-container{position: absolute; top: 34px; bottom: 165px; left: 0; right: 0; border: 1px solid #d2dae2; background-color: #fafafc;}.jimu-widget-splash-setting .editor-container .dijitEditorIFrameContainer{position: relative; width: 100%; overflow: hidden;}.jimu-widget-splash-setting .editor-container .dijitEditorIFrameContainer {padding-top: 0;}.jimu-widget-splash-setting .editor-container .uploaderInsideNode embed {display: none;}.jimu-widget-splash-setting .splash-footer{color: #596679; height: 155px; margin-top: 20px;}.jimu-widget-splash-setting .splash-footer .require-continue{position: absolute; top: 0;}.jimu-widget-splash-setting .splash-footer .require-item{margin-bottom: 10px;}.jimu-widget-splash-setting .splash-footer .option-text{display: none; margin: 10px 0 15px 23px;}.jimu-widget-splash-setting .splash-footer .confirm-container{display: none; margin-left: 20px; margin-bottom: 10px;}.jimu-widget-splash-setting .splash-footer .confirm-text,.jimu-widget-splash-setting .splash-footer .confirm-option{width: 100%; margin-top: 10px;}.jimu-widget-splash-setting .splash-footer .spinner-label{line-height: 30px; margin-right: 10px; display: inline-block;}.jimu-widget-splash-setting .splash-footer .set-background,.jimu-widget-splash-setting .splash-footer .set-background *{vertical-align: middle;}.jimu-widget-splash-setting .splash-footer input{width: 755px; color: #7989a0;}.jimu-widget-splash-setting .dojoxEditorUploadNorm.dijitButtonDisabled {background: #ccc url(../../css/images/uploadImageIcon_disabled.gif) no-repeat 2px 2px;}',
"*now":function(u){u(['dojo/i18n!*preload*widgets/Splash/setting/nls/Setting*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/aspect dojo/cookie dojo/sniff dojo/query jimu/dijit/ColorTransparencyPicker ./BackgroundSelector ./SizeSelector ./AlignSelector dijit/_WidgetsInTemplateMixin dijit/Editor jimu/dijit/EditorXssFilter jimu/utils jimu/BaseWidgetSetting jimu/dijit/CheckBox jimu/dijit/TabContainer jimu/dijit/LoadingShelter dojo/Deferred dojo/NodeList-manipulate jimu/dijit/RadioBtn dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dijit/ToolbarSeparator dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),function(u,
w,G,A,E,d,e,f,b,h,m,k,q,z,D,c,l,F,O,p,t){return u([l,q],{baseClass:"jimu-widget-splash-setting",_defaultSize:{mode:"wh",wh:{w:600,h:264}},_defaultColor:"#485566",_defaultConfirmColor:"#ffffff",_defaultTransparency:0,postMixInProperties:function(){this.nls=w.mixin(this.nls,window.jimuNls.common);this.editorXssFilter=D.getInstance()},postCreate:function(){this.shelter=new p({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this.tab=new O({tabs:[{title:this.nls.content,content:this.contentTab},
{title:this.nls.appearance,content:this.appearanceTab},{title:this.nls.options,content:this.optionsTab}],selected:this.nls.content});this.tab.placeAt(this.tabsContainer);this.tab.startup();this.own(A(this.tab,"tabChanged",w.hitch(this,function(v){v===this.nls.content&&this.resize()})));this.inherited(arguments)},initContentTab:function(){var v=document.getElementsByTagName("head")[0],B=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";f('link[href\x3d"'+B+'"]',v)[0]||c.loadStyleLink("editor_plugins_resources_TextColor",
B);B=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";f('link[href\x3d"'+B+'"]',v)[0]||c.loadStyleLink("editor_plugins_resources_editorPlugins",B);B=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";f('link[href\x3d"'+B+'"]',v)[0]||c.loadStyleLink("editor_plugins_resources_PasteFromWord",B);this.initEditor()},initAppearanceTab:function(){this.sizeSelector=new m({nls:this.nls},this.sizeSelector);this.backgroundSelector=new h({nls:this.nls},this.backgroundSelector);
this.backgroundSelector.startup();this.alignSelector=new k({nls:this.nls},this.alignSelector);this.alignSelector.startup();this.buttonColorPicker=new b({},this.buttonColorPickerEditor);this.buttonColorPicker.startup();this.confirmColorPicker=new b({},this.confirmColorPickerEditor);this.confirmColorPicker.startup()},initOptionsTab:function(){this.own(A(this.requireConfirmSplash,"click",w.hitch(this,function(){this.set("requireConfirm",!0)})));this.own(A(this.noRequireConfirmSplash,"click",w.hitch(this,
function(){this.set("requireConfirm",!1)})));this.own(this.watch("requireConfirm",w.hitch(this,this._changeRequireConfirm)));this.own(E.before(this,"getConfig",w.hitch(this,this._beforeGetConfig)));this.showOption=new F({label:this.nls.optionText,checked:!1},this.showOption);this.showOption.startup();G.addClass(this.showOption.domNode,"option-text");this.confirmOption=new F({label:this.nls.confirmOption,checked:!1},this.confirmOption);this.confirmOption.startup();G.addClass(this.confirmOption.domNode,
"confirm-option")},startup:function(){this.inherited(arguments);this.shelter.show();this.config.splash||(this.config.splash={});this.initContentTab();this.initAppearanceTab();this.initOptionsTab();this.setConfig(this.config);this.resize()},initEditor:function(){this.editor=new z({plugins:["bold","italic","underline",c.getEditorTextColor("splash"),c.getEditorBackgroundColor("splash"),"|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent",
"outdent"],extraPlugins:["|","createLink","unlink","pastefromword","|","undo","redo","|","chooseImage","|","viewsource","toolbarlinebreak",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},"fontSize","formatBlock"],style:"font-family:Verdana;"},this.editor);G.setStyle(this.editor.domNode,{width:"100%",height:"100%"});this.editor.startup();var v=G.getMarginBox(this.instructionNode),B=G.getMarginBox(this.splashFooterNode);
G.setStyle(this.editorContainer,{top:v.h+8+"px",bottom:B.h+10+10+"px"});8!==e("ie")?this.editor.resize({w:"100%",h:"100%"}):(v=G.getMarginBox(this.editorContainer),this.editor.resize({w:v.w,h:v.h}))},setConfig:function(v){this.config=v;this._setWidthForOldVersion().then(w.hitch(this,function(){this.editor.set("value",this.editorXssFilter.sanitize(v.splash.splashContent||this.nls.defaultContent));this.set("requireConfirm",v.splash.requireConfirm);this.showOption.setValue(v.splash.showOption);this.confirmOption.setValue(v.splash.confirmEverytime);
G.setAttr(this.confirmText,"value",c.stripHTML(v.splash.confirm.text||this.nls.defaultConfirmText));this.confirmColorPicker.setValues({color:v.splash.confirm.color||this._defaultConfirmColor,transparency:v.splash.confirm.transparency||this._defaultTransparency});this.sizeSelector.setValue(v.splash.size||this._defaultSize);"undefined"!==typeof v.splash.image&&this.imageChooser.setDefaultSelfSrc(v.splash.image);this.alignSelector.setValue(v.splash.contentVertical);this.backgroundSelector.setValues(v);
this.buttonColorPicker.setValues({color:v.splash.button.color||this._defaultColor,transparency:v.splash.button.transparency||this._defaultTransparency});G.setAttr(this.buttonText,"value",c.stripHTML(v.splash.button.text||this.nls.ok));this.shelter.hide();this.resize();setTimeout(w.hitch(this,function(){this.resize()}),200)}))},_beforeGetConfig:function(){var v=this._getCookieKey();d(v,!0,{expires:1E3,path:"/"})},_getCookieKey:function(){return"isfirst_"+encodeURIComponent(c.getAppIdFromUrl())},isValid:function(){return this.backgroundSelector.isValid()&&
this.buttonColorPicker.isValid()&&this.confirmColorPicker.isValid()},getConfig:function(){if(!this.isValid())return!1;this.config.splash.splashContent=this._getEditorValue();this.config.splash.size=this.sizeSelector.getValue();this.config.splash.requireConfirm=this.get("requireConfirm");this.config.splash.showOption=this.showOption.getValue();this.config.splash.confirmEverytime=this.confirmOption.getValue();this.get("requireConfirm")?this.config.splash.confirm.text=c.stripHTML(this.confirmText.value||
""):this.config.splash.confirm.text="";var v=this.confirmColorPicker.getValues();v&&(this.config.splash.confirm.color=v.color,this.config.splash.confirm.transparency=v.transparency);this.config.splash.background=this.backgroundSelector.getValues();this.config.splash.button={};if(v=this.buttonColorPicker.getValues())this.config.splash.button.color=v.color,this.config.splash.button.transparency=v.transparency;this.config.splash.button.text=c.stripHTML(this.buttonText.value||"");this.config.splash.contentVertical=
this.alignSelector.getValue();return this.config},_changeRequireConfirm:function(){var v=null;this.get("requireConfirm")?(v=this.requireConfirmRadio,G.setStyle(this.confirmContainer,"display","block"),G.setStyle(this.showOption.domNode,"display","none")):(v=this.noRequireRadio,G.setStyle(this.showOption.domNode,"display","block"),G.setStyle(this.confirmContainer,"display","none"));v&&v.setChecked&&v.setChecked(!0)},destroy:function(){var v=document.getElementsByTagName("head")[0];f('link[id^\x3d"editor_plugins_resources"]',
v).remove();this.inherited(arguments)},_onConfirmTextBlur:function(){this.confirmText.value=c.stripHTML(this.confirmText.value||"")},_onButtonTextBlur:function(){this.buttonText.value=c.stripHTML(this.buttonText.value||"")},_getEditorValue:function(){var v=this.editor.get("value");""===v&&(v="\x3cp\x3e\x3c/p\x3e");return v},_setWidthForOldVersion:function(){var v=new t,B=this.config.splash.size;if(!0===("wh"===B.mode&&"undefined"!==typeof B.wh&&null===B.wh.h))return c.getEditorContentHeight(this.config.splash.splashContent,
this.domNode,{contentWidth:560,contentMarginTop:20,footerHeight:98}).then(w.hitch(this,function(L){return B.wh.h=L}));v.resolve();return v},resize:function(){var v=G.getContentBox(this.editorContainer),B=f(".dijitEditorIFrameContainer",this.editorContainer)[0],L;this.editor&&this.editor.header&&(L=G.getContentBox(this.editor.header));B&&v&&L&&G.setStyle(B,"height",v.h-L.h-4+"px")}})});